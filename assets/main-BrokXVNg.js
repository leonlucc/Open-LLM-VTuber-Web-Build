var Ml=Object.defineProperty;var $l=(_e,_,et)=>_ in _e?Ml(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et;var pn=(_e,_,et)=>$l(_e,typeof _!="symbol"?_+"":_,et);function _mergeNamespaces(_e,_){for(var et=0;et<_.length;et++){const tt=_[et];if(typeof tt!="string"&&!Array.isArray(tt)){for(const nt in tt)if(nt!=="default"&&!(nt in _e)){const it=Object.getOwnPropertyDescriptor(tt,nt);it&&Object.defineProperty(_e,nt,it.get?it:{enumerable:!0,get:()=>tt[nt]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const nt of document.querySelectorAll('link[rel="modulepreload"]'))tt(nt);new MutationObserver(nt=>{for(const it of nt)if(it.type==="childList")for(const at of it.addedNodes)at.tagName==="LINK"&&at.rel==="modulepreload"&&tt(at)}).observe(document,{childList:!0,subtree:!0});function et(nt){const it={};return nt.integrity&&(it.integrity=nt.integrity),nt.referrerPolicy&&(it.referrerPolicy=nt.referrerPolicy),nt.crossOrigin==="use-credentials"?it.credentials="include":nt.crossOrigin==="anonymous"?it.credentials="omit":it.credentials="same-origin",it}function tt(nt){if(nt.ep)return;nt.ep=!0;const it=et(nt);fetch(nt.href,it)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function getAugmentedNamespace(_e){if(_e.__esModule)return _e;var _=_e.default;if(typeof _=="function"){var et=function tt(){return this instanceof tt?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};et.prototype=_.prototype}else et={};return Object.defineProperty(et,"__esModule",{value:!0}),Object.keys(_e).forEach(function(tt){var nt=Object.getOwnPropertyDescriptor(_e,tt);Object.defineProperty(et,tt,nt.get?nt:{enumerable:!0,get:function(){return _e[tt]}})}),et}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$3=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$3=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(_e){return _e===null||typeof _e!="object"?null:(_e=z$2&&_e[z$2]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(_e,_,et){this.props=_e,this.context=_,this.refs=D$1,this.updater=et||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(_e,_){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,_,"setState")};E$1.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(_e,_,et){this.props=_e,this.context=_,this.refs=D$1,this.updater=et||B$1}var H$2=G$1.prototype=new F;H$2.constructor=G$1;C$1(H$2,E$1.prototype);H$2.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(_e,_,et){var tt,nt={},it=null,at=null;if(_!=null)for(tt in _.ref!==void 0&&(at=_.ref),_.key!==void 0&&(it=""+_.key),_)J.call(_,tt)&&!L$1.hasOwnProperty(tt)&&(nt[tt]=_[tt]);var ot=arguments.length-2;if(ot===1)nt.children=et;else if(1<ot){for(var st=Array(ot),dt=0;dt<ot;dt++)st[dt]=arguments[dt+2];nt.children=st}if(_e&&_e.defaultProps)for(tt in ot=_e.defaultProps,ot)nt[tt]===void 0&&(nt[tt]=ot[tt]);return{$$typeof:l$3,type:_e,key:it,ref:at,props:nt,_owner:K$1.current}}function N$2(_e,_){return{$$typeof:l$3,type:_e.type,key:_,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$1(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$3}function escape$1(_e){var _={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(et){return _[et]})}var P$2=/\/+/g;function Q$1(_e,_){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape$1(""+_e.key):_.toString(36)}function R$1(_e,_,et,tt,nt){var it=typeof _e;(it==="undefined"||it==="boolean")&&(_e=null);var at=!1;if(_e===null)at=!0;else switch(it){case"string":case"number":at=!0;break;case"object":switch(_e.$$typeof){case l$3:case n$3:at=!0}}if(at)return at=_e,nt=nt(at),_e=tt===""?"."+Q$1(at,0):tt,I$1(nt)?(et="",_e!=null&&(et=_e.replace(P$2,"$&/")+"/"),R$1(nt,_,et,"",function(dt){return dt})):nt!=null&&(O$1(nt)&&(nt=N$2(nt,et+(!nt.key||at&&at.key===nt.key?"":(""+nt.key).replace(P$2,"$&/")+"/")+_e)),_.push(nt)),1;if(at=0,tt=tt===""?".":tt+":",I$1(_e))for(var ot=0;ot<_e.length;ot++){it=_e[ot];var st=tt+Q$1(it,ot);at+=R$1(it,_,et,st,nt)}else if(st=A$2(_e),typeof st=="function")for(_e=st.call(_e),ot=0;!(it=_e.next()).done;)it=it.value,st=tt+Q$1(it,ot++),at+=R$1(it,_,et,st,nt);else if(it==="object")throw _=String(_e),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return at}function S$2(_e,_,et){if(_e==null)return _e;var tt=[],nt=0;return R$1(_e,tt,"","",function(it){return _.call(et,it,nt++)}),tt}function T$1(_e){if(_e._status===-1){var _=_e._result;_=_(),_.then(function(et){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=et)},function(et){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=et)}),_e._status===-1&&(_e._status=0,_e._result=_)}if(_e._status===1)return _e._result.default;throw _e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(_e,_,et){S$2(_e,function(){_.apply(this,arguments)},et)},count:function(_e){var _=0;return S$2(_e,function(){_++}),_},toArray:function(_e){return S$2(_e,function(_){return _})||[]},only:function(_e){if(!O$1(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$1;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(_e,_,et){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var tt=C$1({},_e.props),nt=_e.key,it=_e.ref,at=_e._owner;if(_!=null){if(_.ref!==void 0&&(it=_.ref,at=K$1.current),_.key!==void 0&&(nt=""+_.key),_e.type&&_e.type.defaultProps)var ot=_e.type.defaultProps;for(st in _)J.call(_,st)&&!L$1.hasOwnProperty(st)&&(tt[st]=_[st]===void 0&&ot!==void 0?ot[st]:_[st])}var st=arguments.length-2;if(st===1)tt.children=et;else if(1<st){ot=Array(st);for(var dt=0;dt<st;dt++)ot[dt]=arguments[dt+2];tt.children=ot}return{$$typeof:l$3,type:_e.type,key:nt,ref:it,props:tt,_owner:at}};react_production_min.createContext=function(_e){return _e={$$typeof:u$1,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t$3,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$2;react_production_min.createFactory=function(_e){var _=M$2.bind(null,_e);return _.type=_e,_};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$3,render:_e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(_e){return{$$typeof:y$2,_payload:{_status:-1,_result:_e},_init:T$1}};react_production_min.memo=function(_e,_){return{$$typeof:x$2,type:_e,compare:_===void 0?null:_}};react_production_min.startTransition=function(_e){var _=V$1.transition;V$1.transition={};try{_e()}finally{V$1.transition=_}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(_e,_){return U$1.current.useCallback(_e,_)};react_production_min.useContext=function(_e){return U$1.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$1.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,_){return U$1.current.useEffect(_e,_)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(_e,_,et){return U$1.current.useImperativeHandle(_e,_,et)};react_production_min.useInsertionEffect=function(_e,_){return U$1.current.useInsertionEffect(_e,_)};react_production_min.useLayoutEffect=function(_e,_){return U$1.current.useLayoutEffect(_e,_)};react_production_min.useMemo=function(_e,_){return U$1.current.useMemo(_e,_)};react_production_min.useReducer=function(_e,_,et){return U$1.current.useReducer(_e,_,et)};react_production_min.useRef=function(_e){return U$1.current.useRef(_e)};react_production_min.useState=function(_e){return U$1.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,_,et){return U$1.current.useSyncExternalStore(_e,_,et)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$3=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_e,_,et){var tt,nt={},it=null,at=null;et!==void 0&&(it=""+et),_.key!==void 0&&(it=""+_.key),_.ref!==void 0&&(at=_.ref);for(tt in _)m$4.call(_,tt)&&!p$3.hasOwnProperty(tt)&&(nt[tt]=_[tt]);if(_e&&_e.defaultProps)for(tt in _=_e.defaultProps,_)nt[tt]===void 0&&(nt[tt]=_[tt]);return{$$typeof:k$3,type:_e,key:it,ref:at,props:nt,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function _(kt,Nt){var Vt=kt.length;kt.push(Nt);e:for(;0<Vt;){var zt=Vt-1>>>1,Xt=kt[zt];if(0<nt(Xt,Nt))kt[zt]=Nt,kt[Vt]=Xt,Vt=zt;else break e}}function et(kt){return kt.length===0?null:kt[0]}function tt(kt){if(kt.length===0)return null;var Nt=kt[0],Vt=kt.pop();if(Vt!==Nt){kt[0]=Vt;e:for(var zt=0,Xt=kt.length,Wt=Xt>>>1;zt<Wt;){var nr=2*(zt+1)-1,Jt=kt[nr],lr=nr+1,pr=kt[lr];if(0>nt(Jt,Vt))lr<Xt&&0>nt(pr,Jt)?(kt[zt]=pr,kt[lr]=Vt,zt=lr):(kt[zt]=Jt,kt[nr]=Vt,zt=nr);else if(lr<Xt&&0>nt(pr,Vt))kt[zt]=pr,kt[lr]=Vt,zt=lr;else break e}}return Nt}function nt(kt,Nt){var Vt=kt.sortIndex-Nt.sortIndex;return Vt!==0?Vt:kt.id-Nt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;_e.unstable_now=function(){return it.now()}}else{var at=Date,ot=at.now();_e.unstable_now=function(){return at.now()-ot}}var st=[],dt=[],ht=1,ct=null,ut=3,ft=!1,gt=!1,mt=!1,vt=typeof setTimeout=="function"?setTimeout:null,yt=typeof clearTimeout=="function"?clearTimeout:null,bt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _t(kt){for(var Nt=et(dt);Nt!==null;){if(Nt.callback===null)tt(dt);else if(Nt.startTime<=kt)tt(dt),Nt.sortIndex=Nt.expirationTime,_(st,Nt);else break;Nt=et(dt)}}function xt(kt){if(mt=!1,_t(kt),!gt)if(et(st)!==null)gt=!0,$t(St);else{var Nt=et(dt);Nt!==null&&Lt(xt,Nt.startTime-kt)}}function St(kt,Nt){gt=!1,mt&&(mt=!1,yt(Ct),Ct=-1),ft=!0;var Vt=ut;try{for(_t(Nt),ct=et(st);ct!==null&&(!(ct.expirationTime>Nt)||kt&&!Pt());){var zt=ct.callback;if(typeof zt=="function"){ct.callback=null,ut=ct.priorityLevel;var Xt=zt(ct.expirationTime<=Nt);Nt=_e.unstable_now(),typeof Xt=="function"?ct.callback=Xt:ct===et(st)&&tt(st),_t(Nt)}else tt(st);ct=et(st)}if(ct!==null)var Wt=!0;else{var nr=et(dt);nr!==null&&Lt(xt,nr.startTime-Nt),Wt=!1}return Wt}finally{ct=null,ut=Vt,ft=!1}}var Tt=!1,wt=null,Ct=-1,Et=5,At=-1;function Pt(){return!(_e.unstable_now()-At<Et)}function Rt(){if(wt!==null){var kt=_e.unstable_now();At=kt;var Nt=!0;try{Nt=wt(!0,kt)}finally{Nt?It():(Tt=!1,wt=null)}}else Tt=!1}var It;if(typeof bt=="function")It=function(){bt(Rt)};else if(typeof MessageChannel<"u"){var Mt=new MessageChannel,Ot=Mt.port2;Mt.port1.onmessage=Rt,It=function(){Ot.postMessage(null)}}else It=function(){vt(Rt,0)};function $t(kt){wt=kt,Tt||(Tt=!0,It())}function Lt(kt,Nt){Ct=vt(function(){kt(_e.unstable_now())},Nt)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(kt){kt.callback=null},_e.unstable_continueExecution=function(){gt||ft||(gt=!0,$t(St))},_e.unstable_forceFrameRate=function(kt){0>kt||125<kt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Et=0<kt?Math.floor(1e3/kt):5},_e.unstable_getCurrentPriorityLevel=function(){return ut},_e.unstable_getFirstCallbackNode=function(){return et(st)},_e.unstable_next=function(kt){switch(ut){case 1:case 2:case 3:var Nt=3;break;default:Nt=ut}var Vt=ut;ut=Nt;try{return kt()}finally{ut=Vt}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(kt,Nt){switch(kt){case 1:case 2:case 3:case 4:case 5:break;default:kt=3}var Vt=ut;ut=kt;try{return Nt()}finally{ut=Vt}},_e.unstable_scheduleCallback=function(kt,Nt,Vt){var zt=_e.unstable_now();switch(typeof Vt=="object"&&Vt!==null?(Vt=Vt.delay,Vt=typeof Vt=="number"&&0<Vt?zt+Vt:zt):Vt=zt,kt){case 1:var Xt=-1;break;case 2:Xt=250;break;case 5:Xt=1073741823;break;case 4:Xt=1e4;break;default:Xt=5e3}return Xt=Vt+Xt,kt={id:ht++,callback:Nt,priorityLevel:kt,startTime:Vt,expirationTime:Xt,sortIndex:-1},Vt>zt?(kt.sortIndex=Vt,_(dt,kt),et(st)===null&&kt===et(dt)&&(mt?(yt(Ct),Ct=-1):mt=!0,Lt(xt,Vt-zt))):(kt.sortIndex=Xt,_(st,kt),gt||ft||(gt=!0,$t(St))),kt},_e.unstable_shouldYield=Pt,_e.unstable_wrapCallback=function(kt){var Nt=ut;return function(){var Vt=ut;ut=Nt;try{return kt.apply(this,arguments)}finally{ut=Vt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(_e){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+_e,et=1;et<arguments.length;et++)_+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+_e+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,_){ha(_e,_),ha(_e+"Capture",_)}function ha(_e,_){for(ea[_e]=_,_e=0;_e<_.length;_e++)da.add(_[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,_,et,tt){if(et!==null&&et.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return tt?!1:et!==null?!et.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,_,et,tt){if(_===null||typeof _>"u"||pa(_e,_,et,tt))return!0;if(tt)return!1;if(et!==null)switch(et.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function v$2(_e,_,et,tt,nt,it,at){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=tt,this.attributeNamespace=nt,this.mustUseProperty=et,this.propertyName=_e,this.type=_,this.sanitizeURL=it,this.removeEmptyString=at}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$1[_e]=new v$2(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var _=_e[0];z$1[_]=new v$2(_,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$1[_e]=new v$2(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$1[_e]=new v$2(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$1[_e]=new v$2(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$1[_e]=new v$2(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$1[_e]=new v$2(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$1[_e]=new v$2(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$1[_e]=new v$2(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$2(_,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$2(_,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$2(_,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$1[_e]=new v$2(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$1[_e]=new v$2(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,_,et,tt){var nt=z$1.hasOwnProperty(_)?z$1[_]:null;(nt!==null?nt.type!==0:tt||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(qa(_,et,nt,tt)&&(et=null),tt||nt===null?oa(_)&&(et===null?_e.removeAttribute(_):_e.setAttribute(_,""+et)):nt.mustUseProperty?_e[nt.propertyName]=et===null?nt.type===3?!1:"":et:(_=nt.attributeName,tt=nt.attributeNamespace,et===null?_e.removeAttribute(_):(nt=nt.type,et=nt===3||nt===4&&et===!0?"":""+et,tt?_e.setAttributeNS(tt,_,et):_e.setAttribute(_,et))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$1=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(et){var _=et.stack.trim().match(/\n( *(at )?)/);La=_&&_[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,_){if(!_e||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(dt){var tt=dt}Reflect.construct(_e,[],_)}else{try{_.call()}catch(dt){tt=dt}_e.call(_.prototype)}else{try{throw Error()}catch(dt){tt=dt}_e()}}catch(dt){if(dt&&tt&&typeof dt.stack=="string"){for(var nt=dt.stack.split(`
`),it=tt.stack.split(`
`),at=nt.length-1,ot=it.length-1;1<=at&&0<=ot&&nt[at]!==it[ot];)ot--;for(;1<=at&&0<=ot;at--,ot--)if(nt[at]!==it[ot]){if(at!==1||ot!==1)do if(at--,ot--,0>ot||nt[at]!==it[ot]){var st=`
`+nt[at].replace(" at new "," at ");return _e.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",_e.displayName)),st}while(1<=at&&0<=ot);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var _=_e.render;return _e=_e.displayName,_e||(_e=_.displayName||_.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return _=_e.displayName||null,_!==null?_:Qa(_e.type)||"Memo";case Ha:_=_e._payload,_e=_e._init;try{return Qa(_e(_))}catch{}}return null}function Ra(_e){var _=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=_.render,_e=_e.displayName||_e.name||"",_.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_);case 8:return _===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var _=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ua(_e){var _=Ta(_e)?"checked":"value",et=Object.getOwnPropertyDescriptor(_e.constructor.prototype,_),tt=""+_e[_];if(!_e.hasOwnProperty(_)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var nt=et.get,it=et.set;return Object.defineProperty(_e,_,{configurable:!0,get:function(){return nt.call(this)},set:function(at){tt=""+at,it.call(this,at)}}),Object.defineProperty(_e,_,{enumerable:et.enumerable}),{getValue:function(){return tt},setValue:function(at){tt=""+at},stopTracking:function(){_e._valueTracker=null,delete _e[_]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var _=_e._valueTracker;if(!_)return!0;var et=_.getValue(),tt="";return _e&&(tt=Ta(_e)?_e.checked?"true":"false":_e.value),_e=tt,_e!==et?(_.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,_){var et=_.checked;return A$1({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??_e._wrapperState.initialChecked})}function Za(_e,_){var et=_.defaultValue==null?"":_.defaultValue,tt=_.checked!=null?_.checked:_.defaultChecked;et=Sa(_.value!=null?_.value:et),_e._wrapperState={initialChecked:tt,initialValue:et,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function ab(_e,_){_=_.checked,_!=null&&ta(_e,"checked",_,!1)}function bb(_e,_){ab(_e,_);var et=Sa(_.value),tt=_.type;if(et!=null)tt==="number"?(et===0&&_e.value===""||_e.value!=et)&&(_e.value=""+et):_e.value!==""+et&&(_e.value=""+et);else if(tt==="submit"||tt==="reset"){_e.removeAttribute("value");return}_.hasOwnProperty("value")?cb(_e,_.type,et):_.hasOwnProperty("defaultValue")&&cb(_e,_.type,Sa(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(_e.defaultChecked=!!_.defaultChecked)}function db(_e,_,et){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var tt=_.type;if(!(tt!=="submit"&&tt!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+_e._wrapperState.initialValue,et||_===_e.value||(_e.value=_),_e.defaultValue=_}et=_e.name,et!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,et!==""&&(_e.name=et)}function cb(_e,_,et){(_!=="number"||Xa(_e.ownerDocument)!==_e)&&(et==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+et&&(_e.defaultValue=""+et))}var eb=Array.isArray;function fb(_e,_,et,tt){if(_e=_e.options,_){_={};for(var nt=0;nt<et.length;nt++)_["$"+et[nt]]=!0;for(et=0;et<_e.length;et++)nt=_.hasOwnProperty("$"+_e[et].value),_e[et].selected!==nt&&(_e[et].selected=nt),nt&&tt&&(_e[et].defaultSelected=!0)}else{for(et=""+Sa(et),_=null,nt=0;nt<_e.length;nt++){if(_e[nt].value===et){_e[nt].selected=!0,tt&&(_e[nt].defaultSelected=!0);return}_!==null||_e[nt].disabled||(_=_e[nt])}_!==null&&(_.selected=!0)}}function gb(_e,_){if(_.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},_,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,_){var et=_.value;if(et==null){if(et=_.children,_=_.defaultValue,et!=null){if(_!=null)throw Error(p$2(92));if(eb(et)){if(1<et.length)throw Error(p$2(93));et=et[0]}_=et}_==null&&(_=""),et=_}_e._wrapperState={initialValue:Sa(et)}}function ib(_e,_){var et=Sa(_.value),tt=Sa(_.defaultValue);et!=null&&(et=""+et,et!==_e.value&&(_e.value=et),_.defaultValue==null&&_e.defaultValue!==et&&(_e.defaultValue=et)),tt!=null&&(_e.defaultValue=""+tt)}function jb(_e){var _=_e.textContent;_===_e._wrapperState.initialValue&&_!==""&&_!==null&&(_e.value=_)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(_e,_){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb(_):_e==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,et,tt,nt){MSApp.execUnsafeLocalFunction(function(){return _e(_,et,tt,nt)})}:_e}(function(_e,_){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=_;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;_.firstChild;)_e.appendChild(_.firstChild)}});function ob(_e,_){if(_){var et=_e.firstChild;if(et&&et===_e.lastChild&&et.nodeType===3){et.nodeValue=_;return}}_e.textContent=_}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function(_){_=_+_e.charAt(0).toUpperCase()+_e.substring(1),pb[_]=pb[_e]})});function rb$1(_e,_,et){return _==null||typeof _=="boolean"||_===""?"":et||typeof _!="number"||_===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+_).trim():_+"px"}function sb(_e,_){_e=_e.style;for(var et in _)if(_.hasOwnProperty(et)){var tt=et.indexOf("--")===0,nt=rb$1(et,_[et],tt);et==="float"&&(et="cssFloat"),tt?_e.setProperty(et,nt):_e[et]=nt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,_){if(_){if(tb[_e]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(p$2(137,_e));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(p$2(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(p$2(61))}if(_.style!=null&&typeof _.style!="object")throw Error(p$2(62))}}function vb(_e,_){if(_e.indexOf("-")===-1)return typeof _.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$2(280));var _=_e.stateNode;_&&(_=Db(_),yb(_e.stateNode,_e.type,_))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,_=Ab;if(Ab=zb=null,Bb(_e),_)for(_e=0;_e<_.length;_e++)Bb(_[_e])}}function Gb(_e,_){return _e(_)}function Hb(){}var Ib=!1;function Jb(_e,_,et){if(Ib)return _e(_,et);Ib=!0;try{return Gb(_e,_,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,_){var et=_e.stateNode;if(et===null)return null;var tt=Db(et);if(tt===null)return null;et=tt[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(_e=_e.type,tt=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!tt;break e;default:_e=!1}if(_e)return null;if(et&&typeof et!="function")throw Error(p$2(231,_,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,_,et,tt,nt,it,at,ot,st){var dt=Array.prototype.slice.call(arguments,3);try{_.apply(et,dt)}catch(ht){this.onError(ht)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,_,et,tt,nt,it,at,ot,st){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,_,et,tt,nt,it,at,ot,st){if(Tb.apply(this,arguments),Ob){if(Ob){var dt=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=dt)}}function Vb(_e){var _=_e,et=_e;if(_e.alternate)for(;_.return;)_=_.return;else{_e=_;do _=_e,_.flags&4098&&(et=_.return),_e=_.return;while(_e)}return _.tag===3?et:null}function Wb(_e){if(_e.tag===13){var _=_e.memoizedState;if(_===null&&(_e=_e.alternate,_e!==null&&(_=_e.memoizedState)),_!==null)return _.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$2(188))}function Yb(_e){var _=_e.alternate;if(!_){if(_=Vb(_e),_===null)throw Error(p$2(188));return _!==_e?null:_e}for(var et=_e,tt=_;;){var nt=et.return;if(nt===null)break;var it=nt.alternate;if(it===null){if(tt=nt.return,tt!==null){et=tt;continue}break}if(nt.child===it.child){for(it=nt.child;it;){if(it===et)return Xb(nt),_e;if(it===tt)return Xb(nt),_;it=it.sibling}throw Error(p$2(188))}if(et.return!==tt.return)et=nt,tt=it;else{for(var at=!1,ot=nt.child;ot;){if(ot===et){at=!0,et=nt,tt=it;break}if(ot===tt){at=!0,tt=nt,et=it;break}ot=ot.sibling}if(!at){for(ot=it.child;ot;){if(ot===et){at=!0,et=it,tt=nt;break}if(ot===tt){at=!0,tt=it,et=nt;break}ot=ot.sibling}if(!at)throw Error(p$2(189))}}if(et.alternate!==tt)throw Error(p$2(190))}if(et.tag!==3)throw Error(p$2(188));return et.stateNode.current===et?_e:_}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var _=$b(_e);if(_!==null)return _;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,_){var et=_e.pendingLanes;if(et===0)return 0;var tt=0,nt=_e.suspendedLanes,it=_e.pingedLanes,at=et&268435455;if(at!==0){var ot=at&~nt;ot!==0?tt=tc(ot):(it&=at,it!==0&&(tt=tc(it)))}else at=et&~nt,at!==0?tt=tc(at):it!==0&&(tt=tc(it));if(tt===0)return 0;if(_!==0&&_!==tt&&!(_&nt)&&(nt=tt&-tt,it=_&-_,nt>=it||nt===16&&(it&4194240)!==0))return _;if(tt&4&&(tt|=et&16),_=_e.entangledLanes,_!==0)for(_e=_e.entanglements,_&=tt;0<_;)et=31-oc(_),nt=1<<et,tt|=_e[et],_&=~nt;return tt}function vc(_e,_){switch(_e){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,_){for(var et=_e.suspendedLanes,tt=_e.pingedLanes,nt=_e.expirationTimes,it=_e.pendingLanes;0<it;){var at=31-oc(it),ot=1<<at,st=nt[at];st===-1?(!(ot&et)||ot&tt)&&(nt[at]=vc(ot,_)):st<=_&&(_e.expiredLanes|=ot),it&=~ot}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var _=[],et=0;31>et;et++)_.push(_e);return _}function Ac(_e,_,et){_e.pendingLanes|=_,_!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,_=31-oc(_),_e[_]=et}function Bc(_e,_){var et=_e.pendingLanes&~_;_e.pendingLanes=_,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=_,_e.mutableReadLanes&=_,_e.entangledLanes&=_,_=_e.entanglements;var tt=_e.eventTimes;for(_e=_e.expirationTimes;0<et;){var nt=31-oc(et),it=1<<nt;_[nt]=0,tt[nt]=-1,_e[nt]=-1,et&=~it}}function Cc(_e,_){var et=_e.entangledLanes|=_;for(_e=_e.entanglements;et;){var tt=31-oc(et),nt=1<<tt;nt&_|_e[tt]&_&&(_e[tt]|=_),et&=~nt}}var C=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,_){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_.pointerId)}}function Tc(_e,_,et,tt,nt,it){return _e===null||_e.nativeEvent!==it?(_e={blockedOn:_,domEventName:et,eventSystemFlags:tt,nativeEvent:it,targetContainers:[nt]},_!==null&&(_=Cb(_),_!==null&&Fc(_)),_e):(_e.eventSystemFlags|=tt,_=_e.targetContainers,nt!==null&&_.indexOf(nt)===-1&&_.push(nt),_e)}function Uc(_e,_,et,tt,nt){switch(_){case"focusin":return Lc=Tc(Lc,_e,_,et,tt,nt),!0;case"dragenter":return Mc=Tc(Mc,_e,_,et,tt,nt),!0;case"mouseover":return Nc=Tc(Nc,_e,_,et,tt,nt),!0;case"pointerover":var it=nt.pointerId;return Oc.set(it,Tc(Oc.get(it)||null,_e,_,et,tt,nt)),!0;case"gotpointercapture":return it=nt.pointerId,Pc.set(it,Tc(Pc.get(it)||null,_e,_,et,tt,nt)),!0}return!1}function Vc(_e){var _=Wc(_e.target);if(_!==null){var et=Vb(_);if(et!==null){if(_=et.tag,_===13){if(_=Wb(et),_!==null){_e.blockedOn=_,Ic(_e.priority,function(){Gc(et)});return}}else if(_===3&&et.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var _=_e.targetContainers;0<_.length;){var et=Yc(_e.domEventName,_e.eventSystemFlags,_[0],_e.nativeEvent);if(et===null){et=_e.nativeEvent;var tt=new et.constructor(et.type,et);wb=tt,et.target.dispatchEvent(tt),wb=null}else return _=Cb(et),_!==null&&Fc(_),_e.blockedOn=et,!1;_.shift()}return!0}function Zc(_e,_,et){Xc(_e)&&et.delete(_)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,_){_e.blockedOn===_&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function _(nt){return ad(nt,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var et=1;et<Kc.length;et++){var tt=Kc[et];tt.blockedOn===_e&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach(_),Pc.forEach(_),et=0;et<Qc.length;et++)tt=Qc[et],tt.blockedOn===_e&&(tt.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(_e,_,et,tt){var nt=C,it=cd.transition;cd.transition=null;try{C=1,fd(_e,_,et,tt)}finally{C=nt,cd.transition=it}}function gd(_e,_,et,tt){var nt=C,it=cd.transition;cd.transition=null;try{C=4,fd(_e,_,et,tt)}finally{C=nt,cd.transition=it}}function fd(_e,_,et,tt){if(dd){var nt=Yc(_e,_,et,tt);if(nt===null)hd(_e,_,tt,id$1,et),Sc(_e,tt);else if(Uc(nt,_e,_,et,tt))tt.stopPropagation();else if(Sc(_e,tt),_&4&&-1<Rc.indexOf(_e)){for(;nt!==null;){var it=Cb(nt);if(it!==null&&Ec(it),it=Yc(_e,_,et,tt),it===null&&hd(_e,_,tt,id$1,et),it===nt)break;nt=it}nt!==null&&tt.stopPropagation()}else hd(_e,_,tt,null,et)}}var id$1=null;function Yc(_e,_,et,tt){if(id$1=null,_e=xb(tt),_e=Wc(_e),_e!==null)if(_=Vb(_e),_===null)_e=null;else if(et=_.tag,et===13){if(_e=Wb(_),_e!==null)return _e;_e=null}else if(et===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;_e=null}else _!==_e&&(_e=null);return id$1=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,_=ld,et=_.length,tt,nt="value"in kd?kd.value:kd.textContent,it=nt.length;for(_e=0;_e<et&&_[_e]===nt[_e];_e++);var at=et-_e;for(tt=1;tt<=at&&_[et-tt]===nt[it-tt];tt++);return md=nt.slice(_e,1<tt?1-tt:void 0)}function od(_e){var _=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&_===13&&(_e=13)):_e=_,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function _(et,tt,nt,it,at){this._reactName=et,this._targetInst=nt,this.type=tt,this.nativeEvent=it,this.target=at,this.currentTarget=null;for(var ot in _e)_e.hasOwnProperty(ot)&&(et=_e[ot],this[ot]=et?et(it):it[ot]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(_e):(_e=Od[_e])?!!_[_e]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(_e){if(_e.key){var _=Md[_e.key]||_e.key;if(_!=="Unidentified")return _}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(_e,_){switch(_e){case"keyup":return $d.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie=!1;function je(_e,_){switch(_e){case"compositionend":return he(_);case"keypress":return _.which!==32?null:(fe=!0,ee);case"textInput":return _e=_.data,_e===ee&&fe?null:_e;default:return null}}function ke(_e,_){if(ie)return _e==="compositionend"||!ae&&ge(_e,_)?(_e=nd(),md=ld=kd=null,ie=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return de&&_.locale!=="ko"?null:_.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_e){var _=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return _==="input"?!!le[_e.type]:_==="textarea"}function ne(_e,_,et,tt){Eb(tt),_=oe(_,"onChange"),0<_.length&&(et=new td("onChange","change",null,et,tt),_e.push({event:et,listeners:_}))}var pe=null,qe=null;function re(_e){se(_e,0)}function te(_e){var _=ue(_e);if(Wa(_))return _e}function ve(_e,_){if(_e==="change")return _}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_e){if(_e.propertyName==="value"&&te(qe)){var _=[];ne(_,qe,_e,xb(_e)),Jb(re,_)}}function Ce(_e,_,et){_e==="focusin"?(Ae(),pe=_,qe=et,pe.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te(qe)}function Ee(_e,_){if(_e==="click")return te(_)}function Fe(_e,_){if(_e==="input"||_e==="change")return te(_)}function Ge(_e,_){return _e===_&&(_e!==0||1/_e===1/_)||_e!==_e&&_!==_}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,_){if(He(_e,_))return!0;if(typeof _e!="object"||_e===null||typeof _!="object"||_===null)return!1;var et=Object.keys(_e),tt=Object.keys(_);if(et.length!==tt.length)return!1;for(tt=0;tt<et.length;tt++){var nt=et[tt];if(!ja.call(_,nt)||!He(_e[nt],_[nt]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,_){var et=Je(_e);_e=0;for(var tt;et;){if(et.nodeType===3){if(tt=_e+et.textContent.length,_e<=_&&tt>=_)return{node:et,offset:_-_e};_e=tt}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le(_e,_){return _e&&_?_e===_?!0:_e&&_e.nodeType===3?!1:_&&_.nodeType===3?Le(_e,_.parentNode):"contains"in _e?_e.contains(_):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(_)&16):!1:!1}function Me(){for(var _e=window,_=Xa();_ instanceof _e.HTMLIFrameElement;){try{var et=typeof _.contentWindow.location.href=="string"}catch{et=!1}if(et)_e=_.contentWindow;else break;_=Xa(_e.document)}return _}function Ne(_e){var _=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return _&&(_==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||_==="textarea"||_e.contentEditable==="true")}function Oe(_e){var _=Me(),et=_e.focusedElem,tt=_e.selectionRange;if(_!==et&&et&&et.ownerDocument&&Le(et.ownerDocument.documentElement,et)){if(tt!==null&&Ne(et)){if(_=tt.start,_e=tt.end,_e===void 0&&(_e=_),"selectionStart"in et)et.selectionStart=_,et.selectionEnd=Math.min(_e,et.value.length);else if(_e=(_=et.ownerDocument||document)&&_.defaultView||window,_e.getSelection){_e=_e.getSelection();var nt=et.textContent.length,it=Math.min(tt.start,nt);tt=tt.end===void 0?it:Math.min(tt.end,nt),!_e.extend&&it>tt&&(nt=tt,tt=it,it=nt),nt=Ke(et,it);var at=Ke(et,tt);nt&&at&&(_e.rangeCount!==1||_e.anchorNode!==nt.node||_e.anchorOffset!==nt.offset||_e.focusNode!==at.node||_e.focusOffset!==at.offset)&&(_=_.createRange(),_.setStart(nt.node,nt.offset),_e.removeAllRanges(),it>tt?(_e.addRange(_),_e.extend(at.node,at.offset)):(_.setEnd(at.node,at.offset),_e.addRange(_)))}}for(_=[],_e=et;_e=_e.parentNode;)_e.nodeType===1&&_.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<_.length;et++)_e=_[et],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(_e,_,et){var tt=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe(Re,"onSelect"),0<tt.length&&(_=new td("onSelect","select",null,_,et),_e.push({event:_,listeners:tt}),_.target=Qe)))}function Ve(_e,_){var et={};return et[_e.toLowerCase()]=_.toLowerCase(),et["Webkit"+_e]="webkit"+_,et["Moz"+_e]="moz"+_,et}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var _=We[_e],et;for(et in _)if(_.hasOwnProperty(et)&&et in Ye)return Xe[_e]=_[et];return _e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,_){df.set(_e,_),fa(_,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,_,et){var tt=_e.type||"unknown-event";_e.currentTarget=et,Ub(tt,_,void 0,_e),_e.currentTarget=null}function se(_e,_){_=(_&4)!==0;for(var et=0;et<_e.length;et++){var tt=_e[et],nt=tt.event;tt=tt.listeners;e:{var it=void 0;if(_)for(var at=tt.length-1;0<=at;at--){var ot=tt[at],st=ot.instance,dt=ot.currentTarget;if(ot=ot.listener,st!==it&&nt.isPropagationStopped())break e;nf(nt,ot,dt),it=st}else for(at=0;at<tt.length;at++){if(ot=tt[at],st=ot.instance,dt=ot.currentTarget,ot=ot.listener,st!==it&&nt.isPropagationStopped())break e;nf(nt,ot,dt),it=st}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D(_e,_){var et=_[of];et===void 0&&(et=_[of]=new Set);var tt=_e+"__bubble";et.has(tt)||(pf(_,_e,2,!1),et.add(tt))}function qf(_e,_,et){var tt=0;_&&(tt|=4),pf(et,_e,tt,_)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,_e),qf(et,!0,_e))});var _=_e.nodeType===9?_e:_e.ownerDocument;_===null||_[rf]||(_[rf]=!0,qf("selectionchange",!1,_))}}function pf(_e,_,et,tt){switch(jd(_)){case 1:var nt=ed;break;case 4:nt=gd;break;default:nt=fd}et=nt.bind(null,_,et,_e),nt=void 0,!Lb||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(nt=!0),tt?nt!==void 0?_e.addEventListener(_,et,{capture:!0,passive:nt}):_e.addEventListener(_,et,!0):nt!==void 0?_e.addEventListener(_,et,{passive:nt}):_e.addEventListener(_,et,!1)}function hd(_e,_,et,tt,nt){var it=tt;if(!(_&1)&&!(_&2)&&tt!==null)e:for(;;){if(tt===null)return;var at=tt.tag;if(at===3||at===4){var ot=tt.stateNode.containerInfo;if(ot===nt||ot.nodeType===8&&ot.parentNode===nt)break;if(at===4)for(at=tt.return;at!==null;){var st=at.tag;if((st===3||st===4)&&(st=at.stateNode.containerInfo,st===nt||st.nodeType===8&&st.parentNode===nt))return;at=at.return}for(;ot!==null;){if(at=Wc(ot),at===null)return;if(st=at.tag,st===5||st===6){tt=it=at;continue e}ot=ot.parentNode}}tt=tt.return}Jb(function(){var dt=it,ht=xb(et),ct=[];e:{var ut=df.get(_e);if(ut!==void 0){var ft=td,gt=_e;switch(_e){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":ft=Rd;break;case"focusin":gt="focus",ft=Fd;break;case"focusout":gt="blur",ft=Fd;break;case"beforeblur":case"afterblur":ft=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Vd;break;case $e:case af:case bf:ft=Hd;break;case cf:ft=Xd;break;case"scroll":ft=vd;break;case"wheel":ft=Zd;break;case"copy":case"cut":case"paste":ft=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Td$1}var mt=(_&4)!==0,vt=!mt&&_e==="scroll",yt=mt?ut!==null?ut+"Capture":null:ut;mt=[];for(var bt=dt,_t;bt!==null;){_t=bt;var xt=_t.stateNode;if(_t.tag===5&&xt!==null&&(_t=xt,yt!==null&&(xt=Kb(bt,yt),xt!=null&&mt.push(tf(bt,xt,_t)))),vt)break;bt=bt.return}0<mt.length&&(ut=new ft(ut,gt,null,et,ht),ct.push({event:ut,listeners:mt}))}}if(!(_&7)){e:{if(ut=_e==="mouseover"||_e==="pointerover",ft=_e==="mouseout"||_e==="pointerout",ut&&et!==wb&&(gt=et.relatedTarget||et.fromElement)&&(Wc(gt)||gt[uf]))break e;if((ft||ut)&&(ut=ht.window===ht?ht:(ut=ht.ownerDocument)?ut.defaultView||ut.parentWindow:window,ft?(gt=et.relatedTarget||et.toElement,ft=dt,gt=gt?Wc(gt):null,gt!==null&&(vt=Vb(gt),gt!==vt||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(ft=null,gt=dt),ft!==gt)){if(mt=Bd,xt="onMouseLeave",yt="onMouseEnter",bt="mouse",(_e==="pointerout"||_e==="pointerover")&&(mt=Td$1,xt="onPointerLeave",yt="onPointerEnter",bt="pointer"),vt=ft==null?ut:ue(ft),_t=gt==null?ut:ue(gt),ut=new mt(xt,bt+"leave",ft,et,ht),ut.target=vt,ut.relatedTarget=_t,xt=null,Wc(ht)===dt&&(mt=new mt(yt,bt+"enter",gt,et,ht),mt.target=_t,mt.relatedTarget=vt,xt=mt),vt=xt,ft&&gt)t:{for(mt=ft,yt=gt,bt=0,_t=mt;_t;_t=vf(_t))bt++;for(_t=0,xt=yt;xt;xt=vf(xt))_t++;for(;0<bt-_t;)mt=vf(mt),bt--;for(;0<_t-bt;)yt=vf(yt),_t--;for(;bt--;){if(mt===yt||yt!==null&&mt===yt.alternate)break t;mt=vf(mt),yt=vf(yt)}mt=null}else mt=null;ft!==null&&wf(ct,ut,ft,mt,!1),gt!==null&&vt!==null&&wf(ct,vt,gt,mt,!0)}}e:{if(ut=dt?ue(dt):window,ft=ut.nodeName&&ut.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ut.type==="file")var St=ve;else if(me(ut))if(we)St=Fe;else{St=De;var Tt=Ce}else(ft=ut.nodeName)&&ft.toLowerCase()==="input"&&(ut.type==="checkbox"||ut.type==="radio")&&(St=Ee);if(St&&(St=St(_e,dt))){ne(ct,St,et,ht);break e}Tt&&Tt(_e,ut,dt),_e==="focusout"&&(Tt=ut._wrapperState)&&Tt.controlled&&ut.type==="number"&&cb(ut,"number",ut.value)}switch(Tt=dt?ue(dt):window,_e){case"focusin":(me(Tt)||Tt.contentEditable==="true")&&(Qe=Tt,Re=dt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ct,et,ht);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ct,et,ht)}var wt;if(ae)e:{switch(_e){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else ie?ge(_e,et)&&(Ct="onCompositionEnd"):_e==="keydown"&&et.keyCode===229&&(Ct="onCompositionStart");Ct&&(de&&et.locale!=="ko"&&(ie||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&ie&&(wt=nd()):(kd=ht,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Tt=oe(dt,Ct),0<Tt.length&&(Ct=new Ld(Ct,_e,null,et,ht),ct.push({event:Ct,listeners:Tt}),wt?Ct.data=wt:(wt=he(et),wt!==null&&(Ct.data=wt)))),(wt=ce?je(_e,et):ke(_e,et))&&(dt=oe(dt,"onBeforeInput"),0<dt.length&&(ht=new Ld("onBeforeInput","beforeinput",null,et,ht),ct.push({event:ht,listeners:dt}),ht.data=wt))}se(ct,_)})}function tf(_e,_,et){return{instance:_e,listener:_,currentTarget:et}}function oe(_e,_){for(var et=_+"Capture",tt=[];_e!==null;){var nt=_e,it=nt.stateNode;nt.tag===5&&it!==null&&(nt=it,it=Kb(_e,et),it!=null&&tt.unshift(tf(_e,it,nt)),it=Kb(_e,_),it!=null&&tt.push(tf(_e,it,nt))),_e=_e.return}return tt}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,_,et,tt,nt){for(var it=_._reactName,at=[];et!==null&&et!==tt;){var ot=et,st=ot.alternate,dt=ot.stateNode;if(st!==null&&st===tt)break;ot.tag===5&&dt!==null&&(ot=dt,nt?(st=Kb(et,it),st!=null&&at.unshift(tf(et,st,ot))):nt||(st=Kb(et,it),st!=null&&at.push(tf(et,st,ot)))),et=et.return}at.length!==0&&_e.push({event:_,listeners:at})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,_,et){if(_=zf(_),zf(_e)!==_&&et)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,_){return _e==="textarea"||_e==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,_){var et=_,tt=0;do{var nt=et.nextSibling;if(_e.removeChild(et),nt&&nt.nodeType===8)if(et=nt.data,et==="/$"){if(tt===0){_e.removeChild(nt),bd(_);return}tt--}else et!=="$"&&et!=="$?"&&et!=="$!"||tt++;et=nt}while(et);bd(_)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var _=_e.nodeType;if(_===1||_===3)break;if(_===8){if(_=_e.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var _=0;_e;){if(_e.nodeType===8){var et=_e.data;if(et==="$"||et==="$!"||et==="$?"){if(_===0)return _e;_--}else et==="/$"&&_++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var _=_e[Of];if(_)return _;for(var et=_e.parentNode;et;){if(_=et[uf]||et[Of]){if(et=_.alternate,_.child!==null||et!==null&&et.child!==null)for(_e=Mf(_e);_e!==null;){if(et=_e[Of])return et;_e=Mf(_e)}return _}_e=et,et=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$2(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(_e,_){Tf++,Sf[Tf]=_e.current,_e.current=_}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,_){var et=_e.type.contextTypes;if(!et)return Vf;var tt=_e.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===_)return tt.__reactInternalMemoizedMaskedChildContext;var nt={},it;for(it in et)nt[it]=_[it];return tt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=_,_e.__reactInternalMemoizedMaskedChildContext=nt),nt}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E(Wf),E(H$1)}function ag(_e,_,et){if(H$1.current!==Vf)throw Error(p$2(168));G(H$1,_),G(Wf,et)}function bg(_e,_,et){var tt=_e.stateNode;if(_=_.childContextTypes,typeof tt.getChildContext!="function")return et;tt=tt.getChildContext();for(var nt in tt)if(!(nt in _))throw Error(p$2(108,Ra(_e)||"Unknown",nt));return A$1({},et,tt)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G(H$1,_e),G(Wf,Wf.current),!0}function dg(_e,_,et){var tt=_e.stateNode;if(!tt)throw Error(p$2(169));et?(_e=bg(_e,_,Xf),tt.__reactInternalMemoizedMergedChildContext=_e,E(Wf),E(H$1),G(H$1,_e)):E(Wf),G(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,_=C;try{var et=eg;for(C=1;_e<et.length;_e++){var tt=et[_e];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(nt){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),nt}finally{C=_,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,_){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=_}function ug(_e,_,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var tt=rg;_e=sg;var nt=32-oc(tt)-1;tt&=~(1<<nt),et+=1;var it=32-oc(_)+nt;if(30<it){var at=nt-nt%5;it=(tt&(1<<at)-1).toString(32),tt>>=at,nt-=at,rg=1<<32-oc(_)+nt|et<<nt|tt,sg=it+_e}else rg=1<<it|et<<nt|tt,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(_e,_){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=_,et.return=_e,_=_e.deletions,_===null?(_e.deletions=[et],_e.flags|=16):_.push(et)}function Cg(_e,_){switch(_e.tag){case 5:var et=_e.type;return _=_.nodeType!==1||et.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(_e.stateNode=_,xg=_e,yg=Lf(_.firstChild),!0):!1;case 6:return _=_e.pendingProps===""||_.nodeType!==3?null:_,_!==null?(_e.stateNode=_,xg=_e,yg=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(et=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:_,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=_,et.return=_e,_e.child=et,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I){var _=yg;if(_){var et=_;if(!Cg(_e,_)){if(Dg(_e))throw Error(p$2(418));_=Lf(et.nextSibling);var tt=xg;_&&Cg(_e,_)?Ag(tt,et):(_e.flags=_e.flags&-4097|2,I=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$2(418));_e.flags=_e.flags&-4097|2,I=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I)return Fg(_e),I=!0,!1;var _;if((_=_e.tag!==3)&&!(_=_e.tag!==5)&&(_=_e.type,_=_!=="head"&&_!=="body"&&!Ef(_e.type,_e.memoizedProps)),_&&(_=yg)){if(Dg(_e))throw Hg(),Error(p$2(418));for(;_;)Ag(_e,_),_=Lf(_.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$2(317));e:{for(_e=_e.nextSibling,_=0;_e;){if(_e.nodeType===8){var et=_e.data;if(et==="/$"){if(_===0){yg=Lf(_e.nextSibling);break e}_--}else et!=="$"&&et!=="$!"&&et!=="$?"||_++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(_e,_,et){if(_e=et.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$2(309));var tt=et.stateNode}if(!tt)throw Error(p$2(147,_e));var nt=tt,it=""+_e;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===it?_.ref:(_=function(at){var ot=nt.refs;at===null?delete ot[it]:ot[it]=at},_._stringRef=it,_)}if(typeof _e!="string")throw Error(p$2(284));if(!et._owner)throw Error(p$2(290,_e))}return _e}function Mg(_e,_){throw _e=Object.prototype.toString.call(_),Error(p$2(31,_e==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":_e))}function Ng(_e){var _=_e._init;return _(_e._payload)}function Og(_e){function _(yt,bt){if(_e){var _t=yt.deletions;_t===null?(yt.deletions=[bt],yt.flags|=16):_t.push(bt)}}function et(yt,bt){if(!_e)return null;for(;bt!==null;)_(yt,bt),bt=bt.sibling;return null}function tt(yt,bt){for(yt=new Map;bt!==null;)bt.key!==null?yt.set(bt.key,bt):yt.set(bt.index,bt),bt=bt.sibling;return yt}function nt(yt,bt){return yt=Pg(yt,bt),yt.index=0,yt.sibling=null,yt}function it(yt,bt,_t){return yt.index=_t,_e?(_t=yt.alternate,_t!==null?(_t=_t.index,_t<bt?(yt.flags|=2,bt):_t):(yt.flags|=2,bt)):(yt.flags|=1048576,bt)}function at(yt){return _e&&yt.alternate===null&&(yt.flags|=2),yt}function ot(yt,bt,_t,xt){return bt===null||bt.tag!==6?(bt=Qg(_t,yt.mode,xt),bt.return=yt,bt):(bt=nt(bt,_t),bt.return=yt,bt)}function st(yt,bt,_t,xt){var St=_t.type;return St===ya?ht(yt,bt,_t.props.children,xt,_t.key):bt!==null&&(bt.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Ha&&Ng(St)===bt.type)?(xt=nt(bt,_t.props),xt.ref=Lg(yt,bt,_t),xt.return=yt,xt):(xt=Rg(_t.type,_t.key,_t.props,null,yt.mode,xt),xt.ref=Lg(yt,bt,_t),xt.return=yt,xt)}function dt(yt,bt,_t,xt){return bt===null||bt.tag!==4||bt.stateNode.containerInfo!==_t.containerInfo||bt.stateNode.implementation!==_t.implementation?(bt=Sg(_t,yt.mode,xt),bt.return=yt,bt):(bt=nt(bt,_t.children||[]),bt.return=yt,bt)}function ht(yt,bt,_t,xt,St){return bt===null||bt.tag!==7?(bt=Tg(_t,yt.mode,xt,St),bt.return=yt,bt):(bt=nt(bt,_t),bt.return=yt,bt)}function ct(yt,bt,_t){if(typeof bt=="string"&&bt!==""||typeof bt=="number")return bt=Qg(""+bt,yt.mode,_t),bt.return=yt,bt;if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:return _t=Rg(bt.type,bt.key,bt.props,null,yt.mode,_t),_t.ref=Lg(yt,null,bt),_t.return=yt,_t;case wa:return bt=Sg(bt,yt.mode,_t),bt.return=yt,bt;case Ha:var xt=bt._init;return ct(yt,xt(bt._payload),_t)}if(eb(bt)||Ka(bt))return bt=Tg(bt,yt.mode,_t,null),bt.return=yt,bt;Mg(yt,bt)}return null}function ut(yt,bt,_t,xt){var St=bt!==null?bt.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number")return St!==null?null:ot(yt,bt,""+_t,xt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case va:return _t.key===St?st(yt,bt,_t,xt):null;case wa:return _t.key===St?dt(yt,bt,_t,xt):null;case Ha:return St=_t._init,ut(yt,bt,St(_t._payload),xt)}if(eb(_t)||Ka(_t))return St!==null?null:ht(yt,bt,_t,xt,null);Mg(yt,_t)}return null}function ft(yt,bt,_t,xt,St){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return yt=yt.get(_t)||null,ot(bt,yt,""+xt,St);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:return yt=yt.get(xt.key===null?_t:xt.key)||null,st(bt,yt,xt,St);case wa:return yt=yt.get(xt.key===null?_t:xt.key)||null,dt(bt,yt,xt,St);case Ha:var Tt=xt._init;return ft(yt,bt,_t,Tt(xt._payload),St)}if(eb(xt)||Ka(xt))return yt=yt.get(_t)||null,ht(bt,yt,xt,St,null);Mg(bt,xt)}return null}function gt(yt,bt,_t,xt){for(var St=null,Tt=null,wt=bt,Ct=bt=0,Et=null;wt!==null&&Ct<_t.length;Ct++){wt.index>Ct?(Et=wt,wt=null):Et=wt.sibling;var At=ut(yt,wt,_t[Ct],xt);if(At===null){wt===null&&(wt=Et);break}_e&&wt&&At.alternate===null&&_(yt,wt),bt=it(At,bt,Ct),Tt===null?St=At:Tt.sibling=At,Tt=At,wt=Et}if(Ct===_t.length)return et(yt,wt),I&&tg(yt,Ct),St;if(wt===null){for(;Ct<_t.length;Ct++)wt=ct(yt,_t[Ct],xt),wt!==null&&(bt=it(wt,bt,Ct),Tt===null?St=wt:Tt.sibling=wt,Tt=wt);return I&&tg(yt,Ct),St}for(wt=tt(yt,wt);Ct<_t.length;Ct++)Et=ft(wt,yt,Ct,_t[Ct],xt),Et!==null&&(_e&&Et.alternate!==null&&wt.delete(Et.key===null?Ct:Et.key),bt=it(Et,bt,Ct),Tt===null?St=Et:Tt.sibling=Et,Tt=Et);return _e&&wt.forEach(function(Pt){return _(yt,Pt)}),I&&tg(yt,Ct),St}function mt(yt,bt,_t,xt){var St=Ka(_t);if(typeof St!="function")throw Error(p$2(150));if(_t=St.call(_t),_t==null)throw Error(p$2(151));for(var Tt=St=null,wt=bt,Ct=bt=0,Et=null,At=_t.next();wt!==null&&!At.done;Ct++,At=_t.next()){wt.index>Ct?(Et=wt,wt=null):Et=wt.sibling;var Pt=ut(yt,wt,At.value,xt);if(Pt===null){wt===null&&(wt=Et);break}_e&&wt&&Pt.alternate===null&&_(yt,wt),bt=it(Pt,bt,Ct),Tt===null?St=Pt:Tt.sibling=Pt,Tt=Pt,wt=Et}if(At.done)return et(yt,wt),I&&tg(yt,Ct),St;if(wt===null){for(;!At.done;Ct++,At=_t.next())At=ct(yt,At.value,xt),At!==null&&(bt=it(At,bt,Ct),Tt===null?St=At:Tt.sibling=At,Tt=At);return I&&tg(yt,Ct),St}for(wt=tt(yt,wt);!At.done;Ct++,At=_t.next())At=ft(wt,yt,Ct,At.value,xt),At!==null&&(_e&&At.alternate!==null&&wt.delete(At.key===null?Ct:At.key),bt=it(At,bt,Ct),Tt===null?St=At:Tt.sibling=At,Tt=At);return _e&&wt.forEach(function(Rt){return _(yt,Rt)}),I&&tg(yt,Ct),St}function vt(yt,bt,_t,xt){if(typeof _t=="object"&&_t!==null&&_t.type===ya&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case va:e:{for(var St=_t.key,Tt=bt;Tt!==null;){if(Tt.key===St){if(St=_t.type,St===ya){if(Tt.tag===7){et(yt,Tt.sibling),bt=nt(Tt,_t.props.children),bt.return=yt,yt=bt;break e}}else if(Tt.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Ha&&Ng(St)===Tt.type){et(yt,Tt.sibling),bt=nt(Tt,_t.props),bt.ref=Lg(yt,Tt,_t),bt.return=yt,yt=bt;break e}et(yt,Tt);break}else _(yt,Tt);Tt=Tt.sibling}_t.type===ya?(bt=Tg(_t.props.children,yt.mode,xt,_t.key),bt.return=yt,yt=bt):(xt=Rg(_t.type,_t.key,_t.props,null,yt.mode,xt),xt.ref=Lg(yt,bt,_t),xt.return=yt,yt=xt)}return at(yt);case wa:e:{for(Tt=_t.key;bt!==null;){if(bt.key===Tt)if(bt.tag===4&&bt.stateNode.containerInfo===_t.containerInfo&&bt.stateNode.implementation===_t.implementation){et(yt,bt.sibling),bt=nt(bt,_t.children||[]),bt.return=yt,yt=bt;break e}else{et(yt,bt);break}else _(yt,bt);bt=bt.sibling}bt=Sg(_t,yt.mode,xt),bt.return=yt,yt=bt}return at(yt);case Ha:return Tt=_t._init,vt(yt,bt,Tt(_t._payload),xt)}if(eb(_t))return gt(yt,bt,_t,xt);if(Ka(_t))return mt(yt,bt,_t,xt);Mg(yt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"?(_t=""+_t,bt!==null&&bt.tag===6?(et(yt,bt.sibling),bt=nt(bt,_t),bt.return=yt,yt=bt):(et(yt,bt),bt=Qg(_t,yt.mode,xt),bt.return=yt,yt=bt),at(yt)):et(yt,bt)}return vt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_e){var _=Wg.current;E(Wg),_e._currentValue=_}function bh(_e,_,et){for(;_e!==null;){var tt=_e.alternate;if((_e.childLanes&_)!==_?(_e.childLanes|=_,tt!==null&&(tt.childLanes|=_)):tt!==null&&(tt.childLanes&_)!==_&&(tt.childLanes|=_),_e===et)break;_e=_e.return}}function ch(_e,_){Xg=_e,Zg=Yg=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&_&&(dh=!0),_e.firstContext=null)}function eh(_e){var _=_e._currentValue;if(Zg!==_e)if(_e={context:_e,memoizedValue:_,next:null},Yg===null){if(Xg===null)throw Error(p$2(308));Yg=_e,Xg.dependencies={lanes:0,firstContext:_e}}else Yg=Yg.next=_e;return _}var fh=null;function gh(_e){fh===null?fh=[_e]:fh.push(_e)}function hh(_e,_,et,tt){var nt=_.interleaved;return nt===null?(et.next=et,gh(_)):(et.next=nt.next,nt.next=et),_.interleaved=et,ih(_e,tt)}function ih(_e,_){_e.lanes|=_;var et=_e.alternate;for(et!==null&&(et.lanes|=_),et=_e,_e=_e.return;_e!==null;)_e.childLanes|=_,et=_e.alternate,et!==null&&(et.childLanes|=_),et=_e,_e=_e.return;return et.tag===3?et.stateNode:null}var jh=!1;function kh(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_e,_){_e=_e.updateQueue,_.updateQueue===_e&&(_.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function mh(_e,_){return{eventTime:_e,lane:_,tag:0,payload:null,callback:null,next:null}}function nh(_e,_,et){var tt=_e.updateQueue;if(tt===null)return null;if(tt=tt.shared,K&2){var nt=tt.pending;return nt===null?_.next=_:(_.next=nt.next,nt.next=_),tt.pending=_,ih(_e,et)}return nt=tt.interleaved,nt===null?(_.next=_,gh(tt)):(_.next=nt.next,nt.next=_),tt.interleaved=_,ih(_e,et)}function oh(_e,_,et){if(_=_.updateQueue,_!==null&&(_=_.shared,(et&4194240)!==0)){var tt=_.lanes;tt&=_e.pendingLanes,et|=tt,_.lanes=et,Cc(_e,et)}}function ph(_e,_){var et=_e.updateQueue,tt=_e.alternate;if(tt!==null&&(tt=tt.updateQueue,et===tt)){var nt=null,it=null;if(et=et.firstBaseUpdate,et!==null){do{var at={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};it===null?nt=it=at:it=it.next=at,et=et.next}while(et!==null);it===null?nt=it=_:it=it.next=_}else nt=it=_;et={baseState:tt.baseState,firstBaseUpdate:nt,lastBaseUpdate:it,shared:tt.shared,effects:tt.effects},_e.updateQueue=et;return}_e=et.lastBaseUpdate,_e===null?et.firstBaseUpdate=_:_e.next=_,et.lastBaseUpdate=_}function qh(_e,_,et,tt){var nt=_e.updateQueue;jh=!1;var it=nt.firstBaseUpdate,at=nt.lastBaseUpdate,ot=nt.shared.pending;if(ot!==null){nt.shared.pending=null;var st=ot,dt=st.next;st.next=null,at===null?it=dt:at.next=dt,at=st;var ht=_e.alternate;ht!==null&&(ht=ht.updateQueue,ot=ht.lastBaseUpdate,ot!==at&&(ot===null?ht.firstBaseUpdate=dt:ot.next=dt,ht.lastBaseUpdate=st))}if(it!==null){var ct=nt.baseState;at=0,ht=dt=st=null,ot=it;do{var ut=ot.lane,ft=ot.eventTime;if((tt&ut)===ut){ht!==null&&(ht=ht.next={eventTime:ft,lane:0,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null});e:{var gt=_e,mt=ot;switch(ut=_,ft=et,mt.tag){case 1:if(gt=mt.payload,typeof gt=="function"){ct=gt.call(ft,ct,ut);break e}ct=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=mt.payload,ut=typeof gt=="function"?gt.call(ft,ct,ut):gt,ut==null)break e;ct=A$1({},ct,ut);break e;case 2:jh=!0}}ot.callback!==null&&ot.lane!==0&&(_e.flags|=64,ut=nt.effects,ut===null?nt.effects=[ot]:ut.push(ot))}else ft={eventTime:ft,lane:ut,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},ht===null?(dt=ht=ft,st=ct):ht=ht.next=ft,at|=ut;if(ot=ot.next,ot===null){if(ot=nt.shared.pending,ot===null)break;ut=ot,ot=ut.next,ut.next=null,nt.lastBaseUpdate=ut,nt.shared.pending=null}}while(!0);if(ht===null&&(st=ct),nt.baseState=st,nt.firstBaseUpdate=dt,nt.lastBaseUpdate=ht,_=nt.shared.interleaved,_!==null){nt=_;do at|=nt.lane,nt=nt.next;while(nt!==_)}else it===null&&(nt.shared.lanes=0);rh|=at,_e.lanes=at,_e.memoizedState=ct}}function sh(_e,_,et){if(_e=_.effects,_.effects=null,_e!==null)for(_=0;_<_e.length;_++){var tt=_e[_],nt=tt.callback;if(nt!==null){if(tt.callback=null,tt=et,typeof nt!="function")throw Error(p$2(191,nt));nt.call(tt)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(_e){if(_e===th)throw Error(p$2(174));return _e}function yh(_e,_){switch(G(wh,_),G(vh,_e),G(uh,th),_e=_.nodeType,_e){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:lb$1(null,"");break;default:_e=_e===8?_.parentNode:_,_=_e.namespaceURI||null,_e=_e.tagName,_=lb$1(_,_e)}E(uh),G(uh,_)}function zh(){E(uh),E(vh),E(wh)}function Ah(_e){xh(wh.current);var _=xh(uh.current),et=lb$1(_,_e.type);_!==et&&(G(vh,_e),G(uh,et))}function Bh(_e){vh.current===_e&&(E(uh),E(vh))}var L=Uf(0);function Ch(_e){for(var _=_e;_!==null;){if(_.tag===13){var et=_.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===_e)break;for(;_.sibling===null;){if(_.return===null||_.return===_e)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Dh=[];function Eh(){for(var _e=0;_e<Dh.length;_e++)Dh[_e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua$1.ReactCurrentDispatcher,Gh=ua$1.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$2(321))}function Mh(_e,_){if(_===null)return!1;for(var et=0;et<_.length&&et<_e.length;et++)if(!He(_e[et],_[et]))return!1;return!0}function Nh(_e,_,et,tt,nt,it){if(Hh=it,M$1=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Fh.current=_e===null||_e.memoizedState===null?Oh:Ph,_e=et(tt,nt),Jh){it=0;do{if(Jh=!1,Kh=0,25<=it)throw Error(p$2(301));it+=1,O=N$1=null,_.updateQueue=null,Fh.current=Qh,_e=et(tt,nt)}while(Jh)}if(Fh.current=Rh,_=N$1!==null&&N$1.next!==null,Hh=0,O=N$1=M$1=null,Ih=!1,_)throw Error(p$2(300));return _e}function Sh(){var _e=Kh!==0;return Kh=0,_e}function Th$1(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M$1.memoizedState=O=_e:O=O.next=_e,O}function Uh(){if(N$1===null){var _e=M$1.alternate;_e=_e!==null?_e.memoizedState:null}else _e=N$1.next;var _=O===null?M$1.memoizedState:O.next;if(_!==null)O=_,N$1=_e;else{if(_e===null)throw Error(p$2(310));N$1=_e,_e={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O===null?M$1.memoizedState=O=_e:O=O.next=_e}return O}function Vh(_e,_){return typeof _=="function"?_(_e):_}function Wh(_e){var _=Uh(),et=_.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=_e;var tt=N$1,nt=tt.baseQueue,it=et.pending;if(it!==null){if(nt!==null){var at=nt.next;nt.next=it.next,it.next=at}tt.baseQueue=nt=it,et.pending=null}if(nt!==null){it=nt.next,tt=tt.baseState;var ot=at=null,st=null,dt=it;do{var ht=dt.lane;if((Hh&ht)===ht)st!==null&&(st=st.next={lane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),tt=dt.hasEagerState?dt.eagerState:_e(tt,dt.action);else{var ct={lane:ht,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null};st===null?(ot=st=ct,at=tt):st=st.next=ct,M$1.lanes|=ht,rh|=ht}dt=dt.next}while(dt!==null&&dt!==it);st===null?at=tt:st.next=ot,He(tt,_.memoizedState)||(dh=!0),_.memoizedState=tt,_.baseState=at,_.baseQueue=st,et.lastRenderedState=tt}if(_e=et.interleaved,_e!==null){nt=_e;do it=nt.lane,M$1.lanes|=it,rh|=it,nt=nt.next;while(nt!==_e)}else nt===null&&(et.lanes=0);return[_.memoizedState,et.dispatch]}function Xh(_e){var _=Uh(),et=_.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=_e;var tt=et.dispatch,nt=et.pending,it=_.memoizedState;if(nt!==null){et.pending=null;var at=nt=nt.next;do it=_e(it,at.action),at=at.next;while(at!==nt);He(it,_.memoizedState)||(dh=!0),_.memoizedState=it,_.baseQueue===null&&(_.baseState=it),et.lastRenderedState=it}return[it,tt]}function Yh(){}function Zh(_e,_){var et=M$1,tt=Uh(),nt=_(),it=!He(tt.memoizedState,nt);if(it&&(tt.memoizedState=nt,dh=!0),tt=tt.queue,$h(ai.bind(null,et,tt,_e),[_e]),tt.getSnapshot!==_||it||O!==null&&O.memoizedState.tag&1){if(et.flags|=2048,bi(9,ci.bind(null,et,tt,nt,_),void 0,null),Q===null)throw Error(p$2(349));Hh&30||di(et,_,nt)}return nt}function di(_e,_,et){_e.flags|=16384,_e={getSnapshot:_,value:et},_=M$1.updateQueue,_===null?(_={lastEffect:null,stores:null},M$1.updateQueue=_,_.stores=[_e]):(et=_.stores,et===null?_.stores=[_e]:et.push(_e))}function ci(_e,_,et,tt){_.value=et,_.getSnapshot=tt,ei(_)&&fi(_e)}function ai(_e,_,et){return et(function(){ei(_)&&fi(_e)})}function ei(_e){var _=_e.getSnapshot;_e=_e.value;try{var et=_();return!He(_e,et)}catch{return!0}}function fi(_e){var _=ih(_e,1);_!==null&&gi(_,_e,1,-1)}function hi(_e){var _=Th$1();return typeof _e=="function"&&(_e=_e()),_.memoizedState=_.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_e},_.queue=_e,_e=_e.dispatch=ii.bind(null,M$1,_e),[_.memoizedState,_e]}function bi(_e,_,et,tt){return _e={tag:_e,create:_,destroy:et,deps:tt,next:null},_=M$1.updateQueue,_===null?(_={lastEffect:null,stores:null},M$1.updateQueue=_,_.lastEffect=_e.next=_e):(et=_.lastEffect,et===null?_.lastEffect=_e.next=_e:(tt=et.next,et.next=_e,_e.next=tt,_.lastEffect=_e)),_e}function ji(){return Uh().memoizedState}function ki(_e,_,et,tt){var nt=Th$1();M$1.flags|=_e,nt.memoizedState=bi(1|_,et,void 0,tt===void 0?null:tt)}function li(_e,_,et,tt){var nt=Uh();tt=tt===void 0?null:tt;var it=void 0;if(N$1!==null){var at=N$1.memoizedState;if(it=at.destroy,tt!==null&&Mh(tt,at.deps)){nt.memoizedState=bi(_,et,it,tt);return}}M$1.flags|=_e,nt.memoizedState=bi(1|_,et,it,tt)}function mi(_e,_){return ki(8390656,8,_e,_)}function $h(_e,_){return li(2048,8,_e,_)}function ni(_e,_){return li(4,2,_e,_)}function oi(_e,_){return li(4,4,_e,_)}function pi(_e,_){if(typeof _=="function")return _e=_e(),_(_e),function(){_(null)};if(_!=null)return _e=_e(),_.current=_e,function(){_.current=null}}function qi(_e,_,et){return et=et!=null?et.concat([_e]):null,li(4,4,pi.bind(null,_,_e),et)}function ri(){}function si(_e,_){var et=Uh();_=_===void 0?null:_;var tt=et.memoizedState;return tt!==null&&_!==null&&Mh(_,tt[1])?tt[0]:(et.memoizedState=[_e,_],_e)}function ti(_e,_){var et=Uh();_=_===void 0?null:_;var tt=et.memoizedState;return tt!==null&&_!==null&&Mh(_,tt[1])?tt[0]:(_e=_e(),et.memoizedState=[_e,_],_e)}function ui(_e,_,et){return Hh&21?(He(et,_)||(et=yc(),M$1.lanes|=et,rh|=et,_e.baseState=!0),_):(_e.baseState&&(_e.baseState=!1,dh=!0),_e.memoizedState=et)}function vi(_e,_){var et=C;C=et!==0&&4>et?et:4,_e(!0);var tt=Gh.transition;Gh.transition={};try{_e(!1),_()}finally{C=et,Gh.transition=tt}}function wi(){return Uh().memoizedState}function xi(_e,_,et){var tt=yi(_e);if(et={lane:tt,action:et,hasEagerState:!1,eagerState:null,next:null},zi(_e))Ai(_,et);else if(et=hh(_e,_,et,tt),et!==null){var nt=R();gi(et,_e,tt,nt),Bi(et,_,tt)}}function ii(_e,_,et){var tt=yi(_e),nt={lane:tt,action:et,hasEagerState:!1,eagerState:null,next:null};if(zi(_e))Ai(_,nt);else{var it=_e.alternate;if(_e.lanes===0&&(it===null||it.lanes===0)&&(it=_.lastRenderedReducer,it!==null))try{var at=_.lastRenderedState,ot=it(at,et);if(nt.hasEagerState=!0,nt.eagerState=ot,He(ot,at)){var st=_.interleaved;st===null?(nt.next=nt,gh(_)):(nt.next=st.next,st.next=nt),_.interleaved=nt;return}}catch{}finally{}et=hh(_e,_,nt,tt),et!==null&&(nt=R(),gi(et,_e,tt,nt),Bi(et,_,tt))}}function zi(_e){var _=_e.alternate;return _e===M$1||_!==null&&_===M$1}function Ai(_e,_){Jh=Ih=!0;var et=_e.pending;et===null?_.next=_:(_.next=et.next,et.next=_),_e.pending=_}function Bi(_e,_,et){if(et&4194240){var tt=_.lanes;tt&=_e.pendingLanes,et|=tt,_.lanes=et,Cc(_e,et)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_e,_){return Th$1().memoizedState=[_e,_===void 0?null:_],_e},useContext:eh,useEffect:mi,useImperativeHandle:function(_e,_,et){return et=et!=null?et.concat([_e]):null,ki(4194308,4,pi.bind(null,_,_e),et)},useLayoutEffect:function(_e,_){return ki(4194308,4,_e,_)},useInsertionEffect:function(_e,_){return ki(4,2,_e,_)},useMemo:function(_e,_){var et=Th$1();return _=_===void 0?null:_,_e=_e(),et.memoizedState=[_e,_],_e},useReducer:function(_e,_,et){var tt=Th$1();return _=et!==void 0?et(_):_,tt.memoizedState=tt.baseState=_,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:_},tt.queue=_e,_e=_e.dispatch=xi.bind(null,M$1,_e),[tt.memoizedState,_e]},useRef:function(_e){var _=Th$1();return _e={current:_e},_.memoizedState=_e},useState:hi,useDebugValue:ri,useDeferredValue:function(_e){return Th$1().memoizedState=_e},useTransition:function(){var _e=hi(!1),_=_e[0];return _e=vi.bind(null,_e[1]),Th$1().memoizedState=_e,[_,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,_,et){var tt=M$1,nt=Th$1();if(I){if(et===void 0)throw Error(p$2(407));et=et()}else{if(et=_(),Q===null)throw Error(p$2(349));Hh&30||di(tt,_,et)}nt.memoizedState=et;var it={value:et,getSnapshot:_};return nt.queue=it,mi(ai.bind(null,tt,it,_e),[_e]),tt.flags|=2048,bi(9,ci.bind(null,tt,it,et,_),void 0,null),et},useId:function(){var _e=Th$1(),_=Q.identifierPrefix;if(I){var et=sg,tt=rg;et=(tt&~(1<<32-oc(tt)-1)).toString(32)+et,_=":"+_+"R"+et,et=Kh++,0<et&&(_+="H"+et.toString(32)),_+=":"}else et=Lh++,_=":"+_+"r"+et.toString(32)+":";return _e.memoizedState=_},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var _=Uh();return ui(_,N$1.memoizedState,_e)},useTransition:function(){var _e=Wh(Vh)[0],_=Uh().memoizedState;return[_e,_]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var _=Uh();return N$1===null?_.memoizedState=_e:ui(_,N$1.memoizedState,_e)},useTransition:function(){var _e=Xh(Vh)[0],_=Uh().memoizedState;return[_e,_]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_e,_){if(_e&&_e.defaultProps){_=A$1({},_),_e=_e.defaultProps;for(var et in _e)_[et]===void 0&&(_[et]=_e[et]);return _}return _}function Di(_e,_,et,tt){_=_e.memoizedState,et=et(tt,_),et=et==null?_:A$1({},_,et),_e.memoizedState=et,_e.lanes===0&&(_e.updateQueue.baseState=et)}var Ei={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,_,et){_e=_e._reactInternals;var tt=R(),nt=yi(_e),it=mh(tt,nt);it.payload=_,et!=null&&(it.callback=et),_=nh(_e,it,nt),_!==null&&(gi(_,_e,nt,tt),oh(_,_e,nt))},enqueueReplaceState:function(_e,_,et){_e=_e._reactInternals;var tt=R(),nt=yi(_e),it=mh(tt,nt);it.tag=1,it.payload=_,et!=null&&(it.callback=et),_=nh(_e,it,nt),_!==null&&(gi(_,_e,nt,tt),oh(_,_e,nt))},enqueueForceUpdate:function(_e,_){_e=_e._reactInternals;var et=R(),tt=yi(_e),nt=mh(et,tt);nt.tag=2,_!=null&&(nt.callback=_),_=nh(_e,nt,tt),_!==null&&(gi(_,_e,tt,et),oh(_,_e,tt))}};function Fi(_e,_,et,tt,nt,it,at){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(tt,it,at):_.prototype&&_.prototype.isPureReactComponent?!Ie(et,tt)||!Ie(nt,it):!0}function Gi(_e,_,et){var tt=!1,nt=Vf,it=_.contextType;return typeof it=="object"&&it!==null?it=eh(it):(nt=Zf(_)?Xf:H$1.current,tt=_.contextTypes,it=(tt=tt!=null)?Yf(_e,nt):Vf),_=new _(et,it),_e.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ei,_e.stateNode=_,_._reactInternals=_e,tt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=nt,_e.__reactInternalMemoizedMaskedChildContext=it),_}function Hi(_e,_,et,tt){_e=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(et,tt),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(et,tt),_.state!==_e&&Ei.enqueueReplaceState(_,_.state,null)}function Ii(_e,_,et,tt){var nt=_e.stateNode;nt.props=et,nt.state=_e.memoizedState,nt.refs={},kh(_e);var it=_.contextType;typeof it=="object"&&it!==null?nt.context=eh(it):(it=Zf(_)?Xf:H$1.current,nt.context=Yf(_e,it)),nt.state=_e.memoizedState,it=_.getDerivedStateFromProps,typeof it=="function"&&(Di(_e,_,it,et),nt.state=_e.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof nt.getSnapshotBeforeUpdate=="function"||typeof nt.UNSAFE_componentWillMount!="function"&&typeof nt.componentWillMount!="function"||(_=nt.state,typeof nt.componentWillMount=="function"&&nt.componentWillMount(),typeof nt.UNSAFE_componentWillMount=="function"&&nt.UNSAFE_componentWillMount(),_!==nt.state&&Ei.enqueueReplaceState(nt,nt.state,null),qh(_e,et,nt,tt),nt.state=_e.memoizedState),typeof nt.componentDidMount=="function"&&(_e.flags|=4194308)}function Ji(_e,_){try{var et="",tt=_;do et+=Pa(tt),tt=tt.return;while(tt);var nt=et}catch(it){nt=`
Error generating stack: `+it.message+`
`+it.stack}return{value:_e,source:_,stack:nt,digest:null}}function Ki(_e,_,et){return{value:_e,source:null,stack:et??null,digest:_??null}}function Li(_e,_){try{console.error(_.value)}catch(et){setTimeout(function(){throw et})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_e,_,et){et=mh(-1,et),et.tag=3,et.payload={element:null};var tt=_.value;return et.callback=function(){Oi||(Oi=!0,Pi=tt),Li(_e,_)},et}function Qi(_e,_,et){et=mh(-1,et),et.tag=3;var tt=_e.type.getDerivedStateFromError;if(typeof tt=="function"){var nt=_.value;et.payload=function(){return tt(nt)},et.callback=function(){Li(_e,_)}}var it=_e.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(et.callback=function(){Li(_e,_),typeof tt!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var at=_.stack;this.componentDidCatch(_.value,{componentStack:at!==null?at:""})}),et}function Si(_e,_,et){var tt=_e.pingCache;if(tt===null){tt=_e.pingCache=new Mi;var nt=new Set;tt.set(_,nt)}else nt=tt.get(_),nt===void 0&&(nt=new Set,tt.set(_,nt));nt.has(et)||(nt.add(et),_e=Ti.bind(null,_e,_,et),_.then(_e,_e))}function Ui(_e){do{var _;if((_=_e.tag===13)&&(_=_e.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return _e;_e=_e.return}while(_e!==null);return null}function Vi(_e,_,et,tt,nt){return _e.mode&1?(_e.flags|=65536,_e.lanes=nt,_e):(_e===_?_e.flags|=65536:(_e.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(_=mh(-1,1),_.tag=2,nh(et,_,1))),et.lanes|=1),_e)}var Wi=ua$1.ReactCurrentOwner,dh=!1;function Xi(_e,_,et,tt){_.child=_e===null?Vg(_,null,et,tt):Ug(_,_e.child,et,tt)}function Yi(_e,_,et,tt,nt){et=et.render;var it=_.ref;return ch(_,nt),tt=Nh(_e,_,et,tt,it,nt),et=Sh(),_e!==null&&!dh?(_.updateQueue=_e.updateQueue,_.flags&=-2053,_e.lanes&=~nt,Zi(_e,_,nt)):(I&&et&&vg(_),_.flags|=1,Xi(_e,_,tt,nt),_.child)}function $i(_e,_,et,tt,nt){if(_e===null){var it=et.type;return typeof it=="function"&&!aj(it)&&it.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(_.tag=15,_.type=it,bj(_e,_,it,tt,nt)):(_e=Rg(et.type,null,tt,_,_.mode,nt),_e.ref=_.ref,_e.return=_,_.child=_e)}if(it=_e.child,!(_e.lanes&nt)){var at=it.memoizedProps;if(et=et.compare,et=et!==null?et:Ie,et(at,tt)&&_e.ref===_.ref)return Zi(_e,_,nt)}return _.flags|=1,_e=Pg(it,tt),_e.ref=_.ref,_e.return=_,_.child=_e}function bj(_e,_,et,tt,nt){if(_e!==null){var it=_e.memoizedProps;if(Ie(it,tt)&&_e.ref===_.ref)if(dh=!1,_.pendingProps=tt=it,(_e.lanes&nt)!==0)_e.flags&131072&&(dh=!0);else return _.lanes=_e.lanes,Zi(_e,_,nt)}return cj(_e,_,et,tt,nt)}function dj(_e,_,et){var tt=_.pendingProps,nt=tt.children,it=_e!==null?_e.memoizedState:null;if(tt.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=et;else{if(!(et&1073741824))return _e=it!==null?it.baseLanes|et:et,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:_e,cachePool:null,transitions:null},_.updateQueue=null,G(ej,fj),fj|=_e,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=it!==null?it.baseLanes:et,G(ej,fj),fj|=tt}else it!==null?(tt=it.baseLanes|et,_.memoizedState=null):tt=et,G(ej,fj),fj|=tt;return Xi(_e,_,nt,et),_.child}function gj(_e,_){var et=_.ref;(_e===null&&et!==null||_e!==null&&_e.ref!==et)&&(_.flags|=512,_.flags|=2097152)}function cj(_e,_,et,tt,nt){var it=Zf(et)?Xf:H$1.current;return it=Yf(_,it),ch(_,nt),et=Nh(_e,_,et,tt,it,nt),tt=Sh(),_e!==null&&!dh?(_.updateQueue=_e.updateQueue,_.flags&=-2053,_e.lanes&=~nt,Zi(_e,_,nt)):(I&&tt&&vg(_),_.flags|=1,Xi(_e,_,et,nt),_.child)}function hj(_e,_,et,tt,nt){if(Zf(et)){var it=!0;cg(_)}else it=!1;if(ch(_,nt),_.stateNode===null)ij(_e,_),Gi(_,et,tt),Ii(_,et,tt,nt),tt=!0;else if(_e===null){var at=_.stateNode,ot=_.memoizedProps;at.props=ot;var st=at.context,dt=et.contextType;typeof dt=="object"&&dt!==null?dt=eh(dt):(dt=Zf(et)?Xf:H$1.current,dt=Yf(_,dt));var ht=et.getDerivedStateFromProps,ct=typeof ht=="function"||typeof at.getSnapshotBeforeUpdate=="function";ct||typeof at.UNSAFE_componentWillReceiveProps!="function"&&typeof at.componentWillReceiveProps!="function"||(ot!==tt||st!==dt)&&Hi(_,at,tt,dt),jh=!1;var ut=_.memoizedState;at.state=ut,qh(_,tt,at,nt),st=_.memoizedState,ot!==tt||ut!==st||Wf.current||jh?(typeof ht=="function"&&(Di(_,et,ht,tt),st=_.memoizedState),(ot=jh||Fi(_,et,ot,tt,ut,st,dt))?(ct||typeof at.UNSAFE_componentWillMount!="function"&&typeof at.componentWillMount!="function"||(typeof at.componentWillMount=="function"&&at.componentWillMount(),typeof at.UNSAFE_componentWillMount=="function"&&at.UNSAFE_componentWillMount()),typeof at.componentDidMount=="function"&&(_.flags|=4194308)):(typeof at.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=tt,_.memoizedState=st),at.props=tt,at.state=st,at.context=dt,tt=ot):(typeof at.componentDidMount=="function"&&(_.flags|=4194308),tt=!1)}else{at=_.stateNode,lh(_e,_),ot=_.memoizedProps,dt=_.type===_.elementType?ot:Ci(_.type,ot),at.props=dt,ct=_.pendingProps,ut=at.context,st=et.contextType,typeof st=="object"&&st!==null?st=eh(st):(st=Zf(et)?Xf:H$1.current,st=Yf(_,st));var ft=et.getDerivedStateFromProps;(ht=typeof ft=="function"||typeof at.getSnapshotBeforeUpdate=="function")||typeof at.UNSAFE_componentWillReceiveProps!="function"&&typeof at.componentWillReceiveProps!="function"||(ot!==ct||ut!==st)&&Hi(_,at,tt,st),jh=!1,ut=_.memoizedState,at.state=ut,qh(_,tt,at,nt);var gt=_.memoizedState;ot!==ct||ut!==gt||Wf.current||jh?(typeof ft=="function"&&(Di(_,et,ft,tt),gt=_.memoizedState),(dt=jh||Fi(_,et,dt,tt,ut,gt,st)||!1)?(ht||typeof at.UNSAFE_componentWillUpdate!="function"&&typeof at.componentWillUpdate!="function"||(typeof at.componentWillUpdate=="function"&&at.componentWillUpdate(tt,gt,st),typeof at.UNSAFE_componentWillUpdate=="function"&&at.UNSAFE_componentWillUpdate(tt,gt,st)),typeof at.componentDidUpdate=="function"&&(_.flags|=4),typeof at.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof at.componentDidUpdate!="function"||ot===_e.memoizedProps&&ut===_e.memoizedState||(_.flags|=4),typeof at.getSnapshotBeforeUpdate!="function"||ot===_e.memoizedProps&&ut===_e.memoizedState||(_.flags|=1024),_.memoizedProps=tt,_.memoizedState=gt),at.props=tt,at.state=gt,at.context=st,tt=dt):(typeof at.componentDidUpdate!="function"||ot===_e.memoizedProps&&ut===_e.memoizedState||(_.flags|=4),typeof at.getSnapshotBeforeUpdate!="function"||ot===_e.memoizedProps&&ut===_e.memoizedState||(_.flags|=1024),tt=!1)}return jj(_e,_,et,tt,it,nt)}function jj(_e,_,et,tt,nt,it){gj(_e,_);var at=(_.flags&128)!==0;if(!tt&&!at)return nt&&dg(_,et,!1),Zi(_e,_,it);tt=_.stateNode,Wi.current=_;var ot=at&&typeof et.getDerivedStateFromError!="function"?null:tt.render();return _.flags|=1,_e!==null&&at?(_.child=Ug(_,_e.child,null,it),_.child=Ug(_,null,ot,it)):Xi(_e,_,ot,it),_.memoizedState=tt.state,nt&&dg(_,et,!0),_.child}function kj(_e){var _=_e.stateNode;_.pendingContext?ag(_e,_.pendingContext,_.pendingContext!==_.context):_.context&&ag(_e,_.context,!1),yh(_e,_.containerInfo)}function lj(_e,_,et,tt,nt){return Ig(),Jg(nt),_.flags|=256,Xi(_e,_,et,tt),_.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function oj(_e,_,et){var tt=_.pendingProps,nt=L.current,it=!1,at=(_.flags&128)!==0,ot;if((ot=at)||(ot=_e!==null&&_e.memoizedState===null?!1:(nt&2)!==0),ot?(it=!0,_.flags&=-129):(_e===null||_e.memoizedState!==null)&&(nt|=1),G(L,nt&1),_e===null)return Eg(_),_e=_.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?(_.mode&1?_e.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(at=tt.children,_e=tt.fallback,it?(tt=_.mode,it=_.child,at={mode:"hidden",children:at},!(tt&1)&&it!==null?(it.childLanes=0,it.pendingProps=at):it=pj(at,tt,0,null),_e=Tg(_e,tt,et,null),it.return=_,_e.return=_,it.sibling=_e,_.child=it,_.child.memoizedState=nj(et),_.memoizedState=mj,_e):qj(_,at));if(nt=_e.memoizedState,nt!==null&&(ot=nt.dehydrated,ot!==null))return rj(_e,_,at,tt,ot,nt,et);if(it){it=tt.fallback,at=_.mode,nt=_e.child,ot=nt.sibling;var st={mode:"hidden",children:tt.children};return!(at&1)&&_.child!==nt?(tt=_.child,tt.childLanes=0,tt.pendingProps=st,_.deletions=null):(tt=Pg(nt,st),tt.subtreeFlags=nt.subtreeFlags&14680064),ot!==null?it=Pg(ot,it):(it=Tg(it,at,et,null),it.flags|=2),it.return=_,tt.return=_,tt.sibling=it,_.child=tt,tt=it,it=_.child,at=_e.child.memoizedState,at=at===null?nj(et):{baseLanes:at.baseLanes|et,cachePool:null,transitions:at.transitions},it.memoizedState=at,it.childLanes=_e.childLanes&~et,_.memoizedState=mj,tt}return it=_e.child,_e=it.sibling,tt=Pg(it,{mode:"visible",children:tt.children}),!(_.mode&1)&&(tt.lanes=et),tt.return=_,tt.sibling=null,_e!==null&&(et=_.deletions,et===null?(_.deletions=[_e],_.flags|=16):et.push(_e)),_.child=tt,_.memoizedState=null,tt}function qj(_e,_){return _=pj({mode:"visible",children:_},_e.mode,0,null),_.return=_e,_e.child=_}function sj(_e,_,et,tt){return tt!==null&&Jg(tt),Ug(_,_e.child,null,et),_e=qj(_,_.pendingProps.children),_e.flags|=2,_.memoizedState=null,_e}function rj(_e,_,et,tt,nt,it,at){if(et)return _.flags&256?(_.flags&=-257,tt=Ki(Error(p$2(422))),sj(_e,_,at,tt)):_.memoizedState!==null?(_.child=_e.child,_.flags|=128,null):(it=tt.fallback,nt=_.mode,tt=pj({mode:"visible",children:tt.children},nt,0,null),it=Tg(it,nt,at,null),it.flags|=2,tt.return=_,it.return=_,tt.sibling=it,_.child=tt,_.mode&1&&Ug(_,_e.child,null,at),_.child.memoizedState=nj(at),_.memoizedState=mj,it);if(!(_.mode&1))return sj(_e,_,at,null);if(nt.data==="$!"){if(tt=nt.nextSibling&&nt.nextSibling.dataset,tt)var ot=tt.dgst;return tt=ot,it=Error(p$2(419)),tt=Ki(it,tt,void 0),sj(_e,_,at,tt)}if(ot=(at&_e.childLanes)!==0,dh||ot){if(tt=Q,tt!==null){switch(at&-at){case 4:nt=2;break;case 16:nt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:nt=32;break;case 536870912:nt=268435456;break;default:nt=0}nt=nt&(tt.suspendedLanes|at)?0:nt,nt!==0&&nt!==it.retryLane&&(it.retryLane=nt,ih(_e,nt),gi(tt,_e,nt,-1))}return tj(),tt=Ki(Error(p$2(421))),sj(_e,_,at,tt)}return nt.data==="$?"?(_.flags|=128,_.child=_e.child,_=uj.bind(null,_e),nt._reactRetry=_,null):(_e=it.treeContext,yg=Lf(nt.nextSibling),xg=_,I=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=_),_=qj(_,tt.children),_.flags|=4096,_)}function vj(_e,_,et){_e.lanes|=_;var tt=_e.alternate;tt!==null&&(tt.lanes|=_),bh(_e.return,_,et)}function wj(_e,_,et,tt,nt){var it=_e.memoizedState;it===null?_e.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:tt,tail:et,tailMode:nt}:(it.isBackwards=_,it.rendering=null,it.renderingStartTime=0,it.last=tt,it.tail=et,it.tailMode=nt)}function xj(_e,_,et){var tt=_.pendingProps,nt=tt.revealOrder,it=tt.tail;if(Xi(_e,_,tt.children,et),tt=L.current,tt&2)tt=tt&1|2,_.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=_.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&vj(_e,et,_);else if(_e.tag===19)vj(_e,et,_);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===_)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}tt&=1}if(G(L,tt),!(_.mode&1))_.memoizedState=null;else switch(nt){case"forwards":for(et=_.child,nt=null;et!==null;)_e=et.alternate,_e!==null&&Ch(_e)===null&&(nt=et),et=et.sibling;et=nt,et===null?(nt=_.child,_.child=null):(nt=et.sibling,et.sibling=null),wj(_,!1,nt,et,it);break;case"backwards":for(et=null,nt=_.child,_.child=null;nt!==null;){if(_e=nt.alternate,_e!==null&&Ch(_e)===null){_.child=nt;break}_e=nt.sibling,nt.sibling=et,et=nt,nt=_e}wj(_,!0,et,null,it);break;case"together":wj(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function ij(_e,_){!(_.mode&1)&&_e!==null&&(_e.alternate=null,_.alternate=null,_.flags|=2)}function Zi(_e,_,et){if(_e!==null&&(_.dependencies=_e.dependencies),rh|=_.lanes,!(et&_.childLanes))return null;if(_e!==null&&_.child!==_e.child)throw Error(p$2(153));if(_.child!==null){for(_e=_.child,et=Pg(_e,_e.pendingProps),_.child=et,et.return=_;_e.sibling!==null;)_e=_e.sibling,et=et.sibling=Pg(_e,_e.pendingProps),et.return=_;et.sibling=null}return _.child}function yj(_e,_,et){switch(_.tag){case 3:kj(_),Ig();break;case 5:Ah(_);break;case 1:Zf(_.type)&&cg(_);break;case 4:yh(_,_.stateNode.containerInfo);break;case 10:var tt=_.type._context,nt=_.memoizedProps.value;G(Wg,tt._currentValue),tt._currentValue=nt;break;case 13:if(tt=_.memoizedState,tt!==null)return tt.dehydrated!==null?(G(L,L.current&1),_.flags|=128,null):et&_.child.childLanes?oj(_e,_,et):(G(L,L.current&1),_e=Zi(_e,_,et),_e!==null?_e.sibling:null);G(L,L.current&1);break;case 19:if(tt=(et&_.childLanes)!==0,_e.flags&128){if(tt)return xj(_e,_,et);_.flags|=128}if(nt=_.memoizedState,nt!==null&&(nt.rendering=null,nt.tail=null,nt.lastEffect=null),G(L,L.current),tt)break;return null;case 22:case 23:return _.lanes=0,dj(_e,_,et)}return Zi(_e,_,et)}var zj,Aj,Bj,Cj;zj=function(_e,_){for(var et=_.child;et!==null;){if(et.tag===5||et.tag===6)_e.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===_)break;for(;et.sibling===null;){if(et.return===null||et.return===_)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Aj=function(){};Bj=function(_e,_,et,tt){var nt=_e.memoizedProps;if(nt!==tt){_e=_.stateNode,xh(uh.current);var it=null;switch(et){case"input":nt=Ya(_e,nt),tt=Ya(_e,tt),it=[];break;case"select":nt=A$1({},nt,{value:void 0}),tt=A$1({},tt,{value:void 0}),it=[];break;case"textarea":nt=gb(_e,nt),tt=gb(_e,tt),it=[];break;default:typeof nt.onClick!="function"&&typeof tt.onClick=="function"&&(_e.onclick=Bf)}ub(et,tt);var at;et=null;for(dt in nt)if(!tt.hasOwnProperty(dt)&&nt.hasOwnProperty(dt)&&nt[dt]!=null)if(dt==="style"){var ot=nt[dt];for(at in ot)ot.hasOwnProperty(at)&&(et||(et={}),et[at]="")}else dt!=="dangerouslySetInnerHTML"&&dt!=="children"&&dt!=="suppressContentEditableWarning"&&dt!=="suppressHydrationWarning"&&dt!=="autoFocus"&&(ea.hasOwnProperty(dt)?it||(it=[]):(it=it||[]).push(dt,null));for(dt in tt){var st=tt[dt];if(ot=nt!=null?nt[dt]:void 0,tt.hasOwnProperty(dt)&&st!==ot&&(st!=null||ot!=null))if(dt==="style")if(ot){for(at in ot)!ot.hasOwnProperty(at)||st&&st.hasOwnProperty(at)||(et||(et={}),et[at]="");for(at in st)st.hasOwnProperty(at)&&ot[at]!==st[at]&&(et||(et={}),et[at]=st[at])}else et||(it||(it=[]),it.push(dt,et)),et=st;else dt==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,ot=ot?ot.__html:void 0,st!=null&&ot!==st&&(it=it||[]).push(dt,st)):dt==="children"?typeof st!="string"&&typeof st!="number"||(it=it||[]).push(dt,""+st):dt!=="suppressContentEditableWarning"&&dt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(dt)?(st!=null&&dt==="onScroll"&&D("scroll",_e),it||ot===st||(it=[])):(it=it||[]).push(dt,st))}et&&(it=it||[]).push("style",et);var dt=it;(_.updateQueue=dt)&&(_.flags|=4)}};Cj=function(_e,_,et,tt){et!==tt&&(_.flags|=4)};function Dj(_e,_){if(!I)switch(_e.tailMode){case"hidden":_=_e.tail;for(var et=null;_!==null;)_.alternate!==null&&(et=_),_=_.sibling;et===null?_e.tail=null:et.sibling=null;break;case"collapsed":et=_e.tail;for(var tt=null;et!==null;)et.alternate!==null&&(tt=et),et=et.sibling;tt===null?_||_e.tail===null?_e.tail=null:_e.tail.sibling=null:tt.sibling=null}}function S$1(_e){var _=_e.alternate!==null&&_e.alternate.child===_e.child,et=0,tt=0;if(_)for(var nt=_e.child;nt!==null;)et|=nt.lanes|nt.childLanes,tt|=nt.subtreeFlags&14680064,tt|=nt.flags&14680064,nt.return=_e,nt=nt.sibling;else for(nt=_e.child;nt!==null;)et|=nt.lanes|nt.childLanes,tt|=nt.subtreeFlags,tt|=nt.flags,nt.return=_e,nt=nt.sibling;return _e.subtreeFlags|=tt,_e.childLanes=et,_}function Ej(_e,_,et){var tt=_.pendingProps;switch(wg(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_),null;case 1:return Zf(_.type)&&$f(),S$1(_),null;case 3:return tt=_.stateNode,zh(),E(Wf),E(H$1),Eh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(_e===null||_e.child===null)&&(Gg(_)?_.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_e,_),S$1(_),null;case 5:Bh(_);var nt=xh(wh.current);if(et=_.type,_e!==null&&_.stateNode!=null)Bj(_e,_,et,tt,nt),_e.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!tt){if(_.stateNode===null)throw Error(p$2(166));return S$1(_),null}if(_e=xh(uh.current),Gg(_)){tt=_.stateNode,et=_.type;var it=_.memoizedProps;switch(tt[Of]=_,tt[Pf]=it,_e=(_.mode&1)!==0,et){case"dialog":D("cancel",tt),D("close",tt);break;case"iframe":case"object":case"embed":D("load",tt);break;case"video":case"audio":for(nt=0;nt<lf.length;nt++)D(lf[nt],tt);break;case"source":D("error",tt);break;case"img":case"image":case"link":D("error",tt),D("load",tt);break;case"details":D("toggle",tt);break;case"input":Za(tt,it),D("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!it.multiple},D("invalid",tt);break;case"textarea":hb(tt,it),D("invalid",tt)}ub(et,it),nt=null;for(var at in it)if(it.hasOwnProperty(at)){var ot=it[at];at==="children"?typeof ot=="string"?tt.textContent!==ot&&(it.suppressHydrationWarning!==!0&&Af(tt.textContent,ot,_e),nt=["children",ot]):typeof ot=="number"&&tt.textContent!==""+ot&&(it.suppressHydrationWarning!==!0&&Af(tt.textContent,ot,_e),nt=["children",""+ot]):ea.hasOwnProperty(at)&&ot!=null&&at==="onScroll"&&D("scroll",tt)}switch(et){case"input":Va(tt),db(tt,it,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(tt.onclick=Bf)}tt=nt,_.updateQueue=tt,tt!==null&&(_.flags|=4)}else{at=nt.nodeType===9?nt:nt.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(et)),_e==="http://www.w3.org/1999/xhtml"?et==="script"?(_e=at.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof tt.is=="string"?_e=at.createElement(et,{is:tt.is}):(_e=at.createElement(et),et==="select"&&(at=_e,tt.multiple?at.multiple=!0:tt.size&&(at.size=tt.size))):_e=at.createElementNS(_e,et),_e[Of]=_,_e[Pf]=tt,zj(_e,_,!1,!1),_.stateNode=_e;e:{switch(at=vb(et,tt),et){case"dialog":D("cancel",_e),D("close",_e),nt=tt;break;case"iframe":case"object":case"embed":D("load",_e),nt=tt;break;case"video":case"audio":for(nt=0;nt<lf.length;nt++)D(lf[nt],_e);nt=tt;break;case"source":D("error",_e),nt=tt;break;case"img":case"image":case"link":D("error",_e),D("load",_e),nt=tt;break;case"details":D("toggle",_e),nt=tt;break;case"input":Za(_e,tt),nt=Ya(_e,tt),D("invalid",_e);break;case"option":nt=tt;break;case"select":_e._wrapperState={wasMultiple:!!tt.multiple},nt=A$1({},tt,{value:void 0}),D("invalid",_e);break;case"textarea":hb(_e,tt),nt=gb(_e,tt),D("invalid",_e);break;default:nt=tt}ub(et,nt),ot=nt;for(it in ot)if(ot.hasOwnProperty(it)){var st=ot[it];it==="style"?sb(_e,st):it==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,st!=null&&nb(_e,st)):it==="children"?typeof st=="string"?(et!=="textarea"||st!=="")&&ob(_e,st):typeof st=="number"&&ob(_e,""+st):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea.hasOwnProperty(it)?st!=null&&it==="onScroll"&&D("scroll",_e):st!=null&&ta(_e,it,st,at))}switch(et){case"input":Va(_e),db(_e,tt,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":tt.value!=null&&_e.setAttribute("value",""+Sa(tt.value));break;case"select":_e.multiple=!!tt.multiple,it=tt.value,it!=null?fb(_e,!!tt.multiple,it,!1):tt.defaultValue!=null&&fb(_e,!!tt.multiple,tt.defaultValue,!0);break;default:typeof nt.onClick=="function"&&(_e.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return S$1(_),null;case 6:if(_e&&_.stateNode!=null)Cj(_e,_,_e.memoizedProps,tt);else{if(typeof tt!="string"&&_.stateNode===null)throw Error(p$2(166));if(et=xh(wh.current),xh(uh.current),Gg(_)){if(tt=_.stateNode,et=_.memoizedProps,tt[Of]=_,(it=tt.nodeValue!==et)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(tt.nodeValue,et,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,et,(_e.mode&1)!==0)}it&&(_.flags|=4)}else tt=(et.nodeType===9?et:et.ownerDocument).createTextNode(tt),tt[Of]=_,_.stateNode=tt}return S$1(_),null;case 13:if(E(L),tt=_.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I&&yg!==null&&_.mode&1&&!(_.flags&128))Hg(),Ig(),_.flags|=98560,it=!1;else if(it=Gg(_),tt!==null&&tt.dehydrated!==null){if(_e===null){if(!it)throw Error(p$2(318));if(it=_.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$2(317));it[Of]=_}else Ig(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;S$1(_),it=!1}else zg!==null&&(Fj(zg),zg=null),it=!0;if(!it)return _.flags&65536?_:null}return _.flags&128?(_.lanes=et,_):(tt=tt!==null,tt!==(_e!==null&&_e.memoizedState!==null)&&tt&&(_.child.flags|=8192,_.mode&1&&(_e===null||L.current&1?T===0&&(T=3):tj())),_.updateQueue!==null&&(_.flags|=4),S$1(_),null);case 4:return zh(),Aj(_e,_),_e===null&&sf(_.stateNode.containerInfo),S$1(_),null;case 10:return ah(_.type._context),S$1(_),null;case 17:return Zf(_.type)&&$f(),S$1(_),null;case 19:if(E(L),it=_.memoizedState,it===null)return S$1(_),null;if(tt=(_.flags&128)!==0,at=it.rendering,at===null)if(tt)Dj(it,!1);else{if(T!==0||_e!==null&&_e.flags&128)for(_e=_.child;_e!==null;){if(at=Ch(_e),at!==null){for(_.flags|=128,Dj(it,!1),tt=at.updateQueue,tt!==null&&(_.updateQueue=tt,_.flags|=4),_.subtreeFlags=0,tt=et,et=_.child;et!==null;)it=et,_e=tt,it.flags&=14680066,at=it.alternate,at===null?(it.childLanes=0,it.lanes=_e,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=at.childLanes,it.lanes=at.lanes,it.child=at.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=at.memoizedProps,it.memoizedState=at.memoizedState,it.updateQueue=at.updateQueue,it.type=at.type,_e=at.dependencies,it.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),et=et.sibling;return G(L,L.current&1|2),_.child}_e=_e.sibling}it.tail!==null&&B()>Gj&&(_.flags|=128,tt=!0,Dj(it,!1),_.lanes=4194304)}else{if(!tt)if(_e=Ch(at),_e!==null){if(_.flags|=128,tt=!0,et=_e.updateQueue,et!==null&&(_.updateQueue=et,_.flags|=4),Dj(it,!0),it.tail===null&&it.tailMode==="hidden"&&!at.alternate&&!I)return S$1(_),null}else 2*B()-it.renderingStartTime>Gj&&et!==1073741824&&(_.flags|=128,tt=!0,Dj(it,!1),_.lanes=4194304);it.isBackwards?(at.sibling=_.child,_.child=at):(et=it.last,et!==null?et.sibling=at:_.child=at,it.last=at)}return it.tail!==null?(_=it.tail,it.rendering=_,it.tail=_.sibling,it.renderingStartTime=B(),_.sibling=null,et=L.current,G(L,tt?et&1|2:et&1),_):(S$1(_),null);case 22:case 23:return Hj(),tt=_.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==tt&&(_.flags|=8192),tt&&_.mode&1?fj&1073741824&&(S$1(_),_.subtreeFlags&6&&(_.flags|=8192)):S$1(_),null;case 24:return null;case 25:return null}throw Error(p$2(156,_.tag))}function Ij(_e,_){switch(wg(_),_.tag){case 1:return Zf(_.type)&&$f(),_e=_.flags,_e&65536?(_.flags=_e&-65537|128,_):null;case 3:return zh(),E(Wf),E(H$1),Eh(),_e=_.flags,_e&65536&&!(_e&128)?(_.flags=_e&-65537|128,_):null;case 5:return Bh(_),null;case 13:if(E(L),_e=_.memoizedState,_e!==null&&_e.dehydrated!==null){if(_.alternate===null)throw Error(p$2(340));Ig()}return _e=_.flags,_e&65536?(_.flags=_e&-65537|128,_):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(_.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(_e,_){var et=_e.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(tt){W(_e,_,tt)}else et.current=null}function Mj(_e,_,et){try{et()}catch(tt){W(_e,_,tt)}}var Nj=!1;function Oj(_e,_){if(Cf=dd,_e=Me(),Ne(_e)){if("selectionStart"in _e)var et={start:_e.selectionStart,end:_e.selectionEnd};else e:{et=(et=_e.ownerDocument)&&et.defaultView||window;var tt=et.getSelection&&et.getSelection();if(tt&&tt.rangeCount!==0){et=tt.anchorNode;var nt=tt.anchorOffset,it=tt.focusNode;tt=tt.focusOffset;try{et.nodeType,it.nodeType}catch{et=null;break e}var at=0,ot=-1,st=-1,dt=0,ht=0,ct=_e,ut=null;t:for(;;){for(var ft;ct!==et||nt!==0&&ct.nodeType!==3||(ot=at+nt),ct!==it||tt!==0&&ct.nodeType!==3||(st=at+tt),ct.nodeType===3&&(at+=ct.nodeValue.length),(ft=ct.firstChild)!==null;)ut=ct,ct=ft;for(;;){if(ct===_e)break t;if(ut===et&&++dt===nt&&(ot=at),ut===it&&++ht===tt&&(st=at),(ft=ct.nextSibling)!==null)break;ct=ut,ut=ct.parentNode}ct=ft}et=ot===-1||st===-1?null:{start:ot,end:st}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:_e,selectionRange:et},dd=!1,V=_;V!==null;)if(_=V,_e=_.child,(_.subtreeFlags&1028)!==0&&_e!==null)_e.return=_,V=_e;else for(;V!==null;){_=V;try{var gt=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var mt=gt.memoizedProps,vt=gt.memoizedState,yt=_.stateNode,bt=yt.getSnapshotBeforeUpdate(_.elementType===_.type?mt:Ci(_.type,mt),vt);yt.__reactInternalSnapshotBeforeUpdate=bt}break;case 3:var _t=_.stateNode.containerInfo;_t.nodeType===1?_t.textContent="":_t.nodeType===9&&_t.documentElement&&_t.removeChild(_t.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(xt){W(_,_.return,xt)}if(_e=_.sibling,_e!==null){_e.return=_.return,V=_e;break}V=_.return}return gt=Nj,Nj=!1,gt}function Pj(_e,_,et){var tt=_.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var nt=tt=tt.next;do{if((nt.tag&_e)===_e){var it=nt.destroy;nt.destroy=void 0,it!==void 0&&Mj(_,et,it)}nt=nt.next}while(nt!==tt)}}function Qj(_e,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var et=_=_.next;do{if((et.tag&_e)===_e){var tt=et.create;et.destroy=tt()}et=et.next}while(et!==_)}}function Rj(_e){var _=_e.ref;if(_!==null){var et=_e.stateNode;switch(_e.tag){case 5:_e=et;break;default:_e=et}typeof _=="function"?_(_e):_.current=_e}}function Sj(_e){var _=_e.alternate;_!==null&&(_e.alternate=null,Sj(_)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(_=_e.stateNode,_!==null&&(delete _[Of],delete _[Pf],delete _[of],delete _[Qf],delete _[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Tj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Uj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Tj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Vj(_e,_,et){var tt=_e.tag;if(tt===5||tt===6)_e=_e.stateNode,_?et.nodeType===8?et.parentNode.insertBefore(_e,_):et.insertBefore(_e,_):(et.nodeType===8?(_=et.parentNode,_.insertBefore(_e,et)):(_=et,_.appendChild(_e)),et=et._reactRootContainer,et!=null||_.onclick!==null||(_.onclick=Bf));else if(tt!==4&&(_e=_e.child,_e!==null))for(Vj(_e,_,et),_e=_e.sibling;_e!==null;)Vj(_e,_,et),_e=_e.sibling}function Wj(_e,_,et){var tt=_e.tag;if(tt===5||tt===6)_e=_e.stateNode,_?et.insertBefore(_e,_):et.appendChild(_e);else if(tt!==4&&(_e=_e.child,_e!==null))for(Wj(_e,_,et),_e=_e.sibling;_e!==null;)Wj(_e,_,et),_e=_e.sibling}var X=null,Xj=!1;function Yj(_e,_,et){for(et=et.child;et!==null;)Zj(_e,_,et),et=et.sibling}function Zj(_e,_,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U||Lj(et,_);case 6:var tt=X,nt=Xj;X=null,Yj(_e,_,et),X=tt,Xj=nt,X!==null&&(Xj?(_e=X,et=et.stateNode,_e.nodeType===8?_e.parentNode.removeChild(et):_e.removeChild(et)):X.removeChild(et.stateNode));break;case 18:X!==null&&(Xj?(_e=X,et=et.stateNode,_e.nodeType===8?Kf(_e.parentNode,et):_e.nodeType===1&&Kf(_e,et),bd(_e)):Kf(X,et.stateNode));break;case 4:tt=X,nt=Xj,X=et.stateNode.containerInfo,Xj=!0,Yj(_e,_,et),X=tt,Xj=nt;break;case 0:case 11:case 14:case 15:if(!U&&(tt=et.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){nt=tt=tt.next;do{var it=nt,at=it.destroy;it=it.tag,at!==void 0&&(it&2||it&4)&&Mj(et,_,at),nt=nt.next}while(nt!==tt)}Yj(_e,_,et);break;case 1:if(!U&&(Lj(et,_),tt=et.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=et.memoizedProps,tt.state=et.memoizedState,tt.componentWillUnmount()}catch(ot){W(et,_,ot)}Yj(_e,_,et);break;case 21:Yj(_e,_,et);break;case 22:et.mode&1?(U=(tt=U)||et.memoizedState!==null,Yj(_e,_,et),U=tt):Yj(_e,_,et);break;default:Yj(_e,_,et)}}function ak(_e){var _=_e.updateQueue;if(_!==null){_e.updateQueue=null;var et=_e.stateNode;et===null&&(et=_e.stateNode=new Kj),_.forEach(function(tt){var nt=bk.bind(null,_e,tt);et.has(tt)||(et.add(tt),tt.then(nt,nt))})}}function ck(_e,_){var et=_.deletions;if(et!==null)for(var tt=0;tt<et.length;tt++){var nt=et[tt];try{var it=_e,at=_,ot=at;e:for(;ot!==null;){switch(ot.tag){case 5:X=ot.stateNode,Xj=!1;break e;case 3:X=ot.stateNode.containerInfo,Xj=!0;break e;case 4:X=ot.stateNode.containerInfo,Xj=!0;break e}ot=ot.return}if(X===null)throw Error(p$2(160));Zj(it,at,nt),X=null,Xj=!1;var st=nt.alternate;st!==null&&(st.return=null),nt.return=null}catch(dt){W(nt,_,dt)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)dk(_,_e),_=_.sibling}function dk(_e,_){var et=_e.alternate,tt=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(ck(_,_e),ek(_e),tt&4){try{Pj(3,_e,_e.return),Qj(3,_e)}catch(mt){W(_e,_e.return,mt)}try{Pj(5,_e,_e.return)}catch(mt){W(_e,_e.return,mt)}}break;case 1:ck(_,_e),ek(_e),tt&512&&et!==null&&Lj(et,et.return);break;case 5:if(ck(_,_e),ek(_e),tt&512&&et!==null&&Lj(et,et.return),_e.flags&32){var nt=_e.stateNode;try{ob(nt,"")}catch(mt){W(_e,_e.return,mt)}}if(tt&4&&(nt=_e.stateNode,nt!=null)){var it=_e.memoizedProps,at=et!==null?et.memoizedProps:it,ot=_e.type,st=_e.updateQueue;if(_e.updateQueue=null,st!==null)try{ot==="input"&&it.type==="radio"&&it.name!=null&&ab(nt,it),vb(ot,at);var dt=vb(ot,it);for(at=0;at<st.length;at+=2){var ht=st[at],ct=st[at+1];ht==="style"?sb(nt,ct):ht==="dangerouslySetInnerHTML"?nb(nt,ct):ht==="children"?ob(nt,ct):ta(nt,ht,ct,dt)}switch(ot){case"input":bb(nt,it);break;case"textarea":ib(nt,it);break;case"select":var ut=nt._wrapperState.wasMultiple;nt._wrapperState.wasMultiple=!!it.multiple;var ft=it.value;ft!=null?fb(nt,!!it.multiple,ft,!1):ut!==!!it.multiple&&(it.defaultValue!=null?fb(nt,!!it.multiple,it.defaultValue,!0):fb(nt,!!it.multiple,it.multiple?[]:"",!1))}nt[Pf]=it}catch(mt){W(_e,_e.return,mt)}}break;case 6:if(ck(_,_e),ek(_e),tt&4){if(_e.stateNode===null)throw Error(p$2(162));nt=_e.stateNode,it=_e.memoizedProps;try{nt.nodeValue=it}catch(mt){W(_e,_e.return,mt)}}break;case 3:if(ck(_,_e),ek(_e),tt&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(_.containerInfo)}catch(mt){W(_e,_e.return,mt)}break;case 4:ck(_,_e),ek(_e);break;case 13:ck(_,_e),ek(_e),nt=_e.child,nt.flags&8192&&(it=nt.memoizedState!==null,nt.stateNode.isHidden=it,!it||nt.alternate!==null&&nt.alternate.memoizedState!==null||(fk=B())),tt&4&&ak(_e);break;case 22:if(ht=et!==null&&et.memoizedState!==null,_e.mode&1?(U=(dt=U)||ht,ck(_,_e),U=dt):ck(_,_e),ek(_e),tt&8192){if(dt=_e.memoizedState!==null,(_e.stateNode.isHidden=dt)&&!ht&&_e.mode&1)for(V=_e,ht=_e.child;ht!==null;){for(ct=V=ht;V!==null;){switch(ut=V,ft=ut.child,ut.tag){case 0:case 11:case 14:case 15:Pj(4,ut,ut.return);break;case 1:Lj(ut,ut.return);var gt=ut.stateNode;if(typeof gt.componentWillUnmount=="function"){tt=ut,et=ut.return;try{_=tt,gt.props=_.memoizedProps,gt.state=_.memoizedState,gt.componentWillUnmount()}catch(mt){W(tt,et,mt)}}break;case 5:Lj(ut,ut.return);break;case 22:if(ut.memoizedState!==null){gk(ct);continue}}ft!==null?(ft.return=ut,V=ft):gk(ct)}ht=ht.sibling}e:for(ht=null,ct=_e;;){if(ct.tag===5){if(ht===null){ht=ct;try{nt=ct.stateNode,dt?(it=nt.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(ot=ct.stateNode,st=ct.memoizedProps.style,at=st!=null&&st.hasOwnProperty("display")?st.display:null,ot.style.display=rb$1("display",at))}catch(mt){W(_e,_e.return,mt)}}}else if(ct.tag===6){if(ht===null)try{ct.stateNode.nodeValue=dt?"":ct.memoizedProps}catch(mt){W(_e,_e.return,mt)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===_e)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===_e)break e;for(;ct.sibling===null;){if(ct.return===null||ct.return===_e)break e;ht===ct&&(ht=null),ct=ct.return}ht===ct&&(ht=null),ct.sibling.return=ct.return,ct=ct.sibling}}break;case 19:ck(_,_e),ek(_e),tt&4&&ak(_e);break;case 21:break;default:ck(_,_e),ek(_e)}}function ek(_e){var _=_e.flags;if(_&2){try{e:{for(var et=_e.return;et!==null;){if(Tj(et)){var tt=et;break e}et=et.return}throw Error(p$2(160))}switch(tt.tag){case 5:var nt=tt.stateNode;tt.flags&32&&(ob(nt,""),tt.flags&=-33);var it=Uj(_e);Wj(_e,it,nt);break;case 3:case 4:var at=tt.stateNode.containerInfo,ot=Uj(_e);Vj(_e,ot,at);break;default:throw Error(p$2(161))}}catch(st){W(_e,_e.return,st)}_e.flags&=-3}_&4096&&(_e.flags&=-4097)}function hk(_e,_,et){V=_e,ik(_e)}function ik(_e,_,et){for(var tt=(_e.mode&1)!==0;V!==null;){var nt=V,it=nt.child;if(nt.tag===22&&tt){var at=nt.memoizedState!==null||Jj;if(!at){var ot=nt.alternate,st=ot!==null&&ot.memoizedState!==null||U;ot=Jj;var dt=U;if(Jj=at,(U=st)&&!dt)for(V=nt;V!==null;)at=V,st=at.child,at.tag===22&&at.memoizedState!==null?jk(nt):st!==null?(st.return=at,V=st):jk(nt);for(;it!==null;)V=it,ik(it),it=it.sibling;V=nt,Jj=ot,U=dt}kk(_e)}else nt.subtreeFlags&8772&&it!==null?(it.return=nt,V=it):kk(_e)}}function kk(_e){for(;V!==null;){var _=V;if(_.flags&8772){var et=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:U||Qj(5,_);break;case 1:var tt=_.stateNode;if(_.flags&4&&!U)if(et===null)tt.componentDidMount();else{var nt=_.elementType===_.type?et.memoizedProps:Ci(_.type,et.memoizedProps);tt.componentDidUpdate(nt,et.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var it=_.updateQueue;it!==null&&sh(_,it,tt);break;case 3:var at=_.updateQueue;if(at!==null){if(et=null,_.child!==null)switch(_.child.tag){case 5:et=_.child.stateNode;break;case 1:et=_.child.stateNode}sh(_,at,et)}break;case 5:var ot=_.stateNode;if(et===null&&_.flags&4){et=ot;var st=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":st.autoFocus&&et.focus();break;case"img":st.src&&(et.src=st.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var dt=_.alternate;if(dt!==null){var ht=dt.memoizedState;if(ht!==null){var ct=ht.dehydrated;ct!==null&&bd(ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||_.flags&512&&Rj(_)}catch(ut){W(_,_.return,ut)}}if(_===_e){V=null;break}if(et=_.sibling,et!==null){et.return=_.return,V=et;break}V=_.return}}function gk(_e){for(;V!==null;){var _=V;if(_===_e){V=null;break}var et=_.sibling;if(et!==null){et.return=_.return,V=et;break}V=_.return}}function jk(_e){for(;V!==null;){var _=V;try{switch(_.tag){case 0:case 11:case 15:var et=_.return;try{Qj(4,_)}catch(st){W(_,et,st)}break;case 1:var tt=_.stateNode;if(typeof tt.componentDidMount=="function"){var nt=_.return;try{tt.componentDidMount()}catch(st){W(_,nt,st)}}var it=_.return;try{Rj(_)}catch(st){W(_,it,st)}break;case 5:var at=_.return;try{Rj(_)}catch(st){W(_,at,st)}}}catch(st){W(_,_.return,st)}if(_===_e){V=null;break}var ot=_.sibling;if(ot!==null){ot.return=_.return,V=ot;break}V=_.return}}var lk=Math.ceil,mk=ua$1.ReactCurrentDispatcher,nk=ua$1.ReactCurrentOwner,ok=ua$1.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(_e){return _e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_e=C,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function gi(_e,_,et,tt){if(50<yk)throw yk=0,zk=null,Error(p$2(185));Ac(_e,et,tt),(!(K&2)||_e!==Q)&&(_e===Q&&(!(K&2)&&(qk|=et),T===4&&Ck(_e,Z)),Dk(_e,tt),et===1&&K===0&&!(_.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(_e,_){var et=_e.callbackNode;wc(_e,_);var tt=uc(_e,_e===Q?Z:0);if(tt===0)et!==null&&bc(et),_e.callbackNode=null,_e.callbackPriority=0;else if(_=tt&-tt,_e.callbackPriority!==_){if(et!=null&&bc(et),_===1)_e.tag===0?ig(Ek.bind(null,_e)):hg(Ek.bind(null,_e)),Jf(function(){!(K&6)&&jg()}),et=null;else{switch(Dc(tt)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Fk(et,Gk.bind(null,_e))}_e.callbackPriority=_,_e.callbackNode=et}}function Gk(_e,_){if(Ak=-1,Bk=0,K&6)throw Error(p$2(327));var et=_e.callbackNode;if(Hk()&&_e.callbackNode!==et)return null;var tt=uc(_e,_e===Q?Z:0);if(tt===0)return null;if(tt&30||tt&_e.expiredLanes||_)_=Ik(_e,tt);else{_=tt;var nt=K;K|=2;var it=Jk();(Q!==_e||Z!==_)&&(uk=null,Gj=B()+500,Kk(_e,_));do try{Lk();break}catch(ot){Mk(_e,ot)}while(!0);$g(),mk.current=it,K=nt,Y!==null?_=0:(Q=null,Z=0,_=T)}if(_!==0){if(_===2&&(nt=xc(_e),nt!==0&&(tt=nt,_=Nk(_e,nt))),_===1)throw et=pk,Kk(_e,0),Ck(_e,tt),Dk(_e,B()),et;if(_===6)Ck(_e,tt);else{if(nt=_e.current.alternate,!(tt&30)&&!Ok(nt)&&(_=Ik(_e,tt),_===2&&(it=xc(_e),it!==0&&(tt=it,_=Nk(_e,it))),_===1))throw et=pk,Kk(_e,0),Ck(_e,tt),Dk(_e,B()),et;switch(_e.finishedWork=nt,_e.finishedLanes=tt,_){case 0:case 1:throw Error(p$2(345));case 2:Pk(_e,tk,uk);break;case 3:if(Ck(_e,tt),(tt&130023424)===tt&&(_=fk+500-B(),10<_)){if(uc(_e,0)!==0)break;if(nt=_e.suspendedLanes,(nt&tt)!==tt){R(),_e.pingedLanes|=_e.suspendedLanes&nt;break}_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),_);break}Pk(_e,tk,uk);break;case 4:if(Ck(_e,tt),(tt&4194240)===tt)break;for(_=_e.eventTimes,nt=-1;0<tt;){var at=31-oc(tt);it=1<<at,at=_[at],at>nt&&(nt=at),tt&=~it}if(tt=nt,tt=B()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*lk(tt/1960))-tt,10<tt){_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),tt);break}Pk(_e,tk,uk);break;case 5:Pk(_e,tk,uk);break;default:throw Error(p$2(329))}}}return Dk(_e,B()),_e.callbackNode===et?Gk.bind(null,_e):null}function Nk(_e,_){var et=sk;return _e.current.memoizedState.isDehydrated&&(Kk(_e,_).flags|=256),_e=Ik(_e,_),_e!==2&&(_=tk,tk=et,_!==null&&Fj(_)),_e}function Fj(_e){tk===null?tk=_e:tk.push.apply(tk,_e)}function Ok(_e){for(var _=_e;;){if(_.flags&16384){var et=_.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var tt=0;tt<et.length;tt++){var nt=et[tt],it=nt.getSnapshot;nt=nt.value;try{if(!He(it(),nt))return!1}catch{return!1}}}if(et=_.child,_.subtreeFlags&16384&&et!==null)et.return=_,_=et;else{if(_===_e)break;for(;_.sibling===null;){if(_.return===null||_.return===_e)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Ck(_e,_){for(_&=~rk,_&=~qk,_e.suspendedLanes|=_,_e.pingedLanes&=~_,_e=_e.expirationTimes;0<_;){var et=31-oc(_),tt=1<<et;_e[et]=-1,_&=~tt}}function Ek(_e){if(K&6)throw Error(p$2(327));Hk();var _=uc(_e,0);if(!(_&1))return Dk(_e,B()),null;var et=Ik(_e,_);if(_e.tag!==0&&et===2){var tt=xc(_e);tt!==0&&(_=tt,et=Nk(_e,tt))}if(et===1)throw et=pk,Kk(_e,0),Ck(_e,_),Dk(_e,B()),et;if(et===6)throw Error(p$2(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=_,Pk(_e,tk,uk),Dk(_e,B()),null}function Qk(_e,_){var et=K;K|=1;try{return _e(_)}finally{K=et,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(_e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var _=K;K|=1;var et=ok.transition,tt=C;try{if(ok.transition=null,C=1,_e)return _e()}finally{C=tt,ok.transition=et,K=_,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(_e,_){_e.finishedWork=null,_e.finishedLanes=0;var et=_e.timeoutHandle;if(et!==-1&&(_e.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var tt=et;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:zh(),E(Wf),E(H$1),Eh();break;case 5:Bh(tt);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(tt.type._context);break;case 22:case 23:Hj()}et=et.return}if(Q=_e,Y=_e=Pg(_e.current,null),Z=fj=_,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(_=0;_<fh.length;_++)if(et=fh[_],tt=et.interleaved,tt!==null){et.interleaved=null;var nt=tt.next,it=et.pending;if(it!==null){var at=it.next;it.next=nt,tt.next=at}et.pending=tt}fh=null}return _e}function Mk(_e,_){do{var et=Y;try{if($g(),Fh.current=Rh,Ih){for(var tt=M$1.memoizedState;tt!==null;){var nt=tt.queue;nt!==null&&(nt.pending=null),tt=tt.next}Ih=!1}if(Hh=0,O=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,et===null||et.return===null){T=1,pk=_,Y=null;break}e:{var it=_e,at=et.return,ot=et,st=_;if(_=Z,ot.flags|=32768,st!==null&&typeof st=="object"&&typeof st.then=="function"){var dt=st,ht=ot,ct=ht.tag;if(!(ht.mode&1)&&(ct===0||ct===11||ct===15)){var ut=ht.alternate;ut?(ht.updateQueue=ut.updateQueue,ht.memoizedState=ut.memoizedState,ht.lanes=ut.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var ft=Ui(at);if(ft!==null){ft.flags&=-257,Vi(ft,at,ot,it,_),ft.mode&1&&Si(it,dt,_),_=ft,st=dt;var gt=_.updateQueue;if(gt===null){var mt=new Set;mt.add(st),_.updateQueue=mt}else gt.add(st);break e}else{if(!(_&1)){Si(it,dt,_),tj();break e}st=Error(p$2(426))}}else if(I&&ot.mode&1){var vt=Ui(at);if(vt!==null){!(vt.flags&65536)&&(vt.flags|=256),Vi(vt,at,ot,it,_),Jg(Ji(st,ot));break e}}it=st=Ji(st,ot),T!==4&&(T=2),sk===null?sk=[it]:sk.push(it),it=at;do{switch(it.tag){case 3:it.flags|=65536,_&=-_,it.lanes|=_;var yt=Ni(it,st,_);ph(it,yt);break e;case 1:ot=st;var bt=it.type,_t=it.stateNode;if(!(it.flags&128)&&(typeof bt.getDerivedStateFromError=="function"||_t!==null&&typeof _t.componentDidCatch=="function"&&(Ri===null||!Ri.has(_t)))){it.flags|=65536,_&=-_,it.lanes|=_;var xt=Qi(it,ot,_);ph(it,xt);break e}}it=it.return}while(it!==null)}Sk(et)}catch(St){_=St,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(!0)}function Jk(){var _e=mk.current;return mk.current=Rh,_e===null?Rh:_e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(_e,_){var et=K;K|=2;var tt=Jk();(Q!==_e||Z!==_)&&(uk=null,Kk(_e,_));do try{Tk();break}catch(nt){Mk(_e,nt)}while(!0);if($g(),K=et,mk.current=tt,Y!==null)throw Error(p$2(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(_e){var _=Vk(_e.alternate,_e,fj);_e.memoizedProps=_e.pendingProps,_===null?Sk(_e):Y=_,nk.current=null}function Sk(_e){var _=_e;do{var et=_.alternate;if(_e=_.return,_.flags&32768){if(et=Ij(et,_),et!==null){et.flags&=32767,Y=et;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T=6,Y=null;return}}else if(et=Ej(et,_,fj),et!==null){Y=et;return}if(_=_.sibling,_!==null){Y=_;return}Y=_=_e}while(_!==null);T===0&&(T=5)}function Pk(_e,_,et){var tt=C,nt=ok.transition;try{ok.transition=null,C=1,Wk(_e,_,et,tt)}finally{ok.transition=nt,C=tt}return null}function Wk(_e,_,et,tt){do Hk();while(wk!==null);if(K&6)throw Error(p$2(327));et=_e.finishedWork;var nt=_e.finishedLanes;if(et===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,et===_e.current)throw Error(p$2(177));_e.callbackNode=null,_e.callbackPriority=0;var it=et.lanes|et.childLanes;if(Bc(_e,it),_e===Q&&(Y=Q=null,Z=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),it=(et.flags&15990)!==0,et.subtreeFlags&15990||it){it=ok.transition,ok.transition=null;var at=C;C=1;var ot=K;K|=4,nk.current=null,Oj(_e,et),dk(et,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=et,hk(et),dc(),K=ot,C=at,ok.transition=it}else _e.current=et;if(vk&&(vk=!1,wk=_e,xk=nt),it=_e.pendingLanes,it===0&&(Ri=null),mc(et.stateNode),Dk(_e,B()),_!==null)for(tt=_e.onRecoverableError,et=0;et<_.length;et++)nt=_[et],tt(nt.value,{componentStack:nt.stack,digest:nt.digest});if(Oi)throw Oi=!1,_e=Pi,Pi=null,_e;return xk&1&&_e.tag!==0&&Hk(),it=_e.pendingLanes,it&1?_e===zk?yk++:(yk=0,zk=_e):yk=0,jg(),null}function Hk(){if(wk!==null){var _e=Dc(xk),_=ok.transition,et=C;try{if(ok.transition=null,C=16>_e?16:_e,wk===null)var tt=!1;else{if(_e=wk,wk=null,xk=0,K&6)throw Error(p$2(331));var nt=K;for(K|=4,V=_e.current;V!==null;){var it=V,at=it.child;if(V.flags&16){var ot=it.deletions;if(ot!==null){for(var st=0;st<ot.length;st++){var dt=ot[st];for(V=dt;V!==null;){var ht=V;switch(ht.tag){case 0:case 11:case 15:Pj(8,ht,it)}var ct=ht.child;if(ct!==null)ct.return=ht,V=ct;else for(;V!==null;){ht=V;var ut=ht.sibling,ft=ht.return;if(Sj(ht),ht===dt){V=null;break}if(ut!==null){ut.return=ft,V=ut;break}V=ft}}}var gt=it.alternate;if(gt!==null){var mt=gt.child;if(mt!==null){gt.child=null;do{var vt=mt.sibling;mt.sibling=null,mt=vt}while(mt!==null)}}V=it}}if(it.subtreeFlags&2064&&at!==null)at.return=it,V=at;else e:for(;V!==null;){if(it=V,it.flags&2048)switch(it.tag){case 0:case 11:case 15:Pj(9,it,it.return)}var yt=it.sibling;if(yt!==null){yt.return=it.return,V=yt;break e}V=it.return}}var bt=_e.current;for(V=bt;V!==null;){at=V;var _t=at.child;if(at.subtreeFlags&2064&&_t!==null)_t.return=at,V=_t;else e:for(at=bt;V!==null;){if(ot=V,ot.flags&2048)try{switch(ot.tag){case 0:case 11:case 15:Qj(9,ot)}}catch(St){W(ot,ot.return,St)}if(ot===at){V=null;break e}var xt=ot.sibling;if(xt!==null){xt.return=ot.return,V=xt;break e}V=ot.return}}if(K=nt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_e)}catch{}tt=!0}return tt}finally{C=et,ok.transition=_}}return!1}function Xk(_e,_,et){_=Ji(et,_),_=Ni(_e,_,1),_e=nh(_e,_,1),_=R(),_e!==null&&(Ac(_e,1,_),Dk(_e,_))}function W(_e,_,et){if(_e.tag===3)Xk(_e,_e,et);else for(;_!==null;){if(_.tag===3){Xk(_,_e,et);break}else if(_.tag===1){var tt=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Ri===null||!Ri.has(tt))){_e=Ji(et,_e),_e=Qi(_,_e,1),_=nh(_,_e,1),_e=R(),_!==null&&(Ac(_,1,_e),Dk(_,_e));break}}_=_.return}}function Ti(_e,_,et){var tt=_e.pingCache;tt!==null&&tt.delete(_),_=R(),_e.pingedLanes|=_e.suspendedLanes&et,Q===_e&&(Z&et)===et&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(_e,0):rk|=et),Dk(_e,_)}function Yk(_e,_){_===0&&(_e.mode&1?(_=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_=1);var et=R();_e=ih(_e,_),_e!==null&&(Ac(_e,_,et),Dk(_e,et))}function uj(_e){var _=_e.memoizedState,et=0;_!==null&&(et=_.retryLane),Yk(_e,et)}function bk(_e,_){var et=0;switch(_e.tag){case 13:var tt=_e.stateNode,nt=_e.memoizedState;nt!==null&&(et=nt.retryLane);break;case 19:tt=_e.stateNode;break;default:throw Error(p$2(314))}tt!==null&&tt.delete(_),Yk(_e,et)}var Vk;Vk=function(_e,_,et){if(_e!==null)if(_e.memoizedProps!==_.pendingProps||Wf.current)dh=!0;else{if(!(_e.lanes&et)&&!(_.flags&128))return dh=!1,yj(_e,_,et);dh=!!(_e.flags&131072)}else dh=!1,I&&_.flags&1048576&&ug(_,ng,_.index);switch(_.lanes=0,_.tag){case 2:var tt=_.type;ij(_e,_),_e=_.pendingProps;var nt=Yf(_,H$1.current);ch(_,et),nt=Nh(null,_,tt,_e,nt,et);var it=Sh();return _.flags|=1,typeof nt=="object"&&nt!==null&&typeof nt.render=="function"&&nt.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Zf(tt)?(it=!0,cg(_)):it=!1,_.memoizedState=nt.state!==null&&nt.state!==void 0?nt.state:null,kh(_),nt.updater=Ei,_.stateNode=nt,nt._reactInternals=_,Ii(_,tt,_e,et),_=jj(null,_,tt,!0,it,et)):(_.tag=0,I&&it&&vg(_),Xi(null,_,nt,et),_=_.child),_;case 16:tt=_.elementType;e:{switch(ij(_e,_),_e=_.pendingProps,nt=tt._init,tt=nt(tt._payload),_.type=tt,nt=_.tag=Zk(tt),_e=Ci(tt,_e),nt){case 0:_=cj(null,_,tt,_e,et);break e;case 1:_=hj(null,_,tt,_e,et);break e;case 11:_=Yi(null,_,tt,_e,et);break e;case 14:_=$i(null,_,tt,Ci(tt.type,_e),et);break e}throw Error(p$2(306,tt,""))}return _;case 0:return tt=_.type,nt=_.pendingProps,nt=_.elementType===tt?nt:Ci(tt,nt),cj(_e,_,tt,nt,et);case 1:return tt=_.type,nt=_.pendingProps,nt=_.elementType===tt?nt:Ci(tt,nt),hj(_e,_,tt,nt,et);case 3:e:{if(kj(_),_e===null)throw Error(p$2(387));tt=_.pendingProps,it=_.memoizedState,nt=it.element,lh(_e,_),qh(_,tt,null,et);var at=_.memoizedState;if(tt=at.element,it.isDehydrated)if(it={element:tt,isDehydrated:!1,cache:at.cache,pendingSuspenseBoundaries:at.pendingSuspenseBoundaries,transitions:at.transitions},_.updateQueue.baseState=it,_.memoizedState=it,_.flags&256){nt=Ji(Error(p$2(423)),_),_=lj(_e,_,tt,et,nt);break e}else if(tt!==nt){nt=Ji(Error(p$2(424)),_),_=lj(_e,_,tt,et,nt);break e}else for(yg=Lf(_.stateNode.containerInfo.firstChild),xg=_,I=!0,zg=null,et=Vg(_,null,tt,et),_.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),tt===nt){_=Zi(_e,_,et);break e}Xi(_e,_,tt,et)}_=_.child}return _;case 5:return Ah(_),_e===null&&Eg(_),tt=_.type,nt=_.pendingProps,it=_e!==null?_e.memoizedProps:null,at=nt.children,Ef(tt,nt)?at=null:it!==null&&Ef(tt,it)&&(_.flags|=32),gj(_e,_),Xi(_e,_,at,et),_.child;case 6:return _e===null&&Eg(_),null;case 13:return oj(_e,_,et);case 4:return yh(_,_.stateNode.containerInfo),tt=_.pendingProps,_e===null?_.child=Ug(_,null,tt,et):Xi(_e,_,tt,et),_.child;case 11:return tt=_.type,nt=_.pendingProps,nt=_.elementType===tt?nt:Ci(tt,nt),Yi(_e,_,tt,nt,et);case 7:return Xi(_e,_,_.pendingProps,et),_.child;case 8:return Xi(_e,_,_.pendingProps.children,et),_.child;case 12:return Xi(_e,_,_.pendingProps.children,et),_.child;case 10:e:{if(tt=_.type._context,nt=_.pendingProps,it=_.memoizedProps,at=nt.value,G(Wg,tt._currentValue),tt._currentValue=at,it!==null)if(He(it.value,at)){if(it.children===nt.children&&!Wf.current){_=Zi(_e,_,et);break e}}else for(it=_.child,it!==null&&(it.return=_);it!==null;){var ot=it.dependencies;if(ot!==null){at=it.child;for(var st=ot.firstContext;st!==null;){if(st.context===tt){if(it.tag===1){st=mh(-1,et&-et),st.tag=2;var dt=it.updateQueue;if(dt!==null){dt=dt.shared;var ht=dt.pending;ht===null?st.next=st:(st.next=ht.next,ht.next=st),dt.pending=st}}it.lanes|=et,st=it.alternate,st!==null&&(st.lanes|=et),bh(it.return,et,_),ot.lanes|=et;break}st=st.next}}else if(it.tag===10)at=it.type===_.type?null:it.child;else if(it.tag===18){if(at=it.return,at===null)throw Error(p$2(341));at.lanes|=et,ot=at.alternate,ot!==null&&(ot.lanes|=et),bh(at,et,_),at=it.sibling}else at=it.child;if(at!==null)at.return=it;else for(at=it;at!==null;){if(at===_){at=null;break}if(it=at.sibling,it!==null){it.return=at.return,at=it;break}at=at.return}it=at}Xi(_e,_,nt.children,et),_=_.child}return _;case 9:return nt=_.type,tt=_.pendingProps.children,ch(_,et),nt=eh(nt),tt=tt(nt),_.flags|=1,Xi(_e,_,tt,et),_.child;case 14:return tt=_.type,nt=Ci(tt,_.pendingProps),nt=Ci(tt.type,nt),$i(_e,_,tt,nt,et);case 15:return bj(_e,_,_.type,_.pendingProps,et);case 17:return tt=_.type,nt=_.pendingProps,nt=_.elementType===tt?nt:Ci(tt,nt),ij(_e,_),_.tag=1,Zf(tt)?(_e=!0,cg(_)):_e=!1,ch(_,et),Gi(_,tt,nt),Ii(_,tt,nt,et),jj(null,_,tt,!0,_e,et);case 19:return xj(_e,_,et);case 22:return dj(_e,_,et)}throw Error(p$2(156,_.tag))};function Fk(_e,_){return ac(_e,_)}function $k(_e,_,et,tt){this.tag=_e,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,_,et,tt){return new $k(_e,_,et,tt)}function aj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Zk(_e){if(typeof _e=="function")return aj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function Pg(_e,_){var et=_e.alternate;return et===null?(et=Bg(_e.tag,_,_e.key,_e.mode),et.elementType=_e.elementType,et.type=_e.type,et.stateNode=_e.stateNode,et.alternate=_e,_e.alternate=et):(et.pendingProps=_,et.type=_e.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=_e.flags&14680064,et.childLanes=_e.childLanes,et.lanes=_e.lanes,et.child=_e.child,et.memoizedProps=_e.memoizedProps,et.memoizedState=_e.memoizedState,et.updateQueue=_e.updateQueue,_=_e.dependencies,et.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},et.sibling=_e.sibling,et.index=_e.index,et.ref=_e.ref,et}function Rg(_e,_,et,tt,nt,it){var at=2;if(tt=_e,typeof _e=="function")aj(_e)&&(at=1);else if(typeof _e=="string")at=5;else e:switch(_e){case ya:return Tg(et.children,nt,it,_);case za:at=8,nt|=8;break;case Aa:return _e=Bg(12,et,_,nt|2),_e.elementType=Aa,_e.lanes=it,_e;case Ea:return _e=Bg(13,et,_,nt),_e.elementType=Ea,_e.lanes=it,_e;case Fa:return _e=Bg(19,et,_,nt),_e.elementType=Fa,_e.lanes=it,_e;case Ia:return pj(et,nt,it,_);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:at=10;break e;case Ca:at=9;break e;case Da:at=11;break e;case Ga:at=14;break e;case Ha:at=16,tt=null;break e}throw Error(p$2(130,_e==null?_e:typeof _e,""))}return _=Bg(at,et,_,nt),_.elementType=_e,_.type=tt,_.lanes=it,_}function Tg(_e,_,et,tt){return _e=Bg(7,_e,tt,_),_e.lanes=et,_e}function pj(_e,_,et,tt){return _e=Bg(22,_e,tt,_),_e.elementType=Ia,_e.lanes=et,_e.stateNode={isHidden:!1},_e}function Qg(_e,_,et){return _e=Bg(6,_e,null,_),_e.lanes=et,_e}function Sg(_e,_,et){return _=Bg(4,_e.children!==null?_e.children:[],_e.key,_),_.lanes=et,_.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},_}function al(_e,_,et,tt,nt){this.tag=_,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=nt,this.mutableSourceEagerHydrationData=null}function bl(_e,_,et,tt,nt,it,at,ot,st){return _e=new al(_e,_,et,ot,st),_===1?(_=1,it===!0&&(_|=8)):_=0,it=Bg(3,null,null,_),_e.current=it,it.stateNode=_e,it.memoizedState={element:tt,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(it),_e}function cl(_e,_,et){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:_e,containerInfo:_,implementation:et}}function dl(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$2(170));var _=_e;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Zf(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(p$2(171))}if(_e.tag===1){var et=_e.type;if(Zf(et))return bg(_e,et,_)}return _}function el(_e,_,et,tt,nt,it,at,ot,st){return _e=bl(et,tt,!0,_e,nt,it,at,ot,st),_e.context=dl(null),et=_e.current,tt=R(),nt=yi(et),it=mh(tt,nt),it.callback=_??null,nh(et,it,nt),_e.current.lanes=nt,Ac(_e,nt,tt),Dk(_e,tt),_e}function fl(_e,_,et,tt){var nt=_.current,it=R(),at=yi(nt);return et=dl(et),_.context===null?_.context=et:_.pendingContext=et,_=mh(it,at),_.payload={element:_e},tt=tt===void 0?null:tt,tt!==null&&(_.callback=tt),_e=nh(nt,_,at),_e!==null&&(gi(_e,nt,at,it),oh(_e,nt,at)),at}function gl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function hl(_e,_){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var et=_e.retryLane;_e.retryLane=et!==0&&et<_?et:_}}function il(_e,_){hl(_e,_),(_e=_e.alternate)&&hl(_e,_)}var kl=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ll(_e){this._internalRoot=_e}ml.prototype.render=ll.prototype.render=function(_e){var _=this._internalRoot;if(_===null)throw Error(p$2(409));fl(_e,_,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var _=_e.containerInfo;Rk(function(){fl(null,_e,null,null)}),_[uf]=null}};function ml(_e){this._internalRoot=_e}ml.prototype.unstable_scheduleHydration=function(_e){if(_e){var _=Hc();_e={blockedOn:null,target:_e,priority:_};for(var et=0;et<Qc.length&&_!==0&&_<Qc[et].priority;et++);Qc.splice(et,0,_e),et===0&&Vc(_e)}};function nl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_e,_,et,tt,nt){if(nt){if(typeof tt=="function"){var it=tt;tt=function(){var dt=gl(at);it.call(dt)}}var at=el(_,tt,_e,0,null,!1,!1,"",pl);return _e._reactRootContainer=at,_e[uf]=at.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(),at}for(;nt=_e.lastChild;)_e.removeChild(nt);if(typeof tt=="function"){var ot=tt;tt=function(){var dt=gl(st);ot.call(dt)}}var st=bl(_e,0,!1,null,null,!1,!1,"",pl);return _e._reactRootContainer=st,_e[uf]=st.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(function(){fl(_,st,et,tt)}),st}function rl(_e,_,et,tt,nt){var it=et._reactRootContainer;if(it){var at=it;if(typeof nt=="function"){var ot=nt;nt=function(){var st=gl(at);ot.call(st)}}fl(_,at,_e,nt)}else at=ql(et,_,_e,nt,tt);return gl(at)}Ec=function(_e){switch(_e.tag){case 3:var _=_e.stateNode;if(_.current.memoizedState.isDehydrated){var et=tc(_.pendingLanes);et!==0&&(Cc(_,et|1),Dk(_,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var tt=ih(_e,1);if(tt!==null){var nt=R();gi(tt,_e,1,nt)}}),il(_e,1)}};Fc=function(_e){if(_e.tag===13){var _=ih(_e,134217728);if(_!==null){var et=R();gi(_,_e,134217728,et)}il(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var _=yi(_e),et=ih(_e,_);if(et!==null){var tt=R();gi(et,_e,_,tt)}il(_e,_)}};Hc=function(){return C};Ic=function(_e,_){var et=C;try{return C=_e,_()}finally{C=et}};yb=function(_e,_,et){switch(_){case"input":if(bb(_e,et),_=et.name,et.type==="radio"&&_!=null){for(et=_e;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<et.length;_++){var tt=et[_];if(tt!==_e&&tt.form===_e.form){var nt=Db(tt);if(!nt)throw Error(p$2(90));Wa(tt),bb(tt,nt)}}}break;case"textarea":ib(_e,et);break;case"select":_=et.value,_!=null&&fb(_e,!!et.multiple,_,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_e,_){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(_))throw Error(p$2(200));return cl(_e,_,null,et)};reactDom_production_min.createRoot=function(_e,_){if(!nl(_e))throw Error(p$2(299));var et=!1,tt="",nt=kl;return _!=null&&(_.unstable_strictMode===!0&&(et=!0),_.identifierPrefix!==void 0&&(tt=_.identifierPrefix),_.onRecoverableError!==void 0&&(nt=_.onRecoverableError)),_=bl(_e,1,!1,null,null,et,!1,tt,nt),_e[uf]=_.current,sf(_e.nodeType===8?_e.parentNode:_e),new ll(_)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var _=_e._reactInternals;if(_===void 0)throw typeof _e.render=="function"?Error(p$2(188)):(_e=Object.keys(_e).join(","),Error(p$2(268,_e)));return _e=Zb(_),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Rk(_e)};reactDom_production_min.hydrate=function(_e,_,et){if(!ol(_))throw Error(p$2(200));return rl(null,_e,_,!0,et)};reactDom_production_min.hydrateRoot=function(_e,_,et){if(!nl(_e))throw Error(p$2(405));var tt=et!=null&&et.hydratedSources||null,nt=!1,it="",at=kl;if(et!=null&&(et.unstable_strictMode===!0&&(nt=!0),et.identifierPrefix!==void 0&&(it=et.identifierPrefix),et.onRecoverableError!==void 0&&(at=et.onRecoverableError)),_=el(_,null,_e,1,et??null,nt,!1,it,at),_e[uf]=_.current,sf(_e),tt)for(_e=0;_e<tt.length;_e++)et=tt[_e],nt=et._getVersion,nt=nt(et._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[et,nt]:_.mutableSourceEagerHydrationData.push(et,nt);return new ml(_)};reactDom_production_min.render=function(_e,_,et){if(!ol(_))throw Error(p$2(200));return rl(null,_e,_,!1,et)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!ol(_e))throw Error(p$2(40));return _e._reactRootContainer?(Rk(function(){rl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,_,et,tt){if(!ol(et))throw Error(p$2(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$2(38));return rl(_e,_,et,!1,tt)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_e){console.error(_e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot$1,m$3=reactDomExports;createRoot$1=m$3.createRoot,m$3.hydrateRoot;const cx$1=(..._e)=>_e.filter(Boolean).map(_=>_.trim()).join(" ");function getErrorMessage$2(_e,_){return`${_e} returned \`undefined\`. Seems you forgot to wrap component within ${_}`}function createContext$2(_e={}){const{name:_,strict:et=!0,hookName:tt="useContext",providerName:nt="Provider",errorMessage:it,defaultValue:at}=_e,ot=reactExports.createContext(at);ot.displayName=_;function st(){var ht;const dt=reactExports.useContext(ot);if(!dt&&et){const ct=new Error(it??getErrorMessage$2(tt,nt));throw ct.name="ContextError",(ht=Error.captureStackTrace)==null||ht.call(Error,ct,st),ct}return dt}return[ot.Provider,st,ot]}function callAll$1(..._e){return function(...et){_e.forEach(tt=>tt==null?void 0:tt(...et))}}const clsx$1=(..._e)=>_e.map(_=>{var et;return(et=_==null?void 0:_.trim)==null?void 0:et.call(_)}).filter(Boolean).join(" "),eventRegex=/^on[A-Z]/;function mergeProps$1(..._e){let _={};for(let et of _e){for(let tt in _){if(eventRegex.test(tt)&&typeof _[tt]=="function"&&typeof et[tt]=="function"){_[tt]=callAll$1(_[tt],et[tt]);continue}if(tt==="className"||tt==="class"){_[tt]=clsx$1(_[tt],et[tt]);continue}if(tt==="style"){_[tt]=Object.assign({},_[tt]??{},et[tt]??{});continue}_[tt]=et[tt]!==void 0?et[tt]:_[tt]}for(let tt in et)_[tt]===void 0&&(_[tt]=et[tt])}return _}const EMPTY_STYLES=Object.freeze({}),EMPTY_SLOT_STYLES=Object.freeze({});function memoize$2(_e){var _=Object.create(null);return function(et){return _[et]===void 0&&(_[et]=_e(et)),_[et]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid$1=memoize$2(function(_e){return reactPropsRegex.test(_e)||_e.charCodeAt(0)===111&&_e.charCodeAt(1)===110&&_e.charCodeAt(2)<91});function sheetForTag(_e){if(_e.sheet)return _e.sheet;for(var _=0;_<document.styleSheets.length;_++)if(document.styleSheets[_].ownerNode===_e)return document.styleSheets[_]}function createStyleElement(_e){var _=document.createElement("style");return _.setAttribute("data-emotion",_e.key),_e.nonce!==void 0&&_.setAttribute("nonce",_e.nonce),_.appendChild(document.createTextNode("")),_.setAttribute("data-s",""),_}var StyleSheet=function(){function _e(et){var tt=this;this._insertTag=function(nt){var it;tt.tags.length===0?tt.insertionPoint?it=tt.insertionPoint.nextSibling:tt.prepend?it=tt.container.firstChild:it=tt.before:it=tt.tags[tt.tags.length-1].nextSibling,tt.container.insertBefore(nt,it),tt.tags.push(nt)},this.isSpeedy=et.speedy===void 0?!0:et.speedy,this.tags=[],this.ctr=0,this.nonce=et.nonce,this.key=et.key,this.container=et.container,this.prepend=et.prepend,this.insertionPoint=et.insertionPoint,this.before=null}var _=_e.prototype;return _.hydrate=function(tt){tt.forEach(this._insertTag)},_.insert=function(tt){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var nt=this.tags[this.tags.length-1];if(this.isSpeedy){var it=sheetForTag(nt);try{it.insertRule(tt,it.cssRules.length)}catch{}}else nt.appendChild(document.createTextNode(tt));this.ctr++},_.flush=function(){this.tags.forEach(function(tt){var nt;return(nt=tt.parentNode)==null?void 0:nt.removeChild(tt)}),this.tags=[],this.ctr=0},_e}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs$4=Math.abs,from=String.fromCharCode,assign$1=Object.assign;function hash(_e,_){return charat(_e,0)^45?(((_<<2^charat(_e,0))<<2^charat(_e,1))<<2^charat(_e,2))<<2^charat(_e,3):0}function trim$2(_e){return _e.trim()}function match$3(_e,_){return(_e=_.exec(_e))?_e[0]:_e}function replace$1(_e,_,et){return _e.replace(_,et)}function indexof(_e,_){return _e.indexOf(_)}function charat(_e,_){return _e.charCodeAt(_)|0}function substr(_e,_,et){return _e.slice(_,et)}function strlen(_e){return _e.length}function sizeof(_e){return _e.length}function append(_e,_){return _.push(_e),_e}function combine$1(_e,_){return _e.map(_).join("")}var line=1,column=1,length$1=0,position$2=0,character=0,characters="";function node(_e,_,et,tt,nt,it,at){return{value:_e,root:_,parent:et,type:tt,props:nt,children:it,line,column,length:at,return:""}}function copy$2(_e,_){return assign$1(node("",null,null,"",null,null,0),_e,{length:-_e.length},_)}function char(){return character}function prev(){return character=position$2>0?charat(characters,--position$2):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$2<length$1?charat(characters,position$2++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$2)}function caret(){return position$2}function slice$1(_e,_){return substr(characters,_e,_)}function token(_e){switch(_e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(_e){return line=column=1,length$1=strlen(characters=_e),position$2=0,[]}function dealloc(_e){return characters="",_e}function delimit(_e){return trim$2(slice$1(position$2-1,delimiter(_e===91?_e+2:_e===40?_e+1:_e)))}function whitespace(_e){for(;(character=peek())&&character<33;)next();return token(_e)>2||token(character)>3?"":" "}function escaping(_e,_){for(;--_&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(_e,caret()+(_<6&&peek()==32&&next()==32))}function delimiter(_e){for(;next();)switch(character){case _e:return position$2;case 34:case 39:_e!==34&&_e!==39&&delimiter(character);break;case 40:_e===41&&delimiter(_e);break;case 92:next();break}return position$2}function commenter(_e,_){for(;next()&&_e+character!==57;)if(_e+character===84&&peek()===47)break;return"/*"+slice$1(_,position$2-1)+"*"+from(_e===47?_e:next())}function identifier(_e){for(;!token(peek());)next();return slice$1(_e,position$2)}function compile(_e){return dealloc(parse$5("",null,null,null,[""],_e=alloc(_e),0,[0],_e))}function parse$5(_e,_,et,tt,nt,it,at,ot,st){for(var dt=0,ht=0,ct=at,ut=0,ft=0,gt=0,mt=1,vt=1,yt=1,bt=0,_t="",xt=nt,St=it,Tt=tt,wt=_t;vt;)switch(gt=bt,bt=next()){case 40:if(gt!=108&&charat(wt,ct-1)==58){indexof(wt+=replace$1(delimit(bt),"&","&\f"),"&\f")!=-1&&(yt=-1);break}case 34:case 39:case 91:wt+=delimit(bt);break;case 9:case 10:case 13:case 32:wt+=whitespace(gt);break;case 92:wt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),_,et),st);break;default:wt+="/"}break;case 123*mt:ot[dt++]=strlen(wt)*yt;case 125*mt:case 59:case 0:switch(bt){case 0:case 125:vt=0;case 59+ht:yt==-1&&(wt=replace$1(wt,/\f/g,"")),ft>0&&strlen(wt)-ct&&append(ft>32?declaration(wt+";",tt,et,ct-1):declaration(replace$1(wt," ","")+";",tt,et,ct-2),st);break;case 59:wt+=";";default:if(append(Tt=ruleset(wt,_,et,dt,ht,nt,ot,_t,xt=[],St=[],ct),it),bt===123)if(ht===0)parse$5(wt,_,Tt,Tt,xt,it,ct,ot,St);else switch(ut===99&&charat(wt,3)===110?100:ut){case 100:case 108:case 109:case 115:parse$5(_e,Tt,Tt,tt&&append(ruleset(_e,Tt,Tt,0,0,nt,ot,_t,nt,xt=[],ct),St),nt,St,ct,ot,tt?xt:St);break;default:parse$5(wt,Tt,Tt,Tt,[""],St,0,ot,St)}}dt=ht=ft=0,mt=yt=1,_t=wt="",ct=at;break;case 58:ct=1+strlen(wt),ft=gt;default:if(mt<1){if(bt==123)--mt;else if(bt==125&&mt++==0&&prev()==125)continue}switch(wt+=from(bt),bt*mt){case 38:yt=ht>0?1:(wt+="\f",-1);break;case 44:ot[dt++]=(strlen(wt)-1)*yt,yt=1;break;case 64:peek()===45&&(wt+=delimit(next())),ut=peek(),ht=ct=strlen(_t=wt+=identifier(caret())),bt++;break;case 45:gt===45&&strlen(wt)==2&&(mt=0)}}return it}function ruleset(_e,_,et,tt,nt,it,at,ot,st,dt,ht){for(var ct=nt-1,ut=nt===0?it:[""],ft=sizeof(ut),gt=0,mt=0,vt=0;gt<tt;++gt)for(var yt=0,bt=substr(_e,ct+1,ct=abs$4(mt=at[gt])),_t=_e;yt<ft;++yt)(_t=trim$2(mt>0?ut[yt]+" "+bt:replace$1(bt,/&\f/g,ut[yt])))&&(st[vt++]=_t);return node(_e,_,et,nt===0?RULESET:ot,st,dt,ht)}function comment(_e,_,et){return node(_e,_,et,COMMENT,from(char()),substr(_e,2,-2),0)}function declaration(_e,_,et,tt){return node(_e,_,et,DECLARATION,substr(_e,0,tt),substr(_e,tt+1,-1),tt)}function serialize$1(_e,_){for(var et="",tt=sizeof(_e),nt=0;nt<tt;nt++)et+=_(_e[nt],nt,_e,_)||"";return et}function stringify$3(_e,_,et,tt){switch(_e.type){case LAYER:if(_e.children.length)break;case IMPORT:case DECLARATION:return _e.return=_e.return||_e.value;case COMMENT:return"";case KEYFRAMES:return _e.return=_e.value+"{"+serialize$1(_e.children,tt)+"}";case RULESET:_e.value=_e.props.join(",")}return strlen(et=serialize$1(_e.children,tt))?_e.return=_e.value+"{"+et+"}":""}function middleware(_e){var _=sizeof(_e);return function(et,tt,nt,it){for(var at="",ot=0;ot<_;ot++)at+=_e[ot](et,tt,nt,it)||"";return at}}function rulesheet(_e){return function(_){_.root||(_=_.return)&&_e(_)}}var identifierWithPointTracking=function(_,et,tt){for(var nt=0,it=0;nt=it,it=peek(),nt===38&&it===12&&(et[tt]=1),!token(it);)next();return slice$1(_,position$2)},toRules=function(_,et){var tt=-1,nt=44;do switch(token(nt)){case 0:nt===38&&peek()===12&&(et[tt]=1),_[tt]+=identifierWithPointTracking(position$2-1,et,tt);break;case 2:_[tt]+=delimit(nt);break;case 4:if(nt===44){_[++tt]=peek()===58?"&\f":"",et[tt]=_[tt].length;break}default:_[tt]+=from(nt)}while(nt=next());return _},getRules=function(_,et){return dealloc(toRules(alloc(_),et))},fixedElements=new WeakMap,compat=function(_){if(!(_.type!=="rule"||!_.parent||_.length<1)){for(var et=_.value,tt=_.parent,nt=_.column===tt.column&&_.line===tt.line;tt.type!=="rule";)if(tt=tt.parent,!tt)return;if(!(_.props.length===1&&et.charCodeAt(0)!==58&&!fixedElements.get(tt))&&!nt){fixedElements.set(_,!0);for(var it=[],at=getRules(et,it),ot=tt.props,st=0,dt=0;st<at.length;st++)for(var ht=0;ht<ot.length;ht++,dt++)_.props[dt]=it[st]?at[st].replace(/&\f/g,ot[ht]):ot[ht]+" "+at[st]}}},removeLabel=function(_){if(_.type==="decl"){var et=_.value;et.charCodeAt(0)===108&&et.charCodeAt(2)===98&&(_.return="",_.value="")}};function prefix$1(_e,_){switch(hash(_e,_)){case 5103:return WEBKIT+"print-"+_e+_e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+_e+_e;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+_e+MOZ+_e+MS+_e+_e;case 6828:case 4268:return WEBKIT+_e+MS+_e+_e;case 6165:return WEBKIT+_e+MS+"flex-"+_e+_e;case 5187:return WEBKIT+_e+replace$1(_e,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+_e;case 5443:return WEBKIT+_e+MS+"flex-item-"+replace$1(_e,/flex-|-self/,"")+_e;case 4675:return WEBKIT+_e+MS+"flex-line-pack"+replace$1(_e,/align-content|flex-|-self/,"")+_e;case 5548:return WEBKIT+_e+MS+replace$1(_e,"shrink","negative")+_e;case 5292:return WEBKIT+_e+MS+replace$1(_e,"basis","preferred-size")+_e;case 6060:return WEBKIT+"box-"+replace$1(_e,"-grow","")+WEBKIT+_e+MS+replace$1(_e,"grow","positive")+_e;case 4554:return WEBKIT+replace$1(_e,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+_e;case 6187:return replace$1(replace$1(replace$1(_e,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),_e,"")+_e;case 5495:case 3959:return replace$1(_e,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace$1(replace$1(_e,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+_e+_e;case 4095:case 3583:case 4068:case 2532:return replace$1(_e,/(.+)-inline(.+)/,WEBKIT+"$1$2")+_e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(_e)-1-_>6)switch(charat(_e,_+1)){case 109:if(charat(_e,_+4)!==45)break;case 102:return replace$1(_e,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(_e,_+3)==108?"$3":"$2-$3"))+_e;case 115:return~indexof(_e,"stretch")?prefix$1(replace$1(_e,"stretch","fill-available"),_)+_e:_e}break;case 4949:if(charat(_e,_+1)!==115)break;case 6444:switch(charat(_e,strlen(_e)-3-(~indexof(_e,"!important")&&10))){case 107:return replace$1(_e,":",":"+WEBKIT)+_e;case 101:return replace$1(_e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(_e,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+_e}break;case 5936:switch(charat(_e,_+11)){case 114:return WEBKIT+_e+MS+replace$1(_e,/[svh]\w+-[tblr]{2}/,"tb")+_e;case 108:return WEBKIT+_e+MS+replace$1(_e,/[svh]\w+-[tblr]{2}/,"tb-rl")+_e;case 45:return WEBKIT+_e+MS+replace$1(_e,/[svh]\w+-[tblr]{2}/,"lr")+_e}return WEBKIT+_e+MS+_e+_e}return _e}var prefixer=function(_,et,tt,nt){if(_.length>-1&&!_.return)switch(_.type){case DECLARATION:_.return=prefix$1(_.value,_.length);break;case KEYFRAMES:return serialize$1([copy$2(_,{value:replace$1(_.value,"@","@"+WEBKIT)})],nt);case RULESET:if(_.length)return combine$1(_.props,function(it){switch(match$3(it,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize$1([copy$2(_,{props:[replace$1(it,/:(read-\w+)/,":"+MOZ+"$1")]})],nt);case"::placeholder":return serialize$1([copy$2(_,{props:[replace$1(it,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy$2(_,{props:[replace$1(it,/:(plac\w+)/,":"+MOZ+"$1")]}),copy$2(_,{props:[replace$1(it,/:(plac\w+)/,MS+"input-$1")]})],nt)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(_){var et=_.key;if(et==="css"){var tt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(tt,function(mt){var vt=mt.getAttribute("data-emotion");vt.indexOf(" ")!==-1&&(document.head.appendChild(mt),mt.setAttribute("data-s",""))})}var nt=_.stylisPlugins||defaultStylisPlugins,it={},at,ot=[];at=_.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+et+' "]'),function(mt){for(var vt=mt.getAttribute("data-emotion").split(" "),yt=1;yt<vt.length;yt++)it[vt[yt]]=!0;ot.push(mt)});var st,dt=[compat,removeLabel];{var ht,ct=[stringify$3,rulesheet(function(mt){ht.insert(mt)})],ut=middleware(dt.concat(nt,ct)),ft=function(vt){return serialize$1(compile(vt),ut)};st=function(vt,yt,bt,_t){ht=bt,ft(vt?vt+"{"+yt.styles+"}":yt.styles),_t&&(gt.inserted[yt.name]=!0)}}var gt={key:et,sheet:new StyleSheet({key:et,container:at,nonce:_.nonce,speedy:_.speedy,prepend:_.prepend,insertionPoint:_.insertionPoint}),nonce:_.nonce,inserted:it,registered:{},insert:st};return gt.sheet.hydrate(ot),gt};function _extends$x(){return _extends$x=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)({}).hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$x.apply(null,arguments)}var reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$1=b$1?Symbol.for("react.portal"):60106,e$2=b$1?Symbol.for("react.fragment"):60107,f$1=b$1?Symbol.for("react.strict_mode"):60108,g$1=b$1?Symbol.for("react.profiler"):60114,h$1=b$1?Symbol.for("react.provider"):60109,k$2=b$1?Symbol.for("react.context"):60110,l$1=b$1?Symbol.for("react.async_mode"):60111,m$2=b$1?Symbol.for("react.concurrent_mode"):60111,n$1=b$1?Symbol.for("react.forward_ref"):60112,p$1=b$1?Symbol.for("react.suspense"):60113,q=b$1?Symbol.for("react.suspense_list"):60120,r$1=b$1?Symbol.for("react.memo"):60115,t$2=b$1?Symbol.for("react.lazy"):60116,v$1=b$1?Symbol.for("react.block"):60121,w$2=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y$1=b$1?Symbol.for("react.scope"):60119;function z(_e){if(typeof _e=="object"&&_e!==null){var _=_e.$$typeof;switch(_){case c$1:switch(_e=_e.type,_e){case l$1:case m$2:case e$2:case g$1:case f$1:case p$1:return _e;default:switch(_e=_e&&_e.$$typeof,_e){case k$2:case n$1:case t$2:case r$1:case h$1:return _e;default:return _}}case d$1:return _}}}function A(_e){return z(_e)===m$2}reactIs_production_min.AsyncMode=l$1;reactIs_production_min.ConcurrentMode=m$2;reactIs_production_min.ContextConsumer=k$2;reactIs_production_min.ContextProvider=h$1;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n$1;reactIs_production_min.Fragment=e$2;reactIs_production_min.Lazy=t$2;reactIs_production_min.Memo=r$1;reactIs_production_min.Portal=d$1;reactIs_production_min.Profiler=g$1;reactIs_production_min.StrictMode=f$1;reactIs_production_min.Suspense=p$1;reactIs_production_min.isAsyncMode=function(_e){return A(_e)||z(_e)===l$1};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(_e){return z(_e)===k$2};reactIs_production_min.isContextProvider=function(_e){return z(_e)===h$1};reactIs_production_min.isElement=function(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===c$1};reactIs_production_min.isForwardRef=function(_e){return z(_e)===n$1};reactIs_production_min.isFragment=function(_e){return z(_e)===e$2};reactIs_production_min.isLazy=function(_e){return z(_e)===t$2};reactIs_production_min.isMemo=function(_e){return z(_e)===r$1};reactIs_production_min.isPortal=function(_e){return z(_e)===d$1};reactIs_production_min.isProfiler=function(_e){return z(_e)===g$1};reactIs_production_min.isStrictMode=function(_e){return z(_e)===f$1};reactIs_production_min.isSuspense=function(_e){return z(_e)===p$1};reactIs_production_min.isValidElementType=function(_e){return typeof _e=="string"||typeof _e=="function"||_e===e$2||_e===m$2||_e===g$1||_e===f$1||_e===p$1||_e===q||typeof _e=="object"&&_e!==null&&(_e.$$typeof===t$2||_e.$$typeof===r$1||_e.$$typeof===h$1||_e.$$typeof===k$2||_e.$$typeof===n$1||_e.$$typeof===w$2||_e.$$typeof===x$1||_e.$$typeof===y$1||_e.$$typeof===v$1)};reactIs_production_min.typeOf=z;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser$1=!0;function getRegisteredStyles(_e,_,et){var tt="";return et.split(" ").forEach(function(nt){_e[nt]!==void 0?_.push(_e[nt]+";"):nt&&(tt+=nt+" ")}),tt}var registerStyles=function(_,et,tt){var nt=_.key+"-"+et.name;(tt===!1||isBrowser$1===!1)&&_.registered[nt]===void 0&&(_.registered[nt]=et.styles)},insertStyles=function(_,et,tt){registerStyles(_,et,tt);var nt=_.key+"-"+et.name;if(_.inserted[et.name]===void 0){var it=et;do _.insert(et===it?"."+nt:"",it,_.sheet,!0),it=it.next;while(it!==void 0)}};function murmur2(_e){for(var _=0,et,tt=0,nt=_e.length;nt>=4;++tt,nt-=4)et=_e.charCodeAt(tt)&255|(_e.charCodeAt(++tt)&255)<<8|(_e.charCodeAt(++tt)&255)<<16|(_e.charCodeAt(++tt)&255)<<24,et=(et&65535)*1540483477+((et>>>16)*59797<<16),et^=et>>>24,_=(et&65535)*1540483477+((et>>>16)*59797<<16)^(_&65535)*1540483477+((_>>>16)*59797<<16);switch(nt){case 3:_^=(_e.charCodeAt(tt+2)&255)<<16;case 2:_^=(_e.charCodeAt(tt+1)&255)<<8;case 1:_^=_e.charCodeAt(tt)&255,_=(_&65535)*1540483477+((_>>>16)*59797<<16)}return _^=_>>>13,_=(_&65535)*1540483477+((_>>>16)*59797<<16),((_^_>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(_){return _.charCodeAt(1)===45},isProcessableValue=function(_){return _!=null&&typeof _!="boolean"},processStyleName=memoize$2(function(_e){return isCustomProperty(_e)?_e:_e.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(_,et){switch(_){case"animation":case"animationName":if(typeof et=="string")return et.replace(animationRegex,function(tt,nt,it){return cursor$1={name:nt,styles:it,next:cursor$1},nt})}return unitlessKeys[_]!==1&&!isCustomProperty(_)&&typeof et=="number"&&et!==0?et+"px":et};function handleInterpolation(_e,_,et){if(et==null)return"";var tt=et;if(tt.__emotion_styles!==void 0)return tt;switch(typeof et){case"boolean":return"";case"object":{var nt=et;if(nt.anim===1)return cursor$1={name:nt.name,styles:nt.styles,next:cursor$1},nt.name;var it=et;if(it.styles!==void 0){var at=it.next;if(at!==void 0)for(;at!==void 0;)cursor$1={name:at.name,styles:at.styles,next:cursor$1},at=at.next;var ot=it.styles+";";return ot}return createStringFromObject(_e,_,et)}case"function":{if(_e!==void 0){var st=cursor$1,dt=et(_e);return cursor$1=st,handleInterpolation(_e,_,dt)}break}}var ht=et;if(_==null)return ht;var ct=_[ht];return ct!==void 0?ct:ht}function createStringFromObject(_e,_,et){var tt="";if(Array.isArray(et))for(var nt=0;nt<et.length;nt++)tt+=handleInterpolation(_e,_,et[nt])+";";else for(var it in et){var at=et[it];if(typeof at!="object"){var ot=at;_!=null&&_[ot]!==void 0?tt+=it+"{"+_[ot]+"}":isProcessableValue(ot)&&(tt+=processStyleName(it)+":"+processStyleValue(it,ot)+";")}else if(Array.isArray(at)&&typeof at[0]=="string"&&(_==null||_[at[0]]===void 0))for(var st=0;st<at.length;st++)isProcessableValue(at[st])&&(tt+=processStyleName(it)+":"+processStyleValue(it,at[st])+";");else{var dt=handleInterpolation(_e,_,at);switch(it){case"animation":case"animationName":{tt+=processStyleName(it)+":"+dt+";";break}default:tt+=it+"{"+dt+"}"}}}return tt}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor$1;function serializeStyles(_e,_,et){if(_e.length===1&&typeof _e[0]=="object"&&_e[0]!==null&&_e[0].styles!==void 0)return _e[0];var tt=!0,nt="";cursor$1=void 0;var it=_e[0];if(it==null||it.raw===void 0)tt=!1,nt+=handleInterpolation(et,_,it);else{var at=it;nt+=at[0]}for(var ot=1;ot<_e.length;ot++)if(nt+=handleInterpolation(et,_,_e[ot]),tt){var st=it;nt+=st[ot]}labelPattern.lastIndex=0;for(var dt="",ht;(ht=labelPattern.exec(nt))!==null;)dt+="-"+ht[1];var ct=murmur2(nt)+dt;return{name:ct,styles:nt,next:cursor$1}}var syncFallback=function(_){return _()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(_){return reactExports.forwardRef(function(et,tt){var nt=reactExports.useContext(EmotionCacheContext);return _(et,nt,tt)})},ThemeContext=reactExports.createContext({}),hasOwn$3={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(_,et){var tt={};for(var nt in et)hasOwn$3.call(et,nt)&&(tt[nt]=et[nt]);return tt[typePropName]=_,tt},Insertion$2=function(_){var et=_.cache,tt=_.serialized,nt=_.isStringTag;return registerStyles(et,tt,nt),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(et,tt,nt)}),null},Emotion=withEmotionCache(function(_e,_,et){var tt=_e.css;typeof tt=="string"&&_.registered[tt]!==void 0&&(tt=_.registered[tt]);var nt=_e[typePropName],it=[tt],at="";typeof _e.className=="string"?at=getRegisteredStyles(_.registered,it,_e.className):_e.className!=null&&(at=_e.className+" ");var ot=serializeStyles(it,void 0,reactExports.useContext(ThemeContext));at+=_.key+"-"+ot.name;var st={};for(var dt in _e)hasOwn$3.call(_e,dt)&&dt!=="css"&&dt!==typePropName&&(st[dt]=_e[dt]);return st.className=at,et&&(st.ref=et),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$2,{cache:_,serialized:ot,isStringTag:typeof nt=="string"}),reactExports.createElement(nt,st))}),Emotion$1=Emotion,jsx=function(_,et){var tt=arguments;if(et==null||!hasOwn$3.call(et,"css"))return reactExports.createElement.apply(void 0,tt);var nt=tt.length,it=new Array(nt);it[0]=Emotion$1,it[1]=createEmotionProps(_,et);for(var at=2;at<nt;at++)it[at]=tt[at];return reactExports.createElement.apply(null,it)};(function(_e){var _;_||(_=_e.JSX||(_e.JSX={}))})(jsx);var Global=withEmotionCache(function(_e,_){var et=_e.styles,tt=serializeStyles([et],void 0,reactExports.useContext(ThemeContext)),nt=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var it=_.key+"-global",at=new _.sheet.constructor({key:it,nonce:_.sheet.nonce,container:_.sheet.container,speedy:_.sheet.isSpeedy}),ot=!1,st=document.querySelector('style[data-emotion="'+it+" "+tt.name+'"]');return _.sheet.tags.length&&(at.before=_.sheet.tags[0]),st!==null&&(ot=!0,st.setAttribute("data-emotion",it),at.hydrate([st])),nt.current=[at,ot],function(){at.flush()}},[_]),useInsertionEffectWithLayoutFallback(function(){var it=nt.current,at=it[0],ot=it[1];if(ot){it[1]=!1;return}if(tt.next!==void 0&&insertStyles(_,tt.next,!0),at.tags.length){var st=at.tags[at.tags.length-1].nextElementSibling;at.before=st,at.flush()}_.insert("",tt,at,!1)},[_,tt.name]),null});function css$3(){for(var _e=arguments.length,_=new Array(_e),et=0;et<_e;et++)_[et]=arguments[et];return serializeStyles(_)}function assignRef(_e,_){if(_e!=null){if(typeof _e=="function"){_e(_);return}try{_e.current=_}catch{throw new Error(`Cannot assign value '${_}' to ref '${_e}'`)}}}function mergeRefs(..._e){return _=>{_e.forEach(et=>{assignRef(et,_)})}}function compact$3(_e){const _=Object.assign({},_e);for(let et in _)_[et]===void 0&&delete _[et];return _}function interopDefault(_e){return _e.default||_e}const isObject$9=_e=>_e!=null&&typeof _e=="object"&&!Array.isArray(_e),isString$4=_e=>typeof _e=="string",isFunction$6=_e=>typeof _e=="function";function getElementRef(_e){var et;const _=reactExports.version;return!isString$4(_)||_.startsWith("18.")?_e==null?void 0:_e.ref:(et=_e==null?void 0:_e.props)==null?void 0:et.ref}const[ChakraContextProvider,useChakraContext]=createContext$2({name:"ChakraContext",strict:!0,providerName:"<ChakraProvider />"});function ChakraProvider(_e){const{value:_,children:et}=_e;return jsxRuntimeExports.jsxs(ChakraContextProvider,{value:_,children:[!_._config.disableLayers&&jsxRuntimeExports.jsx(Global,{styles:_.layers.atRule}),jsxRuntimeExports.jsx(Global,{styles:_._global}),et]})}const splitProps=(_e,_)=>{const et=Object.getOwnPropertyDescriptors(_e),tt=Object.keys(et),nt=at=>{const ot={};for(let st=0;st<at.length;st++){const dt=at[st];et[dt]&&(Object.defineProperty(ot,dt,et[dt]),delete et[dt])}return ot},it=at=>nt(Array.isArray(at)?at:tt.filter(at));return[_].map(it).concat(nt(tt))},htmlProps=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function isHtmlProp(_e){return typeof _e=="string"&&htmlProps.has(_e)}function useResolvedProps(_e,_,et){const{css:tt,isValidProperty:nt}=useChakraContext(),{children:it,...at}=_e,ot=reactExports.useMemo(()=>{const[ut,ft]=splitProps(at,bt=>et(bt,_.variantKeys)),[gt,mt]=splitProps(ft,_.variantKeys),[vt,yt]=splitProps(mt,nt);return{forwardedProps:ut,variantProps:gt,styleProps:vt,elementProps:yt}},[_.variantKeys,et,at,nt]),{css:st,...dt}=ot.styleProps,ht=reactExports.useMemo(()=>{const ut={...ot.variantProps};return _.variantKeys.includes("colorPalette")||(ut.colorPalette=at.colorPalette),_.variantKeys.includes("orientation")||(ut.orientation=at.orientation),_(ut)},[_,ot.variantProps,at.colorPalette,at.orientation]);return{styles:reactExports.useMemo(()=>tt(ht,...toArray$1(st),dt),[tt,ht,st,dt]),props:{...ot.forwardedProps,...ot.elementProps,children:it}}}const toArray$1=_e=>(Array.isArray(_e)?_e:[_e]).filter(Boolean).flat(),isPropValid=interopDefault(isPropValid$1),testOmitPropsOnStringTag$1=isPropValid,testOmitPropsOnComponent$1=_e=>_e!=="theme",composeShouldForwardProps$1=(_e,_,et)=>{let tt;if(_){const nt=_.shouldForwardProp;tt=_e.__emotion_forwardProp&&nt?it=>_e.__emotion_forwardProp(it)&&nt(it):nt}return typeof tt!="function"&&et&&(tt=_e.__emotion_forwardProp),tt};let isBrowser=typeof document<"u";const Insertion$1=({cache:_e,serialized:_,isStringTag:et})=>{registerStyles(_e,_,et);const tt=useInsertionEffectAlwaysWithSyncFallback(()=>insertStyles(_e,_,et));if(!isBrowser&&tt!==void 0){let nt=_.name,it=_.next;for(;it!==void 0;)nt=cx$1(nt,it.name),it=it.next;return jsxRuntimeExports.jsx("style",{"data-emotion":cx$1(_e.key,nt),dangerouslySetInnerHTML:{__html:tt},nonce:_e.sheet.nonce})}return null},createStyled$1=(_e,_={},et={})=>{const tt=_e.__emotion_real===_e,nt=tt&&_e.__emotion_base||_e;let it,at;et!==void 0&&(it=et.label,at=et.target);let ot=[];const st=withEmotionCache((dt,ht,ct)=>{var Mt;const{cva:ut,isValidProperty:ft}=useChakraContext(),gt=_.__cva__?_:ut(_),mt=mergeCva$1(_e.__emotion_cva,gt),vt=Ot=>($t,Lt)=>Ot.includes($t)?!0:!(Lt!=null&&Lt.includes($t))&&!ft($t);!et.shouldForwardProp&&et.forwardProps&&(et.shouldForwardProp=vt(et.forwardProps));const yt=(Ot,$t)=>{const Lt=typeof _e=="string"&&_e.charCodeAt(0)>96?testOmitPropsOnStringTag$1:testOmitPropsOnComponent$1,kt=!($t!=null&&$t.includes(Ot))&&!ft(Ot);return Lt(Ot)&&kt},bt=composeShouldForwardProps$1(_e,et,tt)||yt,_t=reactExports.useMemo(()=>Object.assign({},et.defaultProps,compact$3(dt)),[dt]),{props:xt,styles:St}=useResolvedProps(_t,mt,bt);let Tt="",wt=[St],Ct=xt;if(xt.theme==null){Ct={};for(let Ot in xt)Ct[Ot]=xt[Ot];Ct.theme=reactExports.useContext(ThemeContext)}typeof xt.className=="string"?Tt=getRegisteredStyles(ht.registered,wt,xt.className):xt.className!=null&&(Tt=cx$1(Tt,xt.className));const Et=serializeStyles(ot.concat(wt),ht.registered,Ct);Tt=cx$1(Tt,`${ht.key}-${Et.name}`),at!==void 0&&(Tt=cx$1(Tt,at));const At=!bt("as");let Pt=At&&xt.as||nt,Rt={};for(let Ot in xt)if(!(At&&Ot==="as")){if(isHtmlProp(Ot)){const $t=Ot.replace("html","").toLowerCase();Rt[$t]=xt[Ot];continue}bt(Ot)&&(Rt[Ot]=xt[Ot])}Rt.className=Tt.trim(),Rt.ref=ct;const It=et.forwardAsChild||((Mt=et.forwardProps)==null?void 0:Mt.includes("asChild"));if(xt.asChild&&!It){const Ot=reactExports.Children.only(xt.children);Pt=Ot.type,Rt.children=null,Reflect.deleteProperty(Rt,"asChild"),Rt=mergeProps$1(Rt,Ot.props),Rt.ref=mergeRefs(ct,getElementRef(Ot))}return Rt.as&&It?(Rt.as=void 0,jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Insertion$1,{cache:ht,serialized:Et,isStringTag:typeof Pt=="string"}),jsxRuntimeExports.jsx(Pt,{asChild:!0,...Rt,children:jsxRuntimeExports.jsx(xt.as,{children:Rt.children})})]})):jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Insertion$1,{cache:ht,serialized:Et,isStringTag:typeof Pt=="string"}),jsxRuntimeExports.jsx(Pt,{...Rt})]})});return st.displayName=it!==void 0?it:`chakra(${typeof nt=="string"?nt:nt.displayName||nt.name||"Component"})`,st.__emotion_real=st,st.__emotion_base=nt,st.__emotion_forwardProp=et.shouldForwardProp,st.__emotion_cva=_,Object.defineProperty(st,"toString",{value(){return`.${at}`}}),st},styledFn=createStyled$1.bind(),cache=new Map,chakraImpl=new Proxy(styledFn,{apply(_e,_,et){return styledFn(...et)},get(_e,_){return cache.has(_)||cache.set(_,styledFn(_)),cache.get(_)}}),chakra$1=chakraImpl,mergeCva$1=(_e,_)=>_e&&!_?_e:!_e&&_?_:_e.merge(_);function useRecipe(_e){const{key:_,recipe:et}=_e,tt=useChakraContext();return reactExports.useMemo(()=>{const nt=et||(_!=null?tt.getRecipe(_):{});return tt.cva(structuredClone(nt))},[_,et,tt])}const upperFirst$1=_e=>_e.charAt(0).toUpperCase()+_e.slice(1);function createRecipeContext(_e){const{key:_,recipe:et}=_e,tt=upperFirst$1(_||et.className||"Component"),[nt,it]=createContext$2({strict:!1,name:`${tt}PropsContext`,providerName:`${tt}PropsContext`});function at(dt){const{unstyled:ht,...ct}=dt,ut=useRecipe({key:_,recipe:ct.recipe||et}),[ft,gt]=ut.splitVariantProps(ct);return{styles:ht?EMPTY_STYLES:ut(ft),className:ut.className,props:gt}}const ot=(dt,ht)=>{const ct=chakra$1(dt,{},ht),ut=reactExports.forwardRef((ft,gt)=>{const mt=mergeProps$1(it(),ft),{styles:vt,className:yt,props:bt}=at(mt);return jsxRuntimeExports.jsx(ct,{...bt,ref:gt,css:[vt,mt.css],className:cx$1(yt,mt.className)})});return ut.displayName=dt.displayName||dt.name,ut};function st(){return nt}return{withContext:ot,PropsProvider:nt,withPropsProvider:st,usePropsContext:it,useRecipeResult:at}}var clamp$3=_e=>Math.max(0,Math.min(1,_e)),wrap$4=(_e,_)=>_e.map((et,tt)=>_e[(Math.max(_,0)+tt)%_e.length]),pipe$1=(..._e)=>_=>_e.reduce((et,tt)=>tt(et),_),noop$6=()=>{},isObject$8=_e=>typeof _e=="object"&&_e!==null,MAX_Z_INDEX=2147483647,dataAttr$1=_e=>_e?"":void 0,ariaAttr=_e=>_e?"true":void 0,ELEMENT_NODE=1,DOCUMENT_NODE=9,DOCUMENT_FRAGMENT_NODE=11,isHTMLElement$1=_e=>isObject$8(_e)&&_e.nodeType===ELEMENT_NODE&&typeof _e.nodeName=="string",isDocument=_e=>isObject$8(_e)&&_e.nodeType===DOCUMENT_NODE,isWindow=_e=>isObject$8(_e)&&_e===_e.window,getNodeName$1=_e=>isHTMLElement$1(_e)?_e.localName||"":"#document";function isRootElement(_e){return["html","body","#document"].includes(getNodeName$1(_e))}var isNode$2=_e=>isObject$8(_e)&&_e.nodeType!==void 0,isShadowRoot$1=_e=>isNode$2(_e)&&_e.nodeType===DOCUMENT_FRAGMENT_NODE&&"host"in _e,isInputElement=_e=>isHTMLElement$1(_e)&&_e.localName==="input",isAnchorElement=_e=>!!(_e!=null&&_e.matches("a[href]")),isElementVisible=_e=>isHTMLElement$1(_e)?_e.offsetWidth>0||_e.offsetHeight>0||_e.getClientRects().length>0:!1,TEXTAREA_SELECT_REGEX=/(textarea|select)/;function isEditableElement(_e){if(_e==null||!isHTMLElement$1(_e))return!1;try{return isInputElement(_e)&&_e.selectionStart!=null||TEXTAREA_SELECT_REGEX.test(_e.localName)||_e.isContentEditable||_e.getAttribute("contenteditable")==="true"||_e.getAttribute("contenteditable")===""}catch{return!1}}function contains(_e,_){var tt;if(!_e||!_||!isHTMLElement$1(_e)||!isHTMLElement$1(_))return!1;const et=(tt=_.getRootNode)==null?void 0:tt.call(_);if(_e===_||_e.contains(_))return!0;if(et&&isShadowRoot$1(et)){let nt=_;for(;nt;){if(_e===nt)return!0;nt=nt.parentNode||nt.host}}return!1}function getDocument(_e){return isDocument(_e)?_e:isWindow(_e)?_e.document:(_e==null?void 0:_e.ownerDocument)??document}function getDocumentElement$1(_e){return getDocument(_e).documentElement}function getWindow$1(_e){var _;return isShadowRoot$1(_e)?getWindow$1(_e.host):isDocument(_e)?_e.defaultView??window:isHTMLElement$1(_e)?((_=_e.ownerDocument)==null?void 0:_.defaultView)??window:window}function getActiveElement(_e){let _=_e.activeElement;for(;_!=null&&_.shadowRoot;){const et=_.shadowRoot.activeElement;if(et===_)break;_=et}return _}function getParentNode$2(_e){if(getNodeName$1(_e)==="html")return _e;const _=_e.assignedSlot||_e.parentNode||isShadowRoot$1(_e)&&_e.host||getDocumentElement$1(_e);return isShadowRoot$1(_)?_.host:_}var styleCache=new WeakMap;function getComputedStyle$3(_e){return styleCache.has(_e)||styleCache.set(_e,getWindow$1(_e).getComputedStyle(_e)),styleCache.get(_e)}var isDom$1=()=>typeof document<"u";function getPlatform(){const _e=navigator.userAgentData;return(_e==null?void 0:_e.platform)??navigator.platform}function getUserAgent(){const _e=navigator.userAgentData;return _e&&Array.isArray(_e.brands)?_e.brands.map(({brand:_,version:et})=>`${_}/${et}`).join(" "):navigator.userAgent}var pt=_e=>isDom$1()&&_e.test(getPlatform()),ua=_e=>isDom$1()&&_e.test(getUserAgent()),vn=_e=>isDom$1()&&_e.test(navigator.vendor),isMac=()=>pt(/^Mac/),isSafari=()=>isApple()&&vn(/apple/i),isFirefox=()=>ua(/firefox\//i),isApple=()=>pt(/mac|iphone|ipad|ipod/i),isIos=()=>pt(/iP(hone|ad|od)|iOS/);function getComposedPath(_e){var _,et,tt;return((_=_e.composedPath)==null?void 0:_.call(_e))??((tt=(et=_e.nativeEvent)==null?void 0:et.composedPath)==null?void 0:tt.call(et))}function getEventTarget(_e){const _=getComposedPath(_e);return(_==null?void 0:_[0])??_e.target}var isSelfTarget=_e=>contains(_e.currentTarget,getEventTarget(_e));function isComposingEvent(_e){return getNativeEvent$1(_e).isComposing}var isLeftClick=_e=>_e.button===0,isContextMenuEvent=_e=>_e.button===2||isMac()&&_e.ctrlKey&&_e.button===0,isModifierKey=_e=>_e.ctrlKey||_e.altKey||_e.metaKey,isTouchEvent=_e=>"touches"in _e&&_e.touches.length>0,keyMap={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},rtlKeyMap={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function getEventKey(_e,_={}){const{dir:et="ltr",orientation:tt="horizontal"}=_;let nt=_e.key;return nt=keyMap[nt]??nt,et==="rtl"&&tt==="horizontal"&&nt in rtlKeyMap&&(nt=rtlKeyMap[nt]),nt}function getNativeEvent$1(_e){return _e.nativeEvent??_e}var pageKeys=new Set(["PageUp","PageDown"]),arrowKeys=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]);function getEventStep(_e){return _e.ctrlKey||_e.metaKey?.1:pageKeys.has(_e.key)||_e.shiftKey&&arrowKeys.has(_e.key)?10:1}function getEventPoint(_e,_="client"){const et=isTouchEvent(_e)?_e.touches[0]||_e.changedTouches[0]:_e;return{x:et[`${_}X`],y:et[`${_}Y`]}}var addDomEvent=(_e,_,et,tt)=>{const nt=typeof _e=="function"?_e():_e;return nt==null||nt.addEventListener(_,et,tt),()=>{nt==null||nt.removeEventListener(_,et,tt)}};function getDescriptor(_e,_){const{type:et="HTMLInputElement",property:tt="value"}=_,nt=getWindow$1(_e)[et].prototype;return Object.getOwnPropertyDescriptor(nt,tt)??{}}function getElementType(_e){if(_e.localName==="input")return"HTMLInputElement";if(_e.localName==="textarea")return"HTMLTextAreaElement";if(_e.localName==="select")return"HTMLSelectElement"}function setElementValue(_e,_,et="value"){var nt;const tt=getElementType(_e);tt&&((nt=getDescriptor(_e,{type:tt,property:et}).set)==null||nt.call(_e,_)),_e.setAttribute(et,_)}function setElementChecked(_e,_){var tt;(tt=getDescriptor(_e,{type:"HTMLInputElement",property:"checked"}).set)==null||tt.call(_e,_),_?_e.setAttribute("checked",""):_e.removeAttribute("checked")}function dispatchInputValueEvent(_e,_){const{value:et,bubbles:tt=!0}=_;if(!_e)return;const nt=getWindow$1(_e);_e instanceof nt.HTMLInputElement&&(setElementValue(_e,`${et}`),_e.dispatchEvent(new nt.Event("input",{bubbles:tt})))}function dispatchInputCheckedEvent(_e,_){const{checked:et,bubbles:tt=!0}=_;if(!_e)return;const nt=getWindow$1(_e);_e instanceof nt.HTMLInputElement&&(setElementChecked(_e,et),_e.dispatchEvent(new nt.Event("click",{bubbles:tt})))}function getClosestForm(_e){return isFormElement(_e)?_e.form:_e.closest("form")}function isFormElement(_e){return _e.matches("textarea, input, select, button")}function trackFormReset(_e,_){if(!_e)return;const et=getClosestForm(_e),tt=nt=>{nt.defaultPrevented||_()};return et==null||et.addEventListener("reset",tt,{passive:!0}),()=>et==null?void 0:et.removeEventListener("reset",tt)}function trackFieldsetDisabled(_e,_){const et=_e==null?void 0:_e.closest("fieldset");if(!et)return;_(et.disabled);const tt=getWindow$1(et),nt=new tt.MutationObserver(()=>_(et.disabled));return nt.observe(et,{attributes:!0,attributeFilter:["disabled"]}),()=>nt.disconnect()}function trackFormControl(_e,_){if(!_e)return;const{onFieldsetDisabledChange:et,onFormReset:tt}=_,nt=[trackFormReset(_e,tt),trackFieldsetDisabled(_e,et)];return()=>nt.forEach(it=>it==null?void 0:it())}var isFrame=_e=>isHTMLElement$1(_e)&&_e.tagName==="IFRAME",hasTabIndex=_e=>!Number.isNaN(parseInt(_e.getAttribute("tabindex")||"0",10)),hasNegativeTabIndex=_e=>parseInt(_e.getAttribute("tabindex")||"0",10)<0,focusableSelector="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",getFocusables=(_e,_=!1)=>{if(!_e)return[];const et=Array.from(_e.querySelectorAll(focusableSelector));(_==!0||_=="if-empty"&&et.length===0)&&isHTMLElement$1(_e)&&isFocusable(_e)&&et.unshift(_e);const nt=et.filter(isFocusable);return nt.forEach((it,at)=>{if(isFrame(it)&&it.contentDocument){const ot=it.contentDocument.body;nt.splice(at,1,...getFocusables(ot))}}),nt};function isFocusable(_e){return!_e||_e.closest("[inert]")?!1:_e.matches(focusableSelector)&&isElementVisible(_e)}function getTabbables(_e,_){if(!_e)return[];const tt=Array.from(_e.querySelectorAll(focusableSelector)).filter(isTabbable);return tt.forEach((nt,it)=>{if(isFrame(nt)&&nt.contentDocument){const at=nt.contentDocument.body,ot=getTabbables(at);tt.splice(it,1,...ot)}}),tt.length,tt}function isTabbable(_e){return _e!=null&&_e.tabIndex>0?!0:isFocusable(_e)&&!hasNegativeTabIndex(_e)}function getTabbableEdges(_e,_){const et=getTabbables(_e,_),tt=et[0]||null,nt=et[et.length-1]||null;return[tt,nt]}function getTabIndex(_e){return _e.tabIndex<0&&(/^(audio|video|details)$/.test(_e.localName)||isEditableElement(_e))&&!hasTabIndex(_e)?0:_e.tabIndex}function getInitialFocus(_e){const{root:_,getInitialEl:et,filter:tt,enabled:nt=!0}=_e;if(!nt)return;let it=null;if(it||(it=typeof et=="function"?et():et),it||(it=_==null?void 0:_.querySelector("[data-autofocus],[autofocus]")),!it){const at=getTabbables(_);it=tt?at.filter(tt)[0]:at[0]}return it||_||void 0}function isValidTabEvent(_e){const _=_e.currentTarget;if(!_)return!1;const[et,tt]=getTabbableEdges(_),nt=_.ownerDocument||document;return!(nt.activeElement===et&&_e.shiftKey||nt.activeElement===tt&&!_e.shiftKey||!et&&!tt)}function nextTick(_e){const _=new Set;function et(tt){const nt=globalThis.requestAnimationFrame(tt);_.add(()=>globalThis.cancelAnimationFrame(nt))}return et(()=>et(_e)),function(){_.forEach(nt=>nt())}}function raf$1(_e){const _=globalThis.requestAnimationFrame(_e);return()=>{globalThis.cancelAnimationFrame(_)}}function queueBeforeEvent(_e,_,et){const tt=raf$1(()=>{_e.removeEventListener(_,nt,!0),et()}),nt=()=>{tt(),et()};return _e.addEventListener(_,nt,{once:!0,capture:!0}),tt}function observeAttributesImpl(_e,_){if(!_e)return;const{attributes:et,callback:tt}=_,nt=_e.ownerDocument.defaultView||window,it=new nt.MutationObserver(at=>{for(const ot of at)ot.type==="attributes"&&ot.attributeName&&et.includes(ot.attributeName)&&tt(ot)});return it.observe(_e,{attributes:!0,attributeFilter:et}),()=>it.disconnect()}function observeAttributes(_e,_){const{defer:et}=_,tt=et?raf$1:it=>it(),nt=[];return nt.push(tt(()=>{const it=typeof _e=="function"?_e():_e;nt.push(observeAttributesImpl(it,_))})),()=>{nt.forEach(it=>it==null?void 0:it())}}function observeChildrenImpl(_e,_){const{callback:et}=_;if(!_e)return;const tt=_e.ownerDocument.defaultView||window,nt=new tt.MutationObserver(et);return nt.observe(_e,{childList:!0,subtree:!0}),()=>nt.disconnect()}function observeChildren(_e,_){const{defer:et}=_,tt=et?raf$1:it=>it(),nt=[];return nt.push(tt(()=>{const it=typeof _e=="function"?_e():_e;nt.push(observeChildrenImpl(it,_))})),()=>{nt.forEach(it=>it==null?void 0:it())}}function clickIfLink(_e){const _=()=>_e.click();isFirefox()?queueBeforeEvent(_e,"keyup",_):queueMicrotask(_)}function getNearestOverflowAncestor$1(_e){const _=getParentNode$2(_e);return isRootElement(_)?getDocument(_).body:isHTMLElement$1(_)&&isOverflowElement$1(_)?_:getNearestOverflowAncestor$1(_)}var OVERFLOW_RE=/auto|scroll|overlay|hidden|clip/;function isOverflowElement$1(_e){const _=getWindow$1(_e),{overflow:et,overflowX:tt,overflowY:nt,display:it}=_.getComputedStyle(_e);return OVERFLOW_RE.test(et+nt+tt)&&!["inline","contents"].includes(it)}function isScrollable(_e){return _e.scrollHeight>_e.clientHeight||_e.scrollWidth>_e.clientWidth}function scrollIntoView(_e,_){const{rootEl:et,...tt}=_;!_e||!et||!isOverflowElement$1(et)||!isScrollable(et)||_e.scrollIntoView(tt)}function getRelativePoint(_e,_){const{left:et,top:tt,width:nt,height:it}=_.getBoundingClientRect(),at={x:_e.x-et,y:_e.y-tt},ot={x:clamp$3(at.x/nt),y:clamp$3(at.y/it)};function st(dt={}){const{dir:ht="ltr",orientation:ct="horizontal",inverted:ut}=dt,ft=typeof ut=="object"?ut.x:ut,gt=typeof ut=="object"?ut.y:ut;return ct==="horizontal"?ht==="rtl"||ft?1-ot.x:ot.x:gt?1-ot.y:ot.y}return{offset:at,percent:ot,getPercentValue:st}}function requestPointerLock(_e,_){const et=_e.body,tt="pointerLockElement"in _e||"mozPointerLockElement"in _e,nt=()=>!!_e.pointerLockElement;function it(){}function at(st){nt(),console.error("PointerLock error occurred:",st),_e.exitPointerLock()}if(!tt)return;try{et.requestPointerLock()}catch{}const ot=[addDomEvent(_e,"pointerlockchange",it,!1),addDomEvent(_e,"pointerlockerror",at,!1)];return()=>{ot.forEach(st=>st()),_e.exitPointerLock()}}function trackPress(_e){const{pointerNode:_,keyboardNode:et=_,onPress:tt,onPressStart:nt,onPressEnd:it,isValidKey:at=_t=>_t.key==="Enter"}=_e;if(!_)return noop$6;const ot=getWindow$1(_),st=getDocument(_);let dt=noop$6,ht=noop$6,ct=noop$6;const ut=_t=>({point:getEventPoint(_t),event:_t});function ft(_t){nt==null||nt(ut(_t))}function gt(_t){it==null||it(ut(_t))}const vt=addDomEvent(_,"pointerdown",_t=>{ht();const St=addDomEvent(ot,"pointerup",wt=>{const Ct=getEventTarget(wt);contains(_,Ct)?tt==null||tt(ut(wt)):it==null||it(ut(wt))},{passive:!tt}),Tt=addDomEvent(ot,"pointercancel",gt,{passive:!it});ht=pipe$1(St,Tt),st.activeElement===et&&_t.pointerType==="mouse"&&_t.preventDefault(),ft(_t)},{passive:!nt}),yt=addDomEvent(et,"focus",bt);dt=pipe$1(vt,yt);function bt(){const _t=wt=>{if(!at(wt))return;const Ct=At=>{if(!at(At))return;const Pt=new ot.PointerEvent("pointerup"),Rt=ut(Pt);tt==null||tt(Rt),it==null||it(Rt)};ht(),ht=addDomEvent(et,"keyup",Ct);const Et=new ot.PointerEvent("pointerdown");ft(Et)},xt=()=>{const wt=new ot.PointerEvent("pointercancel");gt(wt)},St=addDomEvent(et,"keydown",_t),Tt=addDomEvent(et,"blur",xt);ct=pipe$1(St,Tt)}return()=>{dt(),ht(),ct()}}function queryAll(_e,_){return Array.from((_e==null?void 0:_e.querySelectorAll(_))??[])}function query(_e,_){return(_e==null?void 0:_e.querySelector(_))??null}var defaultItemToId=_e=>_e.id;function itemById(_e,_,et=defaultItemToId){return _e.find(tt=>et(tt)===_)}function indexOfId(_e,_,et=defaultItemToId){const tt=itemById(_e,_,et);return tt?_e.indexOf(tt):-1}function nextById(_e,_,et=!0){let tt=indexOfId(_e,_);return tt=et?(tt+1)%_e.length:Math.min(tt+1,_e.length-1),_e[tt]}function prevById(_e,_,et=!0){let tt=indexOfId(_e,_);return tt===-1?et?_e[_e.length-1]:null:(tt=et?(tt-1+_e.length)%_e.length:Math.max(0,tt-1),_e[tt])}function createScope(_e){const _={getRootNode:et=>{var tt;return((tt=et.getRootNode)==null?void 0:tt.call(et))??document},getDoc:et=>getDocument(_.getRootNode(et)),getWin:et=>_.getDoc(et).defaultView??window,getActiveElement:et=>getActiveElement(_.getRootNode(et)),isActiveElement:(et,tt)=>tt===_.getActiveElement(et),getById:(et,tt)=>_.getRootNode(et).getElementById(tt),setValue:(et,tt)=>{et==null||tt==null||setElementValue(et,tt.toString())}};return{..._,..._e}}var sanitize=_e=>_e.split("").map(_=>{const et=_.charCodeAt(0);return et>0&&et<128?_:et>=128&&et<=255?`/x${et.toString(16)}`.replace("/","\\"):""}).join("").trim(),getValueText=_e=>{var _;return sanitize(((_=_e.dataset)==null?void 0:_.valuetext)??_e.textContent??"")},match$2=(_e,_)=>_e.trim().toLowerCase().startsWith(_.toLowerCase());function getByText(_e,_,et,tt=defaultItemToId){const nt=et?indexOfId(_e,et,tt):-1;let it=et?wrap$4(_e,nt):_e;return _.length===1&&(it=it.filter(ot=>tt(ot)!==et)),it.find(ot=>match$2(getValueText(ot),_))}var cleanups=new WeakMap;function set$8(_e,_,et){cleanups.has(_e)||cleanups.set(_e,new Map);const tt=cleanups.get(_e),nt=tt.get(_);if(!nt)return tt.set(_,et()),()=>{var ot;(ot=tt.get(_))==null||ot(),tt.delete(_)};const it=et(),at=()=>{it(),nt(),tt.delete(_)};return tt.set(_,at),()=>{tt.get(_)===at&&(it(),tt.set(_,nt))}}function setStyle(_e,_){return _e?set$8(_e,"style",()=>{const tt=_e.style.cssText;return Object.assign(_e.style,_),()=>{_e.style.cssText=tt}}):()=>{}}function getByTypeaheadImpl(_e,_){const{state:et,activeId:tt,key:nt,timeout:it=350,itemToId:at}=_,ot=et.keysSoFar+nt,dt=ot.length>1&&Array.from(ot).every(gt=>gt===ot[0])?ot[0]:ot;let ht=_e.slice();const ct=getByText(ht,dt,tt,at);function ut(){clearTimeout(et.timer),et.timer=-1}function ft(gt){et.keysSoFar=gt,ut(),gt!==""&&(et.timer=+setTimeout(()=>{ft(""),ut()},it))}return ft(ot),ct}var getByTypeahead=Object.assign(getByTypeaheadImpl,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:isValidTypeaheadEvent});function isValidTypeaheadEvent(_e){return _e.key.length===1&&!_e.ctrlKey&&!_e.metaKey}var visuallyHiddenStyle={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"},fps=1e3/60;function waitForElement(_e,_){const et=_e();if(isHTMLElement$1(et)&&et.isConnected)return _(et),()=>{};{const tt=setInterval(()=>{const nt=_e();isHTMLElement$1(nt)&&nt.isConnected&&(_(nt),clearInterval(tt))},fps);return()=>clearInterval(tt)}}function waitForElements(_e,_){const et=[];return _e==null||_e.forEach(tt=>{const nt=waitForElement(tt,_);et.push(nt)}),()=>{et.forEach(tt=>tt())}}function getErrorMessage$1(_e,_){return`${_e} returned \`undefined\`. Seems you forgot to wrap component within ${_}`}function createContext$1(_e={}){const{name:_,strict:et=!0,hookName:tt="useContext",providerName:nt="Provider",errorMessage:it,defaultValue:at}=_e,ot=reactExports.createContext(at);ot.displayName=_;function st(){var ht;const dt=reactExports.useContext(ot);if(!dt&&et){const ct=new Error(it??getErrorMessage$1(tt,nt));throw ct.name="ContextError",(ht=Error.captureStackTrace)==null||ht.call(Error,ct,st),ct}return dt}return[ot.Provider,st,ot]}const[LocaleContextProvider,useLocaleContext]=createContext$1({name:"LocaleContext",hookName:"useLocaleContext",providerName:"<LocaleProvider />",strict:!1,defaultValue:{dir:"ltr",locale:"en-US"}});function setRef(_e,_){typeof _e=="function"?_e(_):_e!=null&&(_e.current=_)}function composeRefs(..._e){return _=>{for(const et of _e)setRef(et,_)}}const TRACK_MEMO_SYMBOL=Symbol(),GET_ORIGINAL_SYMBOL=Symbol(),AFFECTED_PROPERTY="a",IS_TARGET_COPIED_PROPERTY="f",PROXY_PROPERTY="p",PROXY_CACHE_PROPERTY="c",TARGET_CACHE_PROPERTY="t",HAS_KEY_PROPERTY="h",ALL_OWN_KEYS_PROPERTY="w",HAS_OWN_KEY_PROPERTY="o",KEYS_PROPERTY="k";let newProxy=(_e,_)=>new Proxy(_e,_);const getProto$2=Object.getPrototypeOf,objectsToTrack=new WeakMap,isObjectToTrack=_e=>_e&&(objectsToTrack.has(_e)?objectsToTrack.get(_e):getProto$2(_e)===Object.prototype||getProto$2(_e)===Array.prototype),isObject$7=_e=>typeof _e=="object"&&_e!==null,needsToCopyTargetObject=_e=>Object.values(Object.getOwnPropertyDescriptors(_e)).some(_=>!_.configurable&&!_.writable),copyTargetObject=_e=>{if(Array.isArray(_e))return Array.from(_e);const _=Object.getOwnPropertyDescriptors(_e);return Object.values(_).forEach(et=>{et.configurable=!0}),Object.create(getProto$2(_e),_)},createProxyHandler=(_e,_)=>{const et={[IS_TARGET_COPIED_PROPERTY]:_};let tt=!1;const nt=(ot,st)=>{if(!tt){let dt=et[AFFECTED_PROPERTY].get(_e);if(dt||(dt={},et[AFFECTED_PROPERTY].set(_e,dt)),ot===ALL_OWN_KEYS_PROPERTY)dt[ALL_OWN_KEYS_PROPERTY]=!0;else{let ht=dt[ot];ht||(ht=new Set,dt[ot]=ht),ht.add(st)}}},it=()=>{tt=!0,et[AFFECTED_PROPERTY].delete(_e)},at={get(ot,st){return st===GET_ORIGINAL_SYMBOL?_e:(nt(KEYS_PROPERTY,st),createProxy$2(Reflect.get(ot,st),et[AFFECTED_PROPERTY],et[PROXY_CACHE_PROPERTY],et[TARGET_CACHE_PROPERTY]))},has(ot,st){return st===TRACK_MEMO_SYMBOL?(it(),!0):(nt(HAS_KEY_PROPERTY,st),Reflect.has(ot,st))},getOwnPropertyDescriptor(ot,st){return nt(HAS_OWN_KEY_PROPERTY,st),Reflect.getOwnPropertyDescriptor(ot,st)},ownKeys(ot){return nt(ALL_OWN_KEYS_PROPERTY),Reflect.ownKeys(ot)}};return _&&(at.set=at.deleteProperty=()=>!1),[at,et]},getOriginalObject=_e=>_e[GET_ORIGINAL_SYMBOL]||_e,createProxy$2=(_e,_,et,tt)=>{if(!isObjectToTrack(_e))return _e;let nt=tt&&tt.get(_e);if(!nt){const st=getOriginalObject(_e);needsToCopyTargetObject(st)?nt=[st,copyTargetObject(st)]:nt=[st],tt==null||tt.set(_e,nt)}const[it,at]=nt;let ot=et&&et.get(it);return(!ot||ot[1][IS_TARGET_COPIED_PROPERTY]!==!!at)&&(ot=createProxyHandler(it,!!at),ot[1][PROXY_PROPERTY]=newProxy(at||it,ot[0]),et&&et.set(it,ot)),ot[1][AFFECTED_PROPERTY]=_,ot[1][PROXY_CACHE_PROPERTY]=et,ot[1][TARGET_CACHE_PROPERTY]=tt,ot[1][PROXY_PROPERTY]},isAllOwnKeysChanged=(_e,_)=>{const et=Reflect.ownKeys(_e),tt=Reflect.ownKeys(_);return et.length!==tt.length||et.some((nt,it)=>nt!==tt[it])},isChanged=(_e,_,et,tt,nt=Object.is)=>{if(nt(_e,_))return!1;if(!isObject$7(_e)||!isObject$7(_))return!0;const it=et.get(getOriginalObject(_e));if(!it)return!0;if(tt){if(tt.get(_e)===_)return!1;tt.set(_e,_)}let at=null;for(const ot of it[HAS_KEY_PROPERTY]||[])if(at=Reflect.has(_e,ot)!==Reflect.has(_,ot),at)return at;if(it[ALL_OWN_KEYS_PROPERTY]===!0){if(at=isAllOwnKeysChanged(_e,_),at)return at}else for(const ot of it[HAS_OWN_KEY_PROPERTY]||[]){const st=!!Reflect.getOwnPropertyDescriptor(_e,ot),dt=!!Reflect.getOwnPropertyDescriptor(_,ot);if(at=st!==dt,at)return at}for(const ot of it[KEYS_PROPERTY]||[])if(at=isChanged(_e[ot],_[ot],et,tt,nt),at)return at;if(at===null)throw new Error("invalid used");return at},getUntracked=_e=>isObjectToTrack(_e)&&_e[GET_ORIGINAL_SYMBOL]||null,markToTrack=(_e,_=!0)=>{objectsToTrack.set(_e,_)};function glob(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function globalRef(_e,_){const et=glob();return et?(et[_e]||(et[_e]=_()),et[_e]):_()}var refSet=globalRef("__zag__refSet",()=>new WeakSet),isReactElement=_e=>typeof _e=="object"&&_e!==null&&"$$typeof"in _e&&"props"in _e,isVueElement=_e=>typeof _e=="object"&&_e!==null&&"__v_isVNode"in _e,isDOMElement=_e=>typeof _e=="object"&&_e!==null&&"nodeType"in _e&&typeof _e.nodeName=="string",isElement$2=_e=>isReactElement(_e)||isVueElement(_e)||isDOMElement(_e),isObject$6=_e=>_e!==null&&typeof _e=="object",canProxy=_e=>isObject$6(_e)&&!refSet.has(_e)&&(Array.isArray(_e)||!(Symbol.iterator in _e))&&!isElement$2(_e)&&!(_e instanceof WeakMap)&&!(_e instanceof WeakSet)&&!(_e instanceof Error)&&!(_e instanceof Number)&&!(_e instanceof Date)&&!(_e instanceof String)&&!(_e instanceof RegExp)&&!(_e instanceof ArrayBuffer)&&!(_e instanceof Promise);function set$7(_e,_,et){typeof et.value=="object"&&!canProxy(et.value)&&(et.value=clone$6(et.value)),!et.enumerable||et.get||et.set||!et.configurable||!et.writable||_==="__proto__"?Object.defineProperty(_e,_,et):_e[_]=et.value}function clone$6(_e){if(typeof _e!="object")return _e;var _=0,et,tt,nt,it=Object.prototype.toString.call(_e);if(it==="[object Object]"?nt=Object.create(Object.getPrototypeOf(_e)||null):it==="[object Array]"?nt=Array(_e.length):it==="[object Set]"?(nt=new Set,_e.forEach(function(at){nt.add(clone$6(at))})):it==="[object Map]"?(nt=new Map,_e.forEach(function(at,ot){nt.set(clone$6(ot),clone$6(at))})):it==="[object Date]"?nt=new Date(+_e):it==="[object RegExp]"?nt=new RegExp(_e.source,_e.flags):it==="[object DataView]"?nt=new _e.constructor(clone$6(_e.buffer)):it==="[object ArrayBuffer]"?nt=_e.slice(0):it==="[object Blob]"?nt=_e.slice():it.slice(-6)==="Array]"&&(nt=new _e.constructor(_e)),nt){for(tt=Object.getOwnPropertySymbols(_e);_<tt.length;_++)set$7(nt,tt[_],Object.getOwnPropertyDescriptor(_e,tt[_]));for(_=0,tt=Object.getOwnPropertyNames(_e);_<tt.length;_++)Object.hasOwnProperty.call(nt,et=tt[_])&&nt[et]===_e[et]||set$7(nt,et,Object.getOwnPropertyDescriptor(_e,et))}return nt||_e}var proxyStateMap=globalRef("__zag__proxyStateMap",()=>new WeakMap),buildProxyFunction=(_e=Object.is,_=(ot,st)=>new Proxy(ot,st),et=new WeakMap,tt=(ot,st)=>{const dt=et.get(ot);if((dt==null?void 0:dt[0])===st)return dt[1];const ht=Array.isArray(ot)?[]:Object.create(Object.getPrototypeOf(ot));return markToTrack(ht,!0),et.set(ot,[st,ht]),Reflect.ownKeys(ot).forEach(ct=>{const ut=Reflect.get(ot,ct);refSet.has(ut)?(markToTrack(ut,!1),ht[ct]=ut):proxyStateMap.has(ut)?ht[ct]=snapshot(ut):ht[ct]=ut}),Object.freeze(ht)},nt=new WeakMap,it=[1,1],at=ot=>{if(!isObject$6(ot))throw new Error("object required");const st=nt.get(ot);if(st)return st;let dt=it[0];const ht=new Set,ct=(wt,Ct=++it[0])=>{dt!==Ct&&(dt=Ct,ht.forEach(Et=>Et(wt,Ct)))};let ut=it[1];const ft=(wt=++it[1])=>(ut!==wt&&!ht.size&&(ut=wt,mt.forEach(([Ct])=>{const Et=Ct[1](wt);Et>dt&&(dt=Et)})),dt),gt=wt=>(Ct,Et)=>{const At=[...Ct];At[1]=[wt,...At[1]],ct(At,Et)},mt=new Map,vt=(wt,Ct)=>{if(ht.size){const Et=Ct[3](gt(wt));mt.set(wt,[Ct,Et])}else mt.set(wt,[Ct])},yt=wt=>{var Et;const Ct=mt.get(wt);Ct&&(mt.delete(wt),(Et=Ct[1])==null||Et.call(Ct))},bt=wt=>(ht.add(wt),ht.size===1&&mt.forEach(([Et,At],Pt)=>{const Rt=Et[3](gt(Pt));mt.set(Pt,[Et,Rt])}),()=>{ht.delete(wt),ht.size===0&&mt.forEach(([Et,At],Pt)=>{At&&(At(),mt.set(Pt,[Et]))})}),_t=Array.isArray(ot)?[]:Object.create(Object.getPrototypeOf(ot)),St=_(_t,{deleteProperty(wt,Ct){const Et=Reflect.get(wt,Ct);yt(Ct);const At=Reflect.deleteProperty(wt,Ct);return At&&ct(["delete",[Ct],Et]),At},set(wt,Ct,Et,At){var Mt;const Pt=Reflect.has(wt,Ct),Rt=Reflect.get(wt,Ct,At);if(Pt&&(_e(Rt,Et)||nt.has(Et)&&_e(Rt,nt.get(Et))))return!0;yt(Ct),isObject$6(Et)&&(Et=getUntracked(Et)||Et);let It=Et;if(!((Mt=Object.getOwnPropertyDescriptor(wt,Ct))!=null&&Mt.set)){!proxyStateMap.has(Et)&&canProxy(Et)&&(It=proxy(Et));const Ot=!refSet.has(It)&&proxyStateMap.get(It);Ot&&vt(Ct,Ot)}return Reflect.set(wt,Ct,It,At),ct(["set",[Ct],Et,Rt]),!0}});nt.set(ot,St);const Tt=[_t,ft,tt,bt];return proxyStateMap.set(St,Tt),Reflect.ownKeys(ot).forEach(wt=>{const Ct=Object.getOwnPropertyDescriptor(ot,wt);Ct.get||Ct.set?Object.defineProperty(_t,wt,Ct):St[wt]=ot[wt]}),St})=>[at,proxyStateMap,refSet,_e,_,canProxy,et,tt,nt,it],[proxyFunction]=buildProxyFunction();function proxy(_e={}){return proxyFunction(_e)}function subscribe$1(_e,_,et){const tt=proxyStateMap.get(_e);let nt;const it=[],at=tt[3];let ot=!1;const dt=at(ht=>{if(it.push(ht),et){_(it.splice(0));return}nt||(nt=Promise.resolve().then(()=>{nt=void 0,ot&&_(it.splice(0))}))});return ot=!0,()=>{ot=!1,dt()}}function snapshot(_e){const _=proxyStateMap.get(_e),[et,tt,nt]=_;return nt(et,tt())}function ref$1(_e){return refSet.add(_e),_e}function proxyWithComputed(_e,_){Object.keys(_).forEach(nt=>{if(Object.getOwnPropertyDescriptor(_e,nt))throw new Error("object property already defined");const it=_[nt],{get:at,set:ot}=typeof it=="function"?{get:it}:it,st={};st.get=()=>at(snapshot(tt)),ot&&(st.set=dt=>ot(tt,dt)),Object.defineProperty(_e,nt,st)});const tt=proxy(_e);return tt}var first=_e=>_e[0],last=_e=>_e[_e.length-1],has$6=(_e,_)=>_e.indexOf(_)!==-1,add$3=(_e,..._)=>_e.concat(_),remove$2=(_e,..._)=>_e.filter(et=>!_.includes(et)),addOrRemove=(_e,_)=>has$6(_e,_)?remove$2(_e,_):add$3(_e,_);function clear$3(_e){for(;_e.length>0;)_e.pop();return _e}var isArrayLike$2=_e=>(_e==null?void 0:_e.constructor.name)==="Array",isArrayEqual$1=(_e,_)=>{if(_e.length!==_.length)return!1;for(let et=0;et<_e.length;et++)if(!isEqual$3(_e[et],_[et]))return!1;return!0},isEqual$3=(_e,_)=>{if(Object.is(_e,_))return!0;if(_e==null&&_!=null||_e!=null&&_==null)return!1;if(typeof(_e==null?void 0:_e.isEqual)=="function"&&typeof(_==null?void 0:_.isEqual)=="function")return _e.isEqual(_);if(typeof _e=="function"&&typeof _=="function")return _e.toString()===_.toString();if(isArrayLike$2(_e)&&isArrayLike$2(_))return isArrayEqual$1(Array.from(_e),Array.from(_));if(typeof _e!="object"||typeof _!="object")return!1;const et=Object.keys(_??Object.create(null)),tt=et.length;for(let nt=0;nt<tt;nt++)if(!Reflect.has(_e,et[nt]))return!1;for(let nt=0;nt<tt;nt++){const it=et[nt];if(!isEqual$3(_e[it],_[it]))return!1}return!0},runIfFn$2=(_e,..._)=>(typeof _e=="function"?_e(..._):_e)??void 0,cast=_e=>_e,noop$5=()=>{},callAll=(..._e)=>(..._)=>{_e.forEach(function(et){et==null||et(..._)})},uuid=(()=>{let _e=0;return()=>(_e++,_e.toString(36))})(),isArray$6=_e=>Array.isArray(_e),isObjectLike=_e=>_e!=null&&typeof _e=="object",isObject$5=_e=>isObjectLike(_e)&&!isArray$6(_e),isNumber$2=_e=>typeof _e=="number"&&!Number.isNaN(_e),isString$3=_e=>typeof _e=="string",isFunction$5=_e=>typeof _e=="function",isNull=_e=>_e==null,hasProp=(_e,_)=>Object.prototype.hasOwnProperty.call(_e,_),baseGetTag=_e=>Object.prototype.toString.call(_e),fnToString$1=Function.prototype.toString,objectCtorString=fnToString$1.call(Object),isPlainObject$1=_e=>{if(!isObjectLike(_e)||baseGetTag(_e)!="[object Object]")return!1;const _=Object.getPrototypeOf(_e);if(_===null)return!0;const et=hasProp(_,"constructor")&&_.constructor;return typeof et=="function"&&et instanceof et&&fnToString$1.call(et)==objectCtorString},{floor:floor$3,abs:abs$3,round:round$8,min:min$5,max:max$6,pow:pow$2,sign:sign$4}=Math,isNaN$1=_e=>Number.isNaN(_e),nan=_e=>isNaN$1(_e)?0:_e,wrap$3=(_e,_)=>(_e%_+_)%_,isValueAtMax=(_e,_)=>nan(_e)>=_,isValueAtMin=(_e,_)=>nan(_e)<=_,isValueWithinRange=(_e,_,et)=>nan(_e)>=_&&nan(_e)<=et,roundValue=(_e,_,et)=>round$8((nan(_e)-_)/et)*et+_,clampValue=(_e,_,et)=>min$5(max$6(nan(_e),_),et),getValuePercent=(_e,_,et)=>(nan(_e)-_)/(et-_),getPercentValue=(_e,_,et,tt)=>clampValue(roundValue(_e*(et-_)+_,_,tt),_,et),roundToDpr=(_e,_)=>typeof _=="number"?floor$3(_e*_+.5)/_:round$8(_e),getValueTransformer=(_e,_)=>{const[et,tt]=_e,[nt,it]=_;return at=>et===tt||nt===it?nt:nt+(it-nt)/(tt-et)*(at-et)},countDecimals=_e=>{if(!Number.isFinite(_e))return 0;let _=1,et=0;for(;Math.round(_e*_)/_!==_e;)_*=10,et+=1;return et},decimalOp=(_e,_,et)=>{let tt=_==="+"?_e+et:_e-et;if(_e%1!==0||et%1!==0){const nt=10**Math.max(countDecimals(_e),countDecimals(et));_e=Math.round(_e*nt),et=Math.round(et*nt),tt=_==="+"?_e+et:_e-et,tt/=nt}return tt},incrementValue=(_e,_)=>decimalOp(nan(_e),"+",_),decrementValue=(_e,_)=>decimalOp(nan(_e),"-",_);function compact$2(_e){if(!isPlainObject2(_e)||_e===void 0)return _e;const _=Reflect.ownKeys(_e).filter(tt=>typeof tt=="string"),et={};for(const tt of _){const nt=_e[tt];nt!==void 0&&(et[tt]=compact$2(nt))}return et}var isPlainObject2=_e=>_e&&typeof _e=="object"&&_e.constructor===Object;function warn(..._e){_e.length===1?_e[0]:_e[1],_e.length===2&&_e[0]}function invariant(..._e){_e.length===1?_e[0]:_e[1],_e.length===2&&_e[0]}var __defProp$3=Object.defineProperty,__defNormalProp$3=(_e,_,et)=>_ in _e?__defProp$3(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et,__publicField$3=(_e,_,et)=>__defNormalProp$3(_e,typeof _!="symbol"?_+"":_,et);function deepMerge(_e,..._){for(const et of _){const tt=compact$2(et);for(const nt in tt)isPlainObject$1(et[nt])?(_e[nt]||(_e[nt]={}),deepMerge(_e[nt],et[nt])):_e[nt]=et[nt]}return _e}function toEvent(_e){return isString$3(_e)?{type:_e}:_e}function toArray(_e){return _e?isArray$6(_e)?_e.slice():[_e]:[]}function isGuardHelper(_e){return isObject$5(_e)&&_e.predicate!=null}var Truthy=()=>!0;function exec(_e,_,et,tt){return nt=>{var it;return isString$3(nt)?!!((it=_e[nt])!=null&&it.call(_e,_,et,tt)):isFunction$5(nt)?nt(_,et,tt):nt.predicate(_e)(_,et,tt)}}function or$2(..._e){return{predicate:_=>(et,tt,nt)=>_e.map(exec(_,et,tt,nt)).some(Boolean)}}function and$3(..._e){return{predicate:_=>(et,tt,nt)=>_e.map(exec(_,et,tt,nt)).every(Boolean)}}function not$5(_e){return{predicate:_=>(et,tt,nt)=>!exec(_,et,tt,nt)(_e)}}function stateIn(..._e){return(_,et,tt)=>tt.state.matches(..._e)}var guards={or:or$2,and:and$3,not:not$5,stateIn};function choose(_e){return{predicate:_=>(et,tt,nt)=>{var it;return(it=_e.find(at=>{const ot=at.guard??Truthy;return exec(_,et,tt,nt)(ot)}))==null?void 0:it.actions}}}function determineGuardFn(_e,_){return _e=_e??Truthy,(et,tt,nt)=>{if(isString$3(_e)){const it=_[_e];return isFunction$5(it)?it(et,tt,nt):it}return isGuardHelper(_e)?_e.predicate(_)(et,tt,nt):_e==null?void 0:_e(et,tt,nt)}}function determineActionsFn(_e,_){return(et,tt,nt)=>isGuardHelper(_e)?_e.predicate(_)(et,tt,nt):_e}function createProxy$1(_e){var it,at;const _=_e.computed??cast({}),et=_e.context??cast({}),tt=_e.initial?(at=(it=_e.states)==null?void 0:it[_e.initial])==null?void 0:at.tags:[],nt=proxy({value:_e.initial??"",previousValue:"",event:cast({}),previousEvent:cast({}),context:proxyWithComputed(et,_),done:!1,tags:tt??[],hasTag(ot){return this.tags.includes(ot)},matches(...ot){return ot.includes(this.value)},can(ot){return cast(this).nextEvents.includes(ot)},get nextEvents(){var dt,ht;const ot=((ht=(dt=_e.states)==null?void 0:dt[this.value])==null?void 0:ht.on)??{},st=(_e==null?void 0:_e.on)??{};return Object.keys({...ot,...st})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return cast(nt)}function determineDelayFn(_e,_){return(et,tt)=>{if(isNumber$2(_e))return _e;if(isFunction$5(_e))return _e(et,tt);if(isString$3(_e)){const nt=Number.parseFloat(_e);if(!Number.isNaN(nt))return nt;if(_){const it=_==null?void 0:_[_e];return invariant(it==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${_e}\`. It doesn't exist in \`options.delays\``),isFunction$5(it)?it(et,tt):it}}}}function toTarget(_e){return isString$3(_e)?{target:_e}:_e}function determineTransitionFn(_e,_){return(et,tt,nt)=>toArray(_e).map(toTarget).find(it=>determineGuardFn(it.guard,_)(et,tt,nt)??it.target??it.actions)}var Machine=class{constructor(_e,_){var et,tt,nt,it,at;__publicField$3(this,"status","Not Started"),__publicField$3(this,"state"),__publicField$3(this,"initialState"),__publicField$3(this,"initialContext"),__publicField$3(this,"id"),__publicField$3(this,"type","machine"),__publicField$3(this,"activityEvents",new Map),__publicField$3(this,"delayedEvents",new Map),__publicField$3(this,"stateListeners",new Set),__publicField$3(this,"doneListeners",new Set),__publicField$3(this,"contextWatchers",new Set),__publicField$3(this,"removeStateListener",noop$5),__publicField$3(this,"parent"),__publicField$3(this,"children",new Map),__publicField$3(this,"guardMap"),__publicField$3(this,"actionMap"),__publicField$3(this,"delayMap"),__publicField$3(this,"activityMap"),__publicField$3(this,"sync"),__publicField$3(this,"options"),__publicField$3(this,"config"),__publicField$3(this,"_created",()=>{if(!this.config.created)return;const ot=toEvent("machine.created");this.executeActions(this.config.created,ot)}),__publicField$3(this,"start",ot=>{if(this.state.value="",this.state.tags=[],this.status==="Running")return this;this.status="Running",this.removeStateListener=subscribe$1(this.state,()=>{this.stateListeners.forEach(ft=>{ft(this.stateSnapshot)})},this.sync),this.setupContextWatchers(),this.executeActivities(toEvent("machine.start"),toArray(this.config.activities),"machine.start"),this.executeActions(this.config.entry,toEvent("machine.start"));const st=toEvent("machine.init"),dt=isObject$5(ot)?ot.value:ot,ht=isObject$5(ot)?ot.context:void 0;ht&&this.setContext(ht);const ct={target:dt??this.config.initial},ut=this.getNextStateInfo(ct,st);return this.initialState=ut,this.performStateChangeEffects(this.state.value,ut,st),this}),__publicField$3(this,"setupContextWatchers",()=>{const{watch:ot}=this.config;if(!ot)return;let st=snapshot(this.state.context);const dt=subscribe$1(this.state.context,()=>{var ct;const ht=snapshot(this.state.context);for(const[ut,ft]of Object.entries(ot))(((ct=this.options.compareFns)==null?void 0:ct[ut])??Object.is)(st[ut],ht[ut])||this.executeActions(ft,this.state.event);st=ht});this.contextWatchers.add(dt)}),__publicField$3(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,toEvent("machine.stop")),this.executeActions(this.config.exit,toEvent("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.status="Stopped",this}),__publicField$3(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),__publicField$3(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(ot=>ot()),this.contextWatchers.clear()}),__publicField$3(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(ot=>{ot.forEach(st=>st())}),this.delayedEvents.clear()}),__publicField$3(this,"stopActivities",ot=>{var st,dt;ot?((st=this.activityEvents.get(ot))==null||st.forEach(ht=>ht()),(dt=this.activityEvents.get(ot))==null||dt.clear(),this.activityEvents.delete(ot)):(this.activityEvents.forEach(ht=>{ht.forEach(ct=>ct()),ht.clear()}),this.activityEvents.clear())}),__publicField$3(this,"sendChild",(ot,st)=>{const dt=toEvent(ot),ht=runIfFn$2(st,this.contextSnapshot),ct=this.children.get(ht);ct||invariant(`[@zag-js/core] Cannot send '${dt.type}' event to unknown child`),ct.send(dt)}),__publicField$3(this,"stopChild",ot=>{this.children.has(ot)||invariant(`[@zag-js/core > stop-child] Cannot stop unknown child ${ot}`),this.children.get(ot).stop(),this.children.delete(ot)}),__publicField$3(this,"removeChild",ot=>{this.children.delete(ot)}),__publicField$3(this,"stopChildren",()=>{this.children.forEach(ot=>ot.stop()),this.children.clear()}),__publicField$3(this,"setParent",ot=>{this.parent=ot}),__publicField$3(this,"spawn",(ot,st)=>{const dt=runIfFn$2(ot);return st&&(dt.id=st),dt.type="machine.actor",dt.setParent(this),this.children.set(dt.id,cast(dt)),dt.onDone(()=>{this.removeChild(dt.id)}).start(),cast(ref$1(dt))}),__publicField$3(this,"stopActivity",ot=>{var dt;if(!this.state.value)return;const st=this.activityEvents.get(this.state.value);(dt=st==null?void 0:st.get(ot))==null||dt(),st==null||st.delete(ot)}),__publicField$3(this,"addActivityCleanup",(ot,st,dt)=>{var ht;ot&&(this.activityEvents.has(ot)?(ht=this.activityEvents.get(ot))==null||ht.set(st,dt):this.activityEvents.set(ot,new Map([[st,dt]])))}),__publicField$3(this,"setState",ot=>{this.state.previousValue=this.state.value,this.state.value=ot;const st=this.getStateNode(ot);ot==null?clear$3(this.state.tags):this.state.tags=toArray(st==null?void 0:st.tags)}),__publicField$3(this,"setContext",ot=>{ot&&deepMerge(this.state.context,compact$2(ot))}),__publicField$3(this,"setOptions",ot=>{const st=compact$2(ot);this.actionMap={...this.actionMap,...st.actions},this.delayMap={...this.delayMap,...st.delays},this.activityMap={...this.activityMap,...st.activities},this.guardMap={...this.guardMap,...st.guards}}),__publicField$3(this,"getStateNode",ot=>{var st;if(ot)return(st=this.config.states)==null?void 0:st[ot]}),__publicField$3(this,"getNextStateInfo",(ot,st)=>{const dt=this.determineTransition(ot,st),ht=!(dt!=null&&dt.target),ct=(dt==null?void 0:dt.target)??this.state.value,ut=this.state.value!==ct,ft=this.getStateNode(ct),mt={reenter:!ht&&!ut&&!(dt!=null&&dt.internal),transition:dt,stateNode:ft,target:ct,changed:ut};return this.log("NextState:",`[${st.type}]`,this.state.value,"---->",mt.target),mt}),__publicField$3(this,"getAfterActions",(ot,st)=>{let dt;const ht=this.state.value;return{entry:()=>{dt=globalThis.setTimeout(()=>{const ct=this.getNextStateInfo(ot,this.state.event);this.performStateChangeEffects(ht,ct,this.state.event)},st)},exit:()=>{globalThis.clearTimeout(dt)}}}),__publicField$3(this,"getDelayedEventActions",ot=>{const st=this.getStateNode(ot),dt=this.state.event;if(!st||!st.after)return;const ht=[],ct=[];if(isArray$6(st.after)){const ut=this.determineTransition(st.after,dt);if(!ut)return;if(!hasProp(ut,"delay"))throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(ut)}`);const gt=determineDelayFn(ut.delay,this.delayMap)(this.contextSnapshot,dt),mt=this.getAfterActions(ut,gt);return ht.push(mt.entry),ct.push(mt.exit),{entries:ht,exits:ct}}if(isObject$5(st.after))for(const ut in st.after){const ft=st.after[ut],mt=determineDelayFn(ut,this.delayMap)(this.contextSnapshot,dt),vt=this.getAfterActions(ft,mt);ht.push(vt.entry),ct.push(vt.exit)}return{entries:ht,exits:ct}}),__publicField$3(this,"executeActions",(ot,st)=>{var ht;const dt=determineActionsFn(ot,this.guardMap)(this.contextSnapshot,st,this.guardMeta);for(const ct of toArray(dt)){const ut=isString$3(ct)?(ht=this.actionMap)==null?void 0:ht[ct]:ct;warn(isString$3(ct)&&!ut,`[@zag-js/core > execute-actions] No implementation found for action: \`${ct}\``),ut==null||ut(this.state.context,st,this.meta)}}),__publicField$3(this,"executeActivities",(ot,st,dt)=>{var ht;for(const ct of st){const ut=isString$3(ct)?(ht=this.activityMap)==null?void 0:ht[ct]:ct;if(!ut){warn(`[@zag-js/core > execute-activity] No implementation found for activity: \`${ct}\``);continue}const ft=ut(this.state.context,ot,this.meta);if(ft){const gt=isString$3(ct)?ct:ct.name||uuid();this.addActivityCleanup(dt??this.state.value,gt,ft)}}}),__publicField$3(this,"createEveryActivities",(ot,st)=>{if(ot)if(isArray$6(ot)){const dt=toArray(ot).find(ft=>{const gt=ft.delay,vt=determineDelayFn(gt,this.delayMap)(this.contextSnapshot,this.state.event);return determineGuardFn(ft.guard,this.guardMap)(this.contextSnapshot,this.state.event,this.guardMeta)??vt!=null});if(!dt)return;const ct=determineDelayFn(dt.delay,this.delayMap)(this.contextSnapshot,this.state.event);st(()=>{const ft=globalThis.setInterval(()=>{this.executeActions(dt.actions,this.state.event)},ct);return()=>{globalThis.clearInterval(ft)}})}else for(const dt in ot){const ht=ot==null?void 0:ot[dt],ut=determineDelayFn(dt,this.delayMap)(this.contextSnapshot,this.state.event);st(()=>{const gt=globalThis.setInterval(()=>{this.executeActions(ht,this.state.event)},ut);return()=>{globalThis.clearInterval(gt)}})}}),__publicField$3(this,"setEvent",ot=>{this.state.previousEvent=this.state.event,this.state.event=ref$1(toEvent(ot))}),__publicField$3(this,"performExitEffects",(ot,st)=>{const dt=this.state.value;if(dt==="")return;const ht=ot?this.getStateNode(ot):void 0;this.stopActivities(dt);const ct=determineActionsFn(ht==null?void 0:ht.exit,this.guardMap)(this.contextSnapshot,st,this.guardMeta),ut=toArray(ct),ft=this.delayedEvents.get(dt);ft&&ut.push(...ft),this.executeActions(ut,st),this.delayedEvents.delete(dt)}),__publicField$3(this,"performEntryEffects",(ot,st)=>{const dt=this.getStateNode(ot),ht=toArray(dt==null?void 0:dt.activities);this.createEveryActivities(dt==null?void 0:dt.every,gt=>{ht.unshift(gt)}),ht.length>0&&this.executeActivities(st,ht);const ct=determineActionsFn(dt==null?void 0:dt.entry,this.guardMap)(this.contextSnapshot,st,this.guardMeta),ut=toArray(ct),ft=this.getDelayedEventActions(ot);dt!=null&&dt.after&&ft&&(this.delayedEvents.set(ot,ft==null?void 0:ft.exits),ut.push(...ft.entries)),this.executeActions(ut,st),(dt==null?void 0:dt.type)==="final"&&(this.state.done=!0,this.doneListeners.forEach(gt=>{gt(this.stateSnapshot)}),this.stop())}),__publicField$3(this,"performTransitionEffects",(ot,st)=>{const dt=this.determineTransition(ot,st);this.executeActions(dt==null?void 0:dt.actions,st)}),__publicField$3(this,"performStateChangeEffects",(ot,st,dt)=>{this.setEvent(dt);const ht=st.changed||st.reenter;ht&&this.performExitEffects(ot,dt),this.performTransitionEffects(st.transition,dt),this.setState(st.target),ht&&this.performEntryEffects(st.target,dt)}),__publicField$3(this,"determineTransition",(ot,st)=>{const dt=determineTransitionFn(ot,this.guardMap);return dt==null?void 0:dt(this.contextSnapshot,st,this.guardMeta)}),__publicField$3(this,"sendParent",ot=>{var dt;this.parent||invariant("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const st=toEvent(ot);(dt=this.parent)==null||dt.send(st)}),__publicField$3(this,"log",(...ot)=>{}),__publicField$3(this,"send",ot=>{const st=toEvent(ot);this.transition(this.state.value,st)}),__publicField$3(this,"transition",(ot,st)=>{var ft,gt;const dt=isString$3(ot)?this.getStateNode(ot):ot==null?void 0:ot.stateNode,ht=toEvent(st);if(!dt&&!this.config.on){const mt=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${ot}, \`event\`: ${ht.type}`;warn(mt);return}const ct=((ft=dt==null?void 0:dt.on)==null?void 0:ft[ht.type])??((gt=this.config.on)==null?void 0:gt[ht.type]),ut=this.getNextStateInfo(ct,ht);return this.performStateChangeEffects(this.state.value,ut,ht),ut.stateNode}),__publicField$3(this,"subscribe",ot=>(this.stateListeners.add(ot),this.status==="Running"&&ot(this.stateSnapshot),()=>{this.stateListeners.delete(ot)})),__publicField$3(this,"onDone",ot=>(this.doneListeners.add(ot),this)),__publicField$3(this,"onTransition",ot=>(this.stateListeners.add(ot),this.status==="Running"&&ot(this.stateSnapshot),this)),this.config=clone$6(_e),this.options=clone$6(_??{}),this.id=this.config.id??`machine-${uuid()}`,this.guardMap=((et=this.options)==null?void 0:et.guards)??{},this.actionMap=((tt=this.options)==null?void 0:tt.actions)??{},this.delayMap=((nt=this.options)==null?void 0:nt.delays)??{},this.activityMap=((it=this.options)==null?void 0:it.activities)??{},this.sync=((at=this.options)==null?void 0:at.sync)??!1,this.state=createProxy$1(this.config),this.initialContext=snapshot(this.state.context)}get stateSnapshot(){return cast(snapshot(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){const _e=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return _e.stateSnapshot},get initialContext(){return _e.initialContext},get initialState(){var _;return((_=_e.initialState)==null?void 0:_.target)??""}}}get meta(){var _e;return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:((_e=this.initialState)==null?void 0:_e.target)??"",getState:()=>this.stateSnapshot,getAction:_=>this.actionMap[_],getGuard:_=>this.guardMap[_]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}getHydrationState(){const _e=this.getState();return{value:_e.value,tags:_e.tags}}},createMachine=(_e,_)=>new Machine(_e,_),isMachine=_e=>_e instanceof Machine||(_e==null?void 0:_e.type)==="machine",clsx=(..._e)=>_e.map(_=>{var et;return(et=_==null?void 0:_.trim)==null?void 0:et.call(_)}).filter(Boolean).join(" "),CSS_REGEX=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,serialize=_e=>{const _={};let et;for(;et=CSS_REGEX.exec(_e);)_[et[1]]=et[2];return _},css$2=(_e,_)=>{if(isString$3(_e)){if(isString$3(_))return`${_e};${_}`;_e=serialize(_e)}else isString$3(_)&&(_=serialize(_));return Object.assign({},_e??{},_??{})};function mergeProps(..._e){let _={};for(let et of _e){for(let tt in _){if(tt.startsWith("on")&&typeof _[tt]=="function"&&typeof et[tt]=="function"){_[tt]=callAll(et[tt],_[tt]);continue}if(tt==="className"||tt==="class"){_[tt]=clsx(_[tt],et[tt]);continue}if(tt==="style"){_[tt]=css$2(_[tt],et[tt]);continue}_[tt]=et[tt]!==void 0?et[tt]:_[tt]}for(let tt in et)_[tt]===void 0&&(_[tt]=et[tt])}return _}function getRef(_e){var tt,nt;let _=(tt=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:tt.get,et=_&&"isReactWarning"in _&&_.isReactWarning;return et?_e.ref:(_=(nt=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:nt.get,et=_&&"isReactWarning"in _&&_.isReactWarning,et?_e.props.ref:_e.props.ref||_e.ref)}const withAsChild=_e=>{const _=reactExports.memo(reactExports.forwardRef((et,tt)=>{const{asChild:nt,children:it,...at}=et;if(!nt)return reactExports.createElement(_e,{...at,ref:tt},it);const ot=reactExports.Children.only(it);if(!reactExports.isValidElement(ot))return null;const st=getRef(ot);return reactExports.cloneElement(ot,{...mergeProps(at,ot.props),ref:tt?composeRefs(tt,st):st})}));return _.displayName=_e.displayName||_e.name,_},jsxFactory=()=>{const _e=new Map;return new Proxy(withAsChild,{apply(_,et,tt){return withAsChild(tt[0])},get(_,et){const tt=et;return _e.has(tt)||_e.set(tt,withAsChild(tt)),_e.get(tt)}})},ark=jsxFactory(),createSplitProps=()=>(_e,_)=>_.reduce((et,tt)=>{const[nt,it]=et,at=tt;return it[at]!==void 0&&(nt[at]=it[at]),delete it[at],[nt,it]},[{},{..._e}]),splitPresenceProps=_e=>createSplitProps()(_e,["immediate","lazyMount","onExitComplete","present","unmountOnExit"]);function createNormalizer(_e){return new Proxy({},{get(){return _e}})}var createProps$1=()=>_e=>Array.from(new Set(_e));function connect$9(_e,_,et){const tt=_e.matches("mounted","unmountSuspended");return{skip:!_e.context.initial&&tt,present:tt,setNode(nt){nt&&_({type:"NODE.SET",node:nt})},unmount(){_({type:"UNMOUNT"})}}}function machine$7(_e){return createMachine({initial:_e.present?"mounted":"unmounted",context:{node:null,styles:null,unmountAnimationName:null,prevAnimationName:null,present:!1,initial:!1,..._e},exit:["clearInitial","cleanupNode"],watch:{present:["setInitial","syncPresence"]},on:{"NODE.SET":{actions:["setNode","setStyles"]}},states:{mounted:{on:{UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]},"UNMOUNT.SUSPEND":"unmountSuspended"}},unmountSuspended:{activities:["trackAnimationEvents"],after:{ANIMATION_DURATION:{target:"unmounted",actions:["invokeOnExitComplete"]}},on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]}}},unmounted:{entry:["clearPrevAnimationName"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]}}}}},{delays:{ANIMATION_DURATION(_){var et,tt;return parseMs((et=_.styles)==null?void 0:et.animationDuration)+parseMs((tt=_.styles)==null?void 0:tt.animationDelay)+ANIMATION_TIMEOUT_MARGIN}},actions:{setInitial(_){_.initial=!0},clearInitial(_){_.initial=!1},cleanupNode(_){_.node=null,_.styles=null},invokeOnExitComplete(_){var et;(et=_.onExitComplete)==null||et.call(_)},setNode(_,et){_.node=ref$1(et.node)},setStyles(_,et){const tt=et.node.ownerDocument.defaultView||window;_.styles=ref$1(tt.getComputedStyle(et.node))},syncPresence(_,et,{send:tt}){var at;if(_.present){tt({type:"MOUNT",src:"presence.changed"});return}if(!_.present&&((at=_.node)==null?void 0:at.ownerDocument.visibilityState)==="hidden"){tt({type:"UNMOUNT",src:"visibilitychange"});return}const nt=getAnimationName(_.styles);(_.immediate?queueMicrotask:requestAnimationFrame)(()=>{var ot,st;_.unmountAnimationName=nt,nt==="none"||nt===_.prevAnimationName||((ot=_.styles)==null?void 0:ot.display)==="none"||((st=_.styles)==null?void 0:st.animationDuration)==="0s"?tt({type:"UNMOUNT",src:"presence.changed"}):tt({type:"UNMOUNT.SUSPEND"})})},setPrevAnimationName(_){(_.immediate?queueMicrotask:requestAnimationFrame)(()=>{_.prevAnimationName=getAnimationName(_.styles)})},clearPrevAnimationName(_){_.prevAnimationName=null}},activities:{trackAnimationEvents(_,et,{send:tt}){const nt=_.node;if(!nt)return;const it=ot=>{var dt,ht;(((ht=(dt=ot.composedPath)==null?void 0:dt.call(ot))==null?void 0:ht[0])??ot.target)===nt&&(_.prevAnimationName=getAnimationName(_.styles))},at=ot=>{var ht,ct;const st=getAnimationName(_.styles);(((ct=(ht=ot.composedPath)==null?void 0:ht.call(ot))==null?void 0:ct[0])??ot.target)===nt&&st===_.unmountAnimationName&&tt({type:"UNMOUNT",src:"animationend"})};return nt.addEventListener("animationstart",it),nt.addEventListener("animationcancel",at),nt.addEventListener("animationend",at),()=>{nt.removeEventListener("animationstart",it),nt.removeEventListener("animationcancel",at),nt.removeEventListener("animationend",at)}}}})}function getAnimationName(_e){return(_e==null?void 0:_e.animationName)||"none"}function parseMs(_e){return parseFloat(_e||"0")*1e3}var ANIMATION_TIMEOUT_MARGIN=16.667;createProps$1()(["onExitComplete","present","immediate"]);var normalizeProps=createNormalizer(_e=>_e),isArrayLike$1=_e=>(_e==null?void 0:_e.constructor.name)==="Array",isArrayEqual=(_e,_)=>{if(_e.length!==_.length)return!1;for(let et=0;et<_e.length;et++)if(!isEqual$2(_e[et],_[et]))return!1;return!0},isEqual$2=(_e,_)=>{if(Object.is(_e,_))return!0;if(_e==null&&_!=null||_e!=null&&_==null)return!1;if(typeof(_e==null?void 0:_e.isEqual)=="function"&&typeof(_==null?void 0:_.isEqual)=="function")return _e.isEqual(_);if(typeof _e=="function"&&typeof _=="function")return _e.toString()===_.toString();if(isArrayLike$1(_e)&&isArrayLike$1(_))return isArrayEqual(Array.from(_e),Array.from(_));if(typeof _e!="object"||typeof _!="object")return!1;const et=Object.keys(_??Object.create(null)),tt=et.length;for(let nt=0;nt<tt;nt++)if(!Reflect.has(_e,et[nt]))return!1;for(let nt=0;nt<tt;nt++){const it=et[nt];if(!isEqual$2(_e[it],_[it]))return!1}return!0},fnToString=Function.prototype.toString;fnToString.call(Object);function compact$1(_e){if(!isPlainObject(_e)||_e===void 0)return _e;const _=Reflect.ownKeys(_e).filter(tt=>typeof tt=="string"),et={};for(const tt of _){const nt=_e[tt];nt!==void 0&&(et[tt]=compact$1(nt))}return et}var isPlainObject=_e=>_e&&typeof _e=="object"&&_e.constructor===Object;function useUpdateEffect(_e,_){const et=reactExports.useRef(!1),tt=reactExports.useRef(!1);reactExports.useEffect(()=>{if(et.current&&tt.current)return _e();tt.current=!0},_),reactExports.useEffect(()=>(et.current=!0,()=>{et.current=!1}),[])}var targetCache=globalRef("__zag__targetCache",()=>new WeakMap);function useSnapshot(_e,_){const{actions:et,context:tt,sync:nt}=_??{},it=reactExports.useRef(void 0),at=reactExports.useRef(void 0),ot=reactExports.useSyncExternalStore(reactExports.useCallback(ct=>subscribe$1(_e.state,ct,nt),[nt]),()=>{const ct=snapshot(_e.state);try{if(it.current&&at.current&&!isChanged(it.current,ct,at.current,new WeakMap))return it.current}catch{}return ct},()=>snapshot(_e.state));_e.setOptions({actions:et});const st=reactExports.useMemo(()=>compact$1(tt??{}),[tt]);useUpdateEffect(()=>{const ct=Object.entries(st),ut=_e.contextSnapshot??{};ct.map(([mt,vt])=>({key:mt,curr:vt,prev:ut[mt],equal:isEqual$2(ut[mt],vt)})).every(({equal:mt})=>mt)||_e.setContext(st)},[st]);const dt=new WeakMap;reactExports.useEffect(()=>{it.current=ot,at.current=dt});const ht=reactExports.useMemo(()=>new WeakMap,[]);return createProxy$2(ot,dt,ht,targetCache)}function useActor(_e){return[useSnapshot(_e),_e.send]}function useConstant(_e){const _=reactExports.useRef(void 0);return _.current||(_.current={v:_e()}),_.current.v}var useSafeLayoutEffect$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useService(_e,_){const{state:et,context:tt}=_??{},nt=useConstant(()=>{const at=typeof _e=="function"?_e():_e;return tt&&at.setContext(tt),at._created(),at}),it=reactExports.useRef(void 0);return useSafeLayoutEffect$1(()=>{const at=et??it.current;return nt.start(at),()=>{nt.stop()}},[]),nt}function useMachine(_e,_){const et=useService(_e,_);return[useSnapshot(et,_),et.send,et]}function useEvent(_e,_={}){const{sync:et=!1}=_,tt=useLatestRef(_e);return reactExports.useCallback((...nt)=>{var it;return et?queueMicrotask(()=>{var at;return(at=tt.current)==null?void 0:at.call(tt,...nt)}):(it=tt.current)==null?void 0:it.call(tt,...nt)},[et,tt])}function useLatestRef(_e){const _=reactExports.useRef(_e);return _.current=_e,_}const usePresence=_e=>{const{lazyMount:_,unmountOnExit:et,present:tt,...nt}=_e,it=reactExports.useRef(!1),at={...nt,present:tt,onExitComplete:useEvent(_e.onExitComplete)},[ot,st]=useMachine(machine$7(at),{context:at}),dt=connect$9(ot,st);dt.present&&(it.current=!0);const ht=!dt.present&&!it.current&&_||et&&!dt.present&&it.current,ct=()=>({"data-state":tt?"open":"closed",hidden:!dt.present});return{ref:dt.setNode,getPresenceProps:ct,present:dt.present,unmounted:ht}},[PresenceProvider,usePresenceContext]=createContext$1({name:"PresenceContext",hookName:"usePresenceContext",providerName:"<PresenceProvider />"});function useCallbackRef(_e,_=[]){const et=reactExports.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return reactExports.useInsertionEffect(()=>{et.current=_e}),reactExports.useCallback((...tt)=>{var nt;return(nt=et.current)==null?void 0:nt.call(et,...tt)},_)}function useDisclosure(_e={}){const{onClose:_,onOpen:et,open:tt}=_e,nt=useCallbackRef(et),it=useCallbackRef(_),[at,ot]=reactExports.useState(_e.defaultOpen||!1),st=tt!==void 0?tt:at,dt=tt!==void 0,ht=reactExports.useCallback(()=>{dt||ot(!1),it==null||it()},[dt,it]),ct=reactExports.useCallback(()=>{dt||ot(!0),nt==null||nt()},[dt,nt]),ut=reactExports.useCallback(()=>{st?ht():ct()},[st,ct,ht]);return{open:st,onOpen:ct,onClose:ht,onToggle:ut}}const colorMix=(_e,_)=>{var st;if(!_e||typeof _e!="string")return{invalid:!0,value:_e};const[et,tt]=_e.split("/");if(!et||!tt||et==="currentBg")return{invalid:!0,value:et};const nt=_(`colors.${et}`),it=(st=_.raw(`opacity.${tt}`))==null?void 0:st.value;if(!it&&isNaN(Number(tt)))return{invalid:!0,value:et};const at=it?Number(it)*100+"%":`${tt}%`,ot=nt??et;return{invalid:!1,color:ot,value:`color-mix(in srgb, ${ot} ${at}, transparent)`}},createColorMixTransform=_e=>(_,et)=>{const tt=et.utils.colorMix(_);if(tt.invalid)return{[_e]:_};const nt="--mix-"+_e;return{[nt]:tt.value,[_e]:`var(${nt}, ${tt.color})`}};function clone$5(_e){if(_e===null||typeof _e!="object")return _e;if(Array.isArray(_e))return _e.map(et=>clone$5(et));const _=Object.create(Object.getPrototypeOf(_e));for(const et of Object.keys(_e))_[et]=clone$5(_e[et]);return _}function merge$3(_e,_){if(_==null)return _e;for(const et of Object.keys(_))if(!(_[et]===void 0||et==="__proto__"))if(!isObject$9(_e[et])&&isObject$9(_[et]))Object.assign(_e,{[et]:_[et]});else if(_e[et]&&isObject$9(_[et]))merge$3(_e[et],_[et]);else if(Array.isArray(_[et])&&Array.isArray(_e[et])){let tt=0;for(;tt<_[et].length;tt++)isObject$9(_e[et][tt])&&isObject$9(_[et][tt])?merge$3(_e[et][tt],_[et][tt]):_e[et][tt]=_[et][tt]}else Object.assign(_e,{[et]:_[et]});return _e}function mergeWith$1(_e,..._){for(const et of _)merge$3(_e,et);return _e}const defineConditions=_e=>_e,defineRecipe=_e=>_e,defineSlotRecipe=_e=>_e,defineKeyframes=_e=>_e,defineGlobalStyles=_e=>_e,defineStyle=_e=>_e,defineTextStyles=_e=>_e,defineAnimationStyles=_e=>_e,defineLayerStyles=_e=>_e;function createProxy(){const _e=_=>_;return new Proxy(_e,{get(){return _e}})}const defineTokens=createProxy(),defineSemanticTokens=createProxy(),defineConfig=_e=>_e,mergeConfigs=(..._e)=>mergeWith$1({},..._e.map(clone$5)),escRegex=/[^a-zA-Z0-9_\u0081-\uffff-]/g;function esc$1(_e){return`${_e}`.replace(escRegex,_=>`\\${_}`)}const dashCaseRegex=/[A-Z]/g;function dashCase(_e){return _e.replace(dashCaseRegex,_=>`-${_.toLowerCase()}`)}function cssVar(_e,_={}){const{fallback:et="",prefix:tt=""}=_,nt=dashCase(["-",tt,esc$1(_e)].filter(Boolean).join("-"));return{var:nt,ref:`var(${nt}${et?`, ${et}`:""})`}}const isCssVar$1=_e=>/^var\(--.+\)$/.test(_e),wrap$2=(_e,_)=>_!=null?`${_e}(${_})`:_,deg=_e=>{if(isCssVar$1(_e)||_e==null)return _e;const _=typeof _e=="string"&&!_e.endsWith("deg");return typeof _e=="number"||_?`${_e}deg`:_e},createFocusRing=_e=>({values:["outside","inside","mixed","none"],transform(_,{token:et}){const tt=et("colors.colorPalette.focusRing");return{inside:{"--focus-ring-color":tt,[_e]:{outlineOffset:"0px",outlineWidth:"var(--focus-ring-width, 1px)",outlineColor:"var(--focus-ring-color)",outlineStyle:"var(--focus-ring-style, solid)",borderColor:"var(--focus-ring-color)"}},outside:{"--focus-ring-color":tt,[_e]:{outlineWidth:"var(--focus-ring-width, 2px)",outlineOffset:"var(--focus-ring-offset, 2px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"var(--focus-ring-color)"}},mixed:{"--focus-ring-color":tt,[_e]:{outlineWidth:"var(--focus-ring-width, 3px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"color-mix(in srgb, var(--focus-ring-color), transparent 60%)",borderColor:"var(--focus-ring-color)"}},none:{"--focus-ring-color":tt,[_e]:{outline:"none"}}}[_]??{}}}),divideColor=createColorMixTransform("borderColor"),createTransition=_e=>({transition:_e,transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"}),defaultConditions=defineConditions({hover:["@media (hover: hover)","&:is(:hover, [data-hover]):not(:disabled, [data-disabled])"],active:"&:is(:active, [data-active]):not(:disabled, [data-disabled], [data-state=open])",focus:"&:is(:focus, [data-focus])",focusWithin:"&:is(:focus-within, [data-focus-within])",focusVisible:"&:is(:focus-visible, [data-focus-visible])",disabled:"&:is(:disabled, [disabled], [data-disabled], [aria-disabled=true])",visited:"&:visited",target:"&:target",readOnly:"&:is([data-readonly], [aria-readonly=true], [readonly])",readWrite:"&:read-write",empty:"&:is(:empty, [data-empty])",checked:"&:is(:checked, [data-checked], [aria-checked=true], [data-state=checked])",enabled:"&:enabled",expanded:"&:is([aria-expanded=true], [data-expanded], [data-state=expanded])",highlighted:"&[data-highlighted]",complete:"&[data-complete]",incomplete:"&[data-incomplete]",dragging:"&[data-dragging]",before:"&::before",after:"&::after",firstLetter:"&::first-letter",firstLine:"&::first-line",marker:"&::marker",selection:"&::selection",file:"&::file-selector-button",backdrop:"&::backdrop",first:"&:first-of-type",last:"&:last-of-type",notFirst:"&:not(:first-of-type)",notLast:"&:not(:last-of-type)",only:"&:only-child",even:"&:nth-of-type(even)",odd:"&:nth-of-type(odd)",peerFocus:".peer:is(:focus, [data-focus]) ~ &",peerHover:".peer:is(:hover, [data-hover]):not(:disabled, [data-disabled]) ~ &",peerActive:".peer:is(:active, [data-active]):not(:disabled, [data-disabled]) ~ &",peerFocusWithin:".peer:focus-within ~ &",peerFocusVisible:".peer:is(:focus-visible, [data-focus-visible]) ~ &",peerDisabled:".peer:is(:disabled, [disabled], [data-disabled]) ~ &",peerChecked:".peer:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) ~ &",peerInvalid:".peer:is(:invalid, [data-invalid], [aria-invalid=true]) ~ &",peerExpanded:".peer:is([aria-expanded=true], [data-expanded], [data-state=expanded]) ~ &",peerPlaceholderShown:".peer:placeholder-shown ~ &",groupFocus:".group:is(:focus, [data-focus]) &",groupHover:".group:is(:hover, [data-hover]):not(:disabled, [data-disabled]) &",groupActive:".group:is(:active, [data-active]):not(:disabled, [data-disabled]) &",groupFocusWithin:".group:focus-within &",groupFocusVisible:".group:is(:focus-visible, [data-focus-visible]) &",groupDisabled:".group:is(:disabled, [disabled], [data-disabled]) &",groupChecked:".group:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) &",groupExpanded:".group:is([aria-expanded=true], [data-expanded], [data-state=expanded]) &",groupInvalid:".group:invalid &",indeterminate:"&:is(:indeterminate, [data-indeterminate], [aria-checked=mixed], [data-state=indeterminate])",required:"&:is([data-required], [aria-required=true])",valid:"&:is([data-valid], [data-state=valid])",invalid:"&:is([data-invalid], [aria-invalid=true], [data-state=invalid])",autofill:"&:autofill",inRange:"&:is(:in-range, [data-in-range])",outOfRange:"&:is(:out-of-range, [data-outside-range])",placeholder:"&::placeholder, &[data-placeholder]",placeholderShown:"&:is(:placeholder-shown, [data-placeholder-shown])",pressed:"&:is([aria-pressed=true], [data-pressed])",selected:"&:is([aria-selected=true], [data-selected])",grabbed:"&:is([aria-grabbed=true], [data-grabbed])",underValue:"&[data-state=under-value]",overValue:"&[data-state=over-value]",atValue:"&[data-state=at-value]",default:"&:default",optional:"&:optional",open:"&:is([open], [data-open], [data-state=open])",closed:"&:is([closed], [data-closed], [data-state=closed])",fullscreen:"&is(:fullscreen, [data-fullscreen])",loading:"&:is([data-loading], [aria-busy=true])",hidden:"&:is([hidden], [data-hidden])",current:"&[data-current]",currentPage:"&[aria-current=page]",currentStep:"&[aria-current=step]",today:"&[data-today]",unavailable:"&[data-unavailable]",rangeStart:"&[data-range-start]",rangeEnd:"&[data-range-end]",now:"&[data-now]",topmost:"&[data-topmost]",motionReduce:"@media (prefers-reduced-motion: reduce)",motionSafe:"@media (prefers-reduced-motion: no-preference)",print:"@media print",landscape:"@media (orientation: landscape)",portrait:"@media (orientation: portrait)",dark:".dark &, .dark .chakra-theme:not(.light) &",light:":root &, .light &",osDark:"@media (prefers-color-scheme: dark)",osLight:"@media (prefers-color-scheme: light)",highContrast:"@media (forced-colors: active)",lessContrast:"@media (prefers-contrast: less)",moreContrast:"@media (prefers-contrast: more)",ltr:"[dir=ltr] &",rtl:"[dir=rtl] &",scrollbar:"&::-webkit-scrollbar",scrollbarThumb:"&::-webkit-scrollbar-thumb",scrollbarTrack:"&::-webkit-scrollbar-track",horizontal:"&[data-orientation=horizontal]",vertical:"&[data-orientation=vertical]",icon:"& :where(svg)",starting:"@starting-style"}),currentBgVar=cssVar("bg-currentcolor"),isCurrentBgVar=_e=>_e===currentBgVar.ref||_e==="currentBg",colorValues=_e=>({..._e("colors"),currentBg:currentBgVar}),defaultBaseConfig=defineConfig({conditions:defaultConditions,utilities:{background:{values:colorValues,shorthand:["bg"],transform(_e,_){if(isCurrentBgVar(_.raw))return{background:currentBgVar.ref};const et=createColorMixTransform("background")(_e,_);return{...et,[currentBgVar.var]:et==null?void 0:et.background}}},backgroundColor:{values:colorValues,shorthand:["bgColor"],transform(_e,_){if(isCurrentBgVar(_.raw))return{backgroundColor:currentBgVar.ref};const et=createColorMixTransform("backgroundColor")(_e,_);return{...et,[currentBgVar.var]:et==null?void 0:et.backgroundColor}}},backgroundSize:{shorthand:["bgSize"]},backgroundPosition:{shorthand:["bgPos"]},backgroundRepeat:{shorthand:["bgRepeat"]},backgroundAttachment:{shorthand:["bgAttachment"]},backgroundClip:{shorthand:["bgClip"],values:["text"],transform(_e){return _e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:_e}}},backgroundGradient:{shorthand:["bgGradient"],values(_e){return{..._e("gradients"),"to-t":"linear-gradient(to top, var(--gradient))","to-tr":"linear-gradient(to top right, var(--gradient))","to-r":"linear-gradient(to right, var(--gradient))","to-br":"linear-gradient(to bottom right, var(--gradient))","to-b":"linear-gradient(to bottom, var(--gradient))","to-bl":"linear-gradient(to bottom left, var(--gradient))","to-l":"linear-gradient(to left, var(--gradient))","to-tl":"linear-gradient(to top left, var(--gradient))"}},transform(_e){return{"--gradient-stops":"var(--gradient-from), var(--gradient-to)","--gradient":"var(--gradient-via-stops, var(--gradient-stops))",backgroundImage:_e}}},gradientFrom:{values:colorValues,transform:createColorMixTransform("--gradient-from")},gradientTo:{values:colorValues,transform:createColorMixTransform("--gradient-to")},gradientVia:{values:colorValues,transform(_e,_){return{...createColorMixTransform("--gradient-via")(_e,_),"--gradient-via-stops":"var(--gradient-from), var(--gradient-via), var(--gradient-to)"}}},backgroundImage:{values:"gradients",shorthand:["bgImg","bgImage"]},border:{values:"borders"},borderTop:{values:"borders"},borderLeft:{values:"borders"},borderBlockStart:{values:"borders"},borderRight:{values:"borders"},borderInlineEnd:{values:"borders"},borderBottom:{values:"borders"},borderBlockEnd:{values:"borders"},borderInlineStart:{values:"borders",shorthand:["borderStart"]},borderInline:{values:"borders",shorthand:["borderX"]},borderBlock:{values:"borders",shorthand:["borderY"]},borderColor:{values:colorValues,transform:createColorMixTransform("borderColor")},borderTopColor:{values:colorValues,transform:createColorMixTransform("borderTopColor")},borderBlockStartColor:{values:colorValues,transform:createColorMixTransform("borderBlockStartColor")},borderBottomColor:{values:colorValues,transform:createColorMixTransform("borderBottomColor")},borderBlockEndColor:{values:colorValues,transform:createColorMixTransform("borderBlockEndColor")},borderLeftColor:{values:colorValues,transform:createColorMixTransform("borderLeftColor")},borderInlineStartColor:{values:colorValues,shorthand:["borderStartColor"],transform:createColorMixTransform("borderInlineStartColor")},borderRightColor:{values:colorValues,transform:createColorMixTransform("borderRightColor")},borderInlineEndColor:{values:colorValues,shorthand:["borderEndColor"],transform:createColorMixTransform("borderInlineEndColor")},borderStyle:{values:"borderStyles"},borderTopStyle:{values:"borderStyles"},borderBlockStartStyle:{values:"borderStyles"},borderBottomStyle:{values:"borderStyles"},borderBlockEndStyle:{values:"borderStyles"},borderInlineStartStyle:{values:"borderStyles",shorthand:["borderStartStyle"]},borderInlineEndStyle:{values:"borderStyles",shorthand:["borderEndStyle"]},borderLeftStyle:{values:"borderStyles"},borderRightStyle:{values:"borderStyles"},borderRadius:{values:"radii",shorthand:["rounded"]},borderTopLeftRadius:{values:"radii",shorthand:["roundedTopLeft"]},borderStartStartRadius:{values:"radii",shorthand:["roundedStartStart","borderTopStartRadius"]},borderEndStartRadius:{values:"radii",shorthand:["roundedEndStart","borderBottomStartRadius"]},borderTopRightRadius:{values:"radii",shorthand:["roundedTopRight"]},borderStartEndRadius:{values:"radii",shorthand:["roundedStartEnd","borderTopEndRadius"]},borderEndEndRadius:{values:"radii",shorthand:["roundedEndEnd","borderBottomEndRadius"]},borderBottomLeftRadius:{values:"radii",shorthand:["roundedBottomLeft"]},borderBottomRightRadius:{values:"radii",shorthand:["roundedBottomRight"]},borderInlineStartRadius:{values:"radii",property:"borderRadius",shorthand:["roundedStart","borderStartRadius"],transform:_e=>({borderStartStartRadius:_e,borderEndStartRadius:_e})},borderInlineEndRadius:{values:"radii",property:"borderRadius",shorthand:["roundedEnd","borderEndRadius"],transform:_e=>({borderStartEndRadius:_e,borderEndEndRadius:_e})},borderTopRadius:{values:"radii",property:"borderRadius",shorthand:["roundedTop"],transform:_e=>({borderTopLeftRadius:_e,borderTopRightRadius:_e})},borderBottomRadius:{values:"radii",property:"borderRadius",shorthand:["roundedBottom"],transform:_e=>({borderBottomLeftRadius:_e,borderBottomRightRadius:_e})},borderLeftRadius:{values:"radii",property:"borderRadius",shorthand:["roundedLeft"],transform:_e=>({borderTopLeftRadius:_e,borderBottomLeftRadius:_e})},borderRightRadius:{values:"radii",property:"borderRadius",shorthand:["roundedRight"],transform:_e=>({borderTopRightRadius:_e,borderBottomRightRadius:_e})},borderWidth:{values:"borderWidths"},borderBlockStartWidth:{values:"borderWidths"},borderTopWidth:{values:"borderWidths"},borderBottomWidth:{values:"borderWidths"},borderBlockEndWidth:{values:"borderWidths"},borderRightWidth:{values:"borderWidths"},borderInlineWidth:{values:"borderWidths",shorthand:["borderXWidth"]},borderInlineStartWidth:{values:"borderWidths",shorthand:["borderStartWidth"]},borderInlineEndWidth:{values:"borderWidths",shorthand:["borderEndWidth"]},borderLeftWidth:{values:"borderWidths"},borderBlockWidth:{values:"borderWidths",shorthand:["borderYWidth"]},color:{values:colorValues,transform:createColorMixTransform("color")},fill:{values:colorValues,transform:createColorMixTransform("fill")},stroke:{values:colorValues,transform:createColorMixTransform("stroke")},accentColor:{values:colorValues,transform:createColorMixTransform("accentColor")},divideX:{values:{type:"string"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderInlineStartWidth:_e,borderInlineEndWidth:"0px"}}}},divideY:{values:{type:"string"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderTopWidth:_e,borderBottomWidth:"0px"}}}},divideColor:{values:colorValues,transform(_e,_){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":divideColor(_e,_)}}},divideStyle:{property:"borderStyle",transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderStyle:_e}}}},boxShadow:{values:"shadows",shorthand:["shadow"]},boxShadowColor:{values:colorValues,transform:createColorMixTransform("--shadow-color"),shorthand:["shadowColor"]},mixBlendMode:{shorthand:["blendMode"]},backgroundBlendMode:{shorthand:["bgBlendMode"]},opacity:{values:"opacity"},filter:{transform(_e){return _e!=="auto"?{filter:_e}:{filter:"var(--blur) var(--brightness) var(--contrast) var(--grayscale) var(--hue-rotate) var(--invert) var(--saturate) var(--sepia) var(--drop-shadow)"}}},blur:{values:"blurs",transform:_e=>({"--blur":wrap$2("blur",_e)})},brightness:{transform:_e=>({"--brightness":wrap$2("brightness",_e)})},contrast:{transform:_e=>({"--contrast":wrap$2("contrast",_e)})},grayscale:{transform:_e=>({"--grayscale":wrap$2("grayscale",_e)})},hueRotate:{transform:_e=>({"--hue-rotate":wrap$2("hue-rotate",deg(_e))})},invert:{transform:_e=>({"--invert":wrap$2("invert",_e)})},saturate:{transform:_e=>({"--saturate":wrap$2("saturate",_e)})},sepia:{transform:_e=>({"--sepia":wrap$2("sepia",_e)})},dropShadow:{transform:_e=>({"--drop-shadow":wrap$2("drop-shadow",_e)})},backdropFilter:{transform(_e){return _e!=="auto"?{backdropFilter:_e}:{backdropFilter:"var(--backdrop-blur) var(--backdrop-brightness) var(--backdrop-contrast) var(--backdrop-grayscale) var(--backdrop-hue-rotate) var(--backdrop-invert) var(--backdrop-opacity) var(--backdrop-saturate) var(--backdrop-sepia)"}}},backdropBlur:{values:"blurs",transform:_e=>({"--backdrop-blur":wrap$2("blur",_e)})},backdropBrightness:{transform:_e=>({"--backdrop-brightness":wrap$2("brightness",_e)})},backdropContrast:{transform:_e=>({"--backdrop-contrast":wrap$2("contrast",_e)})},backdropGrayscale:{transform:_e=>({"--backdrop-grayscale":wrap$2("grayscale",_e)})},backdropHueRotate:{transform:_e=>({"--backdrop-hue-rotate":wrap$2("hue-rotate",deg(_e))})},backdropInvert:{transform:_e=>({"--backdrop-invert":wrap$2("invert",_e)})},backdropOpacity:{transform:_e=>({"--backdrop-opacity":wrap$2("opacity",_e)})},backdropSaturate:{transform:_e=>({"--backdrop-saturate":wrap$2("saturate",_e)})},backdropSepia:{transform:_e=>({"--backdrop-sepia":wrap$2("sepia",_e)})},flexBasis:{values:"sizes"},gap:{values:"spacing"},rowGap:{values:"spacing",shorthand:["gapY"]},columnGap:{values:"spacing",shorthand:["gapX"]},flexDirection:{shorthand:["flexDir"]},gridGap:{values:"spacing"},gridColumnGap:{values:"spacing"},gridRowGap:{values:"spacing"},outlineColor:{values:colorValues,transform:createColorMixTransform("outlineColor")},focusRing:createFocusRing("&:is(:focus, [data-focus])"),focusVisibleRing:createFocusRing("&:is(:focus-visible, [data-focus-visible])"),focusRingColor:{values:colorValues,transform:createColorMixTransform("--focus-ring-color")},focusRingOffset:{values:"spacing",transform:_e=>({"--focus-ring-offset":_e})},focusRingWidth:{values:"borderWidths",property:"outlineWidth",transform:_e=>({"--focus-ring-width":_e})},focusRingStyle:{values:"borderStyles",property:"outlineStyle",transform:_e=>({"--focus-ring-style":_e})},aspectRatio:{values:"aspectRatios"},width:{values:"sizes",shorthand:["w"]},inlineSize:{values:"sizes"},height:{values:"sizes",shorthand:["h"]},blockSize:{values:"sizes"},boxSize:{values:"sizes",property:"width",transform:_e=>({width:_e,height:_e})},minWidth:{values:"sizes",shorthand:["minW"]},minInlineSize:{values:"sizes"},minHeight:{values:"sizes",shorthand:["minH"]},minBlockSize:{values:"sizes"},maxWidth:{values:"sizes",shorthand:["maxW"]},maxInlineSize:{values:"sizes"},maxHeight:{values:"sizes",shorthand:["maxH"]},maxBlockSize:{values:"sizes"},hideFrom:{values:"breakpoints",transform:(_e,{raw:_,token:et})=>({[et.raw(`breakpoints.${_}`)?`@breakpoint ${_}`:`@media screen and (min-width: ${_e})`]:{display:"none"}})},hideBelow:{values:"breakpoints",transform(_e,{raw:_,token:et}){return{[et.raw(`breakpoints.${_}`)?`@breakpoint ${_}Down`:`@media screen and (max-width: ${_e})`]:{display:"none"}}}},overscrollBehavior:{shorthand:["overscroll"]},overscrollBehaviorX:{shorthand:["overscrollX"]},overscrollBehaviorY:{shorthand:["overscrollY"]},scrollbar:{values:["visible","hidden"],transform(_e){switch(_e){case"visible":return{msOverflowStyle:"auto",scrollbarWidth:"auto","&::-webkit-scrollbar":{display:"block"}};case"hidden":return{msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}};default:return{}}}},scrollbarColor:{values:colorValues,transform:createColorMixTransform("scrollbarColor")},scrollbarGutter:{values:"spacing"},scrollbarWidth:{values:"sizes"},scrollMargin:{values:"spacing"},scrollMarginTop:{values:"spacing"},scrollMarginBottom:{values:"spacing"},scrollMarginLeft:{values:"spacing"},scrollMarginRight:{values:"spacing"},scrollMarginX:{values:"spacing",transform:_e=>({scrollMarginLeft:_e,scrollMarginRight:_e})},scrollMarginY:{values:"spacing",transform:_e=>({scrollMarginTop:_e,scrollMarginBottom:_e})},scrollPadding:{values:"spacing"},scrollPaddingTop:{values:"spacing"},scrollPaddingBottom:{values:"spacing"},scrollPaddingLeft:{values:"spacing"},scrollPaddingRight:{values:"spacing"},scrollPaddingInline:{values:"spacing",shorthand:["scrollPaddingX"]},scrollPaddingBlock:{values:"spacing",shorthand:["scrollPaddingY"]},scrollSnapType:{values:{none:"none",x:"x var(--scroll-snap-strictness)",y:"y var(--scroll-snap-strictness)",both:"both var(--scroll-snap-strictness)"}},scrollSnapStrictness:{values:["mandatory","proximity"],transform:_e=>({"--scroll-snap-strictness":_e})},scrollSnapMargin:{values:"spacing"},scrollSnapMarginTop:{values:"spacing"},scrollSnapMarginBottom:{values:"spacing"},scrollSnapMarginLeft:{values:"spacing"},scrollSnapMarginRight:{values:"spacing"},listStylePosition:{shorthand:["listStylePos"]},listStyleImage:{shorthand:["listStyleImg"]},position:{shorthand:["pos"]},zIndex:{values:"zIndex"},inset:{values:"spacing"},insetInline:{values:"spacing",shorthand:["insetX"]},insetBlock:{values:"spacing",shorthand:["insetY"]},top:{values:"spacing"},insetBlockStart:{values:"spacing"},bottom:{values:"spacing"},insetBlockEnd:{values:"spacing"},left:{values:"spacing"},right:{values:"spacing"},insetInlineStart:{values:"spacing",shorthand:["insetStart"]},insetInlineEnd:{values:"spacing",shorthand:["insetEnd"]},ring:{transform(_e){return{"--ring-offset-shadow":"var(--ring-inset) 0 0 0 var(--ring-offset-width) var(--ring-offset-color)","--ring-shadow":"var(--ring-inset) 0 0 0 calc(var(--ring-width) + var(--ring-offset-width)) var(--ring-color)","--ring-width":_e,boxShadow:"var(--ring-offset-shadow), var(--ring-shadow), var(--shadow, 0 0 #0000)"}}},ringColor:{values:colorValues,transform:createColorMixTransform("--ring-color")},ringOffset:{transform:_e=>({"--ring-offset-width":_e})},ringOffsetColor:{values:colorValues,transform:createColorMixTransform("--ring-offset-color")},ringInset:{transform:_e=>({"--ring-inset":_e})},margin:{values:"spacing",shorthand:["m"]},marginTop:{values:"spacing",shorthand:["mt"]},marginBlockStart:{values:"spacing",shorthand:["mt"]},marginRight:{values:"spacing",shorthand:["mr"]},marginBottom:{values:"spacing",shorthand:["mb"]},marginBlockEnd:{values:"spacing"},marginLeft:{values:"spacing",shorthand:["ml"]},marginInlineStart:{values:"spacing",shorthand:["ms","marginStart"]},marginInlineEnd:{values:"spacing",shorthand:["me","marginEnd"]},marginInline:{values:"spacing",shorthand:["mx","marginX"]},marginBlock:{values:"spacing",shorthand:["my","marginY"]},padding:{values:"spacing",shorthand:["p"]},paddingTop:{values:"spacing",shorthand:["pt"]},paddingRight:{values:"spacing",shorthand:["pr"]},paddingBottom:{values:"spacing",shorthand:["pb"]},paddingBlockStart:{values:"spacing"},paddingBlockEnd:{values:"spacing"},paddingLeft:{values:"spacing",shorthand:["pl"]},paddingInlineStart:{values:"spacing",shorthand:["ps","paddingStart"]},paddingInlineEnd:{values:"spacing",shorthand:["pe","paddingEnd"]},paddingInline:{values:"spacing",shorthand:["px","paddingX"]},paddingBlock:{values:"spacing",shorthand:["py","paddingY"]},textDecoration:{shorthand:["textDecor"]},textDecorationColor:{values:colorValues,transform:createColorMixTransform("textDecorationColor")},textShadow:{values:"shadows"},transform:{transform:_e=>{let _=_e;return _e==="auto"&&(_="translateX(var(--translate-x, 0)) translateY(var(--translate-y, 0)) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),_e==="auto-gpu"&&(_="translate3d(var(--translate-x, 0), var(--translate-y, 0), 0) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),{transform:_}}},skewX:{transform:_e=>({"--skew-x":deg(_e)})},skewY:{transform:_e=>({"--skew-y":deg(_e)})},scaleX:{transform:_e=>({"--scale-x":_e})},scaleY:{transform:_e=>({"--scale-y":_e})},scale:{transform(_e){return _e!=="auto"?{scale:_e}:{scale:"var(--scale-x, 1) var(--scale-y, 1)"}}},spaceXReverse:{values:{type:"boolean"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":_e?"1":void 0}}}},spaceX:{property:"marginInlineStart",values:"spacing",transform:_e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":"0",marginInlineStart:`calc(${_e} * calc(1 - var(--space-x-reverse)))`,marginInlineEnd:`calc(${_e} * var(--space-x-reverse))`}})},spaceYReverse:{values:{type:"boolean"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":_e?"1":void 0}}}},spaceY:{property:"marginTop",values:"spacing",transform:_e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":"0",marginTop:`calc(${_e} * calc(1 - var(--space-y-reverse)))`,marginBottom:`calc(${_e} * var(--space-y-reverse))`}})},rotate:{transform(_e){return _e!=="auto"?{rotate:deg(_e)}:{rotate:"var(--rotate-x, 0) var(--rotate-y, 0) var(--rotate-z, 0)"}}},rotateX:{transform(_e){return{"--rotate-x":deg(_e)}}},rotateY:{transform(_e){return{"--rotate-y":deg(_e)}}},translate:{transform(_e){return _e!=="auto"?{translate:_e}:{translate:"var(--translate-x) var(--translate-y)"}}},translateX:{values:"spacing",transform:_e=>({"--translate-x":_e})},translateY:{values:"spacing",transform:_e=>({"--translate-y":_e})},transition:{values:["all","common","colors","opacity","position","backgrounds","size","shadow","transform"],transform(_e){switch(_e){case"all":return createTransition("all");case"position":return createTransition("left, right, top, bottom, inset-inline, inset-block");case"colors":return createTransition("color, background-color, border-color, text-decoration-color, fill, stroke");case"opacity":return createTransition("opacity");case"shadow":return createTransition("box-shadow");case"transform":return createTransition("transform");case"size":return createTransition("width, height");case"backgrounds":return createTransition("background, background-color, background-image, background-position");case"common":return createTransition("color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter");default:return{transition:_e}}}},transitionDuration:{values:"durations"},transitionProperty:{values:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, translate, transform",colors:"background-color, border-color, color, fill, stroke",size:"width, height",position:"left, right, top, bottom, inset-inline, inset-block",background:"background, background-color, background-image, background-position"}},transitionTimingFunction:{values:"easings"},animation:{values:"animations"},animationDuration:{values:"durations"},animationDelay:{values:"durations"},animationTimingFunction:{values:"easings"},fontFamily:{values:"fonts"},fontSize:{values:"fontSizes"},fontWeight:{values:"fontWeights"},lineHeight:{values:"lineHeights"},letterSpacing:{values:"letterSpacings"},textIndent:{values:"spacing"},truncate:{values:{type:"boolean"},transform(_e){return _e===!0?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:{}}},lineClamp:{transform(_e){return _e==="none"?{WebkitLineClamp:"unset"}:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:_e,WebkitBoxOrient:"vertical",textWrap:"wrap"}}},srOnly:{values:{type:"boolean"},transform(_e){return srMapping[_e]||{}}},debug:{values:{type:"boolean"},transform(_e){return _e?{outline:"1px solid blue !important","& > *":{outline:"1px solid red !important"}}:{}}},caretColor:{values:colorValues,transform:createColorMixTransform("caretColor")},cursor:{values:"cursor"}}}),srMapping={true:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},false:{position:"static",width:"auto",height:"auto",padding:"0",margin:"0",overflow:"visible",clip:"auto",whiteSpace:"normal"}};var userGeneratedStr="",userGenerated=userGeneratedStr.split(","),cssPropertiesStr="WebkitAppearance,WebkitBorderBefore,WebkitBorderBeforeColor,WebkitBorderBeforeStyle,WebkitBorderBeforeWidth,WebkitBoxReflect,WebkitLineClamp,WebkitMask,WebkitMaskAttachment,WebkitMaskClip,WebkitMaskComposite,WebkitMaskImage,WebkitMaskOrigin,WebkitMaskPosition,WebkitMaskPositionX,WebkitMaskPositionY,WebkitMaskRepeat,WebkitMaskRepeatX,WebkitMaskRepeatY,WebkitMaskSize,WebkitOverflowScrolling,WebkitTapHighlightColor,WebkitTextFillColor,WebkitTextStroke,WebkitTextStrokeColor,WebkitTextStrokeWidth,WebkitTouchCallout,WebkitUserModify,accentColor,alignContent,alignItems,alignSelf,alignTracks,all,animation,animationComposition,animationDelay,animationDirection,animationDuration,animationFillMode,animationIterationCount,animationName,animationPlayState,animationRange,animationRangeEnd,animationRangeStart,animationTimingFunction,animationTimeline,appearance,aspectRatio,azimuth,backdropFilter,backfaceVisibility,background,backgroundAttachment,backgroundBlendMode,backgroundClip,backgroundColor,backgroundImage,backgroundOrigin,backgroundPosition,backgroundPositionX,backgroundPositionY,backgroundRepeat,backgroundSize,blockSize,border,borderBlock,borderBlockColor,borderBlockStyle,borderBlockWidth,borderBlockEnd,borderBlockEndColor,borderBlockEndStyle,borderBlockEndWidth,borderBlockStart,borderBlockStartColor,borderBlockStartStyle,borderBlockStartWidth,borderBottom,borderBottomColor,borderBottomLeftRadius,borderBottomRightRadius,borderBottomStyle,borderBottomWidth,borderCollapse,borderColor,borderEndEndRadius,borderEndStartRadius,borderImage,borderImageOutset,borderImageRepeat,borderImageSlice,borderImageSource,borderImageWidth,borderInline,borderInlineEnd,borderInlineColor,borderInlineStyle,borderInlineWidth,borderInlineEndColor,borderInlineEndStyle,borderInlineEndWidth,borderInlineStart,borderInlineStartColor,borderInlineStartStyle,borderInlineStartWidth,borderLeft,borderLeftColor,borderLeftStyle,borderLeftWidth,borderRadius,borderRight,borderRightColor,borderRightStyle,borderRightWidth,borderSpacing,borderStartEndRadius,borderStartStartRadius,borderStyle,borderTop,borderTopColor,borderTopLeftRadius,borderTopRightRadius,borderTopStyle,borderTopWidth,borderWidth,bottom,boxAlign,boxDecorationBreak,boxDirection,boxFlex,boxFlexGroup,boxLines,boxOrdinalGroup,boxOrient,boxPack,boxShadow,boxSizing,breakAfter,breakBefore,breakInside,captionSide,caret,caretColor,caretShape,clear,clip,clipPath,color,colorScheme,columnCount,columnFill,columnGap,columnRule,columnRuleColor,columnRuleStyle,columnRuleWidth,columnSpan,columnWidth,columns,contain,containIntrinsicSize,containIntrinsicBlockSize,containIntrinsicHeight,containIntrinsicInlineSize,containIntrinsicWidth,container,containerName,containerType,content,contentVisibility,counterIncrement,counterReset,counterSet,cursor,direction,display,emptyCells,filter,flex,flexBasis,flexDirection,flexFlow,flexGrow,flexShrink,flexWrap,float,font,fontFamily,fontFeatureSettings,fontKerning,fontLanguageOverride,fontOpticalSizing,fontPalette,fontVariationSettings,fontSize,fontSizeAdjust,fontSmooth,fontStretch,fontStyle,fontSynthesis,fontSynthesisPosition,fontSynthesisSmallCaps,fontSynthesisStyle,fontSynthesisWeight,fontVariant,fontVariantAlternates,fontVariantCaps,fontVariantEastAsian,fontVariantEmoji,fontVariantLigatures,fontVariantNumeric,fontVariantPosition,fontWeight,forcedColorAdjust,gap,grid,gridArea,gridAutoColumns,gridAutoFlow,gridAutoRows,gridColumn,gridColumnEnd,gridColumnGap,gridColumnStart,gridGap,gridRow,gridRowEnd,gridRowGap,gridRowStart,gridTemplate,gridTemplateAreas,gridTemplateColumns,gridTemplateRows,hangingPunctuation,height,hyphenateCharacter,hyphenateLimitChars,hyphens,imageOrientation,imageRendering,imageResolution,imeMode,initialLetter,initialLetterAlign,inlineSize,inputSecurity,inset,insetBlock,insetBlockEnd,insetBlockStart,insetInline,insetInlineEnd,insetInlineStart,isolation,justifyContent,justifyItems,justifySelf,justifyTracks,left,letterSpacing,lineBreak,lineClamp,lineHeight,lineHeightStep,listStyle,listStyleImage,listStylePosition,listStyleType,margin,marginBlock,marginBlockEnd,marginBlockStart,marginBottom,marginInline,marginInlineEnd,marginInlineStart,marginLeft,marginRight,marginTop,marginTrim,mask,maskBorder,maskBorderMode,maskBorderOutset,maskBorderRepeat,maskBorderSlice,maskBorderSource,maskBorderWidth,maskClip,maskComposite,maskImage,maskMode,maskOrigin,maskPosition,maskRepeat,maskSize,maskType,masonryAutoFlow,mathDepth,mathShift,mathStyle,maxBlockSize,maxHeight,maxInlineSize,maxLines,maxWidth,minBlockSize,minHeight,minInlineSize,minWidth,mixBlendMode,objectFit,objectPosition,offset,offsetAnchor,offsetDistance,offsetPath,offsetPosition,offsetRotate,opacity,order,orphans,outline,outlineColor,outlineOffset,outlineStyle,outlineWidth,overflow,overflowAnchor,overflowBlock,overflowClipBox,overflowClipMargin,overflowInline,overflowWrap,overflowX,overflowY,overlay,overscrollBehavior,overscrollBehaviorBlock,overscrollBehaviorInline,overscrollBehaviorX,overscrollBehaviorY,padding,paddingBlock,paddingBlockEnd,paddingBlockStart,paddingBottom,paddingInline,paddingInlineEnd,paddingInlineStart,paddingLeft,paddingRight,paddingTop,page,pageBreakAfter,pageBreakBefore,pageBreakInside,paintOrder,perspective,perspectiveOrigin,placeContent,placeItems,placeSelf,pointerEvents,position,printColorAdjust,quotes,resize,right,rotate,rowGap,rubyAlign,rubyMerge,rubyPosition,scale,scrollbarColor,scrollbarGutter,scrollbarWidth,scrollBehavior,scrollMargin,scrollMarginBlock,scrollMarginBlockStart,scrollMarginBlockEnd,scrollMarginBottom,scrollMarginInline,scrollMarginInlineStart,scrollMarginInlineEnd,scrollMarginLeft,scrollMarginRight,scrollMarginTop,scrollPadding,scrollPaddingBlock,scrollPaddingBlockStart,scrollPaddingBlockEnd,scrollPaddingBottom,scrollPaddingInline,scrollPaddingInlineStart,scrollPaddingInlineEnd,scrollPaddingLeft,scrollPaddingRight,scrollPaddingTop,scrollSnapAlign,scrollSnapCoordinate,scrollSnapDestination,scrollSnapPointsX,scrollSnapPointsY,scrollSnapStop,scrollSnapType,scrollSnapTypeX,scrollSnapTypeY,scrollTimeline,scrollTimelineAxis,scrollTimelineName,shapeImageThreshold,shapeMargin,shapeOutside,tabSize,tableLayout,textAlign,textAlignLast,textCombineUpright,textDecoration,textDecorationColor,textDecorationLine,textDecorationSkip,textDecorationSkipInk,textDecorationStyle,textDecorationThickness,textEmphasis,textEmphasisColor,textEmphasisPosition,textEmphasisStyle,textIndent,textJustify,textOrientation,textOverflow,textRendering,textShadow,textSizeAdjust,textTransform,textUnderlineOffset,textUnderlinePosition,textWrap,timelineScope,top,touchAction,transform,transformBox,transformOrigin,transformStyle,transition,transitionBehavior,transitionDelay,transitionDuration,transitionProperty,transitionTimingFunction,translate,unicodeBidi,userSelect,verticalAlign,viewTimeline,viewTimelineAxis,viewTimelineInset,viewTimelineName,viewTransitionName,visibility,whiteSpace,whiteSpaceCollapse,widows,width,willChange,wordBreak,wordSpacing,wordWrap,writingMode,zIndex,zoom,alignmentBaseline,baselineShift,clipRule,colorInterpolation,colorRendering,dominantBaseline,fill,fillOpacity,fillRule,floodColor,floodOpacity,glyphOrientationVertical,lightingColor,marker,markerEnd,markerMid,markerStart,shapeRendering,stopColor,stopOpacity,stroke,strokeDasharray,strokeDashoffset,strokeLinecap,strokeLinejoin,strokeMiterlimit,strokeOpacity,strokeWidth,textAnchor,vectorEffect",allCssProperties=cssPropertiesStr.split(",").concat(userGenerated),properties=new Map(allCssProperties.map(_e=>[_e,!0]));function memo$1(_e){const _=Object.create(null);return et=>(_[et]===void 0&&(_[et]=_e(et)),_[et])}var cssPropertySelectorRegex=/&|@/,isCssProperty=memo$1(_e=>properties.has(_e)||_e.startsWith("--")||cssPropertySelectorRegex.test(_e));const isNotNullish=_e=>_e!=null;function walkObject(_e,_,et={}){const{stop:tt,getKey:nt}=et;function it(at,ot=[]){if(isObject$9(at)||Array.isArray(at)){const st={};for(const[dt,ht]of Object.entries(at)){const ct=(nt==null?void 0:nt(dt,ht))??dt,ut=[...ot,ct];if(tt!=null&&tt(at,ut))return _(at,ot);const ft=it(ht,ut);isNotNullish(ft)&&(st[ct]=ft)}return st}return _(at,ot)}return it(_e)}function mapObject(_e,_){return Array.isArray(_e)?_e.map(et=>_(et)):isObject$9(_e)?walkObject(_e,et=>_(et)):_e!=null?_(_e):_e}function flatten(_e,_){const et={};return walkObject(_e,(tt,nt)=>{tt&&(et[nt.join(".")]=tt.value)},{stop:_}),et}const memo=_e=>{const _=Object.create(null);function et(...tt){const nt=JSON.stringify(tt);return _[nt]===void 0&&(_[nt]=_e(...tt)),_[nt]}return et},BASE_FONT_SIZE=16,UNIT_PX="px",UNIT_EM="em",UNIT_REM="rem";function getUnit(_e=""){const _=new RegExp(String.raw`-?\d+(?:\.\d+|\d*)`),et=new RegExp(`${UNIT_PX}|${UNIT_EM}|${UNIT_REM}`),tt=_e.match(new RegExp(`${_.source}(${et.source})`));return tt==null?void 0:tt[1]}function toPx(_e=""){if(typeof _e=="number")return`${_e}px`;const _=getUnit(_e);if(!_||_===UNIT_PX)return _e;if(_===UNIT_EM||_===UNIT_REM)return`${parseFloat(_e)*BASE_FONT_SIZE}${UNIT_PX}`}function toRem(_e=""){const _=getUnit(_e);if(!_||_===UNIT_REM)return _e;if(_===UNIT_EM)return`${parseFloat(_e)}${UNIT_REM}`;if(_===UNIT_PX)return`${parseFloat(_e)/BASE_FONT_SIZE}${UNIT_REM}`}const capitalize$1=_e=>_e.charAt(0).toUpperCase()+_e.slice(1);function createBreakpoints(_e){const _=sort$3(_e),et=Object.fromEntries(_);function tt(ut){return et[ut]}function nt(ut){return build$1(tt(ut))}function it(){const ut=Object.keys(et),ft=getPermutations(ut),gt=ut.flatMap(mt=>{const vt=tt(mt),yt=[`${mt}Down`,build$1({max:adjust(vt.min)})],bt=[mt,build$1({min:vt.min})],_t=[`${mt}Only`,nt(mt)];return[bt,_t,yt]}).filter(([,mt])=>mt!=="").concat(ft.map(([mt,vt])=>{const yt=tt(mt),bt=tt(vt);return[`${mt}To${capitalize$1(vt)}`,build$1({min:yt.min,max:adjust(bt.min)})]}));return Object.fromEntries(gt)}function at(){const ut=it();return Object.fromEntries(Object.entries(ut))}const ot=at(),st=ut=>ot[ut];function dt(){return["base",...Object.keys(et)]}function ht(ut){return build$1({min:tt(ut).min})}function ct(ut){return build$1({max:adjust(tt(ut).min)})}return{values:Object.values(et),only:nt,keys:dt,conditions:ot,getCondition:st,up:ht,down:ct}}function adjust(_e){const _=parseFloat(toPx(_e)??"")-.04;return toRem(`${_}px`)}function sort$3(_e){return Object.entries(_e).sort(([,et],[,tt])=>parseInt(et,10)<parseInt(tt,10)?-1:1).map(([et,tt],nt,it)=>{var ot;let at=null;return nt<=it.length-1&&(at=(ot=it[nt+1])==null?void 0:ot[1]),at!=null&&(at=adjust(at)),[et,{name:et,min:toRem(tt),max:at}]})}function getPermutations(_e){const _=[];return _e.forEach((et,tt)=>{let nt=tt;nt++;let it=_e[nt];for(;it;)_.push([et,it]),nt++,it=_e[nt]}),_}function build$1({min:_e,max:_}){return _e==null&&_==null?"":["@media screen",_e&&`(min-width: ${_e})`,_&&`(max-width: ${_})`].filter(Boolean).join(" and ")}const mapEntries$1=(_e,_)=>Object.fromEntries(Object.entries(_e).map(([et,tt])=>_(et,tt))),createConditions=_e=>{const{breakpoints:_,conditions:et={}}=_e,tt=mapEntries$1(et,(ht,ct)=>[`_${ht}`,ct]),nt=Object.assign({},tt,_.conditions);function it(){return Object.keys(nt)}function at(ht){return it().includes(ht)||/^@|&|&$/.test(ht)||ht.startsWith("_")}function ot(ht){return ht.filter(ct=>ct!=="base").sort((ct,ut)=>{const ft=at(ct),gt=at(ut);return ft&&!gt?1:!ft&&gt?-1:0})}function st(ht){return ht.startsWith("@breakpoint")?_.getCondition(ht.replace("@breakpoint ","")):ht}function dt(ht){return Reflect.get(nt,ht)||ht}return{keys:it,sort:ot,has:at,resolve:dt,breakpoints:_.keys(),expandAtRule:st}},createMediaQueryRegex=_e=>({minMax:new RegExp(`(!?\\(\\s*min(-device-)?-${_e})(.|
)+\\(\\s*max(-device)?-${_e}`,"i"),min:new RegExp(`\\(\\s*min(-device)?-${_e}`,"i"),maxMin:new RegExp(`(!?\\(\\s*max(-device)?-${_e})(.|
)+\\(\\s*min(-device)?-${_e}`,"i"),max:new RegExp(`\\(\\s*max(-device)?-${_e}`,"i")}),widthRegex=createMediaQueryRegex("width"),heightRegex=createMediaQueryRegex("height"),createQueryTester=_e=>({isMin:_testQuery(_e.minMax,_e.maxMin,_e.min),isMax:_testQuery(_e.maxMin,_e.minMax,_e.max)}),{isMin:isMinWidth,isMax:isMaxWidth}=createQueryTester(widthRegex),{isMin:isMinHeight,isMax:isMaxHeight}=createQueryTester(heightRegex),isPrint=/print/i,isPrintOnly=/^print$/i,isLength=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/,lengthExec=/(\d)/,maxValue=Number.MAX_VALUE,multipliers={ch:8.8984375,em:16,rem:16,ex:8.296875,px:1};function getQueryLength(_e){const _=isLength.exec(_e)||(isMinWidth(_e)||isMinHeight(_e)?lengthExec.exec(_e):null);if(!_)return maxValue;if(_[0]==="0")return 0;const et=parseFloat(_[1]),tt=_[2];return et*(multipliers[tt]||1)}function _testQuery(_e,_,et){return tt=>_e.test(tt)||!_.test(tt)&&et.test(tt)}function _testIsPrint(_e,_){const et=isPrint.test(_e),tt=isPrintOnly.test(_e),nt=isPrint.test(_),it=isPrintOnly.test(_);return et&&nt?!tt&&it?1:tt&&!it?-1:_e.localeCompare(_):et?1:nt?-1:null}const sortAtParams=memo((_e,_)=>{const et=_testIsPrint(_e,_);if(et!==null)return et;const tt=isMinWidth(_e)||isMinHeight(_e),nt=isMaxWidth(_e)||isMaxHeight(_e),it=isMinWidth(_)||isMinHeight(_),at=isMaxWidth(_)||isMaxHeight(_);if(tt&&at)return-1;if(nt&&it)return 1;const ot=getQueryLength(_e),st=getQueryLength(_);return ot===maxValue&&st===maxValue?_e.localeCompare(_):ot===maxValue?1:st===maxValue?-1:ot!==st?ot>st?nt?-1:1:nt?1:-1:_e.localeCompare(_)});function sortQueries(_e){return _e.sort(([_],[et])=>sortAtParams(_,et))}function sortAtRules(_e){const _=[],et=[],tt={};for(const[at,ot]of Object.entries(_e))at.startsWith("@media")?_.push([at,ot]):at.startsWith("@container")?et.push([at,ot]):isObject$9(ot)?tt[at]=sortAtRules(ot):tt[at]=ot;const nt=sortQueries(_),it=sortQueries(et);return{...tt,...Object.fromEntries(nt),...Object.fromEntries(it)}}const importantRegex=/\s*!(important)?/i,isImportant$1=_e=>isString$4(_e)?importantRegex.test(_e):!1,withoutImportant$1=_e=>isString$4(_e)?_e.replace(importantRegex,"").trim():_e;function createCssFn(_e){const{transform:_,conditions:et,normalize:tt}=_e,nt=mergeCss(_e);return memo((...it)=>{const at=nt(...it),ot=tt(at),st=Object.create(null);return walkObject(ot,(dt,ht)=>{const ct=isImportant$1(dt);if(dt==null)return;const[ut,...ft]=et.sort(ht).map(et.resolve);ct&&(dt=withoutImportant$1(dt));let gt=_(ut,dt)??Object.create(null);gt=walkObject(gt,mt=>isString$4(mt)&&ct?`${mt} !important`:mt,{getKey:mt=>et.expandAtRule(mt)}),mergeByPath(st,ft.flat(),gt)}),sortAtRules(st)})}function mergeByPath(_e,_,et){let tt=_e;for(const nt of _)nt&&(tt[nt]||(tt[nt]=Object.create(null)),tt=tt[nt]);mergeWith$1(tt,et)}function compactFn(..._e){return _e.filter(_=>isObject$9(_)&&Object.keys(compact$3(_)).length>0)}function mergeCss(_e){function _(et){const tt=compactFn(...et);return tt.length===1?tt:tt.map(nt=>_e.normalize(nt))}return memo((...et)=>mergeWith$1({},..._(et)))}function omit$2(_e,_=[]){const et=Object.assign({},_e);for(const tt of _)tt in et&&delete et[tt];return et}const uniq=(..._e)=>{const _=_e.filter(Boolean);return Array.from(new Set(_))},defaults$3=_e=>({base:{},variants:{},defaultVariants:{},compoundVariants:[],..._e});function createRecipeFn(_e){const{css:_,conditions:et,normalize:tt,layers:nt}=_e;function it(ot={}){const{base:st,variants:dt,defaultVariants:ht,compoundVariants:ct}=defaults$3(ot),ut=createCssFn({conditions:et,normalize:tt,transform(bt,_t){var xt;return(xt=dt[bt])==null?void 0:xt[_t]}}),ft=(bt={})=>{const _t=tt({...ht,...compact$3(bt)});let xt={...st};mergeWith$1(xt,ut(_t));const St=at(ct,_t);return nt.wrap("recipes",_(xt,St))},gt=Object.keys(dt),mt=bt=>{const _t=omit$2(bt,["recipe"]),[xt,St]=splitProps(_t,gt);return gt.includes("colorPalette")||(xt.colorPalette=bt.colorPalette||ht.colorPalette),gt.includes("orientation")&&(St.orientation=bt.orientation),[xt,St]},vt=Object.fromEntries(Object.entries(dt).map(([bt,_t])=>[bt,Object.keys(_t)]));return Object.assign(bt=>_(ft(bt)),{className:ot.className,__cva__:!0,variantMap:vt,variantKeys:gt,raw:ft,config:ot,splitVariantProps:mt,merge(bt){return it(mergeCva(_e)(this,bt))}})}function at(ot,st){let dt={};return ot.forEach(ht=>{Object.entries(ht).every(([ut,ft])=>ut==="css"?!0:(Array.isArray(ft)?ft:[ft]).some(mt=>st[ut]===mt))&&(dt=_(dt,ht.css))}),dt}return it}function mergeCva(_e){const{css:_}=_e;return function(tt,nt){const it=defaults$3(nt.config),at=uniq(tt.variantKeys,Object.keys(nt.variants)),ot=_(tt.base,it.base),st=Object.fromEntries(at.map(ut=>[ut,_(tt.config.variants[ut],it.variants[ut])])),dt=mergeWith$1(tt.config.defaultVariants,it.defaultVariants),ht=[...tt.compoundVariants,...it.compoundVariants];return{className:cx$1(tt.className,nt.className),base:ot,variants:st,defaultVariants:dt,compoundVariants:ht}}}const defaultLayers={reset:"reset",base:"base",tokens:"tokens",recipes:"recipes"},layerOrder={reset:0,base:1,tokens:2,recipes:3};function createLayers(_e){const _=_e.layers??defaultLayers,tt=Object.values(_).sort((nt,it)=>layerOrder[nt]-layerOrder[it]);return{names:tt,atRule:`@layer ${tt.join(", ")};`,wrap(nt,it){return _e.disableLayers?it:{[`@layer ${_[nt]}`]:it}}}}function createNormalizeFn(_e){const{utility:_,normalize:et}=_e,{hasShorthand:tt,resolveShorthand:nt}=_;return function(it){return walkObject(it,et,{stop:at=>Array.isArray(at),getKey:tt?nt:void 0})}}function createPreflight(_e){const{preflight:_}=_e;if(!_)return{};const{scope:et="",level:tt="parent"}=isObject$9(_)?_:{};let nt="";et&&tt==="parent"?nt=`${et} `:et&&tt==="element"&&(nt=`&${et}`);const it={"*":{margin:"0px",padding:"0px",font:"inherit",wordWrap:"break-word",WebkitTapHighlightColor:"transparent"},"*, *::before, *::after, *::backdrop":{boxSizing:"border-box",borderWidth:"0px",borderStyle:"solid",borderColor:"var(--global-color-border, currentColor)"},hr:{height:"0px",color:"inherit",borderTopWidth:"1px"},body:{minHeight:"100dvh",position:"relative"},img:{borderStyle:"none"},"img, svg, video, canvas, audio, iframe, embed, object":{display:"block",verticalAlign:"middle"},iframe:{border:"none"},"img, video":{maxWidth:"100%",height:"auto"},"p, h1, h2, h3, h4, h5, h6":{overflowWrap:"break-word"},"ol, ul":{listStyle:"none"},"code, kbd, pre, samp":{fontSize:"1em"},"button, [type='button'], [type='reset'], [type='submit']":{WebkitAppearance:"button",backgroundColor:"transparent",backgroundImage:"none"},"button, input, optgroup, select, textarea":{color:"inherit"},"button, select":{textTransform:"none"},table:{textIndent:"0px",borderColor:"inherit",borderCollapse:"collapse"},"*::placeholder":{opacity:"unset",color:"#9ca3af",userSelect:"none"},textarea:{resize:"vertical"},summary:{display:"list-item"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sub:{bottom:"-0.25em"},sup:{top:"-0.5em"},dialog:{padding:"0px"},a:{color:"inherit",textDecoration:"inherit"},"abbr:where([title])":{textDecoration:"underline dotted"},"b, strong":{fontWeight:"bolder"},"code, kbd, samp, pre":{fontSize:"1em","--font-mono-fallback":"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New'",fontFamily:"var(--global-font-mono, var(--font-mono-fallback))"},'input[type="text"], input[type="email"], input[type="search"], input[type="password"]':{WebkitAppearance:"none",MozAppearance:"none"},"input[type='search']":{WebkitAppearance:"textfield",outlineOffset:"-2px"},"::-webkit-search-decoration, ::-webkit-search-cancel-button":{WebkitAppearance:"none"},"::-webkit-file-upload-button":{WebkitAppearance:"button",font:"inherit"},'input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button':{height:"auto"},"input[type='number']":{MozAppearance:"textfield"},":-moz-ui-invalid":{boxShadow:"none"},":-moz-focusring":{outline:"auto"},"[hidden]:where(:not([hidden='until-found']))":{display:"none !important"}},at={[et||"html"]:{lineHeight:1.5,"--font-fallback":"ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",WebkitTextSizeAdjust:"100%",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",touchAction:"manipulation",MozTabSize:"4",tabSize:"4",fontFamily:"var(--global-font-body, var(--font-fallback))"}};if(tt==="element"){const ot=Object.entries(it).reduce((st,[dt,ht])=>(st[dt]={[nt]:ht},st),{});Object.assign(at,ot)}else nt?at[nt]=it:Object.assign(at,it);return at}function createSerializeFn(_e){const{conditions:_,isValidProperty:et}=_e;return function(nt){return walkObject(nt,it=>it,{getKey:(it,at)=>isObject$9(at)&&!_.has(it)&&!et(it)?parseSelectors(it).map(ot=>"&"+ot).join(", "):it})}}function parseSelectors(_e){const _=[];let et=0,tt="",nt=!1;for(let it=0;it<_e.length;it++){const at=_e[it];if(at==="\\"&&!nt){nt=!0,tt+=at;continue}if(nt){nt=!1,tt+=at;continue}at==="("?et++:at===")"&&et--,at===","&&et===0?(_.push(tt.trim()),tt=""):tt+=at}return tt&&_.push(tt.trim()),_}const getSlotRecipes=(_e={})=>{const _=nt=>{var it;return{base:((it=_e.base)==null?void 0:it[nt])??{},variants:{},defaultVariants:_e.defaultVariants??{},compoundVariants:_e.compoundVariants?getSlotCompoundVariant(_e.compoundVariants,nt):[]}},tt=(_e.slots??[]).map(nt=>[nt,_(nt)]);for(const[nt,it]of Object.entries(_e.variants??{}))for(const[at,ot]of Object.entries(it))tt.forEach(([st,dt])=>{var ht;(ht=dt.variants)[nt]??(ht[nt]={}),dt.variants[nt][at]=ot[st]??{}});return Object.fromEntries(tt)},getSlotCompoundVariant=(_e,_)=>_e.filter(et=>et.css[_]).map(et=>({...et,css:et.css[_]}));function createSlotRecipeFn(_e){const{cva:_}=_e;return function(tt={}){const nt=Object.entries(getSlotRecipes(tt)).map(([ct,ut])=>[ct,_(ut)]);function it(ct){const ut=nt.map(([ft,gt])=>[ft,gt(ct)]);return Object.fromEntries(ut)}const at=tt.variants??{},ot=Object.keys(at);function st(ct){var mt;const ut=omit$2(ct,["recipe"]),[ft,gt]=splitProps(ut,ot);return ot.includes("colorPalette")||(ft.colorPalette=ct.colorPalette||((mt=tt.defaultVariants)==null?void 0:mt.colorPalette)),ot.includes("orientation")&&(gt.orientation=ct.orientation),[ft,gt]}const dt=Object.fromEntries(Object.entries(at).map(([ct,ut])=>[ct,Object.keys(ut)]));let ht={};return tt.className&&(ht=Object.fromEntries(tt.slots.map(ct=>[ct,`${tt.className}__${ct}`]))),Object.assign(it,{variantMap:dt,variantKeys:ot,splitVariantProps:st,classNameMap:ht})}}const createProps=()=>_e=>Array.from(new Set(_e)),rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|^-|[^\x80-\uFFFF\w-]/g,fcssescape=function(_e,_){return _?_e==="\0"?"":_e==="-"&&_e.length===1?"\\-":_e.slice(0,-1)+"\\"+_e.charCodeAt(_e.length-1).toString(16):"\\"+_e},esc=_e=>(_e+"").replace(rcssescape,fcssescape),expandTokenReferences=(_e,_)=>{let et="",tt=0,nt="char",it="",at="";const ot=[];for(;tt<_e.length;){const st=_e[tt];if(st==="{"){const ht=_e.indexOf("}",tt);if(ht===-1)break;const ct=_e.slice(tt+1,ht),ut=_(ct);et+=ut??ct,tt=ht+1;continue}if(nt==="token"&&st===","){_e[tt]===""&&tt++,nt="fallback",ot.push(nt);const ht=_(it);ht!=null&&ht.endsWith(")")&&(et+=ht.slice(0,-1)),it="",at="";continue}if(nt==="fallback"&&at+st===", var("){const ut=cssVarParser(_e.slice(tt+1))+tt+1,ft=_e.slice(tt+1,ut);if(ut===-1)break;et+=", var("+ft+")",tt=ut+1,nt=ot.pop()??nt,at="";continue}if(nt==="token"||nt==="fallback"){if(tt++,st===")"){nt=ot.pop()??nt??"char",at+=st;const ht=it&&(_(it)??esc(it));if(at){if(at=at.slice(1).trim(),!at.startsWith("token(")&&at.endsWith(")")&&(at=at.slice(0,-1)),at.includes("token(")){const ut=expandTokenReferences(at,_);ut&&(at=ut.slice(0,-1))}else if(at){const ut=_(at);ut&&(at=ut)}}const ct=et.at(-1);at?ct!=null&&ct.trim()?et+=ht.slice(0,-1)+(", "+at+")"):et+=at:et+=ht||")",it="",at="",nt="char";continue}nt==="token"&&(it+=st),nt==="fallback"&&(at+=st);continue}const dt=_e.indexOf("token(",tt);if(dt!==-1){const ht=dt+6;et+=_e.slice(tt,dt),tt=ht,nt="token",ot.push(nt);continue}et+=st,tt++}return et},cssVarParser=_e=>{let _=0;const et=["("];for(;_<_e.length;){const tt=_e[_];if(tt==="(")et.push(tt);else if(tt===")"&&(et.pop(),et.length===0))return _;_++}return _};function mapToJson(_e){const _={};return _e.forEach((et,tt)=>{et instanceof Map?_[tt]=Object.fromEntries(et):_[tt]=et}),_}const REFERENCE_REGEX=/({([^}]*)})/g,CURLY_REGEX=/[{}]/g,TOKEN_PATH_REGEX=/\w+\.\w+/,getReferences=_e=>{if(!isString$4(_e))return[];const _=_e.match(REFERENCE_REGEX);return _?_.map(et=>et.replace(CURLY_REGEX,"")).map(et=>et.trim()):[]},hasReference=_e=>REFERENCE_REGEX.test(_e);function expandReferences(_e){var et,tt,nt;if(!((et=_e.extensions)!=null&&et.references))return((nt=(tt=_e.extensions)==null?void 0:tt.cssVar)==null?void 0:nt.ref)??_e.value;const _=_e.extensions.references??{};return _e.value=Object.keys(_).reduce((it,at)=>{const ot=_[at];if(ot.extensions.conditions)return it;const st=expandReferences(ot);return it.replace(`{${at}}`,st)},_e.value),delete _e.extensions.references,_e.value}function resolveReference$1(_e){return isObject$9(_e)&&_e.reference?_e.reference:String(_e)}const toExpression$1=(_e,..._)=>_.map(resolveReference$1).join(` ${_e} `).replace(/calc/g,""),add$2=(..._e)=>`calc(${toExpression$1("+",..._e)})`,subtract$1=(..._e)=>`calc(${toExpression$1("-",..._e)})`,multiply$1=(..._e)=>`calc(${toExpression$1("*",..._e)})`,divide$1=(..._e)=>`calc(${toExpression$1("/",..._e)})`,negate$2=_e=>{const _=resolveReference$1(_e);return _!=null&&!Number.isNaN(parseFloat(_))?String(_).startsWith("-")?String(_).slice(1):`-${_}`:multiply$1(_,-1)},calc$1=Object.assign(_e=>({add:(..._)=>calc$1(add$2(_e,..._)),subtract:(..._)=>calc$1(subtract$1(_e,..._)),multiply:(..._)=>calc$1(multiply$1(_e,..._)),divide:(..._)=>calc$1(divide$1(_e,..._)),negate:()=>calc$1(negate$2(_e)),toString:()=>_e.toString()}),{add:add$2,subtract:subtract$1,multiply:multiply$1,divide:divide$1,negate:negate$2}),addNegativeTokens={enforce:"pre",transform(_e){const{prefix:_,allTokens:et,formatCssVar:tt,formatTokenName:nt,registerToken:it}=_e;et.filter(({extensions:ot})=>ot.category==="spacing").forEach(ot=>{const st=ot.path.slice(),dt=tt(st,_);if(isString$4(ot.value)&&ot.value==="0rem")return;const ht=structuredClone(ot);Object.assign(ht.extensions,{negative:!0,prop:`-${ot.extensions.prop}`,originalPath:st}),ht.value=calc$1.negate(dt.ref);const ct=ht.path[ht.path.length-1];ct!=null&&(ht.path[ht.path.length-1]=`-${ct}`),ht.path&&(ht.name=nt(ht.path)),it(ht)})}},units=new Set(["spacing","sizes","borderWidths","fontSizes","radii"]),addPixelUnit={enforce:"post",transform(_e){_e.allTokens.filter(et=>units.has(et.extensions.category)&&!et.extensions.negative).forEach(et=>{Object.assign(et.extensions,{pixelValue:toPx(et.value)})})}},addVirtualPalette={enforce:"post",transform(_e){const{allTokens:_,registerToken:et,formatTokenName:tt}=_e,nt=_.filter(({extensions:ot})=>ot.category==="colors"),it=new Map,at=new Map;nt.forEach(ot=>{const{colorPalette:st}=ot.extensions;st&&(st.keys.forEach(dt=>{it.set(tt(dt),dt)}),st.roots.forEach(dt=>{var ut;const ht=tt(dt),ct=at.get(ht)||[];if(ct.push(ot),at.set(ht,ct),ot.extensions.default&&dt.length===1){const ft=(ut=st.keys[0])==null?void 0:ut.filter(Boolean);if(!ft.length)return;const gt=dt.concat(ft);it.set(tt(gt),[])}}))}),it.forEach(ot=>{const st=["colors","colorPalette",...ot].filter(Boolean),dt=tt(st),ht=tt(st.slice(1));et({name:dt,value:dt,originalValue:dt,path:st,extensions:{condition:"base",originalPath:st,category:"colors",prop:ht,virtual:!0}},"pre")})}},removeEmptyTokens={enforce:"post",transform(_e){_e.allTokens=_e.allTokens.filter(_=>_.value!=="")}},tokenMiddlewares=[addNegativeTokens,addVirtualPalette,addPixelUnit,removeEmptyTokens],addCssVariables={type:"extensions",enforce:"pre",name:"tokens/css-var",transform(_e,_){const{prefix:et,formatCssVar:tt}=_,{negative:nt,originalPath:it}=_e.extensions,at=nt?it:_e.path;return{cssVar:tt(at.filter(Boolean),et)}}},addConditionalCssVariables={enforce:"post",type:"value",name:"tokens/conditionals",transform(_e,_){const{prefix:et,formatCssVar:tt}=_,nt=getReferences(_e.value);return nt.length&&nt.forEach(it=>{const at=tt(it.split("."),et);_e.value=_e.value.replace(`{${at.ref}}`,at)}),_e.value}},addColorPalette={type:"extensions",enforce:"pre",name:"tokens/colors/colorPalette",match(_e){return _e.extensions.category==="colors"&&!_e.extensions.virtual},transform(_e,_){let et=_e.path.slice();if(et.pop(),et.shift(),et.length===0){const ot=[..._e.path];ot.shift(),et=ot}if(et.length===0)return{};const tt=et.reduce((ot,st,dt,ht)=>{const ct=ht.slice(0,dt+1);return ot.push(ct),ot},[]),nt=et[0],it=_.formatTokenName(et),at=_e.path.slice(_e.path.indexOf(nt)+1).reduce((ot,st,dt,ht)=>(ot.push(ht.slice(dt)),ot),[]);return at.length===0&&at.push([""]),{colorPalette:{value:it,roots:tt,keys:at}}}},tokenTransforms=[addCssVariables,addConditionalCssVariables,addColorPalette],isToken=_e=>isObject$9(_e)&&Object.prototype.hasOwnProperty.call(_e,"value");function expandBreakpoints(_e){return _e?{breakpoints:mapObject(_e,_=>({value:_})),sizes:Object.fromEntries(Object.entries(_e).map(([_,et])=>[`breakpoint-${_}`,{value:et}]))}:{breakpoints:{},sizes:{}}}function createTokenDictionary(_e){const{prefix:_="",tokens:et={},semanticTokens:tt={},breakpoints:nt={}}=_e,it=Zt=>Zt.join("."),at=(Zt,Kt)=>cssVar(Zt.join("-"),{prefix:Kt}),ot=[],st=new Map,dt=new Map,ht=new Map,ct=new Map,ut=new Map,ft=new Map,gt=new Map,mt=new Map,vt=[];function yt(Zt,Kt){ot.push(Zt),st.set(Zt.name,Zt),Kt&&mt.forEach(ur=>{ur.enforce===Kt&&Vt(ur,Zt)})}const bt=expandBreakpoints(nt),_t=compact$3({...et,breakpoints:bt.breakpoints,sizes:{...et.sizes,...bt.sizes}});function xt(){walkObject(_t,(Zt,Kt)=>{const ur=Kt.includes("DEFAULT");Kt=filterDefault(Kt);const ir=Kt[0],hr=it(Kt),fr=isString$4(Zt)?{value:Zt}:Zt,mr={value:fr.value,originalValue:fr.value,name:hr,path:Kt,extensions:{condition:"base",originalPath:Kt,category:ir,prop:it(Kt.slice(1))}};ur&&(mr.extensions.default=!0),yt(mr)},{stop:isToken}),walkObject(tt,(Zt,Kt)=>{const ur=Kt.includes("DEFAULT");Kt=filterBaseCondition(filterDefault(Kt));const ir=Kt[0],hr=it(Kt),fr=isString$4(Zt.value)?{value:{base:Zt.value}}:Zt,mr={value:fr.value.base||"",originalValue:fr.value.base||"",name:hr,path:Kt,extensions:{originalPath:Kt,category:ir,conditions:fr.value,condition:"base",prop:it(Kt.slice(1))}};ur&&(mr.extensions.default=!0),yt(mr)},{stop:isToken})}function St(Zt){return st.get(Zt)}function Tt(Zt){const{condition:Kt}=Zt.extensions;Kt&&(dt.has(Kt)||dt.set(Kt,new Set),dt.get(Kt).add(Zt))}function wt(Zt){const{category:Kt,prop:ur}=Zt.extensions;Kt&&(gt.has(Kt)||gt.set(Kt,new Map),gt.get(Kt).set(ur,Zt))}function Ct(Zt){const{condition:Kt,negative:ur,virtual:ir,cssVar:hr}=Zt.extensions;ur||ir||!Kt||!hr||(ht.has(Kt)||ht.set(Kt,new Map),ht.get(Kt).set(hr.var,Zt.value))}function Et(Zt){const{category:Kt,prop:ur,cssVar:ir,negative:hr}=Zt.extensions;if(!Kt)return;ft.has(Kt)||ft.set(Kt,new Map);const fr=hr?Zt.extensions.conditions?Zt.originalValue:Zt.value:ir.ref;ft.get(Kt).set(ur,fr),ut.set([Kt,ur].join("."),fr)}function At(Zt){const{colorPalette:Kt,virtual:ur,default:ir}=Zt.extensions;!Kt||ur||Kt.roots.forEach(hr=>{var jr;const fr=it(hr);ct.has(fr)||ct.set(fr,new Map);const mr=replaceRootWithColorPalette([...Zt.path],[...hr]),br=it(mr),Er=St(br);if(!Er||!Er.extensions.cssVar)return;const{var:kr}=Er.extensions.cssVar;if(ct.get(fr).set(kr,Zt.extensions.cssVar.ref),ir&&hr.length===1){const Hr=it(["colors","colorPalette"]),Wr=St(Hr);if(!Wr)return;const Yr=it(Zt.path),Br=St(Yr);if(!Br)return;const Gr=(jr=Kt.keys[0])==null?void 0:jr.filter(Boolean);if(!Gr.length)return;const Jr=it(hr.concat(Gr));ct.has(Jr)||ct.set(Jr,new Map),ct.get(Jr).set(Wr.extensions.cssVar.var,Br.extensions.cssVar.ref)}})}let Pt={};function Rt(){ot.forEach(Zt=>{Tt(Zt),wt(Zt),Ct(Zt),Et(Zt),At(Zt)}),Pt=mapToJson(ft)}const It=(Zt,Kt)=>{var Er;if(!Zt||typeof Zt!="string")return{invalid:!0,value:Zt};const[ur,ir]=Zt.split("/");if(!ur||!ir)return{invalid:!0,value:ur};const hr=Kt(ur),fr=(Er=St(`opacity.${ir}`))==null?void 0:Er.value;if(!fr&&isNaN(Number(ir)))return{invalid:!0,value:ur};const mr=fr?Number(fr)*100+"%":`${ir}%`,br=hr??ur;return{invalid:!1,color:br,value:`color-mix(in srgb, ${br} ${mr}, transparent)`}},Mt=memo((Zt,Kt)=>ut.get(Zt)??Kt),Ot=memo(Zt=>Pt[Zt]||null),$t=memo(Zt=>expandTokenReferences(Zt,Kt=>{if(!Kt)return;if(Kt.includes("/")){const ir=It(Kt,hr=>Mt(hr));if(ir.invalid)throw new Error("Invalid color mix at "+Kt+": "+ir.value);return ir.value}const ur=Mt(Kt);return ur||(TOKEN_PATH_REGEX.test(Kt)?esc(Kt):Kt)})),Lt={prefix:_,allTokens:ot,tokenMap:st,registerToken:yt,getByName:St,formatTokenName:it,formatCssVar:at,flatMap:ut,cssVarMap:ht,categoryMap:gt,colorPaletteMap:ct,getVar:Mt,getCategoryValues:Ot,expandReferenceInValue:$t};function kt(...Zt){Zt.forEach(Kt=>{mt.set(Kt.name,Kt)})}function Nt(...Zt){vt.push(...Zt)}function Vt(Zt,Kt){if(Kt.extensions.references||isFunction$6(Zt.match)&&!Zt.match(Kt))return;const ir=(hr=>Zt.transform(hr,Lt))(Kt);switch(!0){case Zt.type==="extensions":Object.assign(Kt.extensions,ir);break;case Zt.type==="value":Kt.value=ir;break;default:Kt[Zt.type]=ir;break}}function zt(Zt){vt.forEach(Kt=>{Kt.enforce===Zt&&Kt.transform(Lt)})}function Xt(Zt){mt.forEach(Kt=>{Kt.enforce===Zt&&ot.forEach(ur=>{Vt(Kt,ur)})})}function Wt(){ot.forEach(Zt=>{const Kt=getConditionalTokens(Zt);!Kt||Kt.length===0||Kt.forEach(ur=>{yt(ur)})})}function nr(Zt){return getReferences(Zt).map(ur=>St(ur)).filter(Boolean)}function Jt(){ot.forEach(Zt=>{if(!hasReference(Zt.value))return;const Kt=nr(Zt.value);Zt.extensions.references=Kt.reduce((ur,ir)=>(ur[ir.name]=ir,ur),{})})}function lr(){ot.forEach(Zt=>{expandReferences(Zt)})}function pr(){zt("pre"),Xt("pre"),Wt(),Jt(),lr(),zt("post"),Xt("post"),Rt()}return xt(),kt(...tokenTransforms),Nt(...tokenMiddlewares),pr(),Lt}function filterDefault(_e){return _e[0]==="DEFAULT"?_e:_e.filter(_=>_!=="DEFAULT")}function filterBaseCondition(_e){return _e.filter(_=>_!=="base")}function getConditionalTokens(_e){if(!_e.extensions.conditions)return;const{conditions:_}=_e.extensions,et=[];return walkObject(_,(tt,nt)=>{const it=filterBaseCondition(nt);if(!it.length)return;const at=structuredClone(_e);at.value=tt,at.extensions.condition=it.join(":"),et.push(at)}),et}function replaceRootWithColorPalette(_e,_){const et=_e.findIndex((tt,nt)=>_.every((it,at)=>_e[nt+at]===it));return et===-1||(_e.splice(et,_.length),_e.splice(et,0,"colorPalette")),_e}createProps()(["aspectRatios","zIndex","opacity","colors","fonts","fontSizes","fontWeights","lineHeights","letterSpacings","sizes","shadows","spacing","radii","cursor","borders","borderWidths","borderStyles","durations","easings","animations","blurs","gradients","breakpoints","assets"]);function normalize$4(_e){return _e}function normalizeConfig(_e){return Object.fromEntries(Object.entries(_e).map(([_,et])=>[_,et]))}function createUtility(_e){const _=normalizeConfig(_e.config),et=_e.tokens,tt=new Map,nt=new Map;function it(Ct,Et){_[Ct]=Et,at(Ct,Et)}const at=(Ct,Et)=>{const At=mt(Et);At&&(nt.set(Ct,At),ct(Ct,Et))},ot=()=>{for(const[Ct,Et]of Object.entries(_))Et&&at(Ct,Et)},st=()=>{for(const[Ct,Et]of Object.entries(_)){const{shorthand:At}=Et??{};if(!At)continue;(Array.isArray(At)?At:[At]).forEach(Rt=>tt.set(Rt,Ct))}},dt=()=>{const Ct=mapToJson(et.colorPaletteMap);it("colorPalette",{values:Object.keys(Ct),transform:memo(Et=>Ct[Et])})},ht=new Map,ct=(Ct,Et)=>{if(!Et)return;const At=mt(Et,Rt=>`type:Tokens["${Rt}"]`);if(typeof At=="object"&&At.type){ht.set(Ct,new Set([`type:${At.type}`]));return}if(At){const Rt=new Set(Object.keys(At));ht.set(Ct,Rt)}const Pt=ht.get(Ct)??new Set;Et.property&&ht.set(Ct,Pt.add(`CssProperties["${Et.property}"]`))},ut=()=>{for(const[Ct,Et]of Object.entries(_))Et&&ct(Ct,Et)},ft=(Ct,Et)=>{const At=ht.get(Ct)??new Set;ht.set(Ct,new Set([...At,...Et]))},gt=()=>{const Ct=new Map;for(const[Et,At]of ht.entries()){if(At.size===0){Ct.set(Et,["string"]);continue}const Pt=Array.from(At).map(Rt=>Rt.startsWith("CssProperties")?Rt:Rt.startsWith("type:")?Rt.replace("type:",""):JSON.stringify(Rt));Ct.set(Et,Pt)}return Ct},mt=(Ct,Et)=>{const{values:At}=Ct,Pt=Rt=>{const It=Et==null?void 0:Et(Rt);return It?{[It]:It}:void 0};return isString$4(At)?(Pt==null?void 0:Pt(At))??et.getCategoryValues(At)??{}:Array.isArray(At)?At.reduce((Rt,It)=>(Rt[It]=It,Rt),{}):isFunction$6(At)?At(Et?Pt:et.getCategoryValues):At},vt=memo((Ct,Et)=>({[Ct]:Ct.startsWith("--")?et.getVar(Et,Et):Et})),yt=Object.assign(et.getVar,{raw:Ct=>et.getByName(Ct)}),bt=memo((Ct,Et)=>{var Mt;const At=St(Ct);isString$4(Et)&&!Et.includes("_EMO_")&&(Et=et.expandReferenceInValue(Et));const Pt=_[At];if(!Pt)return vt(At,Et);const Rt=(Mt=nt.get(At))==null?void 0:Mt[Et];if(!Pt.transform)return vt(Ct,Rt??Et);const It=Ot=>colorMix(Ot,yt);return Pt.transform(Rt??Et,{raw:Et,token:yt,utils:{colorMix:It}})});function _t(){st(),dt(),ot(),ut()}_t();const xt=tt.size>0,St=memo(Ct=>tt.get(Ct)??Ct);return{keys:()=>[...Array.from(tt.keys()),...Object.keys(_)],hasShorthand:xt,transform:bt,shorthands:tt,resolveShorthand:St,register:it,getTypes:gt,addPropertyType:ft}}function createSystem(..._e){const _=mergeConfigs(..._e),{theme:et={},utilities:tt={},globalCss:nt={},cssVarsRoot:it=":where(:root, :host)",cssVarsPrefix:at="chakra",preflight:ot}=_,st=createLayers(_),dt=createTokenDictionary({breakpoints:et.breakpoints,tokens:et.tokens,semanticTokens:et.semanticTokens,prefix:at}),ht=createBreakpoints(et.breakpoints??{}),ct=createConditions({conditions:_.conditions??{},breakpoints:ht}),ut=createUtility({config:tt,tokens:dt});function ft(){const{textStyles:kt,layerStyles:Nt,animationStyles:Vt}=et,zt=compact$3({textStyle:kt,layerStyle:Nt,animationStyle:Vt});for(const[Xt,Wt]of Object.entries(zt)){const nr=flatten(Wt??{},Jt=>isObject$9(Jt)&&"value"in Jt);ut.register(Xt,{values:Object.keys(nr),transform(Jt){return _t(nr[Jt])}})}}ft(),ut.addPropertyType("animationName",Object.keys(et.keyframes??{}));const gt=new Set(["css",...ut.keys(),...ct.keys()]),mt=memo(kt=>gt.has(kt)||isCssProperty(kt)),vt=kt=>Array.isArray(kt)?kt.reduce((Nt,Vt,zt)=>{const Xt=ct.breakpoints[zt];return Vt!=null&&(Nt[Xt]=Vt),Nt},{}):kt,yt=createNormalizeFn({utility:ut,normalize:vt}),bt=createSerializeFn({conditions:ct,isValidProperty:mt}),_t=createCssFn({transform:ut.transform,conditions:ct,normalize:yt}),xt=createRecipeFn({css:_t,conditions:ct,normalize:yt,layers:st}),St=createSlotRecipeFn({cva:xt});function Tt(){const kt={};for(const[Nt,Vt]of dt.cssVarMap.entries()){const zt=Object.fromEntries(Vt);if(Object.keys(zt).length===0)continue;const Xt=Nt==="base"?it:ct.resolve(Nt),Wt=_t(bt({[Xt]:zt}));mergeWith$1(kt,Wt)}return st.wrap("tokens",kt)}function wt(){const kt=Object.fromEntries(Object.entries(et.keyframes??{}).map(([Vt,zt])=>[`@keyframes ${Vt}`,zt])),Nt=Object.assign({},kt,_t(bt(nt)));return st.wrap("base",Nt)}function Ct(kt){return splitProps(kt,mt)}function Et(){const kt=createPreflight({preflight:ot});return st.wrap("reset",kt)}const At=getTokenMap(dt),Pt=(kt,Nt)=>{var Vt;return((Vt=At.get(kt))==null?void 0:Vt.value)||Nt};Pt.var=(kt,Nt)=>{var Vt;return((Vt=At.get(kt))==null?void 0:Vt.variable)||Nt};function Rt(kt,Nt){var Vt;return((Vt=et.recipes)==null?void 0:Vt[kt])??Nt}function It(kt,Nt){var Vt;return((Vt=et.slotRecipes)==null?void 0:Vt[kt])??Nt}function Mt(kt){return Object.hasOwnProperty.call(et.recipes??{},kt)}function Ot(kt){return Object.hasOwnProperty.call(et.slotRecipes??{},kt)}function $t(kt){return Mt(kt)||Ot(kt)}const Lt=[Et(),wt(),Tt()];return{$$chakra:!0,_config:_,_global:Lt,breakpoints:ht,tokens:dt,conditions:ct,utility:ut,token:Pt,properties:gt,layers:st,isValidProperty:mt,splitCssProps:Ct,normalizeValue:vt,getTokenCss:Tt,getGlobalCss:wt,getPreflightCss:Et,css:_t,cva:xt,sva:St,getRecipe:Rt,getSlotRecipe:It,hasRecipe:$t,isRecipe:Mt,isSlotRecipe:Ot}}function getTokenMap(_e){const _=new Map;return _e.allTokens.forEach(et=>{const{cssVar:tt,virtual:nt,conditions:it}=et.extensions,at=it||nt?tt.ref:et.value;_.set(et.name,{value:at,variable:tt.ref})}),_}const breakpoints={sm:"480px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},empty="var(--chakra-empty,/*!*/ /*!*/)",globalCss=defineGlobalStyles({"*":{fontFeatureSettings:'"cv11"',"--ring-inset":empty,"--ring-offset-width":"0px","--ring-offset-color":"#fff","--ring-color":"rgba(66, 153, 225, 0.6)","--ring-offset-shadow":"0 0 #0000","--ring-shadow":"0 0 #0000",...Object.fromEntries(["brightness","contrast","grayscale","hue-rotate","invert","saturate","sepia","drop-shadow"].map(_e=>[`--${_e}`,empty])),...Object.fromEntries(["blur","brightness","contrast","grayscale","hue-rotate","invert","opacity","saturate","sepia"].map(_e=>[`--backdrop-${_e}`,empty])),"--global-font-mono":"fonts.mono","--global-font-body":"fonts.body","--global-color-border":"colors.border"},html:{color:"fg",bg:"bg",lineHeight:"1.5",colorPalette:"gray"},"*::placeholder":{color:"fg.muted/80"},"*::selection":{bg:"colorPalette.muted/80"}}),layerStyles=defineLayerStyles({"fill.muted":{value:{background:"colorPalette.muted",color:"colorPalette.fg"}},"fill.subtle":{value:{background:"colorPalette.subtle",color:"colorPalette.fg"}},"fill.surface":{value:{background:"colorPalette.subtle",color:"colorPalette.fg",boxShadow:"0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.muted"}},"fill.solid":{value:{background:"colorPalette.solid",color:"colorPalette.contrast"}},"outline.subtle":{value:{color:"colorPalette.fg",boxShadow:"inset 0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.subtle"}},"outline.solid":{value:{borderWidth:"1px",borderColor:"colorPalette.solid",color:"colorPalette.fg"}},"indicator.bottom":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",bottom:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.top":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",top:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.start":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineStart:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.end":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineEnd:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},disabled:{value:{opacity:"0.5",cursor:"not-allowed"}},none:{value:{}}}),animationStyles=defineAnimationStyles({"slide-fade-in":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-from-bottom, fade-in"},"&[data-placement^=bottom]":{animationName:"slide-from-top, fade-in"},"&[data-placement^=left]":{animationName:"slide-from-right, fade-in"},"&[data-placement^=right]":{animationName:"slide-from-left, fade-in"}}},"slide-fade-out":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-to-bottom, fade-out"},"&[data-placement^=bottom]":{animationName:"slide-to-top, fade-out"},"&[data-placement^=left]":{animationName:"slide-to-right, fade-out"},"&[data-placement^=right]":{animationName:"slide-to-left, fade-out"}}},"scale-fade-in":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-in, fade-in"}},"scale-fade-out":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-out, fade-out"}}}),badgeRecipe=defineRecipe({className:"chakra-badge",base:{display:"inline-flex",alignItems:"center",borderRadius:"l2",gap:"1",fontWeight:"medium",fontVariantNumeric:"tabular-nums",whiteSpace:"nowrap",userSelect:"none"},variants:{variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg"},outline:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},plain:{color:"colorPalette.fg"}},size:{xs:{textStyle:"2xs",px:"1",minH:"4"},sm:{textStyle:"xs",px:"1.5",minH:"5"},md:{textStyle:"sm",px:"2",minH:"6"},lg:{textStyle:"sm",px:"2.5",minH:"7"}}},defaultVariants:{variant:"subtle",size:"sm"}}),buttonRecipe=defineRecipe({className:"chakra-button",base:{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",borderRadius:"l2",whiteSpace:"nowrap",verticalAlign:"middle",borderWidth:"1px",borderColor:"transparent",cursor:"button",flexShrink:"0",outline:"0",lineHeight:"1.2",isolation:"isolate",fontWeight:"medium",transitionProperty:"common",transitionDuration:"moderate",focusVisibleRing:"outside",_disabled:{layerStyle:"disabled"},_icon:{flexShrink:"0"}},variants:{size:{"2xs":{h:"6",minW:"6",textStyle:"xs",px:"2",gap:"1",_icon:{width:"3.5",height:"3.5"}},xs:{h:"8",minW:"8",textStyle:"xs",px:"2.5",gap:"1",_icon:{width:"4",height:"4"}},sm:{h:"9",minW:"9",px:"3.5",textStyle:"sm",gap:"2",_icon:{width:"4",height:"4"}},md:{h:"10",minW:"10",textStyle:"sm",px:"4",gap:"2",_icon:{width:"5",height:"5"}},lg:{h:"11",minW:"11",textStyle:"md",px:"5",gap:"3",_icon:{width:"5",height:"5"}},xl:{h:"12",minW:"12",textStyle:"md",px:"5",gap:"2.5",_icon:{width:"5",height:"5"}},"2xl":{h:"16",minW:"16",textStyle:"lg",px:"7",gap:"3",_icon:{width:"6",height:"6"}}},variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast",_hover:{bg:"colorPalette.solid/90"},_expanded:{bg:"colorPalette.solid/90"}},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},outline:{borderWidth:"1px",borderColor:"colorPalette.muted",color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},ghost:{color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},plain:{color:"colorPalette.fg"}}},defaultVariants:{size:"md",variant:"solid"}}),checkmarkRecipe=defineRecipe({className:"chakra-checkmark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"l1",focusVisibleRing:"outside",_icon:{boxSize:"full"},_invalid:{colorPalette:"red",borderColor:"border.error"},_disabled:{opacity:"0.5"}},variants:{size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5",p:"0.5"},lg:{boxSize:"6",p:"0.5"}},variant:{solid:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},outline:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg",borderColor:"colorPalette.solid"}},subtle:{bg:"colorPalette.muted",borderColor:"colorPalette.muted","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},plain:{"&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},inverted:{borderColor:"border",color:"colorPalette.fg","&:is([data-state=checked], [data-state=indeterminate])":{borderColor:"colorPalette.solid"}}}},defaultVariants:{variant:"solid",size:"md"}}),{variants:variants$1,defaultVariants:defaultVariants$1}=badgeRecipe,codeRecipe=defineRecipe({className:"chakra-code",base:{fontFamily:"mono",alignItems:"center",display:"inline-flex",borderRadius:"l2"},variants:variants$1,defaultVariants:defaultVariants$1}),colorSwatchRecipe=defineRecipe({className:"color-swatch",base:{boxSize:"var(--swatch-size)",shadow:"inset 0 0 0 1px rgba(0, 0, 0, 0.1)","--checker-size":"8px","--checker-bg":"colors.bg","--checker-fg":"colors.bg.emphasized",background:"linear-gradient(var(--color), var(--color)), repeating-conic-gradient(var(--checker-fg) 0%, var(--checker-fg) 25%, var(--checker-bg) 0%, var(--checker-bg) 50%) 0% 50% / var(--checker-size) var(--checker-size) !important",display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},variants:{size:{"2xs":{"--swatch-size":"sizes.3.5"},xs:{"--swatch-size":"sizes.4"},sm:{"--swatch-size":"sizes.4.5"},md:{"--swatch-size":"sizes.5"},lg:{"--swatch-size":"sizes.6"},xl:{"--swatch-size":"sizes.7"},"2xl":{"--swatch-size":"sizes.8"},inherit:{"--swatch-size":"inherit"},full:{"--swatch-size":"100%"}},shape:{square:{borderRadius:"none"},circle:{borderRadius:"full"},rounded:{borderRadius:"l1"}}},defaultVariants:{size:"md",shape:"rounded"}}),containerRecipe=defineRecipe({className:"chakra-container",base:{position:"relative",maxWidth:"8xl",w:"100%",mx:"auto",px:{base:"4",md:"6",lg:"8"}},variants:{centerContent:{true:{display:"flex",flexDirection:"column",alignItems:"center"}},fluid:{true:{maxWidth:"full"}}}}),headingRecipe=defineRecipe({className:"chakra-heading",base:{fontFamily:"heading",fontWeight:"semibold"},variants:{size:{xs:{textStyle:"xs"},sm:{textStyle:"sm"},md:{textStyle:"md"},lg:{textStyle:"lg"},xl:{textStyle:"xl"},"2xl":{textStyle:"2xl"},"3xl":{textStyle:"3xl"},"4xl":{textStyle:"4xl"},"5xl":{textStyle:"5xl"},"6xl":{textStyle:"6xl"},"7xl":{textStyle:"7xl"}}},defaultVariants:{size:"xl"}}),iconRecipe=defineRecipe({className:"chakra-icon",base:{display:"inline-block",lineHeight:"1em",flexShrink:"0",color:"currentcolor",verticalAlign:"middle"},variants:{size:{inherit:{},xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5"},lg:{boxSize:"6"},xl:{boxSize:"7"},"2xl":{boxSize:"8"}}},defaultVariants:{size:"inherit"}}),inputRecipe=defineRecipe({className:"chakra-input",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},height:"var(--input-height)",minW:"var(--input-height)","--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{"2xs":{textStyle:"xs",px:"2","--input-height":"sizes.7"},xs:{textStyle:"xs",px:"2","--input-height":"sizes.8"},sm:{textStyle:"sm",px:"2.5","--input-height":"sizes.9"},md:{textStyle:"sm",px:"3","--input-height":"sizes.10"},lg:{textStyle:"md",px:"4","--input-height":"sizes.11"},xl:{textStyle:"md",px:"4.5","--input-height":"sizes.12"},"2xl":{textStyle:"lg",px:"5","--input-height":"sizes.16"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}}),inputAddonRecipe=defineRecipe({className:"chakra-input-addon",base:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap",alignSelf:"stretch",borderRadius:"l2"},variants:{size:inputRecipe.variants.size,variant:{outline:{borderWidth:"1px",borderColor:"border",bg:"bg.muted"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.emphasized"},flushed:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}},defaultVariants:{size:"md",variant:"outline"}}),kbdRecipe=defineRecipe({className:"chakra-kbd",base:{display:"inline-flex",alignItems:"center",fontWeight:"medium",fontFamily:"mono",flexShrink:"0",whiteSpace:"nowrap",wordSpacing:"-0.5em",userSelect:"none",px:"1",borderRadius:"l2"},variants:{variant:{raised:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderWidth:"1px",borderBottomWidth:"2px",borderColor:"colorPalette.muted"},outline:{borderWidth:"1px",color:"colorPalette.fg"},subtle:{bg:"colorPalette.muted",color:"colorPalette.fg"},plain:{color:"colorPalette.fg"}},size:{sm:{textStyle:"xs",height:"4.5"},md:{textStyle:"sm",height:"5"},lg:{textStyle:"md",height:"6"}}},defaultVariants:{size:"md",variant:"raised"}}),linkRecipe=defineRecipe({className:"chakra-link",base:{display:"inline-flex",alignItems:"center",outline:"none",gap:"1.5",cursor:"pointer",borderRadius:"l1",focusRing:"outside"},variants:{variant:{underline:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"},plain:{color:"colorPalette.fg",_hover:{textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"}}}},defaultVariants:{variant:"plain"}}),markRecipe=defineRecipe({className:"chakra-mark",base:{bg:"transparent",color:"inherit",whiteSpace:"nowrap"},variants:{variant:{subtle:{bg:"colorPalette.subtle",color:"inherit"},solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},text:{fontWeight:"medium"},plain:{}}}}),radiomarkRecipe=defineRecipe({className:"chakra-radiomark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,verticalAlign:"top",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"full",cursor:"radio",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing",outlineOffset:"2px"},_invalid:{colorPalette:"red",borderColor:"red.500"},_disabled:{opacity:"0.5",cursor:"disabled"},"& .dot":{height:"100%",width:"100%",borderRadius:"full",bg:"currentColor",scale:"0.4"}},variants:{variant:{solid:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},subtle:{borderWidth:"1px",bg:"colorPalette.muted",borderColor:"colorPalette.muted",color:"transparent",_checked:{color:"colorPalette.fg"}},outline:{borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.fg",borderColor:"colorPalette.solid"},"& .dot":{scale:"0.6"}},inverted:{bg:"bg",borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.solid",borderColor:"currentcolor"}}},size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5"},lg:{boxSize:"6"}}},defaultVariants:{variant:"solid",size:"md"}}),separatorRecipe=defineRecipe({className:"chakra-separator",base:{display:"block",borderColor:"border"},variants:{variant:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"},dotted:{borderStyle:"dotted"}},orientation:{vertical:{borderInlineStartWidth:"var(--separator-thickness)"},horizontal:{borderTopWidth:"var(--separator-thickness)"}},size:{xs:{"--separator-thickness":"0.5px"},sm:{"--separator-thickness":"1px"},md:{"--separator-thickness":"2px"},lg:{"--separator-thickness":"3px"}}},defaultVariants:{size:"sm",variant:"solid",orientation:"horizontal"}}),skeletonRecipe=defineRecipe({className:"chakra-skeleton",base:{},variants:{loading:{true:{borderRadius:"l2",boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none",flexShrink:"0","&::before, &::after, *":{visibility:"hidden"}},false:{background:"unset",animation:"fade-in var(--fade-duration, 0.1s) ease-out !important"}},variant:{pulse:{background:"bg.emphasized",animation:"pulse",animationDuration:"var(--duration, 1.2s)"},shine:{"--animate-from":"200%","--animate-to":"-200%","--start-color":"colors.bg.muted","--end-color":"colors.bg.emphasized",backgroundImage:"linear-gradient(270deg,var(--start-color),var(--end-color),var(--end-color),var(--start-color))",backgroundSize:"400% 100%",animation:"bg-position var(--duration, 5s) ease-in-out infinite"},none:{animation:"none"}}},defaultVariants:{variant:"pulse",loading:!0}}),skipNavLinkRecipe=defineRecipe({className:"chakra-skip-nav",base:{display:"inline-flex",bg:"bg.panel",padding:"2.5",borderRadius:"l2",fontWeight:"semibold",focusVisibleRing:"outside",textStyle:"sm",userSelect:"none",border:"0",height:"1px",width:"1px",margin:"-1px",outline:"0",overflow:"hidden",position:"absolute",clip:"rect(0 0 0 0)",_focusVisible:{clip:"auto",width:"auto",height:"auto",position:"fixed",top:"6",insetStart:"6"}}}),spinnerRecipe=defineRecipe({className:"chakra-spinner",base:{display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderWidth:"2px",borderRadius:"full",width:"var(--spinner-size)",height:"var(--spinner-size)",animation:"spin",animationDuration:"slowest","--spinner-track-color":"transparent",borderBottomColor:"var(--spinner-track-color)",borderInlineStartColor:"var(--spinner-track-color)"},variants:{size:{inherit:{"--spinner-size":"1em"},xs:{"--spinner-size":"sizes.3"},sm:{"--spinner-size":"sizes.4"},md:{"--spinner-size":"sizes.5"},lg:{"--spinner-size":"sizes.8"},xl:{"--spinner-size":"sizes.10"}}},defaultVariants:{size:"md"}}),textareaRecipe=defineRecipe({className:"chakra-textarea",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},"--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{xs:{textStyle:"xs",px:"2",py:"1.5",scrollPaddingBottom:"1.5"},sm:{textStyle:"sm",px:"2.5",py:"2",scrollPaddingBottom:"2"},md:{textStyle:"sm",px:"3",py:"2",scrollPaddingBottom:"2"},lg:{textStyle:"md",px:"4",py:"3",scrollPaddingBottom:"3"},xl:{textStyle:"md",px:"4.5",py:"3.5",scrollPaddingBottom:"3.5"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}}),recipes={badge:badgeRecipe,button:buttonRecipe,code:codeRecipe,container:containerRecipe,heading:headingRecipe,input:inputRecipe,inputAddon:inputAddonRecipe,kbd:kbdRecipe,link:linkRecipe,mark:markRecipe,separator:separatorRecipe,skeleton:skeletonRecipe,skipNavLink:skipNavLinkRecipe,spinner:spinnerRecipe,textarea:textareaRecipe,icon:iconRecipe,checkmark:checkmarkRecipe,radiomark:radiomarkRecipe,colorSwatch:colorSwatchRecipe},semanticColors=defineSemanticTokens.colors({bg:{DEFAULT:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},emphasized:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},inverted:{value:{_light:"{colors.black}",_dark:"{colors.white}"}},panel:{value:{_light:"{colors.white}",_dark:"{colors.gray.950}"}},error:{value:{_light:"{colors.red.50}",_dark:"{colors.red.950}"}},warning:{value:{_light:"{colors.orange.50}",_dark:"{colors.orange.950}"}},success:{value:{_light:"{colors.green.50}",_dark:"{colors.green.950}"}},info:{value:{_light:"{colors.blue.50}",_dark:"{colors.blue.950}"}}},fg:{DEFAULT:{value:{_light:"{colors.black}",_dark:"{colors.gray.50}"}},muted:{value:{_light:"{colors.gray.600}",_dark:"{colors.gray.400}"}},subtle:{value:{_light:"{colors.gray.400}",_dark:"{colors.gray.500}"}},inverted:{value:{_light:"{colors.gray.50}",_dark:"{colors.black}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.300}"}},success:{value:{_light:"{colors.green.600}",_dark:"{colors.green.300}"}},info:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.300}"}}},border:{DEFAULT:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},inverted:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.500}",_dark:"{colors.orange.400}"}},success:{value:{_light:"{colors.green.500}",_dark:"{colors.green.400}"}},info:{value:{_light:"{colors.blue.500}",_dark:"{colors.blue.400}"}}},gray:{contrast:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},fg:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},subtle:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},muted:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},solid:{value:{_light:"{colors.gray.900}",_dark:"{colors.white}"}},focusRing:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}}},red:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.red.700}",_dark:"{colors.red.300}"}},subtle:{value:{_light:"{colors.red.100}",_dark:"{colors.red.900}"}},muted:{value:{_light:"{colors.red.200}",_dark:"{colors.red.800}"}},emphasized:{value:{_light:"{colors.red.300}",_dark:"{colors.red.700}"}},solid:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}},focusRing:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}}},orange:{contrast:{value:{_light:"white",_dark:"black"}},fg:{value:{_light:"{colors.orange.700}",_dark:"{colors.orange.300}"}},subtle:{value:{_light:"{colors.orange.100}",_dark:"{colors.orange.900}"}},muted:{value:{_light:"{colors.orange.200}",_dark:"{colors.orange.800}"}},emphasized:{value:{_light:"{colors.orange.300}",_dark:"{colors.orange.700}"}},solid:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}},focusRing:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}}},green:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.green.700}",_dark:"{colors.green.300}"}},subtle:{value:{_light:"{colors.green.100}",_dark:"{colors.green.900}"}},muted:{value:{_light:"{colors.green.200}",_dark:"{colors.green.800}"}},emphasized:{value:{_light:"{colors.green.300}",_dark:"{colors.green.700}"}},solid:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}},focusRing:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}}},blue:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.blue.700}",_dark:"{colors.blue.300}"}},subtle:{value:{_light:"{colors.blue.100}",_dark:"{colors.blue.900}"}},muted:{value:{_light:"{colors.blue.200}",_dark:"{colors.blue.800}"}},emphasized:{value:{_light:"{colors.blue.300}",_dark:"{colors.blue.700}"}},solid:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}},focusRing:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}}},yellow:{contrast:{value:{_light:"black",_dark:"black"}},fg:{value:{_light:"{colors.yellow.800}",_dark:"{colors.yellow.300}"}},subtle:{value:{_light:"{colors.yellow.100}",_dark:"{colors.yellow.900}"}},muted:{value:{_light:"{colors.yellow.200}",_dark:"{colors.yellow.800}"}},emphasized:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.700}"}},solid:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}},focusRing:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}}},teal:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.teal.700}",_dark:"{colors.teal.300}"}},subtle:{value:{_light:"{colors.teal.100}",_dark:"{colors.teal.900}"}},muted:{value:{_light:"{colors.teal.200}",_dark:"{colors.teal.800}"}},emphasized:{value:{_light:"{colors.teal.300}",_dark:"{colors.teal.700}"}},solid:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}},focusRing:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}}},purple:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.purple.700}",_dark:"{colors.purple.300}"}},subtle:{value:{_light:"{colors.purple.100}",_dark:"{colors.purple.900}"}},muted:{value:{_light:"{colors.purple.200}",_dark:"{colors.purple.800}"}},emphasized:{value:{_light:"{colors.purple.300}",_dark:"{colors.purple.700}"}},solid:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}},focusRing:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}}},pink:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.pink.700}",_dark:"{colors.pink.300}"}},subtle:{value:{_light:"{colors.pink.100}",_dark:"{colors.pink.900}"}},muted:{value:{_light:"{colors.pink.200}",_dark:"{colors.pink.800}"}},emphasized:{value:{_light:"{colors.pink.300}",_dark:"{colors.pink.700}"}},solid:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}},focusRing:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}}},cyan:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.cyan.700}",_dark:"{colors.cyan.300}"}},subtle:{value:{_light:"{colors.cyan.100}",_dark:"{colors.cyan.900}"}},muted:{value:{_light:"{colors.cyan.200}",_dark:"{colors.cyan.800}"}},emphasized:{value:{_light:"{colors.cyan.300}",_dark:"{colors.cyan.700}"}},solid:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}},focusRing:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}}}}),semanticRadii=defineSemanticTokens.radii({l1:{value:"{radii.xs}"},l2:{value:"{radii.sm}"},l3:{value:"{radii.md}"}}),semanticShadows=defineSemanticTokens.shadows({xs:{value:{_light:"0px 1px 2px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/20}",_dark:"0px 1px 1px {black/64}, 0px 0px 1px inset {colors.gray.300/20}"}},sm:{value:{_light:"0px 2px 4px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 2px 4px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},md:{value:{_light:"0px 4px 8px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 4px 8px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},lg:{value:{_light:"0px 8px 16px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 8px 16px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},xl:{value:{_light:"0px 16px 24px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 16px 24px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},"2xl":{value:{_light:"0px 24px 40px {colors.gray.900/16}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 24px 40px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},inner:{value:{_light:"inset 0 2px 4px 0 {black/5}",_dark:"inset 0 2px 4px 0 black"}},inset:{value:{_light:"inset 0 0 0 1px {black/5}",_dark:"inset 0 0 0 1px {colors.gray.300/5}"}}});var createAnatomy=(_e,_=[])=>({parts:(...et)=>{if(isEmpty(_))return createAnatomy(_e,et);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...et)=>createAnatomy(_e,[..._,...et]),rename:et=>createAnatomy(et,_),keys:()=>_,build:()=>[...new Set(_)].reduce((et,tt)=>Object.assign(et,{[tt]:{selector:[`&[data-scope="${toKebabCase(_e)}"][data-part="${toKebabCase(tt)}"]`,`& [data-scope="${toKebabCase(_e)}"][data-part="${toKebabCase(tt)}"]`].join(", "),attrs:{"data-scope":toKebabCase(_e),"data-part":toKebabCase(tt)}}}),{})}),toKebabCase=_e=>_e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),isEmpty=_e=>_e.length===0,anatomy$n=createAnatomy("accordion").parts("root","item","itemTrigger","itemContent","itemIndicator");anatomy$n.build();var dom$m=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`accordion:${_e.id}`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`accordion:${_e.id}:item:${_}`},getItemContentId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemContent)==null?void 0:tt.call(et,_))??`accordion:${_e.id}:content:${_}`},getItemTriggerId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemTrigger)==null?void 0:tt.call(et,_))??`accordion:${_e.id}:trigger:${_}`},getRootEl:_e=>dom$m.getById(_e,dom$m.getRootId(_e)),getTriggerEls:_e=>{const et=`[aria-controls][data-ownedby='${CSS.escape(dom$m.getRootId(_e))}']:not([disabled])`;return queryAll(dom$m.getRootEl(_e),et)},getFirstTriggerEl:_e=>first(dom$m.getTriggerEls(_e)),getLastTriggerEl:_e=>last(dom$m.getTriggerEls(_e)),getNextTriggerEl:(_e,_)=>nextById(dom$m.getTriggerEls(_e),dom$m.getItemTriggerId(_e,_)),getPrevTriggerEl:(_e,_)=>prevById(dom$m.getTriggerEls(_e),dom$m.getItemTriggerId(_e,_))});createProps$1()(["collapsible","dir","disabled","getRootNode","id","ids","multiple","onFocusChange","onValueChange","orientation","value"]);createProps$1()(["value","disabled"]);var anatomy$m=createAnatomy("collapsible").parts("root","trigger","content");anatomy$m.build();var dom$l=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`collapsible:${_e.id}`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`collapsible:${_e.id}:content`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`collapsible:${_e.id}:trigger`},getRootEl:_e=>dom$l.getById(_e,dom$l.getRootId(_e)),getContentEl:_e=>dom$l.getById(_e,dom$l.getContentId(_e)),getTriggerEl:_e=>dom$l.getById(_e,dom$l.getTriggerId(_e))});createProps$1()(["dir","disabled","getRootNode","id","ids","onExitComplete","onOpenChange","open.controlled","open"]);const[EnvironmentContextProvider,useEnvironmentContext]=createContext$1({name:"EnvironmentContext",hookName:"useEnvironmentContext",providerName:"<EnvironmentProvider />",strict:!1,defaultValue:{getRootNode:()=>document,getDocument:()=>document,getWindow:()=>window}}),sides=["top","right","bottom","left"],min$4=Math.min,max$5=Math.max,round$7=Math.round,floor$2=Math.floor,createCoords=_e=>({x:_e,y:_e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$2(_e,_,et){return max$5(_e,min$4(_,et))}function evaluate(_e,_){return typeof _e=="function"?_e(_):_e}function getSide(_e){return _e.split("-")[0]}function getAlignment(_e){return _e.split("-")[1]}function getOppositeAxis(_e){return _e==="x"?"y":"x"}function getAxisLength(_e){return _e==="y"?"height":"width"}function getSideAxis(_e){return["top","bottom"].includes(getSide(_e))?"y":"x"}function getAlignmentAxis(_e){return getOppositeAxis(getSideAxis(_e))}function getAlignmentSides(_e,_,et){et===void 0&&(et=!1);const tt=getAlignment(_e),nt=getAlignmentAxis(_e),it=getAxisLength(nt);let at=nt==="x"?tt===(et?"end":"start")?"right":"left":tt==="start"?"bottom":"top";return _.reference[it]>_.floating[it]&&(at=getOppositePlacement(at)),[at,getOppositePlacement(at)]}function getExpandedPlacements(_e){const _=getOppositePlacement(_e);return[getOppositeAlignmentPlacement(_e),_,getOppositeAlignmentPlacement(_)]}function getOppositeAlignmentPlacement(_e){return _e.replace(/start|end/g,_=>oppositeAlignmentMap[_])}function getSideList(_e,_,et){const tt=["left","right"],nt=["right","left"],it=["top","bottom"],at=["bottom","top"];switch(_e){case"top":case"bottom":return et?_?nt:tt:_?tt:nt;case"left":case"right":return _?it:at;default:return[]}}function getOppositeAxisPlacements(_e,_,et,tt){const nt=getAlignment(_e);let it=getSideList(getSide(_e),et==="start",tt);return nt&&(it=it.map(at=>at+"-"+nt),_&&(it=it.concat(it.map(getOppositeAlignmentPlacement)))),it}function getOppositePlacement(_e){return _e.replace(/left|right|bottom|top/g,_=>oppositeSideMap[_])}function expandPaddingObject(_e){return{top:0,right:0,bottom:0,left:0,..._e}}function getPaddingObject(_e){return typeof _e!="number"?expandPaddingObject(_e):{top:_e,right:_e,bottom:_e,left:_e}}function rectToClientRect(_e){const{x:_,y:et,width:tt,height:nt}=_e;return{width:tt,height:nt,top:et,left:_,right:_+tt,bottom:et+nt,x:_,y:et}}function computeCoordsFromPlacement(_e,_,et){let{reference:tt,floating:nt}=_e;const it=getSideAxis(_),at=getAlignmentAxis(_),ot=getAxisLength(at),st=getSide(_),dt=it==="y",ht=tt.x+tt.width/2-nt.width/2,ct=tt.y+tt.height/2-nt.height/2,ut=tt[ot]/2-nt[ot]/2;let ft;switch(st){case"top":ft={x:ht,y:tt.y-nt.height};break;case"bottom":ft={x:ht,y:tt.y+tt.height};break;case"right":ft={x:tt.x+tt.width,y:ct};break;case"left":ft={x:tt.x-nt.width,y:ct};break;default:ft={x:tt.x,y:tt.y}}switch(getAlignment(_)){case"start":ft[at]-=ut*(et&&dt?-1:1);break;case"end":ft[at]+=ut*(et&&dt?-1:1);break}return ft}const computePosition$1=async(_e,_,et)=>{const{placement:tt="bottom",strategy:nt="absolute",middleware:it=[],platform:at}=et,ot=it.filter(Boolean),st=await(at.isRTL==null?void 0:at.isRTL(_));let dt=await at.getElementRects({reference:_e,floating:_,strategy:nt}),{x:ht,y:ct}=computeCoordsFromPlacement(dt,tt,st),ut=tt,ft={},gt=0;for(let mt=0;mt<ot.length;mt++){const{name:vt,fn:yt}=ot[mt],{x:bt,y:_t,data:xt,reset:St}=await yt({x:ht,y:ct,initialPlacement:tt,placement:ut,strategy:nt,middlewareData:ft,rects:dt,platform:at,elements:{reference:_e,floating:_}});ht=bt??ht,ct=_t??ct,ft={...ft,[vt]:{...ft[vt],...xt}},St&&gt<=50&&(gt++,typeof St=="object"&&(St.placement&&(ut=St.placement),St.rects&&(dt=St.rects===!0?await at.getElementRects({reference:_e,floating:_,strategy:nt}):St.rects),{x:ht,y:ct}=computeCoordsFromPlacement(dt,ut,st)),mt=-1)}return{x:ht,y:ct,placement:ut,strategy:nt,middlewareData:ft}};async function detectOverflow(_e,_){var et;_===void 0&&(_={});const{x:tt,y:nt,platform:it,rects:at,elements:ot,strategy:st}=_e,{boundary:dt="clippingAncestors",rootBoundary:ht="viewport",elementContext:ct="floating",altBoundary:ut=!1,padding:ft=0}=evaluate(_,_e),gt=getPaddingObject(ft),vt=ot[ut?ct==="floating"?"reference":"floating":ct],yt=rectToClientRect(await it.getClippingRect({element:(et=await(it.isElement==null?void 0:it.isElement(vt)))==null||et?vt:vt.contextElement||await(it.getDocumentElement==null?void 0:it.getDocumentElement(ot.floating)),boundary:dt,rootBoundary:ht,strategy:st})),bt=ct==="floating"?{x:tt,y:nt,width:at.floating.width,height:at.floating.height}:at.reference,_t=await(it.getOffsetParent==null?void 0:it.getOffsetParent(ot.floating)),xt=await(it.isElement==null?void 0:it.isElement(_t))?await(it.getScale==null?void 0:it.getScale(_t))||{x:1,y:1}:{x:1,y:1},St=rectToClientRect(it.convertOffsetParentRelativeRectToViewportRelativeRect?await it.convertOffsetParentRelativeRectToViewportRelativeRect({elements:ot,rect:bt,offsetParent:_t,strategy:st}):bt);return{top:(yt.top-St.top+gt.top)/xt.y,bottom:(St.bottom-yt.bottom+gt.bottom)/xt.y,left:(yt.left-St.left+gt.left)/xt.x,right:(St.right-yt.right+gt.right)/xt.x}}const arrow$1=_e=>({name:"arrow",options:_e,async fn(_){const{x:et,y:tt,placement:nt,rects:it,platform:at,elements:ot,middlewareData:st}=_,{element:dt,padding:ht=0}=evaluate(_e,_)||{};if(dt==null)return{};const ct=getPaddingObject(ht),ut={x:et,y:tt},ft=getAlignmentAxis(nt),gt=getAxisLength(ft),mt=await at.getDimensions(dt),vt=ft==="y",yt=vt?"top":"left",bt=vt?"bottom":"right",_t=vt?"clientHeight":"clientWidth",xt=it.reference[gt]+it.reference[ft]-ut[ft]-it.floating[gt],St=ut[ft]-it.reference[ft],Tt=await(at.getOffsetParent==null?void 0:at.getOffsetParent(dt));let wt=Tt?Tt[_t]:0;(!wt||!await(at.isElement==null?void 0:at.isElement(Tt)))&&(wt=ot.floating[_t]||it.floating[gt]);const Ct=xt/2-St/2,Et=wt/2-mt[gt]/2-1,At=min$4(ct[yt],Et),Pt=min$4(ct[bt],Et),Rt=At,It=wt-mt[gt]-Pt,Mt=wt/2-mt[gt]/2+Ct,Ot=clamp$2(Rt,Mt,It),$t=!st.arrow&&getAlignment(nt)!=null&&Mt!==Ot&&it.reference[gt]/2-(Mt<Rt?At:Pt)-mt[gt]/2<0,Lt=$t?Mt<Rt?Mt-Rt:Mt-It:0;return{[ft]:ut[ft]+Lt,data:{[ft]:Ot,centerOffset:Mt-Ot-Lt,...$t&&{alignmentOffset:Lt}},reset:$t}}}),flip$1=function(_e){return _e===void 0&&(_e={}),{name:"flip",options:_e,async fn(_){var et,tt;const{placement:nt,middlewareData:it,rects:at,initialPlacement:ot,platform:st,elements:dt}=_,{mainAxis:ht=!0,crossAxis:ct=!0,fallbackPlacements:ut,fallbackStrategy:ft="bestFit",fallbackAxisSideDirection:gt="none",flipAlignment:mt=!0,...vt}=evaluate(_e,_);if((et=it.arrow)!=null&&et.alignmentOffset)return{};const yt=getSide(nt),bt=getSideAxis(ot),_t=getSide(ot)===ot,xt=await(st.isRTL==null?void 0:st.isRTL(dt.floating)),St=ut||(_t||!mt?[getOppositePlacement(ot)]:getExpandedPlacements(ot)),Tt=gt!=="none";!ut&&Tt&&St.push(...getOppositeAxisPlacements(ot,mt,gt,xt));const wt=[ot,...St],Ct=await detectOverflow(_,vt),Et=[];let At=((tt=it.flip)==null?void 0:tt.overflows)||[];if(ht&&Et.push(Ct[yt]),ct){const Mt=getAlignmentSides(nt,at,xt);Et.push(Ct[Mt[0]],Ct[Mt[1]])}if(At=[...At,{placement:nt,overflows:Et}],!Et.every(Mt=>Mt<=0)){var Pt,Rt;const Mt=(((Pt=it.flip)==null?void 0:Pt.index)||0)+1,Ot=wt[Mt];if(Ot)return{data:{index:Mt,overflows:At},reset:{placement:Ot}};let $t=(Rt=At.filter(Lt=>Lt.overflows[0]<=0).sort((Lt,kt)=>Lt.overflows[1]-kt.overflows[1])[0])==null?void 0:Rt.placement;if(!$t)switch(ft){case"bestFit":{var It;const Lt=(It=At.filter(kt=>{if(Tt){const Nt=getSideAxis(kt.placement);return Nt===bt||Nt==="y"}return!0}).map(kt=>[kt.placement,kt.overflows.filter(Nt=>Nt>0).reduce((Nt,Vt)=>Nt+Vt,0)]).sort((kt,Nt)=>kt[1]-Nt[1])[0])==null?void 0:It[0];Lt&&($t=Lt);break}case"initialPlacement":$t=ot;break}if(nt!==$t)return{reset:{placement:$t}}}return{}}}};function getSideOffsets(_e,_){return{top:_e.top-_.height,right:_e.right-_.width,bottom:_e.bottom-_.height,left:_e.left-_.width}}function isAnySideFullyClipped(_e){return sides.some(_=>_e[_]>=0)}const hide$1=function(_e){return _e===void 0&&(_e={}),{name:"hide",options:_e,async fn(_){const{rects:et}=_,{strategy:tt="referenceHidden",...nt}=evaluate(_e,_);switch(tt){case"referenceHidden":{const it=await detectOverflow(_,{...nt,elementContext:"reference"}),at=getSideOffsets(it,et.reference);return{data:{referenceHiddenOffsets:at,referenceHidden:isAnySideFullyClipped(at)}}}case"escaped":{const it=await detectOverflow(_,{...nt,altBoundary:!0}),at=getSideOffsets(it,et.floating);return{data:{escapedOffsets:at,escaped:isAnySideFullyClipped(at)}}}default:return{}}}}};async function convertValueToCoords(_e,_){const{placement:et,platform:tt,elements:nt}=_e,it=await(tt.isRTL==null?void 0:tt.isRTL(nt.floating)),at=getSide(et),ot=getAlignment(et),st=getSideAxis(et)==="y",dt=["left","top"].includes(at)?-1:1,ht=it&&st?-1:1,ct=evaluate(_,_e);let{mainAxis:ut,crossAxis:ft,alignmentAxis:gt}=typeof ct=="number"?{mainAxis:ct,crossAxis:0,alignmentAxis:null}:{mainAxis:ct.mainAxis||0,crossAxis:ct.crossAxis||0,alignmentAxis:ct.alignmentAxis};return ot&&typeof gt=="number"&&(ft=ot==="end"?gt*-1:gt),st?{x:ft*ht,y:ut*dt}:{x:ut*dt,y:ft*ht}}const offset$1=function(_e){return _e===void 0&&(_e=0),{name:"offset",options:_e,async fn(_){var et,tt;const{x:nt,y:it,placement:at,middlewareData:ot}=_,st=await convertValueToCoords(_,_e);return at===((et=ot.offset)==null?void 0:et.placement)&&(tt=ot.arrow)!=null&&tt.alignmentOffset?{}:{x:nt+st.x,y:it+st.y,data:{...st,placement:at}}}}},shift$1=function(_e){return _e===void 0&&(_e={}),{name:"shift",options:_e,async fn(_){const{x:et,y:tt,placement:nt}=_,{mainAxis:it=!0,crossAxis:at=!1,limiter:ot={fn:vt=>{let{x:yt,y:bt}=vt;return{x:yt,y:bt}}},...st}=evaluate(_e,_),dt={x:et,y:tt},ht=await detectOverflow(_,st),ct=getSideAxis(getSide(nt)),ut=getOppositeAxis(ct);let ft=dt[ut],gt=dt[ct];if(it){const vt=ut==="y"?"top":"left",yt=ut==="y"?"bottom":"right",bt=ft+ht[vt],_t=ft-ht[yt];ft=clamp$2(bt,ft,_t)}if(at){const vt=ct==="y"?"top":"left",yt=ct==="y"?"bottom":"right",bt=gt+ht[vt],_t=gt-ht[yt];gt=clamp$2(bt,gt,_t)}const mt=ot.fn({..._,[ut]:ft,[ct]:gt});return{...mt,data:{x:mt.x-et,y:mt.y-tt,enabled:{[ut]:it,[ct]:at}}}}}},limitShift$1=function(_e){return _e===void 0&&(_e={}),{options:_e,fn(_){const{x:et,y:tt,placement:nt,rects:it,middlewareData:at}=_,{offset:ot=0,mainAxis:st=!0,crossAxis:dt=!0}=evaluate(_e,_),ht={x:et,y:tt},ct=getSideAxis(nt),ut=getOppositeAxis(ct);let ft=ht[ut],gt=ht[ct];const mt=evaluate(ot,_),vt=typeof mt=="number"?{mainAxis:mt,crossAxis:0}:{mainAxis:0,crossAxis:0,...mt};if(st){const _t=ut==="y"?"height":"width",xt=it.reference[ut]-it.floating[_t]+vt.mainAxis,St=it.reference[ut]+it.reference[_t]-vt.mainAxis;ft<xt?ft=xt:ft>St&&(ft=St)}if(dt){var yt,bt;const _t=ut==="y"?"width":"height",xt=["top","left"].includes(getSide(nt)),St=it.reference[ct]-it.floating[_t]+(xt&&((yt=at.offset)==null?void 0:yt[ct])||0)+(xt?0:vt.crossAxis),Tt=it.reference[ct]+it.reference[_t]+(xt?0:((bt=at.offset)==null?void 0:bt[ct])||0)-(xt?vt.crossAxis:0);gt<St?gt=St:gt>Tt&&(gt=Tt)}return{[ut]:ft,[ct]:gt}}}},size$1=function(_e){return _e===void 0&&(_e={}),{name:"size",options:_e,async fn(_){var et,tt;const{placement:nt,rects:it,platform:at,elements:ot}=_,{apply:st=()=>{},...dt}=evaluate(_e,_),ht=await detectOverflow(_,dt),ct=getSide(nt),ut=getAlignment(nt),ft=getSideAxis(nt)==="y",{width:gt,height:mt}=it.floating;let vt,yt;ct==="top"||ct==="bottom"?(vt=ct,yt=ut===(await(at.isRTL==null?void 0:at.isRTL(ot.floating))?"start":"end")?"left":"right"):(yt=ct,vt=ut==="end"?"top":"bottom");const bt=mt-ht.top-ht.bottom,_t=gt-ht.left-ht.right,xt=min$4(mt-ht[vt],bt),St=min$4(gt-ht[yt],_t),Tt=!_.middlewareData.shift;let wt=xt,Ct=St;if((et=_.middlewareData.shift)!=null&&et.enabled.x&&(Ct=_t),(tt=_.middlewareData.shift)!=null&&tt.enabled.y&&(wt=bt),Tt&&!ut){const At=max$5(ht.left,0),Pt=max$5(ht.right,0),Rt=max$5(ht.top,0),It=max$5(ht.bottom,0);ft?Ct=gt-2*(At!==0||Pt!==0?At+Pt:max$5(ht.left,ht.right)):wt=mt-2*(Rt!==0||It!==0?Rt+It:max$5(ht.top,ht.bottom))}await st({..._,availableWidth:Ct,availableHeight:wt});const Et=await at.getDimensions(ot.floating);return gt!==Et.width||mt!==Et.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(_e){return isNode$1(_e)?(_e.nodeName||"").toLowerCase():"#document"}function getWindow(_e){var _;return(_e==null||(_=_e.ownerDocument)==null?void 0:_.defaultView)||window}function getDocumentElement(_e){var _;return(_=(isNode$1(_e)?_e.ownerDocument:_e.document)||window.document)==null?void 0:_.documentElement}function isNode$1(_e){return hasWindow()?_e instanceof Node||_e instanceof getWindow(_e).Node:!1}function isElement$1(_e){return hasWindow()?_e instanceof Element||_e instanceof getWindow(_e).Element:!1}function isHTMLElement(_e){return hasWindow()?_e instanceof HTMLElement||_e instanceof getWindow(_e).HTMLElement:!1}function isShadowRoot(_e){return!hasWindow()||typeof ShadowRoot>"u"?!1:_e instanceof ShadowRoot||_e instanceof getWindow(_e).ShadowRoot}function isOverflowElement(_e){const{overflow:_,overflowX:et,overflowY:tt,display:nt}=getComputedStyle$2(_e);return/auto|scroll|overlay|hidden|clip/.test(_+tt+et)&&!["inline","contents"].includes(nt)}function isTableElement(_e){return["table","td","th"].includes(getNodeName(_e))}function isTopLayer(_e){return[":popover-open",":modal"].some(_=>{try{return _e.matches(_)}catch{return!1}})}function isContainingBlock(_e){const _=isWebKit(),et=isElement$1(_e)?getComputedStyle$2(_e):_e;return["transform","translate","scale","rotate","perspective"].some(tt=>et[tt]?et[tt]!=="none":!1)||(et.containerType?et.containerType!=="normal":!1)||!_&&(et.backdropFilter?et.backdropFilter!=="none":!1)||!_&&(et.filter?et.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(tt=>(et.willChange||"").includes(tt))||["paint","layout","strict","content"].some(tt=>(et.contain||"").includes(tt))}function getContainingBlock(_e){let _=getParentNode$1(_e);for(;isHTMLElement(_)&&!isLastTraversableNode(_);){if(isContainingBlock(_))return _;if(isTopLayer(_))return null;_=getParentNode$1(_)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_e){return["html","body","#document"].includes(getNodeName(_e))}function getComputedStyle$2(_e){return getWindow(_e).getComputedStyle(_e)}function getNodeScroll(_e){return isElement$1(_e)?{scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop}:{scrollLeft:_e.scrollX,scrollTop:_e.scrollY}}function getParentNode$1(_e){if(getNodeName(_e)==="html")return _e;const _=_e.assignedSlot||_e.parentNode||isShadowRoot(_e)&&_e.host||getDocumentElement(_e);return isShadowRoot(_)?_.host:_}function getNearestOverflowAncestor(_e){const _=getParentNode$1(_e);return isLastTraversableNode(_)?_e.ownerDocument?_e.ownerDocument.body:_e.body:isHTMLElement(_)&&isOverflowElement(_)?_:getNearestOverflowAncestor(_)}function getOverflowAncestors(_e,_,et){var tt;_===void 0&&(_=[]),et===void 0&&(et=!0);const nt=getNearestOverflowAncestor(_e),it=nt===((tt=_e.ownerDocument)==null?void 0:tt.body),at=getWindow(nt);if(it){const ot=getFrameElement(at);return _.concat(at,at.visualViewport||[],isOverflowElement(nt)?nt:[],ot&&et?getOverflowAncestors(ot):[])}return _.concat(nt,getOverflowAncestors(nt,[],et))}function getFrameElement(_e){return _e.parent&&Object.getPrototypeOf(_e.parent)?_e.frameElement:null}function getCssDimensions(_e){const _=getComputedStyle$2(_e);let et=parseFloat(_.width)||0,tt=parseFloat(_.height)||0;const nt=isHTMLElement(_e),it=nt?_e.offsetWidth:et,at=nt?_e.offsetHeight:tt,ot=round$7(et)!==it||round$7(tt)!==at;return ot&&(et=it,tt=at),{width:et,height:tt,$:ot}}function unwrapElement(_e){return isElement$1(_e)?_e:_e.contextElement}function getScale(_e){const _=unwrapElement(_e);if(!isHTMLElement(_))return createCoords(1);const et=_.getBoundingClientRect(),{width:tt,height:nt,$:it}=getCssDimensions(_);let at=(it?round$7(et.width):et.width)/tt,ot=(it?round$7(et.height):et.height)/nt;return(!at||!Number.isFinite(at))&&(at=1),(!ot||!Number.isFinite(ot))&&(ot=1),{x:at,y:ot}}const noOffsets=createCoords(0);function getVisualOffsets(_e){const _=getWindow(_e);return!isWebKit()||!_.visualViewport?noOffsets:{x:_.visualViewport.offsetLeft,y:_.visualViewport.offsetTop}}function shouldAddVisualOffsets(_e,_,et){return _===void 0&&(_=!1),!et||_&&et!==getWindow(_e)?!1:_}function getBoundingClientRect(_e,_,et,tt){_===void 0&&(_=!1),et===void 0&&(et=!1);const nt=_e.getBoundingClientRect(),it=unwrapElement(_e);let at=createCoords(1);_&&(tt?isElement$1(tt)&&(at=getScale(tt)):at=getScale(_e));const ot=shouldAddVisualOffsets(it,et,tt)?getVisualOffsets(it):createCoords(0);let st=(nt.left+ot.x)/at.x,dt=(nt.top+ot.y)/at.y,ht=nt.width/at.x,ct=nt.height/at.y;if(it){const ut=getWindow(it),ft=tt&&isElement$1(tt)?getWindow(tt):tt;let gt=ut,mt=getFrameElement(gt);for(;mt&&tt&&ft!==gt;){const vt=getScale(mt),yt=mt.getBoundingClientRect(),bt=getComputedStyle$2(mt),_t=yt.left+(mt.clientLeft+parseFloat(bt.paddingLeft))*vt.x,xt=yt.top+(mt.clientTop+parseFloat(bt.paddingTop))*vt.y;st*=vt.x,dt*=vt.y,ht*=vt.x,ct*=vt.y,st+=_t,dt+=xt,gt=getWindow(mt),mt=getFrameElement(gt)}}return rectToClientRect({width:ht,height:ct,x:st,y:dt})}function getWindowScrollBarX(_e,_){const et=getNodeScroll(_e).scrollLeft;return _?_.left+et:getBoundingClientRect(getDocumentElement(_e)).left+et}function getHTMLOffset(_e,_,et){et===void 0&&(et=!1);const tt=_e.getBoundingClientRect(),nt=tt.left+_.scrollLeft-(et?0:getWindowScrollBarX(_e,tt)),it=tt.top+_.scrollTop;return{x:nt,y:it}}function convertOffsetParentRelativeRectToViewportRelativeRect(_e){let{elements:_,rect:et,offsetParent:tt,strategy:nt}=_e;const it=nt==="fixed",at=getDocumentElement(tt),ot=_?isTopLayer(_.floating):!1;if(tt===at||ot&&it)return et;let st={scrollLeft:0,scrollTop:0},dt=createCoords(1);const ht=createCoords(0),ct=isHTMLElement(tt);if((ct||!ct&&!it)&&((getNodeName(tt)!=="body"||isOverflowElement(at))&&(st=getNodeScroll(tt)),isHTMLElement(tt))){const ft=getBoundingClientRect(tt);dt=getScale(tt),ht.x=ft.x+tt.clientLeft,ht.y=ft.y+tt.clientTop}const ut=at&&!ct&&!it?getHTMLOffset(at,st,!0):createCoords(0);return{width:et.width*dt.x,height:et.height*dt.y,x:et.x*dt.x-st.scrollLeft*dt.x+ht.x+ut.x,y:et.y*dt.y-st.scrollTop*dt.y+ht.y+ut.y}}function getClientRects(_e){return Array.from(_e.getClientRects())}function getDocumentRect(_e){const _=getDocumentElement(_e),et=getNodeScroll(_e),tt=_e.ownerDocument.body,nt=max$5(_.scrollWidth,_.clientWidth,tt.scrollWidth,tt.clientWidth),it=max$5(_.scrollHeight,_.clientHeight,tt.scrollHeight,tt.clientHeight);let at=-et.scrollLeft+getWindowScrollBarX(_e);const ot=-et.scrollTop;return getComputedStyle$2(tt).direction==="rtl"&&(at+=max$5(_.clientWidth,tt.clientWidth)-nt),{width:nt,height:it,x:at,y:ot}}function getViewportRect(_e,_){const et=getWindow(_e),tt=getDocumentElement(_e),nt=et.visualViewport;let it=tt.clientWidth,at=tt.clientHeight,ot=0,st=0;if(nt){it=nt.width,at=nt.height;const dt=isWebKit();(!dt||dt&&_==="fixed")&&(ot=nt.offsetLeft,st=nt.offsetTop)}return{width:it,height:at,x:ot,y:st}}function getInnerBoundingClientRect(_e,_){const et=getBoundingClientRect(_e,!0,_==="fixed"),tt=et.top+_e.clientTop,nt=et.left+_e.clientLeft,it=isHTMLElement(_e)?getScale(_e):createCoords(1),at=_e.clientWidth*it.x,ot=_e.clientHeight*it.y,st=nt*it.x,dt=tt*it.y;return{width:at,height:ot,x:st,y:dt}}function getClientRectFromClippingAncestor(_e,_,et){let tt;if(_==="viewport")tt=getViewportRect(_e,et);else if(_==="document")tt=getDocumentRect(getDocumentElement(_e));else if(isElement$1(_))tt=getInnerBoundingClientRect(_,et);else{const nt=getVisualOffsets(_e);tt={x:_.x-nt.x,y:_.y-nt.y,width:_.width,height:_.height}}return rectToClientRect(tt)}function hasFixedPositionAncestor(_e,_){const et=getParentNode$1(_e);return et===_||!isElement$1(et)||isLastTraversableNode(et)?!1:getComputedStyle$2(et).position==="fixed"||hasFixedPositionAncestor(et,_)}function getClippingElementAncestors(_e,_){const et=_.get(_e);if(et)return et;let tt=getOverflowAncestors(_e,[],!1).filter(ot=>isElement$1(ot)&&getNodeName(ot)!=="body"),nt=null;const it=getComputedStyle$2(_e).position==="fixed";let at=it?getParentNode$1(_e):_e;for(;isElement$1(at)&&!isLastTraversableNode(at);){const ot=getComputedStyle$2(at),st=isContainingBlock(at);!st&&ot.position==="fixed"&&(nt=null),(it?!st&&!nt:!st&&ot.position==="static"&&!!nt&&["absolute","fixed"].includes(nt.position)||isOverflowElement(at)&&!st&&hasFixedPositionAncestor(_e,at))?tt=tt.filter(ht=>ht!==at):nt=ot,at=getParentNode$1(at)}return _.set(_e,tt),tt}function getClippingRect(_e){let{element:_,boundary:et,rootBoundary:tt,strategy:nt}=_e;const at=[...et==="clippingAncestors"?isTopLayer(_)?[]:getClippingElementAncestors(_,this._c):[].concat(et),tt],ot=at[0],st=at.reduce((dt,ht)=>{const ct=getClientRectFromClippingAncestor(_,ht,nt);return dt.top=max$5(ct.top,dt.top),dt.right=min$4(ct.right,dt.right),dt.bottom=min$4(ct.bottom,dt.bottom),dt.left=max$5(ct.left,dt.left),dt},getClientRectFromClippingAncestor(_,ot,nt));return{width:st.right-st.left,height:st.bottom-st.top,x:st.left,y:st.top}}function getDimensions(_e){const{width:_,height:et}=getCssDimensions(_e);return{width:_,height:et}}function getRectRelativeToOffsetParent(_e,_,et){const tt=isHTMLElement(_),nt=getDocumentElement(_),it=et==="fixed",at=getBoundingClientRect(_e,!0,it,_);let ot={scrollLeft:0,scrollTop:0};const st=createCoords(0);if(tt||!tt&&!it)if((getNodeName(_)!=="body"||isOverflowElement(nt))&&(ot=getNodeScroll(_)),tt){const ut=getBoundingClientRect(_,!0,it,_);st.x=ut.x+_.clientLeft,st.y=ut.y+_.clientTop}else nt&&(st.x=getWindowScrollBarX(nt));const dt=nt&&!tt&&!it?getHTMLOffset(nt,ot):createCoords(0),ht=at.left+ot.scrollLeft-st.x-dt.x,ct=at.top+ot.scrollTop-st.y-dt.y;return{x:ht,y:ct,width:at.width,height:at.height}}function isStaticPositioned(_e){return getComputedStyle$2(_e).position==="static"}function getTrueOffsetParent(_e,_){if(!isHTMLElement(_e)||getComputedStyle$2(_e).position==="fixed")return null;if(_)return _(_e);let et=_e.offsetParent;return getDocumentElement(_e)===et&&(et=et.ownerDocument.body),et}function getOffsetParent(_e,_){const et=getWindow(_e);if(isTopLayer(_e))return et;if(!isHTMLElement(_e)){let nt=getParentNode$1(_e);for(;nt&&!isLastTraversableNode(nt);){if(isElement$1(nt)&&!isStaticPositioned(nt))return nt;nt=getParentNode$1(nt)}return et}let tt=getTrueOffsetParent(_e,_);for(;tt&&isTableElement(tt)&&isStaticPositioned(tt);)tt=getTrueOffsetParent(tt,_);return tt&&isLastTraversableNode(tt)&&isStaticPositioned(tt)&&!isContainingBlock(tt)?et:tt||getContainingBlock(_e)||et}const getElementRects=async function(_e){const _=this.getOffsetParent||getOffsetParent,et=this.getDimensions,tt=await et(_e.floating);return{reference:getRectRelativeToOffsetParent(_e.reference,await _(_e.floating),_e.strategy),floating:{x:0,y:0,width:tt.width,height:tt.height}}};function isRTL(_e){return getComputedStyle$2(_e).direction==="rtl"}const platform$1={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement:isElement$1,isRTL};function observeMove(_e,_){let et=null,tt;const nt=getDocumentElement(_e);function it(){var ot;clearTimeout(tt),(ot=et)==null||ot.disconnect(),et=null}function at(ot,st){ot===void 0&&(ot=!1),st===void 0&&(st=1),it();const{left:dt,top:ht,width:ct,height:ut}=_e.getBoundingClientRect();if(ot||_(),!ct||!ut)return;const ft=floor$2(ht),gt=floor$2(nt.clientWidth-(dt+ct)),mt=floor$2(nt.clientHeight-(ht+ut)),vt=floor$2(dt),bt={rootMargin:-ft+"px "+-gt+"px "+-mt+"px "+-vt+"px",threshold:max$5(0,min$4(1,st))||1};let _t=!0;function xt(St){const Tt=St[0].intersectionRatio;if(Tt!==st){if(!_t)return at();Tt?at(!1,Tt):tt=setTimeout(()=>{at(!1,1e-7)},1e3)}_t=!1}try{et=new IntersectionObserver(xt,{...bt,root:nt.ownerDocument})}catch{et=new IntersectionObserver(xt,bt)}et.observe(_e)}return at(!0),it}function autoUpdate(_e,_,et,tt){tt===void 0&&(tt={});const{ancestorScroll:nt=!0,ancestorResize:it=!0,elementResize:at=typeof ResizeObserver=="function",layoutShift:ot=typeof IntersectionObserver=="function",animationFrame:st=!1}=tt,dt=unwrapElement(_e),ht=nt||it?[...dt?getOverflowAncestors(dt):[],...getOverflowAncestors(_)]:[];ht.forEach(yt=>{nt&&yt.addEventListener("scroll",et,{passive:!0}),it&&yt.addEventListener("resize",et)});const ct=dt&&ot?observeMove(dt,et):null;let ut=-1,ft=null;at&&(ft=new ResizeObserver(yt=>{let[bt]=yt;bt&&bt.target===dt&&ft&&(ft.unobserve(_),cancelAnimationFrame(ut),ut=requestAnimationFrame(()=>{var _t;(_t=ft)==null||_t.observe(_)})),et()}),dt&&!st&&ft.observe(dt),ft.observe(_));let gt,mt=st?getBoundingClientRect(_e):null;st&&vt();function vt(){const yt=getBoundingClientRect(_e);mt&&(yt.x!==mt.x||yt.y!==mt.y||yt.width!==mt.width||yt.height!==mt.height)&&et(),mt=yt,gt=requestAnimationFrame(vt)}return et(),()=>{var yt;ht.forEach(bt=>{nt&&bt.removeEventListener("scroll",et),it&&bt.removeEventListener("resize",et)}),ct==null||ct(),(yt=ft)==null||yt.disconnect(),ft=null,st&&cancelAnimationFrame(gt)}}const offset=offset$1,shift=shift$1,flip=flip$1,size=size$1,hide=hide$1,arrow=arrow$1,limitShift=limitShift$1,computePosition=(_e,_,et)=>{const tt=new Map,nt={platform:platform$1,...et},it={...nt.platform,_c:tt};return computePosition$1(_e,_,{...nt,platform:it})};function createDOMRect(_e=0,_=0,et=0,tt=0){if(typeof DOMRect=="function")return new DOMRect(_e,_,et,tt);const nt={x:_e,y:_,width:et,height:tt,top:_,right:_e+et,bottom:_+tt,left:_e};return{...nt,toJSON:()=>nt}}function getDOMRect(_e){if(!_e)return createDOMRect();const{x:_,y:et,width:tt,height:nt}=_e;return createDOMRect(_,et,tt,nt)}function getAnchorElement(_e,_){return{contextElement:isHTMLElement$1(_e)?_e:void 0,getBoundingClientRect:()=>{const et=_e,tt=_==null?void 0:_(et);return tt||!et?getDOMRect(tt):et.getBoundingClientRect()}}}var toVar=_e=>({variable:_e,reference:`var(${_e})`}),cssVars={arrowSize:toVar("--arrow-size"),arrowSizeHalf:toVar("--arrow-size-half"),arrowBg:toVar("--arrow-background"),transformOrigin:toVar("--transform-origin"),arrowOffset:toVar("--arrow-offset")},getTransformOrigin=_e=>({top:"bottom center","top-start":_e?`${_e.x}px bottom`:"left bottom","top-end":_e?`${_e.x}px bottom`:"right bottom",bottom:"top center","bottom-start":_e?`${_e.x}px top`:"top left","bottom-end":_e?`${_e.x}px top`:"top right",left:"right center","left-start":_e?`right ${_e.y}px`:"right top","left-end":_e?`right ${_e.y}px`:"right bottom",right:"left center","right-start":_e?`left ${_e.y}px`:"left top","right-end":_e?`left ${_e.y}px`:"left bottom"}),transformOriginMiddleware={name:"transformOrigin",fn({placement:_e,elements:_,middlewareData:et}){const{arrow:tt}=et,nt=getTransformOrigin(tt)[_e],{floating:it}=_;return it.style.setProperty(cssVars.transformOrigin.variable,nt),{data:{transformOrigin:nt}}}},rectMiddleware={name:"rects",fn({rects:_e}){return{data:_e}}},shiftArrowMiddleware=_e=>{if(_e)return{name:"shiftArrow",fn({placement:_,middlewareData:et}){if(!et.arrow)return{};const{x:tt,y:nt}=et.arrow,it=_.split("-")[0];return Object.assign(_e.style,{left:tt!=null?`${tt}px`:"",top:nt!=null?`${nt}px`:"",[it]:`calc(100% + ${cssVars.arrowOffset.reference})`}),{}}}};function getPlacementDetails(_e){const[_,et]=_e.split("-");return{side:_,align:et,hasAlign:et!=null}}var defaultOptions$1={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function roundByDpr(_e,_){const et=_e.devicePixelRatio||1;return Math.round(_*et)/et}function getBoundaryMiddleware(_e){return runIfFn$2(_e.boundary)}function getArrowMiddleware(_e,_){if(_e)return arrow({element:_e,padding:_.arrowPadding})}function getOffsetMiddleware(_e,_){if(!isNull(_.offset??_.gutter))return offset(({placement:et})=>{var dt,ht;const tt=((_e==null?void 0:_e.clientHeight)||0)/2,nt=((dt=_.offset)==null?void 0:dt.mainAxis)??_.gutter,it=typeof nt=="number"?nt+tt:nt??tt,{hasAlign:at}=getPlacementDetails(et),ot=at?void 0:_.shift,st=((ht=_.offset)==null?void 0:ht.crossAxis)??ot;return compact$2({crossAxis:st,mainAxis:it,alignmentAxis:_.shift})})}function getFlipMiddleware(_e){if(_e.flip)return flip({boundary:getBoundaryMiddleware(_e),padding:_e.overflowPadding,fallbackPlacements:_e.flip===!0?void 0:_e.flip})}function getShiftMiddleware(_e){if(!(!_e.slide&&!_e.overlap))return shift({boundary:getBoundaryMiddleware(_e),mainAxis:_e.slide,crossAxis:_e.overlap,padding:_e.overflowPadding,limiter:limitShift()})}function getSizeMiddleware(_e){return size({padding:_e.overflowPadding,apply({elements:_,rects:et,availableHeight:tt,availableWidth:nt}){const it=_.floating,at=Math.round(et.reference.width);nt=Math.floor(nt),tt=Math.floor(tt),it.style.setProperty("--reference-width",`${at}px`),it.style.setProperty("--available-width",`${nt}px`),it.style.setProperty("--available-height",`${tt}px`)}})}function hideWhenDetachedMiddleware(_e){var _;if(_e.hideWhenDetached)return hide({strategy:"referenceHidden",boundary:((_=_e.boundary)==null?void 0:_.call(_e))??"clippingAncestors"})}function getAutoUpdateOptions(_e){return _e?_e===!0?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:_e:{}}function getPlacementImpl(_e,_,et={}){const tt=getAnchorElement(_e,et.getAnchorRect);if(!_||!tt)return;const nt=Object.assign({},defaultOptions$1,et),it=_.querySelector("[data-part=arrow]"),at=[getOffsetMiddleware(it,nt),getFlipMiddleware(nt),getShiftMiddleware(nt),getArrowMiddleware(it,nt),shiftArrowMiddleware(it),transformOriginMiddleware,getSizeMiddleware(nt),hideWhenDetachedMiddleware(nt),rectMiddleware],{placement:ot,strategy:st,onComplete:dt,onPositioned:ht}=nt,ct=async()=>{var xt;if(!tt||!_)return;const mt=await computePosition(tt,_,{placement:ot,middleware:at,strategy:st});dt==null||dt(mt),ht==null||ht({placed:!0});const vt=getWindow$1(_),yt=roundByDpr(vt,mt.x),bt=roundByDpr(vt,mt.y);_.style.setProperty("--x",`${yt}px`),_.style.setProperty("--y",`${bt}px`),nt.hideWhenDetached&&(((xt=mt.middlewareData.hide)==null?void 0:xt.referenceHidden)?(_.style.setProperty("visibility","hidden"),_.style.setProperty("pointer-events","none")):(_.style.removeProperty("visibility"),_.style.removeProperty("pointer-events")));const _t=_.firstElementChild;if(_t){const St=getComputedStyle$3(_t);_.style.setProperty("--z-index",St.zIndex)}},ut=async()=>{et.updatePosition?(await et.updatePosition({updatePosition:ct}),ht==null||ht({placed:!0})):await ct()},ft=getAutoUpdateOptions(nt.listeners),gt=nt.listeners?autoUpdate(tt,_,ut,ft):noop$5;return ut(),()=>{gt==null||gt(),ht==null||ht({placed:!1})}}function getPlacement(_e,_,et={}){const{defer:tt,...nt}=et,it=tt?raf$1:ot=>ot(),at=[];return at.push(it(()=>{const ot=typeof _e=="function"?_e():_e,st=typeof _=="function"?_():_;at.push(getPlacementImpl(ot,st,nt))})),()=>{at.forEach(ot=>ot==null?void 0:ot())}}var ARROW_FLOATING_STYLE={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function getPlacementStyles(_e={}){const{placement:_,sameWidth:et,fitViewport:tt,strategy:nt="absolute"}=_e;return{arrow:{position:"absolute",width:cssVars.arrowSize.reference,height:cssVars.arrowSize.reference,[cssVars.arrowSizeHalf.variable]:`calc(${cssVars.arrowSize.reference} / 2)`,[cssVars.arrowOffset.variable]:`calc(${cssVars.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:_?ARROW_FLOATING_STYLE[_.split("-")[0]]:void 0,background:cssVars.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:nt,isolation:"isolate",minWidth:et?void 0:"max-content",width:et?"var(--reference-width)":void 0,maxWidth:tt?"var(--available-width)":void 0,maxHeight:tt?"var(--available-height)":void 0,top:"0px",left:"0px",transform:_?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}function getWindowFrames(_e){const _={each(et){var tt;for(let nt=0;nt<((tt=_e.frames)==null?void 0:tt.length);nt+=1){const it=_e.frames[nt];it&&et(it)}},addEventListener(et,tt,nt){return _.each(it=>{try{it.document.addEventListener(et,tt,nt)}catch{}}),()=>{try{_.removeEventListener(et,tt,nt)}catch{}}},removeEventListener(et,tt,nt){_.each(it=>{try{it.document.removeEventListener(et,tt,nt)}catch{}})}};return _}function getParentWindow(_e){const _=_e.frameElement!=null?_e.parent:null;return{addEventListener:(et,tt,nt)=>{try{_==null||_.addEventListener(et,tt,nt)}catch{}return()=>{try{_==null||_.removeEventListener(et,tt,nt)}catch{}}},removeEventListener:(et,tt,nt)=>{try{_==null||_.removeEventListener(et,tt,nt)}catch{}}}}var POINTER_OUTSIDE_EVENT="pointerdown.outside",FOCUS_OUTSIDE_EVENT="focus.outside";function isComposedPathFocusable(_e){for(const _ of _e)if(isHTMLElement$1(_)&&isFocusable(_))return!0;return!1}var isPointerEvent=_e=>"clientY"in _e;function isEventPointWithin(_e,_){if(!isPointerEvent(_)||!_e)return!1;const et=_e.getBoundingClientRect();return et.width===0||et.height===0?!1:et.top<=_.clientY&&_.clientY<=et.top+et.height&&et.left<=_.clientX&&_.clientX<=et.left+et.width}function isPointInRect(_e,_){return _e.y<=_.y&&_.y<=_e.y+_e.height&&_e.x<=_.x&&_.x<=_e.x+_e.width}function isEventWithinScrollbar(_e,_){if(!_||!isPointerEvent(_e))return!1;const et=_.scrollHeight>_.clientHeight,tt=et&&_e.clientX>_.offsetLeft+_.clientWidth,nt=_.scrollWidth>_.clientWidth,it=nt&&_e.clientY>_.offsetTop+_.clientHeight,at={x:_.offsetLeft,y:_.offsetTop,width:_.clientWidth+(et?16:0),height:_.clientHeight+(nt?16:0)},ot={x:_e.clientX,y:_e.clientY};return isPointInRect(at,ot)?tt||it:!1}function trackInteractOutsideImpl(_e,_){const{exclude:et,onFocusOutside:tt,onPointerDownOutside:nt,onInteractOutside:it,defer:at}=_;if(!_e)return;const ot=getDocument(_e),st=getWindow$1(_e),dt=getWindowFrames(st),ht=getParentWindow(st);function ct(yt){const bt=getEventTarget(yt);if(!isHTMLElement$1(bt)||!bt.isConnected||contains(_e,bt)||isEventPointWithin(_e,yt))return!1;const _t=ot.querySelector(`[aria-controls="${_e.id}"]`);if(_t){const St=getNearestOverflowAncestor$1(_t);if(isEventWithinScrollbar(yt,St))return!1}const xt=getNearestOverflowAncestor$1(_e);return isEventWithinScrollbar(yt,xt)?!1:!(et!=null&&et(bt))}const ut=new Set;function ft(yt){function bt(){var St;const _t=at?raf$1:Tt=>Tt(),xt=((St=yt.composedPath)==null?void 0:St.call(yt))??[yt.target];_t(()=>{if(!(!_e||!ct(yt))){if(nt||it){const Tt=callAll(nt,it);_e.addEventListener(POINTER_OUTSIDE_EVENT,Tt,{once:!0})}fireCustomEvent(_e,POINTER_OUTSIDE_EVENT,{bubbles:!1,cancelable:!0,detail:{originalEvent:yt,contextmenu:isContextMenuEvent(yt),focusable:isComposedPathFocusable(xt)}})}})}yt.pointerType==="touch"?(ut.forEach(_t=>_t()),ut.add(addDomEvent(ot,"click",bt,{once:!0})),ut.add(ht.addEventListener("click",bt,{once:!0})),ut.add(dt.addEventListener("click",bt,{once:!0}))):bt()}const gt=new Set,mt=setTimeout(()=>{gt.add(addDomEvent(ot,"pointerdown",ft,!0)),gt.add(ht.addEventListener("pointerdown",ft,!0)),gt.add(dt.addEventListener("pointerdown",ft,!0))},0);function vt(yt){(at?raf$1:_t=>_t())(()=>{if(!(!_e||!ct(yt))){if(tt||it){const _t=callAll(tt,it);_e.addEventListener(FOCUS_OUTSIDE_EVENT,_t,{once:!0})}fireCustomEvent(_e,FOCUS_OUTSIDE_EVENT,{bubbles:!1,cancelable:!0,detail:{originalEvent:yt,contextmenu:!1,focusable:isFocusable(getEventTarget(yt))}})}})}return gt.add(addDomEvent(ot,"focusin",vt,!0)),gt.add(ht.addEventListener("focusin",vt,!0)),gt.add(dt.addEventListener("focusin",vt,!0)),()=>{clearTimeout(mt),ut.forEach(yt=>yt()),gt.forEach(yt=>yt())}}function trackInteractOutside(_e,_){const{defer:et}=_,tt=et?raf$1:it=>it(),nt=[];return nt.push(tt(()=>{const it=typeof _e=="function"?_e():_e;nt.push(trackInteractOutsideImpl(it,_))})),()=>{nt.forEach(it=>it==null?void 0:it())}}function fireCustomEvent(_e,_,et){const tt=_e.ownerDocument.defaultView||window,nt=new tt.CustomEvent(_,et);return _e.dispatchEvent(nt)}function trackEscapeKeydown(_e,_){const et=tt=>{tt.key==="Escape"&&(tt.isComposing||_==null||_(tt))};return addDomEvent(getDocument(_e),"keydown",et,{capture:!0})}var layerStack={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(_e=>_e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(_e){var tt;const _=this.indexOf(_e),et=this.topMostPointerBlockingLayer()?this.indexOf((tt=this.topMostPointerBlockingLayer())==null?void 0:tt.node):-1;return _<et},isTopMost(_e){const _=this.layers[this.count()-1];return(_==null?void 0:_.node)===_e},getNestedLayers(_e){return Array.from(this.layers).slice(this.indexOf(_e)+1)},isInNestedLayer(_e,_){return this.getNestedLayers(_e).some(et=>contains(et.node,_))},isInBranch(_e){return Array.from(this.branches).some(_=>contains(_,_e))},add(_e){const _=this.layers.push(_e);_e.node.style.setProperty("--layer-index",`${_}`)},addBranch(_e){this.branches.push(_e)},remove(_e){const _=this.indexOf(_e);_<0||(_<this.count()-1&&this.getNestedLayers(_e).forEach(tt=>tt.dismiss()),this.layers.splice(_,1),_e.style.removeProperty("--layer-index"))},removeBranch(_e){const _=this.branches.indexOf(_e);_>=0&&this.branches.splice(_,1)},indexOf(_e){return this.layers.findIndex(_=>_.node===_e)},dismiss(_e){var _;(_=this.layers[this.indexOf(_e)])==null||_.dismiss()},clear(){this.remove(this.layers[0].node)}},originalBodyPointerEvents;function assignPointerEventToLayers(){layerStack.layers.forEach(({node:_e})=>{_e.style.pointerEvents=layerStack.isBelowPointerBlockingLayer(_e)?"none":"auto"})}function clearPointerEvent(_e){_e.style.pointerEvents=""}function disablePointerEventsOutside(_e,_){const et=getDocument(_e),tt=[];if(layerStack.hasPointerBlockingLayer()&&!et.body.hasAttribute("data-inert")&&(originalBodyPointerEvents=document.body.style.pointerEvents,queueMicrotask(()=>{et.body.style.pointerEvents="none",et.body.setAttribute("data-inert","")})),_){const nt=waitForElements(_,it=>{tt.push(setStyle(it,{pointerEvents:"auto"}))});tt.push(nt)}return()=>{layerStack.hasPointerBlockingLayer()||(queueMicrotask(()=>{et.body.style.pointerEvents=originalBodyPointerEvents,et.body.removeAttribute("data-inert"),et.body.style.length===0&&et.body.removeAttribute("style")}),tt.forEach(nt=>nt()))}}function trackDismissableElementImpl(_e,_){if(!_e){warn("[@zag-js/dismissable] node is `null` or `undefined`");return}const{onDismiss:et,pointerBlocking:tt,exclude:nt,debug:it}=_,at={dismiss:et,node:_e,pointerBlocking:tt};layerStack.add(at),assignPointerEventToLayers();function ot(ut){var gt,mt;const ft=getEventTarget(ut.detail.originalEvent);layerStack.isBelowPointerBlockingLayer(_e)||layerStack.isInBranch(ft)||((gt=_.onPointerDownOutside)==null||gt.call(_,ut),(mt=_.onInteractOutside)==null||mt.call(_,ut),!ut.defaultPrevented&&(it&&console.log("onPointerDownOutside:",ut.detail.originalEvent),et==null||et()))}function st(ut){var gt,mt;const ft=getEventTarget(ut.detail.originalEvent);layerStack.isInBranch(ft)||((gt=_.onFocusOutside)==null||gt.call(_,ut),(mt=_.onInteractOutside)==null||mt.call(_,ut),!ut.defaultPrevented&&(it&&console.log("onFocusOutside:",ut.detail.originalEvent),et==null||et()))}function dt(ut){var ft;layerStack.isTopMost(_e)&&((ft=_.onEscapeKeyDown)==null||ft.call(_,ut),!ut.defaultPrevented&&et&&(ut.preventDefault(),et()))}function ht(ut){var vt;if(!_e)return!1;const ft=typeof nt=="function"?nt():nt,gt=Array.isArray(ft)?ft:[ft],mt=(vt=_.persistentElements)==null?void 0:vt.map(yt=>yt()).filter(isHTMLElement$1);return mt&&gt.push(...mt),gt.some(yt=>contains(yt,ut))||layerStack.isInNestedLayer(_e,ut)}const ct=[tt?disablePointerEventsOutside(_e,_.persistentElements):void 0,trackEscapeKeydown(_e,dt),trackInteractOutside(_e,{exclude:ht,onFocusOutside:st,onPointerDownOutside:ot,defer:_.defer})];return()=>{layerStack.remove(_e),assignPointerEventToLayers(),clearPointerEvent(_e),ct.forEach(ut=>ut==null?void 0:ut())}}function trackDismissableElement(_e,_){const{defer:et}=_,tt=et?raf$1:it=>it(),nt=[];return nt.push(tt(()=>{const it=isFunction$5(_e)?_e():_e;nt.push(trackDismissableElementImpl(it,_))})),()=>{tt(()=>{nt.forEach(it=>it==null?void 0:it())})}}function trackDismissableBranch(_e,_={}){const{defer:et}=_,tt=et?raf$1:it=>it(),nt=[];return nt.push(tt(()=>{const it=isFunction$5(_e)?_e():_e;if(!it){warn("[@zag-js/dismissable] branch node is `null` or `undefined`");return}layerStack.addBranch(it),nt.push(()=>{layerStack.removeBranch(it)})})),()=>{tt(()=>{nt.forEach(it=>it==null?void 0:it())})}}var anatomy$l=createAnatomy("color-picker",["root","label","control","trigger","positioner","content","area","areaThumb","valueText","areaBackground","channelSlider","channelSliderLabel","channelSliderTrack","channelSliderThumb","channelSliderValueText","channelInput","transparencyGrid","swatchGroup","swatchTrigger","swatchIndicator","swatch","eyeDropperTrigger","formatTrigger","formatSelect"]);anatomy$l.build();var dom$k=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`color-picker:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`color-picker:${_e.id}:label`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`color-picker:${_e.id}:hidden-input`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`color-picker:${_e.id}:control`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`color-picker:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`color-picker:${_e.id}:content`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`color-picker:${_e.id}:positioner`},getFormatSelectId:_e=>{var _;return((_=_e.ids)==null?void 0:_.formatSelect)??`color-picker:${_e.id}:format-select`},getAreaId:_e=>{var _;return((_=_e.ids)==null?void 0:_.area)??`color-picker:${_e.id}:area`},getAreaGradientId:_e=>{var _;return((_=_e.ids)==null?void 0:_.areaGradient)??`color-picker:${_e.id}:area-gradient`},getAreaThumbId:_e=>{var _;return((_=_e.ids)==null?void 0:_.areaThumb)??`color-picker:${_e.id}:area-thumb`},getChannelSliderTrackId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.channelSliderTrack)==null?void 0:tt.call(et,_))??`color-picker:${_e.id}:slider-track:${_}`},getChannelSliderThumbId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.channelSliderThumb)==null?void 0:tt.call(et,_))??`color-picker:${_e.id}:slider-thumb:${_}`},getContentEl:_e=>dom$k.getById(_e,dom$k.getContentId(_e)),getAreaThumbEl:_e=>dom$k.getById(_e,dom$k.getAreaThumbId(_e)),getChannelSliderThumbEl:(_e,_)=>dom$k.getById(_e,dom$k.getChannelSliderThumbId(_e,_)),getChannelInputEl:(_e,_)=>{const et=`input[data-channel="${_}"]`;return[...queryAll(dom$k.getContentEl(_e),et),...queryAll(dom$k.getControlEl(_e),et)]},getFormatSelectEl:_e=>dom$k.getById(_e,dom$k.getFormatSelectId(_e)),getHiddenInputEl:_e=>dom$k.getById(_e,dom$k.getHiddenInputId(_e)),getAreaEl:_e=>dom$k.getById(_e,dom$k.getAreaId(_e)),getAreaValueFromPoint(_e,_){const et=dom$k.getAreaEl(_e);if(!et)return;const{percent:tt}=getRelativePoint(_,et);return tt},getControlEl:_e=>dom$k.getById(_e,dom$k.getControlId(_e)),getTriggerEl:_e=>dom$k.getById(_e,dom$k.getTriggerId(_e)),getPositionerEl:_e=>dom$k.getById(_e,dom$k.getPositionerId(_e)),getChannelSliderTrackEl:(_e,_)=>dom$k.getById(_e,dom$k.getChannelSliderTrackId(_e,_)),getChannelSliderValueFromPoint(_e,_,et){const tt=dom$k.getChannelSliderTrackEl(_e,et);if(!tt)return;const{percent:nt}=getRelativePoint(_,tt);return nt},getChannelInputEls:_e=>[...queryAll(dom$k.getContentEl(_e),"input[data-channel]"),...queryAll(dom$k.getControlEl(_e),"input[data-channel]")]});const[RenderStrategyPropsProvider,useRenderStrategyPropsContext]=createContext$1({name:"RenderStrategyContext",hookName:"useRenderStrategyContext",providerName:"<RenderStrategyPropsProvider />"}),splitRenderStrategyProps=_e=>createSplitProps()(_e,["lazyMount","unmountOnExit"]),[DialogProvider,useDialogContext]=createContext$1({name:"DialogContext",hookName:"useDialogContext",providerName:"<DialogProvider />"}),DialogBackdrop=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=useRenderStrategyPropsContext(),nt=usePresence({...tt,present:et.open}),it=mergeProps(et.getBackdropProps(),nt.getPresenceProps(),_e);return nt.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...it,ref:composeRefs(nt.ref,_)})});DialogBackdrop.displayName="DialogBackdrop";const DialogCloseTrigger=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=mergeProps(et.getCloseTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});DialogCloseTrigger.displayName="DialogCloseTrigger";const DialogContent=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=usePresenceContext(),nt=mergeProps(et.getContentProps(),tt.getPresenceProps(),_e);return tt.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...nt,ref:composeRefs(tt.ref,_)})});DialogContent.displayName="DialogContent";const DialogDescription=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=mergeProps(et.getDescriptionProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});DialogDescription.displayName="DialogDescription";const DialogPositioner=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=mergeProps(et.getPositionerProps(),_e);return usePresenceContext().unmounted?null:jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});DialogPositioner.displayName="DialogPositioner";var counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=_e=>_e&&(_e.host||unwrapHost(_e.parentNode)),correctTargets=(_e,_)=>_.map(et=>{if(_e.contains(et))return et;const tt=unwrapHost(et);return tt&&_e.contains(tt)?tt:(console.error("[zag-js > ariaHidden] target",et,"in not contained inside",_e,". Doing nothing"),null)}).filter(et=>!!et),isIgnoredNode=_e=>_e.localName==="next-route-announcer"||_e.localName==="script"||_e.hasAttribute("aria-live")?!0:_e.matches("[data-live-announcer]"),walkTreeOutside=(_e,_)=>{const{parentNode:et,markerName:tt,controlAttribute:nt}=_,it=correctTargets(et,Array.isArray(_e)?_e:[_e]);markerMap[tt]||(markerMap[tt]=new WeakMap);const at=markerMap[tt],ot=[],st=new Set,dt=new Set(it),ht=ut=>{!ut||st.has(ut)||(st.add(ut),ht(ut.parentNode))};it.forEach(ht);const ct=ut=>{!ut||dt.has(ut)||Array.prototype.forEach.call(ut.children,ft=>{if(st.has(ft))ct(ft);else try{if(isIgnoredNode(ft))return;const gt=ft.getAttribute(nt),mt=gt!==null&&gt!=="false",vt=(counterMap.get(ft)||0)+1,yt=(at.get(ft)||0)+1;counterMap.set(ft,vt),at.set(ft,yt),ot.push(ft),vt===1&&mt&&uncontrolledNodes.set(ft,!0),yt===1&&ft.setAttribute(tt,""),mt||ft.setAttribute(nt,"")}catch(gt){console.error("[zag-js > ariaHidden] cannot operate on ",ft,gt)}})};return ct(et),st.clear(),lockCount++,()=>{ot.forEach(ut=>{const ft=counterMap.get(ut)-1,gt=at.get(ut)-1;counterMap.set(ut,ft),at.set(ut,gt),ft||(uncontrolledNodes.has(ut)||ut.removeAttribute(nt),uncontrolledNodes.delete(ut)),gt||ut.removeAttribute(tt)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},getParentNode=_e=>(Array.isArray(_e)?_e[0]:_e).ownerDocument.body,hideOthers=(_e,_=getParentNode(_e),et="data-aria-hidden")=>{if(_)return walkTreeOutside(_e,{parentNode:_,markerName:et,controlAttribute:"aria-hidden"})},raf=_e=>{const _=requestAnimationFrame(()=>_e());return()=>cancelAnimationFrame(_)};function ariaHidden(_e,_={}){const{defer:et=!0}=_,tt=et?raf:it=>it(),nt=[];return nt.push(tt(()=>{const at=(typeof _e=="function"?_e():_e).filter(Boolean);at.length!==0&&nt.push(hideOthers(at))})),()=>{nt.forEach(it=>it==null?void 0:it())}}var __defProp$2=Object.defineProperty,__defNormalProp$2=(_e,_,et)=>_ in _e?__defProp$2(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et,__publicField$2=(_e,_,et)=>__defNormalProp$2(_e,typeof _!="symbol"?_+"":_,et),activeFocusTraps={activateTrap(_e,_){if(_e.length>0){const tt=_e[_e.length-1];tt!==_&&tt.pause()}const et=_e.indexOf(_);et===-1||_e.splice(et,1),_e.push(_)},deactivateTrap(_e,_){const et=_e.indexOf(_);et!==-1&&_e.splice(et,1),_e.length>0&&_e[_e.length-1].unpause()}},sharedTrapStack=[],FocusTrap=class{constructor(_e,_){__publicField$2(this,"trapStack"),__publicField$2(this,"config"),__publicField$2(this,"doc"),__publicField$2(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),__publicField$2(this,"listenerCleanups",[]),__publicField$2(this,"handleFocus",tt=>{const nt=getEventTarget(tt),it=this.findContainerIndex(nt,tt)>=0;if(it||isDocument(nt))it&&(this.state.mostRecentlyFocusedNode=nt);else{tt.stopImmediatePropagation();let at,ot=!0;if(this.state.mostRecentlyFocusedNode)if(getTabIndex(this.state.mostRecentlyFocusedNode)>0){const st=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:dt}=this.state.containerGroups[st];if(dt.length>0){const ht=dt.findIndex(ct=>ct===this.state.mostRecentlyFocusedNode);ht>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?ht+1<dt.length&&(at=dt[ht+1],ot=!1):ht-1>=0&&(at=dt[ht-1],ot=!1))}}else this.state.containerGroups.some(st=>st.tabbableNodes.some(dt=>getTabIndex(dt)>0))||(ot=!1);else ot=!1;ot&&(at=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),at?this.tryFocus(at):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),__publicField$2(this,"handlePointerDown",tt=>{const nt=getEventTarget(tt);if(!(this.findContainerIndex(nt,tt)>=0)){if(valueOrHandler(this.config.clickOutsideDeactivates,tt)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}valueOrHandler(this.config.allowOutsideClick,tt)||tt.preventDefault()}}),__publicField$2(this,"handleClick",tt=>{const nt=getEventTarget(tt);this.findContainerIndex(nt,tt)>=0||valueOrHandler(this.config.clickOutsideDeactivates,tt)||valueOrHandler(this.config.allowOutsideClick,tt)||(tt.preventDefault(),tt.stopImmediatePropagation())}),__publicField$2(this,"handleTabKey",tt=>{if(this.config.isKeyForward(tt)||this.config.isKeyBackward(tt)){this.state.recentNavEvent=tt;const nt=this.config.isKeyBackward(tt),it=this.findNextNavNode({event:tt,isBackward:nt});if(!it)return;isTabEvent(tt)&&tt.preventDefault(),this.tryFocus(it)}}),__publicField$2(this,"handleEscapeKey",tt=>{isEscapeEvent(tt)&&valueOrHandler(this.config.escapeDeactivates,tt)!==!1&&(tt.preventDefault(),this.deactivate())}),__publicField$2(this,"_mutationObserver"),__publicField$2(this,"setupMutationObserver",()=>{const tt=this.doc.defaultView||window;this._mutationObserver=new tt.MutationObserver(nt=>{nt.some(at=>Array.from(at.removedNodes).some(st=>st===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode())})}),__publicField$2(this,"updateObservedNodes",()=>{var tt;(tt=this._mutationObserver)==null||tt.disconnect(),this.state.active&&!this.state.paused&&this.state.containers.map(nt=>{var it;(it=this._mutationObserver)==null||it.observe(nt,{subtree:!0,childList:!0})})}),__publicField$2(this,"getInitialFocusNode",()=>{let tt=this.getNodeForOption("initialFocus",{hasFallback:!0});if(tt===!1)return!1;if(tt===void 0||tt&&!isFocusable(tt))if(this.findContainerIndex(this.doc.activeElement)>=0)tt=this.doc.activeElement;else{const nt=this.state.tabbableGroups[0];tt=nt&&nt.firstTabbableNode||this.getNodeForOption("fallbackFocus")}else tt===null&&(tt=this.getNodeForOption("fallbackFocus"));if(!tt)throw new Error("Your focus-trap needs to have at least one focusable element");return tt.isConnected||(tt=this.getNodeForOption("fallbackFocus")),tt}),__publicField$2(this,"tryFocus",tt=>{if(tt!==!1&&tt!==getActiveElement(this.doc)){if(!tt||!tt.focus){this.tryFocus(this.getInitialFocusNode());return}tt.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=tt,isSelectableInput(tt)&&tt.select()}}),__publicField$2(this,"deactivate",tt=>{if(!this.state.active)return this;const nt={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...tt};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),activeFocusTraps.deactivateTrap(this.trapStack,this);const it=this.getOption(nt,"onDeactivate"),at=this.getOption(nt,"onPostDeactivate"),ot=this.getOption(nt,"checkCanReturnFocus"),st=this.getOption(nt,"returnFocus","returnFocusOnDeactivate");it==null||it();const dt=()=>{delay(()=>{if(st){const ht=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(ht)}at==null||at()})};if(st&&ot){const ht=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return ot(ht).then(dt,dt),this}return dt(),this}),__publicField$2(this,"pause",tt=>{if(this.state.paused||!this.state.active)return this;const nt=this.getOption(tt,"onPause"),it=this.getOption(tt,"onPostPause");return this.state.paused=!0,nt==null||nt(),this.removeListeners(),this.updateObservedNodes(),it==null||it(),this}),__publicField$2(this,"unpause",tt=>{if(!this.state.paused||!this.state.active)return this;const nt=this.getOption(tt,"onUnpause"),it=this.getOption(tt,"onPostUnpause");return this.state.paused=!1,nt==null||nt(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),it==null||it(),this}),__publicField$2(this,"updateContainerElements",tt=>(this.state.containers=Array.isArray(tt)?tt.filter(Boolean):[tt].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),__publicField$2(this,"getReturnFocusNode",tt=>{const nt=this.getNodeForOption("setReturnFocus",{params:[tt]});return nt||(nt===!1?!1:tt)}),__publicField$2(this,"getOption",(tt,nt,it)=>tt&&tt[nt]!==void 0?tt[nt]:this.config[it||nt]),__publicField$2(this,"getNodeForOption",(tt,{hasFallback:nt=!1,params:it=[]}={})=>{let at=this.config[tt];if(typeof at=="function"&&(at=at(...it)),at===!0&&(at=void 0),!at){if(at===void 0||at===!1)return at;throw new Error(`\`${tt}\` was specified but was not a node, or did not return a node`)}let ot=at;if(typeof at=="string"){try{ot=this.doc.querySelector(at)}catch(st){throw new Error(`\`${tt}\` appears to be an invalid selector; error="${st.message}"`)}if(!ot&&!nt)throw new Error(`\`${tt}\` as selector refers to no known node`)}return ot}),__publicField$2(this,"findNextNavNode",tt=>{const{event:nt,isBackward:it=!1}=tt,at=tt.target||getEventTarget(nt);this.updateTabbableNodes();let ot=null;if(this.state.tabbableGroups.length>0){const st=this.findContainerIndex(at,nt),dt=st>=0?this.state.containerGroups[st]:void 0;if(st<0)it?ot=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:ot=this.state.tabbableGroups[0].firstTabbableNode;else if(it){let ht=this.state.tabbableGroups.findIndex(({firstTabbableNode:ct})=>at===ct);if(ht<0&&((dt==null?void 0:dt.container)===at||isFocusable(at)&&!isTabbable(at)&&!(dt!=null&&dt.nextTabbableNode(at,!1)))&&(ht=st),ht>=0){const ct=ht===0?this.state.tabbableGroups.length-1:ht-1,ut=this.state.tabbableGroups[ct];ot=getTabIndex(at)>=0?ut.lastTabbableNode:ut.lastDomTabbableNode}else isTabEvent(nt)||(ot=dt==null?void 0:dt.nextTabbableNode(at,!1))}else{let ht=this.state.tabbableGroups.findIndex(({lastTabbableNode:ct})=>at===ct);if(ht<0&&((dt==null?void 0:dt.container)===at||isFocusable(at)&&!isTabbable(at)&&!(dt!=null&&dt.nextTabbableNode(at)))&&(ht=st),ht>=0){const ct=ht===this.state.tabbableGroups.length-1?0:ht+1,ut=this.state.tabbableGroups[ct];ot=getTabIndex(at)>=0?ut.firstTabbableNode:ut.firstDomTabbableNode}else isTabEvent(nt)||(ot=dt==null?void 0:dt.nextTabbableNode(at))}}else ot=this.getNodeForOption("fallbackFocus");return ot}),this.trapStack=_.trapStack||sharedTrapStack;const et={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward(tt){return isTabEvent(tt)&&!tt.shiftKey},isKeyBackward(tt){return isTabEvent(tt)&&tt.shiftKey},..._};this.doc=et.document||getDocument(Array.isArray(_e)?_e[0]:_e),this.config=et,this.updateContainerElements(_e),this.setupMutationObserver()}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(_e,_){const et=typeof(_==null?void 0:_.composedPath)=="function"?_.composedPath():void 0;return this.state.containerGroups.findIndex(({container:tt,tabbableNodes:nt})=>tt.contains(_e)||(et==null?void 0:et.includes(tt))||nt.find(it=>it===_e))}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(_e=>{const _=getTabbables(_e),et=getFocusables(_e),tt=_.length>0?_[0]:void 0,nt=_.length>0?_[_.length-1]:void 0,it=et.find(dt=>isTabbable(dt)),at=et.slice().reverse().find(dt=>isTabbable(dt)),ot=!!_.find(dt=>getTabIndex(dt)>0);function st(dt,ht=!0){const ct=_.indexOf(dt);return ct<0?ht?et.slice(et.indexOf(dt)+1).find(ut=>isTabbable(ut)):et.slice(0,et.indexOf(dt)).reverse().find(ut=>isTabbable(ut)):_[ct+(ht?1:-1)]}return{container:_e,tabbableNodes:_,focusableNodes:et,posTabIndexesFound:ot,firstTabbableNode:tt,lastTabbableNode:nt,firstDomTabbableNode:it,lastDomTabbableNode:at,nextTabbableNode:st}}),this.state.tabbableGroups=this.state.containerGroups.filter(_e=>_e.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(_e=>_e.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return activeFocusTraps.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?delay(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(addDomEvent(this.doc,"focusin",this.handleFocus,!0),addDomEvent(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),addDomEvent(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),addDomEvent(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),addDomEvent(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),addDomEvent(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(_e=>_e()),this.listenerCleanups=[],this}activate(_e){if(this.state.active)return this;const _=this.getOption(_e,"onActivate"),et=this.getOption(_e,"onPostActivate"),tt=this.getOption(_e,"checkCanFocusTrap");tt||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=this.doc.activeElement||null,_==null||_();const nt=()=>{tt&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),et==null||et()};return tt?(tt(this.state.containers.concat()).then(nt,nt),this):(nt(),this)}},isTabEvent=_e=>_e.key==="Tab",valueOrHandler=(_e,..._)=>typeof _e=="function"?_e(..._):_e,isEscapeEvent=_e=>!_e.isComposing&&_e.key==="Escape",delay=_e=>setTimeout(_e,0),isSelectableInput=_e=>_e.localName==="input"&&"select"in _e&&typeof _e.select=="function";function trapFocus(_e,_={}){let et;const tt=raf$1(()=>{const nt=typeof _e=="function"?_e():_e;if(nt){et=new FocusTrap(nt,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:nt,..._,document:getDocument(nt)});try{et.activate()}catch{}}});return function(){et==null||et.deactivate(),tt()}}var LOCK_CLASSNAME="data-scroll-lock";function assignStyle(_e,_){if(!_e)return;const et=Object.keys(_).reduce((tt,nt)=>(tt[nt]=_e.style.getPropertyValue(nt),tt),{});return Object.assign(_e.style,_),()=>{Object.assign(_e.style,et)}}function setCSSProperty(_e,_,et){if(!_e)return;const tt=_e.style.getPropertyValue(_);return _e.style.setProperty(_,et),()=>{tt?_e.style.setProperty(_,tt):_e.style.removeProperty(_)}}function getPaddingProperty(_e){const _=_e.getBoundingClientRect().left;return Math.round(_)+_e.scrollLeft?"paddingLeft":"paddingRight"}function preventBodyScroll(_e){const _=_e??document,et=_.defaultView??window,{documentElement:tt,body:nt}=_;if(nt.hasAttribute(LOCK_CLASSNAME))return;nt.setAttribute(LOCK_CLASSNAME,"");const at=et.innerWidth-tt.clientWidth,ot=()=>setCSSProperty(tt,"--scrollbar-width",`${at}px`),st=getPaddingProperty(tt),dt=()=>assignStyle(nt,{overflow:"hidden",[st]:`${at}px`}),ht=()=>{const{scrollX:ut,scrollY:ft,visualViewport:gt}=et,mt=(gt==null?void 0:gt.offsetLeft)??0,vt=(gt==null?void 0:gt.offsetTop)??0,yt=assignStyle(nt,{position:"fixed",overflow:"hidden",top:`${-(ft-Math.floor(vt))}px`,left:`${-(ut-Math.floor(mt))}px`,right:"0",[st]:`${at}px`});return()=>{yt==null||yt(),et.scrollTo({left:ut,top:ft,behavior:"instant"})}},ct=[ot(),isIos()?ht():dt()];return()=>{ct.forEach(ut=>ut==null?void 0:ut()),nt.removeAttribute(LOCK_CLASSNAME)}}var anatomy$k=createAnatomy("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),parts$8=anatomy$k.build(),dom$j=createScope({getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`dialog:${_e.id}:positioner`},getBackdropId:_e=>{var _;return((_=_e.ids)==null?void 0:_.backdrop)??`dialog:${_e.id}:backdrop`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`dialog:${_e.id}:content`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`dialog:${_e.id}:trigger`},getTitleId:_e=>{var _;return((_=_e.ids)==null?void 0:_.title)??`dialog:${_e.id}:title`},getDescriptionId:_e=>{var _;return((_=_e.ids)==null?void 0:_.description)??`dialog:${_e.id}:description`},getCloseTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.closeTrigger)??`dialog:${_e.id}:close`},getContentEl:_e=>dom$j.getById(_e,dom$j.getContentId(_e)),getPositionerEl:_e=>dom$j.getById(_e,dom$j.getPositionerId(_e)),getBackdropEl:_e=>dom$j.getById(_e,dom$j.getBackdropId(_e)),getTriggerEl:_e=>dom$j.getById(_e,dom$j.getTriggerId(_e)),getTitleEl:_e=>dom$j.getById(_e,dom$j.getTitleId(_e)),getDescriptionEl:_e=>dom$j.getById(_e,dom$j.getDescriptionId(_e)),getCloseTriggerEl:_e=>dom$j.getById(_e,dom$j.getCloseTriggerId(_e))});function connect$8(_e,_,et){const tt=_e.context["aria-label"],nt=_e.matches("open"),it=_e.context.renderedElements;return{open:nt,setOpen(at){at!==nt&&_(at?"OPEN":"CLOSE")},getTriggerProps(){return et.button({...parts$8.trigger.attrs,dir:_e.context.dir,id:dom$j.getTriggerId(_e.context),"aria-haspopup":"dialog",type:"button","aria-expanded":nt,"data-state":nt?"open":"closed","aria-controls":dom$j.getContentId(_e.context),onClick(at){at.defaultPrevented||_("TOGGLE")}})},getBackdropProps(){return et.element({...parts$8.backdrop.attrs,dir:_e.context.dir,hidden:!nt,id:dom$j.getBackdropId(_e.context),"data-state":nt?"open":"closed"})},getPositionerProps(){return et.element({...parts$8.positioner.attrs,dir:_e.context.dir,id:dom$j.getPositionerId(_e.context),style:{pointerEvents:nt?void 0:"none"}})},getContentProps(){return et.element({...parts$8.content.attrs,dir:_e.context.dir,role:_e.context.role,hidden:!nt,id:dom$j.getContentId(_e.context),tabIndex:-1,"data-state":nt?"open":"closed","aria-modal":!0,"aria-label":tt||void 0,"aria-labelledby":tt||!it.title?void 0:dom$j.getTitleId(_e.context),"aria-describedby":it.description?dom$j.getDescriptionId(_e.context):void 0})},getTitleProps(){return et.element({...parts$8.title.attrs,dir:_e.context.dir,id:dom$j.getTitleId(_e.context)})},getDescriptionProps(){return et.element({...parts$8.description.attrs,dir:_e.context.dir,id:dom$j.getDescriptionId(_e.context)})},getCloseTriggerProps(){return et.button({...parts$8.closeTrigger.attrs,dir:_e.context.dir,id:dom$j.getCloseTriggerId(_e.context),type:"button",onClick(at){at.defaultPrevented||(at.stopPropagation(),_("CLOSE"))}})}}}function machine$6(_e){const _=compact$2(_e);return createMachine({id:"dialog",initial:_.open?"open":"closed",context:{role:"dialog",renderedElements:{title:!0,description:!0},modal:!0,trapFocus:!0,preventScroll:!0,closeOnInteractOutside:!0,closeOnEscape:!0,restoreFocus:!0,..._},created:["setAlertDialogProps"],watch:{open:["toggleVisibility"]},states:{open:{entry:["checkRenderedElements","syncZIndex"],activities:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}}},{guards:{isOpenControlled:et=>!!et["open.controlled"]},activities:{trackDismissableElement(et,tt,{send:nt}){return trackDismissableElement(()=>dom$j.getContentEl(et),{defer:!0,pointerBlocking:et.modal,exclude:[dom$j.getTriggerEl(et)],onInteractOutside(at){var ot;(ot=et.onInteractOutside)==null||ot.call(et,at),et.closeOnInteractOutside||at.preventDefault()},persistentElements:et.persistentElements,onFocusOutside:et.onFocusOutside,onPointerDownOutside:et.onPointerDownOutside,onEscapeKeyDown(at){var ot;(ot=et.onEscapeKeyDown)==null||ot.call(et,at),et.closeOnEscape||at.preventDefault()},onDismiss(){nt({type:"CLOSE",src:"interact-outside"})}})},preventScroll(et){if(et.preventScroll)return preventBodyScroll(dom$j.getDoc(et))},trapFocus(et){return!et.trapFocus||!et.modal?void 0:trapFocus(()=>dom$j.getContentEl(et),{preventScroll:!0,returnFocusOnDeactivate:!!et.restoreFocus,initialFocus:et.initialFocusEl,setReturnFocus:nt=>{var it;return((it=et.finalFocusEl)==null?void 0:it.call(et))??nt}})},hideContentBelow(et){return et.modal?ariaHidden(()=>[dom$j.getContentEl(et)],{defer:!0}):void 0}},actions:{setAlertDialogProps(et){et.role==="alertdialog"&&(et.initialFocusEl||(et.initialFocusEl=()=>dom$j.getCloseTriggerEl(et)),et.closeOnInteractOutside=!1)},checkRenderedElements(et){raf$1(()=>{et.renderedElements.title=!!dom$j.getTitleEl(et),et.renderedElements.description=!!dom$j.getDescriptionEl(et)})},syncZIndex(et){raf$1(()=>{const tt=dom$j.getContentEl(et);if(!tt)return;const nt=getComputedStyle$3(tt);[dom$j.getPositionerEl(et),dom$j.getBackdropEl(et)].forEach(at=>{at==null||at.style.setProperty("--z-index",nt.zIndex)})})},invokeOnClose(et){var tt;(tt=et.onOpenChange)==null||tt.call(et,{open:!1})},invokeOnOpen(et){var tt;(tt=et.onOpenChange)==null||tt.call(et,{open:!0})},toggleVisibility(et,tt,{send:nt}){nt({type:et.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:tt})}}})}createProps$1()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);const useDialog=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),{dir:et}=useLocaleContext(),tt={id:reactExports.useId(),getRootNode:_,dir:et,open:_e.defaultOpen,"open.controlled":_e.open!==void 0,..._e},nt={...tt,open:_e.open,onOpenChange:useEvent(_e.onOpenChange,{sync:!0}),onEscapeKeyDown:useEvent(_e.onEscapeKeyDown),onInteractOutside:useEvent(_e.onInteractOutside)},[it,at]=useMachine(machine$6(tt),{context:nt});return connect$8(it,at,normalizeProps)},DialogRoot=_e=>{const[_,{children:et,...tt}]=splitPresenceProps(_e),[nt]=splitRenderStrategyProps(_),it=useDialog(tt),at=usePresence(mergeProps({present:it.open},_));return jsxRuntimeExports.jsx(DialogProvider,{value:it,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:nt,children:jsxRuntimeExports.jsx(PresenceProvider,{value:at,children:et})})})},DialogRootProvider=_e=>{const[_,{value:et,children:tt}]=splitPresenceProps(_e),[nt]=splitRenderStrategyProps(_),it=usePresence(mergeProps({present:et.open},_));return jsxRuntimeExports.jsx(DialogProvider,{value:et,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:nt,children:jsxRuntimeExports.jsx(PresenceProvider,{value:it,children:tt})})})},DialogTitle=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=mergeProps(et.getTitleProps(),_e);return jsxRuntimeExports.jsx(ark.h2,{...tt,ref:_})});DialogTitle.displayName="DialogTitle";const DialogTrigger=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=usePresenceContext(),nt=mergeProps({...et.getTriggerProps(),"aria-controls":tt.unmounted?void 0:et.getTriggerProps()["aria-controls"]},_e);return jsxRuntimeExports.jsx(ark.button,{...nt,ref:_})});DialogTrigger.displayName="DialogTrigger";const[FieldProvider,useFieldContext]=createContext$1({name:"FieldContext",hookName:"useFieldContext",providerName:"<FieldProvider />",strict:!1});var anatomy$j=createAnatomy("editable").parts("root","area","label","preview","input","editTrigger","submitTrigger","cancelTrigger","control");anatomy$j.build();var dom$i=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`editable:${_e.id}`},getAreaId:_e=>{var _;return((_=_e.ids)==null?void 0:_.area)??`editable:${_e.id}:area`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`editable:${_e.id}:label`},getPreviewId:_e=>{var _;return((_=_e.ids)==null?void 0:_.preview)??`editable:${_e.id}:preview`},getInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.input)??`editable:${_e.id}:input`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`editable:${_e.id}:control`},getSubmitTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.submitTrigger)??`editable:${_e.id}:submit`},getCancelTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.cancelTrigger)??`editable:${_e.id}:cancel`},getEditTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.editTrigger)??`editable:${_e.id}:edit`},getInputEl:_e=>dom$i.getById(_e,dom$i.getInputId(_e)),getPreviewEl:_e=>dom$i.getById(_e,dom$i.getPreviewId(_e)),getSubmitTriggerEl:_e=>dom$i.getById(_e,dom$i.getSubmitTriggerId(_e)),getCancelTriggerEl:_e=>dom$i.getById(_e,dom$i.getCancelTriggerId(_e)),getEditTriggerEl:_e=>dom$i.getById(_e,dom$i.getEditTriggerId(_e))});createProps$1()(["activationMode","autoResize","dir","disabled","finalFocusEl","form","getRootNode","id","ids","invalid","maxLength","name","onEditChange","onFocusOutside","onInteractOutside","onPointerDownOutside","onValueChange","onValueCommit","onValueRevert","placeholder","readOnly","required","selectOnFocus","edit","edit.controlled","submitMode","translations","value"]);const FieldErrorText$1=reactExports.forwardRef((_e,_)=>{const et=useFieldContext(),tt=mergeProps(et.getErrorTextProps(),_e);return et!=null&&et.invalid?jsxRuntimeExports.jsx(ark.span,{...tt,ref:_}):null});FieldErrorText$1.displayName="FieldErrorText";const FieldHelperText$1=reactExports.forwardRef((_e,_)=>{const et=useFieldContext(),tt=mergeProps(et==null?void 0:et.getHelperTextProps(),_e);return jsxRuntimeExports.jsx(ark.span,{...tt,ref:_})});FieldHelperText$1.displayName="FieldHelperText";const FieldInput=reactExports.forwardRef((_e,_)=>{const et=useFieldContext(),tt=mergeProps(et==null?void 0:et.getInputProps(),_e);return jsxRuntimeExports.jsx(ark.input,{...tt,ref:_})});FieldInput.displayName="FieldInput";const FieldLabel$1=reactExports.forwardRef((_e,_)=>{const et=useFieldContext(),tt=mergeProps(et==null?void 0:et.getLabelProps(),_e);return jsxRuntimeExports.jsx(ark.label,{...tt,ref:_})});FieldLabel$1.displayName="FieldLabel";const useSafeLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,[FieldsetProvider,useFieldsetContext]=createContext$1({name:"FieldsetContext",hookName:"useFieldsetContext",providerName:"<FieldsetProvider />",strict:!1}),fieldAnatomy$1=createAnatomy("field").parts("root","errorText","helperText","input","label","select","textarea","requiredIndicator"),parts$7=fieldAnatomy$1.build(),useField=_e=>{const _=useFieldsetContext(),{ids:et,disabled:tt=!!(_!=null&&_.disabled),invalid:nt=!1,readOnly:it=!1,required:at=!1}=_e,ot=reactExports.useRef(!1),st=reactExports.useRef(!1),dt=_e.id??reactExports.useId(),ht=reactExports.useRef(null),ct=(et==null?void 0:et.control)??`field::${dt}`,ut=(et==null?void 0:et.errorText)??`field::${dt}::error-text`,ft=(et==null?void 0:et.helperText)??`field::${dt}::helper-text`,gt=(et==null?void 0:et.label)??`field::${dt}::label`;useSafeLayoutEffect(()=>{const Et=ht.current;if(!Et)return;const At=getWindow$1(Et),Pt=At.document,Rt=()=>{ot.current=!!Pt.getElementById(ut),st.current=!!Pt.getElementById(ft)};Rt();const It=new At.MutationObserver(Rt);return It.observe(Et,{childList:!0,subtree:!0}),()=>It.disconnect()},[ut,ft]);const mt=reactExports.useMemo(()=>{const Et=[];return ot.current&&nt&&Et.push(ut),st.current&&Et.push(ft),Et.join(" ")||void 0},[nt,ut,ft]),vt=reactExports.useMemo(()=>()=>({...parts$7.root.attrs,id:ct,ref:ht,role:"group","data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(nt),"data-readonly":dataAttr$1(it)}),[tt,nt,it,ct]),yt=reactExports.useMemo(()=>()=>({...parts$7.label.attrs,id:gt,"data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(nt),"data-readonly":dataAttr$1(it),htmlFor:dt}),[tt,nt,it,dt,gt]),bt=reactExports.useMemo(()=>()=>({"aria-describedby":mt,"aria-invalid":ariaAttr(nt),"data-invalid":dataAttr$1(nt),"data-required":dataAttr$1(at),"data-readonly":dataAttr$1(it),id:dt,required:at,disabled:tt,readOnly:it}),[mt,nt,at,it,dt,tt]),_t=reactExports.useMemo(()=>()=>({...bt(),...parts$7.input.attrs}),[bt]),xt=reactExports.useMemo(()=>()=>({...bt(),...parts$7.textarea.attrs}),[bt]),St=reactExports.useMemo(()=>()=>({...bt(),...parts$7.select.attrs}),[bt]),Tt=reactExports.useMemo(()=>()=>({id:ft,...parts$7.helperText.attrs}),[ft]),wt=reactExports.useMemo(()=>()=>({id:ut,...parts$7.errorText.attrs,"aria-live":"polite"}),[ut]),Ct=reactExports.useMemo(()=>()=>({"aria-hidden":!0,...parts$7.requiredIndicator.attrs}),[]);return{ariaDescribedby:mt,ids:{root:ct,control:dt,label:gt,errorText:ut,helperText:ft},refs:{rootRef:ht},disabled:tt,invalid:nt,readOnly:it,required:at,getLabelProps:yt,getRootProps:vt,getInputProps:_t,getTextareaProps:xt,getSelectProps:St,getHelperTextProps:Tt,getErrorTextProps:wt,getRequiredIndicatorProps:Ct}},FieldRoot$1=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["id","ids","disabled","invalid","readOnly","required"]),nt=useField(et),it=mergeProps(nt.getRootProps(),tt);return jsxRuntimeExports.jsx(FieldProvider,{value:nt,children:jsxRuntimeExports.jsx(ark.div,{...it,ref:composeRefs(_,nt.refs.rootRef)})})});FieldRoot$1.displayName="FieldRoot";var autoresizeTextarea=_e=>{var dt;if(!_e)return;const _=getComputedStyle$3(_e),et=getWindow$1(_e),tt=getDocument(_e),nt=()=>{_e.style.height="auto";const ht=parseInt(_.borderTopWidth,10),ct=parseInt(_.borderBottomWidth,10);_e.style.height=`${_e.scrollHeight+ht+ct}px`};_e.addEventListener("input",nt);const it=Object.getPrototypeOf(_e),at=Object.getOwnPropertyDescriptor(it,"value");Object.defineProperty(_e,"value",{...at,set(){var ht;(ht=at==null?void 0:at.set)==null||ht.apply(this,arguments),nt()}});const ot=new et.ResizeObserver(()=>nt());ot.observe(_e);const st=new et.MutationObserver(()=>nt());return st.observe(_e,{attributes:!0,attributeFilter:["rows","placeholder"]}),(dt=tt.fonts)==null||dt.addEventListener("loadingdone",nt),()=>{var ht;_e.removeEventListener("input",nt),(ht=tt.fonts)==null||ht.removeEventListener("loadingdone",nt),ot.disconnect(),st.disconnect()}};const FieldTextarea=reactExports.forwardRef((_e,_)=>{const{autoresize:et,...tt}=_e,nt=reactExports.useRef(null),it=useFieldContext(),at=mergeProps(it==null?void 0:it.getTextareaProps(),{style:{resize:et?"none":void 0}},tt);return reactExports.useEffect(()=>{if(et)return autoresizeTextarea(nt.current)},[et]),jsxRuntimeExports.jsx(ark.textarea,{...at,ref:composeRefs(_,nt)})});FieldTextarea.displayName="FieldTextarea";const fieldsetAnatomy$1=createAnatomy("fieldset").parts("root","errorText","helperText","legend");fieldsetAnatomy$1.build();var anatomy$i=createAnatomy("file-upload").parts("root","dropzone","item","itemDeleteTrigger","itemGroup","itemName","itemPreview","itemPreviewImage","itemSizeText","label","trigger","clearTrigger");anatomy$i.build();var dom$h=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`file:${_e.id}`},getDropzoneId:_e=>{var _;return((_=_e.ids)==null?void 0:_.dropzone)??`file:${_e.id}:dropzone`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`file:${_e.id}:input`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`file:${_e.id}:trigger`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`file:${_e.id}:label`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`file:${_e.id}:item:${_}`},getItemNameId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemName)==null?void 0:tt.call(et,_))??`file:${_e.id}:item-name:${_}`},getItemSizeTextId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemSizeText)==null?void 0:tt.call(et,_))??`file:${_e.id}:item-size:${_}`},getItemPreviewId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemPreview)==null?void 0:tt.call(et,_))??`file:${_e.id}:item-preview:${_}`},getRootEl:_e=>dom$h.getById(_e,dom$h.getRootId(_e)),getHiddenInputEl:_e=>dom$h.getById(_e,dom$h.getHiddenInputId(_e)),getDropzoneEl:_e=>dom$h.getById(_e,dom$h.getDropzoneId(_e))});createProps$1()(["accept","allowDrop","capture","dir","directory","disabled","getRootNode","id","ids","locale","maxFiles","maxFileSize","minFileSize","name","invalid","onFileAccept","onFileReject","onFileChange","preventDocumentDrop","required","translations","validate"]);createProps$1()(["file"]);var anatomy$h=createAnatomy("menu").parts("arrow","arrowTip","content","contextTrigger","indicator","item","itemGroup","itemGroupLabel","itemIndicator","itemText","positioner","separator","trigger","triggerItem");anatomy$h.build();var dom$g=createScope({getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`menu:${_e.id}:trigger`},getContextTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.contextTrigger)??`menu:${_e.id}:ctx-trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`menu:${_e.id}:content`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`menu:${_e.id}:arrow`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`menu:${_e.id}:popper`},getGroupId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.group)==null?void 0:tt.call(et,_))??`menu:${_e.id}:group:${_}`},getGroupLabelId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.groupLabel)==null?void 0:tt.call(et,_))??`menu:${_e.id}:group-label:${_}`},getContentEl:_e=>dom$g.getById(_e,dom$g.getContentId(_e)),getPositionerEl:_e=>dom$g.getById(_e,dom$g.getPositionerId(_e)),getTriggerEl:_e=>dom$g.getById(_e,dom$g.getTriggerId(_e)),getHighlightedItemEl:_e=>_e.highlightedValue?dom$g.getById(_e,_e.highlightedValue):null,getArrowEl:_e=>dom$g.getById(_e,dom$g.getArrowId(_e)),getElements:_e=>{const et=`[role^="menuitem"][data-ownedby=${CSS.escape(dom$g.getContentId(_e))}]:not([data-disabled])`;return queryAll(dom$g.getContentEl(_e),et)},getFirstEl:_e=>first(dom$g.getElements(_e)),getLastEl:_e=>last(dom$g.getElements(_e)),getNextEl:(_e,_)=>nextById(dom$g.getElements(_e),_e.highlightedValue,_??_e.loopFocus),getPrevEl:(_e,_)=>prevById(dom$g.getElements(_e),_e.highlightedValue,_??_e.loopFocus),getElemByKey:(_e,_)=>getByTypeahead(dom$g.getElements(_e),{state:_e.typeaheadState,key:_,activeId:_e.highlightedValue}),isTargetDisabled:_e=>isHTMLElement$1(_e)&&(_e.dataset.disabled===""||_e.hasAttribute("disabled")),isTriggerItem:_e=>{var _;return!!((_=_e==null?void 0:_e.getAttribute("role"))!=null&&_.startsWith("menuitem"))&&!!(_e!=null&&_e.hasAttribute("aria-controls"))},getOptionFromItemEl(_e){return{id:_e.id,name:_e.dataset.name,value:_e.dataset.value,valueText:_e.dataset.valueText,type:_e.dataset.type}}});createProps$1()(["anchorPoint","aria-label","closeOnSelect","composite","dir","getRootNode","highlightedValue","id","ids","loopFocus","navigate","onEscapeKeyDown","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","open.controlled","open","positioning","typeahead"]);createProps$1()(["closeOnSelect","disabled","value","valueText"]);createProps$1()(["htmlFor"]);createProps$1()(["id"]);createProps$1()(["disabled","valueText","closeOnSelect","type","value","checked","onCheckedChange"]);var anatomy$g=createAnatomy("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger");anatomy$g.build();var dom$f=createScope({getAnchorId:_e=>{var _;return((_=_e.ids)==null?void 0:_.anchor)??`popover:${_e.id}:anchor`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`popover:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`popover:${_e.id}:content`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`popover:${_e.id}:popper`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`popover:${_e.id}:arrow`},getTitleId:_e=>{var _;return((_=_e.ids)==null?void 0:_.title)??`popover:${_e.id}:title`},getDescriptionId:_e=>{var _;return((_=_e.ids)==null?void 0:_.description)??`popover:${_e.id}:desc`},getCloseTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.closeTrigger)??`popover:${_e.id}:close`},getAnchorEl:_e=>dom$f.getById(_e,dom$f.getAnchorId(_e)),getTriggerEl:_e=>dom$f.getById(_e,dom$f.getTriggerId(_e)),getContentEl:_e=>dom$f.getById(_e,dom$f.getContentId(_e)),getPositionerEl:_e=>dom$f.getById(_e,dom$f.getPositionerId(_e)),getTitleEl:_e=>dom$f.getById(_e,dom$f.getTitleId(_e)),getDescriptionEl:_e=>dom$f.getById(_e,dom$f.getDescriptionId(_e)),getFocusableEls:_e=>getFocusables(dom$f.getContentEl(_e)),getFirstFocusableEl:_e=>dom$f.getFocusableEls(_e)[0]});createProps$1()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","portalled","positioning"]);function isVirtualClick(_e){return _e.mozInputSource===0&&_e.isTrusted?!0:_e.detail===0&&!_e.pointerType}function isValidKey(_e){return!(_e.metaKey||!isMac()&&_e.altKey||_e.ctrlKey||_e.key==="Control"||_e.key==="Shift"||_e.key==="Meta")}var nonTextInputTypes=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function isKeyboardFocusEvent(_e,_,et){const tt=et?getEventTarget(et):null,nt=getWindow$1(tt);return _e=_e||tt instanceof nt.HTMLInputElement&&!nonTextInputTypes.has(tt==null?void 0:tt.type)||tt instanceof nt.HTMLTextAreaElement||tt instanceof nt.HTMLElement&&tt.isContentEditable,!(_e&&_==="keyboard"&&et instanceof nt.KeyboardEvent&&!Reflect.has(FOCUS_VISIBLE_INPUT_KEYS,et.key))}var currentModality=null,changeHandlers=new Set,listenerMap=new Map,hasEventBeforeFocus=!1,hasBlurredWindowRecently=!1,FOCUS_VISIBLE_INPUT_KEYS={Tab:!0,Escape:!0};function triggerChangeHandlers(_e,_){for(let et of changeHandlers)et(_e,_)}function handleKeyboardEvent(_e){hasEventBeforeFocus=!0,isValidKey(_e)&&(currentModality="keyboard",triggerChangeHandlers("keyboard",_e))}function handlePointerEvent(_e){currentModality="pointer",(_e.type==="mousedown"||_e.type==="pointerdown")&&(hasEventBeforeFocus=!0,triggerChangeHandlers("pointer",_e))}function handleClickEvent(_e){isVirtualClick(_e)&&(hasEventBeforeFocus=!0,currentModality="virtual")}function handleFocusEvent(_e){const _=getEventTarget(_e);_===getWindow$1(_)||_===getDocument(_)||(!hasEventBeforeFocus&&!hasBlurredWindowRecently&&(currentModality="virtual",triggerChangeHandlers("virtual",_e)),hasEventBeforeFocus=!1,hasBlurredWindowRecently=!1)}function handleWindowBlur(){hasEventBeforeFocus=!1,hasBlurredWindowRecently=!0}function setupGlobalFocusEvents(_e){if(typeof window>"u"||listenerMap.get(getWindow$1(_e)))return;const _=getWindow$1(_e),et=getDocument(_e);let tt=_.HTMLElement.prototype.focus;_.HTMLElement.prototype.focus=function(){currentModality="virtual",triggerChangeHandlers("virtual",null),hasEventBeforeFocus=!0,tt.apply(this,arguments)},et.addEventListener("keydown",handleKeyboardEvent,!0),et.addEventListener("keyup",handleKeyboardEvent,!0),et.addEventListener("click",handleClickEvent,!0),_.addEventListener("focus",handleFocusEvent,!0),_.addEventListener("blur",handleWindowBlur,!1),typeof _.PointerEvent<"u"?(et.addEventListener("pointerdown",handlePointerEvent,!0),et.addEventListener("pointermove",handlePointerEvent,!0),et.addEventListener("pointerup",handlePointerEvent,!0)):(et.addEventListener("mousedown",handlePointerEvent,!0),et.addEventListener("mousemove",handlePointerEvent,!0),et.addEventListener("mouseup",handlePointerEvent,!0)),_.addEventListener("beforeunload",()=>{tearDownWindowFocusTracking(_e)},{once:!0}),listenerMap.set(_,{focus:tt})}var tearDownWindowFocusTracking=(_e,_)=>{const et=getWindow$1(_e),tt=getDocument(_e);listenerMap.has(et)&&(et.HTMLElement.prototype.focus=listenerMap.get(et).focus,tt.removeEventListener("keydown",handleKeyboardEvent,!0),tt.removeEventListener("keyup",handleKeyboardEvent,!0),tt.removeEventListener("click",handleClickEvent,!0),et.removeEventListener("focus",handleFocusEvent,!0),et.removeEventListener("blur",handleWindowBlur,!1),typeof et.PointerEvent<"u"?(tt.removeEventListener("pointerdown",handlePointerEvent,!0),tt.removeEventListener("pointermove",handlePointerEvent,!0),tt.removeEventListener("pointerup",handlePointerEvent,!0)):(tt.removeEventListener("mousedown",handlePointerEvent,!0),tt.removeEventListener("mousemove",handlePointerEvent,!0),tt.removeEventListener("mouseup",handlePointerEvent,!0)),listenerMap.delete(et))};function isFocusVisible(){return currentModality==="keyboard"}function trackFocusVisible(_e={}){const{isTextInput:_,autoFocus:et,onChange:tt,root:nt}=_e;setupGlobalFocusEvents(nt),tt==null||tt({isFocusVisible:et||isFocusVisible(),modality:currentModality});const it=(at,ot)=>{isKeyboardFocusEvent(!!_,at,ot)&&(tt==null||tt({isFocusVisible:isFocusVisible(),modality:at}))};return changeHandlers.add(it),()=>{changeHandlers.delete(it)}}var rafId,observedElements=new Map,getRectFn=_e=>_e.getBoundingClientRect();function trackElementRect(_e,_){const{scope:et="rect",getRect:tt=getRectFn,onChange:nt}=_,it=getLoopFn({scope:et,getRect:tt}),at=observedElements.get(_e);return at?(at.callbacks.push(nt),nt(tt(_e))):(observedElements.set(_e,{rect:{},callbacks:[nt]}),observedElements.size===1&&(rafId=requestAnimationFrame(it))),function(){const st=observedElements.get(_e);if(!st)return;const dt=st.callbacks.indexOf(nt);dt>-1&&st.callbacks.splice(dt,1),st.callbacks.length===0&&(observedElements.delete(_e),observedElements.size===0&&cancelAnimationFrame(rafId))}}function getLoopFn(_e){const{scope:_,getRect:et}=_e,tt=getEqualityFn(_);return function nt(){const it=[];observedElements.forEach((at,ot)=>{const st=et(ot);tt(at.rect,st)||(at.rect=st,it.push(at))}),it.forEach(at=>{at.callbacks.forEach(ot=>ot(at.rect))}),rafId=requestAnimationFrame(nt)}}var isEqualSize=(_e,_)=>_e.width===_.width&&_e.height===_.height,isEqualPosition=(_e,_)=>_e.top===_.top&&_e.left===_.left,isEqualRect=(_e,_)=>isEqualSize(_e,_)&&isEqualPosition(_e,_);function getEqualityFn(_e){return _e==="size"?isEqualSize:_e==="position"?isEqualPosition:isEqualRect}var anatomy$f=createAnatomy("radio-group").parts("root","label","item","itemText","itemControl","indicator");anatomy$f.build();var dom$e=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`radio-group:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`radio-group:${_e.id}:label`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:${_}`},getItemHiddenInputId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemHiddenInput)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:input:${_}`},getItemControlId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemControl)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:control:${_}`},getItemLabelId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemLabel)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:label:${_}`},getIndicatorId:_e=>{var _;return((_=_e.ids)==null?void 0:_.indicator)??`radio-group:${_e.id}:indicator`},getRootEl:_e=>dom$e.getById(_e,dom$e.getRootId(_e)),getItemHiddenInputEl:(_e,_)=>dom$e.getById(_e,dom$e.getItemHiddenInputId(_e,_)),getIndicatorEl:_e=>dom$e.getById(_e,dom$e.getIndicatorId(_e)),getFirstEnabledInputEl:_e=>{var _;return(_=dom$e.getRootEl(_e))==null?void 0:_.querySelector("input:not(:disabled)")},getFirstEnabledAndCheckedInputEl:_e=>{var _;return(_=dom$e.getRootEl(_e))==null?void 0:_.querySelector("input:not(:disabled):checked")},getInputEls:_e=>{const et=`input[type=radio][data-ownedby='${CSS.escape(dom$e.getRootId(_e))}']:not([disabled])`;return queryAll(dom$e.getRootEl(_e),et)},getActiveRadioEl:_e=>{if(_e.value)return dom$e.getById(_e,dom$e.getItemId(_e,_e.value))},getOffsetRect:_e=>({left:(_e==null?void 0:_e.offsetLeft)??0,top:(_e==null?void 0:_e.offsetTop)??0,width:(_e==null?void 0:_e.offsetWidth)??0,height:(_e==null?void 0:_e.offsetHeight)??0}),getRectById:(_e,_)=>{const et=dom$e.getById(_e,dom$e.getItemId(_e,_));if(et)return dom$e.resolveRect(dom$e.getOffsetRect(et))},resolveRect:_e=>({width:`${_e.width}px`,height:`${_e.height}px`,left:`${_e.left}px`,top:`${_e.top}px`})});createProps$1()(["dir","disabled","form","getRootNode","id","ids","name","onValueChange","orientation","readOnly","value"]);createProps$1()(["value","disabled","invalid"]);var anatomy$e=createAnatomy("rating-group").parts("root","label","item","control");anatomy$e.build();var dom$d=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`rating:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`rating:${_e.id}:label`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`rating:${_e.id}:input`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`rating:${_e.id}:control`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`rating:${_e.id}:item:${_}`},getRootEl:_e=>dom$d.getById(_e,dom$d.getRootId(_e)),getControlEl:_e=>dom$d.getById(_e,dom$d.getControlId(_e)),getRadioEl:(_e,_=_e.value)=>{const et=`[role=radio][aria-posinset='${Math.ceil(_)}']`;return query(dom$d.getControlEl(_e),et)},getHiddenInputEl:_e=>dom$d.getById(_e,dom$d.getHiddenInputId(_e)),dispatchChangeEvent:_e=>{const _=dom$d.getHiddenInputEl(_e);_&&dispatchInputValueEvent(_,{value:_e.value})}});createProps$1()(["allowHalf","autoFocus","count","dir","disabled","form","getRootNode","id","ids","name","onHoverChange","onValueChange","required","readOnly","translations","value"]);createProps$1()(["index"]);var __defProp$1=Object.defineProperty,__defNormalProp$1=(_e,_,et)=>_ in _e?__defProp$1(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et,__publicField$1=(_e,_,et)=>__defNormalProp$1(_e,_+"",et),fallback$1={itemToValue(_e){return typeof _e=="string"?_e:isObject$5(_e)&&hasProp(_e,"value")?_e.value:""},itemToString(_e){return typeof _e=="string"?_e:isObject$5(_e)&&hasProp(_e,"label")?_e.label:fallback$1.itemToValue(_e)},isItemDisabled(_e){return isObject$5(_e)&&hasProp(_e,"disabled")?!!_e.disabled:!1}},ListCollection=class{constructor(_e){this.options=_e,__publicField$1(this,"items"),this.items=[..._e.items]}isEqual(_e){return isEqual$3(this.items,_e.items)}setItems(_e){this.items=Array.from(_e)}getValues(_e=this.items){return Array.from(_e).map(_=>this.getItemValue(_)).filter(Boolean)}find(_e){if(_e==null)return null;const _=this.items.findIndex(et=>this.getItemValue(et)===_e);return _!=null?this.items[_]:null}findMany(_e){return Array.from(_e).map(_=>this.find(_)).filter(Boolean)}at(_e){return this.items[_e]??null}sortFn(_e,_){const et=this.indexOf(_e),tt=this.indexOf(_);return(et??0)-(tt??0)}sort(_e){return[..._e].sort(this.sortFn.bind(this))}getItemValue(_e){var _,et;return _e==null?null:((et=(_=this.options).itemToValue)==null?void 0:et.call(_,_e))??fallback$1.itemToValue(_e)}getItemDisabled(_e){var _,et;return _e==null?!1:((et=(_=this.options).isItemDisabled)==null?void 0:et.call(_,_e))??fallback$1.isItemDisabled(_e)}stringifyItem(_e){var _,et;return _e==null?null:((et=(_=this.options).itemToString)==null?void 0:et.call(_,_e))??fallback$1.itemToString(_e)}stringify(_e){return _e==null?null:this.stringifyItem(this.find(_e))}stringifyItems(_e,_=", "){return Array.from(_e).map(et=>this.stringifyItem(et)).filter(Boolean).join(_)}stringifyMany(_e,_){return this.stringifyItems(this.findMany(_e),_)}has(_e){return this.indexOf(_e)!==-1}hasItem(_e){return _e==null?!1:this.has(this.getItemValue(_e))}get size(){return this.items.length}get firstValue(){let _e=0;for(;this.getItemDisabled(this.at(_e));)_e++;return this.getItemValue(this.at(_e))}get lastValue(){let _e=this.size-1;for(;this.getItemDisabled(this.at(_e));)_e--;return this.getItemValue(this.at(_e))}getNextValue(_e,_=1,et=!1){let tt=this.indexOf(_e);if(tt===-1)return null;for(tt=et?Math.min(tt+_,this.size-1):tt+_;tt<=this.size&&this.getItemDisabled(this.at(tt));)tt++;return this.getItemValue(this.at(tt))}getPreviousValue(_e,_=1,et=!1){let tt=this.indexOf(_e);if(tt===-1)return null;for(tt=et?Math.max(tt-_,0):tt-_;tt>=0&&this.getItemDisabled(this.at(tt));)tt--;return this.getItemValue(this.at(tt))}indexOf(_e){return _e==null?-1:this.items.findIndex(_=>this.getItemValue(_)===_e)}getByText(_e,_){let et=_!=null?wrap$1(this.items,this.indexOf(_)):this.items;return _e.length===1&&(et=et.filter(nt=>this.getItemValue(nt)!==_)),et.find(nt=>match$1(this.stringifyItem(nt),_e))}search(_e,_){const{state:et,currentValue:tt,timeout:nt=350}=_,it=et.keysSoFar+_e,ot=it.length>1&&Array.from(it).every(ut=>ut===it[0])?it[0]:it,st=this.getByText(ot,tt),dt=this.getItemValue(st);function ht(){clearTimeout(et.timer),et.timer=-1}function ct(ut){et.keysSoFar=ut,ht(),ut!==""&&(et.timer=+setTimeout(()=>{ct(""),ht()},nt))}return ct(it),dt}*[Symbol.iterator](){yield*this.items}insertBefore(_e,_){const et=this.indexOf(_e);et!==-1&&this.items.splice(et,0,_)}insertAfter(_e,_){const et=this.indexOf(_e);et!==-1&&this.items.splice(et+1,0,_)}reorder(_e,_){if(_e===-1||_===-1||_e===_)return;const[et]=this.items.splice(_e,1);this.items.splice(_,0,et)}json(){return{size:this.size,first:this.firstValue,last:this.lastValue}}},match$1=(_e,_)=>!!(_e!=null&&_e.toLowerCase().startsWith(_.toLowerCase())),wrap$1=(_e,_)=>_e.map((et,tt)=>_e[(Math.max(_,0)+tt)%_e.length]);const createListCollection=_e=>ref$1(new ListCollection(_e)),[SelectProvider,useSelectContext]=createContext$1({name:"SelectContext",hookName:"useSelectContext",providerName:"<SelectProvider />"}),SelectClearTrigger$2=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getClearTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});SelectClearTrigger$2.displayName="SelectClearTrigger";const SelectContent$2=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=usePresenceContext(),nt=mergeProps(et.getContentProps(),tt.getPresenceProps(),_e);return tt.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...nt,ref:composeRefs(tt.ref,_)})});SelectContent$2.displayName="SelectContent";const SelectContext$1=_e=>_e.children(useSelectContext()),SelectControl$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getControlProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});SelectControl$1.displayName="SelectControl";const SelectHiddenSelect$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getHiddenSelectProps(),_e),nt=et.value.length===0,it=useFieldContext();return jsxRuntimeExports.jsxs(ark.select,{"aria-describedby":it==null?void 0:it.ariaDescribedby,...tt,ref:_,children:[nt&&jsxRuntimeExports.jsx("option",{value:""}),et.collection.items.map((at,ot)=>jsxRuntimeExports.jsx("option",{value:et.collection.getItemValue(at)??"",disabled:et.collection.getItemDisabled(at)},ot))]})});SelectHiddenSelect$1.displayName="SelectHiddenSelect";const SelectIndicator$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getIndicatorProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});SelectIndicator$1.displayName="SelectIndicator";const[SelectItemProvider,useSelectItemContext]=createContext$1({name:"SelectItemContext",hookName:"useSelectItemContext",providerName:"<SelectItemProvider />"}),[SelectItemPropsProvider,useSelectItemPropsContext]=createContext$1({name:"SelectItemPropsContext",hookName:"useSelectItemPropsContext",providerName:"<SelectItemPropsProvider />"}),SelectItem$2=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["item","persistFocus"]),nt=useSelectContext(),it=mergeProps(nt.getItemProps(et),tt),at=nt.getItemState(et);return jsxRuntimeExports.jsx(SelectItemPropsProvider,{value:et,children:jsxRuntimeExports.jsx(SelectItemProvider,{value:at,children:jsxRuntimeExports.jsx(ark.div,{...it,ref:_})})})});SelectItem$2.displayName="SelectItem";const[SelectItemGroupPropsProvider,useSelectItemGroupPropsContext]=createContext$1({name:"SelectItemGroupPropsContext",hookName:"useSelectItemGroupPropsContext",providerName:"<SelectItemGroupPropsProvider />"}),SelectItemGroup$1=reactExports.forwardRef((_e,_)=>{const et=reactExports.useId(),[tt,nt]=createSplitProps()(_e,["id"]),it={id:et,...tt},at=useSelectContext(),ot=mergeProps(at.getItemGroupProps(it),nt);return jsxRuntimeExports.jsx(SelectItemGroupPropsProvider,{value:it,children:jsxRuntimeExports.jsx(ark.div,{...ot,ref:_})})});SelectItemGroup$1.displayName="SelectItemGroup";const SelectItemGroupLabel$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=useSelectItemGroupPropsContext(),nt=mergeProps(et.getItemGroupLabelProps({htmlFor:tt.id}),_e);return jsxRuntimeExports.jsx(ark.div,{...nt,ref:_})});SelectItemGroupLabel$1.displayName="SelectItemGroupLabel";const SelectItemIndicator$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=useSelectItemPropsContext(),nt=mergeProps(et.getItemIndicatorProps(tt),_e);return jsxRuntimeExports.jsx(ark.div,{...nt,ref:_})});SelectItemIndicator$1.displayName="SelectItemIndicator";const SelectItemText=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=useSelectItemPropsContext(),nt=mergeProps(et.getItemTextProps(tt),_e);return jsxRuntimeExports.jsx(ark.span,{...nt,ref:_})});SelectItemText.displayName="SelectItemText";const SelectLabel=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getLabelProps(),_e);return jsxRuntimeExports.jsx(ark.label,{...tt,ref:_})});SelectLabel.displayName="SelectLabel";const SelectPositioner$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getPositionerProps(),_e);return usePresenceContext().unmounted?null:jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});SelectPositioner$1.displayName="SelectPositioner";var anatomy$d=createAnatomy("select").parts("label","positioner","trigger","indicator","clearTrigger","item","itemText","itemIndicator","itemGroup","itemGroupLabel","list","content","root","control","valueText"),parts$6=anatomy$d.build(),collection=_e=>ref$1(new ListCollection(_e));collection.empty=()=>ref$1(new ListCollection({items:[]}));var dom$c=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`select:${_e.id}`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`select:${_e.id}:content`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`select:${_e.id}:trigger`},getClearTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.clearTrigger)??`select:${_e.id}:clear-trigger`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`select:${_e.id}:label`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`select:${_e.id}:control`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`select:${_e.id}:option:${_}`},getHiddenSelectId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenSelect)??`select:${_e.id}:select`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`select:${_e.id}:positioner`},getItemGroupId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemGroup)==null?void 0:tt.call(et,_))??`select:${_e.id}:optgroup:${_}`},getItemGroupLabelId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemGroupLabel)==null?void 0:tt.call(et,_))??`select:${_e.id}:optgroup-label:${_}`},getHiddenSelectEl:_e=>dom$c.getById(_e,dom$c.getHiddenSelectId(_e)),getContentEl:_e=>dom$c.getById(_e,dom$c.getContentId(_e)),getControlEl:_e=>dom$c.getById(_e,dom$c.getControlId(_e)),getTriggerEl:_e=>dom$c.getById(_e,dom$c.getTriggerId(_e)),getClearTriggerEl:_e=>dom$c.getById(_e,dom$c.getClearTriggerId(_e)),getPositionerEl:_e=>dom$c.getById(_e,dom$c.getPositionerId(_e)),getHighlightedOptionEl(_e){return _e.highlightedValue?dom$c.getById(_e,dom$c.getItemId(_e,_e.highlightedValue)):null}});function connect$7(_e,_,et){const tt=_e.context.isDisabled,nt=_e.context.invalid,it=_e.context.readOnly,at=_e.context.isInteractive,ot=_e.context.composite,st=_e.hasTag("open"),dt=_e.matches("focused"),ht=_e.context.highlightedValue,ct=_e.context.highlightedItem,ut=_e.context.selectedItems,ft=_e.context.isTypingAhead,gt=_e.context.collection,mt=ht?dom$c.getItemId(_e.context,ht):void 0;function vt(bt){const _t=gt.getItemDisabled(bt.item),xt=gt.getItemValue(bt.item);return{value:xt,disabled:!!(tt||_t),highlighted:ht===xt,selected:_e.context.value.includes(xt)}}const yt=getPlacementStyles({..._e.context.positioning,placement:_e.context.currentPlacement});return{open:st,focused:dt,empty:_e.context.value.length===0,highlightedItem:ct,highlightedValue:ht,selectedItems:ut,hasSelectedItems:_e.context.hasSelectedItems,value:_e.context.value,valueAsString:_e.context.valueAsString,collection:gt,multiple:!!_e.context.multiple,disabled:!!tt,setCollection(bt){_({type:"COLLECTION.SET",value:bt})},reposition(bt={}){_({type:"POSITIONING.SET",options:bt})},focus(){var bt;(bt=dom$c.getTriggerEl(_e.context))==null||bt.focus({preventScroll:!0})},setOpen(bt){bt!==st&&_(bt?"OPEN":"CLOSE")},selectValue(bt){_({type:"ITEM.SELECT",value:bt})},setValue(bt){_({type:"VALUE.SET",value:bt})},selectAll(){_({type:"VALUE.SET",value:gt.getValues()})},highlightValue(bt){_({type:"HIGHLIGHTED_VALUE.SET",value:bt})},clearValue(bt){_(bt?{type:"ITEM.CLEAR",value:bt}:{type:"VALUE.CLEAR"})},getItemState:vt,getRootProps(){return et.element({...parts$6.root.attrs,dir:_e.context.dir,id:dom$c.getRootId(_e.context),"data-invalid":dataAttr$1(nt),"data-readonly":dataAttr$1(it)})},getLabelProps(){return et.label({dir:_e.context.dir,id:dom$c.getLabelId(_e.context),...parts$6.label.attrs,"data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(nt),"data-readonly":dataAttr$1(it),htmlFor:dom$c.getHiddenSelectId(_e.context),onClick(bt){var _t;bt.defaultPrevented||tt||(_t=dom$c.getTriggerEl(_e.context))==null||_t.focus({preventScroll:!0})}})},getControlProps(){return et.element({...parts$6.control.attrs,dir:_e.context.dir,id:dom$c.getControlId(_e.context),"data-state":st?"open":"closed","data-focus":dataAttr$1(dt),"data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(nt)})},getValueTextProps(){return et.element({...parts$6.valueText.attrs,dir:_e.context.dir,"data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(nt),"data-focus":dataAttr$1(dt)})},getTriggerProps(){return et.button({id:dom$c.getTriggerId(_e.context),disabled:tt,dir:_e.context.dir,type:"button",role:"combobox","aria-controls":dom$c.getContentId(_e.context),"aria-expanded":st,"aria-haspopup":"listbox","data-state":st?"open":"closed","aria-invalid":nt,"aria-labelledby":dom$c.getLabelId(_e.context),...parts$6.trigger.attrs,"data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(nt),"data-readonly":dataAttr$1(it),"data-placement":_e.context.currentPlacement,"data-placeholder-shown":dataAttr$1(!_e.context.hasSelectedItems),onClick(bt){at&&(bt.defaultPrevented||_({type:"TRIGGER.CLICK"}))},onFocus(){_("TRIGGER.FOCUS")},onBlur(){_("TRIGGER.BLUR")},onKeyDown(bt){if(bt.defaultPrevented||!at)return;const xt={ArrowUp(){_({type:"TRIGGER.ARROW_UP"})},ArrowDown(St){_({type:St.altKey?"OPEN":"TRIGGER.ARROW_DOWN"})},ArrowLeft(){_({type:"TRIGGER.ARROW_LEFT"})},ArrowRight(){_({type:"TRIGGER.ARROW_RIGHT"})},Home(){_({type:"TRIGGER.HOME"})},End(){_({type:"TRIGGER.END"})},Enter(){_({type:"TRIGGER.ENTER"})},Space(St){_(ft?{type:"TRIGGER.TYPEAHEAD",key:St.key}:{type:"TRIGGER.ENTER"})}}[getEventKey(bt,_e.context)];if(xt){xt(bt),bt.preventDefault();return}getByTypeahead.isValidEvent(bt)&&(_({type:"TRIGGER.TYPEAHEAD",key:bt.key}),bt.preventDefault())}})},getIndicatorProps(){return et.element({...parts$6.indicator.attrs,dir:_e.context.dir,"aria-hidden":!0,"data-state":st?"open":"closed","data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(nt),"data-readonly":dataAttr$1(it)})},getItemProps(bt){const _t=vt(bt);return et.element({id:dom$c.getItemId(_e.context,_t.value),role:"option",...parts$6.item.attrs,dir:_e.context.dir,"data-value":_t.value,"aria-selected":_t.selected,"data-state":_t.selected?"checked":"unchecked","data-highlighted":dataAttr$1(_t.highlighted),"data-disabled":dataAttr$1(_t.disabled),"aria-disabled":ariaAttr(_t.disabled),onPointerMove(xt){_t.disabled||xt.pointerType!=="mouse"||_t.value!==_e.context.highlightedValue&&_({type:"ITEM.POINTER_MOVE",value:_t.value})},onClick(xt){xt.defaultPrevented||_t.disabled||_({type:"ITEM.CLICK",src:"pointerup",value:_t.value})},onPointerLeave(xt){_t.disabled||bt.persistFocus||xt.pointerType!=="mouse"||!_e.previousEvent.type.includes("POINTER")||_({type:"ITEM.POINTER_LEAVE"})}})},getItemTextProps(bt){const _t=vt(bt);return et.element({...parts$6.itemText.attrs,"data-state":_t.selected?"checked":"unchecked","data-disabled":dataAttr$1(_t.disabled),"data-highlighted":dataAttr$1(_t.highlighted)})},getItemIndicatorProps(bt){const _t=vt(bt);return et.element({"aria-hidden":!0,...parts$6.itemIndicator.attrs,"data-state":_t.selected?"checked":"unchecked",hidden:!_t.selected})},getItemGroupLabelProps(bt){const{htmlFor:_t}=bt;return et.element({...parts$6.itemGroupLabel.attrs,id:dom$c.getItemGroupLabelId(_e.context,_t),role:"group",dir:_e.context.dir})},getItemGroupProps(bt){const{id:_t}=bt;return et.element({...parts$6.itemGroup.attrs,"data-disabled":dataAttr$1(tt),id:dom$c.getItemGroupId(_e.context,_t),"aria-labelledby":dom$c.getItemGroupLabelId(_e.context,_t),dir:_e.context.dir})},getClearTriggerProps(){return et.button({...parts$6.clearTrigger.attrs,id:dom$c.getClearTriggerId(_e.context),type:"button","aria-label":"Clear value","data-invalid":dataAttr$1(nt),disabled:tt,hidden:!_e.context.hasSelectedItems,dir:_e.context.dir,onClick(bt){bt.defaultPrevented||_("CLEAR.CLICK")}})},getHiddenSelectProps(){return et.select({name:_e.context.name,form:_e.context.form,disabled:tt,multiple:_e.context.multiple,required:_e.context.required,"aria-hidden":!0,id:dom$c.getHiddenSelectId(_e.context),defaultValue:_e.context.multiple?_e.context.value:_e.context.value[0],style:visuallyHiddenStyle,tabIndex:-1,onFocus(){var bt;(bt=dom$c.getTriggerEl(_e.context))==null||bt.focus({preventScroll:!0})},"aria-labelledby":dom$c.getLabelId(_e.context)})},getPositionerProps(){return et.element({...parts$6.positioner.attrs,dir:_e.context.dir,id:dom$c.getPositionerId(_e.context),style:yt.floating})},getContentProps(){return et.element({hidden:!st,dir:_e.context.dir,id:dom$c.getContentId(_e.context),role:ot?"listbox":"dialog",...parts$6.content.attrs,"data-state":st?"open":"closed","data-placement":_e.context.currentPlacement,"data-activedescendant":mt,"aria-activedescendant":ot?mt:void 0,"aria-multiselectable":_e.context.multiple&&ot?!0:void 0,"aria-labelledby":dom$c.getLabelId(_e.context),tabIndex:0,onKeyDown(bt){if(!at||!isSelfTarget(bt))return;if(bt.key==="Tab"&&!isValidTabEvent(bt)){bt.preventDefault();return}const _t={ArrowUp(){_({type:"CONTENT.ARROW_UP"})},ArrowDown(){_({type:"CONTENT.ARROW_DOWN"})},Home(){_({type:"CONTENT.HOME"})},End(){_({type:"CONTENT.END"})},Enter(){_({type:"ITEM.CLICK",src:"keydown.enter"})},Space(Tt){var wt;ft?_({type:"CONTENT.TYPEAHEAD",key:Tt.key}):(wt=_t.Enter)==null||wt.call(_t,Tt)}},xt=_t[getEventKey(bt)];if(xt){xt(bt),bt.preventDefault();return}const St=getEventTarget(bt);isEditableElement(St)||getByTypeahead.isValidEvent(bt)&&(_({type:"CONTENT.TYPEAHEAD",key:bt.key}),bt.preventDefault())}})},getListProps(){return et.element({...parts$6.list.attrs,tabIndex:0,role:ot?void 0:"listbox","aria-labelledby":dom$c.getTriggerId(_e.context),"aria-activedescendant":ot?void 0:mt,"aria-multiselectable":!ot&&_e.context.multiple?!0:void 0})}}}var{and:and$2,not:not$4,or:or$1}=guards;function machine$5(_e){const _=compact$2(_e);return createMachine({id:"select",context:{value:[],highlightedValue:null,loopFocus:!1,closeOnSelect:!_.multiple,disabled:!1,readOnly:!1,composite:!0,..._,highlightedItem:null,selectedItems:[],valueAsString:"",collection:_.collection??collection.empty(),typeahead:getByTypeahead.defaultOptions,fieldsetDisabled:!1,positioning:{placement:"bottom-start",gutter:8,..._.positioning}},computed:{hasSelectedItems:et=>et.value.length>0,isTypingAhead:et=>et.typeahead.keysSoFar!=="",isDisabled:et=>!!et.disabled||et.fieldsetDisabled,isInteractive:et=>!(et.isDisabled||et.readOnly)},initial:_.open?"open":"idle",created:["syncCollection"],entry:["syncSelectElement"],watch:{open:["toggleVisibility"],value:["syncSelectedItems","syncSelectElement"],highlightedValue:["syncHighlightedItem"],collection:["syncCollection"]},on:{"HIGHLIGHTED_VALUE.SET":{actions:["setHighlightedItem"]},"ITEM.SELECT":{actions:["selectItem"]},"ITEM.CLEAR":{actions:["clearItem"]},"VALUE.SET":{actions:["setSelectedItems"]},"VALUE.CLEAR":{actions:["clearSelectedItems"]},"CLEAR.CLICK":{actions:["clearSelectedItems","focusTriggerEl"]},"COLLECTION.SET":{actions:["setCollection"]}},activities:["trackFormControlState"],states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{target:"open",actions:["setInitialFocus"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus","highlightFirstSelectedItem"]}],"TRIGGER.FOCUS":{target:"focused"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}]}},focused:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{guard:"isTriggerArrowUpEvent",target:"open",actions:["setInitialFocus","highlightComputedLastItem"]},{guard:or$1("isTriggerArrowDownEvent","isTriggerEnterEvent"),target:"open",actions:["setInitialFocus","highlightComputedFirstItem"]},{target:"open",actions:["setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}],"TRIGGER.BLUR":{target:"idle"},"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightFirstSelectedItem"]}],"TRIGGER.ENTER":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_UP":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedLastItem"]}],"TRIGGER.ARROW_DOWN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_LEFT":[{guard:and$2(not$4("multiple"),"hasSelectedItems"),actions:["selectPreviousItem"]},{guard:not$4("multiple"),actions:["selectLastItem"]}],"TRIGGER.ARROW_RIGHT":[{guard:and$2(not$4("multiple"),"hasSelectedItems"),actions:["selectNextItem"]},{guard:not$4("multiple"),actions:["selectFirstItem"]}],"TRIGGER.HOME":{guard:not$4("multiple"),actions:["selectFirstItem"]},"TRIGGER.END":{guard:not$4("multiple"),actions:["selectLastItem"]},"TRIGGER.TYPEAHEAD":{guard:not$4("multiple"),actions:["selectMatchingItem"]}}},open:{tags:["open"],exit:["scrollContentToTop"],activities:["trackDismissableElement","computePlacement","scrollToHighlightedItem"],on:{"CONTROLLED.CLOSE":{target:"focused",actions:["focusTriggerEl","clearHighlightedItem"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","focusTriggerEl","clearHighlightedItem"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","clearHighlightedItem"]}],"ITEM.CLICK":[{guard:and$2("closeOnSelect","isOpenControlled"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{actions:["selectHighlightedItem"]}],"CONTENT.HOME":{actions:["highlightFirstItem"]},"CONTENT.END":{actions:["highlightLastItem"]},"CONTENT.ARROW_DOWN":[{guard:and$2("hasHighlightedItem","loop","isLastItemHighlighted"),actions:["highlightFirstItem"]},{guard:"hasHighlightedItem",actions:["highlightNextItem"]},{actions:["highlightFirstItem"]}],"CONTENT.ARROW_UP":[{guard:and$2("hasHighlightedItem","loop","isFirstItemHighlighted"),actions:["highlightLastItem"]},{guard:"hasHighlightedItem",actions:["highlightPreviousItem"]},{actions:["highlightLastItem"]}],"CONTENT.TYPEAHEAD":{actions:["highlightMatchingItem"]},"ITEM.POINTER_MOVE":{actions:["highlightItem"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedItem"]},"POSITIONING.SET":{actions:["reposition"]}}}}},{guards:{loop:et=>!!et.loopFocus,multiple:et=>!!et.multiple,hasSelectedItems:et=>!!et.hasSelectedItems,hasHighlightedItem:et=>et.highlightedValue!=null,isFirstItemHighlighted:et=>et.highlightedValue===et.collection.firstValue,isLastItemHighlighted:et=>et.highlightedValue===et.collection.lastValue,closeOnSelect:(et,tt)=>!!(tt.closeOnSelect??et.closeOnSelect),isOpenControlled:et=>!!et["open.controlled"],isTriggerClickEvent:(et,tt)=>{var nt;return((nt=tt.previousEvent)==null?void 0:nt.type)==="TRIGGER.CLICK"},isTriggerEnterEvent:(et,tt)=>{var nt;return((nt=tt.previousEvent)==null?void 0:nt.type)==="TRIGGER.ENTER"},isTriggerArrowUpEvent:(et,tt)=>{var nt;return((nt=tt.previousEvent)==null?void 0:nt.type)==="TRIGGER.ARROW_UP"},isTriggerArrowDownEvent:(et,tt)=>{var nt;return((nt=tt.previousEvent)==null?void 0:nt.type)==="TRIGGER.ARROW_DOWN"}},activities:{trackFormControlState(et,tt,{initialContext:nt}){return trackFormControl(dom$c.getHiddenSelectEl(et),{onFieldsetDisabledChange(it){et.fieldsetDisabled=it},onFormReset(){set$6.selectedItems(et,nt.value)}})},trackDismissableElement(et,tt,{send:nt}){const it=()=>dom$c.getContentEl(et);let at=!0;return trackDismissableElement(it,{defer:!0,exclude:[dom$c.getTriggerEl(et),dom$c.getClearTriggerEl(et)],onFocusOutside:et.onFocusOutside,onPointerDownOutside:et.onPointerDownOutside,onInteractOutside(ot){var st;(st=et.onInteractOutside)==null||st.call(et,ot),at=!(ot.detail.focusable||ot.detail.contextmenu)},onDismiss(){nt({type:"CLOSE",src:"interact-outside",restoreFocus:at})}})},computePlacement(et){return et.currentPlacement=et.positioning.placement,getPlacement(()=>dom$c.getTriggerEl(et),()=>dom$c.getPositionerEl(et),{defer:!0,...et.positioning,onComplete(it){et.currentPlacement=it.placement}})},scrollToHighlightedItem(et,tt,{getState:nt}){const it=ot=>{if(et.highlightedValue==null||nt().event.type.includes("POINTER"))return;const dt=dom$c.getHighlightedOptionEl(et),ht=dom$c.getContentEl(et);if(et.scrollToIndexFn){const ct=et.collection.indexOf(et.highlightedValue);et.scrollToIndexFn({index:ct,immediate:ot});return}scrollIntoView(dt,{rootEl:ht,block:"nearest"})};return raf$1(()=>it(!0)),observeAttributes(()=>dom$c.getContentEl(et),{defer:!0,attributes:["data-activedescendant"],callback(){it(!1)}})}},actions:{reposition(et,tt){const nt=()=>dom$c.getPositionerEl(et);getPlacement(dom$c.getTriggerEl(et),nt,{...et.positioning,...tt.options,defer:!0,listeners:!1,onComplete(it){et.currentPlacement=it.placement}})},toggleVisibility(et,tt,{send:nt}){nt({type:et.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:tt})},highlightPreviousItem(et){if(et.highlightedValue==null)return;const tt=et.collection.getPreviousValue(et.highlightedValue);set$6.highlightedItem(et,tt)},highlightNextItem(et){if(et.highlightedValue==null)return;const tt=et.collection.getNextValue(et.highlightedValue);set$6.highlightedItem(et,tt)},highlightFirstItem(et){const tt=et.collection.firstValue;set$6.highlightedItem(et,tt)},highlightLastItem(et){const tt=et.collection.lastValue;set$6.highlightedItem(et,tt)},setInitialFocus(et){raf$1(()=>{const tt=getInitialFocus({root:dom$c.getContentEl(et)});tt==null||tt.focus({preventScroll:!0})})},focusTriggerEl(et,tt){var it;const nt=tt.restoreFocus??((it=tt.previousEvent)==null?void 0:it.restoreFocus);nt!=null&&!nt||raf$1(()=>{const at=dom$c.getTriggerEl(et);at==null||at.focus({preventScroll:!0})})},selectHighlightedItem(et,tt){let nt=tt.value??et.highlightedValue;if(nt==null)return;const it=et.deselectable&&!et.multiple&&et.value.includes(nt);nt=it?null:nt,set$6.selectedItem(et,nt,it)},highlightComputedFirstItem(et){const tt=et.hasSelectedItems?et.collection.sort(et.value)[0]:et.collection.firstValue;set$6.highlightedItem(et,tt)},highlightComputedLastItem(et){const tt=et.hasSelectedItems?et.collection.sort(et.value)[0]:et.collection.lastValue;set$6.highlightedItem(et,tt)},highlightFirstSelectedItem(et){if(!et.hasSelectedItems)return;const[tt]=et.collection.sort(et.value);set$6.highlightedItem(et,tt)},highlightItem(et,tt){set$6.highlightedItem(et,tt.value)},highlightMatchingItem(et,tt){const nt=et.collection.search(tt.key,{state:et.typeahead,currentValue:et.highlightedValue});nt!=null&&set$6.highlightedItem(et,nt)},setHighlightedItem(et,tt){set$6.highlightedItem(et,tt.value)},clearHighlightedItem(et){set$6.highlightedItem(et,null,!0)},selectItem(et,tt){const nt=et.deselectable&&!et.multiple&&et.value.includes(tt.value),it=nt?null:tt.value;set$6.selectedItem(et,it,nt)},clearItem(et,tt){const nt=et.value.filter(it=>it!==tt.value);set$6.selectedItems(et,nt)},setSelectedItems(et,tt){set$6.selectedItems(et,tt.value)},clearSelectedItems(et){set$6.selectedItems(et,[])},selectPreviousItem(et){const tt=et.collection.getPreviousValue(et.value[0]);set$6.selectedItem(et,tt)},selectNextItem(et){const tt=et.collection.getNextValue(et.value[0]);set$6.selectedItem(et,tt)},selectFirstItem(et){const tt=et.collection.firstValue;set$6.selectedItem(et,tt)},selectLastItem(et){const tt=et.collection.lastValue;set$6.selectedItem(et,tt)},selectMatchingItem(et,tt){const nt=et.collection.search(tt.key,{state:et.typeahead,currentValue:et.value[0]});nt!=null&&set$6.selectedItem(et,nt)},scrollContentToTop(et){var tt;et.scrollToIndexFn?et.scrollToIndexFn({index:0,immediate:!0}):(tt=dom$c.getContentEl(et))==null||tt.scrollTo(0,0)},invokeOnOpen(et){var tt;(tt=et.onOpenChange)==null||tt.call(et,{open:!0})},invokeOnClose(et){var tt;(tt=et.onOpenChange)==null||tt.call(et,{open:!1})},syncSelectElement(et){const tt=dom$c.getHiddenSelectEl(et);if(tt){if(et.value.length===0&&!et.multiple){tt.selectedIndex=-1;return}for(const nt of tt.options)nt.selected=et.value.includes(nt.value)}},setCollection(et,tt){et.collection=tt.value},syncCollection(et){const tt=et.collection.findMany(et.value),nt=et.collection.stringifyItems(tt);et.highlightedItem=et.collection.find(et.highlightedValue),et.selectedItems=tt,et.valueAsString=nt},syncSelectedItems(et){sync$1.valueChange(et)},syncHighlightedItem(et){sync$1.highlightChange(et)}}})}function dispatchChangeEvent(_e){raf$1(()=>{const _=dom$c.getHiddenSelectEl(_e);if(!_)return;const et=dom$c.getWin(_e),tt=new et.Event("change",{bubbles:!0,composed:!0});_.dispatchEvent(tt)})}var sync$1={valueChange:_e=>{const _=_e.selectedItems;_e.selectedItems=_e.value.map(et=>{const tt=_.find(nt=>_e.collection.getItemValue(nt)===et);return tt||_e.collection.find(et)}),_e.valueAsString=_e.collection.stringifyItems(_e.selectedItems)},highlightChange:_e=>{_e.highlightedItem=_e.collection.find(_e.highlightedValue)}},invoke$3={valueChange:_e=>{var _;sync$1.valueChange(_e),(_=_e.onValueChange)==null||_.call(_e,{value:Array.from(_e.value),items:Array.from(_e.selectedItems)}),dispatchChangeEvent(_e)},highlightChange:_e=>{var _;sync$1.highlightChange(_e),(_=_e.onHighlightChange)==null||_.call(_e,{highlightedValue:_e.highlightedValue,highlightedItem:_e.highlightedItem,highlightedIndex:_e.collection.indexOf(_e.highlightedValue)})}},set$6={selectedItem:(_e,_,et=!1)=>{if(!isEqual$3(_e.value,_)&&!(_==null&&!et)){if(_==null&&et){_e.value=[],invoke$3.valueChange(_e);return}_e.value=_e.multiple?addOrRemove(_e.value,_):[_],invoke$3.valueChange(_e)}},selectedItems:(_e,_)=>{isEqual$3(_e.value,_)||(_e.value=_,invoke$3.valueChange(_e))},highlightedItem:(_e,_,et=!1)=>{isEqual$3(_e.highlightedValue,_)||_==null&&!et||(_e.highlightedValue=_??null,invoke$3.highlightChange(_e))}};createProps$1()(["closeOnSelect","collection","dir","disabled","deselectable","form","getRootNode","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","open.controlled","open","composite","positioning","required","readOnly","scrollToIndexFn","value"]);createProps$1()(["item","persistFocus"]);createProps$1()(["id"]);createProps$1()(["htmlFor"]);const useSelect=_e=>{const{collection:_,...et}=_e,tt=useLocaleContext(),nt=useEnvironmentContext(),it=useFieldContext(),at={id:reactExports.useId(),ids:{label:it==null?void 0:it.ids.label,hiddenSelect:it==null?void 0:it.ids.control},disabled:it==null?void 0:it.disabled,readOnly:it==null?void 0:it.readOnly,invalid:it==null?void 0:it.invalid,required:it==null?void 0:it.required,dir:tt.dir,getRootNode:nt.getRootNode,collection:_,open:_e.defaultOpen,value:_e.defaultValue,"open.controlled":_e.open!==void 0,...et},ot=(()=>{const{collection:ct,...ut}=at;return{...ut,value:_e.value,onValueChange:useEvent(_e.onValueChange,{sync:!0}),onHighlightChange:useEvent(_e.onHighlightChange),onOpenChange:useEvent(_e.onOpenChange)}})(),[st,dt,ht]=useMachine(machine$5(at),{context:ot});return reactExports.useEffect(()=>{ht.setContext({collection:_})},[_]),connect$7(st,dt,normalizeProps)},SelectImpl$1=(_e,_)=>{const[et,tt]=splitPresenceProps(_e),[nt,it]=createSplitProps()(tt,["closeOnSelect","collection","composite","defaultOpen","defaultValue","deselectable","disabled","form","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","open","positioning","readOnly","required","scrollToIndexFn","value"]),at=useSelect(nt),ot=usePresence(mergeProps({present:at.open},et)),st=mergeProps(at.getRootProps(),it);return jsxRuntimeExports.jsx(SelectProvider,{value:at,children:jsxRuntimeExports.jsx(PresenceProvider,{value:ot,children:jsxRuntimeExports.jsx(ark.div,{...st,ref:_})})})},SelectRoot$2=reactExports.forwardRef(SelectImpl$1),SelectImpl=(_e,_)=>{const[et,tt]=splitPresenceProps(_e),[{value:nt},it]=createSplitProps()(tt,["value"]),at=usePresence(mergeProps({present:nt.open},et)),ot=mergeProps(nt.getRootProps(),it);return jsxRuntimeExports.jsx(SelectProvider,{value:nt,children:jsxRuntimeExports.jsx(PresenceProvider,{value:at,children:jsxRuntimeExports.jsx(ark.div,{...ot,ref:_})})})},SelectRootProvider=reactExports.forwardRef(SelectImpl),SelectTrigger$2=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});SelectTrigger$2.displayName="SelectTrigger";const SelectValueText$2=reactExports.forwardRef((_e,_)=>{const{children:et,placeholder:tt,...nt}=_e,it=useSelectContext(),at=mergeProps(it.getValueTextProps(),nt);return jsxRuntimeExports.jsx(ark.span,{...at,ref:_,children:et||it.valueAsString||tt})});SelectValueText$2.displayName="SelectValueText";var anatomy$c=createAnatomy("slider").parts("root","label","thumb","valueText","track","range","control","markerGroup","marker","draggingIndicator");anatomy$c.build();function getBounds(_e){const _=_e[0],et=_e[_e.length-1];return[_,et]}function getRangeOffsets(_e){const[_,et]=getBounds(_e.valuePercent);if(_e.valuePercent.length===1){if(_e.origin==="center"){const tt=_e.valuePercent[0]<50,nt=tt?`${_e.valuePercent[0]}%`:"50%",it=tt?"50%":`${100-_e.valuePercent[0]}%`;return{start:nt,end:it}}return{start:"0%",end:`${100-et}%`}}return{start:`${_}%`,end:`${100-et}%`}}function getRangeStyle(_e){return _e.isVertical?{position:"absolute",bottom:"var(--slider-range-start)",top:"var(--slider-range-end)"}:{position:"absolute",[_e.isRtl?"right":"left"]:"var(--slider-range-start)",[_e.isRtl?"left":"right"]:"var(--slider-range-end)"}}function getVerticalThumbOffset(_e){const{height:_=0}=_e.thumbSize??{},et=getValueTransformer([_e.min,_e.max],[-_/2,_/2]);return parseFloat(et(_e.value).toFixed(2))}function getHorizontalThumbOffset(_e){const{width:_=0}=_e.thumbSize??{};if(_e.isRtl){const tt=getValueTransformer([_e.max,_e.min],[-_/2,_/2]);return-1*parseFloat(tt(_e.value).toFixed(2))}const et=getValueTransformer([_e.min,_e.max],[-_/2,_/2]);return parseFloat(et(_e.value).toFixed(2))}function getOffset(_e,_){if(_e.thumbAlignment==="center")return`${_}%`;const et=_e.isVertical?getVerticalThumbOffset(_e):getHorizontalThumbOffset(_e);return`calc(${_}% - ${et}px)`}function getThumbOffset(_e){let _=getValuePercent(_e.value,_e.min,_e.max)*100;return getOffset(_e,_)}function getVisibility(_e){let _="visible";return _e.thumbAlignment==="contain"&&!_e.hasMeasuredThumbSize&&(_="hidden"),_}function getThumbStyle(_e,_){const et=_e.isVertical?"bottom":"insetInlineStart";return{visibility:getVisibility(_e),position:"absolute",transform:"var(--slider-thumb-transform)",[et]:`var(--slider-thumb-offset-${_})`}}function getControlStyle(){return{touchAction:"none",userSelect:"none",WebkitUserSelect:"none",position:"relative"}}function getRootStyle(_e){const _=getRangeOffsets(_e);return{..._e.value.reduce((tt,nt,it)=>{const at=getThumbOffset({..._e,value:nt});return{...tt,[`--slider-thumb-offset-${it}`]:at}},{}),"--slider-thumb-transform":_e.isVertical?"translateY(50%)":_e.isRtl?"translateX(50%)":"translateX(-50%)","--slider-range-start":_.start,"--slider-range-end":_.end}}function getMarkerStyle(_e,_){return{visibility:getVisibility(_e),position:"absolute",pointerEvents:"none",[_e.isHorizontal?"insetInlineStart":"bottom"]:getThumbOffset({..._e,value:_}),translate:"var(--tx) var(--ty)","--tx":_e.isHorizontal?_e.isRtl?"50%":"-50%":"0%","--ty":_e.isHorizontal?"0%":"50%"}}function getMarkerGroupStyle(){return{userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",position:"relative"}}var styleGetterFns={getRootStyle,getControlStyle,getThumbStyle,getRangeStyle,getMarkerStyle,getMarkerGroupStyle},dom$b=createScope({...styleGetterFns,getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`slider:${_e.id}`},getThumbId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.thumb)==null?void 0:tt.call(et,_))??`slider:${_e.id}:thumb:${_}`},getHiddenInputId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.hiddenInput)==null?void 0:tt.call(et,_))??`slider:${_e.id}:input:${_}`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`slider:${_e.id}:control`},getTrackId:_e=>{var _;return((_=_e.ids)==null?void 0:_.track)??`slider:${_e.id}:track`},getRangeId:_e=>{var _;return((_=_e.ids)==null?void 0:_.range)??`slider:${_e.id}:range`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`slider:${_e.id}:label`},getValueTextId:_e=>{var _;return((_=_e.ids)==null?void 0:_.valueText)??`slider:${_e.id}:value-text`},getMarkerId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.marker)==null?void 0:tt.call(et,_))??`slider:${_e.id}:marker:${_}`},getRootEl:_e=>dom$b.getById(_e,dom$b.getRootId(_e)),getThumbEl:(_e,_)=>dom$b.getById(_e,dom$b.getThumbId(_e,_)),getHiddenInputEl:(_e,_)=>dom$b.getById(_e,dom$b.getHiddenInputId(_e,_)),getControlEl:_e=>dom$b.getById(_e,dom$b.getControlId(_e)),getElements:_e=>queryAll(dom$b.getControlEl(_e),"[role=slider]"),getFirstEl:_e=>dom$b.getElements(_e)[0],getRangeEl:_e=>dom$b.getById(_e,dom$b.getRangeId(_e)),getValueFromPoint(_e,_){const et=dom$b.getControlEl(_e);if(!et)return;const nt=getRelativePoint(_,et).getPercentValue({orientation:_e.orientation,dir:_e.dir,inverted:{y:!0}});return getPercentValue(nt,_e.min,_e.max,_e.step)},dispatchChangeEvent(_e){Array.from(_e.value).forEach((et,tt)=>{const nt=dom$b.getHiddenInputEl(_e,tt);nt&&dispatchInputValueEvent(nt,{value:et})})}});createProps$1()(["aria-label","aria-labelledby","dir","disabled","form","getAriaValueText","getRootNode","id","ids","invalid","max","min","minStepsBetweenThumbs","name","onFocusChange","onValueChange","onValueChangeEnd","orientation","origin","readOnly","step","thumbAlignment","thumbAlignment","thumbSize","value"]);createProps$1()(["index","name"]);const[SwitchProvider,useSwitchContext]=createContext$1({name:"SwitchContext",hookName:"useSwitchContext",providerName:"<SwitchProvider />"}),SwitchControl$1=reactExports.forwardRef((_e,_)=>{const et=useSwitchContext(),tt=mergeProps(et.getControlProps(),_e);return jsxRuntimeExports.jsx(ark.span,{...tt,ref:_})});SwitchControl$1.displayName="SwitchControl";const SwitchHiddenInput$1=reactExports.forwardRef((_e,_)=>{const et=useSwitchContext(),tt=mergeProps(et.getHiddenInputProps(),_e),nt=useFieldContext();return jsxRuntimeExports.jsx(ark.input,{"aria-describedby":nt==null?void 0:nt.ariaDescribedby,...tt,ref:_})});SwitchHiddenInput$1.displayName="SwitchHiddenInput";const SwitchLabel$1=reactExports.forwardRef((_e,_)=>{const et=useSwitchContext(),tt=mergeProps(et.getLabelProps(),_e);return jsxRuntimeExports.jsx(ark.span,{...tt,ref:_})});SwitchLabel$1.displayName="SwitchLabel";var anatomy$b=createAnatomy("switch").parts("root","label","control","thumb"),parts$5=anatomy$b.build(),dom$a=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`switch:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`switch:${_e.id}:label`},getThumbId:_e=>{var _;return((_=_e.ids)==null?void 0:_.thumb)??`switch:${_e.id}:thumb`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`switch:${_e.id}:control`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`switch:${_e.id}:input`},getRootEl:_e=>dom$a.getById(_e,dom$a.getRootId(_e)),getHiddenInputEl:_e=>dom$a.getById(_e,dom$a.getHiddenInputId(_e))});function connect$6(_e,_,et){const tt=_e.context.isDisabled,nt=_e.context.readOnly,it=_e.context.checked,at=!tt&&_e.context.focused,ot=!tt&&_e.context.focusVisible,st={"data-active":dataAttr$1(_e.context.active),"data-focus":dataAttr$1(at),"data-focus-visible":dataAttr$1(ot),"data-readonly":dataAttr$1(nt),"data-hover":dataAttr$1(_e.context.hovered),"data-disabled":dataAttr$1(tt),"data-state":_e.context.checked?"checked":"unchecked","data-invalid":dataAttr$1(_e.context.invalid)};return{checked:it,disabled:tt,focused:at,setChecked(dt){_({type:"CHECKED.SET",checked:dt,isTrusted:!1})},toggleChecked(){_({type:"CHECKED.TOGGLE",checked:it,isTrusted:!1})},getRootProps(){return et.label({...parts$5.root.attrs,...st,dir:_e.context.dir,id:dom$a.getRootId(_e.context),htmlFor:dom$a.getHiddenInputId(_e.context),onPointerMove(){tt||_({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){tt||_({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(dt){if(tt)return;getEventTarget(dt)===dom$a.getHiddenInputEl(_e.context)&&dt.stopPropagation()}})},getLabelProps(){return et.element({...parts$5.label.attrs,...st,dir:_e.context.dir,id:dom$a.getLabelId(_e.context)})},getThumbProps(){return et.element({...parts$5.thumb.attrs,...st,dir:_e.context.dir,id:dom$a.getThumbId(_e.context),"aria-hidden":!0})},getControlProps(){return et.element({...parts$5.control.attrs,...st,dir:_e.context.dir,id:dom$a.getControlId(_e.context),"aria-hidden":!0})},getHiddenInputProps(){return et.input({id:dom$a.getHiddenInputId(_e.context),type:"checkbox",required:_e.context.required,defaultChecked:it,disabled:tt,"aria-labelledby":dom$a.getLabelId(_e.context),"aria-invalid":_e.context.invalid,name:_e.context.name,form:_e.context.form,value:_e.context.value,style:visuallyHiddenStyle,onFocus(){const dt=isFocusVisible();_({type:"CONTEXT.SET",context:{focused:!0,focusVisible:dt}})},onBlur(){_({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(dt){if(nt){dt.preventDefault();return}const ht=dt.currentTarget.checked;_({type:"CHECKED.SET",checked:ht,isTrusted:!0})}})}}}var{not:not$3}=guards;function machine$4(_e){const _=compact$2(_e);return createMachine({id:"switch",initial:"ready",context:{checked:!1,label:"switch",value:"on",disabled:!1,..._,fieldsetDisabled:!1,focusVisible:!1},computed:{isDisabled:et=>et.disabled||et.fieldsetDisabled},watch:{disabled:"removeFocusIfNeeded",checked:"syncInputElement"},activities:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:not$3("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:not$3("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},states:{ready:{}}},{guards:{isTrusted:(et,tt)=>!!tt.isTrusted},activities:{trackPressEvent(et){if(!et.isDisabled)return trackPress({pointerNode:dom$a.getRootEl(et),keyboardNode:dom$a.getHiddenInputEl(et),isValidKey:tt=>tt.key===" ",onPress:()=>et.active=!1,onPressStart:()=>et.active=!0,onPressEnd:()=>et.active=!1})},trackFocusVisible(et){if(!et.isDisabled)return trackFocusVisible({root:dom$a.getRootNode(et)})},trackFormControlState(et,tt,{send:nt,initialContext:it}){return trackFormControl(dom$a.getHiddenInputEl(et),{onFieldsetDisabledChange(at){et.fieldsetDisabled=at},onFormReset(){nt({type:"CHECKED.SET",checked:!!it.checked,src:"form-reset"})}})}},actions:{setContext(et,tt){Object.assign(et,tt.context)},syncInputElement(et){const tt=dom$a.getHiddenInputEl(et);tt&&(tt.checked=!!et.checked)},removeFocusIfNeeded(et){et.disabled&&et.focused&&(et.focused=!1)},setChecked(et,tt){set$5.checked(et,tt.checked)},toggleChecked(et,tt){set$5.checked(et,!et.checked)},dispatchChangeEvent(et){const tt=dom$a.getHiddenInputEl(et);dispatchInputCheckedEvent(tt,{checked:et.checked})}}})}var invoke$2={change:_e=>{var _;(_=_e.onCheckedChange)==null||_.call(_e,{checked:_e.checked})}},set$5={checked:(_e,_)=>{isEqual$3(_e.checked,_)||(_e.checked=_,invoke$2.change(_e))}};createProps$1()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]);const useSwitch=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),{dir:et}=useLocaleContext(),tt=useFieldContext(),nt={id:reactExports.useId(),ids:{label:tt==null?void 0:tt.ids.label,hiddenInput:tt==null?void 0:tt.ids.control},dir:et,disabled:tt==null?void 0:tt.disabled,readOnly:tt==null?void 0:tt.readOnly,invalid:tt==null?void 0:tt.invalid,required:tt==null?void 0:tt.required,getRootNode:_,checked:_e.defaultChecked,..._e},it={...nt,checked:_e.checked,onCheckedChange:useEvent(_e.onCheckedChange,{sync:!0})},[at,ot]=useMachine(machine$4(nt),{context:it});return connect$6(at,ot,normalizeProps)},SwitchRoot$1=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["checked","defaultChecked","disabled","form","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]),nt=useSwitch(et),it=mergeProps(nt.getRootProps(),tt);return jsxRuntimeExports.jsx(SwitchProvider,{value:nt,children:jsxRuntimeExports.jsx(ark.label,{...it,ref:_})})});SwitchRoot$1.displayName="SwitchRoot";const SwitchRootProvider=reactExports.forwardRef((_e,_)=>{const[{value:et},tt]=createSplitProps()(_e,["value"]),nt=mergeProps(et.getRootProps(),tt);return jsxRuntimeExports.jsx(SwitchProvider,{value:et,children:jsxRuntimeExports.jsx(ark.label,{...nt,ref:_})})});SwitchRootProvider.displayName="SwitchRootProvider";const SwitchThumb$1=reactExports.forwardRef((_e,_)=>{const et=useSwitchContext(),tt=mergeProps(et.getThumbProps(),_e);return jsxRuntimeExports.jsx(ark.span,{...tt,ref:_})});SwitchThumb$1.displayName="SwitchThumb";const[AvatarProvider,useAvatarContext]=createContext$1({name:"AvatarContext",hookName:"useAvatarContext",providerName:"<AvatarProvider />"}),AvatarFallback$2=reactExports.forwardRef((_e,_)=>{const et=useAvatarContext(),tt=mergeProps(et.getFallbackProps(),_e);return jsxRuntimeExports.jsx(ark.span,{...tt,ref:_})});AvatarFallback$2.displayName="AvatarFallback";const AvatarImage$1=reactExports.forwardRef((_e,_)=>{const et=useAvatarContext(),tt=mergeProps(et.getImageProps(),_e);return jsxRuntimeExports.jsx(ark.img,{...tt,ref:_})});AvatarImage$1.displayName="AvatarImage";var anatomy$a=createAnatomy("avatar").parts("root","image","fallback"),parts$4=anatomy$a.build(),dom$9=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`avatar:${_e.id}`},getImageId:_e=>{var _;return((_=_e.ids)==null?void 0:_.image)??`avatar:${_e.id}:image`},getFallbackId:_e=>{var _;return((_=_e.ids)==null?void 0:_.fallback)??`avatar:${_e.id}:fallback`},getRootEl:_e=>dom$9.getById(_e,dom$9.getRootId(_e)),getImageEl:_e=>dom$9.getById(_e,dom$9.getImageId(_e))});function connect$5(_e,_,et){const tt=_e.matches("loaded");return{loaded:tt,setSrc(nt){_({type:"SRC.SET",src:nt})},setLoaded(){_({type:"IMG.LOADED",src:"api"})},setError(){_({type:"IMG.ERROR",src:"api"})},getRootProps(){return et.element({...parts$4.root.attrs,dir:_e.context.dir,id:dom$9.getRootId(_e.context)})},getImageProps(){return et.img({...parts$4.image.attrs,hidden:!tt,dir:_e.context.dir,id:dom$9.getImageId(_e.context),"data-state":tt?"visible":"hidden",onLoad(){_({type:"IMG.LOADED",src:"element"})},onError(){_({type:"IMG.ERROR",src:"element"})}})},getFallbackProps(){return et.element({...parts$4.fallback.attrs,dir:_e.context.dir,id:dom$9.getFallbackId(_e.context),hidden:tt,"data-state":tt?"hidden":"visible"})}}}function machine$3(_e){const _=compact$2(_e);return createMachine({id:"avatar",initial:"loading",activities:["trackImageRemoval"],context:_,on:{"SRC.CHANGE":{target:"loading"},"IMG.UNMOUNT":{target:"error"}},states:{loading:{activities:["trackSrcChange"],entry:["checkImageStatus"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]},"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}},error:{activities:["trackSrcChange"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{activities:["trackSrcChange"],on:{"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}}}},{activities:{trackSrcChange(et,tt,{send:nt}){const it=dom$9.getImageEl(et);return observeAttributes(it,{attributes:["src","srcset"],callback(){nt({type:"SRC.CHANGE"})}})},trackImageRemoval(et,tt,{send:nt}){const it=dom$9.getRootEl(et);return observeChildren(it,{callback(at){Array.from(at[0].removedNodes).find(dt=>dt.nodeType===Node.ELEMENT_NODE&&dt.matches("[data-scope=avatar][data-part=image]"))&&nt({type:"IMG.UNMOUNT"})}})}},actions:{invokeOnLoad(et){var tt;(tt=et.onStatusChange)==null||tt.call(et,{status:"loaded"})},invokeOnError(et){var tt;(tt=et.onStatusChange)==null||tt.call(et,{status:"error"})},checkImageStatus(et,tt,{send:nt}){const it=dom$9.getImageEl(et);if(it!=null&&it.complete){const at=hasLoaded(it)?"IMG.LOADED":"IMG.ERROR";nt({type:at,src:"ssr"})}}}})}function hasLoaded(_e){return _e.complete&&_e.naturalWidth!==0&&_e.naturalHeight!==0}createProps$1()(["dir","id","ids","onStatusChange","getRootNode"]);const useAvatar=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),{dir:et}=useLocaleContext(),tt={id:reactExports.useId(),dir:et,getRootNode:_,..._e},nt={...tt,onStatusChange:useEvent(_e.onStatusChange)},[it,at]=useMachine(machine$3(tt),{context:nt});return connect$5(it,at,normalizeProps)},AvatarRoot$1=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["id","ids","onStatusChange"]),nt=useAvatar(et),it=mergeProps(nt.getRootProps(),tt);return jsxRuntimeExports.jsx(AvatarProvider,{value:nt,children:jsxRuntimeExports.jsx(ark.div,{...it,ref:_})})});AvatarRoot$1.displayName="AvatarRoot";const AvatarRootProvider=reactExports.forwardRef((_e,_)=>{const[{value:et},tt]=createSplitProps()(_e,["value"]),nt=mergeProps(et.getRootProps(),tt);return jsxRuntimeExports.jsx(AvatarProvider,{value:et,children:jsxRuntimeExports.jsx(ark.div,{...nt,ref:_})})});AvatarRootProvider.displayName="AvatarRootProvider";var anatomy$9=createAnatomy("checkbox").parts("root","label","control","indicator");anatomy$9.build();var dom$8=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`checkbox:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`checkbox:${_e.id}:label`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`checkbox:${_e.id}:control`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`checkbox:${_e.id}:input`},getRootEl:_e=>dom$8.getById(_e,dom$8.getRootId(_e)),getHiddenInputEl:_e=>dom$8.getById(_e,dom$8.getHiddenInputId(_e))});createProps$1()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","name","onCheckedChange","readOnly","required","value"]);const checkboxAnatomy=anatomy$9.extendWith("group"),colorPickerAnatomy=anatomy$l.extendWith("view");var anatomy$8=createAnatomy("hoverCard").parts("arrow","arrowTip","trigger","positioner","content");anatomy$8.build();var dom$7=createScope({getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`hover-card:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`hover-card:${_e.id}:content`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`hover-card:${_e.id}:popper`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`hover-card:${_e.id}:arrow`},getTriggerEl:_e=>dom$7.getById(_e,dom$7.getTriggerId(_e)),getContentEl:_e=>dom$7.getById(_e,dom$7.getContentId(_e)),getPositionerEl:_e=>dom$7.getById(_e,dom$7.getPositionerId(_e))});createProps$1()(["closeDelay","dir","getRootNode","id","ids","onOpenChange","open.controlled","open","openDelay","positioning"]);const[NumberInputProvider,useNumberInputContext]=createContext$1({name:"NumberInputContext",hookName:"useNumberInputContext",providerName:"<NumberInputProvider />"}),NumberInputControl$1=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getControlProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});NumberInputControl$1.displayName="NumberInputControl";const NumberInputDecrementTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getDecrementTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});NumberInputDecrementTrigger$1.displayName="NumberInputDecrementTrigger";const NumberInputIncrementTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getIncrementTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});NumberInputIncrementTrigger$1.displayName="NumberInputIncrementTrigger";const NumberInputInput$1=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getInputProps(),_e),nt=useFieldContext();return jsxRuntimeExports.jsx(ark.input,{"aria-describedby":nt==null?void 0:nt.ariaDescribedby,...tt,ref:_})});NumberInputInput$1.displayName="NumberInputInput";const NumberInputLabel=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getLabelProps(),_e);return jsxRuntimeExports.jsx(ark.label,{...tt,ref:_})});NumberInputLabel.displayName="NumberInputLabel";let $488c6ddbf4ef74c2$var$formatterCache=new Map,$488c6ddbf4ef74c2$var$supportsSignDisplay=!1;try{$488c6ddbf4ef74c2$var$supportsSignDisplay=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let $488c6ddbf4ef74c2$var$supportsUnit=!1;try{$488c6ddbf4ef74c2$var$supportsUnit=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const $488c6ddbf4ef74c2$var$UNITS={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5{format(_){let et="";if(!$488c6ddbf4ef74c2$var$supportsSignDisplay&&this.options.signDisplay!=null?et=$488c6ddbf4ef74c2$export$711b50b3c525e0f2(this.numberFormatter,this.options.signDisplay,_):et=this.numberFormatter.format(_),this.options.style==="unit"&&!$488c6ddbf4ef74c2$var$supportsUnit){var tt;let{unit:nt,unitDisplay:it="short",locale:at}=this.resolvedOptions();if(!nt)return et;let ot=(tt=$488c6ddbf4ef74c2$var$UNITS[nt])===null||tt===void 0?void 0:tt[it];et+=ot[at]||ot.default}return et}formatToParts(_){return this.numberFormatter.formatToParts(_)}formatRange(_,et){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(_,et);if(et<_)throw new RangeError("End date must be >= start date");return`${this.format(_)}  ${this.format(et)}`}formatRangeToParts(_,et){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(_,et);if(et<_)throw new RangeError("End date must be >= start date");let tt=this.numberFormatter.formatToParts(_),nt=this.numberFormatter.formatToParts(et);return[...tt.map(it=>({...it,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...nt.map(it=>({...it,source:"endRange"}))]}resolvedOptions(){let _=this.numberFormatter.resolvedOptions();return!$488c6ddbf4ef74c2$var$supportsSignDisplay&&this.options.signDisplay!=null&&(_={..._,signDisplay:this.options.signDisplay}),!$488c6ddbf4ef74c2$var$supportsUnit&&this.options.style==="unit"&&(_={..._,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),_}constructor(_,et={}){this.numberFormatter=$488c6ddbf4ef74c2$var$getCachedNumberFormatter(_,et),this.options=et}}function $488c6ddbf4ef74c2$var$getCachedNumberFormatter(_e,_={}){let{numberingSystem:et}=_;if(et&&_e.includes("-nu-")&&(_e.includes("-u-")||(_e+="-u-"),_e+=`-nu-${et}`),_.style==="unit"&&!$488c6ddbf4ef74c2$var$supportsUnit){var tt;let{unit:at,unitDisplay:ot="short"}=_;if(!at)throw new Error('unit option must be provided with style: "unit"');if(!(!((tt=$488c6ddbf4ef74c2$var$UNITS[at])===null||tt===void 0)&&tt[ot]))throw new Error(`Unsupported unit ${at} with unitDisplay = ${ot}`);_={..._,style:"decimal"}}let nt=_e+(_?Object.entries(_).sort((at,ot)=>at[0]<ot[0]?-1:1).join():"");if($488c6ddbf4ef74c2$var$formatterCache.has(nt))return $488c6ddbf4ef74c2$var$formatterCache.get(nt);let it=new Intl.NumberFormat(_e,_);return $488c6ddbf4ef74c2$var$formatterCache.set(nt,it),it}function $488c6ddbf4ef74c2$export$711b50b3c525e0f2(_e,_,et){if(_==="auto")return _e.format(et);if(_==="never")return _e.format(Math.abs(et));{let tt=!1;if(_==="always"?tt=et>0||Object.is(et,0):_==="exceptZero"&&(Object.is(et,-0)||Object.is(et,0)?et=Math.abs(et):tt=et>0),tt){let nt=_e.format(-et),it=_e.format(et),at=nt.replace(it,"").replace(/\u200e|\u061C/,"");return[...at].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),nt.replace(it,"!!!").replace(at,"+").replace("!!!",it)}else return _e.format(et)}}const $6c7bd7858deea686$var$CURRENCY_SIGN_REGEX=new RegExp("^.*\\(.*\\).*$"),$6c7bd7858deea686$var$NUMBERING_SYSTEMS=["latn","arab","hanidec","deva","beng"];class $6c7bd7858deea686$export$cd11ab140839f11d{parse(_){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,_).parse(_)}isValidPartialNumber(_,et,tt){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,_).isValidPartialNumber(_,et,tt)}getNumberingSystem(_){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,_).options.numberingSystem}constructor(_,et={}){this.locale=_,this.options=et}}const $6c7bd7858deea686$var$numberParserCache=new Map;function $6c7bd7858deea686$var$getNumberParserImpl(_e,_,et){let tt=$6c7bd7858deea686$var$getCachedNumberParser(_e,_);if(!_e.includes("-nu-")&&!tt.isValidPartialNumber(et)){for(let nt of $6c7bd7858deea686$var$NUMBERING_SYSTEMS)if(nt!==tt.options.numberingSystem){let it=$6c7bd7858deea686$var$getCachedNumberParser(_e+(_e.includes("-u-")?"-nu-":"-u-nu-")+nt,_);if(it.isValidPartialNumber(et))return it}}return tt}function $6c7bd7858deea686$var$getCachedNumberParser(_e,_){let et=_e+(_?Object.entries(_).sort((nt,it)=>nt[0]<it[0]?-1:1).join():""),tt=$6c7bd7858deea686$var$numberParserCache.get(et);return tt||(tt=new $6c7bd7858deea686$var$NumberParserImpl(_e,_),$6c7bd7858deea686$var$numberParserCache.set(et,tt)),tt}class $6c7bd7858deea686$var$NumberParserImpl{parse(_){let et=this.sanitize(_);if(this.symbols.group&&(et=$6c7bd7858deea686$var$replaceAll(et,this.symbols.group,"")),this.symbols.decimal&&(et=et.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(et=et.replace(this.symbols.minusSign,"-")),et=et.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let at=et.indexOf("-");et=et.replace("-","");let ot=et.indexOf(".");ot===-1&&(ot=et.length),et=et.replace(".",""),ot-2===0?et=`0.${et}`:ot-2===-1?et=`0.0${et}`:ot-2===-2?et="0.00":et=`${et.slice(0,ot-2)}.${et.slice(ot-2)}`,at>-1&&(et=`-${et}`)}let tt=et?+et:NaN;if(isNaN(tt))return NaN;if(this.options.style==="percent"){var nt,it;let at={...this.options,style:"decimal",minimumFractionDigits:Math.min(((nt=this.options.minimumFractionDigits)!==null&&nt!==void 0?nt:0)+2,20),maximumFractionDigits:Math.min(((it=this.options.maximumFractionDigits)!==null&&it!==void 0?it:0)+2,20)};return new $6c7bd7858deea686$export$cd11ab140839f11d(this.locale,at).parse(new $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5(this.locale,at).format(tt))}return this.options.currencySign==="accounting"&&$6c7bd7858deea686$var$CURRENCY_SIGN_REGEX.test(_)&&(tt=-1*tt),tt}sanitize(_){return _=_.replace(this.symbols.literals,""),this.symbols.minusSign&&(_=_.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(_=_.replace(",",this.symbols.decimal),_=_.replace("",this.symbols.decimal)),this.symbols.group&&(_=$6c7bd7858deea686$var$replaceAll(_,".",this.symbols.group))),this.options.locale==="fr-FR"&&(_=$6c7bd7858deea686$var$replaceAll(_,".","")),_}isValidPartialNumber(_,et=-1/0,tt=1/0){return _=this.sanitize(_),this.symbols.minusSign&&_.startsWith(this.symbols.minusSign)&&et<0?_=_.slice(this.symbols.minusSign.length):this.symbols.plusSign&&_.startsWith(this.symbols.plusSign)&&tt>0&&(_=_.slice(this.symbols.plusSign.length)),this.symbols.group&&_.startsWith(this.symbols.group)||this.symbols.decimal&&_.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(_=$6c7bd7858deea686$var$replaceAll(_,this.symbols.group,"")),_=_.replace(this.symbols.numeral,""),this.symbols.decimal&&(_=_.replace(this.symbols.decimal,"")),_.length===0)}constructor(_,et={}){this.locale=_,this.formatter=new Intl.NumberFormat(_,et),this.options=this.formatter.resolvedOptions(),this.symbols=$6c7bd7858deea686$var$getSymbols(_,this.formatter,this.options,et);var tt,nt;this.options.style==="percent"&&(((tt=this.options.minimumFractionDigits)!==null&&tt!==void 0?tt:0)>18||((nt=this.options.maximumFractionDigits)!==null&&nt!==void 0?nt:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const $6c7bd7858deea686$var$nonLiteralParts=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),$6c7bd7858deea686$var$pluralNumbers=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function $6c7bd7858deea686$var$getSymbols(_e,_,et,tt){var nt,it,at,ot;let st=new Intl.NumberFormat(_e,{...et,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),dt=st.formatToParts(-10000.111),ht=st.formatToParts(10000.111),ct=$6c7bd7858deea686$var$pluralNumbers.map(At=>st.formatToParts(At));var ut;let ft=(ut=(nt=dt.find(At=>At.type==="minusSign"))===null||nt===void 0?void 0:nt.value)!==null&&ut!==void 0?ut:"-",gt=(it=ht.find(At=>At.type==="plusSign"))===null||it===void 0?void 0:it.value;!gt&&((tt==null?void 0:tt.signDisplay)==="exceptZero"||(tt==null?void 0:tt.signDisplay)==="always")&&(gt="+");let vt=(at=new Intl.NumberFormat(_e,{...et,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(At=>At.type==="decimal"))===null||at===void 0?void 0:at.value,yt=(ot=dt.find(At=>At.type==="group"))===null||ot===void 0?void 0:ot.value,bt=dt.filter(At=>!$6c7bd7858deea686$var$nonLiteralParts.has(At.type)).map(At=>$6c7bd7858deea686$var$escapeRegex(At.value)),_t=ct.flatMap(At=>At.filter(Pt=>!$6c7bd7858deea686$var$nonLiteralParts.has(Pt.type)).map(Pt=>$6c7bd7858deea686$var$escapeRegex(Pt.value))),xt=[...new Set([...bt,..._t])].sort((At,Pt)=>Pt.length-At.length),St=xt.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${xt.join("|")}|[\\p{White_Space}]`,"gu"),Tt=[...new Intl.NumberFormat(et.locale,{useGrouping:!1}).format(9876543210)].reverse(),wt=new Map(Tt.map((At,Pt)=>[At,Pt])),Ct=new RegExp(`[${Tt.join("")}]`,"g");return{minusSign:ft,plusSign:gt,decimal:vt,group:yt,literals:St,numeral:Ct,index:At=>String(wt.get(At))}}function $6c7bd7858deea686$var$replaceAll(_e,_,et){return _e.replaceAll?_e.replaceAll(_,et):_e.split(_).join(et)}function $6c7bd7858deea686$var$escapeRegex(_e){return _e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var anatomy$7=createAnatomy("numberInput").parts("root","label","input","control","valueText","incrementTrigger","decrementTrigger","scrubber"),parts$3=anatomy$7.build(),dom$6=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`number-input:${_e.id}`},getInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.input)??`number-input:${_e.id}:input`},getIncrementTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.incrementTrigger)??`number-input:${_e.id}:inc`},getDecrementTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.decrementTrigger)??`number-input:${_e.id}:dec`},getScrubberId:_e=>{var _;return((_=_e.ids)==null?void 0:_.scrubber)??`number-input:${_e.id}:scrubber`},getCursorId:_e=>`number-input:${_e.id}:cursor`,getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`number-input:${_e.id}:label`},getInputEl:_e=>dom$6.getById(_e,dom$6.getInputId(_e)),getIncrementTriggerEl:_e=>dom$6.getById(_e,dom$6.getIncrementTriggerId(_e)),getDecrementTriggerEl:_e=>dom$6.getById(_e,dom$6.getDecrementTriggerId(_e)),getScrubberEl:_e=>dom$6.getById(_e,dom$6.getScrubberId(_e)),getCursorEl:_e=>dom$6.getDoc(_e).getElementById(dom$6.getCursorId(_e)),getPressedTriggerEl:(_e,_=_e.hint)=>{let et=null;return _==="increment"&&(et=dom$6.getIncrementTriggerEl(_e)),_==="decrement"&&(et=dom$6.getDecrementTriggerEl(_e)),et},setupVirtualCursor(_e){if(!isSafari())return dom$6.createVirtualCursor(_e),()=>{var _;(_=dom$6.getCursorEl(_e))==null||_.remove()}},preventTextSelection(_e){const _=dom$6.getDoc(_e),et=_.documentElement,tt=_.body;return tt.style.pointerEvents="none",et.style.userSelect="none",et.style.cursor="ew-resize",()=>{tt.style.pointerEvents="",et.style.userSelect="",et.style.cursor="",et.style.length||et.removeAttribute("style"),tt.style.length||tt.removeAttribute("style")}},getMousemoveValue(_e,_){const et=dom$6.getWin(_e),tt=roundToDpr(_.movementX,et.devicePixelRatio),nt=roundToDpr(_.movementY,et.devicePixelRatio);let it=tt>0?"increment":tt<0?"decrement":null;_e.isRtl&&it==="increment"&&(it="decrement"),_e.isRtl&&it==="decrement"&&(it="increment");const at={x:_e.scrubberCursorPoint.x+tt,y:_e.scrubberCursorPoint.y+nt},ot=et.innerWidth,st=roundToDpr(7.5,et.devicePixelRatio);return at.x=wrap$3(at.x+st,ot)-st,{hint:it,point:at}},createVirtualCursor(_e){const _=dom$6.getDoc(_e),et=_.createElement("div");et.className="scrubber--cursor",et.id=dom$6.getCursorId(_e),Object.assign(et.style,{width:"15px",height:"15px",position:"fixed",pointerEvents:"none",left:"0px",top:"0px",zIndex:MAX_Z_INDEX,transform:_e.scrubberCursorPoint?`translate3d(${_e.scrubberCursorPoint.x}px, ${_e.scrubberCursorPoint.y}px, 0px)`:void 0,willChange:"transform"}),et.innerHTML=`
        <svg width="46" height="15" style="left: -15.5px; position: absolute; top: 0; filter: drop-shadow(rgba(0, 0, 0, 0.4) 0px 1px 1.1px);">
          <g transform="translate(2 3)">
            <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z" style="stroke-width: 2px; stroke: white;"></path>
            <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z"></path>
          </g>
        </svg>`,_.body.appendChild(et)}});function connect$4(_e,_,et){const tt=_e.hasTag("focus"),nt=_e.context.isDisabled,it=_e.context.readOnly,at=_e.context.isValueEmpty,ot=_e.context.isOutOfRange||!!_e.context.invalid,st=nt||!_e.context.canIncrement||it,dt=nt||!_e.context.canDecrement||it,ht=_e.context.translations;return{focused:tt,invalid:ot,empty:at,value:_e.context.formattedValue,valueAsNumber:_e.context.valueAsNumber,setValue(ct){_({type:"VALUE.SET",value:ct})},clearValue(){_("VALUE.CLEAR")},increment(){_("VALUE.INCREMENT")},decrement(){_("VALUE.DECREMENT")},setToMax(){_({type:"VALUE.SET",value:_e.context.max})},setToMin(){_({type:"VALUE.SET",value:_e.context.min})},focus(){var ct;(ct=dom$6.getInputEl(_e.context))==null||ct.focus()},getRootProps(){return et.element({id:dom$6.getRootId(_e.context),...parts$3.root.attrs,dir:_e.context.dir,"data-disabled":dataAttr$1(nt),"data-focus":dataAttr$1(tt),"data-invalid":dataAttr$1(ot)})},getLabelProps(){return et.label({...parts$3.label.attrs,dir:_e.context.dir,"data-disabled":dataAttr$1(nt),"data-focus":dataAttr$1(tt),"data-invalid":dataAttr$1(ot),id:dom$6.getLabelId(_e.context),htmlFor:dom$6.getInputId(_e.context)})},getControlProps(){return et.element({...parts$3.control.attrs,dir:_e.context.dir,role:"group","aria-disabled":nt,"data-focus":dataAttr$1(tt),"data-disabled":dataAttr$1(nt),"data-invalid":dataAttr$1(ot),"aria-invalid":ariaAttr(_e.context.invalid)})},getValueTextProps(){return et.element({...parts$3.valueText.attrs,dir:_e.context.dir,"data-disabled":dataAttr$1(nt),"data-invalid":dataAttr$1(ot),"data-focus":dataAttr$1(tt)})},getInputProps(){return et.input({...parts$3.input.attrs,dir:_e.context.dir,name:_e.context.name,form:_e.context.form,id:dom$6.getInputId(_e.context),role:"spinbutton",defaultValue:_e.context.formattedValue,pattern:_e.context.pattern,inputMode:_e.context.inputMode,"aria-invalid":ariaAttr(ot),"data-invalid":dataAttr$1(ot),disabled:nt,"data-disabled":dataAttr$1(nt),readOnly:_e.context.readOnly,required:_e.context.required,autoComplete:"off",autoCorrect:"off",spellCheck:"false",type:"text","aria-roledescription":"numberfield","aria-valuemin":_e.context.min,"aria-valuemax":_e.context.max,"aria-valuenow":Number.isNaN(_e.context.valueAsNumber)?void 0:_e.context.valueAsNumber,"aria-valuetext":_e.context.valueText,onFocus(){_("INPUT.FOCUS")},onBlur(){_("INPUT.BLUR")},onInput(ct){_({type:"INPUT.CHANGE",target:ct.currentTarget,hint:"set"})},onBeforeInput(ct){try{const{selectionStart:ut,selectionEnd:ft,value:gt}=ct.currentTarget,mt=gt.slice(0,ut)+(ct.data??"")+gt.slice(ft);_e.context.parser.isValidPartialNumber(mt)||ct.preventDefault()}catch{}},onKeyDown(ct){if(ct.defaultPrevented||it||isComposingEvent(ct))return;const ut=getEventStep(ct)*_e.context.step,gt={ArrowUp(){_({type:"INPUT.ARROW_UP",step:ut}),ct.preventDefault()},ArrowDown(){_({type:"INPUT.ARROW_DOWN",step:ut}),ct.preventDefault()},Home(){isModifierKey(ct)||(_("INPUT.HOME"),ct.preventDefault())},End(){isModifierKey(ct)||(_("INPUT.END"),ct.preventDefault())},Enter(){_("INPUT.ENTER")}}[ct.key];gt==null||gt(ct)}})},getDecrementTriggerProps(){return et.button({...parts$3.decrementTrigger.attrs,dir:_e.context.dir,id:dom$6.getDecrementTriggerId(_e.context),disabled:dt,"data-disabled":dataAttr$1(dt),"aria-label":ht.decrementLabel,type:"button",tabIndex:-1,"aria-controls":dom$6.getInputId(_e.context),onPointerDown(ct){var ut;dt||!isLeftClick(ct)||(_({type:"TRIGGER.PRESS_DOWN",hint:"decrement",pointerType:ct.pointerType}),ct.pointerType==="mouse"&&ct.preventDefault(),ct.pointerType==="touch"&&((ut=ct.currentTarget)==null||ut.focus({preventScroll:!0})))},onPointerUp(ct){_({type:"TRIGGER.PRESS_UP",hint:"decrement",pointerType:ct.pointerType})},onPointerLeave(){dt||_({type:"TRIGGER.PRESS_UP",hint:"decrement"})}})},getIncrementTriggerProps(){return et.button({...parts$3.incrementTrigger.attrs,dir:_e.context.dir,id:dom$6.getIncrementTriggerId(_e.context),disabled:st,"data-disabled":dataAttr$1(st),"aria-label":ht.incrementLabel,type:"button",tabIndex:-1,"aria-controls":dom$6.getInputId(_e.context),onPointerDown(ct){var ut;st||!isLeftClick(ct)||(_({type:"TRIGGER.PRESS_DOWN",hint:"increment",pointerType:ct.pointerType}),ct.pointerType==="mouse"&&ct.preventDefault(),ct.pointerType==="touch"&&((ut=ct.currentTarget)==null||ut.focus({preventScroll:!0})))},onPointerUp(ct){_({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:ct.pointerType})},onPointerLeave(ct){_({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:ct.pointerType})}})},getScrubberProps(){return et.element({...parts$3.scrubber.attrs,dir:_e.context.dir,"data-disabled":dataAttr$1(nt),id:dom$6.getScrubberId(_e.context),role:"presentation",onMouseDown(ct){if(nt)return;const ut=getEventPoint(ct),gt=getWindow$1(ct.currentTarget).devicePixelRatio;ut.x=ut.x-roundToDpr(7.5,gt),ut.y=ut.y-roundToDpr(7.5,gt),_({type:"SCRUBBER.PRESS_DOWN",point:ut}),ct.preventDefault()},style:{cursor:nt?void 0:"ew-resize"}})}}}function recordCursor(_e){if(_e.ownerDocument.activeElement===_e)try{const{selectionStart:_,selectionEnd:et,value:tt}=_e,nt=tt.substring(0,_),it=tt.substring(et);return{start:_,end:et,value:tt,beforeTxt:nt,afterTxt:it}}catch{}}function restoreCursor(_e,_){if(_e.ownerDocument.activeElement===_e){if(!_){_e.setSelectionRange(_e.value.length,_e.value.length);return}try{const{value:et}=_e,{beforeTxt:tt="",afterTxt:nt="",start:it}=_;let at=et.length;if(et.endsWith(nt))at=et.length-nt.length;else if(et.startsWith(tt))at=tt.length;else if(it!=null){const ot=tt[it-1],st=et.indexOf(ot,it-1);st!==-1&&(at=st+1)}_e.setSelectionRange(at,at)}catch{}}}var createFormatter=(_e,_={})=>ref$1(new Intl.NumberFormat(_e,_)),createParser=(_e,_={})=>ref$1(new $6c7bd7858deea686$export$cd11ab140839f11d(_e,_)),parseValue=(_e,_)=>_e.formatOptions?_e.parser.parse(String(_)):parseFloat(_),formatValue=(_e,_)=>Number.isNaN(_)?"":_e.formatOptions?_e.formatter.format(_):_.toString(),{not:not$2,and:and$1}=guards;function machine$2(_e){const _=compact$2(_e);return createMachine({id:"number-input",initial:"idle",context:{dir:"ltr",locale:"en-US",focusInputOnChange:!0,clampValueOnBlur:!0,allowOverflow:!1,inputMode:"decimal",pattern:"[0-9]*(.[0-9]+)?",value:"",step:1,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,invalid:!1,spinOnPress:!0,disabled:!1,readOnly:!1,..._,hint:null,scrubberCursorPoint:null,fieldsetDisabled:!1,formatter:createFormatter(_.locale||"en-US",_.formatOptions),parser:createParser(_.locale||"en-US",_.formatOptions),translations:{incrementLabel:"increment value",decrementLabel:"decrease value",..._.translations}},computed:{isRtl:et=>et.dir==="rtl",valueAsNumber:et=>parseValue(et,et.value),formattedValue:et=>formatValue(et,et.valueAsNumber),isAtMin:et=>isValueAtMin(et.valueAsNumber,et.min),isAtMax:et=>isValueAtMax(et.valueAsNumber,et.max),isOutOfRange:et=>!isValueWithinRange(et.valueAsNumber,et.min,et.max),isValueEmpty:et=>et.value==="",isDisabled:et=>!!et.disabled||et.fieldsetDisabled,canIncrement:et=>et.allowOverflow||!et.isAtMax,canDecrement:et=>et.allowOverflow||!et.isAtMin,valueText:et=>{var tt,nt;return(nt=(tt=et.translations).valueText)==null?void 0:nt.call(tt,et.value)}},watch:{formatOptions:["setFormatterAndParser","syncInputElement"],locale:["setFormatterAndParser","syncInputElement"],value:["syncInputElement"],isOutOfRange:["invokeOnInvalid"],scrubberCursorPoint:["setVirtualCursorPosition"]},activities:["trackFormControl"],on:{"VALUE.SET":{actions:["setRawValue","setHintToSet"]},"VALUE.CLEAR":{actions:["clearValue"]},"VALUE.INCREMENT":{actions:["increment"]},"VALUE.DECREMENT":{actions:["decrement"]}},states:{idle:{on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","invokeOnFocus","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","invokeOnFocus","setHint","setCursorPoint"]},"INPUT.FOCUS":{target:"focused",actions:["focusInput","invokeOnFocus"]}}},focused:{tags:"focus",activities:"attachWheelListener",on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","setHint","setCursorPoint"]},"INPUT.ARROW_UP":{actions:"increment"},"INPUT.ARROW_DOWN":{actions:"decrement"},"INPUT.HOME":{actions:"decrementToMin"},"INPUT.END":{actions:"incrementToMax"},"INPUT.CHANGE":{actions:["setValue","setHint"]},"INPUT.BLUR":[{guard:and$1("clampValueOnBlur",not$2("isInRange")),target:"idle",actions:["setClampedValue","clearHint","invokeOnBlur"]},{target:"idle",actions:["setFormattedValue","clearHint","invokeOnBlur"]}],"INPUT.ENTER":{actions:["setFormattedValue","clearHint","invokeOnBlur"]}}},"before:spin":{tags:"focus",activities:"trackButtonDisabled",entry:choose([{guard:"isIncrementHint",actions:"increment"},{guard:"isDecrementHint",actions:"decrement"}]),after:{CHANGE_DELAY:{target:"spinning",guard:and$1("isInRange","spinOnPress")}},on:{"TRIGGER.PRESS_UP":[{guard:"isTouchPointer",target:"focused",actions:"clearHint"},{target:"focused",actions:["focusInput","clearHint"]}]}},spinning:{tags:"focus",activities:"trackButtonDisabled",every:[{delay:"CHANGE_INTERVAL",guard:and$1(not$2("isAtMin"),"isIncrementHint"),actions:"increment"},{delay:"CHANGE_INTERVAL",guard:and$1(not$2("isAtMax"),"isDecrementHint"),actions:"decrement"}],on:{"TRIGGER.PRESS_UP":{target:"focused",actions:["focusInput","clearHint"]}}},scrubbing:{tags:"focus",activities:["activatePointerLock","trackMousemove","setupVirtualCursor","preventTextSelection"],on:{"SCRUBBER.POINTER_UP":{target:"focused",actions:["focusInput","clearCursorPoint"]},"SCRUBBER.POINTER_MOVE":[{guard:"isIncrementHint",actions:["increment","setCursorPoint"]},{guard:"isDecrementHint",actions:["decrement","setCursorPoint"]}]}}}},{delays:{CHANGE_INTERVAL:50,CHANGE_DELAY:300},guards:{clampValueOnBlur:et=>et.clampValueOnBlur,isAtMin:et=>et.isAtMin,spinOnPress:et=>!!et.spinOnPress,isAtMax:et=>et.isAtMax,isInRange:et=>!et.isOutOfRange,isDecrementHint:(et,tt)=>(tt.hint??et.hint)==="decrement",isIncrementHint:(et,tt)=>(tt.hint??et.hint)==="increment",isTouchPointer:(et,tt)=>tt.pointerType==="touch"},activities:{trackFormControl(et,tt,{initialContext:nt}){const it=dom$6.getInputEl(et);return trackFormControl(it,{onFieldsetDisabledChange(at){et.fieldsetDisabled=at},onFormReset(){set$4.value(et,nt.value)}})},setupVirtualCursor(et){return dom$6.setupVirtualCursor(et)},preventTextSelection(et){return dom$6.preventTextSelection(et)},trackButtonDisabled(et,tt,{send:nt}){const it=dom$6.getPressedTriggerEl(et,et.hint);return observeAttributes(it,{attributes:["disabled"],callback(){nt({type:"TRIGGER.PRESS_UP",src:"attr"})}})},attachWheelListener(et,tt,{send:nt}){const it=dom$6.getInputEl(et);if(!it||!dom$6.isActiveElement(et,it)||!et.allowMouseWheel)return;function at(ot){ot.preventDefault();const st=Math.sign(ot.deltaY)*-1;st===1?nt("VALUE.INCREMENT"):st===-1&&nt("VALUE.DECREMENT")}return addDomEvent(it,"wheel",at,{passive:!1})},activatePointerLock(et){if(!isSafari())return requestPointerLock(dom$6.getDoc(et))},trackMousemove(et,tt,{send:nt}){const it=dom$6.getDoc(et);function at(st){if(!et.scrubberCursorPoint)return;const dt=dom$6.getMousemoveValue(et,st);dt.hint&&nt({type:"SCRUBBER.POINTER_MOVE",hint:dt.hint,point:dt.point})}function ot(){nt("SCRUBBER.POINTER_UP")}return callAll(addDomEvent(it,"mousemove",at,!1),addDomEvent(it,"mouseup",ot,!1))}},actions:{focusInput(et){if(!et.focusInputOnChange)return;const tt=dom$6.getInputEl(et);dom$6.isActiveElement(et,tt)||raf$1(()=>tt==null?void 0:tt.focus({preventScroll:!0}))},increment(et,tt){const nt=incrementValue(et.valueAsNumber,tt.step??et.step),it=formatValue(et,clampValue(nt,et.min,et.max));set$4.value(et,it)},decrement(et,tt){const nt=decrementValue(et.valueAsNumber,tt.step??et.step),it=formatValue(et,clampValue(nt,et.min,et.max));set$4.value(et,it)},setClampedValue(et){const tt=clampValue(et.valueAsNumber,et.min,et.max);set$4.value(et,formatValue(et,tt))},setRawValue(et,tt){const nt=parseValue(et,tt.value),it=formatValue(et,clampValue(nt,et.min,et.max));set$4.value(et,it)},setValue(et,tt){var it;const nt=((it=tt.target)==null?void 0:it.value)??tt.value;set$4.value(et,nt)},clearValue(et){set$4.value(et,"")},incrementToMax(et){const tt=formatValue(et,et.max);set$4.value(et,tt)},decrementToMin(et){const tt=formatValue(et,et.min);set$4.value(et,tt)},setHint(et,tt){et.hint=tt.hint},clearHint(et){et.hint=null},setHintToSet(et){et.hint="set"},invokeOnFocus(et){var tt;(tt=et.onFocusChange)==null||tt.call(et,{focused:!0,value:et.formattedValue,valueAsNumber:et.valueAsNumber})},invokeOnBlur(et){var tt;(tt=et.onFocusChange)==null||tt.call(et,{focused:!1,value:et.formattedValue,valueAsNumber:et.valueAsNumber})},invokeOnInvalid(et){var nt;if(!et.isOutOfRange)return;const tt=et.valueAsNumber>et.max?"rangeOverflow":"rangeUnderflow";(nt=et.onValueInvalid)==null||nt.call(et,{reason:tt,value:et.formattedValue,valueAsNumber:et.valueAsNumber})},syncInputElement(et,tt){const nt=tt.type.endsWith("CHANGE")?et.value:et.formattedValue;sync.input(et,nt)},setFormattedValue(et){set$4.value(et,et.formattedValue)},setCursorPoint(et,tt){et.scrubberCursorPoint=tt.point},clearCursorPoint(et){et.scrubberCursorPoint=null},setVirtualCursorPosition(et){const tt=dom$6.getCursorEl(et);if(!tt||!et.scrubberCursorPoint)return;const{x:nt,y:it}=et.scrubberCursorPoint;tt.style.transform=`translate3d(${nt}px, ${it}px, 0px)`},setFormatterAndParser(et){et.locale&&(et.formatter=createFormatter(et.locale,et.formatOptions),et.parser=createParser(et.locale,et.formatOptions))}},compareFns:{formatOptions:(et,tt)=>isEqual$3(et,tt),scrubberCursorPoint:(et,tt)=>isEqual$3(et,tt)}})}var sync={input(_e,_){const et=dom$6.getInputEl(_e);if(!et)return;const tt=recordCursor(et);raf$1(()=>{setElementValue(et,_),restoreCursor(et,tt)})}},invoke$1={onChange:_e=>{var _;(_=_e.onValueChange)==null||_.call(_e,{value:_e.value,valueAsNumber:_e.valueAsNumber})}},set$4={value:(_e,_)=>{isEqual$3(_e.value,_)||(_e.value=_,invoke$1.onChange(_e))}};const useNumberInput=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),{dir:et,locale:tt}=useLocaleContext(),nt=useFieldContext(),it={id:reactExports.useId(),ids:{label:nt==null?void 0:nt.ids.label,input:nt==null?void 0:nt.ids.control},disabled:nt==null?void 0:nt.disabled,readOnly:nt==null?void 0:nt.readOnly,required:nt==null?void 0:nt.required,invalid:nt==null?void 0:nt.invalid,dir:et,locale:tt,getRootNode:_,value:_e.defaultValue,..._e},at={...it,value:_e.value,onValueChange:useEvent(_e.onValueChange,{sync:!0}),onValueInvalid:useEvent(_e.onValueInvalid),onFocusChange:useEvent(_e.onFocusChange)},[ot,st]=useMachine(machine$2(it),{context:at});return connect$4(ot,st,normalizeProps)},NumberInputRoot$1=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["allowMouseWheel","allowOverflow","clampValueOnBlur","defaultValue","disabled","focusInputOnChange","form","formatOptions","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueInvalid","pattern","readOnly","required","spinOnPress","step","translations","value"]),nt=useNumberInput(et),it=mergeProps(nt.getRootProps(),tt);return jsxRuntimeExports.jsx(NumberInputProvider,{value:nt,children:jsxRuntimeExports.jsx(ark.div,{...it,ref:_})})});NumberInputRoot$1.displayName="NumberInputRoot";const NumberInputRootProvider=reactExports.forwardRef((_e,_)=>{const[{value:et},tt]=createSplitProps()(_e,["value"]),nt=mergeProps(et.getRootProps(),tt);return jsxRuntimeExports.jsx(NumberInputProvider,{value:et,children:jsxRuntimeExports.jsx(ark.div,{...nt,ref:_})})});NumberInputRootProvider.displayName="NumberInputRootProvider";const NumberInputScrubber=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getScrubberProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});NumberInputScrubber.displayName="NumberInputScrubber";const NumberInputValueText=reactExports.forwardRef((_e,_)=>{const{children:et,...tt}=_e,nt=useNumberInputContext(),it=mergeProps(nt.getValueTextProps(),tt);return jsxRuntimeExports.jsx(ark.span,{...it,ref:_,children:et||nt.value})});NumberInputValueText.displayName="NumberInputValueText";var anatomy$6=createAnatomy("pinInput").parts("root","label","input","control");anatomy$6.build();var dom$5=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`pin-input:${_e.id}`},getInputId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.input)==null?void 0:tt.call(et,_))??`pin-input:${_e.id}:${_}`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`pin-input:${_e.id}:hidden`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`pin-input:${_e.id}:label`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`pin-input:${_e.id}:control`},getRootEl:_e=>dom$5.getById(_e,dom$5.getRootId(_e)),getInputEls:_e=>{const et=`input[data-ownedby=${CSS.escape(dom$5.getRootId(_e))}]`;return queryAll(dom$5.getRootEl(_e),et)},getInputEl:(_e,_)=>dom$5.getById(_e,dom$5.getInputId(_e,_)),getFocusedInputEl:_e=>dom$5.getInputEls(_e)[_e.focusedIndex],getFirstInputEl:_e=>dom$5.getInputEls(_e)[0],getHiddenInputEl:_e=>dom$5.getById(_e,dom$5.getHiddenInputId(_e))}),anatomy$5=createAnatomy("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange");anatomy$5.build();createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`progress-${_e.id}`},getTrackId:_e=>{var _;return((_=_e.ids)==null?void 0:_.track)??`progress-${_e.id}-track`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`progress-${_e.id}-label`},getCircleId:_e=>{var _;return((_=_e.ids)==null?void 0:_.circle)??`progress-${_e.id}-circle`}});createProps$1()(["dir","getRootNode","id","ids","max","min","orientation","translations","value","onValueChange"]);var anatomy$4=createAnatomy("qr-code").parts("root","frame","pattern","overlay","downloadTrigger");anatomy$4.build();var dom$4=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`qrcode:${_e.id}:root`},getFrameId:_e=>{var _;return((_=_e.ids)==null?void 0:_.frame)??`qrcode:${_e.id}:frame`},getFrameEl:_e=>dom$4.getById(_e,dom$4.getFrameId(_e))});createProps$1()(["ids","value","id","encoding","dir","getRootNode","onValueChange"]);const segmentGroupAnatomy=anatomy$f.rename("segment-group");segmentGroupAnatomy.build();var anatomy$3=createAnatomy("tooltip").parts("trigger","arrow","arrowTip","positioner","content");anatomy$3.build();var dom$3=createScope({getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`tooltip:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`tooltip:${_e.id}:content`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`tooltip:${_e.id}:arrow`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`tooltip:${_e.id}:popper`},getTriggerEl:_e=>dom$3.getById(_e,dom$3.getTriggerId(_e)),getContentEl:_e=>dom$3.getById(_e,dom$3.getContentId(_e)),getPositionerEl:_e=>dom$3.getById(_e,dom$3.getPositionerId(_e)),getArrowEl:_e=>dom$3.getById(_e,dom$3.getArrowId(_e))});proxy({id:null,prevId:null,setId(_e){this.prevId=this.id,this.id=_e}});createProps$1()(["aria-label","closeDelay","closeOnEscape","closeOnPointerDown","closeOnScroll","closeOnClick","dir","disabled","getRootNode","id","ids","interactive","onOpenChange","open.controlled","open","openDelay","positioning"]);const accordionAnatomy=anatomy$n.extendWith("itemBody"),actionBarAnatomy=createAnatomy("action-bar").parts("positioner","content","separator","selectionTrigger","closeTrigger"),alertAnatomy=createAnatomy("alert").parts("title","description","root","indicator","content"),breadcrumbAnatomy=createAnatomy("breadcrumb").parts("link","currentLink","item","list","root","ellipsis","separator"),blockquoteAnatomy=createAnatomy("blockquote").parts("root","icon","content","caption"),cardAnatomy=createAnatomy("card").parts("root","header","body","footer","title","description"),checkboxCardAnatomy=createAnatomy("checkbox-card",["root","control","label","description","addon","indicator","content"]),dataListAnatomy=createAnatomy("data-list").parts("root","item","itemLabel","itemValue"),dialogAnatomy=anatomy$k.extendWith("header","body","footer","backdrop"),drawerAnatomy=anatomy$k.extendWith("header","body","footer","backdrop"),editableAnatomy=anatomy$j.extendWith("textarea"),emptyStateAnatomy=createAnatomy("empty-state",["root","content","indicator","title","description"]),fieldAnatomy=fieldAnatomy$1.extendWith("requiredIndicator"),fieldsetAnatomy=fieldsetAnatomy$1.extendWith("content"),fileUploadAnatomy=anatomy$i.extendWith("itemContent","dropzoneContent"),listAnatomy=createAnatomy("list").parts("root","item","indicator"),menuAnatomy=anatomy$h.extendWith("itemCommand"),nativeSelectAnatomy=createAnatomy("select").parts("root","field","indicator"),popoverAnatomy=anatomy$g.extendWith("header","body","footer"),radioGroupAnatomy=anatomy$f.extendWith("itemAddon","itemIndicator"),radioCardAnatomy=radioGroupAnatomy.extendWith("itemContent","itemDescription"),ratingGroupAnatomy=anatomy$e.extendWith("itemIndicator"),selectAnatomy=anatomy$d.extendWith("indicatorGroup"),sliderAnatomy=anatomy$c.extendWith("markerIndicator"),statAnatomy=createAnatomy("stat").parts("root","label","helpText","valueText","valueUnit","indicator"),statusAnatomy=createAnatomy("status").parts("root","indicator"),stepsAnatomy=createAnatomy("steps",["root","list","item","trigger","indicator","separator","content","title","description","nextTrigger","prevTrigger","progress"]),switchAnatomy=anatomy$b.extendWith("indicator"),tableAnatomy=createAnatomy("table").parts("root","header","body","row","columnHeader","cell","footer","caption"),toastAnatomy=createAnatomy("toast").parts("root","title","description","indicator","closeTrigger","actionTrigger"),tabsAnatomy=createAnatomy("tabs").parts("root","trigger","list","content","contentGroup","indicator"),tagAnatomy=createAnatomy("tag").parts("root","label","closeTrigger","startElement","endElement"),timelineAnatomy=createAnatomy("timeline").parts("root","item","content","separator","indicator","connector","title","description"),accordionSlotRecipe=defineSlotRecipe({className:"chakra-accordion",slots:accordionAnatomy.keys(),base:{root:{width:"full","--accordion-radius":"radii.l2"},item:{overflowAnchor:"none"},itemTrigger:{display:"flex",alignItems:"center",width:"full",outline:"0",gap:"3",fontWeight:"medium",borderRadius:"var(--accordion-radius)",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{layerStyle:"disabled"}},itemBody:{pt:"var(--accordion-padding-y)",pb:"calc(var(--accordion-padding-y) * 2)"},itemContent:{overflow:"hidden",borderRadius:"var(--accordion-radius)",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}},itemIndicator:{transition:"rotate 0.2s",transformOrigin:"center",color:"fg.subtle",_open:{rotate:"180deg"},_icon:{width:"1.2em",height:"1.2em"}}},variants:{variant:{outline:{item:{borderBottomWidth:"1px"}},subtle:{itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{borderRadius:"var(--accordion-radius)",_open:{bg:"colorPalette.subtle"}}},enclosed:{root:{borderWidth:"1px",borderRadius:"var(--accordion-radius)",divideY:"1px",overflow:"hidden"},itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{_open:{bg:"bg.subtle"}}},plain:{}},size:{sm:{root:{"--accordion-padding-x":"spacing.3","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"sm",py:"var(--accordion-padding-y)"}},md:{root:{"--accordion-padding-x":"spacing.4","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"md",py:"var(--accordion-padding-y)"}},lg:{root:{"--accordion-padding-x":"spacing.4.5","--accordion-padding-y":"spacing.2.5"},itemTrigger:{textStyle:"lg",py:"var(--accordion-padding-y)"}}}},defaultVariants:{size:"md",variant:"outline"}}),actionBarSlotRecipe=defineSlotRecipe({className:"chakra-action-bar",slots:actionBarAnatomy.keys(),base:{positioner:{position:"fixed",display:"flex",justifyContent:"center",pointerEvents:"none",insetInline:"0",top:"unset",bottom:"calc(env(safe-area-inset-bottom) + 20px)"},content:{bg:"bg.panel",shadow:"md",display:"flex",alignItems:"center",gap:"3",borderRadius:"l3",py:"2.5",px:"3",pointerEvents:"auto",translate:"calc(-1 * var(--scrollbar-width) / 2) 0px",_open:{animationName:"slide-from-bottom, fade-in",animationDuration:"moderate"},_closed:{animationName:"slide-to-bottom, fade-out",animationDuration:"faster"}},separator:{width:"1px",height:"5",bg:"border"},selectionTrigger:{display:"inline-flex",alignItems:"center",gap:"2",alignSelf:"stretch",textStyle:"sm",px:"4",py:"1",borderRadius:"l2",borderWidth:"1px",borderStyle:"dashed"}}}),alertSlotRecipe=defineSlotRecipe({slots:alertAnatomy.keys(),className:"chakra-alert",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",borderRadius:"l3"},title:{fontWeight:"medium"},description:{display:"inline"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"1em",height:"1em",_icon:{boxSize:"full"}},content:{display:"flex",flex:"1",gap:"1"}},variants:{status:{info:{root:{colorPalette:"blue"}},warning:{root:{colorPalette:"orange"}},success:{root:{colorPalette:"green"}},error:{root:{colorPalette:"red"}},neutral:{root:{colorPalette:"gray"}}},inline:{true:{content:{display:"inline-flex",flexDirection:"row",alignItems:"center"}},false:{content:{display:"flex",flexDirection:"column"}}},variant:{subtle:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg"}},surface:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"},indicator:{color:"colorPalette.contrast"}}},size:{sm:{root:{gap:"2",px:"3",py:"3",textStyle:"xs"},indicator:{textStyle:"lg"}},md:{root:{gap:"3",px:"4",py:"4",textStyle:"sm"},indicator:{textStyle:"xl"}},lg:{root:{gap:"3",px:"4",py:"4",textStyle:"md"},indicator:{textStyle:"2xl"}}}},defaultVariants:{status:"info",variant:"subtle",size:"md",inline:!1}}),avatarSlotRecipe=defineSlotRecipe({slots:anatomy$a.keys(),className:"chakra-avatar",base:{root:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"medium",position:"relative",verticalAlign:"top",flexShrink:"0",userSelect:"none",width:"var(--avatar-size)",height:"var(--avatar-size)",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)","&[data-group-item]":{borderWidth:"2px",borderColor:"bg"}},image:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--avatar-radius)"},fallback:{lineHeight:"1",textTransform:"uppercase",fontWeight:"medium",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)"}},variants:{size:{full:{root:{"--avatar-size":"100%","--avatar-font-size":"100%"}},"2xs":{root:{"--avatar-font-size":"fontSizes.2xs","--avatar-size":"sizes.6"}},xs:{root:{"--avatar-font-size":"fontSizes.xs","--avatar-size":"sizes.8"}},sm:{root:{"--avatar-font-size":"fontSizes.sm","--avatar-size":"sizes.9"}},md:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.10"}},lg:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.11"}},xl:{root:{"--avatar-font-size":"fontSizes.lg","--avatar-size":"sizes.12"}},"2xl":{root:{"--avatar-font-size":"fontSizes.xl","--avatar-size":"sizes.16"}}},variant:{solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},subtle:{root:{bg:"colorPalette.muted",color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",borderWidth:"1px",borderColor:"colorPalette.muted"}}},shape:{square:{},rounded:{root:{"--avatar-radius":"radii.l3"}},full:{root:{"--avatar-radius":"radii.full"}}},borderless:{true:{root:{"&[data-group-item]":{borderWidth:"0px"}}}}},defaultVariants:{size:"md",shape:"full",variant:"subtle"}}),blockquoteSlotRecipe=defineSlotRecipe({className:"chakra-blockquote",slots:blockquoteAnatomy.keys(),base:{root:{position:"relative",display:"flex",flexDirection:"column",gap:"2"},caption:{textStyle:"sm",color:"fg.muted"},icon:{boxSize:"5"}},variants:{justify:{start:{root:{alignItems:"flex-start",textAlign:"start"}},center:{root:{alignItems:"center",textAlign:"center"}},end:{root:{alignItems:"flex-end",textAlign:"end"}}},variant:{subtle:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.muted"},icon:{color:"colorPalette.fg"}},solid:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.solid"},icon:{color:"colorPalette.solid"}},plain:{root:{paddingX:"5"},icon:{color:"colorPalette.solid"}}}},defaultVariants:{variant:"subtle",justify:"start"}}),breadcrumbSlotRecipe=defineSlotRecipe({className:"chakra-breadcrumb",slots:breadcrumbAnatomy.keys(),base:{list:{display:"flex",alignItems:"center",wordBreak:"break-word",color:"fg.muted"},link:{outline:"0",textDecoration:"none",borderRadius:"l1",focusRing:"outside",display:"inline-flex",alignItems:"center",gap:"2"},item:{display:"inline-flex",alignItems:"center"},separator:{color:"fg.muted",opacity:"0.8",_icon:{boxSize:"1em"}},ellipsis:{display:"inline-flex",alignItems:"center",justifyContent:"center",_icon:{boxSize:"1em"}}},variants:{variant:{underline:{link:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"0.2em",textDecorationColor:"colorPalette.muted"},currentLink:{color:"colorPalette.fg"}},plain:{link:{color:"fg.muted",_hover:{color:"fg"}},currentLink:{color:"fg"}}},size:{sm:{list:{gap:"1",textStyle:"xs"}},md:{list:{gap:"1.5",textStyle:"sm"}},lg:{list:{gap:"2",textStyle:"md"}}}},defaultVariants:{variant:"plain",size:"md"}}),cardSlotRecipe=defineSlotRecipe({className:"chakra-card",slots:cardAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",position:"relative",minWidth:"0",wordWrap:"break-word",borderRadius:"l3",color:"fg",textAlign:"start"},title:{fontWeight:"semibold"},description:{color:"fg.muted",fontSize:"sm"},header:{paddingInline:"var(--card-padding)",paddingTop:"var(--card-padding)",display:"flex",flexDirection:"column",gap:"1.5"},body:{padding:"var(--card-padding)",flex:"1",display:"flex",flexDirection:"column"},footer:{display:"flex",alignItems:"center",gap:"2",paddingInline:"var(--card-padding)",paddingBottom:"var(--card-padding)"}},variants:{size:{sm:{root:{"--card-padding":"spacing.4"},title:{textStyle:"md"}},md:{root:{"--card-padding":"spacing.6"},title:{textStyle:"lg"}},lg:{root:{"--card-padding":"spacing.7"},title:{textStyle:"xl"}}},variant:{elevated:{root:{bg:"bg.panel",boxShadow:"md"}},outline:{root:{bg:"bg.panel",borderWidth:"1px",borderColor:"border"}},subtle:{root:{bg:"bg.muted"}}}},defaultVariants:{variant:"outline",size:"md"}});var Yo,Xo,qo,Ko,Zo,Qo,Jo,es,ts,rs,ns,is,as,os;const checkboxSlotRecipe=defineSlotRecipe({slots:checkboxAnatomy.keys(),className:"chakra-checkbox",base:{root:{display:"inline-flex",gap:"2",alignItems:"center",verticalAlign:"top",position:"relative"},control:checkmarkRecipe.base,label:{fontWeight:"medium",userSelect:"none",_disabled:{opacity:"0.5"}}},variants:{size:{xs:{root:{gap:"1.5"},label:{textStyle:"xs"},control:(Xo=(Yo=checkmarkRecipe.variants)==null?void 0:Yo.size)==null?void 0:Xo.xs},sm:{root:{gap:"2"},label:{textStyle:"sm"},control:(Ko=(qo=checkmarkRecipe.variants)==null?void 0:qo.size)==null?void 0:Ko.sm},md:{root:{gap:"2.5"},label:{textStyle:"sm"},control:(Qo=(Zo=checkmarkRecipe.variants)==null?void 0:Zo.size)==null?void 0:Qo.md},lg:{root:{gap:"3"},label:{textStyle:"md"},control:(es=(Jo=checkmarkRecipe.variants)==null?void 0:Jo.size)==null?void 0:es.lg}},variant:{outline:{control:(rs=(ts=checkmarkRecipe.variants)==null?void 0:ts.variant)==null?void 0:rs.outline},solid:{control:(is=(ns=checkmarkRecipe.variants)==null?void 0:ns.variant)==null?void 0:is.solid},subtle:{control:(os=(as=checkmarkRecipe.variants)==null?void 0:as.variant)==null?void 0:os.subtle}}},defaultVariants:{variant:"solid",size:"md"}});var ss,ls,us,cs,ds,hs,fs;const checkboxCardSlotRecipe=defineSlotRecipe({slots:checkboxCardAnatomy.keys(),className:"chakra-checkbox-card",base:{root:{display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",flex:"1",focusVisibleRing:"outside",_disabled:{opacity:"0.8",borderColor:"border.subtle"},_invalid:{outline:"2px solid",outlineColor:"border.error"}},control:{display:"inline-flex",flex:"1",position:"relative",borderRadius:"inherit",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"},label:{fontWeight:"medium",display:"flex",alignItems:"center",gap:"2",_disabled:{opacity:"0.5"}},description:{opacity:"0.64",textStyle:"sm"},addon:{_disabled:{opacity:"0.5"}},indicator:checkmarkRecipe.base,content:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"}},variants:{size:{sm:{root:{textStyle:"sm"},control:{padding:"3",gap:"1.5"},addon:{px:"3",py:"1.5",borderTopWidth:"1px"},indicator:(ss=checkmarkRecipe.variants)==null?void 0:ss.size.sm},md:{root:{textStyle:"sm"},control:{padding:"4",gap:"2.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:(ls=checkmarkRecipe.variants)==null?void 0:ls.size.md},lg:{root:{textStyle:"md"},control:{padding:"4",gap:"3.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:(us=checkmarkRecipe.variants)==null?void 0:us.size.lg}},variant:{surface:{root:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"},_disabled:{bg:"bg.muted"}},indicator:(cs=checkmarkRecipe.variants)==null?void 0:cs.variant.solid},subtle:{root:{bg:"bg.muted"},control:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},indicator:(ds=checkmarkRecipe.variants)==null?void 0:ds.variant.plain},outline:{root:{borderWidth:"1px",borderColor:"border",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},indicator:(hs=checkmarkRecipe.variants)==null?void 0:hs.variant.solid},solid:{root:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},indicator:(fs=checkmarkRecipe.variants)==null?void 0:fs.variant.inverted}},justify:{start:{root:{"--checkbox-card-justify":"flex-start"}},end:{root:{"--checkbox-card-justify":"flex-end"}},center:{root:{"--checkbox-card-justify":"center"}}},align:{start:{root:{"--checkbox-card-align":"flex-start"},content:{textAlign:"start"}},end:{root:{"--checkbox-card-align":"flex-end"},content:{textAlign:"end"}},center:{root:{"--checkbox-card-align":"center"},content:{textAlign:"center"}}},orientation:{vertical:{control:{flexDirection:"column"}},horizontal:{control:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}}),collapsibleSlotRecipe=defineSlotRecipe({slots:anatomy$m.keys(),className:"chakra-collapsible",base:{content:{overflow:"hidden",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}}}});var ps,gs,ms,vs,ys,bs,_s,xs,Ss,Ts,ws,Es,Cs,As,Ps,Is,Rs,Ms;const colorPickerSlotRecipe=defineSlotRecipe({className:"colorPicker",slots:colorPickerAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5"},label:{color:"fg",fontWeight:"medium",textStyle:"sm"},valueText:{textAlign:"start"},control:{display:"flex",alignItems:"center",flexDirection:"row",gap:"2",position:"relative"},swatchTrigger:{display:"flex",alignItems:"center",justifyContent:"center"},trigger:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",flexShrink:"0",gap:"2",textStyle:"sm",minH:"var(--input-height)",minW:"var(--input-height)",px:"1",rounded:"l2",_disabled:{opacity:"0.5"},"--focus-color":"colors.colorPalette.focusRing","&:focus-visible":{borderColor:"var(--focus-color)",outline:"1px solid var(--focus-color)"},"&[data-fit-content]":{"--input-height":"unset",px:"0",border:"0"}},content:{display:"flex",flexDirection:"column",bg:"bg.panel",borderRadius:"l3",boxShadow:"lg",width:"64",p:"4",gap:"3",zIndex:"dropdown",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},area:{height:"180px",borderRadius:"l2",overflow:"hidden"},areaThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",focusVisibleRing:"mixed",focusRingColor:"white"},areaBackground:{height:"full"},channelSlider:{borderRadius:"l2",flex:"1"},channelSliderTrack:{height:"var(--slider-height)",borderRadius:"inherit",boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"},swatchGroup:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"2"},swatch:{...colorSwatchRecipe.base,borderRadius:"l1"},swatchIndicator:{color:"white",rounded:"full"},channelSliderThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",transform:"translate(-50%, -50%)",focusVisibleRing:"outside",focusRingOffset:"1px"},channelInput:{...inputRecipe.base,"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0}},formatSelect:{textStyle:"xs",textTransform:"uppercase",borderWidth:"1px",minH:"6",focusRing:"inside",rounded:"l2"},transparencyGrid:{borderRadius:"l2"},view:{display:"flex",flexDirection:"column",gap:"2"}},variants:{size:{"2xs":{channelInput:(gs=(ps=inputRecipe.variants)==null?void 0:ps.size)==null?void 0:gs["2xs"],swatch:{"--swatch-size":"sizes.4.5"},trigger:{"--input-height":"sizes.7"},area:{"--thumb-size":"sizes.3"},channelSlider:{"--slider-height":"sizes.3","--thumb-size":"sizes.3"}},xs:{channelInput:(vs=(ms=inputRecipe.variants)==null?void 0:ms.size)==null?void 0:vs.xs,swatch:{"--swatch-size":"sizes.5"},trigger:{"--input-height":"sizes.8"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},sm:{channelInput:(bs=(ys=inputRecipe.variants)==null?void 0:ys.size)==null?void 0:bs.sm,swatch:{"--swatch-size":"sizes.6"},trigger:{"--input-height":"sizes.9"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},md:{channelInput:(xs=(_s=inputRecipe.variants)==null?void 0:_s.size)==null?void 0:xs.md,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.10"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},lg:{channelInput:(Ts=(Ss=inputRecipe.variants)==null?void 0:Ss.size)==null?void 0:Ts.lg,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.11"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},xl:{channelInput:(Es=(ws=inputRecipe.variants)==null?void 0:ws.size)==null?void 0:Es.xl,swatch:{"--swatch-size":"sizes.8"},trigger:{"--input-height":"sizes.12"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},"2xl":{channelInput:(As=(Cs=inputRecipe.variants)==null?void 0:Cs.size)==null?void 0:As["2xl"],swatch:{"--swatch-size":"sizes.10"},trigger:{"--input-height":"sizes.16"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}}},variant:{outline:{channelInput:(Is=(Ps=inputRecipe.variants)==null?void 0:Ps.variant)==null?void 0:Is.outline,trigger:{borderWidth:"1px"}},subtle:{channelInput:(Ms=(Rs=inputRecipe.variants)==null?void 0:Rs.variant)==null?void 0:Ms.subtle,trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}}},defaultVariants:{size:"md",variant:"outline"}}),dataListSlotRecipe=defineSlotRecipe({slots:dataListAnatomy.keys(),className:"chakra-data-list",base:{itemLabel:{display:"flex",alignItems:"center",gap:"1"},itemValue:{display:"flex",minWidth:"0",flex:"1"}},variants:{orientation:{horizontal:{root:{display:"flex",flexDirection:"column"},item:{display:"inline-flex",alignItems:"center",gap:"4"},itemLabel:{minWidth:"120px"}},vertical:{root:{display:"flex",flexDirection:"column"},item:{display:"flex",flexDirection:"column",gap:"1"}}},size:{sm:{root:{gap:"3"},item:{textStyle:"xs"}},md:{root:{gap:"4"},item:{textStyle:"sm"}},lg:{root:{gap:"5"},item:{textStyle:"md"}}},variant:{subtle:{itemLabel:{color:"fg.muted"}},bold:{itemLabel:{fontWeight:"medium"},itemValue:{color:"fg.muted"}}}},defaultVariants:{size:"md",orientation:"vertical",variant:"subtle"}}),dialogSlotRecipe=defineSlotRecipe({slots:dialogAnatomy.keys(),className:"chakra-dialog",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",left:0,top:0,w:"100vw",h:"100dvh",zIndex:"modal",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",left:0,top:0,"--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",justifyContent:"center",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,borderRadius:"l3",textStyle:"sm",my:"var(--dialog-margin, var(--dialog-base-margin))","--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"moderate"},_closed:{animationDuration:"faster"}},header:{flex:0,px:"6",pt:"6",pb:"4"},body:{flex:"1",px:"6",pt:"2",pb:"6"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"}},variants:{placement:{center:{positioner:{alignItems:"center"},content:{"--dialog-base-margin":"auto",mx:"auto"}},top:{positioner:{alignItems:"flex-start"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}},bottom:{positioner:{alignItems:"flex-end"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}}},scrollBehavior:{inside:{positioner:{overflow:"hidden"},content:{maxH:"calc(100% - 7.5rem)"},body:{overflow:"auto"}},outside:{positioner:{overflow:"auto",pointerEvents:"auto"}}},size:{xs:{content:{maxW:"sm"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},cover:{positioner:{padding:"10"},content:{width:"100%",height:"100%","--dialog-margin":"0"}},full:{content:{maxW:"100vw",minH:"100vh","--dialog-margin":"0",borderRadius:"0"}}},motionPreset:{scale:{content:{_open:{animationName:"scale-in, fade-in"},_closed:{animationName:"scale-out, fade-out"}}},"slide-in-bottom":{content:{_open:{animationName:"slide-from-bottom, fade-in"},_closed:{animationName:"slide-to-bottom, fade-out"}}},"slide-in-top":{content:{_open:{animationName:"slide-from-top, fade-in"},_closed:{animationName:"slide-to-top, fade-out"}}},"slide-in-left":{content:{_open:{animationName:"slide-from-left, fade-in"},_closed:{animationName:"slide-to-left, fade-out"}}},"slide-in-right":{content:{_open:{animationName:"slide-from-right, fade-in"},_closed:{animationName:"slide-to-right, fade-out"}}},none:{}}},defaultVariants:{size:"md",scrollBehavior:"outside",placement:"top",motionPreset:"scale"}}),drawerSlotRecipe=defineSlotRecipe({slots:drawerAnatomy.keys(),className:"chakra-drawer",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",insetInlineStart:0,top:0,w:"100vw",h:"100dvh",zIndex:"modal",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",insetInlineStart:0,top:0,zIndex:"modal",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,zIndex:"modal",textStyle:"sm",maxH:"100dvh",color:"inherit",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"slowest",animationTimingFunction:"ease-in-smooth"},_closed:{animationDuration:"slower",animationTimingFunction:"ease-in-smooth"}},header:{flex:0,px:"6",pt:"6",pb:"4"},body:{px:"6",py:"2",flex:"1",overflow:"auto"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"}},variants:{size:{xs:{content:{maxW:"xs"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},full:{content:{maxW:"100vw",h:"100dvh"}}},placement:{start:{positioner:{justifyContent:"flex-start"},content:{_open:{animationName:{base:"slide-from-left-full, fade-in",_rtl:"slide-from-right-full, fade-in"}},_closed:{animationName:{base:"slide-to-left-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},end:{positioner:{justifyContent:"flex-end"},content:{_open:{animationName:{base:"slide-from-right-full, fade-in",_rtl:"slide-from-left-full, fade-in"}},_closed:{animationName:{base:"slide-to-right-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},top:{positioner:{alignItems:"flex-start"},content:{maxW:"100%",_open:{animationName:"slide-from-top-full, fade-in"},_closed:{animationName:"slide-to-top-full, fade-out"}}},bottom:{positioner:{alignItems:"flex-end"},content:{maxW:"100%",_open:{animationName:"slide-from-bottom-full, fade-in"},_closed:{animationName:"slide-to-bottom-full, fade-out"}}}},contained:{true:{positioner:{padding:"4"},content:{borderRadius:"l3"}}}},defaultVariants:{size:"xs",placement:"end"}}),sharedStyles=defineStyle({fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent",borderRadius:"l2"}),editableSlotRecipe=defineSlotRecipe({slots:editableAnatomy.keys(),className:"chakra-editable",base:{root:{display:"inline-flex",alignItems:"center",position:"relative",gap:"1.5",width:"full"},preview:{...sharedStyles,py:"1",px:"1",display:"inline-flex",alignItems:"center",transitionProperty:"common",transitionDuration:"normal",cursor:"text",_hover:{bg:"bg.muted"},_disabled:{userSelect:"none"}},input:{...sharedStyles,outline:"0",py:"1",px:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",focusVisibleRing:"inside",focusRingWidth:"2px",_placeholder:{opacity:.6}},control:{display:"inline-flex",alignItems:"center",gap:"1.5"}},variants:{size:{sm:{root:{textStyle:"sm"},preview:{minH:"8"},input:{minH:"8"}},md:{root:{textStyle:"sm"},preview:{minH:"9"},input:{minH:"9"}},lg:{root:{textStyle:"md"},preview:{minH:"10"},input:{minH:"10"}}}},defaultVariants:{size:"md"}}),emptyStateSlotRecipe=defineSlotRecipe({slots:emptyStateAnatomy.keys(),className:"chakra-empty-state",base:{root:{width:"full"},content:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:"fg.subtle",_icon:{boxSize:"1em"}},title:{fontWeight:"semibold"},description:{textStyle:"sm",color:"fg.muted"}},variants:{size:{sm:{root:{px:"4",py:"6"},title:{textStyle:"md"},content:{gap:"4"},indicator:{textStyle:"2xl"}},md:{root:{px:"8",py:"12"},title:{textStyle:"lg"},content:{gap:"6"},indicator:{textStyle:"4xl"}},lg:{root:{px:"12",py:"16"},title:{textStyle:"xl"},content:{gap:"8"},indicator:{textStyle:"6xl"}}}},defaultVariants:{size:"md"}}),fieldSlotRecipe=defineSlotRecipe({className:"chakra-field",slots:fieldAnatomy.keys(),base:{requiredIndicator:{color:"fg.error",lineHeight:"1"},root:{display:"flex",width:"100%",position:"relative",gap:"1.5"},label:{display:"flex",alignItems:"center",textAlign:"start",textStyle:"sm",fontWeight:"medium",gap:"1",userSelect:"none",_disabled:{opacity:"0.5"}},errorText:{display:"inline-flex",alignItems:"center",fontWeight:"medium",gap:"1",color:"fg.error",textStyle:"xs"},helperText:{color:"fg.muted",textStyle:"xs"}},variants:{orientation:{vertical:{root:{flexDirection:"column",alignItems:"flex-start"}},horizontal:{root:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},label:{flex:"0 0 var(--field-label-width, 80px)"}}}},defaultVariants:{orientation:"vertical"}}),fieldsetSlotRecipe=defineSlotRecipe({className:"fieldset",slots:fieldsetAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",width:"full"},content:{display:"flex",flexDirection:"column",width:"full"},legend:{color:"fg",fontWeight:"medium",_disabled:{opacity:"0.5"}},helperText:{color:"fg.muted",textStyle:"sm"},errorText:{display:"inline-flex",alignItems:"center",color:"fg.error",gap:"2",fontWeight:"medium",textStyle:"sm"}},variants:{size:{sm:{root:{spaceY:"2"},content:{gap:"1.5"},legend:{textStyle:"sm"}},md:{root:{spaceY:"4"},content:{gap:"4"},legend:{textStyle:"sm"}},lg:{root:{spaceY:"6"},content:{gap:"4"},legend:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),fileUploadSlotRecipe=defineSlotRecipe({className:"chakra-file-upload",slots:fileUploadAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"4",width:"100%",alignItems:"flex-start"},label:{fontWeight:"medium",textStyle:"sm"},dropzone:{background:"bg",borderRadius:"l3",borderWidth:"2px",borderStyle:"dashed",display:"flex",alignItems:"center",flexDirection:"column",gap:"4",justifyContent:"center",minHeight:"2xs",px:"3",py:"2",transition:"backgrounds",focusVisibleRing:"outside",_hover:{bg:"bg.subtle"},_dragging:{bg:"colorPalette.subtle",borderStyle:"solid",borderColor:"colorPalette.solid"}},dropzoneContent:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"1",textStyle:"sm"},item:{textStyle:"sm",animationName:"fade-in",animationDuration:"moderate",background:"bg",borderRadius:"l2",borderWidth:"1px",width:"100%",display:"flex",alignItems:"center",gap:"3",p:"4"},itemGroup:{width:"100%",display:"flex",flexDirection:"column",gap:"3"},itemName:{color:"fg",fontWeight:"medium",lineClamp:"1"},itemContent:{display:"flex",flexDirection:"column",gap:"0.5",flex:"1"},itemSizeText:{color:"fg.muted",textStyle:"xs"},itemDeleteTrigger:{alignSelf:"flex-start"},itemPreviewImage:{width:"10",height:"10",objectFit:"scale-down"}},defaultVariants:{}}),hoverCardSlotRecipe=defineSlotRecipe({className:"chakra-hover-card",slots:anatomy$8.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--hovercard-bg":"colors.bg.panel",bg:"var(--hovercard-bg)",boxShadow:"lg",maxWidth:"80",borderRadius:"l3",zIndex:"popover",transformOrigin:"var(--transform-origin)",outline:"0",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--hovercard-bg)"},arrowTip:{borderTopWidth:"0.5px",borderInlineStartWidth:"0.5px"}},variants:{size:{xs:{content:{padding:"3"}},sm:{content:{padding:"4"}},md:{content:{padding:"5"}},lg:{content:{padding:"6"}}}},defaultVariants:{size:"md"}}),listSlotRecipe=defineSlotRecipe({className:"chakra-list",slots:listAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"var(--list-gap)","& :where(ul, ol)":{marginTop:"var(--list-gap)"}},item:{whiteSpace:"normal",display:"list-item"},indicator:{marginEnd:"2",minHeight:"1lh",flexShrink:0,display:"inline-block",verticalAlign:"middle"}},variants:{variant:{marker:{root:{listStyle:"revert",listStylePosition:"inside"},item:{_marker:{color:"fg.subtle"}}},plain:{item:{alignItems:"flex-start",display:"inline-flex"}}},align:{center:{item:{alignItems:"center"}},start:{item:{alignItems:"flex-start"}},end:{item:{alignItems:"flex-end"}}}},defaultVariants:{variant:"marker"}}),menuSlotRecipe=defineSlotRecipe({className:"chakra-menu",slots:menuAnatomy.keys(),base:{content:{outline:0,bg:"bg.panel",boxShadow:"lg",color:"fg",maxHeight:"var(--available-height)","--menu-z-index":"zIndex.dropdown",zIndex:"calc(var(--menu-z-index) + var(--layer-index, 0))",borderRadius:"l2",overflow:"hidden",overflowY:"auto",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},item:{textDecoration:"none",color:"fg",userSelect:"none",borderRadius:"l1",width:"100%",display:"flex",cursor:"menuitem",alignItems:"center",textAlign:"start",position:"relative",flex:"0 0 auto",outline:0,_disabled:{layerStyle:"disabled"}},itemText:{flex:"1"},itemGroupLabel:{px:"2",py:"1.5",fontWeight:"semibold",textStyle:"sm"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},itemCommand:{opacity:"0.6",textStyle:"xs",ms:"auto",ps:"4",letterSpacing:"widest"},separator:{height:"1px",bg:"bg.muted",my:"1",mx:"-1"}},variants:{variant:{subtle:{item:{_highlighted:{bg:"bg.emphasized/60"}}},solid:{item:{_highlighted:{bg:"colorPalette.solid",color:"colorPalette.contrast"}}}},size:{sm:{content:{minW:"8rem",padding:"1"},item:{gap:"1",textStyle:"xs",py:"1",px:"1.5"}},md:{content:{minW:"8rem",padding:"1.5"},item:{gap:"2",textStyle:"sm",py:"1.5",px:"2"}}}},defaultVariants:{size:"md",variant:"subtle"}}),selectSlotRecipe=defineSlotRecipe({className:"chakra-select",slots:selectAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",width:"full"},trigger:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"full",minH:"var(--select-trigger-height)",px:"var(--select-trigger-padding-x)",borderRadius:"l2",userSelect:"none",textAlign:"start",focusVisibleRing:"inside",_placeholderShown:{color:"fg.muted/80"},_disabled:{layerStyle:"disabled"},_invalid:{borderColor:"border.error"}},indicatorGroup:{display:"flex",alignItems:"center",gap:"1",pos:"absolute",right:"0",top:"0",bottom:"0",px:"var(--select-trigger-padding-x)",pointerEvents:"none"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:{base:"fg.muted",_disabled:"fg.subtle",_invalid:"fg.error"}},content:{background:"bg.panel",display:"flex",flexDirection:"column",zIndex:"dropdown",borderRadius:"l2",outline:0,maxH:"96",overflowY:"auto",boxShadow:"md",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"fastest"}},item:{position:"relative",userSelect:"none",display:"flex",alignItems:"center",gap:"2",cursor:"option",justifyContent:"space-between",flex:"1",textAlign:"start",borderRadius:"l1",_highlighted:{bg:"bg.emphasized/60"},_disabled:{pointerEvents:"none",opacity:"0.5"},_icon:{width:"4",height:"4"}},control:{pos:"relative"},itemText:{flex:"1"},itemGroup:{_first:{mt:"0"}},itemGroupLabel:{py:"1",fontWeight:"medium"},label:{fontWeight:"medium",userSelect:"none",textStyle:"sm",_disabled:{layerStyle:"disabled"}},valueText:{lineClamp:"1",maxW:"80%"}},variants:{variant:{outline:{trigger:{bg:"transparent",borderWidth:"1px",borderColor:"border",_expanded:{borderColor:"border.emphasized"}}},subtle:{trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}},size:{xs:{root:{"--select-trigger-height":"sizes.8","--select-trigger-padding-x":"spacing.2"},content:{p:"1",gap:"1",textStyle:"xs"},trigger:{textStyle:"xs",gap:"1"},item:{py:"1",px:"2"},itemGroupLabel:{py:"1",px:"2"},indicator:{_icon:{width:"3.5",height:"3.5"}}},sm:{root:{"--select-trigger-height":"sizes.9","--select-trigger-padding-x":"spacing.2.5"},content:{p:"1",textStyle:"sm"},trigger:{textStyle:"sm",gap:"1"},indicator:{_icon:{width:"4",height:"4"}},item:{py:"1",px:"1.5"},itemGroup:{mt:"1"},itemGroupLabel:{py:"1",px:"1.5"}},md:{root:{"--select-trigger-height":"sizes.10","--select-trigger-padding-x":"spacing.3"},content:{p:"1",textStyle:"sm"},itemGroup:{mt:"1.5"},item:{py:"1.5",px:"2"},itemIndicator:{display:"flex",alignItems:"center",justifyContent:"center"},itemGroupLabel:{py:"1.5",px:"2"},trigger:{textStyle:"sm",gap:"2"},indicator:{_icon:{width:"4",height:"4"}}},lg:{root:{"--select-trigger-height":"sizes.12","--select-trigger-padding-x":"spacing.4"},content:{p:"1.5",textStyle:"md"},itemGroup:{mt:"2"},item:{py:"2",px:"3"},itemGroupLabel:{py:"2",px:"3"},trigger:{textStyle:"md",py:"3",gap:"2"},indicator:{_icon:{width:"5",height:"5"}}}}},defaultVariants:{size:"md",variant:"outline"}});var $s,Os;const nativeSelectSlotRecipe=defineSlotRecipe({className:"chakra-native-select",slots:nativeSelectAnatomy.keys(),base:{root:{height:"fit-content",display:"flex",width:"100%",position:"relative"},field:{width:"100%",minWidth:"0",outline:"0",appearance:"none",borderRadius:"l2","--error-color":"colors.border.error",_disabled:{layerStyle:"disabled"},_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"},focusVisibleRing:"inside",lineHeight:"normal","& > option, & > optgroup":{bg:"bg"}},indicator:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)",height:"100%",color:"fg.muted",_disabled:{opacity:"0.5"},_invalid:{color:"fg.error"},_icon:{width:"1em",height:"1em"}}},variants:{variant:{outline:{field:($s=selectSlotRecipe.variants)==null?void 0:$s.variant.outline.trigger},subtle:{field:(Os=selectSlotRecipe.variants)==null?void 0:Os.variant.subtle.trigger},plain:{field:{bg:"transparent",color:"fg",focusRingWidth:"2px"}}},size:{xs:{field:{textStyle:"xs",ps:"2",pe:"6",height:"6"},indicator:{textStyle:"sm",insetEnd:"1.5"}},sm:{field:{textStyle:"sm",ps:"2.5",pe:"8",height:"8"},indicator:{textStyle:"md",insetEnd:"2"}},md:{field:{textStyle:"sm",ps:"3",pe:"8",height:"10"},indicator:{textStyle:"lg",insetEnd:"2"}},lg:{field:{textStyle:"md",ps:"4",pe:"8",height:"11"},indicator:{textStyle:"xl",insetEnd:"3"}},xl:{field:{textStyle:"md",ps:"4.5",pe:"10",height:"12"},indicator:{textStyle:"xl",insetEnd:"3"}}}},defaultVariants:selectSlotRecipe.defaultVariants});function mapEntries(_e,_){const et={};for(const tt in _e){const nt=_(tt,_e[tt]);et[nt[0]]=nt[1]}return et}const triggerStyle=defineStyle({display:"flex",justifyContent:"center",alignItems:"center",flex:"1",userSelect:"none",cursor:"button",lineHeight:"1",color:"fg.muted","--stepper-base-radius":"radii.l1","--stepper-radius":"calc(var(--stepper-base-radius) + 1px)",_icon:{boxSize:"1em"},_disabled:{opacity:"0.5"},_hover:{bg:"bg.muted"},_active:{bg:"bg.emphasized"}}),numberInputSlotRecipe=defineSlotRecipe({className:"chakra-number-input",slots:anatomy$7.keys(),base:{root:{position:"relative",zIndex:"0",isolation:"isolate"},input:{...inputRecipe.base,verticalAlign:"top",pe:"calc(var(--stepper-width) + 0.5rem)"},control:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",width:"var(--stepper-width)",height:"calc(100% - 2px)",zIndex:"1",borderStartWidth:"1px",divideY:"1px"},incrementTrigger:{...triggerStyle,borderTopEndRadius:"var(--stepper-radius)"},decrementTrigger:{...triggerStyle,borderBottomEndRadius:"var(--stepper-radius)"},valueText:{fontWeight:"medium",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}},variants:{size:{xs:{input:inputRecipe.variants.size.xs,control:{fontSize:"2xs","--stepper-width":"sizes.4"}},sm:{input:inputRecipe.variants.size.sm,control:{fontSize:"xs","--stepper-width":"sizes.5"}},md:{input:inputRecipe.variants.size.md,control:{fontSize:"sm","--stepper-width":"sizes.6"}},lg:{input:inputRecipe.variants.size.lg,control:{fontSize:"sm","--stepper-width":"sizes.6"}}},variant:mapEntries(inputRecipe.variants.variant,(_e,_)=>[_e,{input:_}])},defaultVariants:{size:"md",variant:"outline"}}),{variants,defaultVariants}=inputRecipe,pinInputSlotRecipe=defineSlotRecipe({className:"chakra-pin-input",slots:anatomy$6.keys(),base:{input:{...inputRecipe.base,textAlign:"center",width:"var(--input-height)"}},variants:{size:mapEntries(variants.size,(_e,_)=>[_e,{input:_}]),variant:mapEntries(variants.variant,(_e,_)=>[_e,{input:_}])},defaultVariants}),popoverSlotRecipe=defineSlotRecipe({className:"chakra-popover",slots:popoverAnatomy.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--popover-bg":"colors.bg.panel",bg:"var(--popover-bg)",boxShadow:"lg","--popover-size":"sizes.xs","--popover-mobile-size":"calc(100dvw - 1rem)",width:{base:"min(var(--popover-mobile-size), var(--popover-size))",sm:"var(--popover-size)"},borderRadius:"l3","--popover-z-index":"zIndex.popover",zIndex:"calc(var(--popover-z-index) + var(--layer-index, 0))",outline:"0",transformOrigin:"var(--transform-origin)",maxHeight:"var(--available-height)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"faster"}},header:{paddingInline:"var(--popover-padding)",paddingTop:"var(--popover-padding)"},body:{padding:"var(--popover-padding)",flex:"1"},footer:{display:"flex",alignItems:"center",paddingInline:"var(--popover-padding)",paddingBottom:"var(--popover-padding)"},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--popover-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px"}},variants:{size:{xs:{content:{"--popover-padding":"spacing.3"}},sm:{content:{"--popover-padding":"spacing.4"}},md:{content:{"--popover-padding":"spacing.5"}},lg:{content:{"--popover-padding":"spacing.6"}}}},defaultVariants:{size:"md"}}),progressSlotRecipe=defineSlotRecipe({slots:anatomy$5.keys(),className:"chakra-progress",base:{root:{textStyle:"sm",position:"relative"},track:{overflow:"hidden",position:"relative"},range:{display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"width, height",transitionDuration:"slow",height:"100%",bgColor:"var(--track-color)",_indeterminate:{"--animate-from-x":"-40%","--animate-to-x":"100%",position:"absolute",willChange:"left",minWidth:"50%",animation:"position 1s ease infinite normal none running",backgroundImage:"linear-gradient(to right, transparent 0%, var(--track-color) 50%, transparent 100%)"}},label:{display:"inline-flex",fontWeight:"medium",alignItems:"center",gap:"1"},valueText:{textStyle:"xs",lineHeight:"1",fontWeight:"medium"}},variants:{variant:{outline:{track:{shadow:"inset",bgColor:"bg.muted"},range:{bgColor:"colorPalette.solid"}},subtle:{track:{bgColor:"colorPalette.muted"},range:{bgColor:"colorPalette.solid/72"}}},shape:{square:{},rounded:{track:{borderRadius:"l1"}},full:{track:{borderRadius:"full"}}},striped:{true:{range:{backgroundImage:"linear-gradient(45deg, var(--stripe-color) 25%, transparent 25%, transparent 50%, var(--stripe-color) 50%, var(--stripe-color) 75%, transparent 75%, transparent)",backgroundSize:"var(--stripe-size) var(--stripe-size)","--stripe-size":"1rem","--stripe-color":{_light:"rgba(255, 255, 255, 0.3)",_dark:"rgba(0, 0, 0, 0.3)"}}}},animated:{true:{range:{"--animate-from":"var(--stripe-size)",animation:"bg-position 1s linear infinite"}}},size:{xs:{track:{h:"1.5"}},sm:{track:{h:"2"}},md:{track:{h:"2.5"}},lg:{track:{h:"3"}},xl:{track:{h:"4"}}}},defaultVariants:{variant:"outline",size:"md",shape:"rounded"}}),progressCircleSlotRecipe=defineSlotRecipe({className:"chakra-progress-circle",slots:anatomy$5.keys(),base:{root:{display:"inline-flex",textStyle:"sm",position:"relative"},circle:{_indeterminate:{animation:"spin 2s linear infinite"}},circleTrack:{"--track-color":"colors.colorPalette.muted",stroke:"var(--track-color)"},circleRange:{stroke:"colorPalette.solid",transitionProperty:"stroke-dasharray",transitionDuration:"0.6s",_indeterminate:{animation:"circular-progress 1.5s linear infinite"}},label:{display:"inline-flex"},valueText:{lineHeight:"1",fontWeight:"medium",letterSpacing:"tight",fontVariantNumeric:"tabular-nums"}},variants:{size:{xs:{circle:{"--size":"24px","--thickness":"4px"},valueText:{textStyle:"2xs"}},sm:{circle:{"--size":"32px","--thickness":"5px"},valueText:{textStyle:"2xs"}},md:{circle:{"--size":"40px","--thickness":"6px"},valueText:{textStyle:"xs"}},lg:{circle:{"--size":"48px","--thickness":"7px"},valueText:{textStyle:"sm"}},xl:{circle:{"--size":"64px","--thickness":"8px"},valueText:{textStyle:"sm"}}}},defaultVariants:{size:"md"}}),qrCodeSlotRecipe=defineSlotRecipe({slots:anatomy$4.keys(),className:"chakra-qr-code",base:{root:{position:"relative",width:"fit-content","--qr-code-overlay-size":"calc(var(--qr-code-size) / 3)"},frame:{width:"var(--qr-code-size)",height:"var(--qr-code-size)",fill:"currentColor"},overlay:{display:"flex",alignItems:"center",justifyContent:"center",width:"var(--qr-code-overlay-size)",height:"var(--qr-code-overlay-size)",padding:"1",bg:"bg",rounded:"l1"}},variants:{size:{"2xs":{root:{"--qr-code-size":"40px"}},xs:{root:{"--qr-code-size":"64px"}},sm:{root:{"--qr-code-size":"80px"}},md:{root:{"--qr-code-size":"120px"}},lg:{root:{"--qr-code-size":"160px"}},xl:{root:{"--qr-code-size":"200px"}},"2xl":{root:{"--qr-code-size":"240px"}},full:{root:{"--qr-code-size":"100%"}}}},defaultVariants:{size:"md"}});var Ds,Ls,ks,Ns,Fs,Bs,Vs;const radioCardSlotRecipe=defineSlotRecipe({className:"chakra-radio-card",slots:radioCardAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",isolation:"isolate"},item:{flex:"1",display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",_focus:{bg:"colorPalette.muted/20"},_disabled:{opacity:"0.8",borderColor:"border.disabled"},_checked:{zIndex:"1"}},label:{display:"inline-flex",fontWeight:"medium",textStyle:"sm",_disabled:{opacity:"0.5"}},itemText:{fontWeight:"medium"},itemDescription:{opacity:"0.64",textStyle:"sm"},itemControl:{display:"inline-flex",flex:"1",pos:"relative",rounded:"inherit",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)",_disabled:{bg:"bg.muted"}},itemIndicator:radiomarkRecipe.base,itemAddon:{roundedBottom:"inherit",_disabled:{color:"fg.muted"}},itemContent:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)"}},variants:{size:{sm:{item:{textStyle:"sm"},itemControl:{padding:"3",gap:"1.5"},itemAddon:{px:"3",py:"1.5",borderTopWidth:"1px"},itemIndicator:(Ds=radiomarkRecipe.variants)==null?void 0:Ds.size.sm},md:{item:{textStyle:"sm"},itemControl:{padding:"4",gap:"2.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:(Ls=radiomarkRecipe.variants)==null?void 0:Ls.size.md},lg:{item:{textStyle:"md"},itemControl:{padding:"4",gap:"3.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:(ks=radiomarkRecipe.variants)==null?void 0:ks.size.lg}},variant:{surface:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"}},itemIndicator:(Ns=radiomarkRecipe.variants)==null?void 0:Ns.variant.solid},subtle:{item:{bg:"bg.muted"},itemControl:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},itemIndicator:(Fs=radiomarkRecipe.variants)==null?void 0:Fs.variant.outline},outline:{item:{borderWidth:"1px",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},itemIndicator:(Bs=radiomarkRecipe.variants)==null?void 0:Bs.variant.solid},solid:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},itemIndicator:(Vs=radiomarkRecipe.variants)==null?void 0:Vs.variant.inverted}},justify:{start:{item:{"--radio-card-justify":"flex-start"}},end:{item:{"--radio-card-justify":"flex-end"}},center:{item:{"--radio-card-justify":"center"}}},align:{start:{item:{"--radio-card-align":"flex-start"},itemControl:{textAlign:"start"}},end:{item:{"--radio-card-align":"flex-end"},itemControl:{textAlign:"end"}},center:{item:{"--radio-card-align":"center"},itemControl:{textAlign:"center"}}},orientation:{vertical:{itemControl:{flexDirection:"column"}},horizontal:{itemControl:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}});var js,zs,Us,Gs,Hs,Ws,Ys,Xs,qs,Ks,Zs,Qs,Js,yl;const radioGroupSlotRecipe=defineSlotRecipe({className:"chakra-radio-group",slots:radioGroupAnatomy.keys(),base:{item:{display:"inline-flex",alignItems:"center",position:"relative",fontWeight:"medium",_disabled:{cursor:"disabled"}},itemControl:radiomarkRecipe.base,label:{userSelect:"none",textStyle:"sm",_disabled:{opacity:"0.5"}}},variants:{variant:{outline:{itemControl:(zs=(js=radiomarkRecipe.variants)==null?void 0:js.variant)==null?void 0:zs.outline},subtle:{itemControl:(Gs=(Us=radiomarkRecipe.variants)==null?void 0:Us.variant)==null?void 0:Gs.subtle},solid:{itemControl:(Ws=(Hs=radiomarkRecipe.variants)==null?void 0:Hs.variant)==null?void 0:Ws.solid}},size:{xs:{item:{textStyle:"xs",gap:"1.5"},itemControl:(Xs=(Ys=radiomarkRecipe.variants)==null?void 0:Ys.size)==null?void 0:Xs.xs},sm:{item:{textStyle:"sm",gap:"2"},itemControl:(Ks=(qs=radiomarkRecipe.variants)==null?void 0:qs.size)==null?void 0:Ks.sm},md:{item:{textStyle:"sm",gap:"2.5"},itemControl:(Qs=(Zs=radiomarkRecipe.variants)==null?void 0:Zs.size)==null?void 0:Qs.md},lg:{item:{textStyle:"md",gap:"3"},itemControl:(yl=(Js=radiomarkRecipe.variants)==null?void 0:Js.size)==null?void 0:yl.lg}}},defaultVariants:{size:"md",variant:"solid"}}),ratingGroupSlotRecipe=defineSlotRecipe({className:"chakra-rating-group",slots:ratingGroupAnatomy.keys(),base:{root:{display:"inline-flex"},control:{display:"inline-flex",alignItems:"center"},item:{display:"inline-flex",alignItems:"center",justifyContent:"center",userSelect:"none"},itemIndicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",position:"relative",_icon:{stroke:"currentColor",width:"100%",height:"100%",display:"inline-block",flexShrink:0,position:"absolute",left:0,top:0},"& [data-bg]":{color:"bg.emphasized"},"& [data-fg]":{color:"transparent"},"&[data-highlighted]:not([data-half])":{"& [data-fg]":{color:"colorPalette.solid"}},"&[data-half]":{"& [data-fg]":{color:"colorPalette.solid",clipPath:"inset(0 50% 0 0)"}}}},variants:{size:{xs:{item:{textStyle:"sm"}},sm:{item:{textStyle:"md"}},md:{item:{textStyle:"xl"}},lg:{item:{textStyle:"2xl"}}}},defaultVariants:{size:"md"}}),segmentGroupSlotRecipe=defineSlotRecipe({className:"chakra-segment-group",slots:segmentGroupAnatomy.keys(),base:{root:{"--segment-radius":"radii.l2",borderRadius:"l2",display:"inline-flex",boxShadow:"inset",minW:"max-content",textAlign:"center",position:"relative",isolation:"isolate",bg:"bg.muted"},item:{display:"flex",alignItems:"center",userSelect:"none",fontSize:"sm",position:"relative",color:"fg",borderRadius:"var(--segment-radius)",_disabled:{opacity:"0.5"},"&:has(input:focus-visible)":{focusRing:"outside"},_before:{content:'""',position:"absolute",insetInlineStart:0,insetBlock:"1.5",bg:"border",width:"1px",transition:"opacity 0.2s"},"& + &[data-state=checked], &[data-state=checked] + &, &:first-of-type":{_before:{opacity:"0"}},"&[data-state=checked][data-ssr]":{shadow:"sm",bg:"bg",borderRadius:"var(--segment-radius)"}},indicator:{shadow:"sm",pos:"absolute",bg:{_light:"bg",_dark:"bg.emphasized"},width:"var(--width)",height:"var(--height)",top:"var(--top)",left:"var(--left)",zIndex:-1,borderRadius:"var(--segment-radius)"}},variants:{size:{xs:{root:{height:"6"},item:{textStyle:"xs",px:"3",gap:"1"}},sm:{root:{height:"8"},item:{textStyle:"sm",px:"4",gap:"2"}},md:{root:{height:"10"},item:{textStyle:"sm",px:"4",gap:"2"}},lg:{root:{height:"10"},item:{textStyle:"md",px:"5",gap:"3"}}}},defaultVariants:{size:"md"}}),sliderSlotRecipe=defineSlotRecipe({className:"chakra-slider",slots:sliderAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",textStyle:"sm",position:"relative",isolation:"isolate",touchAction:"none"},label:{fontWeight:"medium",textStyle:"sm"},control:{display:"inline-flex",alignItems:"center",position:"relative"},track:{overflow:"hidden",borderRadius:"full",flex:"1"},range:{width:"inherit",height:"inherit",_disabled:{bg:"border.emphasized!"}},markerGroup:{position:"absolute!",zIndex:"1"},marker:{"--marker-bg":{base:"white",_underValue:"colors.bg"},display:"flex",alignItems:"center",gap:"calc(var(--slider-thumb-size) / 2)",color:"fg.muted",textStyle:"xs"},markerIndicator:{width:"var(--slider-marker-size)",height:"var(--slider-marker-size)",borderRadius:"full",bg:"var(--marker-bg)"},thumb:{width:"var(--slider-thumb-size)",height:"var(--slider-thumb-size)",display:"flex",alignItems:"center",justifyContent:"center",outline:0,zIndex:"2",borderRadius:"full",_focusVisible:{ring:"2px",ringColor:"colorPalette.focusRing",ringOffset:"2px",ringOffsetColor:"bg"}}},variants:{size:{sm:{root:{"--slider-thumb-size":"sizes.4","--slider-track-size":"sizes.1.5","--slider-marker-center":"6px","--slider-marker-size":"sizes.1","--slider-marker-inset":"3px"}},md:{root:{"--slider-thumb-size":"sizes.5","--slider-track-size":"sizes.2","--slider-marker-center":"8px","--slider-marker-size":"sizes.1","--slider-marker-inset":"4px"}},lg:{root:{"--slider-thumb-size":"sizes.6","--slider-track-size":"sizes.2.5","--slider-marker-center":"9px","--slider-marker-size":"sizes.1.5","--slider-marker-inset":"5px"}}},variant:{outline:{track:{shadow:"inset",bg:"bg.emphasized/72"},range:{bg:"colorPalette.solid"},thumb:{borderWidth:"2px",borderColor:"colorPalette.solid",bg:"bg",_disabled:{bg:"border.emphasized",borderColor:"border.emphasized"}}},solid:{track:{bg:"colorPalette.subtle",_disabled:{bg:"bg.muted"}},range:{bg:"colorPalette.solid"},thumb:{bg:"colorPalette.solid",_disabled:{bg:"border.emphasized"}}}},orientation:{vertical:{root:{display:"inline-flex"},control:{flexDirection:"column",height:"100%",minWidth:"var(--slider-thumb-size)","&[data-has-mark-label]":{marginEnd:"4"}},track:{width:"var(--slider-track-size)"},thumb:{left:"50%",translate:"-50% 0"},markerGroup:{insetStart:"var(--slider-marker-center)",insetBlock:"var(--slider-marker-inset)"},marker:{flexDirection:"row"}},horizontal:{control:{flexDirection:"row",width:"100%",minHeight:"var(--slider-thumb-size)","&[data-has-mark-label]":{marginBottom:"4"}},track:{height:"var(--slider-track-size)"},thumb:{top:"50%",translate:"0 -50%"},markerGroup:{top:"var(--slider-marker-center)",insetInline:"var(--slider-marker-inset)"},marker:{flexDirection:"column"}}}},defaultVariants:{size:"md",variant:"outline",orientation:"horizontal"}}),statSlotRecipe=defineSlotRecipe({className:"chakra-stat",slots:statAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",position:"relative",flex:"1"},label:{display:"inline-flex",gap:"1.5",alignItems:"center",color:"fg.muted",textStyle:"sm"},helpText:{color:"fg.muted",textStyle:"xs"},valueUnit:{color:"fg.muted",textStyle:"xs",fontWeight:"initial",letterSpacing:"initial"},valueText:{verticalAlign:"baseline",fontWeight:"semibold",letterSpacing:"tight",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums",display:"inline-flex",gap:"1"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",marginEnd:1,"& :where(svg)":{w:"1em",h:"1em"},"&[data-type=up]":{color:"fg.success"},"&[data-type=down]":{color:"fg.error"}}},variants:{size:{sm:{valueText:{textStyle:"xl"}},md:{valueText:{textStyle:"2xl"}},lg:{valueText:{textStyle:"3xl"}}}},defaultVariants:{size:"md"}}),statusSlotRecipe=defineSlotRecipe({className:"chakra-status",slots:statusAnatomy.keys(),base:{root:{display:"inline-flex",alignItems:"center",gap:"2"},indicator:{width:"0.64em",height:"0.64em",flexShrink:0,borderRadius:"full",forcedColorAdjust:"none",bg:"colorPalette.solid"}},variants:{size:{sm:{root:{textStyle:"xs"}},md:{root:{textStyle:"sm"}},lg:{root:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),stepsSlotRecipe=defineSlotRecipe({className:"chakra-steps",slots:stepsAnatomy.keys(),base:{root:{display:"flex",width:"full"},list:{display:"flex",justifyContent:"space-between","--steps-gutter":"spacing.3","--steps-thickness":"2px"},title:{fontWeight:"medium",color:"fg"},description:{color:"fg.muted"},separator:{bg:"border",flex:"1"},indicator:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0",borderRadius:"full",fontWeight:"medium",width:"var(--steps-size)",height:"var(--steps-size)",_icon:{flexShrink:"0",width:"var(--steps-icon-size)",height:"var(--steps-icon-size)"}},item:{position:"relative",display:"flex",flex:"1 0 0","&:last-of-type":{flex:"initial","& [data-part=separator]":{display:"none"}}},trigger:{display:"flex",alignItems:"center",gap:"3",textAlign:"start",focusVisibleRing:"outside",borderRadius:"l2"},content:{focusVisibleRing:"outside"}},variants:{orientation:{vertical:{root:{flexDirection:"row",height:"100%"},list:{flexDirection:"column",alignItems:"flex-start"},separator:{position:"absolute",width:"var(--steps-thickness)",height:"100%",maxHeight:"calc(100% - var(--steps-size) - var(--steps-gutter) * 2)",top:"calc(var(--steps-size) + var(--steps-gutter))",insetStart:"calc(var(--steps-size) / 2 - 1px)"},item:{alignItems:"flex-start"}},horizontal:{root:{flexDirection:"column",width:"100%"},list:{flexDirection:"row",alignItems:"center"},separator:{width:"100%",height:"var(--steps-thickness)",marginX:"var(--steps-gutter)"},item:{alignItems:"center"}}},variant:{solid:{indicator:{_incomplete:{borderWidth:"var(--steps-thickness)"},_current:{bg:"colorPalette.muted",borderWidth:"var(--steps-thickness)",borderColor:"colorPalette.solid",color:"colorPalette.fg"},_complete:{bg:"colorPalette.solid",borderColor:"colorPalette.solid",color:"colorPalette.contrast"}},separator:{_complete:{bg:"colorPalette.solid"}}},subtle:{indicator:{_incomplete:{bg:"bg.muted"},_current:{bg:"colorPalette.muted",color:"colorPalette.fg"},_complete:{bg:"colorPalette.emphasized",color:"colorPalette.fg"}},separator:{_complete:{bg:"colorPalette.emphasized"}}}},size:{xs:{root:{gap:"2.5"},list:{"--steps-size":"sizes.6","--steps-icon-size":"sizes.3.5",textStyle:"xs"},title:{textStyle:"sm"}},sm:{root:{gap:"3"},list:{"--steps-size":"sizes.8","--steps-icon-size":"sizes.4",textStyle:"xs"},title:{textStyle:"sm"}},md:{root:{gap:"4"},list:{"--steps-size":"sizes.10","--steps-icon-size":"sizes.4",textStyle:"sm"},title:{textStyle:"sm"}},lg:{root:{gap:"6"},list:{"--steps-size":"sizes.11","--steps-icon-size":"sizes.5",textStyle:"md"},title:{textStyle:"md"}}}},defaultVariants:{size:"md",variant:"solid",orientation:"horizontal"}}),switchSlotRecipe=defineSlotRecipe({slots:switchAnatomy.keys(),className:"chakra-switch",base:{root:{display:"inline-flex",gap:"2.5",alignItems:"center",position:"relative",verticalAlign:"middle","--switch-diff":"calc(var(--switch-width) - var(--switch-height))","--switch-x":{base:"var(--switch-diff)",_rtl:"calc(var(--switch-diff) * -1)"}},label:{lineHeight:"1",userSelect:"none",fontSize:"sm",fontWeight:"medium",_disabled:{opacity:"0.5"}},indicator:{position:"absolute",height:"var(--switch-height)",width:"var(--switch-height)",fontSize:"var(--switch-indicator-font-size)",fontWeight:"medium",flexShrink:0,userSelect:"none",display:"grid",placeContent:"center",transition:"inset-inline-start 0.12s ease",insetInlineStart:"calc(var(--switch-x) - 2px)",_checked:{insetInlineStart:"2px"}},control:{display:"inline-flex",gap:"0.5rem",flexShrink:0,justifyContent:"flex-start",cursor:"switch",borderRadius:"full",position:"relative",width:"var(--switch-width)",height:"var(--switch-height)",_disabled:{opacity:"0.5",cursor:"not-allowed"},_invalid:{outline:"2px solid",outlineColor:"border.error",outlineOffset:"2px"}},thumb:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transitionProperty:"translate",transitionDuration:"fast",borderRadius:"inherit",_checked:{translate:"var(--switch-x) 0"}}},variants:{variant:{solid:{control:{borderRadius:"full",bg:"bg.emphasized",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}},thumb:{bg:"white",width:"var(--switch-height)",height:"var(--switch-height)",scale:"0.8",boxShadow:"sm",_checked:{bg:"colorPalette.contrast"}}},raised:{control:{borderRadius:"full",height:"calc(var(--switch-height) / 2)",bg:"bg.muted",boxShadow:"inset",_checked:{bg:"colorPalette.solid/60"}},thumb:{width:"var(--switch-height)",height:"var(--switch-height)",position:"relative",top:"calc(var(--switch-height) * -0.25)",bg:"white",boxShadow:"xs",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}}}},size:{xs:{root:{"--switch-width":"sizes.6","--switch-height":"sizes.3","--switch-indicator-font-size":"fontSizes.xs"}},sm:{root:{"--switch-width":"sizes.8","--switch-height":"sizes.4","--switch-indicator-font-size":"fontSizes.xs"}},md:{root:{"--switch-width":"sizes.10","--switch-height":"sizes.5","--switch-indicator-font-size":"fontSizes.sm"}},lg:{root:{"--switch-width":"sizes.12","--switch-height":"sizes.6","--switch-indicator-font-size":"fontSizes.md"}}}},defaultVariants:{variant:"solid",size:"md"}}),tableSlotRecipe=defineSlotRecipe({className:"chakra-table",slots:tableAnatomy.keys(),base:{root:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full",textAlign:"start",verticalAlign:"top"},row:{_selected:{bg:"colorPalette.subtle"}},cell:{textAlign:"start",alignItems:"center"},columnHeader:{fontWeight:"medium",textAlign:"start",color:"fg"},caption:{fontWeight:"medium",textStyle:"xs"},footer:{fontWeight:"medium"}},variants:{interactive:{true:{body:{"& tr":{_hover:{bg:"colorPalette.subtle"}}}}},stickyHeader:{true:{header:{"& :where(tr)":{top:"var(--table-sticky-offset, 0)",position:"sticky",zIndex:1}}}},striped:{true:{row:{"&:nth-of-type(odd) td":{bg:"bg.muted"}}}},showColumnBorder:{true:{columnHeader:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}},cell:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}}}},variant:{line:{columnHeader:{borderBottomWidth:"1px"},cell:{borderBottomWidth:"1px"},row:{bg:"bg"}},outline:{root:{boxShadow:"0 0 0 1px {colors.border}",overflow:"hidden"},columnHeader:{borderBottomWidth:"1px"},header:{bg:"bg.muted"},row:{"&:not(:last-of-type)":{borderBottomWidth:"1px"}},footer:{borderTopWidth:"1px"}}},size:{sm:{root:{textStyle:"sm"},columnHeader:{px:"2",py:"2"},cell:{px:"2",py:"2"}},md:{root:{textStyle:"sm"},columnHeader:{px:"3",py:"3"},cell:{px:"3",py:"3"}},lg:{root:{textStyle:"md"},columnHeader:{px:"4",py:"3"},cell:{px:"4",py:"3"}}}},defaultVariants:{variant:"line",size:"md"}}),tabsSlotRecipe=defineSlotRecipe({slots:tabsAnatomy.keys(),className:"chakra-tabs",base:{root:{"--tabs-trigger-radius":"radii.l2",position:"relative",_horizontal:{display:"block"},_vertical:{display:"flex"}},list:{display:"inline-flex",position:"relative",isolation:"isolate","--tabs-indicator-shadow":"shadows.xs","--tabs-indicator-bg":"colors.bg",minH:"var(--tabs-height)",_horizontal:{flexDirection:"row"},_vertical:{flexDirection:"column"}},trigger:{outline:"0",minW:"var(--tabs-height)",height:"var(--tabs-height)",display:"flex",alignItems:"center",fontWeight:"medium",position:"relative",cursor:"button",gap:"2",_focusVisible:{zIndex:1,outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{cursor:"not-allowed",opacity:.5}},content:{focusVisibleRing:"inside",_horizontal:{width:"100%",pt:"var(--tabs-content-padding)"},_vertical:{height:"100%",ps:"var(--tabs-content-padding)"}},indicator:{width:"var(--width)",height:"var(--height)",borderRadius:"var(--tabs-indicator-radius)",bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",zIndex:-1}},variants:{fitted:{true:{list:{display:"flex"},trigger:{flex:1,textAlign:"center",justifyContent:"center"}}},justify:{start:{list:{justifyContent:"flex-start"}},center:{list:{justifyContent:"center"}},end:{list:{justifyContent:"flex-end"}}},size:{sm:{root:{"--tabs-height":"sizes.9","--tabs-content-padding":"spacing.3"},trigger:{py:"1",px:"3",textStyle:"sm"}},md:{root:{"--tabs-height":"sizes.10","--tabs-content-padding":"spacing.4"},trigger:{py:"2",px:"4",textStyle:"sm"}},lg:{root:{"--tabs-height":"sizes.11","--tabs-content-padding":"spacing.4.5"},trigger:{py:"2",px:"4.5",textStyle:"md"}}},variant:{line:{list:{display:"flex",borderColor:"border",_horizontal:{borderBottomWidth:"1px"},_vertical:{borderEndWidth:"1px"}},trigger:{color:"fg.muted",_disabled:{_active:{bg:"initial"}},_selected:{color:"fg",_horizontal:{layerStyle:"indicator.bottom","--indicator-offset-y":"-1px","--indicator-color":"colors.colorPalette.solid"},_vertical:{layerStyle:"indicator.end","--indicator-offset-x":"-1px"}}}},subtle:{trigger:{borderRadius:"var(--tabs-trigger-radius)",color:"fg.muted",_selected:{bg:"colorPalette.subtle",color:"colorPalette.fg"}}},enclosed:{list:{bg:"bg.muted",padding:"1",borderRadius:"l3",minH:"calc(var(--tabs-height) - 4px)"},trigger:{justifyContent:"center",color:"fg.muted",borderRadius:"var(--tabs-trigger-radius)",_selected:{bg:"bg",color:"colorPalette.fg",shadow:"xs"}}},outline:{list:{"--line-thickness":"1px","--line-offset":"calc(var(--line-thickness) * -1)",borderColor:"border",display:"flex",_horizontal:{_before:{content:'""',position:"absolute",bottom:"0px",width:"100%",borderBottomWidth:"var(--line-thickness)",borderBottomColor:"border"}},_vertical:{_before:{content:'""',position:"absolute",insetInline:"var(--line-offset)",height:"calc(100% - calc(var(--line-thickness) * 2))",borderEndWidth:"var(--line-thickness)",borderEndColor:"border"}}},trigger:{color:"fg.muted",borderWidth:"1px",borderColor:"transparent",_selected:{bg:"currentBg",color:"colorPalette.fg"},_horizontal:{borderTopRadius:"var(--tabs-trigger-radius)",marginBottom:"var(--line-offset)",marginEnd:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderBottomColor:"transparent"}},_vertical:{borderStartRadius:"var(--tabs-trigger-radius)",marginEnd:"var(--line-offset)",marginBottom:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderEndColor:"transparent"}}}},plain:{trigger:{color:"fg.muted",_selected:{color:"colorPalette.fg"},borderRadius:"var(--tabs-trigger-radius)","&[data-selected][data-ssr]":{bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",borderRadius:"var(--tabs-indicator-radius)"}}}}},defaultVariants:{size:"md",variant:"line"}});var _l;const badgeVariant=(_l=badgeRecipe.variants)==null?void 0:_l.variant,tagSlotRecipe=defineSlotRecipe({slots:tagAnatomy.keys(),className:"chakra-tag",base:{root:{display:"inline-flex",alignItems:"center",verticalAlign:"top",maxWidth:"100%",userSelect:"none",borderRadius:"l2",focusVisibleRing:"outside"},label:{lineClamp:"1"},closeTrigger:{display:"flex",alignItems:"center",justifyContent:"center",outline:"0",borderRadius:"l1",color:"currentColor",focusVisibleRing:"inside",focusRingWidth:"2px"},startElement:{flexShrink:0,boxSize:"var(--tag-element-size)",ms:"var(--tag-element-offset)","&:has([data-scope=avatar])":{boxSize:"var(--tag-avatar-size)",ms:"calc(var(--tag-element-offset) * 1.5)"},_icon:{boxSize:"100%"}},endElement:{flexShrink:0,boxSize:"var(--tag-element-size)",me:"var(--tag-element-offset)",_icon:{boxSize:"100%"},"&:has(button)":{ms:"calc(var(--tag-element-offset) * -1)"}}},variants:{size:{sm:{root:{px:"1.5",minH:"4.5",gap:"1","--tag-avatar-size":"spacing.3","--tag-element-size":"spacing.3","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},md:{root:{px:"1.5",minH:"5",gap:"1","--tag-avatar-size":"spacing.3.5","--tag-element-size":"spacing.3.5","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},lg:{root:{px:"2",minH:"6",gap:"1.5","--tag-avatar-size":"spacing.4.5","--tag-element-size":"spacing.4","--tag-element-offset":"-3px"},label:{textStyle:"sm"}},xl:{root:{px:"2.5",minH:"8",gap:"1.5","--tag-avatar-size":"spacing.6","--tag-element-size":"spacing.4.5","--tag-element-offset":"-4px"},label:{textStyle:"sm"}}},variant:{subtle:{root:badgeVariant==null?void 0:badgeVariant.subtle},solid:{root:badgeVariant==null?void 0:badgeVariant.solid},outline:{root:badgeVariant==null?void 0:badgeVariant.outline},surface:{root:badgeVariant==null?void 0:badgeVariant.surface}}},defaultVariants:{size:"md",variant:"surface"}}),timelineSlotRecipe=defineSlotRecipe({slots:timelineAnatomy.keys(),className:"chakra-timeline",base:{root:{display:"flex",flexDirection:"column",width:"full","--timeline-thickness":"1px","--timeline-gutter":"4px"},item:{display:"flex",position:"relative",alignItems:"flex-start",flexShrink:0,gap:"4",_last:{"& :where(.chakra-timeline__separator)":{display:"none"}}},separator:{position:"absolute",borderStartWidth:"var(--timeline-thickness)",ms:"calc(-1 * var(--timeline-thickness) / 2)",insetInlineStart:"calc(var(--timeline-indicator-size) / 2)",insetBlock:"0",borderColor:"border"},indicator:{outline:"2px solid {colors.bg}",position:"relative",flexShrink:"0",boxSize:"var(--timeline-indicator-size)",fontSize:"var(--timeline-font-size)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"full",fontWeight:"medium"},connector:{alignSelf:"stretch",position:"relative"},content:{pb:"6",display:"flex",flexDirection:"column",width:"full",gap:"2"},title:{display:"flex",fontWeight:"medium",flexWrap:"wrap",gap:"1.5",alignItems:"center",mt:"var(--timeline-margin)"},description:{color:"fg.muted",textStyle:"xs"}},variants:{variant:{subtle:{indicator:{bg:"colorPalette.muted"}},solid:{indicator:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},outline:{indicator:{bg:"currentBg",borderWidth:"1px",borderColor:"colorPalette.muted"}},plain:{}},size:{sm:{root:{"--timeline-indicator-size":"sizes.4","--timeline-font-size":"fontSizes.2xs"},title:{textStyle:"xs"}},md:{root:{"--timeline-indicator-size":"sizes.5","--timeline-font-size":"fontSizes.xs"},title:{textStyle:"sm"}},lg:{root:{"--timeline-indicator-size":"sizes.6","--timeline-font-size":"fontSizes.xs"},title:{mt:"0.5",textStyle:"sm"}},xl:{root:{"--timeline-indicator-size":"sizes.8","--timeline-font-size":"fontSizes.sm"},title:{mt:"1.5",textStyle:"sm"}}}},defaultVariants:{size:"md",variant:"solid"}}),toastSlotRecipe=defineSlotRecipe({slots:toastAnatomy.keys(),className:"chakra-toast",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",gap:"3",py:"4",ps:"4",pe:"6",borderRadius:"l2",translate:"var(--x) var(--y)",scale:"var(--scale)",zIndex:"var(--z-index)",height:"var(--height)",opacity:"var(--opacity)",willChange:"translate, opacity, scale",transition:"translate 400ms, scale 400ms, opacity 400ms, height 400ms, box-shadow 200ms",transitionTimingFunction:"cubic-bezier(0.21, 1.02, 0.73, 1)",_closed:{transition:"translate 400ms, scale 400ms, opacity 200ms",transitionTimingFunction:"cubic-bezier(0.06, 0.71, 0.55, 1)"},bg:"bg.panel",color:"fg",boxShadow:"xl","--toast-trigger-bg":"colors.bg.muted","&[data-type=warning]":{bg:"orange.solid",color:"orange.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=success]":{bg:"green.solid",color:"green.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=error]":{bg:"red.solid",color:"red.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"}},title:{fontWeight:"medium",textStyle:"sm",marginEnd:"2"},description:{display:"inline",textStyle:"sm",opacity:"0.8"},indicator:{flexShrink:"0",boxSize:"5"},actionTrigger:{textStyle:"sm",fontWeight:"medium",height:"8",px:"3",borderRadius:"l2",alignSelf:"center",borderWidth:"1px",borderColor:"var(--toast-border-color, inherit)",transition:"background 200ms",_hover:{bg:"var(--toast-trigger-bg)"}},closeTrigger:{position:"absolute",top:"1",insetEnd:"1",padding:"1",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"{currentColor/60}",borderRadius:"l2",textStyle:"md",transition:"background 200ms",_icon:{boxSize:"1em"}}}}),tooltipSlotRecipe=defineSlotRecipe({slots:anatomy$3.keys(),className:"chakra-tooltip",base:{content:{"--tooltip-bg":"colors.bg.inverted",bg:"var(--tooltip-bg)",color:"fg.inverted",px:"2.5",py:"1",borderRadius:"l2",fontWeight:"medium",textStyle:"xs",boxShadow:"md",maxW:"xs",zIndex:"tooltip",transformOrigin:"var(--transform-origin)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"fast"}},arrow:{"--arrow-size":"sizes.2","--arrow-background":"var(--tooltip-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px",borderColor:"var(--tooltip-bg)"}}}),slotRecipes={accordion:accordionSlotRecipe,actionBar:actionBarSlotRecipe,alert:alertSlotRecipe,avatar:avatarSlotRecipe,blockquote:blockquoteSlotRecipe,breadcrumb:breadcrumbSlotRecipe,card:cardSlotRecipe,checkbox:checkboxSlotRecipe,checkboxCard:checkboxCardSlotRecipe,collapsible:collapsibleSlotRecipe,dataList:dataListSlotRecipe,dialog:dialogSlotRecipe,drawer:drawerSlotRecipe,editable:editableSlotRecipe,emptyState:emptyStateSlotRecipe,field:fieldSlotRecipe,fieldset:fieldsetSlotRecipe,fileUpload:fileUploadSlotRecipe,hoverCard:hoverCardSlotRecipe,list:listSlotRecipe,menu:menuSlotRecipe,nativeSelect:nativeSelectSlotRecipe,numberInput:numberInputSlotRecipe,pinInput:pinInputSlotRecipe,popover:popoverSlotRecipe,progress:progressSlotRecipe,progressCircle:progressCircleSlotRecipe,radioCard:radioCardSlotRecipe,radioGroup:radioGroupSlotRecipe,ratingGroup:ratingGroupSlotRecipe,segmentGroup:segmentGroupSlotRecipe,select:selectSlotRecipe,slider:sliderSlotRecipe,stat:statSlotRecipe,steps:stepsSlotRecipe,switch:switchSlotRecipe,table:tableSlotRecipe,tabs:tabsSlotRecipe,tag:tagSlotRecipe,toast:toastSlotRecipe,tooltip:tooltipSlotRecipe,status:statusSlotRecipe,timeline:timelineSlotRecipe,colorPicker:colorPickerSlotRecipe,qrCode:qrCodeSlotRecipe},textStyles=defineTextStyles({"2xs":{value:{fontSize:"2xs",lineHeight:"0.75rem"}},xs:{value:{fontSize:"xs",lineHeight:"1rem"}},sm:{value:{fontSize:"sm",lineHeight:"1.25rem"}},md:{value:{fontSize:"md",lineHeight:"1.5rem"}},lg:{value:{fontSize:"lg",lineHeight:"1.75rem"}},xl:{value:{fontSize:"xl",lineHeight:"1.875rem"}},"2xl":{value:{fontSize:"2xl",lineHeight:"2rem"}},"3xl":{value:{fontSize:"3xl",lineHeight:"2.375rem"}},"4xl":{value:{fontSize:"4xl",lineHeight:"2.75rem",letterSpacing:"-0.025em"}},"5xl":{value:{fontSize:"5xl",lineHeight:"3.75rem",letterSpacing:"-0.025em"}},"6xl":{value:{fontSize:"6xl",lineHeight:"4.5rem",letterSpacing:"-0.025em"}},"7xl":{value:{fontSize:"7xl",lineHeight:"5.75rem",letterSpacing:"-0.025em"}},none:{value:{}}}),animations=defineTokens.animations({spin:{value:"spin 1s linear infinite"},ping:{value:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite"},pulse:{value:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},bounce:{value:"bounce 1s infinite"}}),aspectRatios=defineTokens.aspectRatios({square:{value:"1 / 1"},landscape:{value:"4 / 3"},portrait:{value:"3 / 4"},wide:{value:"16 / 9"},ultrawide:{value:"18 / 5"},golden:{value:"1.618 / 1"}}),blurs=defineTokens.blurs({none:{value:" "},sm:{value:"4px"},md:{value:"8px"},lg:{value:"12px"},xl:{value:"16px"},"2xl":{value:"24px"},"3xl":{value:"40px"},"4xl":{value:"64px"}}),borders=defineTokens.borders({xs:{value:"0.5px solid"},sm:{value:"1px solid"},md:{value:"2px solid"},lg:{value:"4px solid"},xl:{value:"8px solid"}}),colors=defineTokens.colors({transparent:{value:"transparent"},current:{value:"currentColor"},black:{value:"#09090B"},white:{value:"#FFFFFF"},whiteAlpha:{50:{value:"rgba(255, 255, 255, 0.04)"},100:{value:"rgba(255, 255, 255, 0.06)"},200:{value:"rgba(255, 255, 255, 0.08)"},300:{value:"rgba(255, 255, 255, 0.16)"},400:{value:"rgba(255, 255, 255, 0.24)"},500:{value:"rgba(255, 255, 255, 0.36)"},600:{value:"rgba(255, 255, 255, 0.48)"},700:{value:"rgba(255, 255, 255, 0.64)"},800:{value:"rgba(255, 255, 255, 0.80)"},900:{value:"rgba(255, 255, 255, 0.92)"},950:{value:"rgba(255, 255, 255, 0.95)"}},blackAlpha:{50:{value:"rgba(0, 0, 0, 0.04)"},100:{value:"rgba(0, 0, 0, 0.06)"},200:{value:"rgba(0, 0, 0, 0.08)"},300:{value:"rgba(0, 0, 0, 0.16)"},400:{value:"rgba(0, 0, 0, 0.24)"},500:{value:"rgba(0, 0, 0, 0.36)"},600:{value:"rgba(0, 0, 0, 0.48)"},700:{value:"rgba(0, 0, 0, 0.64)"},800:{value:"rgba(0, 0, 0, 0.80)"},900:{value:"rgba(0, 0, 0, 0.92)"},950:{value:"rgba(0, 0, 0, 0.95)"}},gray:{50:{value:"#fafafa"},100:{value:"#f4f4f5"},200:{value:"#e4e4e7"},300:{value:"#d4d4d8"},400:{value:"#a1a1aa"},500:{value:"#71717a"},600:{value:"#52525b"},700:{value:"#3f3f46"},800:{value:"#27272a"},900:{value:"#18181b"},950:{value:"#111111"}},red:{50:{value:"#fef2f2"},100:{value:"#fee2e2"},200:{value:"#fecaca"},300:{value:"#fca5a5"},400:{value:"#f87171"},500:{value:"#ef4444"},600:{value:"#dc2626"},700:{value:"#991919"},800:{value:"#511111"},900:{value:"#300c0c"},950:{value:"#1f0808"}},orange:{50:{value:"#fff7ed"},100:{value:"#ffedd5"},200:{value:"#fed7aa"},300:{value:"#fdba74"},400:{value:"#fb923c"},500:{value:"#f97316"},600:{value:"#ea580c"},700:{value:"#92310a"},800:{value:"#6c2710"},900:{value:"#3b1106"},950:{value:"#220a04"}},yellow:{50:{value:"#fefce8"},100:{value:"#fef9c3"},200:{value:"#fef08a"},300:{value:"#fde047"},400:{value:"#facc15"},500:{value:"#eab308"},600:{value:"#ca8a04"},700:{value:"#845209"},800:{value:"#713f12"},900:{value:"#422006"},950:{value:"#281304"}},green:{50:{value:"#f0fdf4"},100:{value:"#dcfce7"},200:{value:"#bbf7d0"},300:{value:"#86efac"},400:{value:"#4ade80"},500:{value:"#22c55e"},600:{value:"#16a34a"},700:{value:"#116932"},800:{value:"#124a28"},900:{value:"#042713"},950:{value:"#03190c"}},teal:{50:{value:"#f0fdfa"},100:{value:"#ccfbf1"},200:{value:"#99f6e4"},300:{value:"#5eead4"},400:{value:"#2dd4bf"},500:{value:"#14b8a6"},600:{value:"#0d9488"},700:{value:"#0c5d56"},800:{value:"#114240"},900:{value:"#032726"},950:{value:"#021716"}},blue:{50:{value:"#eff6ff"},100:{value:"#dbeafe"},200:{value:"#bfdbfe"},300:{value:"#a3cfff"},400:{value:"#60a5fa"},500:{value:"#3b82f6"},600:{value:"#2563eb"},700:{value:"#173da6"},800:{value:"#1a3478"},900:{value:"#14204a"},950:{value:"#0c142e"}},cyan:{50:{value:"#ecfeff"},100:{value:"#cffafe"},200:{value:"#a5f3fc"},300:{value:"#67e8f9"},400:{value:"#22d3ee"},500:{value:"#06b6d4"},600:{value:"#0891b2"},700:{value:"#0c5c72"},800:{value:"#134152"},900:{value:"#072a38"},950:{value:"#051b24"}},purple:{50:{value:"#faf5ff"},100:{value:"#f3e8ff"},200:{value:"#e9d5ff"},300:{value:"#d8b4fe"},400:{value:"#c084fc"},500:{value:"#a855f7"},600:{value:"#9333ea"},700:{value:"#641ba3"},800:{value:"#4a1772"},900:{value:"#2f0553"},950:{value:"#1a032e"}},pink:{50:{value:"#fdf2f8"},100:{value:"#fce7f3"},200:{value:"#fbcfe8"},300:{value:"#f9a8d4"},400:{value:"#f472b6"},500:{value:"#ec4899"},600:{value:"#db2777"},700:{value:"#a41752"},800:{value:"#6d0e34"},900:{value:"#45061f"},950:{value:"#2c0514"}}}),cursor=defineTokens.cursor({button:{value:"pointer"},checkbox:{value:"default"},disabled:{value:"not-allowed"},menuitem:{value:"default"},option:{value:"default"},radio:{value:"default"},slider:{value:"default"},switch:{value:"pointer"}}),durations=defineTokens.durations({fastest:{value:"50ms"},faster:{value:"100ms"},fast:{value:"150ms"},moderate:{value:"200ms"},slow:{value:"300ms"},slower:{value:"400ms"},slowest:{value:"500ms"}}),easings=defineTokens.easings({"ease-in":{value:"cubic-bezier(0.42, 0, 1, 1)"},"ease-out":{value:"cubic-bezier(0, 0, 0.58, 1)"},"ease-in-out":{value:"cubic-bezier(0.42, 0, 0.58, 1)"},"ease-in-smooth":{value:"cubic-bezier(0.32, 0.72, 0, 1)"}}),fontSizes=defineTokens.fontSizes({"2xs":{value:"0.625rem"},xs:{value:"0.75rem"},sm:{value:"0.875rem"},md:{value:"1rem"},lg:{value:"1.125rem"},xl:{value:"1.25rem"},"2xl":{value:"1.5rem"},"3xl":{value:"1.875rem"},"4xl":{value:"2.25rem"},"5xl":{value:"3rem"},"6xl":{value:"3.75rem"},"7xl":{value:"4.5rem"},"8xl":{value:"6rem"},"9xl":{value:"8rem"}}),fontWeights=defineTokens.fontWeights({thin:{value:"100"},extralight:{value:"200"},light:{value:"300"},normal:{value:"400"},medium:{value:"500"},semibold:{value:"600"},bold:{value:"700"},extrabold:{value:"800"},black:{value:"900"}}),fallback='-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fonts=defineTokens.fonts({heading:{value:`Inter, ${fallback}`},body:{value:`Inter, ${fallback}`},mono:{value:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'}}),keyframes=defineKeyframes({spin:{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},pulse:{"50%":{opacity:"0.5"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}},"bg-position":{from:{backgroundPosition:"var(--animate-from, 1rem) 0"},to:{backgroundPosition:"var(--animate-to, 0) 0"}},position:{from:{insetInlineStart:"var(--animate-from-x)",insetBlockStart:"var(--animate-from-y)"},to:{insetInlineStart:"var(--animate-to-x)",insetBlockStart:"var(--animate-to-y)"}},"circular-progress":{"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100%"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260%"}},"expand-height":{from:{height:"0"},to:{height:"var(--height)"}},"collapse-height":{from:{height:"var(--height)"},to:{height:"0"}},"expand-width":{from:{width:"0"},to:{width:"var(--width)"}},"collapse-width":{from:{height:"var(--width)"},to:{height:"0"}},"fade-in":{from:{opacity:0},to:{opacity:1}},"fade-out":{from:{opacity:1},to:{opacity:0}},"slide-from-left-full":{from:{translate:"-100% 0"},to:{translate:"0 0"}},"slide-from-right-full":{from:{translate:"100% 0"},to:{translate:"0 0"}},"slide-from-top-full":{from:{translate:"0 -100%"},to:{translate:"0 0"}},"slide-from-bottom-full":{from:{translate:"0 100%"},to:{translate:"0 0"}},"slide-to-left-full":{from:{translate:"0 0"},to:{translate:"-100% 0"}},"slide-to-right-full":{from:{translate:"0 0"},to:{translate:"100% 0"}},"slide-to-top-full":{from:{translate:"0 0"},to:{translate:"0 -100%"}},"slide-to-bottom-full":{from:{translate:"0 0"},to:{translate:"0 100%"}},"slide-from-top":{"0%":{translate:"0 -0.5rem"},to:{translate:"0"}},"slide-from-bottom":{"0%":{translate:"0 0.5rem"},to:{translate:"0"}},"slide-from-left":{"0%":{translate:"-0.5rem 0"},to:{translate:"0"}},"slide-from-right":{"0%":{translate:"0.5rem 0"},to:{translate:"0"}},"slide-to-top":{"0%":{translate:"0"},to:{translate:"0 -0.5rem"}},"slide-to-bottom":{"0%":{translate:"0"},to:{translate:"0 0.5rem"}},"slide-to-left":{"0%":{translate:"0"},to:{translate:"-0.5rem 0"}},"slide-to-right":{"0%":{translate:"0"},to:{translate:"0.5rem 0"}},"scale-in":{from:{scale:"0.95"},to:{scale:"1"}},"scale-out":{from:{scale:"1"},to:{scale:"0.95"}}}),letterSpacings=defineTokens.letterSpacings({tighter:{value:"-0.05em"},tight:{value:"-0.025em"},wide:{value:"0.025em"},wider:{value:"0.05em"},widest:{value:"0.1em"}}),lineHeights=defineTokens.lineHeights({shorter:{value:1.25},short:{value:1.375},moderate:{value:1.5},tall:{value:1.625},taller:{value:2}}),radii=defineTokens.radii({none:{value:"0"},"2xs":{value:"0.0625rem"},xs:{value:"0.125rem"},sm:{value:"0.25rem"},md:{value:"0.375rem"},lg:{value:"0.5rem"},xl:{value:"0.75rem"},"2xl":{value:"1rem"},"3xl":{value:"1.5rem"},"4xl":{value:"2rem"},full:{value:"9999px"}}),spacing=defineTokens.spacing({.5:{value:"0.125rem"},1:{value:"0.25rem"},1.5:{value:"0.375rem"},2:{value:"0.5rem"},2.5:{value:"0.625rem"},3:{value:"0.75rem"},3.5:{value:"0.875rem"},4:{value:"1rem"},4.5:{value:"1.125rem"},5:{value:"1.25rem"},6:{value:"1.5rem"},7:{value:"1.75rem"},8:{value:"2rem"},9:{value:"2.25rem"},10:{value:"2.5rem"},11:{value:"2.75rem"},12:{value:"3rem"},14:{value:"3.5rem"},16:{value:"4rem"},20:{value:"5rem"},24:{value:"6rem"},28:{value:"7rem"},32:{value:"8rem"},36:{value:"9rem"},40:{value:"10rem"},44:{value:"11rem"},48:{value:"12rem"},52:{value:"13rem"},56:{value:"14rem"},60:{value:"15rem"},64:{value:"16rem"},72:{value:"18rem"},80:{value:"20rem"},96:{value:"24rem"}}),largeSizes=defineTokens.sizes({"3xs":{value:"14rem"},"2xs":{value:"16rem"},xs:{value:"20rem"},sm:{value:"24rem"},md:{value:"28rem"},lg:{value:"32rem"},xl:{value:"36rem"},"2xl":{value:"42rem"},"3xl":{value:"48rem"},"4xl":{value:"56rem"},"5xl":{value:"64rem"},"6xl":{value:"72rem"},"7xl":{value:"80rem"},"8xl":{value:"90rem"}}),namedSizes=defineTokens.sizes({max:{value:"max-content"},min:{value:"min-content"},fit:{value:"fit-content"},prose:{value:"60ch"},full:{value:"100%"},dvh:{value:"100dvh"},svh:{value:"100svh"},lvh:{value:"100lvh"},dvw:{value:"100dvw"},svw:{value:"100svw"},lvw:{value:"100lvw"},vw:{value:"100vw"},vh:{value:"100vh"}}),fractionalSizes=defineTokens.sizes({"1/2":{value:"50%"},"1/3":{value:"33.333333%"},"2/3":{value:"66.666667%"},"1/4":{value:"25%"},"3/4":{value:"75%"},"1/5":{value:"20%"},"2/5":{value:"40%"},"3/5":{value:"60%"},"4/5":{value:"80%"},"1/6":{value:"16.666667%"},"2/6":{value:"33.333333%"},"3/6":{value:"50%"},"4/6":{value:"66.666667%"},"5/6":{value:"83.333333%"},"1/12":{value:"8.333333%"},"2/12":{value:"16.666667%"},"3/12":{value:"25%"},"4/12":{value:"33.333333%"},"5/12":{value:"41.666667%"},"6/12":{value:"50%"},"7/12":{value:"58.333333%"},"8/12":{value:"66.666667%"},"9/12":{value:"75%"},"10/12":{value:"83.333333%"},"11/12":{value:"91.666667%"}}),sizes=defineTokens.sizes({...largeSizes,...spacing,...fractionalSizes,...namedSizes}),zIndices=defineTokens.zIndex({hide:{value:-1},base:{value:0},docked:{value:10},dropdown:{value:1e3},sticky:{value:1100},banner:{value:1200},overlay:{value:1300},modal:{value:1400},popover:{value:1500},skipNav:{value:1600},toast:{value:1700},tooltip:{value:1800},max:{value:2147483647}}),defaultThemeConfig=defineConfig({preflight:!0,cssVarsPrefix:"chakra",cssVarsRoot:":where(html, .chakra-theme)",globalCss,theme:{breakpoints,keyframes,tokens:{aspectRatios,animations,blurs,borders,colors,durations,easings,fonts,fontSizes,fontWeights,letterSpacings,lineHeights,radii,spacing,sizes,zIndex:zIndices,cursor},semanticTokens:{colors:semanticColors,shadows:semanticShadows,radii:semanticRadii},recipes,slotRecipes,textStyles,layerStyles,animationStyles}}),defaultConfig=mergeConfigs(defaultBaseConfig,defaultThemeConfig),defaultSystem=createSystem(defaultConfig);function useSlotRecipe(_e){const{key:_,recipe:et}=_e,tt=useChakraContext();return reactExports.useMemo(()=>{const nt=et||(_!=null?tt.getSlotRecipe(_):{});return tt.sva(structuredClone(nt))},[_,et,tt])}const upperFirst=_e=>_e.charAt(0).toUpperCase()+_e.slice(1),createSlotRecipeContext=_e=>{const{key:_,recipe:et}=_e,tt=upperFirst(_||et.className||"Component"),[nt,it]=createContext$2({name:`${tt}StylesContext`,errorMessage:`use${tt}Styles returned is 'undefined'. Seems you forgot to wrap the components in "<${tt}.Root />" `}),[at,ot]=createContext$2({name:`${tt}ClassNameContext`,errorMessage:`use${tt}ClassNames returned is 'undefined'. Seems you forgot to wrap the components in "<${tt}.Root />" `,strict:!1}),[st,dt]=createContext$2({strict:!1,name:`${tt}PropsContext`,providerName:`${tt}PropsContext`,defaultValue:{}});function ht(gt){const{unstyled:mt,...vt}=gt,yt=useSlotRecipe({key:_,recipe:vt.recipe||et}),[bt,_t]=yt.splitVariantProps(vt);return{styles:mt?EMPTY_SLOT_STYLES:yt(bt),classNames:yt.classNameMap,props:_t}}function ct(gt,mt={}){const{defaultProps:vt}=mt,yt=bt=>{const _t=mergeProps$1(vt,dt(),bt),{styles:xt,classNames:St,props:Tt}=ht(_t);return jsxRuntimeExports.jsx(nt,{value:xt,children:jsxRuntimeExports.jsx(at,{value:St,children:jsxRuntimeExports.jsx(gt,{...Tt})})})};return yt.displayName=gt.displayName||gt.name,yt}return{StylesProvider:nt,ClassNamesProvider:at,PropsProvider:st,usePropsContext:dt,useRecipeResult:ht,withProvider:(gt,mt,vt)=>{const{defaultProps:yt,...bt}=vt??{},_t=chakra$1(gt,{},bt),xt=reactExports.forwardRef((St,Tt)=>{var It;const wt=mergeProps$1(yt??{},dt(),St),{styles:Ct,props:Et,classNames:At}=ht(wt),Pt=At[mt],Rt=jsxRuntimeExports.jsx(nt,{value:Ct,children:jsxRuntimeExports.jsx(at,{value:At,children:jsxRuntimeExports.jsx(_t,{ref:Tt,...Et,css:[Ct[mt],wt.css],className:cx$1(wt.className,Pt)})})});return((It=vt==null?void 0:vt.wrapElement)==null?void 0:It.call(vt,Rt,wt))??Rt});return xt.displayName=gt.displayName||gt.name,xt},withContext:(gt,mt,vt)=>{const yt=chakra$1(gt,{},vt),bt=reactExports.forwardRef((_t,xt)=>{const St=it(),Tt=ot(),wt=Tt==null?void 0:Tt[mt];return jsxRuntimeExports.jsx(yt,{..._t,css:[mt?St[mt]:void 0,_t.css],ref:xt,className:cx$1(_t.className,wt)})});return bt.displayName=gt.displayName||gt.name,bt},withRootProvider:ct,useStyles:it,useClassNames:ot}},CheckIcon=_e=>jsxRuntimeExports.jsx(chakra$1.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",..._e,children:jsxRuntimeExports.jsx("path",{d:"M20 6 9 17l-5-5"})}),ChevronUpIcon=_e=>jsxRuntimeExports.jsx(chakra$1.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",..._e,children:jsxRuntimeExports.jsx("path",{d:"m18 15-6-6-6 6"})}),ChevronDownIcon=_e=>jsxRuntimeExports.jsx(chakra$1.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",..._e,children:jsxRuntimeExports.jsx("path",{d:"m6 9 6 6 6-6"})}),CheckCircleIcon=_e=>jsxRuntimeExports.jsx(chakra$1.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",..._e,children:jsxRuntimeExports.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11.0026 16L6.75999 11.7574L8.17421 10.3431L11.0026 13.1716L16.6595 7.51472L18.0737 8.92893L11.0026 16Z"})}),WarningIcon=_e=>jsxRuntimeExports.jsx(chakra$1.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",..._e,children:jsxRuntimeExports.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 15H13V17H11V15ZM11 7H13V13H11V7Z"})}),CloseIcon=_e=>jsxRuntimeExports.jsx(chakra$1.svg,{viewBox:"0 0 24 24",fill:"currentColor",..._e,children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858L6.70711 5.29289C6.31658 4.90237 5.68342 4.90237 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.29289 17.2929C4.90237 17.6834 4.90237 18.3166 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711Z"})}),{withProvider:withProvider$7,withContext:withContext$c,useStyles:useAvatarStyles,PropsProvider:PropsProvider$d}=createSlotRecipeContext({key:"avatar"});withProvider$7(AvatarRootProvider,"root",{forwardAsChild:!0});const AvatarRoot=withProvider$7(AvatarRoot$1,"root",{forwardAsChild:!0}),AvatarPropsProvider=PropsProvider$d,AvatarFallback$1=withContext$c(AvatarFallback$2,"fallback",{forwardAsChild:!0}),AvatarImage=withContext$c(AvatarImage$1,"image",{forwardAsChild:!0,defaultProps:{draggable:"false",referrerPolicy:"no-referrer"}}),AvatarIcon=reactExports.forwardRef(function(_,et){return jsxRuntimeExports.jsx(chakra$1.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1.2em",width:"1.2em",ref:et,..._,children:jsxRuntimeExports.jsx("path",{d:"M20 22H18V20C18 18.3431 16.6569 17 15 17H9C7.34315 17 6 18.3431 6 20V22H4V20C4 17.2386 6.23858 15 9 15H15C17.7614 15 20 17.2386 20 20V22ZM12 13C8.68629 13 6 10.3137 6 7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7C18 10.3137 15.3137 13 12 13ZM12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z"})})}),Box=chakra$1("div");Box.displayName="Box";const Span=chakra$1("span"),AbsoluteCenter=chakra$1("div",{base:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},variants:{axis:{horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}}},defaultVariants:{axis:"both"}});AbsoluteCenter.displayName="AbsoluteCenter";const{withContext:withContext$b,PropsProvider:PropsProvider$c}=createRecipeContext({key:"spinner"}),Spinner=withContext$b("span"),Loader$2=reactExports.forwardRef(function(_,et){const{spinner:tt=jsxRuntimeExports.jsx(Spinner,{size:"inherit",borderWidth:"0.125em",color:"inherit"}),spinnerPlacement:nt="start",children:it,text:at,visible:ot=!0,...st}=_;return ot?at?jsxRuntimeExports.jsxs(Span,{ref:et,display:"contents",...st,children:[nt==="start"&&tt,at,nt==="end"&&tt]}):tt?jsxRuntimeExports.jsxs(Span,{ref:et,display:"contents",...st,children:[jsxRuntimeExports.jsx(AbsoluteCenter,{display:"inline-flex",children:tt}),jsxRuntimeExports.jsx(Span,{opacity:0,children:it})]}):jsxRuntimeExports.jsx(Span,{ref:et,display:"contents",...st,children:it}):it}),{useRecipeResult:useRecipeResult$1,PropsProvider:PropsProvider$b,usePropsContext}=createRecipeContext({key:"button"}),Button$1=reactExports.forwardRef(function(_,et){const tt=usePropsContext(),nt=reactExports.useMemo(()=>mergeProps$1(tt,_),[tt,_]),it=useRecipeResult$1(nt),{loading:at,loadingText:ot,children:st,spinner:dt,spinnerPlacement:ht,...ct}=it.props;return jsxRuntimeExports.jsx(chakra$1.button,{type:"button",ref:et,...ct,disabled:at||ct.disabled,className:cx$1(it.className,nt.className),css:[it.styles,nt.css],children:!nt.asChild&&at?jsxRuntimeExports.jsx(Loader$2,{spinner:dt,text:ot,spinnerPlacement:ht,children:st}):st})}),IconButton=reactExports.forwardRef(function(_,et){return jsxRuntimeExports.jsx(Button$1,{px:"0",py:"0",_icon:{fontSize:"1.2em"},ref:et,..._})}),dataAttr=_e=>_e?"":void 0,StyledGroup=chakra$1("div",{base:{display:"inline-flex",gap:"0.5rem",isolation:"isolate",position:"relative","& [data-group-item]":{_focusVisible:{zIndex:1}}},variants:{orientation:{horizontal:{flexDirection:"row"},vertical:{flexDirection:"column"}},attached:{true:{gap:"0!"}},grow:{true:{display:"flex","& > *":{flex:1}}},stacking:{"first-on-top":{"& > [data-group-item]":{zIndex:"calc(var(--group-count) - var(--group-index))"}},"last-on-top":{"& > [data-group-item]":{zIndex:"var(--group-index)"}}}},compoundVariants:[{orientation:"horizontal",attached:!0,css:{"& > *[data-first]":{borderEndRadius:"0!",marginEnd:"-1px"},"& > *[data-between]":{borderRadius:"0!",marginEnd:"-1px"},"& > *[data-last]":{borderStartRadius:"0!"}}},{orientation:"vertical",attached:!0,css:{"& > *[data-first]":{borderBottomRadius:"0!",marginBottom:"-1px"},"& > *[data-between]":{borderRadius:"0!",marginBottom:"-1px"},"& > *[data-last]":{borderTopRadius:"0!"}}}],defaultVariants:{orientation:"horizontal"}}),Group$4=reactExports.memo(reactExports.forwardRef(function(_,et){const{align:tt="center",justify:nt="flex-start",children:it,wrap:at,...ot}=_,st=reactExports.Children.count(it),dt=reactExports.useMemo(()=>reactExports.Children.toArray(it).filter(reactExports.isValidElement).map((ct,ut)=>{const ft=ct.props;return reactExports.cloneElement(ct,{...ft,"data-group-item":"","data-first":dataAttr(ut===0),"data-last":dataAttr(ut===st-1),"data-between":dataAttr(ut>0&&ut<st-1),style:{"--group-count":st,"--group-index":ut,...(ft==null?void 0:ft.style)??{}}})}),[it,st]);return jsxRuntimeExports.jsx(StyledGroup,{ref:et,alignItems:tt,justifyContent:nt,flexWrap:at,...ot,children:dt})})),[ClipboardProvider,useClipboardContext]=createContext$1({name:"ClipboardContext",hookName:"useClipboardContext",providerName:"<ClipboardProvider />"}),ClipboardControl=reactExports.forwardRef((_e,_)=>{const et=useClipboardContext(),tt=mergeProps(et.getControlProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});ClipboardControl.displayName="ClipboardControl";const ClipboardIndicator$1=reactExports.forwardRef((_e,_)=>{const{children:et,copied:tt,...nt}=_e,it=useClipboardContext(),at=mergeProps(it.getIndicatorProps({copied:it.copied}),nt);return jsxRuntimeExports.jsx(ark.div,{...at,ref:_,children:it.copied?tt:et})});ClipboardIndicator$1.displayName="ClipboardIndicator";const ClipboardInput$1=reactExports.forwardRef((_e,_)=>{const et=useClipboardContext(),tt=mergeProps(et.getInputProps(),_e);return jsxRuntimeExports.jsx(ark.input,{...tt,ref:_})});ClipboardInput$1.displayName="ClipboardInput";const ClipboardLabel$1=reactExports.forwardRef((_e,_)=>{const et=useClipboardContext(),tt=mergeProps(et.getLabelProps(),_e);return jsxRuntimeExports.jsx(ark.label,{...tt,ref:_})});ClipboardLabel$1.displayName="ClipboardLabel";var anatomy$2=createAnatomy("clipboard").parts("root","control","trigger","indicator","input","label"),parts$2=anatomy$2.build(),dom$2=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`clip:${_e.id}`},getInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.input)??`clip:${_e.id}:input`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`clip:${_e.id}:label`},getInputEl:_e=>dom$2.getById(_e,dom$2.getInputId(_e)),writeToClipboard:_e=>copyText(dom$2.getDoc(_e),_e.value)});function createNode(_e,_){const et=_e.createElement("pre");return Object.assign(et.style,{width:"1px",height:"1px",position:"fixed",top:"5px"}),et.textContent=_,et}function copyNode(_e){const et=getWindow$1(_e).getSelection();if(et==null)return Promise.reject(new Error);et.removeAllRanges();const tt=_e.ownerDocument,nt=tt.createRange();return nt.selectNodeContents(_e),et.addRange(nt),tt.execCommand("copy"),et.removeAllRanges(),Promise.resolve()}function copyText(_e,_){var nt;const et=_e.defaultView||window;if(((nt=et.navigator.clipboard)==null?void 0:nt.writeText)!==void 0)return et.navigator.clipboard.writeText(_);if(!_e.body)return Promise.reject(new Error);const tt=createNode(_e,_);return _e.body.appendChild(tt),copyNode(tt),_e.body.removeChild(tt),Promise.resolve()}function connect$3(_e,_,et){const tt=_e.matches("copied");return{copied:tt,value:_e.context.value,setValue(nt){_({type:"VALUE.SET",value:nt})},copy(){_({type:"COPY"})},getRootProps(){return et.element({...parts$2.root.attrs,"data-copied":dataAttr$1(tt),id:dom$2.getRootId(_e.context)})},getLabelProps(){return et.label({...parts$2.label.attrs,htmlFor:dom$2.getInputId(_e.context),"data-copied":dataAttr$1(tt),id:dom$2.getLabelId(_e.context)})},getControlProps(){return et.element({...parts$2.control.attrs,"data-copied":dataAttr$1(tt)})},getInputProps(){return et.input({...parts$2.input.attrs,defaultValue:_e.context.value,"data-copied":dataAttr$1(tt),readOnly:!0,"data-readonly":"true",id:dom$2.getInputId(_e.context),onFocus(nt){nt.currentTarget.select()},onCopy(){_({type:"INPUT.COPY"})}})},getTriggerProps(){return et.button({...parts$2.trigger.attrs,type:"button","aria-label":tt?"Copied to clipboard":"Copy to clipboard","data-copied":dataAttr$1(tt),onClick(){_({type:"COPY"})}})},getIndicatorProps(nt){return et.element({...parts$2.indicator.attrs,hidden:nt.copied!==tt})}}}function machine$1(_e){const _=compact$2(_e);return createMachine({id:"clipboard",initial:"idle",context:{value:"",timeout:3e3,..._},watch:{value:["syncInputElement"]},on:{"VALUE.SET":{actions:["setValue"]},COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]}},states:{idle:{on:{"INPUT.COPY":{target:"copied",actions:["invokeOnCopy"]}}},copied:{after:{COPY_TIMEOUT:"idle"},on:{COPY:{target:"copied",actions:["copyToClipboard","invokeOnCopy"]},"INPUT.COPY":{actions:["invokeOnCopy"]}}}}},{actions:{setValue(et,tt){et.value=tt.value},copyToClipboard(et){dom$2.writeToClipboard(et)},invokeOnCopy(et){var tt;(tt=et.onStatusChange)==null||tt.call(et,{copied:!0})},syncInputElement(et){dom$2.setValue(dom$2.getInputEl(et),et.value)}},delays:{COPY_TIMEOUT:et=>et.timeout}})}createProps$1()(["getRootNode","id","ids","value","timeout","onStatusChange"]);createProps$1()(["copied"]);const useClipboard=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),et={id:reactExports.useId(),getRootNode:_,..._e},tt={...et},[nt,it]=useMachine(machine$1(et),{context:tt});return connect$3(nt,it,normalizeProps)},ClipboardRoot$2=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["id","ids","onStatusChange","timeout","value"]),nt=useClipboard(et),it=mergeProps(nt.getRootProps(),tt);return jsxRuntimeExports.jsx(ClipboardProvider,{value:nt,children:jsxRuntimeExports.jsx(ark.div,{ref:_,...it})})});ClipboardRoot$2.displayName="ClipboardRoot";const ClipboardRootProvider=reactExports.forwardRef((_e,_)=>{const[{value:et},tt]=createSplitProps()(_e,["value"]),nt=mergeProps(et.getRootProps(),tt);return jsxRuntimeExports.jsx(ClipboardProvider,{value:et,children:jsxRuntimeExports.jsx(ark.div,{ref:_,...nt})})});ClipboardRootProvider.displayName="ClipboardRootProvider";const ClipboardTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useClipboardContext(),tt=mergeProps(et.getTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});ClipboardTrigger$1.displayName="ClipboardTrigger";const ClipboardValueText=reactExports.forwardRef((_e,_)=>{const et=useClipboardContext();return jsxRuntimeExports.jsx(ark.span,{..._e,ref:_,children:_e.children||et.value})});ClipboardValueText.displayName="ClipboardValueText";const{withProvider:withProvider$6,withContext:withContext$a,useStyles:useClipboardStyles,PropsProvider:PropsProvider$a}=createSlotRecipeContext({key:"clipboard"});withProvider$6(ClipboardRootProvider,"root",{forwardAsChild:!0});const ClipboardRoot$1=withProvider$6(ClipboardRoot$2,"root",{forwardAsChild:!0}),ClipboardTrigger=withContext$a(ClipboardTrigger$1,"trigger",{forwardAsChild:!0});withContext$a(ClipboardControl,"control",{forwardAsChild:!0});const ClipboardIndicator=withContext$a(ClipboardIndicator$1,"indicator",{forwardAsChild:!0}),ClipboardInput=withContext$a(ClipboardInput$1,"input",{forwardAsChild:!0}),ClipboardLabel=withContext$a(ClipboardLabel$1,"label",{forwardAsChild:!0});withContext$a(ClipboardValueText,"valueText",{forwardAsChild:!0});const{withRootProvider,withContext:withContext$9,useStyles:useDrawerStyles,PropsProvider:PropsProvider$9}=createSlotRecipeContext({key:"drawer"});withRootProvider(DialogRootProvider,{defaultProps:{unmountOnExit:!0,lazyMount:!0}});const DrawerRoot$1=withRootProvider(DialogRoot,{defaultProps:{unmountOnExit:!0,lazyMount:!0}}),DrawerTrigger$1=withContext$9(DialogTrigger,"trigger",{forwardAsChild:!0}),DrawerPositioner=withContext$9(DialogPositioner,"positioner",{forwardAsChild:!0}),DrawerContent$1=withContext$9(DialogContent,"content",{forwardAsChild:!0});withContext$9(DialogDescription,"description",{forwardAsChild:!0});const DrawerTitle$1=withContext$9(DialogTitle,"title",{forwardAsChild:!0}),DrawerCloseTrigger$1=withContext$9(DialogCloseTrigger,"closeTrigger",{forwardAsChild:!0}),DrawerActionTrigger$1=reactExports.forwardRef(function(_,et){const tt=useDialogContext();return jsxRuntimeExports.jsx(chakra$1.button,{..._,ref:et,onClick:()=>tt.setOpen(!1)})}),DrawerBackdrop$1=withContext$9(DialogBackdrop,"backdrop",{forwardAsChild:!0}),DrawerBody$1=withContext$9("div","body"),DrawerFooter$1=withContext$9("div","footer"),DrawerHeader$1=withContext$9("div","header"),{useRecipeResult,PropsProvider:PropsProvider$8}=createRecipeContext({key:"icon"}),Icon=reactExports.forwardRef(function(_,et){const{styles:tt,className:nt,props:it}=useRecipeResult({asChild:!_.as,..._});return jsxRuntimeExports.jsx(chakra$1.svg,{ref:et,focusable:!1,"aria-hidden":"true",...it,css:[tt,_.css],className:cx$1(nt,_.className)})});function createIcon$1(_e){const{viewBox:_="0 0 24 24",d:et,displayName:tt,defaultProps:nt={}}=_e,it=reactExports.Children.toArray(_e.path),at=reactExports.forwardRef((ot,st)=>jsxRuntimeExports.jsx(Icon,{ref:st,asChild:!1,viewBox:_,...nt,...ot,children:it.length?it:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:et})}));return at.displayName=tt,at}const{withProvider:withProvider$5,withContext:withContext$8,useStyles:useFieldStyles,useClassNames,PropsProvider:PropsProvider$7}=createSlotRecipeContext({key:"field"}),FieldRoot=withProvider$5(FieldRoot$1,"root",{forwardAsChild:!0}),FieldLabel=withContext$8(FieldLabel$1,"label",{forwardAsChild:!0}),FieldHelperText=withContext$8(FieldHelperText$1,"helperText",{forwardAsChild:!0}),FieldErrorText=withContext$8(FieldErrorText$1,"errorText",{forwardAsChild:!0});createIcon$1({d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"});const FieldRequiredIndicator=reactExports.forwardRef(function(_,et){const{fallback:tt,children:nt="*",...it}=_,at=useFieldContext(),ot=useClassNames(),st=useFieldStyles();return at!=null&&at.required?jsxRuntimeExports.jsx(chakra$1.span,{ref:et,"aria-hidden":"true",...it,className:cx$1(ot.requiredIndicator,_.className),css:[st.requiredIndicator,_.css],children:nt}):tt}),Flex=reactExports.forwardRef(function(_,et){const{direction:tt,align:nt,justify:it,wrap:at,basis:ot,grow:st,shrink:dt,inline:ht,...ct}=_;return jsxRuntimeExports.jsx(chakra$1.div,{ref:et,...ct,css:{display:ht?"inline-flex":"flex",flexDirection:tt,alignItems:nt,justifyContent:it,flexWrap:at,flexBasis:ot,flexGrow:st,flexShrink:dt,..._.css}})}),Image$1=reactExports.forwardRef(function(_,et){const{align:tt,fit:nt="cover",...it}=_;return jsxRuntimeExports.jsx(chakra$1.img,{ref:et,objectFit:nt,objectPosition:tt,className:cx$1("chakra-image",_.className),...it})}),{withContext:withContext$7,PropsProvider:PropsProvider$6}=createRecipeContext({key:"input"}),Input=withContext$7(FieldInput),InputElement=chakra$1("div",{base:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",zIndex:2,color:"fg.subtle",height:"full",fontSize:"sm",px:"3"},variants:{placement:{start:{insetInlineStart:"0"},end:{insetInlineEnd:"0"}}}}),{withProvider:withProvider$4,withContext:withContext$6,useStyles:useNumberInputStyles,PropsProvider:PropsProvider$5}=createSlotRecipeContext({key:"numberInput"});withProvider$4(NumberInputRootProvider,"root",{forwardAsChild:!0});const NumberInputRoot=withProvider$4(NumberInputRoot$1,"root",{forwardAsChild:!0}),NumberInputControl=withContext$6(NumberInputControl$1,"control",{forwardAsChild:!0});withContext$6(NumberInputLabel,"label",{forwardAsChild:!0});const NumberInputInput=withContext$6(NumberInputInput$1,"input",{forwardAsChild:!0}),NumberInputIncrementTrigger=withContext$6(NumberInputIncrementTrigger$1,"incrementTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(ChevronUpIcon,{})}}),NumberInputDecrementTrigger=withContext$6(NumberInputDecrementTrigger$1,"decrementTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(ChevronDownIcon,{})}});withContext$6(NumberInputScrubber,"scrubber",{forwardAsChild:!0});withContext$6(NumberInputValueText,"valueText",{forwardAsChild:!0});const Portal=_e=>{var st;const{children:_,disabled:et}=_e,[tt,nt]=reactExports.useState((st=_e.container)==null?void 0:st.current),it=reactExports.useSyncExternalStore(subscribe,()=>!1,()=>!0),{getRootNode:at}=useEnvironmentContext();if(reactExports.useEffect(()=>{nt(()=>{var dt;return(dt=_e.container)==null?void 0:dt.current})},[_e.container]),it||et)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_});const ot=tt??getPortalNode(at);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:reactExports.Children.map(_,dt=>reactDomExports.createPortal(dt,ot))})},getPortalNode=_e=>{const _=_e==null?void 0:_e(),et=_.getRootNode();return isShadowRoot$1(et)?et:getDocument(_).body},subscribe=()=>()=>{},{withProvider:withProvider$3,withContext:withContext$5,useStyles:useSelectStyles,PropsProvider:PropsProvider$4}=createSlotRecipeContext({key:"select"});withProvider$3(SelectRootProvider,"root",{forwardAsChild:!0});const SelectRoot$1=withProvider$3(SelectRoot$2,"root",{forwardAsChild:!0}),SelectTrigger$1=withContext$5(SelectTrigger$2,"trigger",{forwardAsChild:!0}),SelectPositioner=withContext$5(SelectPositioner$1,"positioner",{forwardAsChild:!0}),SelectContent$1=withContext$5(SelectContent$2,"content",{forwardAsChild:!0}),SelectValueText$1=withContext$5(SelectValueText$2,"valueText",{forwardAsChild:!0}),SelectClearTrigger$1=withContext$5(SelectClearTrigger$2,"clearTrigger",{forwardAsChild:!0}),SelectItemGroup=withContext$5(SelectItemGroup$1,"itemGroup",{forwardAsChild:!0}),SelectItemGroupLabel=withContext$5(SelectItemGroupLabel$1,"itemGroupLabel",{forwardAsChild:!0}),SelectItem$1=withContext$5(SelectItem$2,"item",{forwardAsChild:!0});withContext$5(SelectItemText,"itemText",{forwardAsChild:!0});const SelectItemIndicator=withContext$5(SelectItemIndicator$1,"itemIndicator",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(CheckIcon,{})}}),SelectIndicatorGroup=withContext$5("div","indicatorGroup"),SelectIndicator=withContext$5(SelectIndicator$1,"indicator",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(ChevronDownIcon,{})}}),SelectControl=withContext$5(SelectControl$1,"control",{forwardAsChild:!0});withContext$5(SelectLabel,"label",{forwardAsChild:!0});const SelectContext=SelectContext$1,SelectHiddenSelect=SelectHiddenSelect$1;function getSeparatorStyles(_e){const{gap:_,direction:et}=_e,tt={column:{marginY:_,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},"column-reverse":{marginY:_,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},row:{marginX:_,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0},"row-reverse":{marginX:_,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0}};return{"&":mapObject(et,nt=>tt[nt])}}function getValidChildren(_e){return reactExports.Children.toArray(_e).filter(_=>reactExports.isValidElement(_))}const Stack=reactExports.forwardRef(function(_,et){const{direction:tt="column",align:nt,justify:it,gap:at="0.5rem",wrap:ot,children:st,separator:dt,className:ht,...ct}=_,ut=reactExports.useMemo(()=>getSeparatorStyles({gap:at,direction:tt}),[at,tt]),ft=reactExports.useMemo(()=>dt?getValidChildren(st).map((gt,mt,vt)=>{const yt=typeof gt.key<"u"?gt.key:mt,bt=reactExports.cloneElement(dt,{css:[ut,dt.props.css]});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[gt,mt===vt.length-1?null:bt]},yt)}):st,[st,dt,ut]);return jsxRuntimeExports.jsx(chakra$1.div,{ref:et,display:"flex",alignItems:nt,justifyContent:it,flexDirection:tt,flexWrap:ot,gap:dt?void 0:at,className:cx$1("chakra-stack",ht),...ct,children:ft})}),HStack=reactExports.forwardRef(function(_,et){return jsxRuntimeExports.jsx(Stack,{align:"center",..._,direction:"row",ref:et})}),VStack=reactExports.forwardRef(function(_,et){return jsxRuntimeExports.jsx(Stack,{align:"center",..._,direction:"column",ref:et})}),{withProvider:withProvider$2,withContext:withContext$4,useStyles:useSwitchStyles,PropsProvider:PropsProvider$3}=createSlotRecipeContext({key:"switch"});withProvider$2(SwitchRootProvider,"root",{forwardAsChild:!0});const SwitchRoot=withProvider$2(SwitchRoot$1,"root",{forwardAsChild:!0}),SwitchLabel=withContext$4(SwitchLabel$1,"label",{forwardAsChild:!0}),SwitchControl=withContext$4(SwitchControl$1,"control",{forwardAsChild:!0}),SwitchThumb=withContext$4(SwitchThumb$1,"thumb",{forwardAsChild:!0}),SwitchIndicator=reactExports.forwardRef(function(_,et){const tt=useSwitchContext(),nt=useSwitchStyles(),{fallback:it,children:at,...ot}=_;return jsxRuntimeExports.jsx(chakra$1.span,{ref:et,"data-checked":dataAttr(tt.checked),...ot,css:[nt.indicator,_.css],children:tt.checked?at:it})}),SwitchThumbIndicator=reactExports.forwardRef(function(_,et){const tt=useSwitchContext(),{fallback:nt,children:it,...at}=_;return jsxRuntimeExports.jsx(chakra$1.span,{ref:et,"data-checked":dataAttr(tt.checked),...at,children:tt.checked?it:nt})}),SwitchHiddenInput=SwitchHiddenInput$1;function useDebounce(_e,_){const[et,tt]=reactExports.useState(_e);return reactExports.useEffect(()=>{const nt=setTimeout(()=>{tt(_e)},_);return()=>{clearTimeout(nt)}},[_e,_]),et}const[TabsProvider,useTabsContext]=createContext$1({name:"TabsContext",hookName:"useTabsContext",providerName:"<TabsProvider />"}),TabContent=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["value"]),nt=useTabsContext(),it=useRenderStrategyPropsContext(),at=usePresence({...it,present:useDebounce(nt.value===_e.value,0),immediate:!0}),ot=mergeProps(nt.getContentProps(et),at.getPresenceProps(),tt);return jsxRuntimeExports.jsx(PresenceProvider,{value:at,children:at.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...ot,ref:composeRefs(at.ref,_)})})});TabContent.displayName="TabContent";const TabIndicator=reactExports.forwardRef((_e,_)=>{const et=useTabsContext(),tt=mergeProps(et.getIndicatorProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});TabIndicator.displayName="TabIndicator";const TabList=reactExports.forwardRef((_e,_)=>{const et=useTabsContext(),tt=mergeProps(et.getListProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});TabList.displayName="TabList";const TabTrigger=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["disabled","value"]),nt=useTabsContext(),it=mergeProps(nt.getTriggerProps(et),tt);return jsxRuntimeExports.jsx(ark.button,{...it,ref:_})});TabTrigger.displayName="TabTrigger";var anatomy$1=createAnatomy("tabs").parts("root","list","trigger","content","indicator"),parts$1=anatomy$1.build(),dom$1=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`tabs:${_e.id}`},getListId:_e=>{var _;return((_=_e.ids)==null?void 0:_.list)??`tabs:${_e.id}:list`},getContentId:(_e,_)=>{var et;return((et=_e.ids)==null?void 0:et.content)??`tabs:${_e.id}:content-${_}`},getTriggerId:(_e,_)=>{var et;return((et=_e.ids)==null?void 0:et.trigger)??`tabs:${_e.id}:trigger-${_}`},getIndicatorId:_e=>{var _;return((_=_e.ids)==null?void 0:_.indicator)??`tabs:${_e.id}:indicator`},getListEl:_e=>dom$1.getById(_e,dom$1.getListId(_e)),getContentEl:(_e,_)=>dom$1.getById(_e,dom$1.getContentId(_e,_)),getTriggerEl:(_e,_)=>dom$1.getById(_e,dom$1.getTriggerId(_e,_)),getIndicatorEl:_e=>dom$1.getById(_e,dom$1.getIndicatorId(_e)),getElements:_e=>{const et=`[role=tab][data-ownedby='${CSS.escape(dom$1.getListId(_e))}']:not([disabled])`;return queryAll(dom$1.getListEl(_e),et)},getFirstTriggerEl:_e=>first(dom$1.getElements(_e)),getLastTriggerEl:_e=>last(dom$1.getElements(_e)),getNextTriggerEl:(_e,_)=>nextById(dom$1.getElements(_e),dom$1.getTriggerId(_e,_),_e.loopFocus),getPrevTriggerEl:(_e,_)=>prevById(dom$1.getElements(_e),dom$1.getTriggerId(_e,_),_e.loopFocus),getSelectedContentEl:_e=>{if(_e.value)return dom$1.getContentEl(_e,_e.value)},getSelectedTriggerEl:_e=>{if(_e.value)return dom$1.getTriggerEl(_e,_e.value)},getOffsetRect:_e=>({left:(_e==null?void 0:_e.offsetLeft)??0,top:(_e==null?void 0:_e.offsetTop)??0,width:(_e==null?void 0:_e.offsetWidth)??0,height:(_e==null?void 0:_e.offsetHeight)??0}),getRectById:(_e,_)=>{const et=itemById(dom$1.getElements(_e),dom$1.getTriggerId(_e,_));return dom$1.resolveRect(dom$1.getOffsetRect(et))},resolveRect:_e=>({width:`${_e.width}px`,height:`${_e.height}px`,left:`${_e.left}px`,top:`${_e.top}px`})});function connect$2(_e,_,et){const tt=_e.context.translations,nt=_e.matches("focused"),it=_e.context.orientation==="vertical",at=_e.context.orientation==="horizontal",ot=_e.context.composite,st=_e.context.indicatorState;function dt(ht){return{selected:_e.context.value===ht.value,focused:_e.context.focusedValue===ht.value,disabled:!!ht.disabled}}return{value:_e.context.value,focusedValue:_e.context.focusedValue,setValue(ht){_({type:"SET_VALUE",value:ht})},clearValue(){_({type:"CLEAR_VALUE"})},setIndicatorRect(ht){const ct=dom$1.getTriggerId(_e.context,ht);_({type:"SET_INDICATOR_RECT",id:ct})},syncTabIndex(){_("SYNC_TAB_INDEX")},selectNext(ht){_({type:"TAB_FOCUS",value:ht,src:"selectNext"}),_({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(ht){_({type:"TAB_FOCUS",value:ht,src:"selectPrev"}),_({type:"ARROW_PREV",src:"selectPrev"})},focus(){var ht;(ht=dom$1.getSelectedTriggerEl(_e.context))==null||ht.focus()},getRootProps(){return et.element({...parts$1.root.attrs,id:dom$1.getRootId(_e.context),"data-orientation":_e.context.orientation,"data-focus":dataAttr$1(nt),dir:_e.context.dir})},getListProps(){return et.element({...parts$1.list.attrs,id:dom$1.getListId(_e.context),role:"tablist",dir:_e.context.dir,"data-focus":dataAttr$1(nt),"aria-orientation":_e.context.orientation,"data-orientation":_e.context.orientation,"aria-label":tt==null?void 0:tt.listLabel,onKeyDown(ht){if(ht.defaultPrevented||!isSelfTarget(ht)||isComposingEvent(ht))return;const ct={ArrowDown(){at||_({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){at||_({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){it||_({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){it||_({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){_("HOME")},End(){_("END")},Enter(){_({type:"ENTER"})}};let ut=getEventKey(ht,_e.context);const ft=ct[ut];ft&&(ht.preventDefault(),ft(ht))}})},getTriggerState:dt,getTriggerProps(ht){const{value:ct,disabled:ut}=ht,ft=dt(ht);return et.button({...parts$1.trigger.attrs,role:"tab",type:"button",disabled:ut,dir:_e.context.dir,"data-orientation":_e.context.orientation,"data-disabled":dataAttr$1(ut),"aria-disabled":ut,"data-value":ct,"aria-selected":ft.selected,"data-selected":dataAttr$1(ft.selected),"data-focus":dataAttr$1(ft.focused),"aria-controls":ft.selected?dom$1.getContentId(_e.context,ct):void 0,"data-ownedby":dom$1.getListId(_e.context),"data-ssr":dataAttr$1(_e.context.ssr),id:dom$1.getTriggerId(_e.context,ct),tabIndex:ft.selected&&ot?0:-1,onFocus(){_({type:"TAB_FOCUS",value:ct})},onBlur(gt){const mt=gt.relatedTarget;(mt==null?void 0:mt.getAttribute("role"))!=="tab"&&_({type:"TAB_BLUR"})},onClick(gt){gt.defaultPrevented||ut||(isSafari()&&gt.currentTarget.focus(),_({type:"TAB_CLICK",value:ct}))}})},getContentProps(ht){const{value:ct}=ht,ut=_e.context.value===ct;return et.element({...parts$1.content.attrs,dir:_e.context.dir,id:dom$1.getContentId(_e.context,ct),tabIndex:ot?0:-1,"aria-labelledby":dom$1.getTriggerId(_e.context,ct),role:"tabpanel","data-ownedby":dom$1.getListId(_e.context),"data-selected":dataAttr$1(ut),"data-orientation":_e.context.orientation,hidden:!ut})},getIndicatorProps(){var ht,ct,ut,ft;return et.element({id:dom$1.getIndicatorId(_e.context),...parts$1.indicator.attrs,dir:_e.context.dir,"data-orientation":_e.context.orientation,style:{"--transition-property":"left, right, top, bottom, width, height","--left":(ht=st.rect)==null?void 0:ht.left,"--top":(ct=st.rect)==null?void 0:ct.top,"--width":(ut=st.rect)==null?void 0:ut.width,"--height":(ft=st.rect)==null?void 0:ft.height,position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:st.transition?"var(--transition-duration, 150ms)":"0ms",transitionTimingFunction:"var(--transition-timing-function)",[at?"left":"top"]:at?"var(--left)":"var(--top)"}})}}}var{not:not$1}=guards;function machine(_e){const _=compact$2(_e);return createMachine({initial:"idle",context:{dir:"ltr",orientation:"horizontal",activationMode:"automatic",value:null,loopFocus:!0,composite:!0,navigate(et){clickIfLink(et.node)},..._,focusedValue:_.value??null,ssr:!0,indicatorState:{rendered:!1,transition:!1,rect:{left:"0px",top:"0px",width:"0px",height:"0px"}}},watch:{value:["allowIndicatorTransition","syncIndicatorRect","syncTabIndex","navigateIfNeeded"],dir:["syncIndicatorRect"],orientation:["syncIndicatorRect"]},on:{SET_VALUE:{actions:"setValue"},CLEAR_VALUE:{actions:"clearValue"},SET_INDICATOR_RECT:{actions:"setIndicatorRect"},SYNC_TAB_INDEX:{actions:"syncTabIndex"}},created:["syncFocusedValue"],entry:["checkRenderedElements","syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:"setFocusedValue"},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:"focusPrevTab"}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:"focusNextTab"}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:"focusFirstTab"}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:"focusLastTab"}],ENTER:{guard:not$1("selectOnFocus"),actions:"selectFocusedTab"},TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:"clearFocusedValue"}}}}},{guards:{selectOnFocus:et=>et.activationMode==="automatic"},actions:{syncFocusedValue(et){et.value!=null&&et.focusedValue==null&&(et.focusedValue=et.value)},selectFocusedTab(et){raf$1(()=>{const nt=et.deselectable&&et.value===et.focusedValue?null:et.focusedValue;set$3.value(et,nt)})},setFocusedValue(et,tt){tt.value!=null&&set$3.focusedValue(et,tt.value)},clearFocusedValue(et){set$3.focusedValue(et,null)},setValue(et,tt){const it=et.deselectable&&et.value===et.focusedValue?null:tt.value;set$3.value(et,it)},clearValue(et){set$3.value(et,null)},focusFirstTab(et){raf$1(()=>{var tt;(tt=dom$1.getFirstTriggerEl(et))==null||tt.focus()})},focusLastTab(et){raf$1(()=>{var tt;(tt=dom$1.getLastTriggerEl(et))==null||tt.focus()})},focusNextTab(et){if(!et.focusedValue)return;const tt=dom$1.getNextTriggerEl(et,et.focusedValue);raf$1(()=>{et.composite?tt==null||tt.focus():(tt==null?void 0:tt.dataset.value)!=null&&set$3.focusedValue(et,tt.dataset.value)})},focusPrevTab(et){if(!et.focusedValue)return;const tt=dom$1.getPrevTriggerEl(et,et.focusedValue);raf$1(()=>{et.composite?tt==null||tt.focus():(tt==null?void 0:tt.dataset.value)!=null&&set$3.focusedValue(et,tt.dataset.value)})},checkRenderedElements(et){et.indicatorState.rendered=!!dom$1.getIndicatorEl(et)},syncTabIndex(et){raf$1(()=>{const tt=dom$1.getSelectedContentEl(et);if(!tt)return;getFocusables(tt).length>0?tt.removeAttribute("tabindex"):tt.setAttribute("tabindex","0")})},cleanupObserver(et){var tt;(tt=et.indicatorCleanup)==null||tt.call(et)},allowIndicatorTransition(et){et.indicatorState.transition=!0},setIndicatorRect(et,tt){const nt=tt.id??et.value;!et.indicatorState.rendered||!nt||!dom$1.getTriggerEl(et,nt)||(et.indicatorState.rect=dom$1.getRectById(et,nt),nextTick(()=>{et.indicatorState.transition=!1}))},syncSsr(et){et.ssr=!1},syncIndicatorRect(et){var it;(it=et.indicatorCleanup)==null||it.call(et);const tt=et.value;if(!et.indicatorState.rendered||!tt)return;const nt=dom$1.getSelectedTriggerEl(et);nt&&(et.indicatorCleanup=trackElementRect(nt,{getRect(at){return dom$1.getOffsetRect(at)},onChange(at){et.indicatorState.rect=dom$1.resolveRect(at),nextTick(()=>{et.indicatorState.transition=!1})}}))},navigateIfNeeded(et){const tt=dom$1.getSelectedTriggerEl(et);isAnchorElement(tt)&&et.navigate({value:et.value,node:tt})}}})}var invoke={change:_e=>{var _;_e.value!=null&&((_=_e.onValueChange)==null||_.call(_e,{value:_e.value}))},focusChange:_e=>{var _;_e.focusedValue!=null&&((_=_e.onFocusChange)==null||_.call(_e,{focusedValue:_e.focusedValue}))}},set$3={value:(_e,_)=>{isEqual$3(_,_e.value)||(_e.value=_,invoke.change(_e))},focusedValue:(_e,_)=>{isEqual$3(_,_e.focusedValue)||(_e.focusedValue=_,invoke.focusChange(_e))}};createProps$1()(["activationMode","composite","deselectable","dir","getRootNode","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]);createProps$1()(["disabled","value"]);createProps$1()(["value"]);const useTabs=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),{dir:et}=useLocaleContext(),tt={id:reactExports.useId(),dir:et,getRootNode:_,value:_e.defaultValue,..._e},nt={...tt,value:_e.value,onValueChange:useEvent(_e.onValueChange,{sync:!0}),onFocusChange:useEvent(_e.onFocusChange)},[it,at]=useMachine(machine(tt),{context:nt});return connect$2(it,at,normalizeProps)},TabsRoot$1=reactExports.forwardRef((_e,_)=>{const[et,tt]=splitRenderStrategyProps(_e),[nt,it]=createSplitProps()(tt,["activationMode","composite","defaultValue","deselectable","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]),at=useTabs(nt),ot=mergeProps(at.getRootProps(),it);return jsxRuntimeExports.jsx(TabsProvider,{value:at,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:et,children:jsxRuntimeExports.jsx(ark.div,{...ot,ref:_})})})});TabsRoot$1.displayName="TabsRoot";const TabsRootProvider=reactExports.forwardRef((_e,_)=>{const[et,tt]=splitRenderStrategyProps(_e),[{value:nt},it]=createSplitProps()(tt,["value"]),at=mergeProps(nt.getRootProps(),it);return jsxRuntimeExports.jsx(TabsProvider,{value:nt,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:et,children:jsxRuntimeExports.jsx(ark.div,{...at,ref:_})})})});TabsRootProvider.displayName="TabsRootProvider";const{withProvider:withProvider$1,withContext:withContext$3,useStyles:useTabsStyles,PropsProvider:PropsProvider$2}=createSlotRecipeContext({key:"tabs"});withProvider$1(TabsRootProvider,"root",{forwardAsChild:!0});const TabsRoot=withProvider$1(TabsRoot$1,"root",{forwardAsChild:!0}),TabsTrigger=withContext$3(TabTrigger,"trigger",{forwardAsChild:!0}),TabsContent=withContext$3(TabContent,"content",{forwardAsChild:!0}),TabsContentGroup=withContext$3("div","contentGroup"),TabsList=withContext$3(TabList,"list",{forwardAsChild:!0});withContext$3(TabIndicator,"indicator",{forwardAsChild:!0});const{withContext:withContext$2,PropsProvider:PropsProvider$1}=createRecipeContext({key:"textarea"}),Textarea=withContext$2(FieldTextarea);var anatomy=createAnatomy("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),parts=anatomy.build(),dom=createScope({getRegionId:_e=>`toast-group:${_e}`,getRegionEl:(_e,_)=>dom.getById(_e,`toast-group:${_}`),getRootId:_e=>`toast:${_e.id}`,getRootEl:_e=>dom.getById(_e,dom.getRootId(_e)),getTitleId:_e=>`toast:${_e.id}:title`,getDescriptionId:_e=>`toast:${_e.id}:description`,getCloseTriggerId:_e=>`toast${_e.id}:close`});function getToastsByPlacement(_e,_){return _e.filter(et=>et.state.context.placement===_)}var defaultTimeouts={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function getToastDuration(_e,_){return _e??defaultTimeouts[_]??defaultTimeouts.DEFAULT}function getGroupPlacementStyle(_e,_){var ht;const et=_e.offsets,tt=typeof et=="string"?{left:et,right:et,bottom:et,top:et}:et,nt=_e.dir==="rtl",it=_.replace("-start",nt?"-right":"-left").replace("-end",nt?"-left":"-right"),at=it.includes("right"),ot=it.includes("left"),st={position:"fixed",pointerEvents:_e.count>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${_e.gap}px`,"--first-height":`${((ht=_e.heights[0])==null?void 0:ht.height)||0}px`,zIndex:MAX_Z_INDEX};let dt="center";if(at&&(dt="flex-end"),ot&&(dt="flex-start"),st.alignItems=dt,it.includes("top")){const ct=tt.top;st.top=`max(env(safe-area-inset-top, 0px), ${ct})`}if(it.includes("bottom")){const ct=tt.bottom;st.bottom=`max(env(safe-area-inset-bottom, 0px), ${ct})`}if(!it.includes("left")){const ct=tt.right;st.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${ct})`}if(!it.includes("right")){const ct=tt.left;st.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${ct})`}return st}function getPlacementStyle(_e,_){const[et]=_e.placement.split("-"),tt=!_e.frontmost,nt=!_e.stacked,it={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${_e.removeDelay}ms`,"--duration":`${_e.type==="loading"?Number.MAX_SAFE_INTEGER:_e.duration}ms`,"--initial-height":`${_e.height}px`,"--offset":`${_e.offset}px`,"--index":_e.index,"--z-index":_e.zIndex,"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},at=ot=>Object.assign(it,ot);return et==="top"?at({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):et==="bottom"&&at({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),_e.mounted&&(at({"--y":"0","--opacity":"1"}),_e.stacked&&at({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),_||at({"--opacity":"0",pointerEvents:"none"}),tt&&nt&&(at({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),_||at({"--y":"calc(var(--sign) * 40%)"})),tt&&_e.stacked&&!_&&at({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),_e.frontmost&&!_&&at({"--y":"calc(var(--lift) * -100%)"}),it}function getGhostBeforeStyle(_e,_){const et={position:"absolute",inset:"0",scale:"1 2",pointerEvents:_?"none":"auto"},tt=nt=>Object.assign(et,nt);return _e.frontmost&&!_&&tt({height:"calc(var(--initial-height) + 80%)"}),et}function getGhostAfterStyle(_e,_){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function groupConnect(_e,_,et){function tt(){return isMachine(_e)?_e.getState():_e}function nt(ht){return getToastsByPlacement(tt().context.toasts,ht)}function it(ht){const ct=tt().context.toasts;return ct.length?!!ct.find(ut=>ut.id==ht):!1}function at(ht){const ct=`toast:${uuid()}`,ut=ht.id?ht.id:ct;return it(ut)||_({type:"ADD_TOAST",toast:{...ht,id:ut}}),ut}function ot(ht,ct){return it(ht)&&_({type:"UPDATE_TOAST",id:ht,toast:ct}),ht}function st(ht){const{id:ct}=ht;return(ct?it(ct):!1)&&ct!=null?ot(ct,ht):at(ht)}function dt(ht){ht==null?_("DISMISS_ALL"):it(ht)&&_({type:"DISMISS_TOAST",id:ht})}return{getCount(){return tt().context.count},getPlacements(){const ct=tt().context.toasts.map(ut=>ut.state.context.placement);return Array.from(new Set(ct))},getToastsByPlacement:nt,isVisible:it,create:at,update:ot,upsert:st,dismiss:dt,remove(ht){ht==null?_("REMOVE_ALL"):it(ht)&&_({type:"REMOVE_TOAST",id:ht})},dismissByPlacement(ht){nt(ht).forEach(ut=>dt(ut.id))},loading(ht){return st({...ht,type:"loading"})},success(ht){return st({...ht,type:"success"})},error(ht){return st({...ht,type:"error"})},promise(ht,ct,ut={}){const ft=st({...ut,...ct.loading,type:"loading"});return runIfFn$2(ht).then(gt=>{const mt=runIfFn$2(ct.success,gt);st({...ut,...mt,id:ft,type:"success"})}).catch(gt=>{const mt=runIfFn$2(ct.error,gt);st({...ut,...mt,id:ft,type:"error"})}).finally(()=>{var gt;(gt=ct.finally)==null||gt.call(ct)}),ft},pause(ht){ht==null?_("PAUSE_ALL"):it(ht)&&_({type:"PAUSE_TOAST",id:ht})},resume(ht){ht==null?_("RESUME_ALL"):it(ht)&&_({type:"RESUME_TOAST",id:ht})},getGroupProps(ht){const{placement:ct,label:ut="Notifications"}=ht,ft=tt(),gt=ft.context.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),[mt,vt="center"]=ct.split("-");return et.element({...parts.group.attrs,dir:ft.context.dir,tabIndex:-1,"aria-label":`${ct} ${ut} ${gt}`,id:dom.getRegionId(ct),"data-placement":ct,"data-side":mt,"data-align":vt,"aria-live":"polite",role:"region",style:getGroupPlacementStyle(ft.context,ct),onMouseMove(){_({type:"REGION.POINTER_ENTER",placement:ct})},onMouseLeave(){_({type:"REGION.POINTER_LEAVE",placement:ct})},onFocus(yt){_({type:"REGION.FOCUS",target:yt.relatedTarget})},onBlur(yt){ft.context.isFocusWithin&&!contains(yt.currentTarget,yt.relatedTarget)&&_({type:"REGION.BLUR"})}})},subscribe(ht){const ct=tt();return subscribe$1(ct.context.toasts,()=>{const ft=nt(ct.context.placement).map(gt=>gt.getState().context);ht(ft)})}}}var{not,and,or}=guards;function createToastMachine(_e){const{type:_="info",duration:et,id:tt="1",placement:nt="bottom",removeDelay:it=200,...at}=_e,ot=compact$2(at),st=getToastDuration(et,_);return createMachine({id:tt,context:{id:tt,type:_,remaining:st,duration:st,removeDelay:it,createdAt:Date.now(),placement:nt,...ot,height:0,offset:0,frontmost:!1,mounted:!1,index:-1,zIndex:0},initial:_==="loading"?"visible:persist":"visible",on:{UPDATE:[{guard:and("hasTypeChanged","isChangingToLoading"),target:"visible:persist",actions:["setContext"]},{guard:or("hasDurationChanged","hasTypeChanged"),target:"visible:updating",actions:["setContext"]},{actions:["setContext"]}],MEASURE:{actions:["measureHeight"]}},entry:["invokeOnVisible"],activities:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],after:{0:"visible"}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:not("isLoadingType"),target:"visible",actions:["setCreatedAt"]},DISMISS:"dismissing"}},visible:{tags:["visible"],after:{VISIBLE_DURATION:"dismissing"},on:{DISMISS:"dismissing",PAUSE:{target:"visible:persist",actions:"setRemainingDuration"}}},dismissing:{entry:"invokeOnDismiss",after:{REMOVE_DELAY:{target:"unmounted",actions:"notifyParentToRemove"}}},unmounted:{entry:"invokeOnUnmount",type:"final"}}},{activities:{trackHeight(dt,ht,{self:ct}){let ut;return raf$1(()=>{const ft=dom.getRootEl(dt);if(!ft)return;dt.mounted=!0;const gt=queryAll(ft,"[data-ghost]");warn(gt.length!==2,"[toast] No ghost element found in toast. Render the `ghostBefore` and `ghostAfter` elements");const mt=()=>{const bt=ft.style.height;ft.style.height="auto";const _t=ft.getBoundingClientRect().height;ft.style.height=bt,dt.height=_t,ct.sendParent({type:"UPDATE_HEIGHT",id:ct.id,height:_t,placement:dt.placement})};mt();const vt=dom.getWin(dt),yt=new vt.MutationObserver(mt);yt.observe(ft,{childList:!0,subtree:!0,characterData:!0}),ut=()=>yt.disconnect()}),()=>ut==null?void 0:ut()}},guards:{isChangingToLoading:(dt,ht)=>{var ct;return((ct=ht.toast)==null?void 0:ct.type)==="loading"},isLoadingType:dt=>dt.type==="loading",hasTypeChanged:(dt,ht)=>{var ct;return((ct=ht.toast)==null?void 0:ct.type)!=null&&ht.toast.type!==dt.type},hasDurationChanged:(dt,ht)=>{var ct;return((ct=ht.toast)==null?void 0:ct.duration)!=null&&ht.toast.duration!==dt.duration}},delays:{VISIBLE_DURATION:dt=>dt.remaining,REMOVE_DELAY:dt=>dt.removeDelay},actions:{measureHeight(dt,ht,{self:ct}){raf$1(()=>{const ut=dom.getRootEl(dt);if(!ut)return;dt.mounted=!0;const ft=ut.style.height;ut.style.height="auto";const gt=ut.getBoundingClientRect().height;ut.style.height=ft,dt.height=gt,ct.sendParent({type:"UPDATE_HEIGHT",id:ct.id,height:gt,placement:dt.placement})})},setRemainingDuration(dt){dt.remaining-=Date.now()-dt.createdAt},setCreatedAt(dt){dt.createdAt=Date.now()},notifyParentToRemove(dt,ht,{self:ct}){ct.sendParent({type:"REMOVE_TOAST",id:ct.id})},invokeOnDismiss(dt){var ht;(ht=dt.onStatusChange)==null||ht.call(dt,{status:"dismissing"})},invokeOnUnmount(dt){var ht;(ht=dt.onStatusChange)==null||ht.call(dt,{status:"unmounted"})},invokeOnVisible(dt){var ht;(ht=dt.onStatusChange)==null||ht.call(dt,{status:"visible"})},setContext(dt,ht){var gt,mt;const ct=(gt=ht.toast)==null?void 0:gt.duration,ut=((mt=ht.toast)==null?void 0:mt.type)??dt.type,ft=getToastDuration(ct,ut);Object.assign(dt,{...ht.toast,duration:ft,remaining:ft})}}})}function groupMachine(_e){const _=compact$2(_e);return createMachine({id:"toaster",initial:_.overlap?"overlap":"stack",context:{dir:"ltr",max:Number.MAX_SAFE_INTEGER,gap:16,pauseOnPageIdle:!1,hotkey:["altKey","KeyT"],offsets:"1rem",placement:"bottom",removeDelay:200,..._,toasts:[],lastFocusedEl:null,isFocusWithin:!1,heights:[]},computed:{count:et=>et.toasts.length},activities:["trackDocumentVisibility","trackHotKeyPress"],watch:{toasts:["collapsedIfEmpty","setDismissableBranch"]},exit:["removeToasts","clearDismissableBranch","clearLastFocusedEl"],on:{PAUSE_TOAST:{actions:["pauseToast"]},PAUSE_ALL:{actions:["pauseToasts"]},RESUME_TOAST:{actions:["resumeToast"]},RESUME_ALL:{actions:["resumeToasts"]},ADD_TOAST:{guard:"isWithinRange",actions:["createToast","syncToastIndex"]},UPDATE_TOAST:{actions:["updateToast"]},DISMISS_TOAST:{actions:["dismissToast"]},DISMISS_ALL:{actions:["dismissToasts"]},REMOVE_TOAST:{actions:["removeToast","syncToastIndex","syncToastOffset"]},REMOVE_ALL:{actions:["removeToasts"]},UPDATE_HEIGHT:{actions:["syncHeights","syncToastOffset"]},"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","restoreLastFocusedEl"]},{actions:["resumeToasts","restoreLastFocusedEl"]}]},states:{stack:{entry:["expandToasts"],on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap"},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{entry:["collapseToasts"],on:{"REGION.STACK":{target:"stack"},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts"]}}}}},{guards:{isWithinRange:et=>et.toasts.length<et.max,isOverlapping:et=>!!et.overlap},activities:{trackHotKeyPress(et,tt,{send:nt}){return addDomEvent(document,"keydown",at=>{et.hotkey.every(st=>at[st]||at.code===st)&&nt({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility(et,tt,{send:nt}){if(!et.pauseOnPageIdle)return;const it=dom.getDoc(et);return addDomEvent(it,"visibilitychange",()=>{nt(it.visibilityState==="hidden"?"PAUSE_ALL":"RESUME_ALL")})}},actions:{setDismissableBranch(et){var at;const nt=getToastsByPlacement(et.toasts,et.placement).length>0;if(!nt){(at=et._cleanup)==null||at.call(et);return}if(nt&&et._cleanup)return;const it=()=>dom.getRegionEl(et,et.placement);et._cleanup=trackDismissableBranch(it,{defer:!0})},clearDismissableBranch(et){var tt;(tt=et._cleanup)==null||tt.call(et)},focusRegionEl(et){queueMicrotask(()=>{var tt;(tt=dom.getRegionEl(et,et.placement))==null||tt.focus()})},expandToasts(et){each$g(et,tt=>{tt.state.context.stacked=!0})},collapseToasts(et){each$g(et,tt=>{tt.state.context.stacked=!1})},collapsedIfEmpty(et,tt,{send:nt}){!et.overlap||et.toasts.length>1||nt("REGION.OVERLAP")},pauseToast(et,tt,{self:nt}){nt.sendChild("PAUSE",tt.id)},pauseToasts(et){et.toasts.forEach(tt=>tt.send("PAUSE"))},resumeToast(et,tt,{self:nt}){nt.sendChild("RESUME",tt.id)},resumeToasts(et){et.toasts.forEach(tt=>tt.send("RESUME"))},measureToasts(et){et.toasts.forEach(tt=>tt.send("MEASURE"))},createToast(et,tt,{self:nt,getState:it}){const at={placement:et.placement,duration:et.duration,removeDelay:et.removeDelay,...tt.toast,dir:et.dir,getRootNode:et.getRootNode,stacked:it().matches("stack")},ot=createToastMachine(at),st=nt.spawn(ot);et.toasts=[st,...et.toasts]},updateToast(et,tt,{self:nt}){nt.sendChild({type:"UPDATE",toast:tt.toast},tt.id)},dismissToast(et,tt,{self:nt}){nt.sendChild("DISMISS",tt.id)},dismissToasts(et){et.toasts.forEach(tt=>tt.send("DISMISS"))},removeToast(et,tt,{self:nt}){nt.stopChild(tt.id),et.toasts=et.toasts.filter(it=>it.id!==tt.id),et.heights=et.heights.filter(it=>it.id!==tt.id)},removeToasts(et,tt,{self:nt}){et.toasts.forEach(it=>nt.stopChild(it.id)),et.toasts=[],et.heights=[]},syncHeights(et,tt){const nt=et.heights.find(it=>it.id===tt.id);if(nt)nt.height=tt.height,nt.placement=tt.placement;else{const it={id:tt.id,height:tt.height,placement:tt.placement};et.heights=[it,...et.heights]}},syncToastIndex(et){each$g(et,(tt,nt,it)=>{tt.state.context.index=nt,tt.state.context.frontmost=nt===0,tt.state.context.zIndex=it.length-nt})},syncToastOffset(et,tt){const nt=tt.placement??et.placement;each$g({...et,placement:nt},it=>{const at=Math.max(et.heights.findIndex(st=>st.id===it.id),0),ot=et.heights.reduce((st,dt,ht)=>ht>=at?st:st+dt.height,0);it.state.context.offset=at*et.gap+ot})},setLastFocusedEl(et,tt){et.isFocusWithin||!tt.target||(et.isFocusWithin=!0,et.lastFocusedEl=ref$1(tt.target))},restoreLastFocusedEl(et){et.isFocusWithin=!1,et.lastFocusedEl&&(et.lastFocusedEl.focus({preventScroll:!0}),et.lastFocusedEl=null)},clearLastFocusedEl(et){et.lastFocusedEl&&(et.lastFocusedEl.focus({preventScroll:!0}),et.lastFocusedEl=null,et.isFocusWithin=!1)}}})}function each$g(_e,_){getToastsByPlacement(_e.toasts,_e.placement).forEach(_)}function connect$1(_e,_,et){const tt=_e.hasTag("visible"),nt=_e.hasTag("paused"),it=_e.context.placement,at=_e.context.type,[ot,st="center"]=it.split("-");return{type:at,title:_e.context.title,description:_e.context.description,placement:it,visible:tt,paused:nt,pause(){_("PAUSE")},resume(){_("RESUME")},dismiss(){_("DISMISS")},getRootProps(){return et.element({...parts.root.attrs,dir:_e.context.dir,id:dom.getRootId(_e.context),"data-state":tt?"open":"closed","data-type":at,"data-placement":it,"data-align":st,"data-side":ot,"data-mounted":dataAttr$1(_e.context.mounted),"data-paused":dataAttr$1(nt),"data-first":dataAttr$1(_e.context.frontmost),"data-sibling":dataAttr$1(!_e.context.frontmost),"data-stack":dataAttr$1(_e.context.stacked),"data-overlap":dataAttr$1(!_e.context.stacked),role:"status","aria-atomic":"true","aria-describedby":_e.context.description?dom.getDescriptionId(_e.context):void 0,"aria-labelledby":_e.context.title?dom.getTitleId(_e.context):void 0,tabIndex:0,style:getPlacementStyle(_e.context,tt),onKeyDown(dt){dt.defaultPrevented||dt.key=="Escape"&&(_("DISMISS"),dt.preventDefault())}})},getGhostBeforeProps(){return et.element({"data-ghost":"before",style:getGhostBeforeStyle(_e.context,tt)})},getGhostAfterProps(){return et.element({"data-ghost":"after",style:getGhostAfterStyle()})},getTitleProps(){return et.element({...parts.title.attrs,id:dom.getTitleId(_e.context)})},getDescriptionProps(){return et.element({...parts.description.attrs,id:dom.getDescriptionId(_e.context)})},getActionTriggerProps(){return et.button({...parts.actionTrigger.attrs,type:"button",onClick(dt){var ht,ct;dt.defaultPrevented||((ct=(ht=_e.context.action)==null?void 0:ht.onClick)==null||ct.call(ht),_("DISMISS"))}})},getCloseTriggerProps(){return et.button({id:dom.getCloseTriggerId(_e.context),...parts.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(dt){dt.defaultPrevented||_("DISMISS")}})}}}var group={connect:groupConnect,machine:groupMachine};const createToaster=_e=>{const _=group.machine({id:"1",..._e});return{...group.connect(_,_.send,normalizeProps),machine:_}},[ToastProvider,useToastContext]=createContext$1({name:"ToastContext",hookName:"useToastContext",providerName:"<ToastProvider />"}),ToastActionTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getActionTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});ToastActionTrigger$1.displayName="ToastActionTrigger";const ToastCloseTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getCloseTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});ToastCloseTrigger$1.displayName="ToastCloseTrigger";const ToastDescription$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getDescriptionProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});ToastDescription$1.displayName="ToastDescription";const ToastRoot$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getRootProps(),_e);return jsxRuntimeExports.jsxs("div",{...tt,ref:_,children:[jsxRuntimeExports.jsx("div",{...et.getGhostBeforeProps()}),_e.children,jsxRuntimeExports.jsx("div",{...et.getGhostAfterProps()})]})});ToastRoot$1.displayName="ToastRoot";const ToastTitle$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getTitleProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});ToastTitle$1.displayName="ToastTitle";const Toaster$2=reactExports.forwardRef((_e,_)=>{const{toaster:et,children:tt,...nt}=_e,[it,at]=useMachine(et.machine),ot=it.context.placement,st=group.connect(it,at,normalizeProps),dt=st.getToastsByPlacement(ot),ht=mergeProps(st.getGroupProps({placement:ot}),nt);return jsxRuntimeExports.jsx(ark.div,{...ht,ref:_,children:dt.map(ct=>jsxRuntimeExports.jsx(ToastActor,{value:ct,children:ut=>tt(ut)},ct.id))})});Toaster$2.displayName="Toaster";const ToastActor=_e=>{const[_,et]=useActor(_e.value),tt=connect$1(_,et,normalizeProps);return jsxRuntimeExports.jsx(ToastProvider,{value:tt,children:_e.children(_.context)})},{withProvider,withContext:withContext$1,useStyles:useToastStyles}=createSlotRecipeContext({key:"toast"}),Toaster$1=chakra$1(Toaster$2,{},{forwardAsChild:!0}),ToastRoot=withProvider(ToastRoot$1,"root",{forwardAsChild:!0}),ToastCloseTrigger=withContext$1(ToastCloseTrigger$1,"closeTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(CloseIcon,{})}}),ToastTitle=withContext$1(ToastTitle$1,"title",{forwardAsChild:!0}),ToastDescription=withContext$1(ToastDescription$1,"description",{forwardAsChild:!0}),ToastActionTrigger=withContext$1(ToastActionTrigger$1,"actionTrigger",{forwardAsChild:!0}),iconMap={warning:WarningIcon,success:CheckCircleIcon,error:WarningIcon},ToastIndicator=reactExports.forwardRef(function(_,et){const tt=useToastContext(),nt=useToastStyles(),it=iconMap[tt.type];return it?jsxRuntimeExports.jsx(it,{ref:et,..._,css:[nt.indicator,_.css]}):null}),{withContext,PropsProvider}=createRecipeContext({key:"text"}),Text$1=withContext("p"),canvasStyles={background:{container:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"auto"},image:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:1},video:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:1,transform:"scaleX(-1)"}},canvas:{container:{position:"relative",width:"100%",height:"100%",zIndex:"1",pointerEvents:"auto"}},subtitle:{container:{position:"absolute",bottom:"30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"15px 30px",borderRadius:"12px",minWidth:"60%",maxWidth:"95%",zIndex:2},text:{color:"white",fontSize:"1.5rem",textAlign:"center",lineHeight:"1.4",whiteSpace:"pre-wrap"}},wsStatus:{container:{position:"absolute",top:"20px",left:"20px",zIndex:2,padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:"medium",color:"white",transition:"all 0.2s",cursor:"pointer",userSelect:"none",_hover:{opacity:.8}}}},toaster=createToaster({placement:"top-end",pauseOnPageIdle:!0,max:5});function Toaster(){return jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Toaster$1,{toaster,insetInline:{mdDown:"4"},children:_e=>{var _;return jsxRuntimeExports.jsxs(ToastRoot,{width:{md:"sm"},children:[_e.type==="loading"?jsxRuntimeExports.jsx(Spinner,{size:"sm",color:"blue.solid"}):jsxRuntimeExports.jsx(ToastIndicator,{}),jsxRuntimeExports.jsxs(Stack,{gap:"1",flex:"1",maxWidth:"100%",children:[_e.title&&jsxRuntimeExports.jsx(ToastTitle,{children:_e.title}),_e.description&&jsxRuntimeExports.jsx(ToastDescription,{children:_e.description})]}),_e.action&&jsxRuntimeExports.jsx(ToastActionTrigger,{children:_e.action.label}),((_=_e.meta)==null?void 0:_.closable)&&jsxRuntimeExports.jsx(ToastCloseTrigger,{})]})}})})}const DEFAULT_CAMERA_CONFIG={width:320,height:240},CameraContext=reactExports.createContext(null);function CameraProvider({children:_e}){const[_,et]=reactExports.useState(!1),[tt,nt]=reactExports.useState(!1),[it,at]=reactExports.useState(DEFAULT_CAMERA_CONFIG),ot=reactExports.useRef(null),st=reactExports.useRef(null),dt=reactExports.useRef(null),ht=reactExports.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API is not supported on this device");if(!(await navigator.mediaDevices.enumerateDevices()).some(bt=>bt.kind==="videoinput"))throw new Error("No camera found on this device");const yt=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:it.width},height:{ideal:it.height}}});ot.current=yt,dt.current&&(dt.current.srcObject=yt),et(!0)}catch(mt){throw console.error("Failed to start camera:",mt),toaster.create({title:`Failed to start camera: ${mt}`,type:"error",duration:2e3}),mt}},[it]),ct=reactExports.useCallback(()=>{ot.current&&(ot.current.getTracks().forEach(mt=>mt.stop()),ot.current=null,et(!1))},[]),ut=reactExports.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API is not supported on this device");if(!(await navigator.mediaDevices.enumerateDevices()).some(bt=>bt.kind==="videoinput"))throw new Error("No camera found on this device");const yt=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:it.width},height:{ideal:it.height}}});st.current=yt,nt(!0)}catch(mt){throw console.error("Failed to start background camera:",mt),toaster.create({title:`Failed to start background camera: ${mt}`,type:"error",duration:2e3}),mt}},[it]),ft=reactExports.useCallback(()=>{st.current&&(st.current.getTracks().forEach(mt=>mt.stop()),st.current=null,nt(!1))},[]),gt=reactExports.useMemo(()=>({isStreaming:_,stream:ot.current,startCamera:ht,stopCamera:ct,cameraConfig:it,setCameraConfig:at,videoRef:dt,backgroundStream:st.current,startBackgroundCamera:ut,stopBackgroundCamera:ft,isBackgroundStreaming:tt}),[_,ht,ct,it,tt,ut,ft]);return jsxRuntimeExports.jsx(CameraContext.Provider,{value:gt,children:_e})}function useCamera(){const _e=reactExports.useContext(CameraContext);if(!_e)throw new Error("useCamera must be used within a CameraProvider");return _e}function useLocalStorage(_e,_,et){const[tt,nt]=reactExports.useState(()=>{try{const at=window.localStorage.getItem(_e);return at?JSON.parse(at):_}catch(at){return console.error(`Error reading localStorage key "${_e}":`,at),_}});return[tt,at=>{try{const ot=at instanceof Function?at(tt):at,st=et!=null&&et.filter?et.filter(ot):ot;nt(ot),window.localStorage.setItem(_e,JSON.stringify(st))}catch(ot){console.error(`Error setting localStorage key "${_e}":`,ot)}}]}var extendStatics$2=function(_e,_){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,tt){et.__proto__=tt}||function(et,tt){for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])},extendStatics$2(_e,_)};function __extends$2(_e,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");extendStatics$2(_e,_);function et(){this.constructor=_e}_e.prototype=_===null?Object.create(_):(et.prototype=_.prototype,new et)}var __assign=function(){return __assign=Object.assign||function(_){for(var et,tt=1,nt=arguments.length;tt<nt;tt++){et=arguments[tt];for(var it in et)Object.prototype.hasOwnProperty.call(et,it)&&(_[it]=et[it])}return _},__assign.apply(this,arguments)};function __values(_e){var _=typeof Symbol=="function"&&Symbol.iterator,et=_&&_e[_],tt=0;if(et)return et.call(_e);if(_e&&typeof _e.length=="number")return{next:function(){return _e&&tt>=_e.length&&(_e=void 0),{value:_e&&_e[tt++],done:!_e}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(_e,_){var et=typeof Symbol=="function"&&_e[Symbol.iterator];if(!et)return _e;var tt=et.call(_e),nt,it=[],at;try{for(;(_===void 0||_-- >0)&&!(nt=tt.next()).done;)it.push(nt.value)}catch(ot){at={error:ot}}finally{try{nt&&!nt.done&&(et=tt.return)&&et.call(tt)}finally{if(at)throw at.error}}return it}function __spreadArray(_e,_,et){if(et||arguments.length===2)for(var tt=0,nt=_.length,it;tt<nt;tt++)(it||!(tt in _))&&(it||(it=Array.prototype.slice.call(_,0,tt)),it[tt]=_[tt]);return _e.concat(it||Array.prototype.slice.call(_))}typeof SuppressedError=="function"&&SuppressedError;function isFunction$4(_e){return typeof _e=="function"}function createErrorClass(_e){var _=function(tt){Error.call(tt),tt.stack=new Error().stack},et=_e(_);return et.prototype=Object.create(Error.prototype),et.prototype.constructor=et,et}var UnsubscriptionError=createErrorClass(function(_e){return function(et){_e(this),this.message=et?et.length+` errors occurred during unsubscription:
`+et.map(function(tt,nt){return nt+1+") "+tt.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=et}});function arrRemove(_e,_){if(_e){var et=_e.indexOf(_);0<=et&&_e.splice(et,1)}}var Subscription=function(){function _e(_){this.initialTeardown=_,this.closed=!1,this._parentage=null,this._finalizers=null}return _e.prototype.unsubscribe=function(){var _,et,tt,nt,it;if(!this.closed){this.closed=!0;var at=this._parentage;if(at)if(this._parentage=null,Array.isArray(at))try{for(var ot=__values(at),st=ot.next();!st.done;st=ot.next()){var dt=st.value;dt.remove(this)}}catch(mt){_={error:mt}}finally{try{st&&!st.done&&(et=ot.return)&&et.call(ot)}finally{if(_)throw _.error}}else at.remove(this);var ht=this.initialTeardown;if(isFunction$4(ht))try{ht()}catch(mt){it=mt instanceof UnsubscriptionError?mt.errors:[mt]}var ct=this._finalizers;if(ct){this._finalizers=null;try{for(var ut=__values(ct),ft=ut.next();!ft.done;ft=ut.next()){var gt=ft.value;try{execFinalizer(gt)}catch(mt){it=it??[],mt instanceof UnsubscriptionError?it=__spreadArray(__spreadArray([],__read(it)),__read(mt.errors)):it.push(mt)}}}catch(mt){tt={error:mt}}finally{try{ft&&!ft.done&&(nt=ut.return)&&nt.call(ut)}finally{if(tt)throw tt.error}}}if(it)throw new UnsubscriptionError(it)}},_e.prototype.add=function(_){var et;if(_&&_!==this)if(this.closed)execFinalizer(_);else{if(_ instanceof _e){if(_.closed||_._hasParent(this))return;_._addParent(this)}(this._finalizers=(et=this._finalizers)!==null&&et!==void 0?et:[]).push(_)}},_e.prototype._hasParent=function(_){var et=this._parentage;return et===_||Array.isArray(et)&&et.includes(_)},_e.prototype._addParent=function(_){var et=this._parentage;this._parentage=Array.isArray(et)?(et.push(_),et):et?[et,_]:_},_e.prototype._removeParent=function(_){var et=this._parentage;et===_?this._parentage=null:Array.isArray(et)&&arrRemove(et,_)},_e.prototype.remove=function(_){var et=this._finalizers;et&&arrRemove(et,_),_ instanceof _e&&_._removeParent(this)},_e.EMPTY=function(){var _=new _e;return _.closed=!0,_}(),_e}(),EMPTY_SUBSCRIPTION=Subscription.EMPTY;function isSubscription(_e){return _e instanceof Subscription||_e&&"closed"in _e&&isFunction$4(_e.remove)&&isFunction$4(_e.add)&&isFunction$4(_e.unsubscribe)}function execFinalizer(_e){isFunction$4(_e)?_e():_e.unsubscribe()}var config$2={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},timeoutProvider={setTimeout:function(_e,_){for(var et=[],tt=2;tt<arguments.length;tt++)et[tt-2]=arguments[tt];return setTimeout.apply(void 0,__spreadArray([_e,_],__read(et)))},clearTimeout:function(_e){return clearTimeout(_e)},delegate:void 0};function reportUnhandledError(_e){timeoutProvider.setTimeout(function(){throw _e})}function noop$4(){}function errorContext(_e){_e()}var Subscriber=function(_e){__extends$2(_,_e);function _(et){var tt=_e.call(this)||this;return tt.isStopped=!1,et?(tt.destination=et,isSubscription(et)&&et.add(tt)):tt.destination=EMPTY_OBSERVER,tt}return _.create=function(et,tt,nt){return new SafeSubscriber(et,tt,nt)},_.prototype.next=function(et){this.isStopped||this._next(et)},_.prototype.error=function(et){this.isStopped||(this.isStopped=!0,this._error(et))},_.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},_.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_e.prototype.unsubscribe.call(this),this.destination=null)},_.prototype._next=function(et){this.destination.next(et)},_.prototype._error=function(et){try{this.destination.error(et)}finally{this.unsubscribe()}},_.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},_}(Subscription),ConsumerObserver=function(){function _e(_){this.partialObserver=_}return _e.prototype.next=function(_){var et=this.partialObserver;if(et.next)try{et.next(_)}catch(tt){handleUnhandledError(tt)}},_e.prototype.error=function(_){var et=this.partialObserver;if(et.error)try{et.error(_)}catch(tt){handleUnhandledError(tt)}else handleUnhandledError(_)},_e.prototype.complete=function(){var _=this.partialObserver;if(_.complete)try{_.complete()}catch(et){handleUnhandledError(et)}},_e}(),SafeSubscriber=function(_e){__extends$2(_,_e);function _(et,tt,nt){var it=_e.call(this)||this,at;return isFunction$4(et)||!et?at={next:et??void 0,error:tt??void 0,complete:nt??void 0}:at=et,it.destination=new ConsumerObserver(at),it}return _}(Subscriber);function handleUnhandledError(_e){reportUnhandledError(_e)}function defaultErrorHandler(_e){throw _e}var EMPTY_OBSERVER={closed:!0,next:noop$4,error:defaultErrorHandler,complete:noop$4},observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity$2(_e){return _e}function pipeFromArray(_e){return _e.length===0?identity$2:_e.length===1?_e[0]:function(et){return _e.reduce(function(tt,nt){return nt(tt)},et)}}var Observable=function(){function _e(_){_&&(this._subscribe=_)}return _e.prototype.lift=function(_){var et=new _e;return et.source=this,et.operator=_,et},_e.prototype.subscribe=function(_,et,tt){var nt=this,it=isSubscriber(_)?_:new SafeSubscriber(_,et,tt);return errorContext(function(){var at=nt,ot=at.operator,st=at.source;it.add(ot?ot.call(it,st):st?nt._subscribe(it):nt._trySubscribe(it))}),it},_e.prototype._trySubscribe=function(_){try{return this._subscribe(_)}catch(et){_.error(et)}},_e.prototype.forEach=function(_,et){var tt=this;return et=getPromiseCtor(et),new et(function(nt,it){var at=new SafeSubscriber({next:function(ot){try{_(ot)}catch(st){it(st),at.unsubscribe()}},error:it,complete:nt});tt.subscribe(at)})},_e.prototype._subscribe=function(_){var et;return(et=this.source)===null||et===void 0?void 0:et.subscribe(_)},_e.prototype[observable]=function(){return this},_e.prototype.pipe=function(){for(var _=[],et=0;et<arguments.length;et++)_[et]=arguments[et];return pipeFromArray(_)(this)},_e.prototype.toPromise=function(_){var et=this;return _=getPromiseCtor(_),new _(function(tt,nt){var it;et.subscribe(function(at){return it=at},function(at){return nt(at)},function(){return tt(it)})})},_e.create=function(_){return new _e(_)},_e}();function getPromiseCtor(_e){var _;return(_=_e??config$2.Promise)!==null&&_!==void 0?_:Promise}function isObserver(_e){return _e&&isFunction$4(_e.next)&&isFunction$4(_e.error)&&isFunction$4(_e.complete)}function isSubscriber(_e){return _e&&_e instanceof Subscriber||isObserver(_e)&&isSubscription(_e)}var ObjectUnsubscribedError=createErrorClass(function(_e){return function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject=function(_e){__extends$2(_,_e);function _(){var et=_e.call(this)||this;return et.closed=!1,et.currentObservers=null,et.observers=[],et.isStopped=!1,et.hasError=!1,et.thrownError=null,et}return _.prototype.lift=function(et){var tt=new AnonymousSubject(this,this);return tt.operator=et,tt},_.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError},_.prototype.next=function(et){var tt=this;errorContext(function(){var nt,it;if(tt._throwIfClosed(),!tt.isStopped){tt.currentObservers||(tt.currentObservers=Array.from(tt.observers));try{for(var at=__values(tt.currentObservers),ot=at.next();!ot.done;ot=at.next()){var st=ot.value;st.next(et)}}catch(dt){nt={error:dt}}finally{try{ot&&!ot.done&&(it=at.return)&&it.call(at)}finally{if(nt)throw nt.error}}}})},_.prototype.error=function(et){var tt=this;errorContext(function(){if(tt._throwIfClosed(),!tt.isStopped){tt.hasError=tt.isStopped=!0,tt.thrownError=et;for(var nt=tt.observers;nt.length;)nt.shift().error(et)}})},_.prototype.complete=function(){var et=this;errorContext(function(){if(et._throwIfClosed(),!et.isStopped){et.isStopped=!0;for(var tt=et.observers;tt.length;)tt.shift().complete()}})},_.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(_.prototype,"observed",{get:function(){var et;return((et=this.observers)===null||et===void 0?void 0:et.length)>0},enumerable:!1,configurable:!0}),_.prototype._trySubscribe=function(et){return this._throwIfClosed(),_e.prototype._trySubscribe.call(this,et)},_.prototype._subscribe=function(et){return this._throwIfClosed(),this._checkFinalizedStatuses(et),this._innerSubscribe(et)},_.prototype._innerSubscribe=function(et){var tt=this,nt=this,it=nt.hasError,at=nt.isStopped,ot=nt.observers;return it||at?EMPTY_SUBSCRIPTION:(this.currentObservers=null,ot.push(et),new Subscription(function(){tt.currentObservers=null,arrRemove(ot,et)}))},_.prototype._checkFinalizedStatuses=function(et){var tt=this,nt=tt.hasError,it=tt.thrownError,at=tt.isStopped;nt?et.error(it):at&&et.complete()},_.prototype.asObservable=function(){var et=new Observable;return et.source=this,et},_.create=function(et,tt){return new AnonymousSubject(et,tt)},_}(Observable),AnonymousSubject=function(_e){__extends$2(_,_e);function _(et,tt){var nt=_e.call(this)||this;return nt.destination=et,nt.source=tt,nt}return _.prototype.next=function(et){var tt,nt;(nt=(tt=this.destination)===null||tt===void 0?void 0:tt.next)===null||nt===void 0||nt.call(tt,et)},_.prototype.error=function(et){var tt,nt;(nt=(tt=this.destination)===null||tt===void 0?void 0:tt.error)===null||nt===void 0||nt.call(tt,et)},_.prototype.complete=function(){var et,tt;(tt=(et=this.destination)===null||et===void 0?void 0:et.complete)===null||tt===void 0||tt.call(et)},_.prototype._subscribe=function(et){var tt,nt;return(nt=(tt=this.source)===null||tt===void 0?void 0:tt.subscribe(et))!==null&&nt!==void 0?nt:EMPTY_SUBSCRIPTION},_}(Subject);const Gn=class Gn{constructor(){pn(this,"ws",null);pn(this,"messageSubject",new Subject);pn(this,"stateSubject",new Subject);pn(this,"currentState","CLOSED")}static getInstance(){return Gn.instance||(Gn.instance=new Gn),Gn.instance}initializeConnection(){this.sendMessage({type:"fetch-backgrounds"}),this.sendMessage({type:"fetch-configs"}),this.sendMessage({type:"fetch-history-list"}),this.sendMessage({type:"create-new-history"})}connect(_){var et,tt;(((et=this.ws)==null?void 0:et.readyState)===WebSocket.CONNECTING||((tt=this.ws)==null?void 0:tt.readyState)===WebSocket.OPEN)&&this.disconnect();try{this.ws=new WebSocket(_),this.currentState="CONNECTING",this.stateSubject.next("CONNECTING"),this.ws.onopen=()=>{this.currentState="OPEN",this.stateSubject.next("OPEN"),this.initializeConnection()},this.ws.onmessage=nt=>{try{const it=JSON.parse(nt.data);this.messageSubject.next(it)}catch(it){console.error("Failed to parse WebSocket message:",it),toaster.create({title:`Failed to parse WebSocket message: ${it}`,type:"error",duration:2e3})}},this.ws.onclose=()=>{this.currentState="CLOSED",this.stateSubject.next("CLOSED")},this.ws.onerror=()=>{this.currentState="CLOSED",this.stateSubject.next("CLOSED")}}catch(nt){console.error("Failed to connect to WebSocket:",nt),this.currentState="CLOSED",this.stateSubject.next("CLOSED")}}sendMessage(_){var et;((et=this.ws)==null?void 0:et.readyState)===WebSocket.OPEN?this.ws.send(JSON.stringify(_)):(console.warn("WebSocket is not open. Unable to send message:",_),toaster.create({title:"WebSocket is not open.",type:"error",duration:2e3}))}onMessage(_){return this.messageSubject.subscribe(_)}onStateChange(_){return this.stateSubject.subscribe(_)}disconnect(){var _;(_=this.ws)==null||_.close(),this.ws=null}getCurrentState(){return this.currentState}};pn(Gn,"instance");let WebSocketService=Gn;const wsService=WebSocketService.getInstance(),DEFAULT_WS_URL="ws://62.234.165.98:12393/client-ws",DEFAULT_BASE_URL="http://62.234.165.98:12393",WebSocketContext=React.createContext({sendMessage:wsService.sendMessage.bind(wsService),wsState:"CLOSED",reconnect:()=>wsService.connect(DEFAULT_WS_URL),wsUrl:DEFAULT_WS_URL,setWsUrl:()=>{},baseUrl:DEFAULT_BASE_URL,setBaseUrl:()=>{}});function useWebSocket(){const _e=reactExports.useContext(WebSocketContext);if(!_e)throw new Error("useWebSocket must be used within a WebSocketProvider");return _e}const defaultWsUrl=DEFAULT_WS_URL,defaultBaseUrl=DEFAULT_BASE_URL,BgUrlContext=reactExports.createContext(null);function BgUrlProvider({children:_e}){const{baseUrl:_}=useWebSocket(),et=`${_}/bg/ceiling-window-room-night.jpeg`,[tt,nt]=useLocalStorage("backgroundUrl",et),[it,at]=reactExports.useState([]),ot=reactExports.useCallback(()=>{nt(et)},[nt,et]),st=reactExports.useCallback(gt=>{at(mt=>[...mt,gt])},[]),dt=reactExports.useCallback(gt=>{at(mt=>mt.filter(vt=>vt.name!==gt))},[]),ht=reactExports.useMemo(()=>tt===et,[tt,et]),[ct,ut]=reactExports.useState(!1),ft=reactExports.useMemo(()=>({backgroundUrl:tt,setBackgroundUrl:nt,backgroundFiles:it,setBackgroundFiles:at,resetBackground:ot,addBackgroundFile:st,removeBackgroundFile:dt,isDefaultBackground:ht,useCameraBackground:ct,setUseCameraBackground:ut}),[tt,nt,it,ot,st,dt,ht,ct]);return jsxRuntimeExports.jsx(BgUrlContext.Provider,{value:ft,children:_e})}function useBgUrl(){const _e=reactExports.useContext(BgUrlContext);if(!_e)throw new Error("useBgUrl must be used within a BgUrlProvider");return _e}const Background=reactExports.memo(({children:_e})=>{const _=reactExports.useRef(null),{backgroundStream:et,isBackgroundStreaming:tt,startBackgroundCamera:nt,stopBackgroundCamera:it}=useCamera(),{useCameraBackground:at,backgroundUrl:ot}=useBgUrl();return reactExports.useEffect(()=>{at?nt():it()},[at,nt,it]),reactExports.useEffect(()=>{_.current&&et&&(_.current.srcObject=et)},[et]),jsxRuntimeExports.jsxs(Box,{...canvasStyles.background.container,children:[at?jsxRuntimeExports.jsx("video",{ref:_,autoPlay:!0,playsInline:!0,muted:!0,style:{...canvasStyles.background.video,display:tt?"block":"none",transform:"scaleX(-1)"}}):jsxRuntimeExports.jsx(Image$1,{...canvasStyles.background.image,src:ot,alt:"background"}),_e]})});Background.displayName="Background";const DEFAULT_SUBTITLE={text:"Hi, I'm some random AI VTuber. Who the hell are ya? Ahh, you must be amazed by my awesomeness, right? right?"},SubtitleContext=reactExports.createContext(null),SubtitleProvider=reactExports.memo(({children:_e})=>{const[_,et]=reactExports.useState(DEFAULT_SUBTITLE.text),[tt,nt]=reactExports.useState(!0),it=reactExports.useMemo(()=>({subtitleText:_,setSubtitleText:et,showSubtitle:tt,setShowSubtitle:nt}),[_,tt]);return jsxRuntimeExports.jsx(SubtitleContext.Provider,{value:it,children:_e})});function useSubtitle(){const _e=reactExports.useContext(SubtitleContext);if(!_e)throw new Error("useSubtitle must be used within a SubtitleProvider");return _e}const useSubtitleDisplay=()=>{const _e=useSubtitle();return{subtitleText:reactExports.useMemo(()=>_e?_e.subtitleText:null,[_e==null?void 0:_e.subtitleText]),isLoaded:!!_e}},SubtitleText=reactExports.memo(({text:_e})=>jsxRuntimeExports.jsx(Text$1,{...canvasStyles.subtitle.text,children:_e}));SubtitleText.displayName="SubtitleText";const Subtitle=reactExports.memo(()=>{const{subtitleText:_e,isLoaded:_}=useSubtitleDisplay(),{showSubtitle:et}=useSubtitle();return!_||!_e||!et?null:jsxRuntimeExports.jsx(Box,{...canvasStyles.subtitle.container,children:jsxRuntimeExports.jsx(SubtitleText,{text:_e})})});Subtitle.displayName="Subtitle";const useWSStatus=()=>{const{wsState:_e,reconnect:_}=useWebSocket(),et=reactExports.useCallback(()=>{_e!=="OPEN"&&_e!=="CONNECTING"&&_()},[_e,_]);return reactExports.useMemo(()=>{switch(_e){case"OPEN":return{color:"green.500",text:"",isDisconnected:!1,handleClick:et};case"CONNECTING":return{color:"yellow.500",text:"",isDisconnected:!1,handleClick:et};default:return{color:"red.500",text:"",isDisconnected:!0,handleClick:et}}},[_e,et])},StatusContent=({text:_e})=>_e,MemoizedStatusContent=reactExports.memo(StatusContent),WebSocketStatus=reactExports.memo(()=>{const{color:_e,text:_,handleClick:et,isDisconnected:tt}=useWSStatus();return jsxRuntimeExports.jsx(Box,{...canvasStyles.wsStatus.container,backgroundColor:_e,onClick:et,cursor:tt?"pointer":"default",_hover:{opacity:tt?.8:1},children:jsxRuntimeExports.jsx(MemoizedStatusContent,{text:_})})});WebSocketStatus.displayName="WebSocketStatus";const DEFAULT_CONFIG$1={confName:"",confUid:"",configFiles:[]},ConfigContext=reactExports.createContext(null);function CharacterConfigProvider({children:_e}){const[_,et]=reactExports.useState(DEFAULT_CONFIG$1.confName),[tt,nt]=reactExports.useState(DEFAULT_CONFIG$1.confUid),[it,at]=reactExports.useState(DEFAULT_CONFIG$1.configFiles),ot=reactExports.useCallback(dt=>{var ht;return(ht=it.find(ct=>ct.name===dt))==null?void 0:ht.filename},[it]),st=reactExports.useMemo(()=>({confName:_,confUid:tt,configFiles:it,setConfName:et,setConfUid:nt,setConfigFiles:at,getFilenameByName:ot}),[_,tt,it,ot]);return reactExports.useEffect(()=>{var dt,ht;(ht=(dt=window.api)==null?void 0:dt.updateConfigFiles)==null||ht.call(dt,it)},[it]),jsxRuntimeExports.jsx(ConfigContext.Provider,{value:st,children:_e})}function useConfig(){const _e=reactExports.useContext(ConfigContext);if(!_e)throw new Error("useConfig must be used within a CharacterConfigProvider");return _e}const DEFAULT_CONFIG={modelInfo:{scrollToResize:!0},isLoading:!1},Live2DConfigContext=reactExports.createContext(null);function Live2DConfigProvider({children:_e}){const{confUid:_}=useConfig(),[et,tt]=reactExports.useState(!1),[nt,it]=reactExports.useState(DEFAULT_CONFIG.isLoading);reactExports.useEffect(()=>{var mt;const gt=(mt=window.api)==null?void 0:mt.onModeChanged(vt=>{tt(vt==="pet")});return()=>gt==null?void 0:gt()},[]);const at=(gt,mt)=>`${gt}_${mt?"pet":"window"}`,[ot,st]=useLocalStorage("modelInfo",DEFAULT_CONFIG.modelInfo,{filter:gt=>gt&&{...gt,url:""}}),[dt,ht]=useLocalStorage("scale_memory",{}),ct=gt=>{if(gt!=null&&gt.url){if(!_){console.warn("Attempting to set model info without confUid"),toaster.create({title:"Attempting to set model info without confUid",type:"error",duration:2e3});return}if(JSON.stringify(gt)!==JSON.stringify(ot))if(gt){const mt=at(_,et);let vt;const yt=dt[mt];yt!==void 0?vt=yt:(vt=Number(gt.kScale||.001),ht(bt=>({...bt,[mt]:vt}))),console.log("finalScale",vt),st({...gt,kScale:vt,pointerInteractive:"pointerInteractive"in gt?gt.pointerInteractive:(ot==null?void 0:ot.pointerInteractive)??!1,scrollToResize:"scrollToResize"in gt?gt.scrollToResize:(ot==null?void 0:ot.scrollToResize)??!0})}else st(void 0)}},ut=reactExports.useCallback(gt=>{if(ot){const mt=at(_,et),vt=Number(gt.toFixed(8));ht(yt=>({...yt,[mt]:vt})),st({...ot,kScale:vt})}},[ot,_,et,ht,st]);reactExports.useEffect(()=>{if(ot){const gt=at(_,et),mt=dt[gt];mt!==void 0&&mt!==Number(ot.kScale)&&ct({...ot,kScale:mt})}},[et,ot]);const ft=reactExports.useMemo(()=>({modelInfo:ot,setModelInfo:ct,isLoading:nt,setIsLoading:it,updateModelScale:ut}),[ot,nt,ut]);return jsxRuntimeExports.jsx(Live2DConfigContext.Provider,{value:ft,children:_e})}function useLive2DConfig(){const _e=reactExports.useContext(Live2DConfigContext);if(!_e)throw new Error("useLive2DConfig must be used within a Live2DConfigProvider");return _e}var dist$2={},ortWeb_min={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(_e,_,et)=>{if(_&&typeof _.init=="function"&&typeof _.createSessionHandler=="function"){const tt=backends[_e];if(tt===void 0)backends[_e]={backend:_,priority:et};else{if(tt.priority>et)return;if(tt.priority===et&&tt.backend!==_)throw new Error(`cannot register backend "${_e}" using priority ${et}`)}if(et>=0){const nt=backendsSortedByPriority.indexOf(_e);nt!==-1&&backendsSortedByPriority.splice(nt,1);for(let it=0;it<backendsSortedByPriority.length;it++)if(backends[backendsSortedByPriority[it]].priority<=et){backendsSortedByPriority.splice(it,0,_e);return}backendsSortedByPriority.push(_e)}return}throw new TypeError("not a valid backend")},resolveBackend=async _e=>{const _=_e.length===0?backendsSortedByPriority:_e,et=[];for(const tt of _){const nt=backends[tt];if(nt){if(nt.initialized)return nt.backend;if(nt.aborted)continue;const it=!!nt.initPromise;try{return it||(nt.initPromise=nt.backend.init()),await nt.initPromise,nt.initialized=!0,nt.backend}catch(at){it||et.push({name:tt,err:at}),nt.aborted=!0}finally{delete nt.initPromise}}}throw new Error(`no available backend found. ERR: ${et.map(tt=>`[${tt.name}] ${tt.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(_){if(_!==void 0){if(typeof _!="string"||["verbose","info","warning","error","fatal"].indexOf(_)===-1)throw new Error(`Unsupported logging level: ${_}`);this.logLevelInternal=_}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=_e=>{let _=1;for(let et=0;et<_e.length;et++){const tt=_e[et];if(typeof tt!="number"||!Number.isSafeInteger(tt))throw new TypeError(`dims[${et}] must be an integer, got: ${tt}`);if(tt<0)throw new RangeError(`dims[${et}] must be a non-negative integer, got: ${tt}`);_*=tt}return _};let Tensor$1=class Un{constructor(_,et,tt){let nt,it,at;if(typeof _=="string")if(nt=_,at=tt,_==="string"){if(!Array.isArray(et))throw new TypeError("A string tensor's data must be a string array.");it=et}else{const st=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(_);if(st===void 0)throw new TypeError(`Unsupported tensor type: ${_}.`);if(Array.isArray(et))it=st.from(et);else if(et instanceof st)it=et;else throw new TypeError(`A ${nt} tensor's data must be type of ${st}`)}else if(at=et,Array.isArray(_)){if(_.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const st=typeof _[0];if(st==="string")nt="string",it=_;else if(st==="boolean")nt="bool",it=Uint8Array.from(_);else throw new TypeError(`Invalid element type of data array: ${st}.`)}else{const st=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(_.constructor);if(st===void 0)throw new TypeError(`Unsupported type for tensor data: ${_.constructor}.`);nt=st,it=_}if(at===void 0)at=[it.length];else if(!Array.isArray(at))throw new TypeError("A tensor's dims must be a number array");const ot=calculateSize(at);if(ot!==it.length)throw new Error(`Tensor's size(${ot}) does not match data length(${it.length}).`);this.dims=at,this.type=nt,this.data=it,this.size=ot}static bufferToTensor(_,et){if(_===void 0)throw new Error("Image buffer must be defined");if(et.height===void 0||et.width===void 0)throw new Error("Image height and width must be defined");const{height:tt,width:nt}=et,it=et.norm;let at,ot;it===void 0||it.mean===void 0?at=255:at=it.mean,it===void 0||it.bias===void 0?ot=0:ot=it.bias;const st=et.bitmapFormat!==void 0?et.bitmapFormat:"RGBA",dt=et.tensorFormat!==void 0&&et.tensorFormat!==void 0?et.tensorFormat:"RGB",ht=tt*nt,ct=dt==="RGBA"?new Float32Array(ht*4):new Float32Array(ht*3);let ut=4,ft=0,gt=1,mt=2,vt=3,yt=0,bt=ht,_t=ht*2,xt=-1;st==="RGB"&&(ut=3,ft=0,gt=1,mt=2,vt=-1),dt==="RGBA"?xt=ht*3:dt==="RBG"?(yt=0,_t=ht,bt=ht*2):dt==="BGR"&&(_t=0,bt=ht,yt=ht*2);for(let Tt=0;Tt<ht;Tt++,ft+=ut,mt+=ut,gt+=ut,vt+=ut)ct[yt++]=(_[ft]+ot)/at,ct[bt++]=(_[gt]+ot)/at,ct[_t++]=(_[mt]+ot)/at,xt!==-1&&vt!==-1&&(ct[xt++]=(_[vt]+ot)/at);return dt==="RGBA"?new Un("float32",ct,[1,4,tt,nt]):new Un("float32",ct,[1,3,tt,nt])}static async fromImage(_,et){const tt=typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement,nt=typeof ImageData<"u"&&_ instanceof ImageData,it=typeof ImageBitmap<"u"&&_ instanceof ImageBitmap,at=typeof String<"u"&&(_ instanceof String||typeof _=="string");let ot,st={};if(tt){const dt=document.createElement("canvas"),ht=dt.getContext("2d");if(ht!=null){let ct=_.naturalHeight,ut=_.naturalWidth;if(et!==void 0&&et.resizedHeight!==void 0&&et.resizedWidth!==void 0&&(ct=et.resizedHeight,ut=et.resizedWidth),et!==void 0){if(st=et,et.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(st.tensorFormat="RGBA",et.height!==void 0&&et.height!==ct)throw new Error("Image input config height doesn't match HTMLImageElement height");if(st.height=ct,et.width!==void 0&&et.width!==ut)throw new Error("Image input config width doesn't match HTMLImageElement width");st.width=ut}else st.tensorFormat="RGBA",st.height=ct,st.width=ut;dt.width=ut,dt.height=ct,ht.drawImage(_,0,0,ut,ct),ot=ht.getImageData(0,0,ut,ct).data}else throw new Error("Can not access image data")}else if(nt){const dt="RGBA";let ht,ct;if(et!==void 0&&et.resizedWidth!==void 0&&et.resizedHeight!==void 0?(ht=et.resizedHeight,ct=et.resizedWidth):(ht=_.height,ct=_.width),et!==void 0){if(st=et,et.bitmapFormat!==void 0&&et.bitmapFormat!==dt)throw new Error("Image input config format must be RGBA for ImageData");st.bitmapFormat="RGBA"}else st.bitmapFormat="RGBA";if(st.height=ht,st.width=ct,et!==void 0){const ut=document.createElement("canvas");ut.width=ct,ut.height=ht;const ft=ut.getContext("2d");if(ft!=null)ft.putImageData(_,0,0),ot=ft.getImageData(0,0,ct,ht).data;else throw new Error("Can not access image data")}else ot=_.data}else if(it){if(et===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(et.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const dt=document.createElement("canvas").getContext("2d");if(dt!=null){const ht=_.height,ct=_.width;if(dt.drawImage(_,0,0,ct,ht),ot=dt.getImageData(0,0,ct,ht).data,et!==void 0){if(et.height!==void 0&&et.height!==ht)throw new Error("Image input config height doesn't match ImageBitmap height");if(st.height=ht,et.width!==void 0&&et.width!==ct)throw new Error("Image input config width doesn't match ImageBitmap width");st.width=ct}else st.height=ht,st.width=ct;return Un.bufferToTensor(ot,st)}else throw new Error("Can not access image data")}else{if(at)return new Promise((dt,ht)=>{const ct=document.createElement("canvas"),ut=ct.getContext("2d");if(!_||!ut)return ht();const ft=new Image;ft.crossOrigin="Anonymous",ft.src=_,ft.onload=()=>{ct.width=ft.width,ct.height=ft.height,ut.drawImage(ft,0,0,ct.width,ct.height);const gt=ut.getImageData(0,0,ct.width,ct.height);if(et!==void 0){if(et.height!==void 0&&et.height!==ct.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(st.height=ct.height,et.width!==void 0&&et.width!==ct.width)throw new Error("Image input config width doesn't match ImageBitmap width");st.width=ct.width}else st.height=ct.height,st.width=ct.width;dt(Un.bufferToTensor(gt.data,st))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(ot!==void 0)return Un.bufferToTensor(ot,st);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(_){var et,tt;const nt=document.createElement("canvas").getContext("2d");let it;if(nt!=null){const at=this.dims[3],ot=this.dims[2],st=this.dims[1],dt=_!==void 0&&_.format!==void 0?_.format:"RGB",ht=_!==void 0&&((et=_.norm)===null||et===void 0?void 0:et.mean)!==void 0?_.norm.mean:255,ct=_!==void 0&&((tt=_.norm)===null||tt===void 0?void 0:tt.bias)!==void 0?_.norm.bias:0,ut=ot*at;if(_!==void 0){if(_.height!==void 0&&_.height!==ot)throw new Error("Image output config height doesn't match tensor height");if(_.width!==void 0&&_.width!==at)throw new Error("Image output config width doesn't match tensor width");if(_.format!==void 0&&st===4&&_.format!=="RGBA"||st===3&&_.format!=="RGB"&&_.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const ft=4;let gt=0,mt=1,vt=2,yt=3,bt=0,_t=ut,xt=ut*2,St=-1;dt==="RGBA"?(bt=0,_t=ut,xt=ut*2,St=ut*3):dt==="RGB"?(bt=0,_t=ut,xt=ut*2):dt==="RBG"&&(bt=0,xt=ut,_t=ut*2),it=nt.createImageData(at,ot);for(let Tt=0;Tt<ot*at;gt+=ft,mt+=ft,vt+=ft,yt+=ft,Tt++)it.data[gt]=(this.data[bt++]-ct)*ht,it.data[mt]=(this.data[_t++]-ct)*ht,it.data[vt]=(this.data[xt++]-ct)*ht,it.data[yt]=St===-1?255:(this.data[St++]-ct)*ht}else throw new Error("Can not access image data");return it}reshape(_){return new Un(this.type,this.data,_)}};const Tensor=Tensor$1;let InferenceSession$1=class xl{constructor(_){this.handler=_}async run(_,et,tt){const nt={};let it={};if(typeof _!="object"||_===null||_ instanceof Tensor||Array.isArray(_))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let at=!0;if(typeof et=="object"){if(et===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(et instanceof Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(et)){if(et.length===0)throw new TypeError("'fetches' cannot be an empty array.");at=!1;for(const dt of et){if(typeof dt!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(dt)===-1)throw new RangeError(`'fetches' contains invalid output name: ${dt}.`);nt[dt]=null}if(typeof tt=="object"&&tt!==null)it=tt;else if(typeof tt<"u")throw new TypeError("'options' must be an object.")}else{let dt=!1;const ht=Object.getOwnPropertyNames(et);for(const ct of this.outputNames)if(ht.indexOf(ct)!==-1){const ut=et[ct];(ut===null||ut instanceof Tensor)&&(dt=!0,at=!1,nt[ct]=ut)}if(dt){if(typeof tt=="object"&&tt!==null)it=tt;else if(typeof tt<"u")throw new TypeError("'options' must be an object.")}else it=et}}else if(typeof et<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const dt of this.inputNames)if(typeof _[dt]>"u")throw new Error(`input '${dt}' is missing in 'feeds'.`);if(at)for(const dt of this.outputNames)nt[dt]=null;const ot=await this.handler.run(_,nt,it),st={};for(const dt in ot)Object.hasOwnProperty.call(ot,dt)&&(st[dt]=new Tensor(ot[dt].type,ot[dt].data,ot[dt].dims));return st}static async create(_,et,tt,nt){let it,at={};if(typeof _=="string"){if(it=_,typeof et=="object"&&et!==null)at=et;else if(typeof et<"u")throw new TypeError("'options' must be an object.")}else if(_ instanceof Uint8Array){if(it=_,typeof et=="object"&&et!==null)at=et;else if(typeof et<"u")throw new TypeError("'options' must be an object.")}else if(_ instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&_ instanceof SharedArrayBuffer){const ct=_;let ut=0,ft=_.byteLength;if(typeof et=="object"&&et!==null)at=et;else if(typeof et=="number"){if(ut=et,!Number.isSafeInteger(ut))throw new RangeError("'byteOffset' must be an integer.");if(ut<0||ut>=ct.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${ct.byteLength}).`);if(ft=_.byteLength-ut,typeof tt=="number"){if(ft=tt,!Number.isSafeInteger(ft))throw new RangeError("'byteLength' must be an integer.");if(ft<=0||ut+ft>ct.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${ct.byteLength-ut}].`);if(typeof nt=="object"&&nt!==null)at=nt;else if(typeof nt<"u")throw new TypeError("'options' must be an object.")}else if(typeof tt<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof et<"u")throw new TypeError("'options' must be an object.");it=new Uint8Array(ct,ut,ft)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const st=(at.executionProviders||[]).map(ct=>typeof ct=="string"?ct:ct.name),ht=await(await resolveBackend(st)).createSessionHandler(it,at);return new xl(ht)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession=InferenceSession$1,lib$2=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession,Tensor,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(lib$2);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(_e,_){module.exports=_(require$$0$1)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(_e,_,et)=>{var tt,nt=(tt=(tt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(it){function at(){return Nt.buffer!=zt&&fr(Nt.buffer),Xt}function ot(){return Nt.buffer!=zt&&fr(Nt.buffer),Wt}function st(){return Nt.buffer!=zt&&fr(Nt.buffer),nr}function dt(){return Nt.buffer!=zt&&fr(Nt.buffer),Jt}function ht(){return Nt.buffer!=zt&&fr(Nt.buffer),lr}var ct,ut,ft;it=it||{},ct||(ct=it!==void 0?it:{}),ct.ready=new Promise(function(Dt,Bt){ut=Dt,ft=Bt});var gt,mt,vt,yt,bt,_t,xt=Object.assign({},ct),St="./this.program",Tt=(Dt,Bt)=>{throw Bt},wt=typeof window=="object",Ct=typeof importScripts=="function",Et=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",At=ct.ENVIRONMENT_IS_PTHREAD||!1,Pt="";function Rt(Dt){return ct.locateFile?ct.locateFile(Dt,Pt):Pt+Dt}if(Et){let Dt;Pt=Ct?et(908).dirname(Pt)+"/":"//",_t=()=>{bt||(yt=et(1384),bt=et(908))},gt=function(Bt,Ut){return _t(),Bt=bt.normalize(Bt),yt.readFileSync(Bt,Ut?void 0:"utf8")},vt=Bt=>((Bt=gt(Bt,!0)).buffer||(Bt=new Uint8Array(Bt)),Bt),mt=(Bt,Ut,Yt)=>{_t(),Bt=bt.normalize(Bt),yt.readFile(Bt,function(tr,cr){tr?Yt(tr):Ut(cr.buffer)})},1<process.argv.length&&(St=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Bt){if(!(Bt instanceof ln))throw Bt}),process.on("unhandledRejection",function(Bt){throw Bt}),Tt=(Bt,Ut)=>{if(Wr())throw process.exitCode=Bt,Ut;Ut instanceof ln||Lt("exiting due to exception: "+Ut),process.exit(Bt)},ct.inspect=function(){return"[Emscripten Module object]"};try{Dt=et(9925)}catch(Bt){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Bt}et.g.Worker=Dt.Worker}else(wt||Ct)&&(Ct?Pt=self.location.href:typeof document<"u"&&document.currentScript&&(Pt=document.currentScript.src),tt&&(Pt=tt),Pt=Pt.indexOf("blob:")!==0?Pt.substr(0,Pt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Et||(gt=Dt=>{var Bt=new XMLHttpRequest;return Bt.open("GET",Dt,!1),Bt.send(null),Bt.responseText},Ct&&(vt=Dt=>{var Bt=new XMLHttpRequest;return Bt.open("GET",Dt,!1),Bt.responseType="arraybuffer",Bt.send(null),new Uint8Array(Bt.response)}),mt=(Dt,Bt,Ut)=>{var Yt=new XMLHttpRequest;Yt.open("GET",Dt,!0),Yt.responseType="arraybuffer",Yt.onload=()=>{Yt.status==200||Yt.status==0&&Yt.response?Bt(Yt.response):Ut()},Yt.onerror=Ut,Yt.send(null)}));Et&&typeof performance>"u"&&(et.g.performance=et(6953).performance);var It=console.log.bind(console),Mt=console.warn.bind(console);Et&&(_t(),It=Dt=>yt.writeSync(1,Dt+`
`),Mt=Dt=>yt.writeSync(2,Dt+`
`));var Ot,$t=ct.print||It,Lt=ct.printErr||Mt;Object.assign(ct,xt),xt=null,ct.thisProgram&&(St=ct.thisProgram),ct.quit&&(Tt=ct.quit),ct.wasmBinary&&(Ot=ct.wasmBinary);var kt=ct.noExitRuntime||!1;typeof WebAssembly!="object"&&Or("no native wasm support detected");var Nt,Vt,zt,Xt,Wt,nr,Jt,lr,pr=!1,Zt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Kt(Dt,Bt,Ut){var Yt=(Bt>>>=0)+Ut;for(Ut=Bt;Dt[Ut]&&!(Ut>=Yt);)++Ut;if(16<Ut-Bt&&Dt.buffer&&Zt)return Zt.decode(Dt.buffer instanceof SharedArrayBuffer?Dt.slice(Bt,Ut):Dt.subarray(Bt,Ut));for(Yt="";Bt<Ut;){var tr=Dt[Bt++];if(128&tr){var cr=63&Dt[Bt++];if((224&tr)==192)Yt+=String.fromCharCode((31&tr)<<6|cr);else{var Ft=63&Dt[Bt++];65536>(tr=(240&tr)==224?(15&tr)<<12|cr<<6|Ft:(7&tr)<<18|cr<<12|Ft<<6|63&Dt[Bt++])?Yt+=String.fromCharCode(tr):(tr-=65536,Yt+=String.fromCharCode(55296|tr>>10,56320|1023&tr))}}else Yt+=String.fromCharCode(tr)}return Yt}function ur(Dt,Bt){return(Dt>>>=0)?Kt(ot(),Dt,Bt):""}function ir(Dt,Bt,Ut,Yt){if(!(0<Yt))return 0;var tr=Ut>>>=0;Yt=Ut+Yt-1;for(var cr=0;cr<Dt.length;++cr){var Ft=Dt.charCodeAt(cr);if(55296<=Ft&&57343>=Ft&&(Ft=65536+((1023&Ft)<<10)|1023&Dt.charCodeAt(++cr)),127>=Ft){if(Ut>=Yt)break;Bt[Ut++>>>0]=Ft}else{if(2047>=Ft){if(Ut+1>=Yt)break;Bt[Ut++>>>0]=192|Ft>>6}else{if(65535>=Ft){if(Ut+2>=Yt)break;Bt[Ut++>>>0]=224|Ft>>12}else{if(Ut+3>=Yt)break;Bt[Ut++>>>0]=240|Ft>>18,Bt[Ut++>>>0]=128|Ft>>12&63}Bt[Ut++>>>0]=128|Ft>>6&63}Bt[Ut++>>>0]=128|63&Ft}}return Bt[Ut>>>0]=0,Ut-tr}function hr(Dt){for(var Bt=0,Ut=0;Ut<Dt.length;++Ut){var Yt=Dt.charCodeAt(Ut);127>=Yt?Bt++:2047>=Yt?Bt+=2:55296<=Yt&&57343>=Yt?(Bt+=4,++Ut):Bt+=3}return Bt}function fr(Dt){zt=Dt,ct.HEAP8=Xt=new Int8Array(Dt),ct.HEAP16=new Int16Array(Dt),ct.HEAP32=nr=new Int32Array(Dt),ct.HEAPU8=Wt=new Uint8Array(Dt),ct.HEAPU16=new Uint16Array(Dt),ct.HEAPU32=Jt=new Uint32Array(Dt),ct.HEAPF32=new Float32Array(Dt),ct.HEAPF64=lr=new Float64Array(Dt)}At&&(zt=ct.buffer);var mr=ct.INITIAL_MEMORY||16777216;if(At)Nt=ct.wasmMemory,zt=ct.buffer;else if(ct.wasmMemory)Nt=ct.wasmMemory;else if(!((Nt=new WebAssembly.Memory({initial:mr/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw Lt("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Et&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Nt&&(zt=Nt.buffer),mr=zt.byteLength,fr(zt);var br,Er=[],kr=[],jr=[],Hr=[];function Wr(){return kt||!1}function Yr(){var Dt=ct.preRun.shift();Er.unshift(Dt)}var Br,Gr=0,Jr=null;function Or(Dt){throw At?postMessage({cmd:"onAbort",arg:Dt}):ct.onAbort&&ct.onAbort(Dt),Lt(Dt="Aborted("+Dt+")"),pr=!0,Dt=new WebAssembly.RuntimeError(Dt+". Build with -sASSERTIONS for more info."),ft(Dt),Dt}function Rn(){return Br.startsWith("data:application/octet-stream;base64,")}function An(){var Dt=Br;try{if(Dt==Br&&Ot)return new Uint8Array(Ot);if(vt)return vt(Dt);throw"both async and sync fetching of the wasm failed"}catch(Bt){Or(Bt)}}Br="ort-wasm-threaded.wasm",Rn()||(Br=Rt(Br));var _n={};function ln(Dt){this.name="ExitStatus",this.message="Program terminated with exit("+Dt+")",this.status=Dt}function xn(Dt){(Dt=Ar.Vb[Dt])||Or(),Ar.mc(Dt)}function Sn(Dt){var Bt=Ar.Cc();if(!Bt)return 6;Ar.ac.push(Bt),Ar.Vb[Dt.Ub]=Bt,Bt.Ub=Dt.Ub;var Ut={cmd:"run",start_routine:Dt.Ic,arg:Dt.zc,pthread_ptr:Dt.Ub};return Bt.$b=()=>{Ut.time=performance.now(),Bt.postMessage(Ut,Dt.Nc)},Bt.loaded&&(Bt.$b(),delete Bt.$b),0}function Qr(Dt){if(At)return yr(1,1,Dt);Wr()||(Ar.oc(),ct.onExit&&ct.onExit(Dt),pr=!0),Tt(Dt,new ln(Dt))}function Tn(Dt,Bt){if(!Bt&&At)throw Hn(Dt),"unwind";Wr()||At||(bo(),tn(jr),yo(0),Wn[1].length&&ro(1,10),Wn[2].length&&ro(2,10),Ar.oc()),Qr(Dt)}var Ar={Yb:[],ac:[],qc:[],Vb:{},fc:function(){At&&Ar.Ec()},Pc:function(){},Ec:function(){Ar.receiveObjectTransfer=Ar.Gc,Ar.threadInitTLS=Ar.pc,Ar.setExitStatus=Ar.nc,kt=!1},nc:function(){},oc:function(){for(var Dt of Object.values(Ar.Vb))Ar.mc(Dt);for(Dt of Ar.Yb)Dt.terminate();Ar.Yb=[]},mc:function(Dt){var Bt=Dt.Ub;delete Ar.Vb[Bt],Ar.Yb.push(Dt),Ar.ac.splice(Ar.ac.indexOf(Dt),1),Dt.Ub=0,Zn(Bt)},Gc:function(){},pc:function(){Ar.qc.forEach(Dt=>Dt())},Fc:function(Dt,Bt){Dt.onmessage=Ut=>{var Yt=(Ut=Ut.data).cmd;if(Dt.Ub&&(Ar.Bc=Dt.Ub),Ut.targetThread&&Ut.targetThread!=Xn()){var tr=Ar.Vb[Ut.Qc];tr?tr.postMessage(Ut,Ut.transferList):Lt('Internal error! Worker sent a message "'+Yt+'" to target pthread '+Ut.targetThread+", but that thread no longer exists!")}else Yt==="processProxyingQueue"?qt(Ut.queue):Yt==="spawnThread"?Sn(Ut):Yt==="cleanupThread"?xn(Ut.thread):Yt==="killThread"?(Ut=Ut.thread,Yt=Ar.Vb[Ut],delete Ar.Vb[Ut],Yt.terminate(),Zn(Ut),Ar.ac.splice(Ar.ac.indexOf(Yt),1),Yt.Ub=0):Yt==="cancelThread"?Ar.Vb[Ut.thread].postMessage({cmd:"cancel"}):Yt==="loaded"?(Dt.loaded=!0,Bt&&Bt(Dt),Dt.$b&&(Dt.$b(),delete Dt.$b)):Yt==="print"?$t("Thread "+Ut.threadId+": "+Ut.text):Yt==="printErr"?Lt("Thread "+Ut.threadId+": "+Ut.text):Yt==="alert"?alert("Thread "+Ut.threadId+": "+Ut.text):Ut.target==="setimmediate"?Dt.postMessage(Ut):Yt==="onAbort"?ct.onAbort&&ct.onAbort(Ut.arg):Yt&&Lt("worker sent an unknown command "+Yt);Ar.Bc=void 0},Dt.onerror=Ut=>{throw Lt("worker sent an error! "+Ut.filename+":"+Ut.lineno+": "+Ut.message),Ut},Et&&(Dt.on("message",function(Ut){Dt.onmessage({data:Ut})}),Dt.on("error",function(Ut){Dt.onerror(Ut)}),Dt.on("detachedExit",function(){})),Dt.postMessage({cmd:"load",urlOrBlob:ct.mainScriptUrlOrBlob||tt,wasmMemory:Nt,wasmModule:Vt})},yc:function(){var Dt=Rt("ort-wasm-threaded.worker.js");Ar.Yb.push(new Worker(Dt))},Cc:function(){return Ar.Yb.length==0&&(Ar.yc(),Ar.Fc(Ar.Yb[0])),Ar.Yb.pop()}};function tn(Dt){for(;0<Dt.length;)Dt.shift()(ct)}function wn(Dt){var Bt=Rr();return Dt=Dt(),$r(Bt),Dt}function Hn(Dt){if(At)return yr(2,0,Dt);try{Tn(Dt)}catch(Bt){Bt instanceof ln||Bt=="unwind"||Tt(1,Bt)}}ct.PThread=Ar,ct.establishStackSpace=function(){var Dt=Xn(),Bt=st()[Dt+44>>2>>>0];Dt=st()[Dt+48>>2>>>0],To(Bt,Bt-Dt),$r(Bt)};var un=[];function zr(Dt){var Bt=un[Dt];return Bt||(Dt>=un.length&&(un.length=Dt+1),un[Dt]=Bt=br.get(Dt)),Bt}ct.invokeEntryPoint=function(Dt,Bt){Dt=zr(Dt)(Bt),Wr()?Ar.nc(Dt):So(Dt)};var mn,hn,En=[],Cr=0,Pr=0;function Ir(Dt){this.Zb=Dt,this.Sb=Dt-24,this.xc=function(Bt){dt()[this.Sb+4>>2>>>0]=Bt},this.bc=function(){return dt()[this.Sb+4>>2>>>0]},this.wc=function(Bt){dt()[this.Sb+8>>2>>>0]=Bt},this.Dc=function(){return dt()[this.Sb+8>>2>>>0]},this.rc=function(){st()[this.Sb>>2>>>0]=0},this.hc=function(Bt){Bt=Bt?1:0,at()[this.Sb+12>>0>>>0]=Bt},this.uc=function(){return at()[this.Sb+12>>0>>>0]!=0},this.ic=function(Bt){Bt=Bt?1:0,at()[this.Sb+13>>0>>>0]=Bt},this.kc=function(){return at()[this.Sb+13>>0>>>0]!=0},this.fc=function(Bt,Ut){this.cc(0),this.xc(Bt),this.wc(Ut),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(st(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(st(),this.Sb>>2,1)===1},this.cc=function(Bt){dt()[this.Sb+16>>2>>>0]=Bt},this.tc=function(){return dt()[this.Sb+16>>2>>>0]},this.vc=function(){if(zn(this.bc()))return dt()[this.Zb>>2>>>0];var Bt=this.tc();return Bt!==0?Bt:this.Zb}}function Mn(Dt){return qn(new Ir(Dt).Sb)}function Cn(Dt,Bt,Ut,Yt){return At?yr(3,1,Dt,Bt,Ut,Yt):$n(Dt,Bt,Ut,Yt)}function $n(Dt,Bt,Ut,Yt){if(typeof SharedArrayBuffer>"u")return Lt("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var tr=[];return At&&tr.length===0?Cn(Dt,Bt,Ut,Yt):(Dt={Ic:Ut,Ub:Dt,zc:Yt,Nc:tr},At?(Dt.Oc="spawnThread",postMessage(Dt,tr),0):Sn(Dt))}function nn(Dt,Bt,Ut){return At?yr(4,1,Dt,Bt,Ut):0}function On(Dt,Bt){if(At)return yr(5,1,Dt,Bt)}function Dn(Dt,Bt){if(At)return yr(6,1,Dt,Bt)}function Ln(Dt,Bt,Ut){if(At)return yr(7,1,Dt,Bt,Ut)}function kn(Dt,Bt,Ut){return At?yr(8,1,Dt,Bt,Ut):0}function Nn(Dt,Bt){if(At)return yr(9,1,Dt,Bt)}function cn(Dt,Bt,Ut){if(At)return yr(10,1,Dt,Bt,Ut)}function Fn(Dt,Bt,Ut,Yt){if(At)return yr(11,1,Dt,Bt,Ut,Yt)}function Bn(Dt,Bt,Ut,Yt){if(At)return yr(12,1,Dt,Bt,Ut,Yt)}function Vn(Dt,Bt,Ut,Yt){if(At)return yr(13,1,Dt,Bt,Ut,Yt)}function jn(Dt){if(At)return yr(14,1,Dt)}function jt(Dt,Bt){if(At)return yr(15,1,Dt,Bt)}function Gt(Dt,Bt,Ut){if(At)return yr(16,1,Dt,Bt,Ut)}function qt(Dt){Atomics.store(st(),Dt>>2,1),Xn()&&xo(Dt),Atomics.compareExchange(st(),Dt>>2,1,0)}function er(Dt){return dt()[Dt>>>2]+4294967296*st()[Dt+4>>>2]}function ar(Dt,Bt,Ut,Yt,tr,cr){return At?yr(17,1,Dt,Bt,Ut,Yt,tr,cr):-52}function dr(Dt,Bt,Ut,Yt,tr,cr){if(At)return yr(18,1,Dt,Bt,Ut,Yt,tr,cr)}function vr(Dt){var Bt=hr(Dt)+1,Ut=Pn(Bt);return Ut&&ir(Dt,at(),Ut,Bt),Ut}function Sr(Dt,Bt,Ut){function Yt(gr){return(gr=gr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?gr[1]:"GMT"}if(At)return yr(19,1,Dt,Bt,Ut);var tr=new Date().getFullYear(),cr=new Date(tr,0,1),Ft=new Date(tr,6,1);tr=cr.getTimezoneOffset();var Ht=Ft.getTimezoneOffset(),Qt=Math.max(tr,Ht);st()[Dt>>2>>>0]=60*Qt,st()[Bt>>2>>>0]=+(tr!=Ht),Dt=Yt(cr),Bt=Yt(Ft),Dt=vr(Dt),Bt=vr(Bt),Ht<tr?(dt()[Ut>>2>>>0]=Dt,dt()[Ut+4>>2>>>0]=Bt):(dt()[Ut>>2>>>0]=Bt,dt()[Ut+4>>2>>>0]=Dt)}function yr(Dt,Bt){var Ut=arguments.length-2,Yt=arguments;return wn(()=>{for(var tr=io(8*Ut),cr=tr>>3,Ft=0;Ft<Ut;Ft++){var Ht=Yt[2+Ft];ht()[cr+Ft>>>0]=Ht}return _o(Dt,Ut,tr,Bt)})}ct.executeNotifiedProxyingQueue=qt,hn=Et?()=>{var Dt=process.hrtime();return 1e3*Dt[0]+Dt[1]/1e6}:At?()=>performance.now()-ct.__performance_now_clock_drift:()=>performance.now();var Mr,Ur=[],Kr={};function Zr(){if(!Mr){var Dt,Bt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:St||"./this.program"};for(Dt in Kr)Kr[Dt]===void 0?delete Bt[Dt]:Bt[Dt]=Kr[Dt];var Ut=[];for(Dt in Bt)Ut.push(Dt+"="+Bt[Dt]);Mr=Ut}return Mr}function sr(Dt,Bt){if(At)return yr(20,1,Dt,Bt);var Ut=0;return Zr().forEach(function(Yt,tr){var cr=Bt+Ut;for(tr=dt()[Dt+4*tr>>2>>>0]=cr,cr=0;cr<Yt.length;++cr)at()[tr++>>0>>>0]=Yt.charCodeAt(cr);at()[tr>>0>>>0]=0,Ut+=Yt.length+1}),0}function Lr(Dt,Bt){if(At)return yr(21,1,Dt,Bt);var Ut=Zr();dt()[Dt>>2>>>0]=Ut.length;var Yt=0;return Ut.forEach(function(tr){Yt+=tr.length+1}),dt()[Bt>>2>>>0]=Yt,0}function Xr(Dt){return At?yr(22,1,Dt):52}function an(Dt,Bt,Ut,Yt){return At?yr(23,1,Dt,Bt,Ut,Yt):52}function fn(Dt,Bt,Ut,Yt,tr){return At?yr(24,1,Dt,Bt,Ut,Yt,tr):70}var Wn=[null,[],[]];function ro(Dt,Bt){var Ut=Wn[Dt];Bt===0||Bt===10?((Dt===1?$t:Lt)(Kt(Ut,0)),Ut.length=0):Ut.push(Bt)}function po(Dt,Bt,Ut,Yt){if(At)return yr(25,1,Dt,Bt,Ut,Yt);for(var tr=0,cr=0;cr<Ut;cr++){var Ft=dt()[Bt>>2>>>0],Ht=dt()[Bt+4>>2>>>0];Bt+=8;for(var Qt=0;Qt<Ht;Qt++)ro(Dt,ot()[Ft+Qt>>>0]);tr+=Ht}return dt()[Yt>>2>>>0]=tr,0}var rn=0;function Yn(Dt){return Dt%4==0&&(Dt%100!=0||Dt%400==0)}var go=[31,29,31,30,31,30,31,31,30,31,30,31],mo=[31,28,31,30,31,30,31,31,30,31,30,31];function vo(Dt,Bt,Ut,Yt){function tr(rr,_r,Vr){for(rr=typeof rr=="number"?rr.toString():rr||"";rr.length<_r;)rr=Vr[0]+rr;return rr}function cr(rr,_r){return tr(rr,_r,"0")}function Ft(rr,_r){function Vr(dn){return 0>dn?-1:0<dn?1:0}var qr;return(qr=Vr(rr.getFullYear()-_r.getFullYear()))===0&&(qr=Vr(rr.getMonth()-_r.getMonth()))===0&&(qr=Vr(rr.getDate()-_r.getDate())),qr}function Ht(rr){switch(rr.getDay()){case 0:return new Date(rr.getFullYear()-1,11,29);case 1:return rr;case 2:return new Date(rr.getFullYear(),0,3);case 3:return new Date(rr.getFullYear(),0,2);case 4:return new Date(rr.getFullYear(),0,1);case 5:return new Date(rr.getFullYear()-1,11,31);case 6:return new Date(rr.getFullYear()-1,11,30)}}function Qt(rr){var _r=rr.Wb;for(rr=new Date(new Date(rr.Xb+1900,0,1).getTime());0<_r;){var Vr=rr.getMonth(),qr=(Yn(rr.getFullYear())?go:mo)[Vr];if(!(_r>qr-rr.getDate())){rr.setDate(rr.getDate()+_r);break}_r-=qr-rr.getDate()+1,rr.setDate(1),11>Vr?rr.setMonth(Vr+1):(rr.setMonth(0),rr.setFullYear(rr.getFullYear()+1))}return Vr=new Date(rr.getFullYear()+1,0,4),_r=Ht(new Date(rr.getFullYear(),0,4)),Vr=Ht(Vr),0>=Ft(_r,rr)?0>=Ft(Vr,rr)?rr.getFullYear()+1:rr.getFullYear():rr.getFullYear()-1}var gr=st()[Yt+40>>2>>>0];for(var wr in Yt={Lc:st()[Yt>>2>>>0],Kc:st()[Yt+4>>2>>>0],dc:st()[Yt+8>>2>>>0],jc:st()[Yt+12>>2>>>0],ec:st()[Yt+16>>2>>>0],Xb:st()[Yt+20>>2>>>0],Tb:st()[Yt+24>>2>>>0],Wb:st()[Yt+28>>2>>>0],Rc:st()[Yt+32>>2>>>0],Jc:st()[Yt+36>>2>>>0],Mc:gr?ur(gr):""},Ut=ur(Ut),gr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Ut=Ut.replace(new RegExp(wr,"g"),gr[wr]);var Nr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Fr="January February March April May June July August September October November December".split(" ");for(wr in gr={"%a":function(rr){return Nr[rr.Tb].substring(0,3)},"%A":function(rr){return Nr[rr.Tb]},"%b":function(rr){return Fr[rr.ec].substring(0,3)},"%B":function(rr){return Fr[rr.ec]},"%C":function(rr){return cr((rr.Xb+1900)/100|0,2)},"%d":function(rr){return cr(rr.jc,2)},"%e":function(rr){return tr(rr.jc,2," ")},"%g":function(rr){return Qt(rr).toString().substring(2)},"%G":function(rr){return Qt(rr)},"%H":function(rr){return cr(rr.dc,2)},"%I":function(rr){return(rr=rr.dc)==0?rr=12:12<rr&&(rr-=12),cr(rr,2)},"%j":function(rr){for(var _r=0,Vr=0;Vr<=rr.ec-1;_r+=(Yn(rr.Xb+1900)?go:mo)[Vr++]);return cr(rr.jc+_r,3)},"%m":function(rr){return cr(rr.ec+1,2)},"%M":function(rr){return cr(rr.Kc,2)},"%n":function(){return`
`},"%p":function(rr){return 0<=rr.dc&&12>rr.dc?"AM":"PM"},"%S":function(rr){return cr(rr.Lc,2)},"%t":function(){return"	"},"%u":function(rr){return rr.Tb||7},"%U":function(rr){return cr(Math.floor((rr.Wb+7-rr.Tb)/7),2)},"%V":function(rr){var _r=Math.floor((rr.Wb+7-(rr.Tb+6)%7)/7);if(2>=(rr.Tb+371-rr.Wb-2)%7&&_r++,_r)_r==53&&((Vr=(rr.Tb+371-rr.Wb)%7)==4||Vr==3&&Yn(rr.Xb)||(_r=1));else{_r=52;var Vr=(rr.Tb+7-rr.Wb-1)%7;(Vr==4||Vr==5&&Yn(rr.Xb%400-1))&&_r++}return cr(_r,2)},"%w":function(rr){return rr.Tb},"%W":function(rr){return cr(Math.floor((rr.Wb+7-(rr.Tb+6)%7)/7),2)},"%y":function(rr){return(rr.Xb+1900).toString().substring(2)},"%Y":function(rr){return rr.Xb+1900},"%z":function(rr){var _r=0<=(rr=rr.Jc);return rr=Math.abs(rr)/60,(_r?"+":"-")+("0000"+(rr/60*100+rr%60)).slice(-4)},"%Z":function(rr){return rr.Mc},"%%":function(){return"%"}},Ut=Ut.replace(/%%/g,"\0\0"),gr)Ut.includes(wr)&&(Ut=Ut.replace(new RegExp(wr,"g"),gr[wr](Yt)));return wr=function(rr){var _r=Array(hr(rr)+1);return ir(rr,_r,0,_r.length),_r}(Ut=Ut.replace(/\0\0/g,"%")),wr.length>Bt?0:(function(rr,_r){at().set(rr,_r>>>0)}(wr,Dt),wr.length-1)}Ar.fc();var Oo=[null,Qr,Hn,Cn,nn,On,Dn,Ln,kn,Nn,cn,Fn,Bn,Vn,jn,jt,Gt,ar,dr,Sr,sr,Lr,Xr,an,fn,po],Do={b:function(Dt){return Pn(Dt+24)+24},n:function(Dt){return(Dt=new Ir(Dt)).uc()||(Dt.hc(!0),Cr--),Dt.ic(!1),En.push(Dt),Dt.sc(),Dt.vc()},ma:function(Dt){throw Lt("Unexpected exception thrown, this is not properly supported - aborting"),pr=!0,Dt},x:function(){Dr(0);var Dt=En.pop();if(Dt.Hc()&&!Dt.kc()){var Bt=Dt.Dc();Bt&&zr(Bt)(Dt.Zb),Mn(Dt.Zb)}Pr=0},e:function(){var Dt=Pr;if(!Dt)return rn=0;var Bt=new Ir(Dt);Bt.cc(Dt);var Ut=Bt.bc();if(!Ut)return rn=0,Dt;for(var Yt=Array.prototype.slice.call(arguments),tr=0;tr<Yt.length;tr++){var cr=Yt[tr];if(cr===0||cr===Ut)break;if(Qn(cr,Ut,Bt.Sb+16))return rn=cr,Dt}return rn=Ut,Dt},l:function(){var Dt=Pr;if(!Dt)return rn=0;var Bt=new Ir(Dt);Bt.cc(Dt);var Ut=Bt.bc();if(!Ut)return rn=0,Dt;for(var Yt=Array.prototype.slice.call(arguments),tr=0;tr<Yt.length;tr++){var cr=Yt[tr];if(cr===0||cr===Ut)break;if(Qn(cr,Ut,Bt.Sb+16))return rn=cr,Dt}return rn=Ut,Dt},h:function(){var Dt=Pr;if(!Dt)return rn=0;var Bt=new Ir(Dt);Bt.cc(Dt);var Ut=Bt.bc();if(!Ut)return rn=0,Dt;for(var Yt=Array.prototype.slice.call(arguments),tr=0;tr<Yt.length;tr++){var cr=Yt[tr];if(cr===0||cr===Ut)break;if(Qn(cr,Ut,Bt.Sb+16))return rn=cr,Dt}return rn=Ut,Dt},t:Mn,M:function(){var Dt=En.pop();Dt||Or("no exception to throw");var Bt=Dt.Zb;throw Dt.kc()||(En.push(Dt),Dt.ic(!0),Dt.hc(!1),Cr++),Pr=Bt,Bt},c:function(Dt,Bt,Ut){throw new Ir(Dt).fc(Bt,Ut),Pr=Dt,Cr++,Dt},pa:function(){return Cr},Fa:function(Dt){no(Dt,!Ct,1,!wt),Ar.pc()},T:function(Dt){At?postMessage({cmd:"cleanupThread",thread:Dt}):xn(Dt)},xa:$n,j:function(Dt){throw Pr||(Pr=Dt),Dt},H:nn,Ma:On,ua:Dn,wa:Ln,oa:kn,Ka:Nn,Ca:cn,Ja:Fn,V:Bn,va:Vn,sa:jn,La:jt,ta:Gt,Ta:function(){},X:function(){Or("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){Or("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(Dt,Bt,Ut,Yt){if(Dt==Bt)setTimeout(()=>qt(Yt));else if(At)postMessage({targetThread:Dt,cmd:"processProxyingQueue",queue:Yt});else{if(!(Dt=Ar.Vb[Dt]))return;Dt.postMessage({cmd:"processProxyingQueue",queue:Yt})}return 1},Ea:function(){return-1},Pa:function(Dt,Bt){Dt=new Date(1e3*er(Dt)),st()[Bt>>2>>>0]=Dt.getUTCSeconds(),st()[Bt+4>>2>>>0]=Dt.getUTCMinutes(),st()[Bt+8>>2>>>0]=Dt.getUTCHours(),st()[Bt+12>>2>>>0]=Dt.getUTCDate(),st()[Bt+16>>2>>>0]=Dt.getUTCMonth(),st()[Bt+20>>2>>>0]=Dt.getUTCFullYear()-1900,st()[Bt+24>>2>>>0]=Dt.getUTCDay(),Dt=(Dt.getTime()-Date.UTC(Dt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,st()[Bt+28>>2>>>0]=Dt},Qa:function(Dt,Bt){Dt=new Date(1e3*er(Dt)),st()[Bt>>2>>>0]=Dt.getSeconds(),st()[Bt+4>>2>>>0]=Dt.getMinutes(),st()[Bt+8>>2>>>0]=Dt.getHours(),st()[Bt+12>>2>>>0]=Dt.getDate(),st()[Bt+16>>2>>>0]=Dt.getMonth(),st()[Bt+20>>2>>>0]=Dt.getFullYear()-1900,st()[Bt+24>>2>>>0]=Dt.getDay();var Ut=new Date(Dt.getFullYear(),0,1),Yt=(Dt.getTime()-Ut.getTime())/864e5|0;st()[Bt+28>>2>>>0]=Yt,st()[Bt+36>>2>>>0]=-60*Dt.getTimezoneOffset(),Yt=new Date(Dt.getFullYear(),6,1).getTimezoneOffset(),Dt=0|(Yt!=(Ut=Ut.getTimezoneOffset())&&Dt.getTimezoneOffset()==Math.min(Ut,Yt)),st()[Bt+32>>2>>>0]=Dt},Ra:function(Dt){var Bt=new Date(st()[Dt+20>>2>>>0]+1900,st()[Dt+16>>2>>>0],st()[Dt+12>>2>>>0],st()[Dt+8>>2>>>0],st()[Dt+4>>2>>>0],st()[Dt>>2>>>0],0),Ut=st()[Dt+32>>2>>>0],Yt=Bt.getTimezoneOffset(),tr=new Date(Bt.getFullYear(),0,1),cr=new Date(Bt.getFullYear(),6,1).getTimezoneOffset(),Ft=tr.getTimezoneOffset(),Ht=Math.min(Ft,cr);return 0>Ut?st()[Dt+32>>2>>>0]=+(cr!=Ft&&Ht==Yt):0<Ut!=(Ht==Yt)&&(cr=Math.max(Ft,cr),Bt.setTime(Bt.getTime()+6e4*((0<Ut?Ht:cr)-Yt))),st()[Dt+24>>2>>>0]=Bt.getDay(),Ut=(Bt.getTime()-tr.getTime())/864e5|0,st()[Dt+28>>2>>>0]=Ut,st()[Dt>>2>>>0]=Bt.getSeconds(),st()[Dt+4>>2>>>0]=Bt.getMinutes(),st()[Dt+8>>2>>>0]=Bt.getHours(),st()[Dt+12>>2>>>0]=Bt.getDate(),st()[Dt+16>>2>>>0]=Bt.getMonth(),Bt.getTime()/1e3|0},Aa:ar,Ba:dr,Sa:function Dt(Bt,Ut,Yt){Dt.Ac||(Dt.Ac=!0,Sr(Bt,Ut,Yt))},y:function(){Or("")},U:function(){if(!Et&&!Ct){var Dt="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";mn||(mn={}),mn[Dt]||(mn[Dt]=1,Et&&(Dt="warning: "+Dt),Lt(Dt))}},ra:function(){return 4294901760},B:hn,Ia:function(Dt,Bt,Ut){ot().copyWithin(Dt>>>0,Bt>>>0,Bt+Ut>>>0)},F:function(){return Et?et(3993).cpus().length:navigator.hardwareConcurrency},Da:function(Dt,Bt,Ut){Ur.length=Bt,Ut>>=3;for(var Yt=0;Yt<Bt;Yt++)Ur[Yt]=ht()[Ut+Yt>>>0];return(0>Dt?_n[-Dt-1]:Oo[Dt]).apply(null,Ur)},qa:function(Dt){var Bt=ot().length;if((Dt>>>=0)<=Bt||4294901760<Dt)return!1;for(var Ut=1;4>=Ut;Ut*=2){var Yt=Bt*(1+.2/Ut);Yt=Math.min(Yt,Dt+100663296);var tr=Math;Yt=Math.max(Dt,Yt),tr=tr.min.call(tr,4294901760,Yt+(65536-Yt%65536)%65536);e:{try{Nt.grow(tr-zt.byteLength+65535>>>16),fr(Nt.buffer);var cr=1;break e}catch{}cr=void 0}if(cr)return!0}return!1},Na:function(){throw"unwind"},Ga:sr,Ha:Lr,J:Tn,I:Xr,S:an,ga:fn,R:po,d:function(){return rn},na:function Dt(Bt,Ut){Dt.lc||(Dt.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var tr=new Uint8Array(1);return()=>(crypto.getRandomValues(tr),tr[0])}if(Et)try{var cr=et(Object(function(){var Ft=new Error("Cannot find module 'crypto'");throw Ft.code="MODULE_NOT_FOUND",Ft}()));return()=>cr.randomBytes(1)[0]}catch{}return()=>Or("randomDevice")}());for(var Yt=0;Yt<Ut;Yt++)at()[Bt+Yt>>0>>>0]=Dt.lc();return 0},ia:function(Dt,Bt,Ut){var Yt=Rr();try{return zr(Dt)(Bt,Ut)}catch(tr){if($r(Yt),tr!==tr+0)throw tr;Dr(1,0)}},ja:function(Dt,Bt,Ut){var Yt=Rr();try{return zr(Dt)(Bt,Ut)}catch(tr){if($r(Yt),tr!==tr+0)throw tr;Dr(1,0)}},K:function(Dt){var Bt=Rr();try{return zr(Dt)()}catch(Ut){if($r(Bt),Ut!==Ut+0)throw Ut;Dr(1,0)}},f:function(Dt,Bt){var Ut=Rr();try{return zr(Dt)(Bt)}catch(Yt){if($r(Ut),Yt!==Yt+0)throw Yt;Dr(1,0)}},P:function(Dt,Bt,Ut){var Yt=Rr();try{return zr(Dt)(Bt,Ut)}catch(tr){if($r(Yt),tr!==tr+0)throw tr;Dr(1,0)}},Q:function(Dt,Bt,Ut){var Yt=Rr();try{return zr(Dt)(Bt,Ut)}catch(tr){if($r(Yt),tr!==tr+0)throw tr;Dr(1,0)}},k:function(Dt,Bt,Ut){var Yt=Rr();try{return zr(Dt)(Bt,Ut)}catch(tr){if($r(Yt),tr!==tr+0)throw tr;Dr(1,0)}},p:function(Dt,Bt,Ut,Yt){var tr=Rr();try{return zr(Dt)(Bt,Ut,Yt)}catch(cr){if($r(tr),cr!==cr+0)throw cr;Dr(1,0)}},q:function(Dt,Bt,Ut,Yt,tr){var cr=Rr();try{return zr(Dt)(Bt,Ut,Yt,tr)}catch(Ft){if($r(cr),Ft!==Ft+0)throw Ft;Dr(1,0)}},N:function(Dt,Bt,Ut,Yt,tr,cr){var Ft=Rr();try{return zr(Dt)(Bt,Ut,Yt,tr,cr)}catch(Ht){if($r(Ft),Ht!==Ht+0)throw Ht;Dr(1,0)}},s:function(Dt,Bt,Ut,Yt,tr,cr){var Ft=Rr();try{return zr(Dt)(Bt,Ut,Yt,tr,cr)}catch(Ht){if($r(Ft),Ht!==Ht+0)throw Ht;Dr(1,0)}},w:function(Dt,Bt,Ut,Yt,tr,cr,Ft){var Ht=Rr();try{return zr(Dt)(Bt,Ut,Yt,tr,cr,Ft)}catch(Qt){if($r(Ht),Qt!==Qt+0)throw Qt;Dr(1,0)}},L:function(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht){var Qt=Rr();try{return zr(Dt)(Bt,Ut,Yt,tr,cr,Ft,Ht)}catch(gr){if($r(Qt),gr!==gr+0)throw gr;Dr(1,0)}},E:function(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht,Qt,gr,wr,Nr){var Fr=Rr();try{return zr(Dt)(Bt,Ut,Yt,tr,cr,Ft,Ht,Qt,gr,wr,Nr)}catch(rr){if($r(Fr),rr!==rr+0)throw rr;Dr(1,0)}},aa:function(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht){var Qt=Rr();try{return In(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht)}catch(gr){if($r(Qt),gr!==gr+0)throw gr;Dr(1,0)}},_:function(Dt,Bt,Ut,Yt,tr,cr,Ft){var Ht=Rr();try{return _i(Dt,Bt,Ut,Yt,tr,cr,Ft)}catch(Qt){if($r(Ht),Qt!==Qt+0)throw Qt;Dr(1,0)}},Z:function(Dt,Bt,Ut,Yt,tr){var cr=Rr();try{return Eo(Dt,Bt,Ut,Yt,tr)}catch(Ft){if($r(cr),Ft!==Ft+0)throw Ft;Dr(1,0)}},ca:function(Dt,Bt,Ut,Yt){var tr=Rr();try{return oo(Dt,Bt,Ut,Yt)}catch(cr){if($r(tr),cr!==cr+0)throw cr;Dr(1,0)}},$:function(Dt){var Bt=Rr();try{return Jn(Dt)}catch(Ut){if($r(Bt),Ut!==Ut+0)throw Ut;Dr(1,0)}},ba:function(Dt,Bt){var Ut=Rr();try{return yn(Dt,Bt)}catch(Yt){if($r(Ut),Yt!==Yt+0)throw Yt;Dr(1,0)}},Y:function(Dt,Bt,Ut){var Yt=Rr();try{return na(Dt,Bt,Ut)}catch(tr){if($r(Yt),tr!==tr+0)throw tr;Dr(1,0)}},g:function(Dt){var Bt=Rr();try{zr(Dt)()}catch(Ut){if($r(Bt),Ut!==Ut+0)throw Ut;Dr(1,0)}},r:function(Dt,Bt){var Ut=Rr();try{zr(Dt)(Bt)}catch(Yt){if($r(Ut),Yt!==Yt+0)throw Yt;Dr(1,0)}},i:function(Dt,Bt,Ut){var Yt=Rr();try{zr(Dt)(Bt,Ut)}catch(tr){if($r(Yt),tr!==tr+0)throw tr;Dr(1,0)}},ha:function(Dt,Bt,Ut,Yt){var tr=Rr();try{zr(Dt)(Bt,Ut,Yt)}catch(cr){if($r(tr),cr!==cr+0)throw cr;Dr(1,0)}},m:function(Dt,Bt,Ut,Yt){var tr=Rr();try{zr(Dt)(Bt,Ut,Yt)}catch(cr){if($r(tr),cr!==cr+0)throw cr;Dr(1,0)}},v:function(Dt,Bt,Ut,Yt,tr){var cr=Rr();try{zr(Dt)(Bt,Ut,Yt,tr)}catch(Ft){if($r(cr),Ft!==Ft+0)throw Ft;Dr(1,0)}},u:function(Dt,Bt,Ut,Yt,tr,cr){var Ft=Rr();try{zr(Dt)(Bt,Ut,Yt,tr,cr)}catch(Ht){if($r(Ft),Ht!==Ht+0)throw Ht;Dr(1,0)}},O:function(Dt,Bt,Ut,Yt,tr,cr,Ft){var Ht=Rr();try{zr(Dt)(Bt,Ut,Yt,tr,cr,Ft)}catch(Qt){if($r(Ht),Qt!==Qt+0)throw Qt;Dr(1,0)}},A:function(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht){var Qt=Rr();try{zr(Dt)(Bt,Ut,Yt,tr,cr,Ft,Ht)}catch(gr){if($r(Qt),gr!==gr+0)throw gr;Dr(1,0)}},ka:function(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht,Qt){var gr=Rr();try{zr(Dt)(Bt,Ut,Yt,tr,cr,Ft,Ht,Qt)}catch(wr){if($r(gr),wr!==wr+0)throw wr;Dr(1,0)}},C:function(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht,Qt,gr,wr){var Nr=Rr();try{zr(Dt)(Bt,Ut,Yt,tr,cr,Ft,Ht,Qt,gr,wr)}catch(Fr){if($r(Nr),Fr!==Fr+0)throw Fr;Dr(1,0)}},D:function(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht,Qt,gr,wr,Nr,Fr,rr,_r,Vr){var qr=Rr();try{zr(Dt)(Bt,Ut,Yt,tr,cr,Ft,Ht,Qt,gr,wr,Nr,Fr,rr,_r,Vr)}catch(dn){if($r(qr),dn!==dn+0)throw dn;Dr(1,0)}},fa:function(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht){var Qt=Rr();try{wo(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht)}catch(gr){if($r(Qt),gr!==gr+0)throw gr;Dr(1,0)}},da:function(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht,Qt,gr,wr,Nr){var Fr=Rr();try{ga(Dt,Bt,Ut,Yt,tr,cr,Ft,Ht,Qt,gr,wr,Nr)}catch(rr){if($r(Fr),rr!==rr+0)throw rr;Dr(1,0)}},ea:function(Dt,Bt,Ut,Yt,tr,cr){var Ft=Rr();try{ao(Dt,Bt,Ut,Yt,tr,cr)}catch(Ht){if($r(Ft),Ht!==Ht+0)throw Ht;Dr(1,0)}},o:function(Dt){return Dt},a:Nt||ct.wasmMemory,G:function(Dt){rn=Dt},la:vo,z:function(Dt,Bt,Ut,Yt){return vo(Dt,Bt,Ut,Yt)}};(function(){function Dt(tr,cr){ct.asm=tr.exports,Ar.qc.push(ct.asm.sb),br=ct.asm.ub,kr.unshift(ct.asm.Va),Vt=cr,At||(Gr--,ct.monitorRunDependencies&&ct.monitorRunDependencies(Gr),Gr==0&&Jr&&(tr=Jr,Jr=null,tr()))}function Bt(tr){Dt(tr.instance,tr.module)}function Ut(tr){return function(){if(!Ot&&(wt||Ct)){if(typeof fetch=="function"&&!Br.startsWith("file://"))return fetch(Br,{credentials:"same-origin"}).then(function(cr){if(!cr.ok)throw"failed to load wasm binary file at '"+Br+"'";return cr.arrayBuffer()}).catch(function(){return An()});if(mt)return new Promise(function(cr,Ft){mt(Br,function(Ht){cr(new Uint8Array(Ht))},Ft)})}return Promise.resolve().then(function(){return An()})}().then(function(cr){return WebAssembly.instantiate(cr,Yt)}).then(function(cr){return cr}).then(tr,function(cr){Lt("failed to asynchronously prepare wasm: "+cr),Or(cr)})}var Yt={a:Do};if(At||(Gr++,ct.monitorRunDependencies&&ct.monitorRunDependencies(Gr)),ct.instantiateWasm)try{return ct.instantiateWasm(Yt,Dt)}catch(tr){return Lt("Module.instantiateWasm callback failed with error: "+tr),!1}(Ot||typeof WebAssembly.instantiateStreaming!="function"||Rn()||Br.startsWith("file://")||Et||typeof fetch!="function"?Ut(Bt):fetch(Br,{credentials:"same-origin"}).then(function(tr){return WebAssembly.instantiateStreaming(tr,Yt).then(Bt,function(cr){return Lt("wasm streaming compile failed: "+cr),Lt("falling back to ArrayBuffer instantiation"),Ut(Bt)})})).catch(ft)})(),ct.___wasm_call_ctors=function(){return(ct.___wasm_call_ctors=ct.asm.Va).apply(null,arguments)},ct._OrtInit=function(){return(ct._OrtInit=ct.asm.Wa).apply(null,arguments)},ct._OrtCreateSessionOptions=function(){return(ct._OrtCreateSessionOptions=ct.asm.Xa).apply(null,arguments)},ct._OrtAppendExecutionProvider=function(){return(ct._OrtAppendExecutionProvider=ct.asm.Ya).apply(null,arguments)},ct._OrtAddSessionConfigEntry=function(){return(ct._OrtAddSessionConfigEntry=ct.asm.Za).apply(null,arguments)},ct._OrtReleaseSessionOptions=function(){return(ct._OrtReleaseSessionOptions=ct.asm._a).apply(null,arguments)},ct._OrtCreateSession=function(){return(ct._OrtCreateSession=ct.asm.$a).apply(null,arguments)},ct._OrtReleaseSession=function(){return(ct._OrtReleaseSession=ct.asm.ab).apply(null,arguments)},ct._OrtGetInputCount=function(){return(ct._OrtGetInputCount=ct.asm.bb).apply(null,arguments)},ct._OrtGetOutputCount=function(){return(ct._OrtGetOutputCount=ct.asm.cb).apply(null,arguments)},ct._OrtGetInputName=function(){return(ct._OrtGetInputName=ct.asm.db).apply(null,arguments)},ct._OrtGetOutputName=function(){return(ct._OrtGetOutputName=ct.asm.eb).apply(null,arguments)},ct._OrtFree=function(){return(ct._OrtFree=ct.asm.fb).apply(null,arguments)},ct._OrtCreateTensor=function(){return(ct._OrtCreateTensor=ct.asm.gb).apply(null,arguments)},ct._OrtGetTensorData=function(){return(ct._OrtGetTensorData=ct.asm.hb).apply(null,arguments)},ct._OrtReleaseTensor=function(){return(ct._OrtReleaseTensor=ct.asm.ib).apply(null,arguments)},ct._OrtCreateRunOptions=function(){return(ct._OrtCreateRunOptions=ct.asm.jb).apply(null,arguments)},ct._OrtAddRunConfigEntry=function(){return(ct._OrtAddRunConfigEntry=ct.asm.kb).apply(null,arguments)},ct._OrtReleaseRunOptions=function(){return(ct._OrtReleaseRunOptions=ct.asm.lb).apply(null,arguments)},ct._OrtRun=function(){return(ct._OrtRun=ct.asm.mb).apply(null,arguments)},ct._OrtEndProfiling=function(){return(ct._OrtEndProfiling=ct.asm.nb).apply(null,arguments)};var Xn=ct._pthread_self=function(){return(Xn=ct._pthread_self=ct.asm.ob).apply(null,arguments)},Pn=ct._malloc=function(){return(Pn=ct._malloc=ct.asm.pb).apply(null,arguments)},qn=ct._free=function(){return(qn=ct._free=ct.asm.qb).apply(null,arguments)},yo=ct._fflush=function(){return(yo=ct._fflush=ct.asm.rb).apply(null,arguments)};ct.__emscripten_tls_init=function(){return(ct.__emscripten_tls_init=ct.asm.sb).apply(null,arguments)};var bo=ct.___funcs_on_exit=function(){return(bo=ct.___funcs_on_exit=ct.asm.tb).apply(null,arguments)},no=ct.__emscripten_thread_init=function(){return(no=ct.__emscripten_thread_init=ct.asm.vb).apply(null,arguments)};ct.__emscripten_thread_crashed=function(){return(ct.__emscripten_thread_crashed=ct.asm.wb).apply(null,arguments)};var Kn,_o=ct._emscripten_run_in_main_runtime_thread_js=function(){return(_o=ct._emscripten_run_in_main_runtime_thread_js=ct.asm.xb).apply(null,arguments)},xo=ct.__emscripten_proxy_execute_task_queue=function(){return(xo=ct.__emscripten_proxy_execute_task_queue=ct.asm.yb).apply(null,arguments)},Zn=ct.__emscripten_thread_free_data=function(){return(Zn=ct.__emscripten_thread_free_data=ct.asm.zb).apply(null,arguments)},So=ct.__emscripten_thread_exit=function(){return(So=ct.__emscripten_thread_exit=ct.asm.Ab).apply(null,arguments)},Dr=ct._setThrew=function(){return(Dr=ct._setThrew=ct.asm.Bb).apply(null,arguments)},To=ct._emscripten_stack_set_limits=function(){return(To=ct._emscripten_stack_set_limits=ct.asm.Cb).apply(null,arguments)},Rr=ct.stackSave=function(){return(Rr=ct.stackSave=ct.asm.Db).apply(null,arguments)},$r=ct.stackRestore=function(){return($r=ct.stackRestore=ct.asm.Eb).apply(null,arguments)},io=ct.stackAlloc=function(){return(io=ct.stackAlloc=ct.asm.Fb).apply(null,arguments)},Qn=ct.___cxa_can_catch=function(){return(Qn=ct.___cxa_can_catch=ct.asm.Gb).apply(null,arguments)},zn=ct.___cxa_is_pointer_type=function(){return(zn=ct.___cxa_is_pointer_type=ct.asm.Hb).apply(null,arguments)},Jn=ct.dynCall_j=function(){return(Jn=ct.dynCall_j=ct.asm.Ib).apply(null,arguments)},_i=ct.dynCall_iiiiij=function(){return(_i=ct.dynCall_iiiiij=ct.asm.Jb).apply(null,arguments)},na=ct.dynCall_jii=function(){return(na=ct.dynCall_jii=ct.asm.Kb).apply(null,arguments)},wo=ct.dynCall_viiiiij=function(){return(wo=ct.dynCall_viiiiij=ct.asm.Lb).apply(null,arguments)},ao=ct.dynCall_vjji=function(){return(ao=ct.dynCall_vjji=ct.asm.Mb).apply(null,arguments)},ga=ct.dynCall_viiijjjii=function(){return(ga=ct.dynCall_viiijjjii=ct.asm.Nb).apply(null,arguments)},oo=ct.dynCall_iij=function(){return(oo=ct.dynCall_iij=ct.asm.Ob).apply(null,arguments)},yn=ct.dynCall_ji=function(){return(yn=ct.dynCall_ji=ct.asm.Pb).apply(null,arguments)},In=ct.dynCall_iiiiiij=function(){return(In=ct.dynCall_iiiiiij=ct.asm.Qb).apply(null,arguments)},Eo=ct.dynCall_iiij=function(){return(Eo=ct.dynCall_iiij=ct.asm.Rb).apply(null,arguments)};function so(){function Dt(){if(!Kn&&(Kn=!0,ct.calledRun=!0,!pr)&&(At||tn(kr),ut(ct),ct.onRuntimeInitialized&&ct.onRuntimeInitialized(),!At)){if(ct.postRun)for(typeof ct.postRun=="function"&&(ct.postRun=[ct.postRun]);ct.postRun.length;){var Bt=ct.postRun.shift();Hr.unshift(Bt)}tn(Hr)}}if(!(0<Gr))if(At)ut(ct),At||tn(kr),postMessage({cmd:"loaded"});else{if(ct.preRun)for(typeof ct.preRun=="function"&&(ct.preRun=[ct.preRun]);ct.preRun.length;)Yr();tn(Er),0<Gr||(ct.setStatus?(ct.setStatus("Running..."),setTimeout(function(){setTimeout(function(){ct.setStatus("")},1),Dt()},1)):Dt())}}if(ct.UTF8ToString=ur,ct.stringToUTF8=function(Dt,Bt,Ut){return ir(Dt,ot(),Bt,Ut)},ct.lengthBytesUTF8=hr,ct.keepRuntimeAlive=Wr,ct.wasmMemory=Nt,ct.stackSave=Rr,ct.stackRestore=$r,ct.stackAlloc=io,ct.ExitStatus=ln,ct.PThread=Ar,Jr=function Dt(){Kn||so(),Kn||(Jr=Dt)},ct.preInit)for(typeof ct.preInit=="function"&&(ct.preInit=[ct.preInit]);0<ct.preInit.length;)ct.preInit.pop()();return so(),it.ready});_e.exports=nt},932:(_e,_,et)=>{var tt,nt=(tt=(tt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(it){var at,ot,st;it=it||{},at||(at=it!==void 0?it:{}),at.ready=new Promise(function(jt,Gt){ot=jt,st=Gt});var dt,ht,ct,ut,ft,gt,mt=Object.assign({},at),vt="./this.program",yt=(jt,Gt)=>{throw Gt},bt=typeof window=="object",_t=typeof importScripts=="function",xt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",St="";xt?(St=_t?et(908).dirname(St)+"/":"//",gt=()=>{ft||(ut=et(1384),ft=et(908))},dt=function(jt,Gt){return gt(),jt=ft.normalize(jt),ut.readFileSync(jt,Gt?void 0:"utf8")},ct=jt=>((jt=dt(jt,!0)).buffer||(jt=new Uint8Array(jt)),jt),ht=(jt,Gt,qt)=>{gt(),jt=ft.normalize(jt),ut.readFile(jt,function(er,ar){er?qt(er):Gt(ar.buffer)})},1<process.argv.length&&(vt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(jt){if(!(jt instanceof kr))throw jt}),process.on("unhandledRejection",function(jt){throw jt}),yt=(jt,Gt)=>{if(Et||0<Zt)throw process.exitCode=jt,Gt;Gt instanceof kr||Ct("exiting due to exception: "+Gt),process.exit(jt)},at.inspect=function(){return"[Emscripten Module object]"}):(bt||_t)&&(_t?St=self.location.href:typeof document<"u"&&document.currentScript&&(St=document.currentScript.src),tt&&(St=tt),St=St.indexOf("blob:")!==0?St.substr(0,St.replace(/[?#].*/,"").lastIndexOf("/")+1):"",dt=jt=>{var Gt=new XMLHttpRequest;return Gt.open("GET",jt,!1),Gt.send(null),Gt.responseText},_t&&(ct=jt=>{var Gt=new XMLHttpRequest;return Gt.open("GET",jt,!1),Gt.responseType="arraybuffer",Gt.send(null),new Uint8Array(Gt.response)}),ht=(jt,Gt,qt)=>{var er=new XMLHttpRequest;er.open("GET",jt,!0),er.responseType="arraybuffer",er.onload=()=>{er.status==200||er.status==0&&er.response?Gt(er.response):qt()},er.onerror=qt,er.send(null)});var Tt,wt=at.print||console.log.bind(console),Ct=at.printErr||console.warn.bind(console);Object.assign(at,mt),mt=null,at.thisProgram&&(vt=at.thisProgram),at.quit&&(yt=at.quit),at.wasmBinary&&(Tt=at.wasmBinary);var Et=at.noExitRuntime||!1;typeof WebAssembly!="object"&&fr("no native wasm support detected");var At,Pt,Rt,It,Mt,Ot,$t=!1,Lt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function kt(jt,Gt,qt){var er=(Gt>>>=0)+qt;for(qt=Gt;jt[qt]&&!(qt>=er);)++qt;if(16<qt-Gt&&jt.buffer&&Lt)return Lt.decode(jt.subarray(Gt,qt));for(er="";Gt<qt;){var ar=jt[Gt++];if(128&ar){var dr=63&jt[Gt++];if((224&ar)==192)er+=String.fromCharCode((31&ar)<<6|dr);else{var vr=63&jt[Gt++];65536>(ar=(240&ar)==224?(15&ar)<<12|dr<<6|vr:(7&ar)<<18|dr<<12|vr<<6|63&jt[Gt++])?er+=String.fromCharCode(ar):(ar-=65536,er+=String.fromCharCode(55296|ar>>10,56320|1023&ar))}}else er+=String.fromCharCode(ar)}return er}function Nt(jt,Gt){return(jt>>>=0)?kt(It,jt,Gt):""}function Vt(jt,Gt,qt,er){if(!(0<er))return 0;var ar=qt>>>=0;er=qt+er-1;for(var dr=0;dr<jt.length;++dr){var vr=jt.charCodeAt(dr);if(55296<=vr&&57343>=vr&&(vr=65536+((1023&vr)<<10)|1023&jt.charCodeAt(++dr)),127>=vr){if(qt>=er)break;Gt[qt++>>>0]=vr}else{if(2047>=vr){if(qt+1>=er)break;Gt[qt++>>>0]=192|vr>>6}else{if(65535>=vr){if(qt+2>=er)break;Gt[qt++>>>0]=224|vr>>12}else{if(qt+3>=er)break;Gt[qt++>>>0]=240|vr>>18,Gt[qt++>>>0]=128|vr>>12&63}Gt[qt++>>>0]=128|vr>>6&63}Gt[qt++>>>0]=128|63&vr}}return Gt[qt>>>0]=0,qt-ar}function zt(jt){for(var Gt=0,qt=0;qt<jt.length;++qt){var er=jt.charCodeAt(qt);127>=er?Gt++:2047>=er?Gt+=2:55296<=er&&57343>=er?(Gt+=4,++qt):Gt+=3}return Gt}function Xt(){var jt=At.buffer;Pt=jt,at.HEAP8=Rt=new Int8Array(jt),at.HEAP16=new Int16Array(jt),at.HEAP32=Mt=new Int32Array(jt),at.HEAPU8=It=new Uint8Array(jt),at.HEAPU16=new Uint16Array(jt),at.HEAPU32=Ot=new Uint32Array(jt),at.HEAPF32=new Float32Array(jt),at.HEAPF64=new Float64Array(jt)}var Wt,nr=[],Jt=[],lr=[],pr=[],Zt=0;function Kt(){var jt=at.preRun.shift();nr.unshift(jt)}var ur,ir=0,hr=null;function fr(jt){throw at.onAbort&&at.onAbort(jt),Ct(jt="Aborted("+jt+")"),$t=!0,jt=new WebAssembly.RuntimeError(jt+". Build with -sASSERTIONS for more info."),st(jt),jt}function mr(){return ur.startsWith("data:application/octet-stream;base64,")}if(ur="ort-wasm.wasm",!mr()){var br=ur;ur=at.locateFile?at.locateFile(br,St):St+br}function Er(){var jt=ur;try{if(jt==ur&&Tt)return new Uint8Array(Tt);if(ct)return ct(jt);throw"both async and sync fetching of the wasm failed"}catch(Gt){fr(Gt)}}function kr(jt){this.name="ExitStatus",this.message="Program terminated with exit("+jt+")",this.status=jt}function jr(jt){for(;0<jt.length;)jt.shift()(at)}var Hr=[],Wr=0,Yr=0;function Br(jt){this.Db=jt,this.zb=jt-24,this.Ub=function(Gt){Ot[this.zb+4>>2>>>0]=Gt},this.Eb=function(){return Ot[this.zb+4>>2>>>0]},this.Sb=function(Gt){Ot[this.zb+8>>2>>>0]=Gt},this.Wb=function(){return Ot[this.zb+8>>2>>>0]},this.Tb=function(){Mt[this.zb>>2>>>0]=0},this.Ib=function(Gt){Rt[this.zb+12>>0>>>0]=Gt?1:0},this.Pb=function(){return Rt[this.zb+12>>0>>>0]!=0},this.Jb=function(Gt){Rt[this.zb+13>>0>>>0]=Gt?1:0},this.Lb=function(){return Rt[this.zb+13>>0>>>0]!=0},this.Rb=function(Gt,qt){this.Fb(0),this.Ub(Gt),this.Sb(qt),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){Mt[this.zb>>2>>>0]+=1},this.Xb=function(){var Gt=Mt[this.zb>>2>>>0];return Mt[this.zb>>2>>>0]=Gt-1,Gt===1},this.Fb=function(Gt){Ot[this.zb+16>>2>>>0]=Gt},this.Ob=function(){return Ot[this.zb+16>>2>>>0]},this.Qb=function(){if($n(this.Eb()))return Ot[this.Db>>2>>>0];var Gt=this.Ob();return Gt!==0?Gt:this.Db}}function Gr(jt){return mn(new Br(jt).zb)}var Jr=[];function Or(jt){var Gt=Jr[jt];return Gt||(jt>=Jr.length&&(Jr.length=jt+1),Jr[jt]=Gt=Wt.get(jt)),Gt}function Rn(jt){var Gt=zt(jt)+1,qt=zr(Gt);return qt&&Vt(jt,Rt,qt,Gt),qt}var An={};function _n(){if(!ln){var jt,Gt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:vt||"./this.program"};for(jt in An)An[jt]===void 0?delete Gt[jt]:Gt[jt]=An[jt];var qt=[];for(jt in Gt)qt.push(jt+"="+Gt[jt]);ln=qt}return ln}var ln,xn=[null,[],[]];function Sn(jt,Gt){var qt=xn[jt];Gt===0||Gt===10?((jt===1?wt:Ct)(kt(qt,0)),qt.length=0):qt.push(Gt)}var Qr=0;function Tn(jt){return jt%4==0&&(jt%100!=0||jt%400==0)}var Ar=[31,29,31,30,31,30,31,31,30,31,30,31],tn=[31,28,31,30,31,30,31,31,30,31,30,31];function wn(jt,Gt,qt,er){function ar(sr,Lr,Xr){for(sr=typeof sr=="number"?sr.toString():sr||"";sr.length<Lr;)sr=Xr[0]+sr;return sr}function dr(sr,Lr){return ar(sr,Lr,"0")}function vr(sr,Lr){function Xr(fn){return 0>fn?-1:0<fn?1:0}var an;return(an=Xr(sr.getFullYear()-Lr.getFullYear()))===0&&(an=Xr(sr.getMonth()-Lr.getMonth()))===0&&(an=Xr(sr.getDate()-Lr.getDate())),an}function Sr(sr){switch(sr.getDay()){case 0:return new Date(sr.getFullYear()-1,11,29);case 1:return sr;case 2:return new Date(sr.getFullYear(),0,3);case 3:return new Date(sr.getFullYear(),0,2);case 4:return new Date(sr.getFullYear(),0,1);case 5:return new Date(sr.getFullYear()-1,11,31);case 6:return new Date(sr.getFullYear()-1,11,30)}}function yr(sr){var Lr=sr.Bb;for(sr=new Date(new Date(sr.Cb+1900,0,1).getTime());0<Lr;){var Xr=sr.getMonth(),an=(Tn(sr.getFullYear())?Ar:tn)[Xr];if(!(Lr>an-sr.getDate())){sr.setDate(sr.getDate()+Lr);break}Lr-=an-sr.getDate()+1,sr.setDate(1),11>Xr?sr.setMonth(Xr+1):(sr.setMonth(0),sr.setFullYear(sr.getFullYear()+1))}return Xr=new Date(sr.getFullYear()+1,0,4),Lr=Sr(new Date(sr.getFullYear(),0,4)),Xr=Sr(Xr),0>=vr(Lr,sr)?0>=vr(Xr,sr)?sr.getFullYear()+1:sr.getFullYear():sr.getFullYear()-1}var Mr=Mt[er+40>>2>>>0];for(var Ur in er={$b:Mt[er>>2>>>0],Zb:Mt[er+4>>2>>>0],Gb:Mt[er+8>>2>>>0],Kb:Mt[er+12>>2>>>0],Hb:Mt[er+16>>2>>>0],Cb:Mt[er+20>>2>>>0],Ab:Mt[er+24>>2>>>0],Bb:Mt[er+28>>2>>>0],bc:Mt[er+32>>2>>>0],Yb:Mt[er+36>>2>>>0],ac:Mr?Nt(Mr):""},qt=Nt(qt),Mr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})qt=qt.replace(new RegExp(Ur,"g"),Mr[Ur]);var Kr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Zr="January February March April May June July August September October November December".split(" ");for(Ur in Mr={"%a":function(sr){return Kr[sr.Ab].substring(0,3)},"%A":function(sr){return Kr[sr.Ab]},"%b":function(sr){return Zr[sr.Hb].substring(0,3)},"%B":function(sr){return Zr[sr.Hb]},"%C":function(sr){return dr((sr.Cb+1900)/100|0,2)},"%d":function(sr){return dr(sr.Kb,2)},"%e":function(sr){return ar(sr.Kb,2," ")},"%g":function(sr){return yr(sr).toString().substring(2)},"%G":function(sr){return yr(sr)},"%H":function(sr){return dr(sr.Gb,2)},"%I":function(sr){return(sr=sr.Gb)==0?sr=12:12<sr&&(sr-=12),dr(sr,2)},"%j":function(sr){for(var Lr=0,Xr=0;Xr<=sr.Hb-1;Lr+=(Tn(sr.Cb+1900)?Ar:tn)[Xr++]);return dr(sr.Kb+Lr,3)},"%m":function(sr){return dr(sr.Hb+1,2)},"%M":function(sr){return dr(sr.Zb,2)},"%n":function(){return`
`},"%p":function(sr){return 0<=sr.Gb&&12>sr.Gb?"AM":"PM"},"%S":function(sr){return dr(sr.$b,2)},"%t":function(){return"	"},"%u":function(sr){return sr.Ab||7},"%U":function(sr){return dr(Math.floor((sr.Bb+7-sr.Ab)/7),2)},"%V":function(sr){var Lr=Math.floor((sr.Bb+7-(sr.Ab+6)%7)/7);if(2>=(sr.Ab+371-sr.Bb-2)%7&&Lr++,Lr)Lr==53&&((Xr=(sr.Ab+371-sr.Bb)%7)==4||Xr==3&&Tn(sr.Cb)||(Lr=1));else{Lr=52;var Xr=(sr.Ab+7-sr.Bb-1)%7;(Xr==4||Xr==5&&Tn(sr.Cb%400-1))&&Lr++}return dr(Lr,2)},"%w":function(sr){return sr.Ab},"%W":function(sr){return dr(Math.floor((sr.Bb+7-(sr.Ab+6)%7)/7),2)},"%y":function(sr){return(sr.Cb+1900).toString().substring(2)},"%Y":function(sr){return sr.Cb+1900},"%z":function(sr){var Lr=0<=(sr=sr.Yb);return sr=Math.abs(sr)/60,(Lr?"+":"-")+("0000"+(sr/60*100+sr%60)).slice(-4)},"%Z":function(sr){return sr.ac},"%%":function(){return"%"}},qt=qt.replace(/%%/g,"\0\0"),Mr)qt.includes(Ur)&&(qt=qt.replace(new RegExp(Ur,"g"),Mr[Ur](er)));return Ur=function(sr){var Lr=Array(zt(sr)+1);return Vt(sr,Lr,0,Lr.length),Lr}(qt=qt.replace(/\0\0/g,"%")),Ur.length>Gt?0:(Rt.set(Ur,jt>>>0),Ur.length-1)}var Hn={a:function(jt){return zr(jt+24)+24},m:function(jt){return(jt=new Br(jt)).Pb()||(jt.Ib(!0),Wr--),jt.Jb(!1),Hr.push(jt),jt.Nb(),jt.Qb()},ia:function(jt){throw Ct("Unexpected exception thrown, this is not properly supported - aborting"),$t=!0,jt},w:function(){Cr(0);var jt=Hr.pop();if(jt.Xb()&&!jt.Lb()){var Gt=jt.Wb();Gt&&Or(Gt)(jt.Db),Gr(jt.Db)}Yr=0},d:function(){var jt=Yr;if(!jt)return Qr=0;var Gt=new Br(jt);Gt.Fb(jt);var qt=Gt.Eb();if(!qt)return Qr=0,jt;for(var er=Array.prototype.slice.call(arguments),ar=0;ar<er.length;ar++){var dr=er[ar];if(dr===0||dr===qt)break;if(Cn(dr,qt,Gt.zb+16))return Qr=dr,jt}return Qr=qt,jt},k:function(){var jt=Yr;if(!jt)return Qr=0;var Gt=new Br(jt);Gt.Fb(jt);var qt=Gt.Eb();if(!qt)return Qr=0,jt;for(var er=Array.prototype.slice.call(arguments),ar=0;ar<er.length;ar++){var dr=er[ar];if(dr===0||dr===qt)break;if(Cn(dr,qt,Gt.zb+16))return Qr=dr,jt}return Qr=qt,jt},g:function(){var jt=Yr;if(!jt)return Qr=0;var Gt=new Br(jt);Gt.Fb(jt);var qt=Gt.Eb();if(!qt)return Qr=0,jt;for(var er=Array.prototype.slice.call(arguments),ar=0;ar<er.length;ar++){var dr=er[ar];if(dr===0||dr===qt)break;if(Cn(dr,qt,Gt.zb+16))return Qr=dr,jt}return Qr=qt,jt},s:Gr,L:function(){var jt=Hr.pop();jt||fr("no exception to throw");var Gt=jt.Db;throw jt.Lb()||(Hr.push(jt),jt.Jb(!0),jt.Ib(!1),Wr++),Yr=Gt,Gt},b:function(jt,Gt,qt){throw new Br(jt).Rb(Gt,qt),Yr=jt,Wr++,jt},la:function(){return Wr},i:function(jt){throw Yr||(Yr=jt),jt},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){fr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){fr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(jt,Gt){jt=new Date(1e3*(Ot[jt>>>2]+4294967296*Mt[jt+4>>>2])),Mt[Gt>>2>>>0]=jt.getUTCSeconds(),Mt[Gt+4>>2>>>0]=jt.getUTCMinutes(),Mt[Gt+8>>2>>>0]=jt.getUTCHours(),Mt[Gt+12>>2>>>0]=jt.getUTCDate(),Mt[Gt+16>>2>>>0]=jt.getUTCMonth(),Mt[Gt+20>>2>>>0]=jt.getUTCFullYear()-1900,Mt[Gt+24>>2>>>0]=jt.getUTCDay(),Mt[Gt+28>>2>>>0]=(jt.getTime()-Date.UTC(jt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(jt,Gt){jt=new Date(1e3*(Ot[jt>>>2]+4294967296*Mt[jt+4>>>2])),Mt[Gt>>2>>>0]=jt.getSeconds(),Mt[Gt+4>>2>>>0]=jt.getMinutes(),Mt[Gt+8>>2>>>0]=jt.getHours(),Mt[Gt+12>>2>>>0]=jt.getDate(),Mt[Gt+16>>2>>>0]=jt.getMonth(),Mt[Gt+20>>2>>>0]=jt.getFullYear()-1900,Mt[Gt+24>>2>>>0]=jt.getDay();var qt=new Date(jt.getFullYear(),0,1);Mt[Gt+28>>2>>>0]=(jt.getTime()-qt.getTime())/864e5|0,Mt[Gt+36>>2>>>0]=-60*jt.getTimezoneOffset();var er=new Date(jt.getFullYear(),6,1).getTimezoneOffset();qt=qt.getTimezoneOffset(),Mt[Gt+32>>2>>>0]=0|(er!=qt&&jt.getTimezoneOffset()==Math.min(qt,er))},Fa:function(jt){var Gt=new Date(Mt[jt+20>>2>>>0]+1900,Mt[jt+16>>2>>>0],Mt[jt+12>>2>>>0],Mt[jt+8>>2>>>0],Mt[jt+4>>2>>>0],Mt[jt>>2>>>0],0),qt=Mt[jt+32>>2>>>0],er=Gt.getTimezoneOffset(),ar=new Date(Gt.getFullYear(),0,1),dr=new Date(Gt.getFullYear(),6,1).getTimezoneOffset(),vr=ar.getTimezoneOffset(),Sr=Math.min(vr,dr);return 0>qt?Mt[jt+32>>2>>>0]=+(dr!=vr&&Sr==er):0<qt!=(Sr==er)&&(dr=Math.max(vr,dr),Gt.setTime(Gt.getTime()+6e4*((0<qt?Sr:dr)-er))),Mt[jt+24>>2>>>0]=Gt.getDay(),Mt[jt+28>>2>>>0]=(Gt.getTime()-ar.getTime())/864e5|0,Mt[jt>>2>>>0]=Gt.getSeconds(),Mt[jt+4>>2>>>0]=Gt.getMinutes(),Mt[jt+8>>2>>>0]=Gt.getHours(),Mt[jt+12>>2>>>0]=Gt.getDate(),Mt[jt+16>>2>>>0]=Gt.getMonth(),Gt.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function jt(Gt,qt,er){jt.Vb||(jt.Vb=!0,function(ar,dr,vr){function Sr(Zr){return(Zr=Zr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Zr[1]:"GMT"}var yr=new Date().getFullYear(),Mr=new Date(yr,0,1),Ur=new Date(yr,6,1);yr=Mr.getTimezoneOffset();var Kr=Ur.getTimezoneOffset();Mt[ar>>2>>>0]=60*Math.max(yr,Kr),Mt[dr>>2>>>0]=+(yr!=Kr),ar=Sr(Mr),dr=Sr(Ur),ar=Rn(ar),dr=Rn(dr),Kr<yr?(Ot[vr>>2>>>0]=ar,Ot[vr+4>>2>>>0]=dr):(Ot[vr>>2>>>0]=dr,Ot[vr+4>>2>>>0]=ar)}(Gt,qt,er))},B:function(){fr("")},ma:function(){return 4294901760},I:xt?()=>{var jt=process.hrtime();return 1e3*jt[0]+jt[1]/1e6}:()=>performance.now(),xa:function(jt,Gt,qt){It.copyWithin(jt>>>0,Gt>>>0,Gt+qt>>>0)},G:function(jt){var Gt=It.length;if(4294901760<(jt>>>=0))return!1;for(var qt=1;4>=qt;qt*=2){var er=Gt*(1+.2/qt);er=Math.min(er,jt+100663296);var ar=Math;er=Math.max(jt,er),ar=ar.min.call(ar,4294901760,er+(65536-er%65536)%65536);e:{try{At.grow(ar-Pt.byteLength+65535>>>16),Xt();var dr=1;break e}catch{}dr=void 0}if(dr)return!0}return!1},va:function(jt,Gt){var qt=0;return _n().forEach(function(er,ar){var dr=Gt+qt;for(ar=Ot[jt+4*ar>>2>>>0]=dr,dr=0;dr<er.length;++dr)Rt[ar++>>0>>>0]=er.charCodeAt(dr);Rt[ar>>0>>>0]=0,qt+=er.length+1}),0},wa:function(jt,Gt){var qt=_n();Ot[jt>>2>>>0]=qt.length;var er=0;return qt.forEach(function(ar){er+=ar.length+1}),Ot[Gt>>2>>>0]=er,0},ba:function(jt){Et||0<Zt||(En(),jr(lr),hn(0),xn[1].length&&Sn(1,10),xn[2].length&&Sn(2,10)),Et||0<Zt||(at.onExit&&at.onExit(jt),$t=!0),yt(jt,new kr(jt))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(jt,Gt,qt,er){for(var ar=0,dr=0;dr<qt;dr++){var vr=Ot[Gt>>2>>>0],Sr=Ot[Gt+4>>2>>>0];Gt+=8;for(var yr=0;yr<Sr;yr++)Sn(jt,It[vr+yr>>>0]);ar+=Sr}return Ot[er>>2>>>0]=ar,0},c:function(){return Qr},ja:function jt(Gt,qt){jt.Mb||(jt.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var ar=new Uint8Array(1);return()=>(crypto.getRandomValues(ar),ar[0])}if(xt)try{var dr=et(Object(function(){var vr=new Error("Cannot find module 'crypto'");throw vr.code="MODULE_NOT_FOUND",vr}()));return()=>dr.randomBytes(1)[0]}catch{}return()=>fr("randomDevice")}());for(var er=0;er<qt;er++)Rt[Gt+er>>0>>>0]=jt.Mb();return 0},ea:function(jt,Gt,qt){var er=Pr();try{return Or(jt)(Gt,qt)}catch(ar){if(Ir(er),ar!==ar+0)throw ar;Cr(1,0)}},fa:function(jt,Gt,qt){var er=Pr();try{return Or(jt)(Gt,qt)}catch(ar){if(Ir(er),ar!==ar+0)throw ar;Cr(1,0)}},J:function(jt){var Gt=Pr();try{return Or(jt)()}catch(qt){if(Ir(Gt),qt!==qt+0)throw qt;Cr(1,0)}},e:function(jt,Gt){var qt=Pr();try{return Or(jt)(Gt)}catch(er){if(Ir(qt),er!==er+0)throw er;Cr(1,0)}},N:function(jt,Gt,qt){var er=Pr();try{return Or(jt)(Gt,qt)}catch(ar){if(Ir(er),ar!==ar+0)throw ar;Cr(1,0)}},O:function(jt,Gt,qt){var er=Pr();try{return Or(jt)(Gt,qt)}catch(ar){if(Ir(er),ar!==ar+0)throw ar;Cr(1,0)}},j:function(jt,Gt,qt){var er=Pr();try{return Or(jt)(Gt,qt)}catch(ar){if(Ir(er),ar!==ar+0)throw ar;Cr(1,0)}},o:function(jt,Gt,qt,er){var ar=Pr();try{return Or(jt)(Gt,qt,er)}catch(dr){if(Ir(ar),dr!==dr+0)throw dr;Cr(1,0)}},p:function(jt,Gt,qt,er,ar){var dr=Pr();try{return Or(jt)(Gt,qt,er,ar)}catch(vr){if(Ir(dr),vr!==vr+0)throw vr;Cr(1,0)}},M:function(jt,Gt,qt,er,ar,dr){var vr=Pr();try{return Or(jt)(Gt,qt,er,ar,dr)}catch(Sr){if(Ir(vr),Sr!==Sr+0)throw Sr;Cr(1,0)}},r:function(jt,Gt,qt,er,ar,dr){var vr=Pr();try{return Or(jt)(Gt,qt,er,ar,dr)}catch(Sr){if(Ir(vr),Sr!==Sr+0)throw Sr;Cr(1,0)}},v:function(jt,Gt,qt,er,ar,dr,vr){var Sr=Pr();try{return Or(jt)(Gt,qt,er,ar,dr,vr)}catch(yr){if(Ir(Sr),yr!==yr+0)throw yr;Cr(1,0)}},K:function(jt,Gt,qt,er,ar,dr,vr,Sr){var yr=Pr();try{return Or(jt)(Gt,qt,er,ar,dr,vr,Sr)}catch(Mr){if(Ir(yr),Mr!==Mr+0)throw Mr;Cr(1,0)}},D:function(jt,Gt,qt,er,ar,dr,vr,Sr,yr,Mr,Ur,Kr){var Zr=Pr();try{return Or(jt)(Gt,qt,er,ar,dr,vr,Sr,yr,Mr,Ur,Kr)}catch(sr){if(Ir(Zr),sr!==sr+0)throw sr;Cr(1,0)}},X:function(jt,Gt,qt,er,ar,dr,vr,Sr){var yr=Pr();try{return Bn(jt,Gt,qt,er,ar,dr,vr,Sr)}catch(Mr){if(Ir(yr),Mr!==Mr+0)throw Mr;Cr(1,0)}},V:function(jt,Gt,qt,er,ar,dr,vr){var Sr=Pr();try{return On(jt,Gt,qt,er,ar,dr,vr)}catch(yr){if(Ir(Sr),yr!==yr+0)throw yr;Cr(1,0)}},U:function(jt,Gt,qt,er,ar){var dr=Pr();try{return Vn(jt,Gt,qt,er,ar)}catch(vr){if(Ir(dr),vr!==vr+0)throw vr;Cr(1,0)}},Z:function(jt,Gt,qt,er){var ar=Pr();try{return cn(jt,Gt,qt,er)}catch(dr){if(Ir(ar),dr!==dr+0)throw dr;Cr(1,0)}},W:function(jt){var Gt=Pr();try{return nn(jt)}catch(qt){if(Ir(Gt),qt!==qt+0)throw qt;Cr(1,0)}},Y:function(jt,Gt){var qt=Pr();try{return Fn(jt,Gt)}catch(er){if(Ir(qt),er!==er+0)throw er;Cr(1,0)}},T:function(jt,Gt,qt){var er=Pr();try{return Dn(jt,Gt,qt)}catch(ar){if(Ir(er),ar!==ar+0)throw ar;Cr(1,0)}},f:function(jt){var Gt=Pr();try{Or(jt)()}catch(qt){if(Ir(Gt),qt!==qt+0)throw qt;Cr(1,0)}},q:function(jt,Gt){var qt=Pr();try{Or(jt)(Gt)}catch(er){if(Ir(qt),er!==er+0)throw er;Cr(1,0)}},h:function(jt,Gt,qt){var er=Pr();try{Or(jt)(Gt,qt)}catch(ar){if(Ir(er),ar!==ar+0)throw ar;Cr(1,0)}},da:function(jt,Gt,qt,er){var ar=Pr();try{Or(jt)(Gt,qt,er)}catch(dr){if(Ir(ar),dr!==dr+0)throw dr;Cr(1,0)}},l:function(jt,Gt,qt,er){var ar=Pr();try{Or(jt)(Gt,qt,er)}catch(dr){if(Ir(ar),dr!==dr+0)throw dr;Cr(1,0)}},t:function(jt,Gt,qt,er,ar){var dr=Pr();try{Or(jt)(Gt,qt,er,ar)}catch(vr){if(Ir(dr),vr!==vr+0)throw vr;Cr(1,0)}},u:function(jt,Gt,qt,er,ar,dr){var vr=Pr();try{Or(jt)(Gt,qt,er,ar,dr)}catch(Sr){if(Ir(vr),Sr!==Sr+0)throw Sr;Cr(1,0)}},x:function(jt,Gt,qt,er,ar,dr,vr){var Sr=Pr();try{Or(jt)(Gt,qt,er,ar,dr,vr)}catch(yr){if(Ir(Sr),yr!==yr+0)throw yr;Cr(1,0)}},z:function(jt,Gt,qt,er,ar,dr,vr,Sr){var yr=Pr();try{Or(jt)(Gt,qt,er,ar,dr,vr,Sr)}catch(Mr){if(Ir(yr),Mr!==Mr+0)throw Mr;Cr(1,0)}},ga:function(jt,Gt,qt,er,ar,dr,vr,Sr,yr){var Mr=Pr();try{Or(jt)(Gt,qt,er,ar,dr,vr,Sr,yr)}catch(Ur){if(Ir(Mr),Ur!==Ur+0)throw Ur;Cr(1,0)}},A:function(jt,Gt,qt,er,ar,dr,vr,Sr,yr,Mr,Ur){var Kr=Pr();try{Or(jt)(Gt,qt,er,ar,dr,vr,Sr,yr,Mr,Ur)}catch(Zr){if(Ir(Kr),Zr!==Zr+0)throw Zr;Cr(1,0)}},C:function(jt,Gt,qt,er,ar,dr,vr,Sr,yr,Mr,Ur,Kr,Zr,sr,Lr,Xr){var an=Pr();try{Or(jt)(Gt,qt,er,ar,dr,vr,Sr,yr,Mr,Ur,Kr,Zr,sr,Lr,Xr)}catch(fn){if(Ir(an),fn!==fn+0)throw fn;Cr(1,0)}},aa:function(jt,Gt,qt,er,ar,dr,vr,Sr){var yr=Pr();try{Ln(jt,Gt,qt,er,ar,dr,vr,Sr)}catch(Mr){if(Ir(yr),Mr!==Mr+0)throw Mr;Cr(1,0)}},_:function(jt,Gt,qt,er,ar,dr,vr,Sr,yr,Mr,Ur,Kr){var Zr=Pr();try{Nn(jt,Gt,qt,er,ar,dr,vr,Sr,yr,Mr,Ur,Kr)}catch(sr){if(Ir(Zr),sr!==sr+0)throw sr;Cr(1,0)}},$:function(jt,Gt,qt,er,ar,dr){var vr=Pr();try{kn(jt,Gt,qt,er,ar,dr)}catch(Sr){if(Ir(vr),Sr!==Sr+0)throw Sr;Cr(1,0)}},n:function(jt){return jt},F:function(jt){Qr=jt},ha:wn,y:function(jt,Gt,qt,er){return wn(jt,Gt,qt,er)}};(function(){function jt(ar){at.asm=ar.exports,At=at.asm.Ka,Xt(),Wt=at.asm.ib,Jt.unshift(at.asm.La),ir--,at.monitorRunDependencies&&at.monitorRunDependencies(ir),ir==0&&hr&&(ar=hr,hr=null,ar())}function Gt(ar){jt(ar.instance)}function qt(ar){return function(){if(!Tt&&(bt||_t)){if(typeof fetch=="function"&&!ur.startsWith("file://"))return fetch(ur,{credentials:"same-origin"}).then(function(dr){if(!dr.ok)throw"failed to load wasm binary file at '"+ur+"'";return dr.arrayBuffer()}).catch(function(){return Er()});if(ht)return new Promise(function(dr,vr){ht(ur,function(Sr){dr(new Uint8Array(Sr))},vr)})}return Promise.resolve().then(function(){return Er()})}().then(function(dr){return WebAssembly.instantiate(dr,er)}).then(function(dr){return dr}).then(ar,function(dr){Ct("failed to asynchronously prepare wasm: "+dr),fr(dr)})}var er={a:Hn};if(ir++,at.monitorRunDependencies&&at.monitorRunDependencies(ir),at.instantiateWasm)try{return at.instantiateWasm(er,jt)}catch(ar){return Ct("Module.instantiateWasm callback failed with error: "+ar),!1}(Tt||typeof WebAssembly.instantiateStreaming!="function"||mr()||ur.startsWith("file://")||xt||typeof fetch!="function"?qt(Gt):fetch(ur,{credentials:"same-origin"}).then(function(ar){return WebAssembly.instantiateStreaming(ar,er).then(Gt,function(dr){return Ct("wasm streaming compile failed: "+dr),Ct("falling back to ArrayBuffer instantiation"),qt(Gt)})})).catch(st)})(),at.___wasm_call_ctors=function(){return(at.___wasm_call_ctors=at.asm.La).apply(null,arguments)},at._OrtInit=function(){return(at._OrtInit=at.asm.Ma).apply(null,arguments)},at._OrtCreateSessionOptions=function(){return(at._OrtCreateSessionOptions=at.asm.Na).apply(null,arguments)},at._OrtAppendExecutionProvider=function(){return(at._OrtAppendExecutionProvider=at.asm.Oa).apply(null,arguments)},at._OrtAddSessionConfigEntry=function(){return(at._OrtAddSessionConfigEntry=at.asm.Pa).apply(null,arguments)},at._OrtReleaseSessionOptions=function(){return(at._OrtReleaseSessionOptions=at.asm.Qa).apply(null,arguments)},at._OrtCreateSession=function(){return(at._OrtCreateSession=at.asm.Ra).apply(null,arguments)},at._OrtReleaseSession=function(){return(at._OrtReleaseSession=at.asm.Sa).apply(null,arguments)},at._OrtGetInputCount=function(){return(at._OrtGetInputCount=at.asm.Ta).apply(null,arguments)},at._OrtGetOutputCount=function(){return(at._OrtGetOutputCount=at.asm.Ua).apply(null,arguments)},at._OrtGetInputName=function(){return(at._OrtGetInputName=at.asm.Va).apply(null,arguments)},at._OrtGetOutputName=function(){return(at._OrtGetOutputName=at.asm.Wa).apply(null,arguments)},at._OrtFree=function(){return(at._OrtFree=at.asm.Xa).apply(null,arguments)},at._OrtCreateTensor=function(){return(at._OrtCreateTensor=at.asm.Ya).apply(null,arguments)},at._OrtGetTensorData=function(){return(at._OrtGetTensorData=at.asm.Za).apply(null,arguments)},at._OrtReleaseTensor=function(){return(at._OrtReleaseTensor=at.asm._a).apply(null,arguments)},at._OrtCreateRunOptions=function(){return(at._OrtCreateRunOptions=at.asm.$a).apply(null,arguments)},at._OrtAddRunConfigEntry=function(){return(at._OrtAddRunConfigEntry=at.asm.ab).apply(null,arguments)},at._OrtReleaseRunOptions=function(){return(at._OrtReleaseRunOptions=at.asm.bb).apply(null,arguments)},at._OrtRun=function(){return(at._OrtRun=at.asm.cb).apply(null,arguments)},at._OrtEndProfiling=function(){return(at._OrtEndProfiling=at.asm.db).apply(null,arguments)};var un,zr=at._malloc=function(){return(zr=at._malloc=at.asm.eb).apply(null,arguments)},mn=at._free=function(){return(mn=at._free=at.asm.fb).apply(null,arguments)},hn=at._fflush=function(){return(hn=at._fflush=at.asm.gb).apply(null,arguments)},En=at.___funcs_on_exit=function(){return(En=at.___funcs_on_exit=at.asm.hb).apply(null,arguments)},Cr=at._setThrew=function(){return(Cr=at._setThrew=at.asm.jb).apply(null,arguments)},Pr=at.stackSave=function(){return(Pr=at.stackSave=at.asm.kb).apply(null,arguments)},Ir=at.stackRestore=function(){return(Ir=at.stackRestore=at.asm.lb).apply(null,arguments)},Mn=at.stackAlloc=function(){return(Mn=at.stackAlloc=at.asm.mb).apply(null,arguments)},Cn=at.___cxa_can_catch=function(){return(Cn=at.___cxa_can_catch=at.asm.nb).apply(null,arguments)},$n=at.___cxa_is_pointer_type=function(){return($n=at.___cxa_is_pointer_type=at.asm.ob).apply(null,arguments)},nn=at.dynCall_j=function(){return(nn=at.dynCall_j=at.asm.pb).apply(null,arguments)},On=at.dynCall_iiiiij=function(){return(On=at.dynCall_iiiiij=at.asm.qb).apply(null,arguments)},Dn=at.dynCall_jii=function(){return(Dn=at.dynCall_jii=at.asm.rb).apply(null,arguments)},Ln=at.dynCall_viiiiij=function(){return(Ln=at.dynCall_viiiiij=at.asm.sb).apply(null,arguments)},kn=at.dynCall_vjji=function(){return(kn=at.dynCall_vjji=at.asm.tb).apply(null,arguments)},Nn=at.dynCall_viiijjjii=function(){return(Nn=at.dynCall_viiijjjii=at.asm.ub).apply(null,arguments)},cn=at.dynCall_iij=function(){return(cn=at.dynCall_iij=at.asm.vb).apply(null,arguments)},Fn=at.dynCall_ji=function(){return(Fn=at.dynCall_ji=at.asm.wb).apply(null,arguments)},Bn=at.dynCall_iiiiiij=function(){return(Bn=at.dynCall_iiiiiij=at.asm.xb).apply(null,arguments)},Vn=at.dynCall_iiij=function(){return(Vn=at.dynCall_iiij=at.asm.yb).apply(null,arguments)};function jn(){function jt(){if(!un&&(un=!0,at.calledRun=!0,!$t)){if(jr(Jt),ot(at),at.onRuntimeInitialized&&at.onRuntimeInitialized(),at.postRun)for(typeof at.postRun=="function"&&(at.postRun=[at.postRun]);at.postRun.length;){var Gt=at.postRun.shift();pr.unshift(Gt)}jr(pr)}}if(!(0<ir)){if(at.preRun)for(typeof at.preRun=="function"&&(at.preRun=[at.preRun]);at.preRun.length;)Kt();jr(nr),0<ir||(at.setStatus?(at.setStatus("Running..."),setTimeout(function(){setTimeout(function(){at.setStatus("")},1),jt()},1)):jt())}}if(at.UTF8ToString=Nt,at.stringToUTF8=function(jt,Gt,qt){return Vt(jt,It,Gt,qt)},at.lengthBytesUTF8=zt,at.stackSave=Pr,at.stackRestore=Ir,at.stackAlloc=Mn,hr=function jt(){un||jn(),un||(hr=jt)},at.preInit)for(typeof at.preInit=="function"&&(at.preInit=[at.preInit]);0<at.preInit.length;)at.preInit.pop()();return jn(),it.ready});_e.exports=nt},4537:_e=>{_e.exports=function(_,et){for(var tt=new Array(arguments.length-1),nt=0,it=2,at=!0;it<arguments.length;)tt[nt++]=arguments[it++];return new Promise(function(ot,st){tt[nt]=function(dt){if(at)if(at=!1,dt)st(dt);else{for(var ht=new Array(arguments.length-1),ct=0;ct<ht.length;)ht[ct++]=arguments[ct];ot.apply(null,ht)}};try{_.apply(et||null,tt)}catch(dt){at&&(at=!1,st(dt))}})}},7419:(_e,_)=>{var et=_;et.length=function(ot){var st=ot.length;if(!st)return 0;for(var dt=0;--st%4>1&&ot.charAt(st)==="=";)++dt;return Math.ceil(3*ot.length)/4-dt};for(var tt=new Array(64),nt=new Array(123),it=0;it<64;)nt[tt[it]=it<26?it+65:it<52?it+71:it<62?it-4:it-59|43]=it++;et.encode=function(ot,st,dt){for(var ht,ct=null,ut=[],ft=0,gt=0;st<dt;){var mt=ot[st++];switch(gt){case 0:ut[ft++]=tt[mt>>2],ht=(3&mt)<<4,gt=1;break;case 1:ut[ft++]=tt[ht|mt>>4],ht=(15&mt)<<2,gt=2;break;case 2:ut[ft++]=tt[ht|mt>>6],ut[ft++]=tt[63&mt],gt=0}ft>8191&&((ct||(ct=[])).push(String.fromCharCode.apply(String,ut)),ft=0)}return gt&&(ut[ft++]=tt[ht],ut[ft++]=61,gt===1&&(ut[ft++]=61)),ct?(ft&&ct.push(String.fromCharCode.apply(String,ut.slice(0,ft))),ct.join("")):String.fromCharCode.apply(String,ut.slice(0,ft))};var at="invalid encoding";et.decode=function(ot,st,dt){for(var ht,ct=dt,ut=0,ft=0;ft<ot.length;){var gt=ot.charCodeAt(ft++);if(gt===61&&ut>1)break;if((gt=nt[gt])===void 0)throw Error(at);switch(ut){case 0:ht=gt,ut=1;break;case 1:st[dt++]=ht<<2|(48&gt)>>4,ht=gt,ut=2;break;case 2:st[dt++]=(15&ht)<<4|(60&gt)>>2,ht=gt,ut=3;break;case 3:st[dt++]=(3&ht)<<6|gt,ut=0}}if(ut===1)throw Error(at);return dt-ct},et.test=function(ot){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(ot)}},9211:_e=>{function _(){this._listeners={}}_e.exports=_,_.prototype.on=function(et,tt,nt){return(this._listeners[et]||(this._listeners[et]=[])).push({fn:tt,ctx:nt||this}),this},_.prototype.off=function(et,tt){if(et===void 0)this._listeners={};else if(tt===void 0)this._listeners[et]=[];else for(var nt=this._listeners[et],it=0;it<nt.length;)nt[it].fn===tt?nt.splice(it,1):++it;return this},_.prototype.emit=function(et){var tt=this._listeners[et];if(tt){for(var nt=[],it=1;it<arguments.length;)nt.push(arguments[it++]);for(it=0;it<tt.length;)tt[it].fn.apply(tt[it++].ctx,nt)}return this}},945:_e=>{function _(at){return typeof Float32Array<"u"?function(){var ot=new Float32Array([-0]),st=new Uint8Array(ot.buffer),dt=st[3]===128;function ht(gt,mt,vt){ot[0]=gt,mt[vt]=st[0],mt[vt+1]=st[1],mt[vt+2]=st[2],mt[vt+3]=st[3]}function ct(gt,mt,vt){ot[0]=gt,mt[vt]=st[3],mt[vt+1]=st[2],mt[vt+2]=st[1],mt[vt+3]=st[0]}function ut(gt,mt){return st[0]=gt[mt],st[1]=gt[mt+1],st[2]=gt[mt+2],st[3]=gt[mt+3],ot[0]}function ft(gt,mt){return st[3]=gt[mt],st[2]=gt[mt+1],st[1]=gt[mt+2],st[0]=gt[mt+3],ot[0]}at.writeFloatLE=dt?ht:ct,at.writeFloatBE=dt?ct:ht,at.readFloatLE=dt?ut:ft,at.readFloatBE=dt?ft:ut}():function(){function ot(dt,ht,ct,ut){var ft=ht<0?1:0;if(ft&&(ht=-ht),ht===0)dt(1/ht>0?0:2147483648,ct,ut);else if(isNaN(ht))dt(2143289344,ct,ut);else if(ht>34028234663852886e22)dt((ft<<31|2139095040)>>>0,ct,ut);else if(ht<11754943508222875e-54)dt((ft<<31|Math.round(ht/1401298464324817e-60))>>>0,ct,ut);else{var gt=Math.floor(Math.log(ht)/Math.LN2);dt((ft<<31|gt+127<<23|8388607&Math.round(ht*Math.pow(2,-gt)*8388608))>>>0,ct,ut)}}function st(dt,ht,ct){var ut=dt(ht,ct),ft=2*(ut>>31)+1,gt=ut>>>23&255,mt=8388607&ut;return gt===255?mt?NaN:ft*(1/0):gt===0?1401298464324817e-60*ft*mt:ft*Math.pow(2,gt-150)*(mt+8388608)}at.writeFloatLE=ot.bind(null,et),at.writeFloatBE=ot.bind(null,tt),at.readFloatLE=st.bind(null,nt),at.readFloatBE=st.bind(null,it)}(),typeof Float64Array<"u"?function(){var ot=new Float64Array([-0]),st=new Uint8Array(ot.buffer),dt=st[7]===128;function ht(gt,mt,vt){ot[0]=gt,mt[vt]=st[0],mt[vt+1]=st[1],mt[vt+2]=st[2],mt[vt+3]=st[3],mt[vt+4]=st[4],mt[vt+5]=st[5],mt[vt+6]=st[6],mt[vt+7]=st[7]}function ct(gt,mt,vt){ot[0]=gt,mt[vt]=st[7],mt[vt+1]=st[6],mt[vt+2]=st[5],mt[vt+3]=st[4],mt[vt+4]=st[3],mt[vt+5]=st[2],mt[vt+6]=st[1],mt[vt+7]=st[0]}function ut(gt,mt){return st[0]=gt[mt],st[1]=gt[mt+1],st[2]=gt[mt+2],st[3]=gt[mt+3],st[4]=gt[mt+4],st[5]=gt[mt+5],st[6]=gt[mt+6],st[7]=gt[mt+7],ot[0]}function ft(gt,mt){return st[7]=gt[mt],st[6]=gt[mt+1],st[5]=gt[mt+2],st[4]=gt[mt+3],st[3]=gt[mt+4],st[2]=gt[mt+5],st[1]=gt[mt+6],st[0]=gt[mt+7],ot[0]}at.writeDoubleLE=dt?ht:ct,at.writeDoubleBE=dt?ct:ht,at.readDoubleLE=dt?ut:ft,at.readDoubleBE=dt?ft:ut}():function(){function ot(dt,ht,ct,ut,ft,gt){var mt=ut<0?1:0;if(mt&&(ut=-ut),ut===0)dt(0,ft,gt+ht),dt(1/ut>0?0:2147483648,ft,gt+ct);else if(isNaN(ut))dt(0,ft,gt+ht),dt(2146959360,ft,gt+ct);else if(ut>17976931348623157e292)dt(0,ft,gt+ht),dt((mt<<31|2146435072)>>>0,ft,gt+ct);else{var vt;if(ut<22250738585072014e-324)dt((vt=ut/5e-324)>>>0,ft,gt+ht),dt((mt<<31|vt/4294967296)>>>0,ft,gt+ct);else{var yt=Math.floor(Math.log(ut)/Math.LN2);yt===1024&&(yt=1023),dt(4503599627370496*(vt=ut*Math.pow(2,-yt))>>>0,ft,gt+ht),dt((mt<<31|yt+1023<<20|1048576*vt&1048575)>>>0,ft,gt+ct)}}}function st(dt,ht,ct,ut,ft){var gt=dt(ut,ft+ht),mt=dt(ut,ft+ct),vt=2*(mt>>31)+1,yt=mt>>>20&2047,bt=4294967296*(1048575&mt)+gt;return yt===2047?bt?NaN:vt*(1/0):yt===0?5e-324*vt*bt:vt*Math.pow(2,yt-1075)*(bt+4503599627370496)}at.writeDoubleLE=ot.bind(null,et,0,4),at.writeDoubleBE=ot.bind(null,tt,4,0),at.readDoubleLE=st.bind(null,nt,0,4),at.readDoubleBE=st.bind(null,it,4,0)}(),at}function et(at,ot,st){ot[st]=255&at,ot[st+1]=at>>>8&255,ot[st+2]=at>>>16&255,ot[st+3]=at>>>24}function tt(at,ot,st){ot[st]=at>>>24,ot[st+1]=at>>>16&255,ot[st+2]=at>>>8&255,ot[st+3]=255&at}function nt(at,ot){return(at[ot]|at[ot+1]<<8|at[ot+2]<<16|at[ot+3]<<24)>>>0}function it(at,ot){return(at[ot]<<24|at[ot+1]<<16|at[ot+2]<<8|at[ot+3])>>>0}_e.exports=_(_)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_e){}return null}module.exports=inquire},6662:_e=>{_e.exports=function(_,et,tt){var nt=tt||8192,it=nt>>>1,at=null,ot=nt;return function(st){if(st<1||st>it)return _(st);ot+st>nt&&(at=_(nt),ot=0);var dt=et.call(at,ot,ot+=st);return 7&ot&&(ot=1+(7|ot)),dt}}},4997:(_e,_)=>{var et=_;et.length=function(tt){for(var nt=0,it=0,at=0;at<tt.length;++at)(it=tt.charCodeAt(at))<128?nt+=1:it<2048?nt+=2:(64512&it)==55296&&(64512&tt.charCodeAt(at+1))==56320?(++at,nt+=4):nt+=3;return nt},et.read=function(tt,nt,it){if(it-nt<1)return"";for(var at,ot=null,st=[],dt=0;nt<it;)(at=tt[nt++])<128?st[dt++]=at:at>191&&at<224?st[dt++]=(31&at)<<6|63&tt[nt++]:at>239&&at<365?(at=((7&at)<<18|(63&tt[nt++])<<12|(63&tt[nt++])<<6|63&tt[nt++])-65536,st[dt++]=55296+(at>>10),st[dt++]=56320+(1023&at)):st[dt++]=(15&at)<<12|(63&tt[nt++])<<6|63&tt[nt++],dt>8191&&((ot||(ot=[])).push(String.fromCharCode.apply(String,st)),dt=0);return ot?(dt&&ot.push(String.fromCharCode.apply(String,st.slice(0,dt))),ot.join("")):String.fromCharCode.apply(String,st.slice(0,dt))},et.write=function(tt,nt,it){for(var at,ot,st=it,dt=0;dt<tt.length;++dt)(at=tt.charCodeAt(dt))<128?nt[it++]=at:at<2048?(nt[it++]=at>>6|192,nt[it++]=63&at|128):(64512&at)==55296&&(64512&(ot=tt.charCodeAt(dt+1)))==56320?(at=65536+((1023&at)<<10)+(1023&ot),++dt,nt[it++]=at>>18|240,nt[it++]=at>>12&63|128,nt[it++]=at>>6&63|128,nt[it++]=63&at|128):(nt[it++]=at>>12|224,nt[it++]=at>>6&63|128,nt[it++]=63&at|128);return it-st}},3442:(_e,_)=>{_.__esModule=!0;var et=function(){function tt(nt){if(!nt)throw new TypeError("Invalid argument; `value` has no value.");this.value=tt.EMPTY,nt&&tt.isGuid(nt)&&(this.value=nt)}return tt.isGuid=function(nt){var it=nt.toString();return nt&&(nt instanceof tt||tt.validator.test(it))},tt.create=function(){return new tt([tt.gen(2),tt.gen(1),tt.gen(1),tt.gen(1),tt.gen(3)].join("-"))},tt.createEmpty=function(){return new tt("emptyguid")},tt.parse=function(nt){return new tt(nt)},tt.raw=function(){return[tt.gen(2),tt.gen(1),tt.gen(1),tt.gen(1),tt.gen(3)].join("-")},tt.gen=function(nt){for(var it="",at=0;at<nt;at++)it+=(65536*(1+Math.random())|0).toString(16).substring(1);return it},tt.prototype.equals=function(nt){return tt.isGuid(nt)&&this.value===nt.toString()},tt.prototype.isEmpty=function(){return this.value===tt.EMPTY},tt.prototype.toString=function(){return this.value},tt.prototype.toJSON=function(){return{value:this.value}},tt.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),tt.EMPTY="00000000-0000-0000-0000-000000000000",tt}();_.Guid=et},3720:_e=>{_e.exports=et;var _=null;try{_=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function et(Et,At,Pt){this.low=0|Et,this.high=0|At,this.unsigned=!!Pt}function tt(Et){return(Et&&Et.__isLong__)===!0}et.prototype.__isLong__,Object.defineProperty(et.prototype,"__isLong__",{value:!0}),et.isLong=tt;var nt={},it={};function at(Et,At){var Pt,Rt,It;return At?(It=0<=(Et>>>=0)&&Et<256)&&(Rt=it[Et])?Rt:(Pt=st(Et,(0|Et)<0?-1:0,!0),It&&(it[Et]=Pt),Pt):(It=-128<=(Et|=0)&&Et<128)&&(Rt=nt[Et])?Rt:(Pt=st(Et,Et<0?-1:0,!1),It&&(nt[Et]=Pt),Pt)}function ot(Et,At){if(isNaN(Et))return At?yt:vt;if(At){if(Et<0)return yt;if(Et>=ft)return Tt}else{if(Et<=-9223372036854776e3)return wt;if(Et+1>=gt)return St}return Et<0?ot(-Et,At).neg():st(Et%ut|0,Et/ut|0,At)}function st(Et,At,Pt){return new et(Et,At,Pt)}et.fromInt=at,et.fromNumber=ot,et.fromBits=st;var dt=Math.pow;function ht(Et,At,Pt){if(Et.length===0)throw Error("empty string");if(Et==="NaN"||Et==="Infinity"||Et==="+Infinity"||Et==="-Infinity")return vt;if(typeof At=="number"?(Pt=At,At=!1):At=!!At,(Pt=Pt||10)<2||36<Pt)throw RangeError("radix");var Rt;if((Rt=Et.indexOf("-"))>0)throw Error("interior hyphen");if(Rt===0)return ht(Et.substring(1),At,Pt).neg();for(var It=ot(dt(Pt,8)),Mt=vt,Ot=0;Ot<Et.length;Ot+=8){var $t=Math.min(8,Et.length-Ot),Lt=parseInt(Et.substring(Ot,Ot+$t),Pt);if($t<8){var kt=ot(dt(Pt,$t));Mt=Mt.mul(kt).add(ot(Lt))}else Mt=(Mt=Mt.mul(It)).add(ot(Lt))}return Mt.unsigned=At,Mt}function ct(Et,At){return typeof Et=="number"?ot(Et,At):typeof Et=="string"?ht(Et,At):st(Et.low,Et.high,typeof At=="boolean"?At:Et.unsigned)}et.fromString=ht,et.fromValue=ct;var ut=4294967296,ft=ut*ut,gt=ft/2,mt=at(1<<24),vt=at(0);et.ZERO=vt;var yt=at(0,!0);et.UZERO=yt;var bt=at(1);et.ONE=bt;var _t=at(1,!0);et.UONE=_t;var xt=at(-1);et.NEG_ONE=xt;var St=st(-1,2147483647,!1);et.MAX_VALUE=St;var Tt=st(-1,-1,!0);et.MAX_UNSIGNED_VALUE=Tt;var wt=st(0,-2147483648,!1);et.MIN_VALUE=wt;var Ct=et.prototype;Ct.toInt=function(){return this.unsigned?this.low>>>0:this.low},Ct.toNumber=function(){return this.unsigned?(this.high>>>0)*ut+(this.low>>>0):this.high*ut+(this.low>>>0)},Ct.toString=function(Et){if((Et=Et||10)<2||36<Et)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(wt)){var At=ot(Et),Pt=this.div(At),Rt=Pt.mul(At).sub(this);return Pt.toString(Et)+Rt.toInt().toString(Et)}return"-"+this.neg().toString(Et)}for(var It=ot(dt(Et,6),this.unsigned),Mt=this,Ot="";;){var $t=Mt.div(It),Lt=(Mt.sub($t.mul(It)).toInt()>>>0).toString(Et);if((Mt=$t).isZero())return Lt+Ot;for(;Lt.length<6;)Lt="0"+Lt;Ot=""+Lt+Ot}},Ct.getHighBits=function(){return this.high},Ct.getHighBitsUnsigned=function(){return this.high>>>0},Ct.getLowBits=function(){return this.low},Ct.getLowBitsUnsigned=function(){return this.low>>>0},Ct.getNumBitsAbs=function(){if(this.isNegative())return this.eq(wt)?64:this.neg().getNumBitsAbs();for(var Et=this.high!=0?this.high:this.low,At=31;At>0&&!(Et&1<<At);At--);return this.high!=0?At+33:At+1},Ct.isZero=function(){return this.high===0&&this.low===0},Ct.eqz=Ct.isZero,Ct.isNegative=function(){return!this.unsigned&&this.high<0},Ct.isPositive=function(){return this.unsigned||this.high>=0},Ct.isOdd=function(){return(1&this.low)==1},Ct.isEven=function(){return(1&this.low)==0},Ct.equals=function(Et){return tt(Et)||(Et=ct(Et)),(this.unsigned===Et.unsigned||this.high>>>31!=1||Et.high>>>31!=1)&&this.high===Et.high&&this.low===Et.low},Ct.eq=Ct.equals,Ct.notEquals=function(Et){return!this.eq(Et)},Ct.neq=Ct.notEquals,Ct.ne=Ct.notEquals,Ct.lessThan=function(Et){return this.comp(Et)<0},Ct.lt=Ct.lessThan,Ct.lessThanOrEqual=function(Et){return this.comp(Et)<=0},Ct.lte=Ct.lessThanOrEqual,Ct.le=Ct.lessThanOrEqual,Ct.greaterThan=function(Et){return this.comp(Et)>0},Ct.gt=Ct.greaterThan,Ct.greaterThanOrEqual=function(Et){return this.comp(Et)>=0},Ct.gte=Ct.greaterThanOrEqual,Ct.ge=Ct.greaterThanOrEqual,Ct.compare=function(Et){if(tt(Et)||(Et=ct(Et)),this.eq(Et))return 0;var At=this.isNegative(),Pt=Et.isNegative();return At&&!Pt?-1:!At&&Pt?1:this.unsigned?Et.high>>>0>this.high>>>0||Et.high===this.high&&Et.low>>>0>this.low>>>0?-1:1:this.sub(Et).isNegative()?-1:1},Ct.comp=Ct.compare,Ct.negate=function(){return!this.unsigned&&this.eq(wt)?wt:this.not().add(bt)},Ct.neg=Ct.negate,Ct.add=function(Et){tt(Et)||(Et=ct(Et));var At=this.high>>>16,Pt=65535&this.high,Rt=this.low>>>16,It=65535&this.low,Mt=Et.high>>>16,Ot=65535&Et.high,$t=Et.low>>>16,Lt=0,kt=0,Nt=0,Vt=0;return Nt+=(Vt+=It+(65535&Et.low))>>>16,kt+=(Nt+=Rt+$t)>>>16,Lt+=(kt+=Pt+Ot)>>>16,Lt+=At+Mt,st((Nt&=65535)<<16|(Vt&=65535),(Lt&=65535)<<16|(kt&=65535),this.unsigned)},Ct.subtract=function(Et){return tt(Et)||(Et=ct(Et)),this.add(Et.neg())},Ct.sub=Ct.subtract,Ct.multiply=function(Et){if(this.isZero())return vt;if(tt(Et)||(Et=ct(Et)),_)return st(_.mul(this.low,this.high,Et.low,Et.high),_.get_high(),this.unsigned);if(Et.isZero())return vt;if(this.eq(wt))return Et.isOdd()?wt:vt;if(Et.eq(wt))return this.isOdd()?wt:vt;if(this.isNegative())return Et.isNegative()?this.neg().mul(Et.neg()):this.neg().mul(Et).neg();if(Et.isNegative())return this.mul(Et.neg()).neg();if(this.lt(mt)&&Et.lt(mt))return ot(this.toNumber()*Et.toNumber(),this.unsigned);var At=this.high>>>16,Pt=65535&this.high,Rt=this.low>>>16,It=65535&this.low,Mt=Et.high>>>16,Ot=65535&Et.high,$t=Et.low>>>16,Lt=65535&Et.low,kt=0,Nt=0,Vt=0,zt=0;return Vt+=(zt+=It*Lt)>>>16,Nt+=(Vt+=Rt*Lt)>>>16,Vt&=65535,Nt+=(Vt+=It*$t)>>>16,kt+=(Nt+=Pt*Lt)>>>16,Nt&=65535,kt+=(Nt+=Rt*$t)>>>16,Nt&=65535,kt+=(Nt+=It*Ot)>>>16,kt+=At*Lt+Pt*$t+Rt*Ot+It*Mt,st((Vt&=65535)<<16|(zt&=65535),(kt&=65535)<<16|(Nt&=65535),this.unsigned)},Ct.mul=Ct.multiply,Ct.divide=function(Et){if(tt(Et)||(Et=ct(Et)),Et.isZero())throw Error("division by zero");var At,Pt,Rt;if(_)return this.unsigned||this.high!==-2147483648||Et.low!==-1||Et.high!==-1?st((this.unsigned?_.div_u:_.div_s)(this.low,this.high,Et.low,Et.high),_.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?yt:vt;if(this.unsigned){if(Et.unsigned||(Et=Et.toUnsigned()),Et.gt(this))return yt;if(Et.gt(this.shru(1)))return _t;Rt=yt}else{if(this.eq(wt))return Et.eq(bt)||Et.eq(xt)?wt:Et.eq(wt)?bt:(At=this.shr(1).div(Et).shl(1)).eq(vt)?Et.isNegative()?bt:xt:(Pt=this.sub(Et.mul(At)),Rt=At.add(Pt.div(Et)));if(Et.eq(wt))return this.unsigned?yt:vt;if(this.isNegative())return Et.isNegative()?this.neg().div(Et.neg()):this.neg().div(Et).neg();if(Et.isNegative())return this.div(Et.neg()).neg();Rt=vt}for(Pt=this;Pt.gte(Et);){At=Math.max(1,Math.floor(Pt.toNumber()/Et.toNumber()));for(var It=Math.ceil(Math.log(At)/Math.LN2),Mt=It<=48?1:dt(2,It-48),Ot=ot(At),$t=Ot.mul(Et);$t.isNegative()||$t.gt(Pt);)$t=(Ot=ot(At-=Mt,this.unsigned)).mul(Et);Ot.isZero()&&(Ot=bt),Rt=Rt.add(Ot),Pt=Pt.sub($t)}return Rt},Ct.div=Ct.divide,Ct.modulo=function(Et){return tt(Et)||(Et=ct(Et)),_?st((this.unsigned?_.rem_u:_.rem_s)(this.low,this.high,Et.low,Et.high),_.get_high(),this.unsigned):this.sub(this.div(Et).mul(Et))},Ct.mod=Ct.modulo,Ct.rem=Ct.modulo,Ct.not=function(){return st(~this.low,~this.high,this.unsigned)},Ct.and=function(Et){return tt(Et)||(Et=ct(Et)),st(this.low&Et.low,this.high&Et.high,this.unsigned)},Ct.or=function(Et){return tt(Et)||(Et=ct(Et)),st(this.low|Et.low,this.high|Et.high,this.unsigned)},Ct.xor=function(Et){return tt(Et)||(Et=ct(Et)),st(this.low^Et.low,this.high^Et.high,this.unsigned)},Ct.shiftLeft=function(Et){return tt(Et)&&(Et=Et.toInt()),(Et&=63)==0?this:Et<32?st(this.low<<Et,this.high<<Et|this.low>>>32-Et,this.unsigned):st(0,this.low<<Et-32,this.unsigned)},Ct.shl=Ct.shiftLeft,Ct.shiftRight=function(Et){return tt(Et)&&(Et=Et.toInt()),(Et&=63)==0?this:Et<32?st(this.low>>>Et|this.high<<32-Et,this.high>>Et,this.unsigned):st(this.high>>Et-32,this.high>=0?0:-1,this.unsigned)},Ct.shr=Ct.shiftRight,Ct.shiftRightUnsigned=function(Et){if(tt(Et)&&(Et=Et.toInt()),(Et&=63)==0)return this;var At=this.high;return Et<32?st(this.low>>>Et|At<<32-Et,At>>>Et,this.unsigned):st(Et===32?At:At>>>Et-32,0,this.unsigned)},Ct.shru=Ct.shiftRightUnsigned,Ct.shr_u=Ct.shiftRightUnsigned,Ct.toSigned=function(){return this.unsigned?st(this.low,this.high,!1):this},Ct.toUnsigned=function(){return this.unsigned?this:st(this.low,this.high,!0)},Ct.toBytes=function(Et){return Et?this.toBytesLE():this.toBytesBE()},Ct.toBytesLE=function(){var Et=this.high,At=this.low;return[255&At,At>>>8&255,At>>>16&255,At>>>24,255&Et,Et>>>8&255,Et>>>16&255,Et>>>24]},Ct.toBytesBE=function(){var Et=this.high,At=this.low;return[Et>>>24,Et>>>16&255,Et>>>8&255,255&Et,At>>>24,At>>>16&255,At>>>8&255,255&At]},et.fromBytes=function(Et,At,Pt){return Pt?et.fromBytesLE(Et,At):et.fromBytesBE(Et,At)},et.fromBytesLE=function(Et,At){return new et(Et[0]|Et[1]<<8|Et[2]<<16|Et[3]<<24,Et[4]|Et[5]<<8|Et[6]<<16|Et[7]<<24,At)},et.fromBytesBE=function(Et,At){return new et(Et[4]<<24|Et[5]<<16|Et[6]<<8|Et[7],Et[0]<<24|Et[1]<<16|Et[2]<<8|Et[3],At)}},1446:(_e,_,et)=>{var tt,nt,it,at=et(2100),ot=at.Reader,st=at.Writer,dt=at.util,ht=at.roots.default||(at.roots.default={});ht.onnx=((it={}).Version=(tt={},(nt=Object.create(tt))[tt[0]="_START_VERSION"]=0,nt[tt[1]="IR_VERSION_2017_10_10"]=1,nt[tt[2]="IR_VERSION_2017_10_30"]=2,nt[tt[3]="IR_VERSION_2017_11_3"]=3,nt[tt[4]="IR_VERSION_2019_1_22"]=4,nt[tt[5]="IR_VERSION"]=5,nt),it.AttributeProto=function(){function ct(ut){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],ut)for(var ft=Object.keys(ut),gt=0;gt<ft.length;++gt)ut[ft[gt]]!=null&&(this[ft[gt]]=ut[ft[gt]])}return ct.prototype.name="",ct.prototype.refAttrName="",ct.prototype.docString="",ct.prototype.type=0,ct.prototype.f=0,ct.prototype.i=dt.Long?dt.Long.fromBits(0,0,!1):0,ct.prototype.s=dt.newBuffer([]),ct.prototype.t=null,ct.prototype.g=null,ct.prototype.floats=dt.emptyArray,ct.prototype.ints=dt.emptyArray,ct.prototype.strings=dt.emptyArray,ct.prototype.tensors=dt.emptyArray,ct.prototype.graphs=dt.emptyArray,ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ft){if(ft||(ft=st.create()),ut.name!=null&&ut.hasOwnProperty("name")&&ft.uint32(10).string(ut.name),ut.f!=null&&ut.hasOwnProperty("f")&&ft.uint32(21).float(ut.f),ut.i!=null&&ut.hasOwnProperty("i")&&ft.uint32(24).int64(ut.i),ut.s!=null&&ut.hasOwnProperty("s")&&ft.uint32(34).bytes(ut.s),ut.t!=null&&ut.hasOwnProperty("t")&&ht.onnx.TensorProto.encode(ut.t,ft.uint32(42).fork()).ldelim(),ut.g!=null&&ut.hasOwnProperty("g")&&ht.onnx.GraphProto.encode(ut.g,ft.uint32(50).fork()).ldelim(),ut.floats!=null&&ut.floats.length){ft.uint32(58).fork();for(var gt=0;gt<ut.floats.length;++gt)ft.float(ut.floats[gt]);ft.ldelim()}if(ut.ints!=null&&ut.ints.length){for(ft.uint32(66).fork(),gt=0;gt<ut.ints.length;++gt)ft.int64(ut.ints[gt]);ft.ldelim()}if(ut.strings!=null&&ut.strings.length)for(gt=0;gt<ut.strings.length;++gt)ft.uint32(74).bytes(ut.strings[gt]);if(ut.tensors!=null&&ut.tensors.length)for(gt=0;gt<ut.tensors.length;++gt)ht.onnx.TensorProto.encode(ut.tensors[gt],ft.uint32(82).fork()).ldelim();if(ut.graphs!=null&&ut.graphs.length)for(gt=0;gt<ut.graphs.length;++gt)ht.onnx.GraphProto.encode(ut.graphs[gt],ft.uint32(90).fork()).ldelim();return ut.docString!=null&&ut.hasOwnProperty("docString")&&ft.uint32(106).string(ut.docString),ut.type!=null&&ut.hasOwnProperty("type")&&ft.uint32(160).int32(ut.type),ut.refAttrName!=null&&ut.hasOwnProperty("refAttrName")&&ft.uint32(170).string(ut.refAttrName),ft},ct.encodeDelimited=function(ut,ft){return this.encode(ut,ft).ldelim()},ct.decode=function(ut,ft){ut instanceof ot||(ut=ot.create(ut));for(var gt=ft===void 0?ut.len:ut.pos+ft,mt=new ht.onnx.AttributeProto;ut.pos<gt;){var vt=ut.uint32();switch(vt>>>3){case 1:mt.name=ut.string();break;case 21:mt.refAttrName=ut.string();break;case 13:mt.docString=ut.string();break;case 20:mt.type=ut.int32();break;case 2:mt.f=ut.float();break;case 3:mt.i=ut.int64();break;case 4:mt.s=ut.bytes();break;case 5:mt.t=ht.onnx.TensorProto.decode(ut,ut.uint32());break;case 6:mt.g=ht.onnx.GraphProto.decode(ut,ut.uint32());break;case 7:if(mt.floats&&mt.floats.length||(mt.floats=[]),(7&vt)==2)for(var yt=ut.uint32()+ut.pos;ut.pos<yt;)mt.floats.push(ut.float());else mt.floats.push(ut.float());break;case 8:if(mt.ints&&mt.ints.length||(mt.ints=[]),(7&vt)==2)for(yt=ut.uint32()+ut.pos;ut.pos<yt;)mt.ints.push(ut.int64());else mt.ints.push(ut.int64());break;case 9:mt.strings&&mt.strings.length||(mt.strings=[]),mt.strings.push(ut.bytes());break;case 10:mt.tensors&&mt.tensors.length||(mt.tensors=[]),mt.tensors.push(ht.onnx.TensorProto.decode(ut,ut.uint32()));break;case 11:mt.graphs&&mt.graphs.length||(mt.graphs=[]),mt.graphs.push(ht.onnx.GraphProto.decode(ut,ut.uint32()));break;default:ut.skipType(7&vt)}}return mt},ct.decodeDelimited=function(ut){return ut instanceof ot||(ut=new ot(ut)),this.decode(ut,ut.uint32())},ct.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";if(ut.name!=null&&ut.hasOwnProperty("name")&&!dt.isString(ut.name))return"name: string expected";if(ut.refAttrName!=null&&ut.hasOwnProperty("refAttrName")&&!dt.isString(ut.refAttrName))return"refAttrName: string expected";if(ut.docString!=null&&ut.hasOwnProperty("docString")&&!dt.isString(ut.docString))return"docString: string expected";if(ut.type!=null&&ut.hasOwnProperty("type"))switch(ut.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(ut.f!=null&&ut.hasOwnProperty("f")&&typeof ut.f!="number")return"f: number expected";if(ut.i!=null&&ut.hasOwnProperty("i")&&!(dt.isInteger(ut.i)||ut.i&&dt.isInteger(ut.i.low)&&dt.isInteger(ut.i.high)))return"i: integer|Long expected";if(ut.s!=null&&ut.hasOwnProperty("s")&&!(ut.s&&typeof ut.s.length=="number"||dt.isString(ut.s)))return"s: buffer expected";if(ut.t!=null&&ut.hasOwnProperty("t")&&(gt=ht.onnx.TensorProto.verify(ut.t)))return"t."+gt;if(ut.g!=null&&ut.hasOwnProperty("g")&&(gt=ht.onnx.GraphProto.verify(ut.g)))return"g."+gt;if(ut.floats!=null&&ut.hasOwnProperty("floats")){if(!Array.isArray(ut.floats))return"floats: array expected";for(var ft=0;ft<ut.floats.length;++ft)if(typeof ut.floats[ft]!="number")return"floats: number[] expected"}if(ut.ints!=null&&ut.hasOwnProperty("ints")){if(!Array.isArray(ut.ints))return"ints: array expected";for(ft=0;ft<ut.ints.length;++ft)if(!(dt.isInteger(ut.ints[ft])||ut.ints[ft]&&dt.isInteger(ut.ints[ft].low)&&dt.isInteger(ut.ints[ft].high)))return"ints: integer|Long[] expected"}if(ut.strings!=null&&ut.hasOwnProperty("strings")){if(!Array.isArray(ut.strings))return"strings: array expected";for(ft=0;ft<ut.strings.length;++ft)if(!(ut.strings[ft]&&typeof ut.strings[ft].length=="number"||dt.isString(ut.strings[ft])))return"strings: buffer[] expected"}if(ut.tensors!=null&&ut.hasOwnProperty("tensors")){if(!Array.isArray(ut.tensors))return"tensors: array expected";for(ft=0;ft<ut.tensors.length;++ft)if(gt=ht.onnx.TensorProto.verify(ut.tensors[ft]))return"tensors."+gt}if(ut.graphs!=null&&ut.hasOwnProperty("graphs")){if(!Array.isArray(ut.graphs))return"graphs: array expected";for(ft=0;ft<ut.graphs.length;++ft){var gt;if(gt=ht.onnx.GraphProto.verify(ut.graphs[ft]))return"graphs."+gt}}return null},ct.fromObject=function(ut){if(ut instanceof ht.onnx.AttributeProto)return ut;var ft=new ht.onnx.AttributeProto;switch(ut.name!=null&&(ft.name=String(ut.name)),ut.refAttrName!=null&&(ft.refAttrName=String(ut.refAttrName)),ut.docString!=null&&(ft.docString=String(ut.docString)),ut.type){case"UNDEFINED":case 0:ft.type=0;break;case"FLOAT":case 1:ft.type=1;break;case"INT":case 2:ft.type=2;break;case"STRING":case 3:ft.type=3;break;case"TENSOR":case 4:ft.type=4;break;case"GRAPH":case 5:ft.type=5;break;case"FLOATS":case 6:ft.type=6;break;case"INTS":case 7:ft.type=7;break;case"STRINGS":case 8:ft.type=8;break;case"TENSORS":case 9:ft.type=9;break;case"GRAPHS":case 10:ft.type=10}if(ut.f!=null&&(ft.f=Number(ut.f)),ut.i!=null&&(dt.Long?(ft.i=dt.Long.fromValue(ut.i)).unsigned=!1:typeof ut.i=="string"?ft.i=parseInt(ut.i,10):typeof ut.i=="number"?ft.i=ut.i:typeof ut.i=="object"&&(ft.i=new dt.LongBits(ut.i.low>>>0,ut.i.high>>>0).toNumber())),ut.s!=null&&(typeof ut.s=="string"?dt.base64.decode(ut.s,ft.s=dt.newBuffer(dt.base64.length(ut.s)),0):ut.s.length&&(ft.s=ut.s)),ut.t!=null){if(typeof ut.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");ft.t=ht.onnx.TensorProto.fromObject(ut.t)}if(ut.g!=null){if(typeof ut.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");ft.g=ht.onnx.GraphProto.fromObject(ut.g)}if(ut.floats){if(!Array.isArray(ut.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");ft.floats=[];for(var gt=0;gt<ut.floats.length;++gt)ft.floats[gt]=Number(ut.floats[gt])}if(ut.ints){if(!Array.isArray(ut.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(ft.ints=[],gt=0;gt<ut.ints.length;++gt)dt.Long?(ft.ints[gt]=dt.Long.fromValue(ut.ints[gt])).unsigned=!1:typeof ut.ints[gt]=="string"?ft.ints[gt]=parseInt(ut.ints[gt],10):typeof ut.ints[gt]=="number"?ft.ints[gt]=ut.ints[gt]:typeof ut.ints[gt]=="object"&&(ft.ints[gt]=new dt.LongBits(ut.ints[gt].low>>>0,ut.ints[gt].high>>>0).toNumber())}if(ut.strings){if(!Array.isArray(ut.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(ft.strings=[],gt=0;gt<ut.strings.length;++gt)typeof ut.strings[gt]=="string"?dt.base64.decode(ut.strings[gt],ft.strings[gt]=dt.newBuffer(dt.base64.length(ut.strings[gt])),0):ut.strings[gt].length&&(ft.strings[gt]=ut.strings[gt])}if(ut.tensors){if(!Array.isArray(ut.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(ft.tensors=[],gt=0;gt<ut.tensors.length;++gt){if(typeof ut.tensors[gt]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");ft.tensors[gt]=ht.onnx.TensorProto.fromObject(ut.tensors[gt])}}if(ut.graphs){if(!Array.isArray(ut.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(ft.graphs=[],gt=0;gt<ut.graphs.length;++gt){if(typeof ut.graphs[gt]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");ft.graphs[gt]=ht.onnx.GraphProto.fromObject(ut.graphs[gt])}}return ft},ct.toObject=function(ut,ft){ft||(ft={});var gt={};if((ft.arrays||ft.defaults)&&(gt.floats=[],gt.ints=[],gt.strings=[],gt.tensors=[],gt.graphs=[]),ft.defaults){if(gt.name="",gt.f=0,dt.Long){var mt=new dt.Long(0,0,!1);gt.i=ft.longs===String?mt.toString():ft.longs===Number?mt.toNumber():mt}else gt.i=ft.longs===String?"0":0;ft.bytes===String?gt.s="":(gt.s=[],ft.bytes!==Array&&(gt.s=dt.newBuffer(gt.s))),gt.t=null,gt.g=null,gt.docString="",gt.type=ft.enums===String?"UNDEFINED":0,gt.refAttrName=""}if(ut.name!=null&&ut.hasOwnProperty("name")&&(gt.name=ut.name),ut.f!=null&&ut.hasOwnProperty("f")&&(gt.f=ft.json&&!isFinite(ut.f)?String(ut.f):ut.f),ut.i!=null&&ut.hasOwnProperty("i")&&(typeof ut.i=="number"?gt.i=ft.longs===String?String(ut.i):ut.i:gt.i=ft.longs===String?dt.Long.prototype.toString.call(ut.i):ft.longs===Number?new dt.LongBits(ut.i.low>>>0,ut.i.high>>>0).toNumber():ut.i),ut.s!=null&&ut.hasOwnProperty("s")&&(gt.s=ft.bytes===String?dt.base64.encode(ut.s,0,ut.s.length):ft.bytes===Array?Array.prototype.slice.call(ut.s):ut.s),ut.t!=null&&ut.hasOwnProperty("t")&&(gt.t=ht.onnx.TensorProto.toObject(ut.t,ft)),ut.g!=null&&ut.hasOwnProperty("g")&&(gt.g=ht.onnx.GraphProto.toObject(ut.g,ft)),ut.floats&&ut.floats.length){gt.floats=[];for(var vt=0;vt<ut.floats.length;++vt)gt.floats[vt]=ft.json&&!isFinite(ut.floats[vt])?String(ut.floats[vt]):ut.floats[vt]}if(ut.ints&&ut.ints.length)for(gt.ints=[],vt=0;vt<ut.ints.length;++vt)typeof ut.ints[vt]=="number"?gt.ints[vt]=ft.longs===String?String(ut.ints[vt]):ut.ints[vt]:gt.ints[vt]=ft.longs===String?dt.Long.prototype.toString.call(ut.ints[vt]):ft.longs===Number?new dt.LongBits(ut.ints[vt].low>>>0,ut.ints[vt].high>>>0).toNumber():ut.ints[vt];if(ut.strings&&ut.strings.length)for(gt.strings=[],vt=0;vt<ut.strings.length;++vt)gt.strings[vt]=ft.bytes===String?dt.base64.encode(ut.strings[vt],0,ut.strings[vt].length):ft.bytes===Array?Array.prototype.slice.call(ut.strings[vt]):ut.strings[vt];if(ut.tensors&&ut.tensors.length)for(gt.tensors=[],vt=0;vt<ut.tensors.length;++vt)gt.tensors[vt]=ht.onnx.TensorProto.toObject(ut.tensors[vt],ft);if(ut.graphs&&ut.graphs.length)for(gt.graphs=[],vt=0;vt<ut.graphs.length;++vt)gt.graphs[vt]=ht.onnx.GraphProto.toObject(ut.graphs[vt],ft);return ut.docString!=null&&ut.hasOwnProperty("docString")&&(gt.docString=ut.docString),ut.type!=null&&ut.hasOwnProperty("type")&&(gt.type=ft.enums===String?ht.onnx.AttributeProto.AttributeType[ut.type]:ut.type),ut.refAttrName!=null&&ut.hasOwnProperty("refAttrName")&&(gt.refAttrName=ut.refAttrName),gt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct.AttributeType=function(){var ut={},ft=Object.create(ut);return ft[ut[0]="UNDEFINED"]=0,ft[ut[1]="FLOAT"]=1,ft[ut[2]="INT"]=2,ft[ut[3]="STRING"]=3,ft[ut[4]="TENSOR"]=4,ft[ut[5]="GRAPH"]=5,ft[ut[6]="FLOATS"]=6,ft[ut[7]="INTS"]=7,ft[ut[8]="STRINGS"]=8,ft[ut[9]="TENSORS"]=9,ft[ut[10]="GRAPHS"]=10,ft}(),ct}(),it.ValueInfoProto=function(){function ct(ut){if(ut)for(var ft=Object.keys(ut),gt=0;gt<ft.length;++gt)ut[ft[gt]]!=null&&(this[ft[gt]]=ut[ft[gt]])}return ct.prototype.name="",ct.prototype.type=null,ct.prototype.docString="",ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ft){return ft||(ft=st.create()),ut.name!=null&&ut.hasOwnProperty("name")&&ft.uint32(10).string(ut.name),ut.type!=null&&ut.hasOwnProperty("type")&&ht.onnx.TypeProto.encode(ut.type,ft.uint32(18).fork()).ldelim(),ut.docString!=null&&ut.hasOwnProperty("docString")&&ft.uint32(26).string(ut.docString),ft},ct.encodeDelimited=function(ut,ft){return this.encode(ut,ft).ldelim()},ct.decode=function(ut,ft){ut instanceof ot||(ut=ot.create(ut));for(var gt=ft===void 0?ut.len:ut.pos+ft,mt=new ht.onnx.ValueInfoProto;ut.pos<gt;){var vt=ut.uint32();switch(vt>>>3){case 1:mt.name=ut.string();break;case 2:mt.type=ht.onnx.TypeProto.decode(ut,ut.uint32());break;case 3:mt.docString=ut.string();break;default:ut.skipType(7&vt)}}return mt},ct.decodeDelimited=function(ut){return ut instanceof ot||(ut=new ot(ut)),this.decode(ut,ut.uint32())},ct.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";if(ut.name!=null&&ut.hasOwnProperty("name")&&!dt.isString(ut.name))return"name: string expected";if(ut.type!=null&&ut.hasOwnProperty("type")){var ft=ht.onnx.TypeProto.verify(ut.type);if(ft)return"type."+ft}return ut.docString!=null&&ut.hasOwnProperty("docString")&&!dt.isString(ut.docString)?"docString: string expected":null},ct.fromObject=function(ut){if(ut instanceof ht.onnx.ValueInfoProto)return ut;var ft=new ht.onnx.ValueInfoProto;if(ut.name!=null&&(ft.name=String(ut.name)),ut.type!=null){if(typeof ut.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");ft.type=ht.onnx.TypeProto.fromObject(ut.type)}return ut.docString!=null&&(ft.docString=String(ut.docString)),ft},ct.toObject=function(ut,ft){ft||(ft={});var gt={};return ft.defaults&&(gt.name="",gt.type=null,gt.docString=""),ut.name!=null&&ut.hasOwnProperty("name")&&(gt.name=ut.name),ut.type!=null&&ut.hasOwnProperty("type")&&(gt.type=ht.onnx.TypeProto.toObject(ut.type,ft)),ut.docString!=null&&ut.hasOwnProperty("docString")&&(gt.docString=ut.docString),gt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct}(),it.NodeProto=function(){function ct(ut){if(this.input=[],this.output=[],this.attribute=[],ut)for(var ft=Object.keys(ut),gt=0;gt<ft.length;++gt)ut[ft[gt]]!=null&&(this[ft[gt]]=ut[ft[gt]])}return ct.prototype.input=dt.emptyArray,ct.prototype.output=dt.emptyArray,ct.prototype.name="",ct.prototype.opType="",ct.prototype.domain="",ct.prototype.attribute=dt.emptyArray,ct.prototype.docString="",ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ft){if(ft||(ft=st.create()),ut.input!=null&&ut.input.length)for(var gt=0;gt<ut.input.length;++gt)ft.uint32(10).string(ut.input[gt]);if(ut.output!=null&&ut.output.length)for(gt=0;gt<ut.output.length;++gt)ft.uint32(18).string(ut.output[gt]);if(ut.name!=null&&ut.hasOwnProperty("name")&&ft.uint32(26).string(ut.name),ut.opType!=null&&ut.hasOwnProperty("opType")&&ft.uint32(34).string(ut.opType),ut.attribute!=null&&ut.attribute.length)for(gt=0;gt<ut.attribute.length;++gt)ht.onnx.AttributeProto.encode(ut.attribute[gt],ft.uint32(42).fork()).ldelim();return ut.docString!=null&&ut.hasOwnProperty("docString")&&ft.uint32(50).string(ut.docString),ut.domain!=null&&ut.hasOwnProperty("domain")&&ft.uint32(58).string(ut.domain),ft},ct.encodeDelimited=function(ut,ft){return this.encode(ut,ft).ldelim()},ct.decode=function(ut,ft){ut instanceof ot||(ut=ot.create(ut));for(var gt=ft===void 0?ut.len:ut.pos+ft,mt=new ht.onnx.NodeProto;ut.pos<gt;){var vt=ut.uint32();switch(vt>>>3){case 1:mt.input&&mt.input.length||(mt.input=[]),mt.input.push(ut.string());break;case 2:mt.output&&mt.output.length||(mt.output=[]),mt.output.push(ut.string());break;case 3:mt.name=ut.string();break;case 4:mt.opType=ut.string();break;case 7:mt.domain=ut.string();break;case 5:mt.attribute&&mt.attribute.length||(mt.attribute=[]),mt.attribute.push(ht.onnx.AttributeProto.decode(ut,ut.uint32()));break;case 6:mt.docString=ut.string();break;default:ut.skipType(7&vt)}}return mt},ct.decodeDelimited=function(ut){return ut instanceof ot||(ut=new ot(ut)),this.decode(ut,ut.uint32())},ct.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";if(ut.input!=null&&ut.hasOwnProperty("input")){if(!Array.isArray(ut.input))return"input: array expected";for(var ft=0;ft<ut.input.length;++ft)if(!dt.isString(ut.input[ft]))return"input: string[] expected"}if(ut.output!=null&&ut.hasOwnProperty("output")){if(!Array.isArray(ut.output))return"output: array expected";for(ft=0;ft<ut.output.length;++ft)if(!dt.isString(ut.output[ft]))return"output: string[] expected"}if(ut.name!=null&&ut.hasOwnProperty("name")&&!dt.isString(ut.name))return"name: string expected";if(ut.opType!=null&&ut.hasOwnProperty("opType")&&!dt.isString(ut.opType))return"opType: string expected";if(ut.domain!=null&&ut.hasOwnProperty("domain")&&!dt.isString(ut.domain))return"domain: string expected";if(ut.attribute!=null&&ut.hasOwnProperty("attribute")){if(!Array.isArray(ut.attribute))return"attribute: array expected";for(ft=0;ft<ut.attribute.length;++ft){var gt=ht.onnx.AttributeProto.verify(ut.attribute[ft]);if(gt)return"attribute."+gt}}return ut.docString!=null&&ut.hasOwnProperty("docString")&&!dt.isString(ut.docString)?"docString: string expected":null},ct.fromObject=function(ut){if(ut instanceof ht.onnx.NodeProto)return ut;var ft=new ht.onnx.NodeProto;if(ut.input){if(!Array.isArray(ut.input))throw TypeError(".onnx.NodeProto.input: array expected");ft.input=[];for(var gt=0;gt<ut.input.length;++gt)ft.input[gt]=String(ut.input[gt])}if(ut.output){if(!Array.isArray(ut.output))throw TypeError(".onnx.NodeProto.output: array expected");for(ft.output=[],gt=0;gt<ut.output.length;++gt)ft.output[gt]=String(ut.output[gt])}if(ut.name!=null&&(ft.name=String(ut.name)),ut.opType!=null&&(ft.opType=String(ut.opType)),ut.domain!=null&&(ft.domain=String(ut.domain)),ut.attribute){if(!Array.isArray(ut.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(ft.attribute=[],gt=0;gt<ut.attribute.length;++gt){if(typeof ut.attribute[gt]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");ft.attribute[gt]=ht.onnx.AttributeProto.fromObject(ut.attribute[gt])}}return ut.docString!=null&&(ft.docString=String(ut.docString)),ft},ct.toObject=function(ut,ft){ft||(ft={});var gt={};if((ft.arrays||ft.defaults)&&(gt.input=[],gt.output=[],gt.attribute=[]),ft.defaults&&(gt.name="",gt.opType="",gt.docString="",gt.domain=""),ut.input&&ut.input.length){gt.input=[];for(var mt=0;mt<ut.input.length;++mt)gt.input[mt]=ut.input[mt]}if(ut.output&&ut.output.length)for(gt.output=[],mt=0;mt<ut.output.length;++mt)gt.output[mt]=ut.output[mt];if(ut.name!=null&&ut.hasOwnProperty("name")&&(gt.name=ut.name),ut.opType!=null&&ut.hasOwnProperty("opType")&&(gt.opType=ut.opType),ut.attribute&&ut.attribute.length)for(gt.attribute=[],mt=0;mt<ut.attribute.length;++mt)gt.attribute[mt]=ht.onnx.AttributeProto.toObject(ut.attribute[mt],ft);return ut.docString!=null&&ut.hasOwnProperty("docString")&&(gt.docString=ut.docString),ut.domain!=null&&ut.hasOwnProperty("domain")&&(gt.domain=ut.domain),gt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct}(),it.ModelProto=function(){function ct(ut){if(this.opsetImport=[],this.metadataProps=[],ut)for(var ft=Object.keys(ut),gt=0;gt<ft.length;++gt)ut[ft[gt]]!=null&&(this[ft[gt]]=ut[ft[gt]])}return ct.prototype.irVersion=dt.Long?dt.Long.fromBits(0,0,!1):0,ct.prototype.opsetImport=dt.emptyArray,ct.prototype.producerName="",ct.prototype.producerVersion="",ct.prototype.domain="",ct.prototype.modelVersion=dt.Long?dt.Long.fromBits(0,0,!1):0,ct.prototype.docString="",ct.prototype.graph=null,ct.prototype.metadataProps=dt.emptyArray,ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ft){if(ft||(ft=st.create()),ut.irVersion!=null&&ut.hasOwnProperty("irVersion")&&ft.uint32(8).int64(ut.irVersion),ut.producerName!=null&&ut.hasOwnProperty("producerName")&&ft.uint32(18).string(ut.producerName),ut.producerVersion!=null&&ut.hasOwnProperty("producerVersion")&&ft.uint32(26).string(ut.producerVersion),ut.domain!=null&&ut.hasOwnProperty("domain")&&ft.uint32(34).string(ut.domain),ut.modelVersion!=null&&ut.hasOwnProperty("modelVersion")&&ft.uint32(40).int64(ut.modelVersion),ut.docString!=null&&ut.hasOwnProperty("docString")&&ft.uint32(50).string(ut.docString),ut.graph!=null&&ut.hasOwnProperty("graph")&&ht.onnx.GraphProto.encode(ut.graph,ft.uint32(58).fork()).ldelim(),ut.opsetImport!=null&&ut.opsetImport.length)for(var gt=0;gt<ut.opsetImport.length;++gt)ht.onnx.OperatorSetIdProto.encode(ut.opsetImport[gt],ft.uint32(66).fork()).ldelim();if(ut.metadataProps!=null&&ut.metadataProps.length)for(gt=0;gt<ut.metadataProps.length;++gt)ht.onnx.StringStringEntryProto.encode(ut.metadataProps[gt],ft.uint32(114).fork()).ldelim();return ft},ct.encodeDelimited=function(ut,ft){return this.encode(ut,ft).ldelim()},ct.decode=function(ut,ft){ut instanceof ot||(ut=ot.create(ut));for(var gt=ft===void 0?ut.len:ut.pos+ft,mt=new ht.onnx.ModelProto;ut.pos<gt;){var vt=ut.uint32();switch(vt>>>3){case 1:mt.irVersion=ut.int64();break;case 8:mt.opsetImport&&mt.opsetImport.length||(mt.opsetImport=[]),mt.opsetImport.push(ht.onnx.OperatorSetIdProto.decode(ut,ut.uint32()));break;case 2:mt.producerName=ut.string();break;case 3:mt.producerVersion=ut.string();break;case 4:mt.domain=ut.string();break;case 5:mt.modelVersion=ut.int64();break;case 6:mt.docString=ut.string();break;case 7:mt.graph=ht.onnx.GraphProto.decode(ut,ut.uint32());break;case 14:mt.metadataProps&&mt.metadataProps.length||(mt.metadataProps=[]),mt.metadataProps.push(ht.onnx.StringStringEntryProto.decode(ut,ut.uint32()));break;default:ut.skipType(7&vt)}}return mt},ct.decodeDelimited=function(ut){return ut instanceof ot||(ut=new ot(ut)),this.decode(ut,ut.uint32())},ct.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";if(ut.irVersion!=null&&ut.hasOwnProperty("irVersion")&&!(dt.isInteger(ut.irVersion)||ut.irVersion&&dt.isInteger(ut.irVersion.low)&&dt.isInteger(ut.irVersion.high)))return"irVersion: integer|Long expected";if(ut.opsetImport!=null&&ut.hasOwnProperty("opsetImport")){if(!Array.isArray(ut.opsetImport))return"opsetImport: array expected";for(var ft=0;ft<ut.opsetImport.length;++ft)if(gt=ht.onnx.OperatorSetIdProto.verify(ut.opsetImport[ft]))return"opsetImport."+gt}if(ut.producerName!=null&&ut.hasOwnProperty("producerName")&&!dt.isString(ut.producerName))return"producerName: string expected";if(ut.producerVersion!=null&&ut.hasOwnProperty("producerVersion")&&!dt.isString(ut.producerVersion))return"producerVersion: string expected";if(ut.domain!=null&&ut.hasOwnProperty("domain")&&!dt.isString(ut.domain))return"domain: string expected";if(ut.modelVersion!=null&&ut.hasOwnProperty("modelVersion")&&!(dt.isInteger(ut.modelVersion)||ut.modelVersion&&dt.isInteger(ut.modelVersion.low)&&dt.isInteger(ut.modelVersion.high)))return"modelVersion: integer|Long expected";if(ut.docString!=null&&ut.hasOwnProperty("docString")&&!dt.isString(ut.docString))return"docString: string expected";if(ut.graph!=null&&ut.hasOwnProperty("graph")&&(gt=ht.onnx.GraphProto.verify(ut.graph)))return"graph."+gt;if(ut.metadataProps!=null&&ut.hasOwnProperty("metadataProps")){if(!Array.isArray(ut.metadataProps))return"metadataProps: array expected";for(ft=0;ft<ut.metadataProps.length;++ft){var gt;if(gt=ht.onnx.StringStringEntryProto.verify(ut.metadataProps[ft]))return"metadataProps."+gt}}return null},ct.fromObject=function(ut){if(ut instanceof ht.onnx.ModelProto)return ut;var ft=new ht.onnx.ModelProto;if(ut.irVersion!=null&&(dt.Long?(ft.irVersion=dt.Long.fromValue(ut.irVersion)).unsigned=!1:typeof ut.irVersion=="string"?ft.irVersion=parseInt(ut.irVersion,10):typeof ut.irVersion=="number"?ft.irVersion=ut.irVersion:typeof ut.irVersion=="object"&&(ft.irVersion=new dt.LongBits(ut.irVersion.low>>>0,ut.irVersion.high>>>0).toNumber())),ut.opsetImport){if(!Array.isArray(ut.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");ft.opsetImport=[];for(var gt=0;gt<ut.opsetImport.length;++gt){if(typeof ut.opsetImport[gt]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");ft.opsetImport[gt]=ht.onnx.OperatorSetIdProto.fromObject(ut.opsetImport[gt])}}if(ut.producerName!=null&&(ft.producerName=String(ut.producerName)),ut.producerVersion!=null&&(ft.producerVersion=String(ut.producerVersion)),ut.domain!=null&&(ft.domain=String(ut.domain)),ut.modelVersion!=null&&(dt.Long?(ft.modelVersion=dt.Long.fromValue(ut.modelVersion)).unsigned=!1:typeof ut.modelVersion=="string"?ft.modelVersion=parseInt(ut.modelVersion,10):typeof ut.modelVersion=="number"?ft.modelVersion=ut.modelVersion:typeof ut.modelVersion=="object"&&(ft.modelVersion=new dt.LongBits(ut.modelVersion.low>>>0,ut.modelVersion.high>>>0).toNumber())),ut.docString!=null&&(ft.docString=String(ut.docString)),ut.graph!=null){if(typeof ut.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");ft.graph=ht.onnx.GraphProto.fromObject(ut.graph)}if(ut.metadataProps){if(!Array.isArray(ut.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(ft.metadataProps=[],gt=0;gt<ut.metadataProps.length;++gt){if(typeof ut.metadataProps[gt]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");ft.metadataProps[gt]=ht.onnx.StringStringEntryProto.fromObject(ut.metadataProps[gt])}}return ft},ct.toObject=function(ut,ft){ft||(ft={});var gt={};if((ft.arrays||ft.defaults)&&(gt.opsetImport=[],gt.metadataProps=[]),ft.defaults){if(dt.Long){var mt=new dt.Long(0,0,!1);gt.irVersion=ft.longs===String?mt.toString():ft.longs===Number?mt.toNumber():mt}else gt.irVersion=ft.longs===String?"0":0;gt.producerName="",gt.producerVersion="",gt.domain="",dt.Long?(mt=new dt.Long(0,0,!1),gt.modelVersion=ft.longs===String?mt.toString():ft.longs===Number?mt.toNumber():mt):gt.modelVersion=ft.longs===String?"0":0,gt.docString="",gt.graph=null}if(ut.irVersion!=null&&ut.hasOwnProperty("irVersion")&&(typeof ut.irVersion=="number"?gt.irVersion=ft.longs===String?String(ut.irVersion):ut.irVersion:gt.irVersion=ft.longs===String?dt.Long.prototype.toString.call(ut.irVersion):ft.longs===Number?new dt.LongBits(ut.irVersion.low>>>0,ut.irVersion.high>>>0).toNumber():ut.irVersion),ut.producerName!=null&&ut.hasOwnProperty("producerName")&&(gt.producerName=ut.producerName),ut.producerVersion!=null&&ut.hasOwnProperty("producerVersion")&&(gt.producerVersion=ut.producerVersion),ut.domain!=null&&ut.hasOwnProperty("domain")&&(gt.domain=ut.domain),ut.modelVersion!=null&&ut.hasOwnProperty("modelVersion")&&(typeof ut.modelVersion=="number"?gt.modelVersion=ft.longs===String?String(ut.modelVersion):ut.modelVersion:gt.modelVersion=ft.longs===String?dt.Long.prototype.toString.call(ut.modelVersion):ft.longs===Number?new dt.LongBits(ut.modelVersion.low>>>0,ut.modelVersion.high>>>0).toNumber():ut.modelVersion),ut.docString!=null&&ut.hasOwnProperty("docString")&&(gt.docString=ut.docString),ut.graph!=null&&ut.hasOwnProperty("graph")&&(gt.graph=ht.onnx.GraphProto.toObject(ut.graph,ft)),ut.opsetImport&&ut.opsetImport.length){gt.opsetImport=[];for(var vt=0;vt<ut.opsetImport.length;++vt)gt.opsetImport[vt]=ht.onnx.OperatorSetIdProto.toObject(ut.opsetImport[vt],ft)}if(ut.metadataProps&&ut.metadataProps.length)for(gt.metadataProps=[],vt=0;vt<ut.metadataProps.length;++vt)gt.metadataProps[vt]=ht.onnx.StringStringEntryProto.toObject(ut.metadataProps[vt],ft);return gt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct}(),it.StringStringEntryProto=function(){function ct(ut){if(ut)for(var ft=Object.keys(ut),gt=0;gt<ft.length;++gt)ut[ft[gt]]!=null&&(this[ft[gt]]=ut[ft[gt]])}return ct.prototype.key="",ct.prototype.value="",ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ft){return ft||(ft=st.create()),ut.key!=null&&ut.hasOwnProperty("key")&&ft.uint32(10).string(ut.key),ut.value!=null&&ut.hasOwnProperty("value")&&ft.uint32(18).string(ut.value),ft},ct.encodeDelimited=function(ut,ft){return this.encode(ut,ft).ldelim()},ct.decode=function(ut,ft){ut instanceof ot||(ut=ot.create(ut));for(var gt=ft===void 0?ut.len:ut.pos+ft,mt=new ht.onnx.StringStringEntryProto;ut.pos<gt;){var vt=ut.uint32();switch(vt>>>3){case 1:mt.key=ut.string();break;case 2:mt.value=ut.string();break;default:ut.skipType(7&vt)}}return mt},ct.decodeDelimited=function(ut){return ut instanceof ot||(ut=new ot(ut)),this.decode(ut,ut.uint32())},ct.verify=function(ut){return typeof ut!="object"||ut===null?"object expected":ut.key!=null&&ut.hasOwnProperty("key")&&!dt.isString(ut.key)?"key: string expected":ut.value!=null&&ut.hasOwnProperty("value")&&!dt.isString(ut.value)?"value: string expected":null},ct.fromObject=function(ut){if(ut instanceof ht.onnx.StringStringEntryProto)return ut;var ft=new ht.onnx.StringStringEntryProto;return ut.key!=null&&(ft.key=String(ut.key)),ut.value!=null&&(ft.value=String(ut.value)),ft},ct.toObject=function(ut,ft){ft||(ft={});var gt={};return ft.defaults&&(gt.key="",gt.value=""),ut.key!=null&&ut.hasOwnProperty("key")&&(gt.key=ut.key),ut.value!=null&&ut.hasOwnProperty("value")&&(gt.value=ut.value),gt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct}(),it.TensorAnnotation=function(){function ct(ut){if(this.quantParameterTensorNames=[],ut)for(var ft=Object.keys(ut),gt=0;gt<ft.length;++gt)ut[ft[gt]]!=null&&(this[ft[gt]]=ut[ft[gt]])}return ct.prototype.tensorName="",ct.prototype.quantParameterTensorNames=dt.emptyArray,ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ft){if(ft||(ft=st.create()),ut.tensorName!=null&&ut.hasOwnProperty("tensorName")&&ft.uint32(10).string(ut.tensorName),ut.quantParameterTensorNames!=null&&ut.quantParameterTensorNames.length)for(var gt=0;gt<ut.quantParameterTensorNames.length;++gt)ht.onnx.StringStringEntryProto.encode(ut.quantParameterTensorNames[gt],ft.uint32(18).fork()).ldelim();return ft},ct.encodeDelimited=function(ut,ft){return this.encode(ut,ft).ldelim()},ct.decode=function(ut,ft){ut instanceof ot||(ut=ot.create(ut));for(var gt=ft===void 0?ut.len:ut.pos+ft,mt=new ht.onnx.TensorAnnotation;ut.pos<gt;){var vt=ut.uint32();switch(vt>>>3){case 1:mt.tensorName=ut.string();break;case 2:mt.quantParameterTensorNames&&mt.quantParameterTensorNames.length||(mt.quantParameterTensorNames=[]),mt.quantParameterTensorNames.push(ht.onnx.StringStringEntryProto.decode(ut,ut.uint32()));break;default:ut.skipType(7&vt)}}return mt},ct.decodeDelimited=function(ut){return ut instanceof ot||(ut=new ot(ut)),this.decode(ut,ut.uint32())},ct.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";if(ut.tensorName!=null&&ut.hasOwnProperty("tensorName")&&!dt.isString(ut.tensorName))return"tensorName: string expected";if(ut.quantParameterTensorNames!=null&&ut.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(ut.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var ft=0;ft<ut.quantParameterTensorNames.length;++ft){var gt=ht.onnx.StringStringEntryProto.verify(ut.quantParameterTensorNames[ft]);if(gt)return"quantParameterTensorNames."+gt}}return null},ct.fromObject=function(ut){if(ut instanceof ht.onnx.TensorAnnotation)return ut;var ft=new ht.onnx.TensorAnnotation;if(ut.tensorName!=null&&(ft.tensorName=String(ut.tensorName)),ut.quantParameterTensorNames){if(!Array.isArray(ut.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");ft.quantParameterTensorNames=[];for(var gt=0;gt<ut.quantParameterTensorNames.length;++gt){if(typeof ut.quantParameterTensorNames[gt]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");ft.quantParameterTensorNames[gt]=ht.onnx.StringStringEntryProto.fromObject(ut.quantParameterTensorNames[gt])}}return ft},ct.toObject=function(ut,ft){ft||(ft={});var gt={};if((ft.arrays||ft.defaults)&&(gt.quantParameterTensorNames=[]),ft.defaults&&(gt.tensorName=""),ut.tensorName!=null&&ut.hasOwnProperty("tensorName")&&(gt.tensorName=ut.tensorName),ut.quantParameterTensorNames&&ut.quantParameterTensorNames.length){gt.quantParameterTensorNames=[];for(var mt=0;mt<ut.quantParameterTensorNames.length;++mt)gt.quantParameterTensorNames[mt]=ht.onnx.StringStringEntryProto.toObject(ut.quantParameterTensorNames[mt],ft)}return gt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct}(),it.GraphProto=function(){function ct(ut){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],ut)for(var ft=Object.keys(ut),gt=0;gt<ft.length;++gt)ut[ft[gt]]!=null&&(this[ft[gt]]=ut[ft[gt]])}return ct.prototype.node=dt.emptyArray,ct.prototype.name="",ct.prototype.initializer=dt.emptyArray,ct.prototype.docString="",ct.prototype.input=dt.emptyArray,ct.prototype.output=dt.emptyArray,ct.prototype.valueInfo=dt.emptyArray,ct.prototype.quantizationAnnotation=dt.emptyArray,ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ft){if(ft||(ft=st.create()),ut.node!=null&&ut.node.length)for(var gt=0;gt<ut.node.length;++gt)ht.onnx.NodeProto.encode(ut.node[gt],ft.uint32(10).fork()).ldelim();if(ut.name!=null&&ut.hasOwnProperty("name")&&ft.uint32(18).string(ut.name),ut.initializer!=null&&ut.initializer.length)for(gt=0;gt<ut.initializer.length;++gt)ht.onnx.TensorProto.encode(ut.initializer[gt],ft.uint32(42).fork()).ldelim();if(ut.docString!=null&&ut.hasOwnProperty("docString")&&ft.uint32(82).string(ut.docString),ut.input!=null&&ut.input.length)for(gt=0;gt<ut.input.length;++gt)ht.onnx.ValueInfoProto.encode(ut.input[gt],ft.uint32(90).fork()).ldelim();if(ut.output!=null&&ut.output.length)for(gt=0;gt<ut.output.length;++gt)ht.onnx.ValueInfoProto.encode(ut.output[gt],ft.uint32(98).fork()).ldelim();if(ut.valueInfo!=null&&ut.valueInfo.length)for(gt=0;gt<ut.valueInfo.length;++gt)ht.onnx.ValueInfoProto.encode(ut.valueInfo[gt],ft.uint32(106).fork()).ldelim();if(ut.quantizationAnnotation!=null&&ut.quantizationAnnotation.length)for(gt=0;gt<ut.quantizationAnnotation.length;++gt)ht.onnx.TensorAnnotation.encode(ut.quantizationAnnotation[gt],ft.uint32(114).fork()).ldelim();return ft},ct.encodeDelimited=function(ut,ft){return this.encode(ut,ft).ldelim()},ct.decode=function(ut,ft){ut instanceof ot||(ut=ot.create(ut));for(var gt=ft===void 0?ut.len:ut.pos+ft,mt=new ht.onnx.GraphProto;ut.pos<gt;){var vt=ut.uint32();switch(vt>>>3){case 1:mt.node&&mt.node.length||(mt.node=[]),mt.node.push(ht.onnx.NodeProto.decode(ut,ut.uint32()));break;case 2:mt.name=ut.string();break;case 5:mt.initializer&&mt.initializer.length||(mt.initializer=[]),mt.initializer.push(ht.onnx.TensorProto.decode(ut,ut.uint32()));break;case 10:mt.docString=ut.string();break;case 11:mt.input&&mt.input.length||(mt.input=[]),mt.input.push(ht.onnx.ValueInfoProto.decode(ut,ut.uint32()));break;case 12:mt.output&&mt.output.length||(mt.output=[]),mt.output.push(ht.onnx.ValueInfoProto.decode(ut,ut.uint32()));break;case 13:mt.valueInfo&&mt.valueInfo.length||(mt.valueInfo=[]),mt.valueInfo.push(ht.onnx.ValueInfoProto.decode(ut,ut.uint32()));break;case 14:mt.quantizationAnnotation&&mt.quantizationAnnotation.length||(mt.quantizationAnnotation=[]),mt.quantizationAnnotation.push(ht.onnx.TensorAnnotation.decode(ut,ut.uint32()));break;default:ut.skipType(7&vt)}}return mt},ct.decodeDelimited=function(ut){return ut instanceof ot||(ut=new ot(ut)),this.decode(ut,ut.uint32())},ct.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";if(ut.node!=null&&ut.hasOwnProperty("node")){if(!Array.isArray(ut.node))return"node: array expected";for(var ft=0;ft<ut.node.length;++ft)if(gt=ht.onnx.NodeProto.verify(ut.node[ft]))return"node."+gt}if(ut.name!=null&&ut.hasOwnProperty("name")&&!dt.isString(ut.name))return"name: string expected";if(ut.initializer!=null&&ut.hasOwnProperty("initializer")){if(!Array.isArray(ut.initializer))return"initializer: array expected";for(ft=0;ft<ut.initializer.length;++ft)if(gt=ht.onnx.TensorProto.verify(ut.initializer[ft]))return"initializer."+gt}if(ut.docString!=null&&ut.hasOwnProperty("docString")&&!dt.isString(ut.docString))return"docString: string expected";if(ut.input!=null&&ut.hasOwnProperty("input")){if(!Array.isArray(ut.input))return"input: array expected";for(ft=0;ft<ut.input.length;++ft)if(gt=ht.onnx.ValueInfoProto.verify(ut.input[ft]))return"input."+gt}if(ut.output!=null&&ut.hasOwnProperty("output")){if(!Array.isArray(ut.output))return"output: array expected";for(ft=0;ft<ut.output.length;++ft)if(gt=ht.onnx.ValueInfoProto.verify(ut.output[ft]))return"output."+gt}if(ut.valueInfo!=null&&ut.hasOwnProperty("valueInfo")){if(!Array.isArray(ut.valueInfo))return"valueInfo: array expected";for(ft=0;ft<ut.valueInfo.length;++ft)if(gt=ht.onnx.ValueInfoProto.verify(ut.valueInfo[ft]))return"valueInfo."+gt}if(ut.quantizationAnnotation!=null&&ut.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(ut.quantizationAnnotation))return"quantizationAnnotation: array expected";for(ft=0;ft<ut.quantizationAnnotation.length;++ft){var gt;if(gt=ht.onnx.TensorAnnotation.verify(ut.quantizationAnnotation[ft]))return"quantizationAnnotation."+gt}}return null},ct.fromObject=function(ut){if(ut instanceof ht.onnx.GraphProto)return ut;var ft=new ht.onnx.GraphProto;if(ut.node){if(!Array.isArray(ut.node))throw TypeError(".onnx.GraphProto.node: array expected");ft.node=[];for(var gt=0;gt<ut.node.length;++gt){if(typeof ut.node[gt]!="object")throw TypeError(".onnx.GraphProto.node: object expected");ft.node[gt]=ht.onnx.NodeProto.fromObject(ut.node[gt])}}if(ut.name!=null&&(ft.name=String(ut.name)),ut.initializer){if(!Array.isArray(ut.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(ft.initializer=[],gt=0;gt<ut.initializer.length;++gt){if(typeof ut.initializer[gt]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");ft.initializer[gt]=ht.onnx.TensorProto.fromObject(ut.initializer[gt])}}if(ut.docString!=null&&(ft.docString=String(ut.docString)),ut.input){if(!Array.isArray(ut.input))throw TypeError(".onnx.GraphProto.input: array expected");for(ft.input=[],gt=0;gt<ut.input.length;++gt){if(typeof ut.input[gt]!="object")throw TypeError(".onnx.GraphProto.input: object expected");ft.input[gt]=ht.onnx.ValueInfoProto.fromObject(ut.input[gt])}}if(ut.output){if(!Array.isArray(ut.output))throw TypeError(".onnx.GraphProto.output: array expected");for(ft.output=[],gt=0;gt<ut.output.length;++gt){if(typeof ut.output[gt]!="object")throw TypeError(".onnx.GraphProto.output: object expected");ft.output[gt]=ht.onnx.ValueInfoProto.fromObject(ut.output[gt])}}if(ut.valueInfo){if(!Array.isArray(ut.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(ft.valueInfo=[],gt=0;gt<ut.valueInfo.length;++gt){if(typeof ut.valueInfo[gt]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");ft.valueInfo[gt]=ht.onnx.ValueInfoProto.fromObject(ut.valueInfo[gt])}}if(ut.quantizationAnnotation){if(!Array.isArray(ut.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(ft.quantizationAnnotation=[],gt=0;gt<ut.quantizationAnnotation.length;++gt){if(typeof ut.quantizationAnnotation[gt]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");ft.quantizationAnnotation[gt]=ht.onnx.TensorAnnotation.fromObject(ut.quantizationAnnotation[gt])}}return ft},ct.toObject=function(ut,ft){ft||(ft={});var gt={};if((ft.arrays||ft.defaults)&&(gt.node=[],gt.initializer=[],gt.input=[],gt.output=[],gt.valueInfo=[],gt.quantizationAnnotation=[]),ft.defaults&&(gt.name="",gt.docString=""),ut.node&&ut.node.length){gt.node=[];for(var mt=0;mt<ut.node.length;++mt)gt.node[mt]=ht.onnx.NodeProto.toObject(ut.node[mt],ft)}if(ut.name!=null&&ut.hasOwnProperty("name")&&(gt.name=ut.name),ut.initializer&&ut.initializer.length)for(gt.initializer=[],mt=0;mt<ut.initializer.length;++mt)gt.initializer[mt]=ht.onnx.TensorProto.toObject(ut.initializer[mt],ft);if(ut.docString!=null&&ut.hasOwnProperty("docString")&&(gt.docString=ut.docString),ut.input&&ut.input.length)for(gt.input=[],mt=0;mt<ut.input.length;++mt)gt.input[mt]=ht.onnx.ValueInfoProto.toObject(ut.input[mt],ft);if(ut.output&&ut.output.length)for(gt.output=[],mt=0;mt<ut.output.length;++mt)gt.output[mt]=ht.onnx.ValueInfoProto.toObject(ut.output[mt],ft);if(ut.valueInfo&&ut.valueInfo.length)for(gt.valueInfo=[],mt=0;mt<ut.valueInfo.length;++mt)gt.valueInfo[mt]=ht.onnx.ValueInfoProto.toObject(ut.valueInfo[mt],ft);if(ut.quantizationAnnotation&&ut.quantizationAnnotation.length)for(gt.quantizationAnnotation=[],mt=0;mt<ut.quantizationAnnotation.length;++mt)gt.quantizationAnnotation[mt]=ht.onnx.TensorAnnotation.toObject(ut.quantizationAnnotation[mt],ft);return gt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct}(),it.TensorProto=function(){function ct(ut){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],ut)for(var ft=Object.keys(ut),gt=0;gt<ft.length;++gt)ut[ft[gt]]!=null&&(this[ft[gt]]=ut[ft[gt]])}return ct.prototype.dims=dt.emptyArray,ct.prototype.dataType=0,ct.prototype.segment=null,ct.prototype.floatData=dt.emptyArray,ct.prototype.int32Data=dt.emptyArray,ct.prototype.stringData=dt.emptyArray,ct.prototype.int64Data=dt.emptyArray,ct.prototype.name="",ct.prototype.docString="",ct.prototype.rawData=dt.newBuffer([]),ct.prototype.externalData=dt.emptyArray,ct.prototype.dataLocation=0,ct.prototype.doubleData=dt.emptyArray,ct.prototype.uint64Data=dt.emptyArray,ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ft){if(ft||(ft=st.create()),ut.dims!=null&&ut.dims.length){ft.uint32(10).fork();for(var gt=0;gt<ut.dims.length;++gt)ft.int64(ut.dims[gt]);ft.ldelim()}if(ut.dataType!=null&&ut.hasOwnProperty("dataType")&&ft.uint32(16).int32(ut.dataType),ut.segment!=null&&ut.hasOwnProperty("segment")&&ht.onnx.TensorProto.Segment.encode(ut.segment,ft.uint32(26).fork()).ldelim(),ut.floatData!=null&&ut.floatData.length){for(ft.uint32(34).fork(),gt=0;gt<ut.floatData.length;++gt)ft.float(ut.floatData[gt]);ft.ldelim()}if(ut.int32Data!=null&&ut.int32Data.length){for(ft.uint32(42).fork(),gt=0;gt<ut.int32Data.length;++gt)ft.int32(ut.int32Data[gt]);ft.ldelim()}if(ut.stringData!=null&&ut.stringData.length)for(gt=0;gt<ut.stringData.length;++gt)ft.uint32(50).bytes(ut.stringData[gt]);if(ut.int64Data!=null&&ut.int64Data.length){for(ft.uint32(58).fork(),gt=0;gt<ut.int64Data.length;++gt)ft.int64(ut.int64Data[gt]);ft.ldelim()}if(ut.name!=null&&ut.hasOwnProperty("name")&&ft.uint32(66).string(ut.name),ut.rawData!=null&&ut.hasOwnProperty("rawData")&&ft.uint32(74).bytes(ut.rawData),ut.doubleData!=null&&ut.doubleData.length){for(ft.uint32(82).fork(),gt=0;gt<ut.doubleData.length;++gt)ft.double(ut.doubleData[gt]);ft.ldelim()}if(ut.uint64Data!=null&&ut.uint64Data.length){for(ft.uint32(90).fork(),gt=0;gt<ut.uint64Data.length;++gt)ft.uint64(ut.uint64Data[gt]);ft.ldelim()}if(ut.docString!=null&&ut.hasOwnProperty("docString")&&ft.uint32(98).string(ut.docString),ut.externalData!=null&&ut.externalData.length)for(gt=0;gt<ut.externalData.length;++gt)ht.onnx.StringStringEntryProto.encode(ut.externalData[gt],ft.uint32(106).fork()).ldelim();return ut.dataLocation!=null&&ut.hasOwnProperty("dataLocation")&&ft.uint32(112).int32(ut.dataLocation),ft},ct.encodeDelimited=function(ut,ft){return this.encode(ut,ft).ldelim()},ct.decode=function(ut,ft){ut instanceof ot||(ut=ot.create(ut));for(var gt=ft===void 0?ut.len:ut.pos+ft,mt=new ht.onnx.TensorProto;ut.pos<gt;){var vt=ut.uint32();switch(vt>>>3){case 1:if(mt.dims&&mt.dims.length||(mt.dims=[]),(7&vt)==2)for(var yt=ut.uint32()+ut.pos;ut.pos<yt;)mt.dims.push(ut.int64());else mt.dims.push(ut.int64());break;case 2:mt.dataType=ut.int32();break;case 3:mt.segment=ht.onnx.TensorProto.Segment.decode(ut,ut.uint32());break;case 4:if(mt.floatData&&mt.floatData.length||(mt.floatData=[]),(7&vt)==2)for(yt=ut.uint32()+ut.pos;ut.pos<yt;)mt.floatData.push(ut.float());else mt.floatData.push(ut.float());break;case 5:if(mt.int32Data&&mt.int32Data.length||(mt.int32Data=[]),(7&vt)==2)for(yt=ut.uint32()+ut.pos;ut.pos<yt;)mt.int32Data.push(ut.int32());else mt.int32Data.push(ut.int32());break;case 6:mt.stringData&&mt.stringData.length||(mt.stringData=[]),mt.stringData.push(ut.bytes());break;case 7:if(mt.int64Data&&mt.int64Data.length||(mt.int64Data=[]),(7&vt)==2)for(yt=ut.uint32()+ut.pos;ut.pos<yt;)mt.int64Data.push(ut.int64());else mt.int64Data.push(ut.int64());break;case 8:mt.name=ut.string();break;case 12:mt.docString=ut.string();break;case 9:mt.rawData=ut.bytes();break;case 13:mt.externalData&&mt.externalData.length||(mt.externalData=[]),mt.externalData.push(ht.onnx.StringStringEntryProto.decode(ut,ut.uint32()));break;case 14:mt.dataLocation=ut.int32();break;case 10:if(mt.doubleData&&mt.doubleData.length||(mt.doubleData=[]),(7&vt)==2)for(yt=ut.uint32()+ut.pos;ut.pos<yt;)mt.doubleData.push(ut.double());else mt.doubleData.push(ut.double());break;case 11:if(mt.uint64Data&&mt.uint64Data.length||(mt.uint64Data=[]),(7&vt)==2)for(yt=ut.uint32()+ut.pos;ut.pos<yt;)mt.uint64Data.push(ut.uint64());else mt.uint64Data.push(ut.uint64());break;default:ut.skipType(7&vt)}}return mt},ct.decodeDelimited=function(ut){return ut instanceof ot||(ut=new ot(ut)),this.decode(ut,ut.uint32())},ct.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";if(ut.dims!=null&&ut.hasOwnProperty("dims")){if(!Array.isArray(ut.dims))return"dims: array expected";for(var ft=0;ft<ut.dims.length;++ft)if(!(dt.isInteger(ut.dims[ft])||ut.dims[ft]&&dt.isInteger(ut.dims[ft].low)&&dt.isInteger(ut.dims[ft].high)))return"dims: integer|Long[] expected"}if(ut.dataType!=null&&ut.hasOwnProperty("dataType")&&!dt.isInteger(ut.dataType))return"dataType: integer expected";if(ut.segment!=null&&ut.hasOwnProperty("segment")&&(gt=ht.onnx.TensorProto.Segment.verify(ut.segment)))return"segment."+gt;if(ut.floatData!=null&&ut.hasOwnProperty("floatData")){if(!Array.isArray(ut.floatData))return"floatData: array expected";for(ft=0;ft<ut.floatData.length;++ft)if(typeof ut.floatData[ft]!="number")return"floatData: number[] expected"}if(ut.int32Data!=null&&ut.hasOwnProperty("int32Data")){if(!Array.isArray(ut.int32Data))return"int32Data: array expected";for(ft=0;ft<ut.int32Data.length;++ft)if(!dt.isInteger(ut.int32Data[ft]))return"int32Data: integer[] expected"}if(ut.stringData!=null&&ut.hasOwnProperty("stringData")){if(!Array.isArray(ut.stringData))return"stringData: array expected";for(ft=0;ft<ut.stringData.length;++ft)if(!(ut.stringData[ft]&&typeof ut.stringData[ft].length=="number"||dt.isString(ut.stringData[ft])))return"stringData: buffer[] expected"}if(ut.int64Data!=null&&ut.hasOwnProperty("int64Data")){if(!Array.isArray(ut.int64Data))return"int64Data: array expected";for(ft=0;ft<ut.int64Data.length;++ft)if(!(dt.isInteger(ut.int64Data[ft])||ut.int64Data[ft]&&dt.isInteger(ut.int64Data[ft].low)&&dt.isInteger(ut.int64Data[ft].high)))return"int64Data: integer|Long[] expected"}if(ut.name!=null&&ut.hasOwnProperty("name")&&!dt.isString(ut.name))return"name: string expected";if(ut.docString!=null&&ut.hasOwnProperty("docString")&&!dt.isString(ut.docString))return"docString: string expected";if(ut.rawData!=null&&ut.hasOwnProperty("rawData")&&!(ut.rawData&&typeof ut.rawData.length=="number"||dt.isString(ut.rawData)))return"rawData: buffer expected";if(ut.externalData!=null&&ut.hasOwnProperty("externalData")){if(!Array.isArray(ut.externalData))return"externalData: array expected";for(ft=0;ft<ut.externalData.length;++ft){var gt;if(gt=ht.onnx.StringStringEntryProto.verify(ut.externalData[ft]))return"externalData."+gt}}if(ut.dataLocation!=null&&ut.hasOwnProperty("dataLocation"))switch(ut.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(ut.doubleData!=null&&ut.hasOwnProperty("doubleData")){if(!Array.isArray(ut.doubleData))return"doubleData: array expected";for(ft=0;ft<ut.doubleData.length;++ft)if(typeof ut.doubleData[ft]!="number")return"doubleData: number[] expected"}if(ut.uint64Data!=null&&ut.hasOwnProperty("uint64Data")){if(!Array.isArray(ut.uint64Data))return"uint64Data: array expected";for(ft=0;ft<ut.uint64Data.length;++ft)if(!(dt.isInteger(ut.uint64Data[ft])||ut.uint64Data[ft]&&dt.isInteger(ut.uint64Data[ft].low)&&dt.isInteger(ut.uint64Data[ft].high)))return"uint64Data: integer|Long[] expected"}return null},ct.fromObject=function(ut){if(ut instanceof ht.onnx.TensorProto)return ut;var ft=new ht.onnx.TensorProto;if(ut.dims){if(!Array.isArray(ut.dims))throw TypeError(".onnx.TensorProto.dims: array expected");ft.dims=[];for(var gt=0;gt<ut.dims.length;++gt)dt.Long?(ft.dims[gt]=dt.Long.fromValue(ut.dims[gt])).unsigned=!1:typeof ut.dims[gt]=="string"?ft.dims[gt]=parseInt(ut.dims[gt],10):typeof ut.dims[gt]=="number"?ft.dims[gt]=ut.dims[gt]:typeof ut.dims[gt]=="object"&&(ft.dims[gt]=new dt.LongBits(ut.dims[gt].low>>>0,ut.dims[gt].high>>>0).toNumber())}if(ut.dataType!=null&&(ft.dataType=0|ut.dataType),ut.segment!=null){if(typeof ut.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");ft.segment=ht.onnx.TensorProto.Segment.fromObject(ut.segment)}if(ut.floatData){if(!Array.isArray(ut.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(ft.floatData=[],gt=0;gt<ut.floatData.length;++gt)ft.floatData[gt]=Number(ut.floatData[gt])}if(ut.int32Data){if(!Array.isArray(ut.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(ft.int32Data=[],gt=0;gt<ut.int32Data.length;++gt)ft.int32Data[gt]=0|ut.int32Data[gt]}if(ut.stringData){if(!Array.isArray(ut.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(ft.stringData=[],gt=0;gt<ut.stringData.length;++gt)typeof ut.stringData[gt]=="string"?dt.base64.decode(ut.stringData[gt],ft.stringData[gt]=dt.newBuffer(dt.base64.length(ut.stringData[gt])),0):ut.stringData[gt].length&&(ft.stringData[gt]=ut.stringData[gt])}if(ut.int64Data){if(!Array.isArray(ut.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(ft.int64Data=[],gt=0;gt<ut.int64Data.length;++gt)dt.Long?(ft.int64Data[gt]=dt.Long.fromValue(ut.int64Data[gt])).unsigned=!1:typeof ut.int64Data[gt]=="string"?ft.int64Data[gt]=parseInt(ut.int64Data[gt],10):typeof ut.int64Data[gt]=="number"?ft.int64Data[gt]=ut.int64Data[gt]:typeof ut.int64Data[gt]=="object"&&(ft.int64Data[gt]=new dt.LongBits(ut.int64Data[gt].low>>>0,ut.int64Data[gt].high>>>0).toNumber())}if(ut.name!=null&&(ft.name=String(ut.name)),ut.docString!=null&&(ft.docString=String(ut.docString)),ut.rawData!=null&&(typeof ut.rawData=="string"?dt.base64.decode(ut.rawData,ft.rawData=dt.newBuffer(dt.base64.length(ut.rawData)),0):ut.rawData.length&&(ft.rawData=ut.rawData)),ut.externalData){if(!Array.isArray(ut.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(ft.externalData=[],gt=0;gt<ut.externalData.length;++gt){if(typeof ut.externalData[gt]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");ft.externalData[gt]=ht.onnx.StringStringEntryProto.fromObject(ut.externalData[gt])}}switch(ut.dataLocation){case"DEFAULT":case 0:ft.dataLocation=0;break;case"EXTERNAL":case 1:ft.dataLocation=1}if(ut.doubleData){if(!Array.isArray(ut.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(ft.doubleData=[],gt=0;gt<ut.doubleData.length;++gt)ft.doubleData[gt]=Number(ut.doubleData[gt])}if(ut.uint64Data){if(!Array.isArray(ut.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(ft.uint64Data=[],gt=0;gt<ut.uint64Data.length;++gt)dt.Long?(ft.uint64Data[gt]=dt.Long.fromValue(ut.uint64Data[gt])).unsigned=!0:typeof ut.uint64Data[gt]=="string"?ft.uint64Data[gt]=parseInt(ut.uint64Data[gt],10):typeof ut.uint64Data[gt]=="number"?ft.uint64Data[gt]=ut.uint64Data[gt]:typeof ut.uint64Data[gt]=="object"&&(ft.uint64Data[gt]=new dt.LongBits(ut.uint64Data[gt].low>>>0,ut.uint64Data[gt].high>>>0).toNumber(!0))}return ft},ct.toObject=function(ut,ft){ft||(ft={});var gt={};if((ft.arrays||ft.defaults)&&(gt.dims=[],gt.floatData=[],gt.int32Data=[],gt.stringData=[],gt.int64Data=[],gt.doubleData=[],gt.uint64Data=[],gt.externalData=[]),ft.defaults&&(gt.dataType=0,gt.segment=null,gt.name="",ft.bytes===String?gt.rawData="":(gt.rawData=[],ft.bytes!==Array&&(gt.rawData=dt.newBuffer(gt.rawData))),gt.docString="",gt.dataLocation=ft.enums===String?"DEFAULT":0),ut.dims&&ut.dims.length){gt.dims=[];for(var mt=0;mt<ut.dims.length;++mt)typeof ut.dims[mt]=="number"?gt.dims[mt]=ft.longs===String?String(ut.dims[mt]):ut.dims[mt]:gt.dims[mt]=ft.longs===String?dt.Long.prototype.toString.call(ut.dims[mt]):ft.longs===Number?new dt.LongBits(ut.dims[mt].low>>>0,ut.dims[mt].high>>>0).toNumber():ut.dims[mt]}if(ut.dataType!=null&&ut.hasOwnProperty("dataType")&&(gt.dataType=ut.dataType),ut.segment!=null&&ut.hasOwnProperty("segment")&&(gt.segment=ht.onnx.TensorProto.Segment.toObject(ut.segment,ft)),ut.floatData&&ut.floatData.length)for(gt.floatData=[],mt=0;mt<ut.floatData.length;++mt)gt.floatData[mt]=ft.json&&!isFinite(ut.floatData[mt])?String(ut.floatData[mt]):ut.floatData[mt];if(ut.int32Data&&ut.int32Data.length)for(gt.int32Data=[],mt=0;mt<ut.int32Data.length;++mt)gt.int32Data[mt]=ut.int32Data[mt];if(ut.stringData&&ut.stringData.length)for(gt.stringData=[],mt=0;mt<ut.stringData.length;++mt)gt.stringData[mt]=ft.bytes===String?dt.base64.encode(ut.stringData[mt],0,ut.stringData[mt].length):ft.bytes===Array?Array.prototype.slice.call(ut.stringData[mt]):ut.stringData[mt];if(ut.int64Data&&ut.int64Data.length)for(gt.int64Data=[],mt=0;mt<ut.int64Data.length;++mt)typeof ut.int64Data[mt]=="number"?gt.int64Data[mt]=ft.longs===String?String(ut.int64Data[mt]):ut.int64Data[mt]:gt.int64Data[mt]=ft.longs===String?dt.Long.prototype.toString.call(ut.int64Data[mt]):ft.longs===Number?new dt.LongBits(ut.int64Data[mt].low>>>0,ut.int64Data[mt].high>>>0).toNumber():ut.int64Data[mt];if(ut.name!=null&&ut.hasOwnProperty("name")&&(gt.name=ut.name),ut.rawData!=null&&ut.hasOwnProperty("rawData")&&(gt.rawData=ft.bytes===String?dt.base64.encode(ut.rawData,0,ut.rawData.length):ft.bytes===Array?Array.prototype.slice.call(ut.rawData):ut.rawData),ut.doubleData&&ut.doubleData.length)for(gt.doubleData=[],mt=0;mt<ut.doubleData.length;++mt)gt.doubleData[mt]=ft.json&&!isFinite(ut.doubleData[mt])?String(ut.doubleData[mt]):ut.doubleData[mt];if(ut.uint64Data&&ut.uint64Data.length)for(gt.uint64Data=[],mt=0;mt<ut.uint64Data.length;++mt)typeof ut.uint64Data[mt]=="number"?gt.uint64Data[mt]=ft.longs===String?String(ut.uint64Data[mt]):ut.uint64Data[mt]:gt.uint64Data[mt]=ft.longs===String?dt.Long.prototype.toString.call(ut.uint64Data[mt]):ft.longs===Number?new dt.LongBits(ut.uint64Data[mt].low>>>0,ut.uint64Data[mt].high>>>0).toNumber(!0):ut.uint64Data[mt];if(ut.docString!=null&&ut.hasOwnProperty("docString")&&(gt.docString=ut.docString),ut.externalData&&ut.externalData.length)for(gt.externalData=[],mt=0;mt<ut.externalData.length;++mt)gt.externalData[mt]=ht.onnx.StringStringEntryProto.toObject(ut.externalData[mt],ft);return ut.dataLocation!=null&&ut.hasOwnProperty("dataLocation")&&(gt.dataLocation=ft.enums===String?ht.onnx.TensorProto.DataLocation[ut.dataLocation]:ut.dataLocation),gt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct.DataType=function(){var ut={},ft=Object.create(ut);return ft[ut[0]="UNDEFINED"]=0,ft[ut[1]="FLOAT"]=1,ft[ut[2]="UINT8"]=2,ft[ut[3]="INT8"]=3,ft[ut[4]="UINT16"]=4,ft[ut[5]="INT16"]=5,ft[ut[6]="INT32"]=6,ft[ut[7]="INT64"]=7,ft[ut[8]="STRING"]=8,ft[ut[9]="BOOL"]=9,ft[ut[10]="FLOAT16"]=10,ft[ut[11]="DOUBLE"]=11,ft[ut[12]="UINT32"]=12,ft[ut[13]="UINT64"]=13,ft[ut[14]="COMPLEX64"]=14,ft[ut[15]="COMPLEX128"]=15,ft[ut[16]="BFLOAT16"]=16,ft}(),ct.Segment=function(){function ut(ft){if(ft)for(var gt=Object.keys(ft),mt=0;mt<gt.length;++mt)ft[gt[mt]]!=null&&(this[gt[mt]]=ft[gt[mt]])}return ut.prototype.begin=dt.Long?dt.Long.fromBits(0,0,!1):0,ut.prototype.end=dt.Long?dt.Long.fromBits(0,0,!1):0,ut.create=function(ft){return new ut(ft)},ut.encode=function(ft,gt){return gt||(gt=st.create()),ft.begin!=null&&ft.hasOwnProperty("begin")&&gt.uint32(8).int64(ft.begin),ft.end!=null&&ft.hasOwnProperty("end")&&gt.uint32(16).int64(ft.end),gt},ut.encodeDelimited=function(ft,gt){return this.encode(ft,gt).ldelim()},ut.decode=function(ft,gt){ft instanceof ot||(ft=ot.create(ft));for(var mt=gt===void 0?ft.len:ft.pos+gt,vt=new ht.onnx.TensorProto.Segment;ft.pos<mt;){var yt=ft.uint32();switch(yt>>>3){case 1:vt.begin=ft.int64();break;case 2:vt.end=ft.int64();break;default:ft.skipType(7&yt)}}return vt},ut.decodeDelimited=function(ft){return ft instanceof ot||(ft=new ot(ft)),this.decode(ft,ft.uint32())},ut.verify=function(ft){return typeof ft!="object"||ft===null?"object expected":ft.begin!=null&&ft.hasOwnProperty("begin")&&!(dt.isInteger(ft.begin)||ft.begin&&dt.isInteger(ft.begin.low)&&dt.isInteger(ft.begin.high))?"begin: integer|Long expected":ft.end!=null&&ft.hasOwnProperty("end")&&!(dt.isInteger(ft.end)||ft.end&&dt.isInteger(ft.end.low)&&dt.isInteger(ft.end.high))?"end: integer|Long expected":null},ut.fromObject=function(ft){if(ft instanceof ht.onnx.TensorProto.Segment)return ft;var gt=new ht.onnx.TensorProto.Segment;return ft.begin!=null&&(dt.Long?(gt.begin=dt.Long.fromValue(ft.begin)).unsigned=!1:typeof ft.begin=="string"?gt.begin=parseInt(ft.begin,10):typeof ft.begin=="number"?gt.begin=ft.begin:typeof ft.begin=="object"&&(gt.begin=new dt.LongBits(ft.begin.low>>>0,ft.begin.high>>>0).toNumber())),ft.end!=null&&(dt.Long?(gt.end=dt.Long.fromValue(ft.end)).unsigned=!1:typeof ft.end=="string"?gt.end=parseInt(ft.end,10):typeof ft.end=="number"?gt.end=ft.end:typeof ft.end=="object"&&(gt.end=new dt.LongBits(ft.end.low>>>0,ft.end.high>>>0).toNumber())),gt},ut.toObject=function(ft,gt){gt||(gt={});var mt={};if(gt.defaults){if(dt.Long){var vt=new dt.Long(0,0,!1);mt.begin=gt.longs===String?vt.toString():gt.longs===Number?vt.toNumber():vt}else mt.begin=gt.longs===String?"0":0;dt.Long?(vt=new dt.Long(0,0,!1),mt.end=gt.longs===String?vt.toString():gt.longs===Number?vt.toNumber():vt):mt.end=gt.longs===String?"0":0}return ft.begin!=null&&ft.hasOwnProperty("begin")&&(typeof ft.begin=="number"?mt.begin=gt.longs===String?String(ft.begin):ft.begin:mt.begin=gt.longs===String?dt.Long.prototype.toString.call(ft.begin):gt.longs===Number?new dt.LongBits(ft.begin.low>>>0,ft.begin.high>>>0).toNumber():ft.begin),ft.end!=null&&ft.hasOwnProperty("end")&&(typeof ft.end=="number"?mt.end=gt.longs===String?String(ft.end):ft.end:mt.end=gt.longs===String?dt.Long.prototype.toString.call(ft.end):gt.longs===Number?new dt.LongBits(ft.end.low>>>0,ft.end.high>>>0).toNumber():ft.end),mt},ut.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ut}(),ct.DataLocation=function(){var ut={},ft=Object.create(ut);return ft[ut[0]="DEFAULT"]=0,ft[ut[1]="EXTERNAL"]=1,ft}(),ct}(),it.TensorShapeProto=function(){function ct(ut){if(this.dim=[],ut)for(var ft=Object.keys(ut),gt=0;gt<ft.length;++gt)ut[ft[gt]]!=null&&(this[ft[gt]]=ut[ft[gt]])}return ct.prototype.dim=dt.emptyArray,ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ft){if(ft||(ft=st.create()),ut.dim!=null&&ut.dim.length)for(var gt=0;gt<ut.dim.length;++gt)ht.onnx.TensorShapeProto.Dimension.encode(ut.dim[gt],ft.uint32(10).fork()).ldelim();return ft},ct.encodeDelimited=function(ut,ft){return this.encode(ut,ft).ldelim()},ct.decode=function(ut,ft){ut instanceof ot||(ut=ot.create(ut));for(var gt=ft===void 0?ut.len:ut.pos+ft,mt=new ht.onnx.TensorShapeProto;ut.pos<gt;){var vt=ut.uint32();vt>>>3==1?(mt.dim&&mt.dim.length||(mt.dim=[]),mt.dim.push(ht.onnx.TensorShapeProto.Dimension.decode(ut,ut.uint32()))):ut.skipType(7&vt)}return mt},ct.decodeDelimited=function(ut){return ut instanceof ot||(ut=new ot(ut)),this.decode(ut,ut.uint32())},ct.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";if(ut.dim!=null&&ut.hasOwnProperty("dim")){if(!Array.isArray(ut.dim))return"dim: array expected";for(var ft=0;ft<ut.dim.length;++ft){var gt=ht.onnx.TensorShapeProto.Dimension.verify(ut.dim[ft]);if(gt)return"dim."+gt}}return null},ct.fromObject=function(ut){if(ut instanceof ht.onnx.TensorShapeProto)return ut;var ft=new ht.onnx.TensorShapeProto;if(ut.dim){if(!Array.isArray(ut.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");ft.dim=[];for(var gt=0;gt<ut.dim.length;++gt){if(typeof ut.dim[gt]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");ft.dim[gt]=ht.onnx.TensorShapeProto.Dimension.fromObject(ut.dim[gt])}}return ft},ct.toObject=function(ut,ft){ft||(ft={});var gt={};if((ft.arrays||ft.defaults)&&(gt.dim=[]),ut.dim&&ut.dim.length){gt.dim=[];for(var mt=0;mt<ut.dim.length;++mt)gt.dim[mt]=ht.onnx.TensorShapeProto.Dimension.toObject(ut.dim[mt],ft)}return gt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct.Dimension=function(){function ut(gt){if(gt)for(var mt=Object.keys(gt),vt=0;vt<mt.length;++vt)gt[mt[vt]]!=null&&(this[mt[vt]]=gt[mt[vt]])}var ft;return ut.prototype.dimValue=dt.Long?dt.Long.fromBits(0,0,!1):0,ut.prototype.dimParam="",ut.prototype.denotation="",Object.defineProperty(ut.prototype,"value",{get:dt.oneOfGetter(ft=["dimValue","dimParam"]),set:dt.oneOfSetter(ft)}),ut.create=function(gt){return new ut(gt)},ut.encode=function(gt,mt){return mt||(mt=st.create()),gt.dimValue!=null&&gt.hasOwnProperty("dimValue")&&mt.uint32(8).int64(gt.dimValue),gt.dimParam!=null&&gt.hasOwnProperty("dimParam")&&mt.uint32(18).string(gt.dimParam),gt.denotation!=null&&gt.hasOwnProperty("denotation")&&mt.uint32(26).string(gt.denotation),mt},ut.encodeDelimited=function(gt,mt){return this.encode(gt,mt).ldelim()},ut.decode=function(gt,mt){gt instanceof ot||(gt=ot.create(gt));for(var vt=mt===void 0?gt.len:gt.pos+mt,yt=new ht.onnx.TensorShapeProto.Dimension;gt.pos<vt;){var bt=gt.uint32();switch(bt>>>3){case 1:yt.dimValue=gt.int64();break;case 2:yt.dimParam=gt.string();break;case 3:yt.denotation=gt.string();break;default:gt.skipType(7&bt)}}return yt},ut.decodeDelimited=function(gt){return gt instanceof ot||(gt=new ot(gt)),this.decode(gt,gt.uint32())},ut.verify=function(gt){if(typeof gt!="object"||gt===null)return"object expected";var mt={};if(gt.dimValue!=null&&gt.hasOwnProperty("dimValue")&&(mt.value=1,!(dt.isInteger(gt.dimValue)||gt.dimValue&&dt.isInteger(gt.dimValue.low)&&dt.isInteger(gt.dimValue.high))))return"dimValue: integer|Long expected";if(gt.dimParam!=null&&gt.hasOwnProperty("dimParam")){if(mt.value===1)return"value: multiple values";if(mt.value=1,!dt.isString(gt.dimParam))return"dimParam: string expected"}return gt.denotation!=null&&gt.hasOwnProperty("denotation")&&!dt.isString(gt.denotation)?"denotation: string expected":null},ut.fromObject=function(gt){if(gt instanceof ht.onnx.TensorShapeProto.Dimension)return gt;var mt=new ht.onnx.TensorShapeProto.Dimension;return gt.dimValue!=null&&(dt.Long?(mt.dimValue=dt.Long.fromValue(gt.dimValue)).unsigned=!1:typeof gt.dimValue=="string"?mt.dimValue=parseInt(gt.dimValue,10):typeof gt.dimValue=="number"?mt.dimValue=gt.dimValue:typeof gt.dimValue=="object"&&(mt.dimValue=new dt.LongBits(gt.dimValue.low>>>0,gt.dimValue.high>>>0).toNumber())),gt.dimParam!=null&&(mt.dimParam=String(gt.dimParam)),gt.denotation!=null&&(mt.denotation=String(gt.denotation)),mt},ut.toObject=function(gt,mt){mt||(mt={});var vt={};return mt.defaults&&(vt.denotation=""),gt.dimValue!=null&&gt.hasOwnProperty("dimValue")&&(typeof gt.dimValue=="number"?vt.dimValue=mt.longs===String?String(gt.dimValue):gt.dimValue:vt.dimValue=mt.longs===String?dt.Long.prototype.toString.call(gt.dimValue):mt.longs===Number?new dt.LongBits(gt.dimValue.low>>>0,gt.dimValue.high>>>0).toNumber():gt.dimValue,mt.oneofs&&(vt.value="dimValue")),gt.dimParam!=null&&gt.hasOwnProperty("dimParam")&&(vt.dimParam=gt.dimParam,mt.oneofs&&(vt.value="dimParam")),gt.denotation!=null&&gt.hasOwnProperty("denotation")&&(vt.denotation=gt.denotation),vt},ut.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ut}(),ct}(),it.TypeProto=function(){function ct(ft){if(ft)for(var gt=Object.keys(ft),mt=0;mt<gt.length;++mt)ft[gt[mt]]!=null&&(this[gt[mt]]=ft[gt[mt]])}var ut;return ct.prototype.tensorType=null,ct.prototype.denotation="",Object.defineProperty(ct.prototype,"value",{get:dt.oneOfGetter(ut=["tensorType"]),set:dt.oneOfSetter(ut)}),ct.create=function(ft){return new ct(ft)},ct.encode=function(ft,gt){return gt||(gt=st.create()),ft.tensorType!=null&&ft.hasOwnProperty("tensorType")&&ht.onnx.TypeProto.Tensor.encode(ft.tensorType,gt.uint32(10).fork()).ldelim(),ft.denotation!=null&&ft.hasOwnProperty("denotation")&&gt.uint32(50).string(ft.denotation),gt},ct.encodeDelimited=function(ft,gt){return this.encode(ft,gt).ldelim()},ct.decode=function(ft,gt){ft instanceof ot||(ft=ot.create(ft));for(var mt=gt===void 0?ft.len:ft.pos+gt,vt=new ht.onnx.TypeProto;ft.pos<mt;){var yt=ft.uint32();switch(yt>>>3){case 1:vt.tensorType=ht.onnx.TypeProto.Tensor.decode(ft,ft.uint32());break;case 6:vt.denotation=ft.string();break;default:ft.skipType(7&yt)}}return vt},ct.decodeDelimited=function(ft){return ft instanceof ot||(ft=new ot(ft)),this.decode(ft,ft.uint32())},ct.verify=function(ft){if(typeof ft!="object"||ft===null)return"object expected";if(ft.tensorType!=null&&ft.hasOwnProperty("tensorType")){var gt=ht.onnx.TypeProto.Tensor.verify(ft.tensorType);if(gt)return"tensorType."+gt}return ft.denotation!=null&&ft.hasOwnProperty("denotation")&&!dt.isString(ft.denotation)?"denotation: string expected":null},ct.fromObject=function(ft){if(ft instanceof ht.onnx.TypeProto)return ft;var gt=new ht.onnx.TypeProto;if(ft.tensorType!=null){if(typeof ft.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");gt.tensorType=ht.onnx.TypeProto.Tensor.fromObject(ft.tensorType)}return ft.denotation!=null&&(gt.denotation=String(ft.denotation)),gt},ct.toObject=function(ft,gt){gt||(gt={});var mt={};return gt.defaults&&(mt.denotation=""),ft.tensorType!=null&&ft.hasOwnProperty("tensorType")&&(mt.tensorType=ht.onnx.TypeProto.Tensor.toObject(ft.tensorType,gt),gt.oneofs&&(mt.value="tensorType")),ft.denotation!=null&&ft.hasOwnProperty("denotation")&&(mt.denotation=ft.denotation),mt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct.Tensor=function(){function ft(gt){if(gt)for(var mt=Object.keys(gt),vt=0;vt<mt.length;++vt)gt[mt[vt]]!=null&&(this[mt[vt]]=gt[mt[vt]])}return ft.prototype.elemType=0,ft.prototype.shape=null,ft.create=function(gt){return new ft(gt)},ft.encode=function(gt,mt){return mt||(mt=st.create()),gt.elemType!=null&&gt.hasOwnProperty("elemType")&&mt.uint32(8).int32(gt.elemType),gt.shape!=null&&gt.hasOwnProperty("shape")&&ht.onnx.TensorShapeProto.encode(gt.shape,mt.uint32(18).fork()).ldelim(),mt},ft.encodeDelimited=function(gt,mt){return this.encode(gt,mt).ldelim()},ft.decode=function(gt,mt){gt instanceof ot||(gt=ot.create(gt));for(var vt=mt===void 0?gt.len:gt.pos+mt,yt=new ht.onnx.TypeProto.Tensor;gt.pos<vt;){var bt=gt.uint32();switch(bt>>>3){case 1:yt.elemType=gt.int32();break;case 2:yt.shape=ht.onnx.TensorShapeProto.decode(gt,gt.uint32());break;default:gt.skipType(7&bt)}}return yt},ft.decodeDelimited=function(gt){return gt instanceof ot||(gt=new ot(gt)),this.decode(gt,gt.uint32())},ft.verify=function(gt){if(typeof gt!="object"||gt===null)return"object expected";if(gt.elemType!=null&&gt.hasOwnProperty("elemType")&&!dt.isInteger(gt.elemType))return"elemType: integer expected";if(gt.shape!=null&&gt.hasOwnProperty("shape")){var mt=ht.onnx.TensorShapeProto.verify(gt.shape);if(mt)return"shape."+mt}return null},ft.fromObject=function(gt){if(gt instanceof ht.onnx.TypeProto.Tensor)return gt;var mt=new ht.onnx.TypeProto.Tensor;if(gt.elemType!=null&&(mt.elemType=0|gt.elemType),gt.shape!=null){if(typeof gt.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");mt.shape=ht.onnx.TensorShapeProto.fromObject(gt.shape)}return mt},ft.toObject=function(gt,mt){mt||(mt={});var vt={};return mt.defaults&&(vt.elemType=0,vt.shape=null),gt.elemType!=null&&gt.hasOwnProperty("elemType")&&(vt.elemType=gt.elemType),gt.shape!=null&&gt.hasOwnProperty("shape")&&(vt.shape=ht.onnx.TensorShapeProto.toObject(gt.shape,mt)),vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ft}(),ct}(),it.OperatorSetIdProto=function(){function ct(ut){if(ut)for(var ft=Object.keys(ut),gt=0;gt<ft.length;++gt)ut[ft[gt]]!=null&&(this[ft[gt]]=ut[ft[gt]])}return ct.prototype.domain="",ct.prototype.version=dt.Long?dt.Long.fromBits(0,0,!1):0,ct.create=function(ut){return new ct(ut)},ct.encode=function(ut,ft){return ft||(ft=st.create()),ut.domain!=null&&ut.hasOwnProperty("domain")&&ft.uint32(10).string(ut.domain),ut.version!=null&&ut.hasOwnProperty("version")&&ft.uint32(16).int64(ut.version),ft},ct.encodeDelimited=function(ut,ft){return this.encode(ut,ft).ldelim()},ct.decode=function(ut,ft){ut instanceof ot||(ut=ot.create(ut));for(var gt=ft===void 0?ut.len:ut.pos+ft,mt=new ht.onnx.OperatorSetIdProto;ut.pos<gt;){var vt=ut.uint32();switch(vt>>>3){case 1:mt.domain=ut.string();break;case 2:mt.version=ut.int64();break;default:ut.skipType(7&vt)}}return mt},ct.decodeDelimited=function(ut){return ut instanceof ot||(ut=new ot(ut)),this.decode(ut,ut.uint32())},ct.verify=function(ut){return typeof ut!="object"||ut===null?"object expected":ut.domain!=null&&ut.hasOwnProperty("domain")&&!dt.isString(ut.domain)?"domain: string expected":ut.version!=null&&ut.hasOwnProperty("version")&&!(dt.isInteger(ut.version)||ut.version&&dt.isInteger(ut.version.low)&&dt.isInteger(ut.version.high))?"version: integer|Long expected":null},ct.fromObject=function(ut){if(ut instanceof ht.onnx.OperatorSetIdProto)return ut;var ft=new ht.onnx.OperatorSetIdProto;return ut.domain!=null&&(ft.domain=String(ut.domain)),ut.version!=null&&(dt.Long?(ft.version=dt.Long.fromValue(ut.version)).unsigned=!1:typeof ut.version=="string"?ft.version=parseInt(ut.version,10):typeof ut.version=="number"?ft.version=ut.version:typeof ut.version=="object"&&(ft.version=new dt.LongBits(ut.version.low>>>0,ut.version.high>>>0).toNumber())),ft},ct.toObject=function(ut,ft){ft||(ft={});var gt={};if(ft.defaults)if(gt.domain="",dt.Long){var mt=new dt.Long(0,0,!1);gt.version=ft.longs===String?mt.toString():ft.longs===Number?mt.toNumber():mt}else gt.version=ft.longs===String?"0":0;return ut.domain!=null&&ut.hasOwnProperty("domain")&&(gt.domain=ut.domain),ut.version!=null&&ut.hasOwnProperty("version")&&(typeof ut.version=="number"?gt.version=ft.longs===String?String(ut.version):ut.version:gt.version=ft.longs===String?dt.Long.prototype.toString.call(ut.version):ft.longs===Number?new dt.LongBits(ut.version.low>>>0,ut.version.high>>>0).toNumber():ut.version),gt},ct.prototype.toJSON=function(){return this.constructor.toObject(this,at.util.toJSONOptions)},ct}(),it),_e.exports=ht},2100:(_e,_,et)=>{_e.exports=et(9482)},9482:(_e,_,et)=>{var tt=_;function nt(){tt.util._configure(),tt.Writer._configure(tt.BufferWriter),tt.Reader._configure(tt.BufferReader)}tt.build="minimal",tt.Writer=et(1173),tt.BufferWriter=et(3155),tt.Reader=et(1408),tt.BufferReader=et(593),tt.util=et(9693),tt.rpc=et(5994),tt.roots=et(5054),tt.configure=nt,nt()},1408:(_e,_,et)=>{_e.exports=st;var tt,nt=et(9693),it=nt.LongBits,at=nt.utf8;function ot(mt,vt){return RangeError("index out of range: "+mt.pos+" + "+(vt||1)+" > "+mt.len)}function st(mt){this.buf=mt,this.pos=0,this.len=mt.length}var dt,ht=typeof Uint8Array<"u"?function(mt){if(mt instanceof Uint8Array||Array.isArray(mt))return new st(mt);throw Error("illegal buffer")}:function(mt){if(Array.isArray(mt))return new st(mt);throw Error("illegal buffer")},ct=function(){return nt.Buffer?function(mt){return(st.create=function(vt){return nt.Buffer.isBuffer(vt)?new tt(vt):ht(vt)})(mt)}:ht};function ut(){var mt=new it(0,0),vt=0;if(!(this.len-this.pos>4)){for(;vt<3;++vt){if(this.pos>=this.len)throw ot(this);if(mt.lo=(mt.lo|(127&this.buf[this.pos])<<7*vt)>>>0,this.buf[this.pos++]<128)return mt}return mt.lo=(mt.lo|(127&this.buf[this.pos++])<<7*vt)>>>0,mt}for(;vt<4;++vt)if(mt.lo=(mt.lo|(127&this.buf[this.pos])<<7*vt)>>>0,this.buf[this.pos++]<128)return mt;if(mt.lo=(mt.lo|(127&this.buf[this.pos])<<28)>>>0,mt.hi=(mt.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return mt;if(vt=0,this.len-this.pos>4){for(;vt<5;++vt)if(mt.hi=(mt.hi|(127&this.buf[this.pos])<<7*vt+3)>>>0,this.buf[this.pos++]<128)return mt}else for(;vt<5;++vt){if(this.pos>=this.len)throw ot(this);if(mt.hi=(mt.hi|(127&this.buf[this.pos])<<7*vt+3)>>>0,this.buf[this.pos++]<128)return mt}throw Error("invalid varint encoding")}function ft(mt,vt){return(mt[vt-4]|mt[vt-3]<<8|mt[vt-2]<<16|mt[vt-1]<<24)>>>0}function gt(){if(this.pos+8>this.len)throw ot(this,8);return new it(ft(this.buf,this.pos+=4),ft(this.buf,this.pos+=4))}st.create=ct(),st.prototype._slice=nt.Array.prototype.subarray||nt.Array.prototype.slice,st.prototype.uint32=(dt=4294967295,function(){if(dt=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(dt=(dt|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(dt=(dt|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(dt=(dt|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(dt=(dt|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return dt;if((this.pos+=5)>this.len)throw this.pos=this.len,ot(this,10);return dt}),st.prototype.int32=function(){return 0|this.uint32()},st.prototype.sint32=function(){var mt=this.uint32();return mt>>>1^-(1&mt)|0},st.prototype.bool=function(){return this.uint32()!==0},st.prototype.fixed32=function(){if(this.pos+4>this.len)throw ot(this,4);return ft(this.buf,this.pos+=4)},st.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ot(this,4);return 0|ft(this.buf,this.pos+=4)},st.prototype.float=function(){if(this.pos+4>this.len)throw ot(this,4);var mt=nt.float.readFloatLE(this.buf,this.pos);return this.pos+=4,mt},st.prototype.double=function(){if(this.pos+8>this.len)throw ot(this,4);var mt=nt.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,mt},st.prototype.bytes=function(){var mt=this.uint32(),vt=this.pos,yt=this.pos+mt;if(yt>this.len)throw ot(this,mt);return this.pos+=mt,Array.isArray(this.buf)?this.buf.slice(vt,yt):vt===yt?new this.buf.constructor(0):this._slice.call(this.buf,vt,yt)},st.prototype.string=function(){var mt=this.bytes();return at.read(mt,0,mt.length)},st.prototype.skip=function(mt){if(typeof mt=="number"){if(this.pos+mt>this.len)throw ot(this,mt);this.pos+=mt}else do if(this.pos>=this.len)throw ot(this);while(128&this.buf[this.pos++]);return this},st.prototype.skipType=function(mt){switch(mt){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(mt=7&this.uint32())!=4;)this.skipType(mt);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+mt+" at offset "+this.pos)}return this},st._configure=function(mt){tt=mt,st.create=ct(),tt._configure();var vt=nt.Long?"toLong":"toNumber";nt.merge(st.prototype,{int64:function(){return ut.call(this)[vt](!1)},uint64:function(){return ut.call(this)[vt](!0)},sint64:function(){return ut.call(this).zzDecode()[vt](!1)},fixed64:function(){return gt.call(this)[vt](!0)},sfixed64:function(){return gt.call(this)[vt](!1)}})}},593:(_e,_,et)=>{_e.exports=it;var tt=et(1408);(it.prototype=Object.create(tt.prototype)).constructor=it;var nt=et(9693);function it(at){tt.call(this,at)}it._configure=function(){nt.Buffer&&(it.prototype._slice=nt.Buffer.prototype.slice)},it.prototype.string=function(){var at=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+at,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+at,this.len))},it._configure()},5054:_e=>{_e.exports={}},5994:(_e,_,et)=>{_.Service=et(7948)},7948:(_e,_,et)=>{_e.exports=nt;var tt=et(9693);function nt(it,at,ot){if(typeof it!="function")throw TypeError("rpcImpl must be a function");tt.EventEmitter.call(this),this.rpcImpl=it,this.requestDelimited=!!at,this.responseDelimited=!!ot}(nt.prototype=Object.create(tt.EventEmitter.prototype)).constructor=nt,nt.prototype.rpcCall=function it(at,ot,st,dt,ht){if(!dt)throw TypeError("request must be specified");var ct=this;if(!ht)return tt.asPromise(it,ct,at,ot,st,dt);if(ct.rpcImpl)try{return ct.rpcImpl(at,ot[ct.requestDelimited?"encodeDelimited":"encode"](dt).finish(),function(ut,ft){if(ut)return ct.emit("error",ut,at),ht(ut);if(ft!==null){if(!(ft instanceof st))try{ft=st[ct.responseDelimited?"decodeDelimited":"decode"](ft)}catch(gt){return ct.emit("error",gt,at),ht(gt)}return ct.emit("data",ft,at),ht(null,ft)}ct.end(!0)})}catch(ut){return ct.emit("error",ut,at),void setTimeout(function(){ht(ut)},0)}else setTimeout(function(){ht(Error("already ended"))},0)},nt.prototype.end=function(it){return this.rpcImpl&&(it||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(_e,_,et)=>{_e.exports=nt;var tt=et(9693);function nt(st,dt){this.lo=st>>>0,this.hi=dt>>>0}var it=nt.zero=new nt(0,0);it.toNumber=function(){return 0},it.zzEncode=it.zzDecode=function(){return this},it.length=function(){return 1};var at=nt.zeroHash="\0\0\0\0\0\0\0\0";nt.fromNumber=function(st){if(st===0)return it;var dt=st<0;dt&&(st=-st);var ht=st>>>0,ct=(st-ht)/4294967296>>>0;return dt&&(ct=~ct>>>0,ht=~ht>>>0,++ht>4294967295&&(ht=0,++ct>4294967295&&(ct=0))),new nt(ht,ct)},nt.from=function(st){if(typeof st=="number")return nt.fromNumber(st);if(tt.isString(st)){if(!tt.Long)return nt.fromNumber(parseInt(st,10));st=tt.Long.fromString(st)}return st.low||st.high?new nt(st.low>>>0,st.high>>>0):it},nt.prototype.toNumber=function(st){if(!st&&this.hi>>>31){var dt=1+~this.lo>>>0,ht=~this.hi>>>0;return dt||(ht=ht+1>>>0),-(dt+4294967296*ht)}return this.lo+4294967296*this.hi},nt.prototype.toLong=function(st){return tt.Long?new tt.Long(0|this.lo,0|this.hi,!!st):{low:0|this.lo,high:0|this.hi,unsigned:!!st}};var ot=String.prototype.charCodeAt;nt.fromHash=function(st){return st===at?it:new nt((ot.call(st,0)|ot.call(st,1)<<8|ot.call(st,2)<<16|ot.call(st,3)<<24)>>>0,(ot.call(st,4)|ot.call(st,5)<<8|ot.call(st,6)<<16|ot.call(st,7)<<24)>>>0)},nt.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},nt.prototype.zzEncode=function(){var st=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^st)>>>0,this.lo=(this.lo<<1^st)>>>0,this},nt.prototype.zzDecode=function(){var st=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^st)>>>0,this.hi=(this.hi>>>1^st)>>>0,this},nt.prototype.length=function(){var st=this.lo,dt=(this.lo>>>28|this.hi<<4)>>>0,ht=this.hi>>>24;return ht===0?dt===0?st<16384?st<128?1:2:st<2097152?3:4:dt<16384?dt<128?5:6:dt<2097152?7:8:ht<128?9:10}},9693:function(_e,_,et){var tt=_;function nt(at,ot,st){for(var dt=Object.keys(ot),ht=0;ht<dt.length;++ht)at[dt[ht]]!==void 0&&st||(at[dt[ht]]=ot[dt[ht]]);return at}function it(at){function ot(st,dt){if(!(this instanceof ot))return new ot(st,dt);Object.defineProperty(this,"message",{get:function(){return st}}),Error.captureStackTrace?Error.captureStackTrace(this,ot):Object.defineProperty(this,"stack",{value:new Error().stack||""}),dt&&nt(this,dt)}return(ot.prototype=Object.create(Error.prototype)).constructor=ot,Object.defineProperty(ot.prototype,"name",{get:function(){return at}}),ot.prototype.toString=function(){return this.name+": "+this.message},ot}tt.asPromise=et(4537),tt.base64=et(7419),tt.EventEmitter=et(9211),tt.float=et(945),tt.inquire=et(7199),tt.utf8=et(4997),tt.pool=et(6662),tt.LongBits=et(1945),tt.isNode=!!(et.g!==void 0&&et.g&&et.g.process&&et.g.process.versions&&et.g.process.versions.node),tt.global=tt.isNode&&et.g||typeof window<"u"&&window||typeof self<"u"&&self||this,tt.emptyArray=Object.freeze?Object.freeze([]):[],tt.emptyObject=Object.freeze?Object.freeze({}):{},tt.isInteger=Number.isInteger||function(at){return typeof at=="number"&&isFinite(at)&&Math.floor(at)===at},tt.isString=function(at){return typeof at=="string"||at instanceof String},tt.isObject=function(at){return at&&typeof at=="object"},tt.isset=tt.isSet=function(at,ot){var st=at[ot];return!(st==null||!at.hasOwnProperty(ot))&&(typeof st!="object"||(Array.isArray(st)?st.length:Object.keys(st).length)>0)},tt.Buffer=function(){try{var at=tt.inquire("buffer").Buffer;return at.prototype.utf8Write?at:null}catch{return null}}(),tt._Buffer_from=null,tt._Buffer_allocUnsafe=null,tt.newBuffer=function(at){return typeof at=="number"?tt.Buffer?tt._Buffer_allocUnsafe(at):new tt.Array(at):tt.Buffer?tt._Buffer_from(at):typeof Uint8Array>"u"?at:new Uint8Array(at)},tt.Array=typeof Uint8Array<"u"?Uint8Array:Array,tt.Long=tt.global.dcodeIO&&tt.global.dcodeIO.Long||tt.global.Long||tt.inquire("long"),tt.key2Re=/^true|false|0|1$/,tt.key32Re=/^-?(?:0|[1-9][0-9]*)$/,tt.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,tt.longToHash=function(at){return at?tt.LongBits.from(at).toHash():tt.LongBits.zeroHash},tt.longFromHash=function(at,ot){var st=tt.LongBits.fromHash(at);return tt.Long?tt.Long.fromBits(st.lo,st.hi,ot):st.toNumber(!!ot)},tt.merge=nt,tt.lcFirst=function(at){return at.charAt(0).toLowerCase()+at.substring(1)},tt.newError=it,tt.ProtocolError=it("ProtocolError"),tt.oneOfGetter=function(at){for(var ot={},st=0;st<at.length;++st)ot[at[st]]=1;return function(){for(var dt=Object.keys(this),ht=dt.length-1;ht>-1;--ht)if(ot[dt[ht]]===1&&this[dt[ht]]!==void 0&&this[dt[ht]]!==null)return dt[ht]}},tt.oneOfSetter=function(at){return function(ot){for(var st=0;st<at.length;++st)at[st]!==ot&&delete this[at[st]]}},tt.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},tt._configure=function(){var at=tt.Buffer;at?(tt._Buffer_from=at.from!==Uint8Array.from&&at.from||function(ot,st){return new at(ot,st)},tt._Buffer_allocUnsafe=at.allocUnsafe||function(ot){return new at(ot)}):tt._Buffer_from=tt._Buffer_allocUnsafe=null}},1173:(_e,_,et)=>{_e.exports=ct;var tt,nt=et(9693),it=nt.LongBits,at=nt.base64,ot=nt.utf8;function st(bt,_t,xt){this.fn=bt,this.len=_t,this.next=void 0,this.val=xt}function dt(){}function ht(bt){this.head=bt.head,this.tail=bt.tail,this.len=bt.len,this.next=bt.states}function ct(){this.len=0,this.head=new st(dt,0,0),this.tail=this.head,this.states=null}var ut=function(){return nt.Buffer?function(){return(ct.create=function(){return new tt})()}:function(){return new ct}};function ft(bt,_t,xt){_t[xt]=255&bt}function gt(bt,_t){this.len=bt,this.next=void 0,this.val=_t}function mt(bt,_t,xt){for(;bt.hi;)_t[xt++]=127&bt.lo|128,bt.lo=(bt.lo>>>7|bt.hi<<25)>>>0,bt.hi>>>=7;for(;bt.lo>127;)_t[xt++]=127&bt.lo|128,bt.lo=bt.lo>>>7;_t[xt++]=bt.lo}function vt(bt,_t,xt){_t[xt]=255&bt,_t[xt+1]=bt>>>8&255,_t[xt+2]=bt>>>16&255,_t[xt+3]=bt>>>24}ct.create=ut(),ct.alloc=function(bt){return new nt.Array(bt)},nt.Array!==Array&&(ct.alloc=nt.pool(ct.alloc,nt.Array.prototype.subarray)),ct.prototype._push=function(bt,_t,xt){return this.tail=this.tail.next=new st(bt,_t,xt),this.len+=_t,this},gt.prototype=Object.create(st.prototype),gt.prototype.fn=function(bt,_t,xt){for(;bt>127;)_t[xt++]=127&bt|128,bt>>>=7;_t[xt]=bt},ct.prototype.uint32=function(bt){return this.len+=(this.tail=this.tail.next=new gt((bt>>>=0)<128?1:bt<16384?2:bt<2097152?3:bt<268435456?4:5,bt)).len,this},ct.prototype.int32=function(bt){return bt<0?this._push(mt,10,it.fromNumber(bt)):this.uint32(bt)},ct.prototype.sint32=function(bt){return this.uint32((bt<<1^bt>>31)>>>0)},ct.prototype.uint64=function(bt){var _t=it.from(bt);return this._push(mt,_t.length(),_t)},ct.prototype.int64=ct.prototype.uint64,ct.prototype.sint64=function(bt){var _t=it.from(bt).zzEncode();return this._push(mt,_t.length(),_t)},ct.prototype.bool=function(bt){return this._push(ft,1,bt?1:0)},ct.prototype.fixed32=function(bt){return this._push(vt,4,bt>>>0)},ct.prototype.sfixed32=ct.prototype.fixed32,ct.prototype.fixed64=function(bt){var _t=it.from(bt);return this._push(vt,4,_t.lo)._push(vt,4,_t.hi)},ct.prototype.sfixed64=ct.prototype.fixed64,ct.prototype.float=function(bt){return this._push(nt.float.writeFloatLE,4,bt)},ct.prototype.double=function(bt){return this._push(nt.float.writeDoubleLE,8,bt)};var yt=nt.Array.prototype.set?function(bt,_t,xt){_t.set(bt,xt)}:function(bt,_t,xt){for(var St=0;St<bt.length;++St)_t[xt+St]=bt[St]};ct.prototype.bytes=function(bt){var _t=bt.length>>>0;if(!_t)return this._push(ft,1,0);if(nt.isString(bt)){var xt=ct.alloc(_t=at.length(bt));at.decode(bt,xt,0),bt=xt}return this.uint32(_t)._push(yt,_t,bt)},ct.prototype.string=function(bt){var _t=ot.length(bt);return _t?this.uint32(_t)._push(ot.write,_t,bt):this._push(ft,1,0)},ct.prototype.fork=function(){return this.states=new ht(this),this.head=this.tail=new st(dt,0,0),this.len=0,this},ct.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new st(dt,0,0),this.len=0),this},ct.prototype.ldelim=function(){var bt=this.head,_t=this.tail,xt=this.len;return this.reset().uint32(xt),xt&&(this.tail.next=bt.next,this.tail=_t,this.len+=xt),this},ct.prototype.finish=function(){for(var bt=this.head.next,_t=this.constructor.alloc(this.len),xt=0;bt;)bt.fn(bt.val,_t,xt),xt+=bt.len,bt=bt.next;return _t},ct._configure=function(bt){tt=bt,ct.create=ut(),tt._configure()}},3155:(_e,_,et)=>{_e.exports=it;var tt=et(1173);(it.prototype=Object.create(tt.prototype)).constructor=it;var nt=et(9693);function it(){tt.call(this)}function at(ot,st,dt){ot.length<40?nt.utf8.write(ot,st,dt):st.utf8Write?st.utf8Write(ot,dt):st.write(ot,dt)}it._configure=function(){it.alloc=nt._Buffer_allocUnsafe,it.writeBytesBuffer=nt.Buffer&&nt.Buffer.prototype instanceof Uint8Array&&nt.Buffer.prototype.set.name==="set"?function(ot,st,dt){st.set(ot,dt)}:function(ot,st,dt){if(ot.copy)ot.copy(st,dt,0,ot.length);else for(var ht=0;ht<ot.length;)st[dt++]=ot[ht++]}},it.prototype.bytes=function(ot){nt.isString(ot)&&(ot=nt._Buffer_from(ot,"base64"));var st=ot.length>>>0;return this.uint32(st),st&&this._push(it.writeBytesBuffer,st,ot),this},it.prototype.string=function(ot){var st=nt.Buffer.byteLength(ot);return this.uint32(st),st&&this._push(at,st,ot),this},it._configure()},7714:(_e,_,et)=>{_.R=void 0;const tt=et(6919),nt=et(7448);_.R=new class{async init(){}async createSessionHandler(it,at){const ot=new tt.Session(at);return await ot.loadModel(it),new nt.OnnxjsSessionHandler(ot)}}},4200:(_e,_,et)=>{_.c8=_.rX=void 0;const tt=et(1670),nt=et(5381),it=et(2157),at=et(2306);_.rX=()=>{if((typeof tt.env.wasm.initTimeout!="number"||tt.env.wasm.initTimeout<0)&&(tt.env.wasm.initTimeout=0),typeof tt.env.wasm.simd!="boolean"&&(tt.env.wasm.simd=!0),typeof tt.env.wasm.proxy!="boolean"&&(tt.env.wasm.proxy=!1),typeof tt.env.wasm.numThreads!="number"||!Number.isInteger(tt.env.wasm.numThreads)||tt.env.wasm.numThreads<=0){const ot=typeof navigator>"u"?(0,nt.cpus)().length:navigator.hardwareConcurrency;tt.env.wasm.numThreads=Math.min(4,Math.ceil((ot||1)/2))}},_.c8=new class{async init(){(0,_.rX)(),await(0,it.initWasm)()}async createSessionHandler(ot,st){const dt=new at.OnnxruntimeWebAssemblySessionHandler;return await dt.loadModel(ot,st),Promise.resolve(dt)}}},6018:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(at,ot,st,dt){dt===void 0&&(dt=st);var ht=Object.getOwnPropertyDescriptor(ot,st);ht&&!("get"in ht?!ot.__esModule:ht.writable||ht.configurable)||(ht={enumerable:!0,get:function(){return ot[st]}}),Object.defineProperty(at,dt,ht)}:function(at,ot,st,dt){dt===void 0&&(dt=st),at[dt]=ot[st]}),nt=this&&this.__exportStar||function(at,ot){for(var st in at)st==="default"||Object.prototype.hasOwnProperty.call(ot,st)||tt(ot,at,st)};Object.defineProperty(_,"__esModule",{value:!0}),nt(et(1670),_);const it=et(1670);{const at=et(7714).R;(0,it.registerBackend)("webgl",at,-10)}{const at=et(4200).c8;(0,it.registerBackend)("cpu",at,10),(0,it.registerBackend)("wasm",at,10),(0,it.registerBackend)("xnnpack",at,9)}},246:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createAttributeWithCacheKey=void 0;class et{constructor(nt){Object.assign(this,nt)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(nt=>`${this[nt]}`).join(";")),this._cacheKey}}_.createAttributeWithCacheKey=tt=>new et(tt)},7778:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Attribute=void 0;const tt=et(1446),nt=et(9395),it=et(9162),at=et(2517);var ot=nt.onnxruntime.experimental.fbs;class st{constructor(ht){if(this._attributes=new Map,ht!=null){for(const ct of ht)ct instanceof tt.onnx.AttributeProto?this._attributes.set(ct.name,[st.getValue(ct),st.getType(ct)]):ct instanceof ot.Attribute&&this._attributes.set(ct.name(),[st.getValue(ct),st.getType(ct)]);if(this._attributes.size<ht.length)throw new Error("duplicated attribute names")}}set(ht,ct,ut){this._attributes.set(ht,[ut,ct])}delete(ht){this._attributes.delete(ht)}getFloat(ht,ct){return this.get(ht,"float",ct)}getInt(ht,ct){return this.get(ht,"int",ct)}getString(ht,ct){return this.get(ht,"string",ct)}getTensor(ht,ct){return this.get(ht,"tensor",ct)}getFloats(ht,ct){return this.get(ht,"floats",ct)}getInts(ht,ct){return this.get(ht,"ints",ct)}getStrings(ht,ct){return this.get(ht,"strings",ct)}getTensors(ht,ct){return this.get(ht,"tensors",ct)}get(ht,ct,ut){const ft=this._attributes.get(ht);if(ft===void 0){if(ut!==void 0)return ut;throw new Error(`required attribute not found: ${ht}`)}if(ft[1]!==ct)throw new Error(`type mismatch: expected ${ct} but got ${ft[1]}`);return ft[0]}static getType(ht){const ct=ht instanceof tt.onnx.AttributeProto?ht.type:ht.type();switch(ct){case tt.onnx.AttributeProto.AttributeType.FLOAT:return"float";case tt.onnx.AttributeProto.AttributeType.INT:return"int";case tt.onnx.AttributeProto.AttributeType.STRING:return"string";case tt.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case tt.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case tt.onnx.AttributeProto.AttributeType.INTS:return"ints";case tt.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case tt.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${tt.onnx.AttributeProto.AttributeType[ct]}`)}}static getValue(ht){const ct=ht instanceof tt.onnx.AttributeProto?ht.type:ht.type();if(ct===tt.onnx.AttributeProto.AttributeType.GRAPH||ct===tt.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const ut=this.getValueNoCheck(ht);if(ct===tt.onnx.AttributeProto.AttributeType.INT&&at.LongUtil.isLong(ut))return at.LongUtil.longToNumber(ut);if(ct===tt.onnx.AttributeProto.AttributeType.INTS){const ft=ut,gt=new Array(ft.length);for(let mt=0;mt<ft.length;mt++){const vt=ft[mt];gt[mt]=at.LongUtil.longToNumber(vt)}return gt}if(ct===tt.onnx.AttributeProto.AttributeType.TENSOR)return ht instanceof tt.onnx.AttributeProto?it.Tensor.fromProto(ut):it.Tensor.fromOrtTensor(ut);if(ct===tt.onnx.AttributeProto.AttributeType.TENSORS){if(ht instanceof tt.onnx.AttributeProto)return ut.map(ft=>it.Tensor.fromProto(ft));if(ht instanceof ot.Attribute)return ut.map(ft=>it.Tensor.fromOrtTensor(ft))}if(ct===tt.onnx.AttributeProto.AttributeType.STRING&&ht instanceof tt.onnx.AttributeProto){const ft=ut;return(0,at.decodeUtf8String)(ft)}return ct===tt.onnx.AttributeProto.AttributeType.STRINGS&&ht instanceof tt.onnx.AttributeProto?ut.map(at.decodeUtf8String):ut}static getValueNoCheck(ht){return ht instanceof tt.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(ht):this.getValueNoCheckFromOrtFormat(ht)}static getValueNoCheckFromOnnxFormat(ht){switch(ht.type){case tt.onnx.AttributeProto.AttributeType.FLOAT:return ht.f;case tt.onnx.AttributeProto.AttributeType.INT:return ht.i;case tt.onnx.AttributeProto.AttributeType.STRING:return ht.s;case tt.onnx.AttributeProto.AttributeType.TENSOR:return ht.t;case tt.onnx.AttributeProto.AttributeType.GRAPH:return ht.g;case tt.onnx.AttributeProto.AttributeType.FLOATS:return ht.floats;case tt.onnx.AttributeProto.AttributeType.INTS:return ht.ints;case tt.onnx.AttributeProto.AttributeType.STRINGS:return ht.strings;case tt.onnx.AttributeProto.AttributeType.TENSORS:return ht.tensors;case tt.onnx.AttributeProto.AttributeType.GRAPHS:return ht.graphs;default:throw new Error(`unsupported attribute type: ${tt.onnx.AttributeProto.AttributeType[ht.type]}`)}}static getValueNoCheckFromOrtFormat(ht){switch(ht.type()){case ot.AttributeType.FLOAT:return ht.f();case ot.AttributeType.INT:return ht.i();case ot.AttributeType.STRING:return ht.s();case ot.AttributeType.TENSOR:return ht.t();case ot.AttributeType.GRAPH:return ht.g();case ot.AttributeType.FLOATS:return ht.floatsArray();case ot.AttributeType.INTS:{const ct=[];for(let ut=0;ut<ht.intsLength();ut++)ct.push(ht.ints(ut));return ct}case ot.AttributeType.STRINGS:{const ct=[];for(let ut=0;ut<ht.stringsLength();ut++)ct.push(ht.strings(ut));return ct}case ot.AttributeType.TENSORS:{const ct=[];for(let ut=0;ut<ht.tensorsLength();ut++)ct.push(ht.tensors(ut));return ct}default:throw new Error(`unsupported attribute type: ${ot.AttributeType[ht.type()]}`)}}}_.Attribute=st},7091:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.resolveBackend=_.backend=void 0;const tt=et(5038),nt=new Map;async function it(at){const ot=_.backend;if(ot[at]!==void 0&&function(st){const dt=st;return"initialize"in dt&&typeof dt.initialize=="function"&&"createSessionHandler"in dt&&typeof dt.createSessionHandler=="function"&&"dispose"in dt&&typeof dt.dispose=="function"}(ot[at])){const st=ot[at];let dt=st.initialize();if(typeof dt=="object"&&"then"in dt&&(dt=await dt),dt)return nt.set(at,st),st}}_.backend={webgl:new tt.WebGLBackend},_.resolveBackend=async function at(ot){if(!ot)return at(["webgl"]);{const st=typeof ot=="string"?[ot]:ot;for(const dt of st){const ht=nt.get(dt);if(ht)return ht;const ct=await it(dt);if(ct)return ct}}throw new Error("no available backend to use")}},5038:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLBackend=void 0;const tt=et(1670),nt=et(6231),it=et(6416),at=et(7305);_.WebGLBackend=class{get contextId(){return tt.env.webgl.contextId}set contextId(ot){tt.env.webgl.contextId=ot}get matmulMaxBatchSize(){return tt.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(ot){tt.env.webgl.matmulMaxBatchSize=ot}get textureCacheMode(){return tt.env.webgl.textureCacheMode}set textureCacheMode(ot){tt.env.webgl.textureCacheMode=ot}get pack(){return tt.env.webgl.pack}set pack(ot){tt.env.webgl.pack=ot}get async(){return tt.env.webgl.async}set async(ot){tt.env.webgl.async=ot}initialize(){try{return this.glContext=(0,at.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),nt.Logger.setWithEnv(tt.env),nt.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(ot){return nt.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${ot}`),!1}}createSessionHandler(ot){return new it.WebGLSessionHandler(this,ot)}dispose(){this.glContext.dispose()}}},5107:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CoordsGlslLib=void 0;const tt=et(2517),nt=et(8520),it=et(5060),at=et(7859),ot=et(9390);class st extends nt.GlslLib{constructor(ht){super(ht)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new nt.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new nt.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const ht=this.context.outputTextureLayout;return ht.isPacked?this.getPackedOutputSamplingSnippet(ht):this.getUnpackedOutputSamplingSnippet(ht)}getPackedOutputSamplingSnippet(ht){const ct=ht.unpackedShape,ut=[ht.width,ht.height],ft={},gt="getOutputCoords";switch(ct.length){case 0:ft[gt]=this.getOutputScalarCoords();break;case 1:ft[gt]=this.getOutputPacked1DCoords(ct,ut);break;case 2:ft[gt]=this.getOutputPacked2DCoords(ct,ut);break;case 3:ft[gt]=this.getOutputPacked3DCoords(ct,ut);break;default:ft[gt]=this.getOutputPackedNDCoords(ct,ut)}const mt=`
      void setOutput(vec4 val) {
        ${(0,it.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return ft.floatTextureSetRGBA=new nt.GlslLibRoutine(mt),ft}getUnpackedOutputSamplingSnippet(ht){const ct=ht.unpackedShape,ut=[ht.width,ht.height],ft={},gt="getOutputCoords";switch(ct.length){case 0:ft[gt]=this.getOutputScalarCoords();break;case 1:ft[gt]=this.getOutputUnpacked1DCoords(ct,ut);break;case 2:ft[gt]=this.getOutputUnpacked2DCoords(ct,ut);break;case 3:ft[gt]=this.getOutputUnpacked3DCoords(ct,ut);break;case 4:ft[gt]=this.getOutputUnpacked4DCoords(ct,ut);break;case 5:ft[gt]=this.getOutputUnpacked5DCoords(ct,ut);break;case 6:ft[gt]=this.getOutputUnpacked6DCoords(ct,ut);break;default:throw new Error(`Unsupported output dimensionality: ${ct.length}`)}const mt=`
        void setOutput(float val) {
          ${(0,it.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return ft.floatTextureSetR=new nt.GlslLibRoutine(mt),ft}getOutputScalarCoords(){return new nt.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(ht,ct){const ut=ct;let ft="";return ut[0]===1?(ft=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${ut[1]}.0);
          }
        `,new nt.GlslLibRoutine(ft)):ut[1]===1?(ft=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${ut[0]}.0);
          }
        `,new nt.GlslLibRoutine(ft)):(ft=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${ut[0]}, ${ut[1]}));
          return 2 * (resTexRC.y * ${ut[0]} + resTexRC.x);
        }
      `,new nt.GlslLibRoutine(ft))}getOutputPacked2DCoords(ht,ct){let ut="";if(tt.ArrayUtil.arraysEqual(ht,ct))return ut=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${ct[0]}, ${ct[1]}));
        }
      `,new nt.GlslLibRoutine(ut);const ft=ct,gt=Math.ceil(ht[1]/2);return ut=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ft[0]}, ${ft[1]}));

          int index = resTexRC.y * ${ft[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${gt}) * 2;
          int c = 2 * (index / ${gt});

          return ivec2(r, c);
        }
      `,new nt.GlslLibRoutine(ut)}getOutputPacked3DCoords(ht,ct){const ut=[ct[0],ct[1]],ft=Math.ceil(ht[2]/2),gt=ft*Math.ceil(ht[1]/2),mt=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ut[0]}, ${ut[1]}));
          int index = resTexRC.y * ${ut[0]} + resTexRC.x;

          int b = index / ${gt};
          index -= b * ${gt};

          // reverse r and c order for packed texture
          int r = imod(index, ${ft}) * 2;
          int c = 2 * (index / ${ft});

          return ivec3(b, r, c);
        }
      `;return new nt.GlslLibRoutine(mt)}getOutputPackedNDCoords(ht,ct){const ut=[ct[0],ct[1]],ft=Math.ceil(ht[ht.length-1]/2),gt=ft*Math.ceil(ht[ht.length-2]/2);let mt=gt,vt="",yt="b, r, c";for(let _t=2;_t<ht.length-1;_t++)mt*=ht[ht.length-_t-1],vt=`
      int b${_t} = index / ${mt};
      index -= b${_t} * ${mt};
    `+vt,yt=`b${_t}, `+yt;const bt=`
      ivec${ht.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${ut[0]}, ${ut[1]}));
        int index = resTexRC.y * ${ut[0]} + resTexRC.x;

        ${vt}

        int b = index / ${gt};
        index -= b * ${gt};

        // reverse r and c order for packed texture
        int r = imod(index, ${ft}) * 2;
        int c = 2 * (index / ${ft});

        return ivec${ht.length}(${yt});
      }
    `;return new nt.GlslLibRoutine(bt)}getOutputUnpacked1DCoords(ht,ct){const ut=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ct[0]}, ${ct[1]}));
          return resTexRC.y * ${ct[0]} + resTexRC.x;
        }
      `;return new nt.GlslLibRoutine(ut)}getOutputUnpacked2DCoords(ht,ct){const ut=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ct[0]}, ${ct[1]}));
          int index = resTexRC.y * ${ct[0]} + resTexRC.x;
          int r = index / ${ht[1]};
          int c = index - r * ${ht[1]};
          return ivec2(r, c);
        }
      `;return new nt.GlslLibRoutine(ut)}getOutputUnpacked3DCoords(ht,ct){let ut="";const ft=ht.length;let gt=null;ft<2&&(gt=[]),gt=new Array(ft-1),gt[ft-2]=ht[ft-1];for(let yt=ft-3;yt>=0;--yt)gt[yt]=gt[yt+1]*ht[yt+1];const mt=["r","c","d"],vt=gt.map((yt,bt)=>`int ${mt[bt]} = index / ${yt}; ${bt===gt.length-1?`int ${mt[bt+1]} = index - ${mt[bt]} * ${yt}`:`index -= ${mt[bt]} * ${yt}`};`).join("");return ut=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ct[0]}, ${ct[1]}));
          int index = resTexRC.y * ${ct[0]} + resTexRC.x;
          ${vt}
          return ivec3(r, c, d);
        }
      `,new nt.GlslLibRoutine(ut)}getOutputUnpacked4DCoords(ht,ct){let ut="";const ft=ht.length;let gt=null;ft<2&&(gt=[]),gt=new Array(ft-1),gt[ft-2]=ht[ft-1];for(let yt=ft-3;yt>=0;--yt)gt[yt]=gt[yt+1]*ht[yt+1];const mt=["r","c","d","d2"],vt=gt.map((yt,bt)=>`int ${mt[bt]} = index / ${yt}; ${bt===gt.length-1?`int ${mt[bt+1]} = index - ${mt[bt]} * ${yt}`:`index -= ${mt[bt]} * ${yt}`};`).join("");return ut=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ct[0]}, ${ct[1]}));
          int index = resTexRC.y * ${ct[0]} + resTexRC.x;
          ${vt}
          return ivec4(r, c, d, d2);
        }
      `,new nt.GlslLibRoutine(ut)}getOutputUnpacked5DCoords(ht,ct){let ut="";const ft=ht.length;let gt=null;ft<2&&(gt=[]),gt=new Array(ft-1),gt[ft-2]=ht[ft-1];for(let yt=ft-3;yt>=0;--yt)gt[yt]=gt[yt+1]*ht[yt+1];const mt=["r","c","d","d2","d3"],vt=gt.map((yt,bt)=>`int ${mt[bt]} = index / ${yt}; ${bt===gt.length-1?`int ${mt[bt+1]} = index - ${mt[bt]} * ${yt}`:`index -= ${mt[bt]} * ${yt}`};`).join("");return ut=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ct[0]}, ${ct[1]}));
          int index = resTexRC.y * ${ct[0]} + resTexRC.x;
          ${vt}
          return ivec5(r, c, d, d2, d3);
        }
      `,new nt.GlslLibRoutine(ut)}getOutputUnpacked6DCoords(ht,ct){let ut="";const ft=ht.length;let gt=null;ft<2&&(gt=[]),gt=new Array(ft-1),gt[ft-2]=ht[ft-1];for(let yt=ft-3;yt>=0;--yt)gt[yt]=gt[yt+1]*ht[yt+1];const mt=["r","c","d","d2","d3","d4"],vt=gt.map((yt,bt)=>`int ${mt[bt]} = index / ${yt}; ${bt===gt.length-1?`int ${mt[bt+1]} = index - ${mt[bt]} * ${yt}`:`index -= ${mt[bt]} * ${yt}`};`).join("");return ut=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${ct[0]}, ${ct[1]}));
         int index = resTexRC.y * ${ct[0]} + resTexRC.x;
         ${vt}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new nt.GlslLibRoutine(ut)}getCommonUtilFuncs(){const ht={};let ct="uvFromFlat";ht[ct]=new nt.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),ct="packedUVfrom1D",ht[ct]=new nt.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ct="packedUVfrom2D",ht[ct]=new nt.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ct="packedUVfrom3D",ht[ct]=new nt.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ct="sampleTexture";const ut=(0,it.getGlsl)(this.context.glContext.version);return ht[ct]=new nt.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${ut.texture2D}(textureSampler, uv).r;
        }`),ht}getInputsSamplingSnippets(){const ht={},ct=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((ut,ft)=>{const gt=this.context.inputTextureLayouts[ft],mt=(0,ot.generateShaderFuncNameFromInputSamplerName)(ut);gt.isPacked?ht[mt]=this.getPackedSamplerFromInput(mt,ut,gt):ht[mt]=this.getUnpackedSamplerFromInput(mt,ut,gt);const vt=(0,ot.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(ut);gt.unpackedShape.length<=ct.unpackedShape.length&&(gt.isPacked?ht[vt]=this.getPackedSamplerAtOutputCoords(vt,gt,ct,ut):ht[vt]=this.getUnpackedSamplerAtOutputCoords(vt,gt,ct,ut))}),ht}getPackedSamplerAtOutputCoords(ht,ct,ut,ft){const gt=ct.unpackedShape,mt=ut.unpackedShape,vt=ft,yt=(0,ot.generateShaderFuncNameFromInputSamplerName)(vt),bt=gt.length,_t=mt.length,xt=tt.BroadcastUtil.getBroadcastDims(gt,mt),St=(0,ot.getCoordsDataType)(_t),Tt=_t-bt;let wt;const Ct=(0,ot.getGlChannels)();wt=bt===0?"":_t<2&&xt.length>=1?"coords = 0;":xt.map(Mt=>`coords.${Ct[Mt+Tt]} = 0;`).join(`
`);let Et="";Et=_t<2&&bt>0?"coords":gt.map((Mt,Ot)=>`coords.${Ct[Ot+Tt]}`).join(", ");let At="return outputValue;";const Pt=tt.ShapeUtil.size(gt)===1,Rt=tt.ShapeUtil.size(mt)===1;if(bt!==1||Pt||Rt){if(Pt&&!Rt)At=_t===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(xt.length){const Mt=bt-2,Ot=bt-1;xt.indexOf(Mt)>-1&&xt.indexOf(Ot)>-1?At="return vec4(outputValue.x);":xt.indexOf(Mt)>-1?At="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":xt.indexOf(Ot)>-1&&(At="return vec4(outputValue.xx, outputValue.zz);")}}else At=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const It=`
      vec4 ${ht}() {
        ${St} coords = getOutputCoords();
        
        int lastDim = coords.${Ct[_t-1]};
        coords.${Ct[_t-1]} = coords.${Ct[_t-2]};
        coords.${Ct[_t-2]} = lastDim;
      
        ${wt}
        vec4 outputValue = ${yt}(${Et});
        ${At}
      }
    `;return new nt.GlslLibRoutine(It,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(ht,ct,ut,ft){const gt=[ut.width,ut.height],mt=[ct.width,ct.height],vt=ct.unpackedShape.length,yt=ut.unpackedShape.length,bt=ct.unpackedShape,_t=ut.unpackedShape,xt=(0,ot.generateShaderFuncNameFromInputSamplerName)(ft);if(vt===yt&&tt.ArrayUtil.arraysEqual(mt,gt)){const Rt=`
          float ${ht}() {
            return sampleTexture(${ft}, TexCoords);
          }
        `;return new nt.GlslLibRoutine(Rt,["coordinates.sampleTexture"])}const St=(0,ot.getCoordsDataType)(yt),Tt=tt.BroadcastUtil.getBroadcastDims(bt,_t),wt=yt-vt;let Ct;const Et=(0,ot.getGlChannels)();Ct=vt===0?"":yt<2&&Tt.length>=1?"coords = 0;":Tt.map(Rt=>`coords.${Et[Rt+wt]} = 0;`).join(`
`);let At="";At=yt<2&&vt>0?"coords":ct.unpackedShape.map((Rt,It)=>`coords.${Et[It+wt]}`).join(", ");const Pt=`
        float ${ht}() {
          ${St} coords = getOutputCoords();
          ${Ct}
          return ${xt}(${At});
        }
      `;return new nt.GlslLibRoutine(Pt,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(ht,ct,ut){switch(ut.unpackedShape.length){case 0:return this.getPackedSamplerScalar(ht,ct);case 1:return this.getPackedSampler1D(ht,ct,ut);case 2:return this.getPackedSampler2D(ht,ct,ut);case 3:return this.getPackedSampler3D(ht,ct,ut);default:return this.getPackedSamplerND(ht,ct,ut)}}getUnpackedSamplerFromInput(ht,ct,ut){const ft=ut.unpackedShape;switch(ft.length){case 0:return this.getUnpackedSamplerScalar(ht,ct,ut);case 1:return this.getUnpackedSampler1D(ht,ct,ut);case 2:return this.getUnpackedSampler2D(ht,ct,ut);case 3:return this.getUnpackedSampler3D(ht,ct,ut);case 4:return this.getUnpackedSampler4D(ht,ct,ut);case 5:return this.getUnpackedSampler5D(ht,ct,ut);case 6:return this.getUnpackedSampler6D(ht,ct,ut);default:throw new Error(`Unsupported dimension ${ft.length}-D`)}}getPackedSamplerScalar(ht,ct){const ut=`
          vec4 ${ht}() {
            return ${(0,it.getGlsl)(this.context.glContext.version).texture2D}(${ct}, halfCR);
          }
        `;return new nt.GlslLibRoutine(ut)}getPackedSampler1D(ht,ct,ut){const ft=[ut.width,ut.height],gt=[ft[1],ft[0]],mt=(0,it.getGlsl)(this.context.glContext.version),vt=`vec4 ${ht}(int index) {
      vec2 uv = packedUVfrom1D(
      ${gt[0]}, ${gt[1]}, index);
      return ${mt.texture2D}(${ct}, uv);
    }`;return new nt.GlslLibRoutine(vt,["coordinates.packedUVfrom1D"])}getPackedSampler2D(ht,ct,ut){const ft=ut.unpackedShape,gt=[ut.width,ut.height],mt=(0,it.getGlsl)(this.context.glContext.version),vt=gt[0],yt=gt[1];if(gt!=null&&tt.ArrayUtil.arraysEqual(ft,gt)){const St=`vec4 ${ht}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${yt}.0, ${vt}.0);
        return ${mt.texture2D}(${ct}, uv);
      }`;return new nt.GlslLibRoutine(St)}const bt=gt,_t=Math.ceil(ft[1]/2),xt=`vec4 ${ht}(int row, int col) {
      vec2 uv = packedUVfrom2D(${bt[1]}, ${bt[0]}, ${_t}, row, col);
      return ${mt.texture2D}(${ct}, uv);
    }`;return new nt.GlslLibRoutine(xt,["coordinates.packedUVfrom2D"])}getPackedSampler3D(ht,ct,ut){const ft=ut.unpackedShape,gt=[ut.width,ut.height],mt=[gt[0],gt[1]],vt=(0,it.getGlsl)(this.context.glContext.version);if(ft[0]===1){const St=ft.slice(1),Tt=[1,2],wt=(0,ot.squeezeInputShape)(ft,St),Ct=["b","row","col"],Et=JSON.parse(JSON.stringify(ut));Et.unpackedShape=wt;const At=this.getPackedSamplerFromInput(ht,ct,Et),Pt=`${At.routineBody}
      vec4 ${ht}(int b, int row, int col) {
        return ${ht}(${(0,ot.getSqueezedParams)(Ct,Tt)});
      } `;return new nt.GlslLibRoutine(Pt,At.dependencies)}const yt=mt[0],bt=mt[1],_t=Math.ceil(ft[2]/2),xt=`vec4 ${ht}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${bt}, ${yt}, ${_t*Math.ceil(ft[1]/2)}, ${_t}, b, row, col);
      return ${vt.texture2D}(${ct}, uv);}`;return new nt.GlslLibRoutine(xt,["coordinates.packedUVfrom3D"])}getPackedSamplerND(ht,ct,ut){const ft=ut.unpackedShape,gt=ft.length,mt=[ut.width,ut.height],vt=(0,it.getGlsl)(this.context.glContext.version),yt=[mt[0],mt[1]],bt=yt[1],_t=yt[0],xt=Math.ceil(ft[gt-1]/2);let St=xt*Math.ceil(ft[gt-2]/2),Tt="int b, int row, int col",wt=`b * ${St} + (row / 2) * ${xt} + (col / 2)`;for(let Et=2;Et<gt-1;Et++)Tt=`int b${Et}, `+Tt,St*=ft[gt-Et-1],wt=`b${Et} * ${St} + `+wt;const Ct=`vec4 ${ht}(${Tt}) {
      int index = ${wt};
      int texR = index / ${_t};
      int texC = index - texR * ${_t};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${_t}, ${bt});
      return ${vt.texture2D}(${ct}, uv);
    }`;return new nt.GlslLibRoutine(Ct)}getUnpackedSamplerScalar(ht,ct,ut){const[ft,gt]=[ut.width,ut.height];if(ft===1&&gt===1){const vt=`
          float ${ht}() {
            return sampleTexture(${ct}, halfCR);
          }
        `;return new nt.GlslLibRoutine(vt,["coordinates.sampleTexture"])}const mt=`
        float ${ht}() {
          int offset_${ct} = coordsToOffset(TexCoords, ${ft}, ${gt});
          vec2 uv = uvFromFlat(${ft}, ${gt}, offset_${ct});
          return sampleTexture(${ct}, uv);
        }
      `;return new nt.GlslLibRoutine(mt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(ht,ct,ut){const ft=ut.width,gt=ut.height;if(gt===1&&ft===1){const vt=`
        float ${ht}(int index) {
          return sampleTexture(${ct}, halfCR);
        }
      `;return new nt.GlslLibRoutine(vt,["coordinates.sampleTexture"])}if(gt===1){const vt=`
          float ${ht}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${ft}.0, 0.5);
            return sampleTexture(${ct}, uv);
          }
        `;return new nt.GlslLibRoutine(vt,["coordinates.sampleTexture"])}if(ft===1){const vt=`
          float ${ht}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${gt}.0);
            return sampleTexture(${ct}, uv);
          }
        `;return new nt.GlslLibRoutine(vt,["coordinates.sampleTexture"])}const mt=`
        float ${ht}(int index) {
          vec2 uv = uvFromFlat(${ft}, ${gt}, index);
          return sampleTexture(${ct}, uv);
        }
      `;return new nt.GlslLibRoutine(mt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(ht,ct,ut){const ft=ut.unpackedShape,gt=[ut.height,ut.width];if(gt!=null&&tt.ArrayUtil.arraysEqual(ft,gt)){const St=`
          float ${ht}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${gt[1]}.0, ${gt[0]}.0);
            return sampleTexture(${ct}, uv);
          }
        `;return new nt.GlslLibRoutine(St,["coordinates.sampleTexture"])}const{newShape:mt,keptDims:vt}=(0,at.squeezeShape)(ft),yt=mt;if(yt.length<ft.length){const St=(0,ot.squeezeInputShape)(ft,yt),Tt=JSON.parse(JSON.stringify(ut));Tt.unpackedShape=St;const wt=["col","row"],Ct=`
          ${this.getUnpackedSamplerFromInput(ht,ct,Tt).routineBody}
          float ${ht}(int row, int col) {
            return ${ht}(${(0,ot.getSqueezedParams)(wt,vt)});
          }
        `;return new nt.GlslLibRoutine(Ct,["coordinates.sampleTexture"])}const bt=gt[1],_t=gt[0];if(_t===1){const St=`
          float ${ht}(int row, int col) {
            int offset_${ct} = coordsToOffset(TexCoords, ${bt}, ${_t});
            float index = dot(vec3(row, col, offset_${ct}), vec3(${ft[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${bt}.0);
            return sampleTexture(${ct}, uv);
          }
        `;return new nt.GlslLibRoutine(St,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(bt===1){const St=`
          float ${ht}(int row, int col) {
            int offset_${ct} = coordsToOffset(TexCoords, ${bt}, ${_t});
            float index = dot(vec3(row, col, offset_${ct}), vec3(${ft[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${_t}.0, 0.5);
            return sampleTexture(${ct}, uv);
          }
        `;return new nt.GlslLibRoutine(St,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const xt=`
        float ${ht}(int row, int col) {
          int index = col * ${ft[1]} + row;
          vec2 uv = uvFromFlat(${bt}, ${_t}, index);
          return sampleTexture(${ct}, uv);
        }
      `;return new nt.GlslLibRoutine(xt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(ht,ct,ut){const ft=ut.unpackedShape,gt=ft[1]*ft[2],mt=ft[2],{newShape:vt,keptDims:yt}=(0,at.squeezeShape)(ft),bt=vt;if(bt.length<ft.length){const xt=(0,ot.squeezeInputShape)(ft,bt),St=["batch","col","row"],Tt=JSON.parse(JSON.stringify(ut));Tt.unpackedShape=xt;const wt=this.getUnpackedSamplerFromInput(ht,ct,Tt),Ct=yt.reverse(),Et=`
          ${wt.routineBody}
          float ${ht}(int batch, int row, int col) {
            return ${ht}(${(0,ot.getSqueezedParams)(St,Ct)});
          }
        `;return new nt.GlslLibRoutine(Et,wt.dependencies)}const _t=`
          float ${ht}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${gt} + col * ${mt} + row;
            vec2 uv = uvFromFlat(${ut.width}, ${ut.height}, index);
            return sampleTexture(${ct}, uv);
          }
      `;return new nt.GlslLibRoutine(_t,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(ht,ct,ut){const ft=ut.unpackedShape,gt=ft[3],mt=ft[2]*gt,vt=`
        float ${ht}(int row, int col, int depth, int depth2) {
          int index = row * ${ft[1]*mt} + col * ${mt} +
              depth2 * ${gt} + depth;
          vec2 uv = uvFromFlat(${ut.width}, ${ut.height}, index);
          return sampleTexture(${ct}, uv);
        }
      `;return new nt.GlslLibRoutine(vt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(ht,ct,ut){const ft=ut.unpackedShape,gt=ft[4],mt=ft[3]*gt,vt=ft[2]*mt,yt=ft[1]*vt,{newShape:bt,keptDims:_t}=(0,at.squeezeShape)(ft);if(bt.length<ft.length){const St=(0,ot.squeezeInputShape)(ft,bt),Tt=["row","col","depth","depth2","depth3"],wt=JSON.parse(JSON.stringify(ut));wt.unpackedShape=St;const Ct=`
          ${this.getUnpackedSamplerFromInput(ht,ct,wt).routineBody}
          float ${ht}(int row, int col, int depth, int depth2, int depth3) {
            return ${ht}(${(0,ot.getSqueezedParams)(Tt,_t)});
          }
        `;return new nt.GlslLibRoutine(Ct,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const xt=`
        float ${ht}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${yt} + col * ${vt} + depth * ${mt} +
          depth3 * ${gt} + depth2;
          vec2 uv = uvFromFlat(${ut.width}, ${ut.height}, index);
          return sampleTexture(${ct}, uv);
        }
      `;return new nt.GlslLibRoutine(xt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(ht,ct,ut){const ft=ut.unpackedShape,gt=ft[5],mt=ft[4]*gt,vt=ft[3]*mt,yt=ft[2]*vt,bt=ft[1]*yt,{newShape:_t,keptDims:xt}=(0,at.squeezeShape)(ft);if(_t.length<ft.length){const Tt=(0,ot.squeezeInputShape)(ft,_t),wt=["row","col","depth","depth2","depth3","depth4"],Ct=JSON.parse(JSON.stringify(ut));Ct.unpackedShape=Tt;const Et=`
            ${this.getUnpackedSamplerFromInput(ht,ct,Ct).routineBody}
            float ${ht}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${ht}(${(0,ot.getSqueezedParams)(wt,xt)});
            }
          `;return new nt.GlslLibRoutine(Et,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const St=`
          float ${ht}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${bt} + col * ${yt} + depth * ${vt} +
            depth2 * ${mt} + depth3 * ${gt} + depth4;
            vec2 uv = uvFromFlat(${ut.width}, ${ut.height}, index);
            return sampleTexture(${ct}, uv);
          }
        `;return new nt.GlslLibRoutine(St,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const ht=this.context.outputTextureLayout,ct=ht.shape.length,ut=ht.strides,ft=ht.width,gt=ht.height,mt=[];for(let yt=0;yt<ct-1;++yt)mt.push(`
        c[${yt}] = offset / ${ut[yt]};`),mt.push(`
        offset -= c[${yt}] * ${ut[yt]};`);mt.push(`
        c[${ct-1}] = offset;`);const vt=`
      void toVec(vec2 texCoords, out int c[${ct}]) {
        int offset = coordsToOffset(texCoords, ${ft}, ${gt});
        ${mt.join("")}
      }
      void toVec(int offset, out int c[${ct}]) {
        ${mt.join("")}
      }
    `;return{toVec:new nt.GlslLibRoutine(vt,["coordinates.coordsToOffset"])}}valueFrom(){const ht={};return this.context.programInfo.inputNames.forEach((ct,ut)=>{const ft=this.context.inputTextureLayouts[ut],gt=(ft.unpackedShape.length>0?ft.unpackedShape:ft.shape).length;let mt=`_${ct}`;ht[mt]=new nt.GlslLibRoutine(this.getValueFromSingle(ct,gt,ft.width,ft.height,!1),[`shapeUtils.indicesToOffset${mt}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),mt+="_T",ht[mt]=new nt.GlslLibRoutine(this.getValueFromSingle(ct,gt,ft.width,ft.height,!0),[`shapeUtils.indicesToOffset${mt}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),ht}getValueFromSingle(ht,ct,ut,ft,gt){let mt=`_${ht}`;return gt&&(mt+="_T"),`
        float ${mt}(int m[${ct}]) {
          int offset = indicesToOffset${mt}(m);
          vec2 coords = offsetToCoords(offset, ${ut}, ${ft});
          float value = getColorAsFloat(${(0,it.getGlsl)(this.context.glContext.version).texture2D}(${ht}, coords));
          return value;
        }
        `}getPackedValueFrom(ht,ct,ut,ft,gt){let mt=`_${ht}_Pack`;return gt&&(mt+="_T"),`
        vec4 ${mt}(int m[${ct}]) {
          int offset = indicesToOffset_${ht}(m);
          vec2 coords = offsetToCoords(offset, ${ut}, ${ft});
          return ${(0,it.getGlsl)(this.context.glContext.version).texture2D}(${ht}, coords);
        }
        `}}_.CoordsGlslLib=st},8520:(_e,_)=>{var et;Object.defineProperty(_,"__esModule",{value:!0}),_.TopologicalSortGlslRoutines=_.GlslLibRoutineNode=_.GlslLibRoutine=_.GlslLib=_.GlslContext=_.FunctionType=void 0,(et=_.FunctionType||(_.FunctionType={}))[et.ValueBased=0]="ValueBased",et[et.Positional=1]="Positional",_.GlslContext=class{constructor(tt,nt,it,at){this.glContext=tt,this.programInfo=nt,this.inputTextureLayouts=it,this.outputTextureLayout=at}},_.GlslLib=class{constructor(tt){this.context=tt}},_.GlslLibRoutine=class{constructor(tt,nt){this.routineBody=tt,this.dependencies=nt}},_.GlslLibRoutineNode=class{constructor(tt,nt,it){this.name=tt,this.dependencies=it||[],nt&&(this.routineBody=nt)}addDependency(tt){tt&&this.dependencies.push(tt)}},_.TopologicalSortGlslRoutines=class{static returnOrderedNodes(tt){if(!tt||tt.length===0)return[];if(tt.length===1)return tt;const nt=new Set,it=new Set,at=new Array;return this.createOrderedNodes(tt,nt,it,at),at}static createOrderedNodes(tt,nt,it,at){for(let ot=0;ot<tt.length;++ot)this.dfsTraverse(tt[ot],nt,it,at)}static dfsTraverse(tt,nt,it,at){if(!tt||it.has(tt.name))return;if(nt.has(tt.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");nt.add(tt.name);const ot=tt.dependencies;if(ot&&ot.length>0)for(let st=0;st<ot.length;++st)this.dfsTraverse(ot[st],nt,it,at);at.push(tt),it.add(tt.name),nt.delete(tt.name)}}},7341:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.EncodingGlslLib=void 0;const tt=et(8520);class nt extends tt.GlslLib{constructor(at){super(at)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new tt.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new tt.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const at=nt.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new tt.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${at}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const at=nt.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new tt.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${at}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const at=new ArrayBuffer(4),ot=new Uint32Array(at),st=new Uint8Array(at);if(ot[0]=3735928559,st[0]===239)return!0;if(st[0]===222)return!1;throw new Error("unknown endianness")}}_.EncodingGlslLib=nt},9894:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FragColorGlslLib=void 0;const tt=et(8520),nt=et(5060);class it extends tt.GlslLib{constructor(ot){super(ot)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const ot=(0,nt.getGlsl)(this.context.glContext.version);return{setFragColor:new tt.GlslLibRoutine(`
        void setFragColor(float value) {
            ${ot.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new tt.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}_.FragColorGlslLib=it},2848:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.replaceInlines=void 0;const et=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;_.replaceInlines=function(tt){const nt={};let it;for(;(it=et.exec(tt))!==null;){const at=it[3].split(",").map(ot=>{const st=ot.trim().split(" ");return st&&st.length===2?{type:st[0],name:st[1]}:null}).filter(ot=>ot!==null);nt[it[2]]={params:at,body:it[4]}}for(const at in nt){const ot="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",at),st=new RegExp(ot,"gm");for(;(it=st.exec(tt))!==null;){const dt=it[1],ht=it[2],ct=it[3].split(","),ut=dt?`${dt} ${ht};`:"";let ft=nt[at].body,gt="";nt[at].params.forEach((vt,yt)=>{vt&&(gt+=`${vt.type} ${vt.name} = ${ct[yt]};
`)}),ft=`${gt}
 ${ft}`,ft=ft.replace("return",`${ht} = `);const mt=`
      ${ut}
      {
        ${ft}
      }
      `;tt=tt.replace(it[0],mt)}}return tt.replace(et,"")}},8879:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GlslPreprocessor=void 0;const tt=et(8520),nt=et(2848),it=et(5483),at=et(5060);_.GlslPreprocessor=class{constructor(ot,st,dt,ht){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new tt.GlslContext(ot,st,dt,ht),Object.keys(it.glslRegistry).forEach(ut=>{const ft=new it.glslRegistry[ut](this.context);this.libs[ut]=ft});const ct=this.glslLibRoutineDependencyGraph;for(const ut in this.libs){const ft=this.libs[ut].getFunctions();for(const gt in ft){const mt=ut+"."+gt;let vt;ct[mt]?(vt=ct[mt],vt.routineBody=ft[gt].routineBody):(vt=new tt.GlslLibRoutineNode(mt,ft[gt].routineBody),ct[mt]=vt);const yt=ft[gt].dependencies;if(yt)for(let bt=0;bt<yt.length;++bt)if(ct[yt[bt]])vt.addDependency(ct[yt[bt]]);else{const _t=new tt.GlslLibRoutineNode(yt[bt]);ct[yt[bt]]=_t,vt.addDependency(_t)}}}}preprocess(){const ot=this.context.programInfo;let st=ot.shaderSource;return this.context.programInfo.hasMain||(st=`${st}
      ${(0,at.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),st=(0,nt.replaceInlines)(st),`${(0,at.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(ot.inputNames,ot.variables)}
    ${this.getImports(st)}
    ${st}`}getImports(ot){const st=this.selectGlslLibRoutinesToBeIncluded(ot);if(st.length===0)return"";let dt="";for(let ht=0;ht<st.length;++ht){if(!st[ht].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${st[ht].name}`);dt+=st[ht].routineBody+`
`}return dt}selectGlslLibRoutinesToBeIncluded(ot){const st=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(dt=>{const ht=dt.split(".")[1];ot.indexOf(ht)!==-1&&st.push(this.glslLibRoutineDependencyGraph[dt])}),tt.TopologicalSortGlslRoutines.returnOrderedNodes(st)}getUniforms(ot,st){const dt=[];if(ot)for(const ht of ot)dt.push(`uniform sampler2D ${ht};`);if(st)for(const ht of st)dt.push(`uniform ${ht.type} ${ht.name}${ht.arrayLength?`[${ht.arrayLength}]`:""};`);return dt.join(`
`)}}},5483:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.glslRegistry=void 0;const tt=et(5107),nt=et(7341),it=et(9894),at=et(2655),ot=et(3891);_.glslRegistry={encoding:nt.EncodingGlslLib,fragcolor:it.FragColorGlslLib,vec:ot.VecGlslLib,shapeUtils:at.ShapeUtilsGlslLib,coordinates:tt.CoordsGlslLib}},2655:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeUtilsGlslLib=void 0;const tt=et(8520);class nt extends tt.GlslLib{constructor(at){super(at)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const at=this.context.outputTextureLayout.shape.length,ot={};return this.context.programInfo.inputNames.forEach((st,dt)=>{const ht=this.context.inputTextureLayouts[dt].unpackedShape;if(ht.length<=at){const ct=ht.length,ut=at-ct,ft=`bcastIndices_${st}`;let gt="";for(let vt=0;vt<ct;++vt)gt+=`
          realIndices[${vt}] = int( mod(float(bcastedIndices[${ut+vt}]), ${ht[vt]}.0) );
          `;const mt=`
        void ${ft} (int bcastedIndices[${at}], out int realIndices[${ct}]) {
          ${gt}
        }
        `;ot[ft]=new tt.GlslLibRoutine(mt)}}),ot}bcastMatmulIndex(){const at=this.context.outputTextureLayout.shape.length,ot={};return this.context.programInfo.inputNames.forEach((st,dt)=>{const ht=this.context.inputTextureLayouts[dt].shape;if(!(ht.length<2||ht.length>at)){const ct=ht.length,ut=at-ct,ft=`bcastMatmulIndices_${st}`;let gt="";for(let vt=0;vt<ct-2;++vt)gt+=`
          realIndices[${vt}] = int( mod(float(bcastedIndices[${ut+vt}]), ${ht[vt]}.0) );
          `;const mt=`
        void ${ft}(int bcastedIndices[${at}], out int realIndices[${ct}]) {
          ${gt}
          realIndices[${ct-1}] = bcastedIndices[${at-1}];
          realIndices[${ct-2}] = bcastedIndices[${at-2}];
        }
        `;ot[ft]=new tt.GlslLibRoutine(mt)}}),ot}indicesToOffset(){const at={};return this.context.programInfo.inputNames.forEach((ot,st)=>{const dt=this.context.inputTextureLayouts[st].shape,ht=this.context.inputTextureLayouts[st].strides,ct=dt.length;let ut=`indicesToOffset_${ot}`;at[ut]=new tt.GlslLibRoutine(nt.indexToOffsetSingle(ut,ct,ht)),ut=`indicesToOffset_${ot}_T`,at[ut]=new tt.GlslLibRoutine(nt.indexToOffsetSingle(ut,ct,ht.slice().reverse()))}),at}static indexToOffsetSingle(at,ot,st){let dt="";for(let ht=ot-1;ht>=0;--ht)dt+=`
        offset += indices[${ht}] * ${st[ht]};
        `;return`
      int ${at}(int indices[${ot}]) {
        int offset = 0;
        ${dt}
        return offset;
      }
      `}offsetToIndices(){const at={};return this.context.programInfo.inputNames.forEach((ot,st)=>{const dt=this.context.inputTextureLayouts[st].shape,ht=this.context.inputTextureLayouts[st].strides,ct=dt.length;let ut=`offsetToIndices_${ot}`;at[ut]=new tt.GlslLibRoutine(nt.offsetToIndicesSingle(ut,ct,ht)),ut=`offsetToIndices_${ot}_T`,at[ut]=new tt.GlslLibRoutine(nt.offsetToIndicesSingle(ut,ct,ht.slice().reverse()))}),at}static offsetToIndicesSingle(at,ot,st){const dt=[];for(let ht=0;ht<ot-1;++ht)dt.push(`
      indices[${ht}] = offset / ${st[ht]};`),dt.push(`
        offset -= indices[${ht}] * ${st[ht]};`);return dt.push(`
      indices[${ot-1}] = offset;`),`
      void ${at}(int offset, out int indices[${ot}]) {
        ${dt.join("")}
      }
      `}incrementIndices(){const at={};return this.context.programInfo.inputNames.forEach((ot,st)=>{const dt=this.context.inputTextureLayouts[st].shape,ht=dt.length,ct=`incrementIndices_${ot}`;let ut="";for(let gt=0;gt<ht;++gt)ut+=`
        shape[${gt}] = ${dt[gt]};`;const ft=`
        void ${ct}(int axis, out int indices[${ht}]) {
          int shape[${ht}];
          ${ut};
          for(int i = ${ht} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;at[ct]=new tt.GlslLibRoutine(ft)}),at}}_.ShapeUtilsGlslLib=nt},5060:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getDefaultFragShaderMain=_.getFragShaderPreamble=_.getVertexShaderSource=_.getGlsl=void 0;const et={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},tt={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function nt(it){return it===1?et:tt}_.getGlsl=nt,_.getVertexShaderSource=function(it){const at=nt(it);return`${at.version}
      precision highp float;
      ${at.attribute} vec3 position;
      ${at.attribute} vec2 textureCoord;

      ${at.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},_.getFragShaderPreamble=function(it){const at=nt(it);return`${at.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${at.varyingFrag} vec2 TexCoords;
    ${at.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},_.getDefaultFragShaderMain=function(it,at){return`
  void main() {
    int indices[${at}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${nt(it).output} = result;
  }
  `}},3891:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.VecGlslLib=void 0;const tt=et(8520);class nt extends tt.GlslLib{constructor(at){super(at)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const at=this.context.outputTextureLayout.shape.length,ot={add:"+=",sub:"-=",mul:"*=",div:"/="},st={};for(const dt in ot){const ht=`${dt}Vec`;let ct="";for(let ft=0;ft<at;++ft)ct+=`
          dest[${ft}] ${ot[dt]} src[${ft}];
          `;const ut=`
        void ${ht}(int src[${at}], out int dest[${at}]) {
          ${ct}
        }
        `;st[ht]=new tt.GlslLibRoutine(ut)}return st}copyVec(){const at=this.context.outputTextureLayout.shape.length;let ot="";for(let dt=0;dt<at;++dt)ot+=`
        dest[${dt}] = src[${dt}];
        `;const st=`
      void copyVec(int src[${at}], out int dest[${at}]) {
        ${ot}
      }
      `;return{copyVec:new tt.GlslLibRoutine(st)}}setVecItem(){const at=this.context.outputTextureLayout.shape.length;let ot=`
        if(index < 0)
            index =${at} + index;
        if (index == 0)
            m[0] = value;
        `;for(let dt=1;dt<at-1;++dt)ot+=`
        else if (index == ${dt})
            m[${dt}] = value;
            `;ot+=`
        else
            m[${at-1}] = value;
        `;const st=`
      void setVecItem(out int m[${at}], int index, int value) {
        ${ot}
      }
        `;return{setVecItem:new tt.GlslLibRoutine(st)}}getVecItem(){const at=this.context.outputTextureLayout.shape.length;let ot=`
        if(index < 0)
            index = ${at} + index;
        if (index == 0)
            return m[0];
      `;for(let dt=1;dt<at-1;++dt)ot+=`
        else if (index == ${dt})
            return m[${dt}];
      `;ot+=`
        else
            return m[${at-1}];
        `;const st=`
      int getVecItem(int m[${at}], int index) {
        ${ot}
      }
    `;return{getVecItem:new tt.GlslLibRoutine(st)}}}_.VecGlslLib=nt},8316:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLInferenceHandler=void 0;const tt=et(6231),nt=et(9162),it=et(2517),at=et(2403),ot=et(7019),st=et(8710),dt=et(5611),ht=et(4057),ct=et(2039);_.WebGLInferenceHandler=class{constructor(ut){this.session=ut,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(ut,ft){return(0,ht.calculateTextureWidthAndHeight)(this.session.layoutStrategy,ut,ft)}executeProgram(ut,ft){if(ft.length<ut.inputNames.length)throw new Error(`Input size mustn't be less than ${ut.inputNames.length}.`);if(ut.inputNames.length!==ut.inputTypes.length)throw new Error("input names size does not match input types");const gt=[];for(let xt=0;xt<ut.inputNames.length;++xt)gt[xt]=this.getOrCreateTextureData(ft[xt],ut.inputTypes[xt]);const mt=((xt,St)=>{const Tt=St.map(Ct=>`${Ct.unpackedShape.join(",")};${Ct.width}x${Ct.height}`).join("_");let wt=xt.name;return xt.cacheHint&&(wt+="["+xt.cacheHint+"]"),wt+=":"+Tt,wt})(ut,gt);let vt=this.session.programManager.getArtifact(mt);const yt=vt?vt.programInfo:typeof ut.get=="function"?ut.get():ut,bt=(0,ht.createTextureLayoutFromTextureType)(this.session.layoutStrategy,yt.output.dims,yt.output.textureType),_t=this.createTextureData(bt,yt.output.type);return vt||(vt=this.session.programManager.build(yt,gt,_t),this.session.programManager.setArtifact(mt,vt)),this.runProgram(vt,gt,_t),_t}run(ut,ft){return this.executeProgram(ut,ft).tensor}runProgram(ut,ft,gt){for(let mt=0;mt<ft.length;++mt)if(!!ft[mt].isPacked!=(ut.programInfo.inputTypes[mt]===ct.TextureType.packed))throw new Error(`input[${mt}] property packed inconsistent`);if(!!gt.isPacked!=(ut.programInfo.output.textureType===ct.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(ut,ft,gt)}getOrCreateTextureData(ut,ft){let gt=this.getTextureData(ut.dataId,ft===ct.TextureType.packed);if(!gt&&(gt=this.getTextureData(ut.dataId,ft!==ct.TextureType.packed),gt))return ft===ct.TextureType.packed?this.pack(gt):this.unpack(gt);if(!gt){const mt=(0,ht.createTextureLayoutFromTextureType)(this.session.layoutStrategy,ut.dims,ft);if(ft===ct.TextureType.packedLastDimension){const bt=ut.dims;if(bt.length===4){const _t=[bt[0],Math.ceil(bt[1]*bt[2]*bt[3]/4)],xt=(0,ht.createTextureLayoutFromTextureType)(this.session.layoutStrategy,_t,ft);let St=ut.numberData;if(bt[1]*bt[2]*bt[3]%4!=0){const Tt=bt[0],wt=bt[1]*bt[2]*bt[3],Ct=Math.ceil(wt*1/4)*4;St=new Float32Array(Tt*Ct);for(let Et=0;Et<Tt;++Et){const At=Et*wt,Pt=Et*Ct+Et%1*wt;St.set(ut.numberData.subarray(At,At+wt),Pt)}}return this.createTextureData(xt,ut.type,St,ut,1)}}if(ft===ct.TextureType.packed){const vt=(0,ht.createTextureLayoutFromShape)(this.session.layoutStrategy,ut.dims,1,[],{reverseWH:!0}),yt=this.createTextureData(vt,ut.type,ut.numberData,ut,1);gt=this.pack(yt)}else gt=this.createTextureData(mt,ut.type,ut.numberData,ut,1)}return gt}createTextureDataFromLayoutBindTensor(ut,ft,gt,mt){return this.createTextureData(ut,ft,gt,mt,1)}createTextureData(ut,ft,gt,mt,vt){tt.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(ut)}]`);const yt=this.session.textureManager.createTextureFromLayout(ft,ut,gt,vt);return this.createTextureDataFromTexture(ut,ft,yt,mt)}reshapeUnpacked(ut,ft){const gt=this.getOrCreateTextureData(ut,ct.TextureType.unpacked),mt={channels:gt.channels,height:gt.height,width:gt.width,shape:ft.length!==0?ft:[1],strides:it.ShapeUtil.computeStrides(ft),unpackedShape:ft};return this.createTextureDataFromTexture(mt,ut.type,gt.texture).tensor}reshapePacked(ut,ft){const gt=this.getOrCreateTextureData(ut,ct.TextureType.packed);if((0,ot.isReshapeCheap)(ut.dims,ft)){const _t={channels:gt.channels,height:gt.height,width:gt.width,shape:ft.length!==0?ft:[1],strides:it.ShapeUtil.computeStrides(ft),unpackedShape:ft,isPacked:!0};return this.createTextureDataFromTexture(_t,ut.type,gt.texture).tensor}const mt=(0,ot.processDims3D)(ut.dims),vt=(0,ot.processDims3D)(ft),yt=this.reshapePacked(ut,mt),bt=this.run((0,ot.createPackedReshape3DProgramInfoLoader)(this,yt,vt),[yt]);return this.reshapePacked(bt,ft)}cast(ut,ft){const gt=this.getOrCreateTextureData(ut,ct.TextureType.unpacked);return this.createTextureDataFromTexture(gt,ft,gt.texture).tensor}createTextureDataFromTexture(ut,ft,gt,mt,vt){const yt=Object.assign(Object.assign({},ut),{tensor:mt||new nt.Tensor(ut.unpackedShape,ft,bt=>this.readTexture(yt),async bt=>this.readTextureAsync(yt),void 0,vt),texture:gt});return this.setTextureData(yt.tensor.dataId,yt,ut.isPacked),yt}getTextureData(ut,ft=!1){return this.session.isInitializer(ut)?this.session.getTextureData(ut,ft):ft?this.packedTextureDataCache.get(ut):this.unpackedTextureDataCache.get(ut)}setTextureData(ut,ft,gt=!1){this.session.isInitializer(ut)?this.session.setTextureData(ut,ft,gt):(gt?this.packedTextureDataCache:this.unpackedTextureDataCache).set(ut,ft)}isTextureLayoutCached(ut,ft=!1){return!!this.getTextureData(ut.dataId,ft)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(ut=>this.session.textureManager.releaseTexture(ut)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(ut=>this.session.textureManager.releaseTexture(ut)),this.unpackedTextureDataCache=new Map}readTexture(ut){return ut.isPacked?this.readTexture(this.unpack(ut)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(ut,ut.tensor.type,ut.channels):this.session.textureManager.readUint8TextureAsFloat((0,st.encodeAsUint8)(this,ut))}async readTextureAsync(ut){return ut.isPacked?this.readTextureAsync(this.unpack(ut)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(ut,ut.tensor.type,ut.channels):this.session.textureManager.readUint8TextureAsFloat((0,st.encodeAsUint8)(this,ut))}pack(ut){return this.executeProgram((0,at.createPackProgramInfoLoader)(this,ut.tensor),[ut.tensor])}unpack(ut){return this.executeProgram((0,dt.createUnpackProgramInfoLoader)(this,ut.tensor),[ut.tensor])}}},1640:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(Nt,Vt,zt,Xt){Xt===void 0&&(Xt=zt);var Wt=Object.getOwnPropertyDescriptor(Vt,zt);Wt&&!("get"in Wt?!Vt.__esModule:Wt.writable||Wt.configurable)||(Wt={enumerable:!0,get:function(){return Vt[zt]}}),Object.defineProperty(Nt,Xt,Wt)}:function(Nt,Vt,zt,Xt){Xt===void 0&&(Xt=zt),Nt[Xt]=Vt[zt]}),nt=this&&this.__setModuleDefault||(Object.create?function(Nt,Vt){Object.defineProperty(Nt,"default",{enumerable:!0,value:Vt})}:function(Nt,Vt){Nt.default=Vt}),it=this&&this.__importStar||function(Nt){if(Nt&&Nt.__esModule)return Nt;var Vt={};if(Nt!=null)for(var zt in Nt)zt!=="default"&&Object.prototype.hasOwnProperty.call(Nt,zt)&&tt(Vt,Nt,zt);return nt(Vt,Nt),Vt};Object.defineProperty(_,"__esModule",{value:!0}),_.WEBGL_OP_RESOLVE_RULES=void 0;const at=et(2898),ot=it(et(7839)),st=et(4196),dt=et(2069),ht=et(8138),ct=et(9663),ut=et(5193),ft=et(7992),gt=et(1253),mt=et(4776),vt=et(6572),yt=et(3346),bt=et(5623),_t=et(2870),xt=et(2143),St=et(4939),Tt=et(718),wt=et(2268),Ct=et(8117),Et=et(2278),At=et(5524),Pt=et(5975),Rt=et(3933),It=et(6558),Mt=et(5723),Ot=et(3738),$t=it(et(4909)),Lt=et(8428),kt=et(9793);_.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",$t.abs],["Acos","","7+",$t.acos],["Add","","7+",ot.add],["And","","7+",ot.and],["Asin","","7+",$t.asin],["Atan","","7+",$t.atan],["AveragePool","","7+",xt.averagePool,xt.parseAveragePoolAttributes],["BatchNormalization","","7+",at.batchNormalization,at.parseBatchNormalizationAttributes],["Cast","","6+",st.cast,st.parseCastAttributes],["Ceil","","6+",$t.ceil],["Clip","","6-10",$t.clip,$t.parseClipAttributes],["Clip","","11+",$t.clipV11],["Concat","","4+",dt.concat,dt.parseConcatAttributes],["Conv","","1+",ht.conv,ht.parseConvAttributes],["ConvTranspose","","1+",ct.convTranspose,ct.parseConvTransposeAttributes],["Cos","","7+",$t.cos],["Div","","7+",ot.div],["Dropout","","7+",$t.identity],["DepthToSpace","","1+",ut.depthToSpace,ut.parseDepthToSpaceAttributes],["Equal","","7+",ot.equal],["Elu","","6+",$t.elu,$t.parseEluAttributes],["Exp","","6+",$t.exp],["Flatten","","1+",ft.flatten,ft.parseFlattenAttributes],["Floor","","6+",$t.floor],["FusedConv","com.microsoft","1+",ht.conv,ht.parseConvAttributes],["Gather","","1+",gt.gather,gt.parseGatherAttributes],["Gemm","","7-10",mt.gemm,mt.parseGemmAttributesV7],["Gemm","","11+",mt.gemm,mt.parseGemmAttributesV11],["GlobalAveragePool","","1+",xt.globalAveragePool,xt.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",xt.globalMaxPool],["Greater","","7+",ot.greater],["Identity","","1+",$t.identity],["ImageScaler","","1+",vt.imageScaler,vt.parseImageScalerAttributes],["InstanceNormalization","","6+",yt.instanceNormalization,yt.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",$t.leakyRelu,$t.parseLeakyReluAttributes],["Less","","7+",ot.less],["Log","","6+",$t.log],["MatMul","","1+",bt.matMul,bt.parseMatMulAttributes],["MaxPool","","1+",xt.maxPool,xt.parseMaxPoolAttributes],["Mul","","7+",ot.mul],["Neg","","6+",$t.neg],["Not","","1+",$t.not],["Or","","7+",ot.or],["Pad","","2-10",_t.padV2,_t.parsePadAttributesV2],["Pad","","11+",_t.padV11,_t.parsePadAttributesV11],["Pow","","7+",ot.pow],["PRelu","","7+",ot.pRelu],["ReduceLogSum","","1+",St.reduceLogSum,St.parseReduceAttributes],["ReduceMax","","1+",St.reduceMax,St.parseReduceAttributes],["ReduceMean","","1+",St.reduceMean,St.parseReduceAttributes],["ReduceMin","","1+",St.reduceMin,St.parseReduceAttributes],["ReduceProd","","1+",St.reduceProd,St.parseReduceAttributes],["ReduceSum","","1-12",St.reduceSum,St.parseReduceAttributes],["ReduceSumSquare","","1+",St.reduceLogSumSquare,St.parseReduceAttributes],["Relu","","6+",$t.relu],["Reshape","","5+",Tt.reshape],["Resize","","10",wt.resize,wt.parseResizeAttributesV10],["Resize","","11+",wt.resize,wt.parseResizeAttributesV11],["Shape","","1+",Ct.shape],["Sigmoid","","6+",$t.sigmoid],["Sin","","7+",$t.sin],["Slice","","10+",Et.sliceV10],["Slice","","1-9",Et.slice,Et.parseSliceAttributes],["Softmax","","1-12",At.softmax,At.parseSoftmaxAttributes],["Softmax","","13+",At.softmaxV13,At.parseSoftmaxAttributesV13],["Split","","2-12",Pt.split,Pt.parseSplitAttributes],["Sqrt","","6+",$t.sqrt],["Squeeze","","1-12",Rt.squeeze,Rt.parseSqueezeAttributes],["Squeeze","","13+",Rt.squeezeV13],["Sub","","7+",ot.sub],["Sum","","6+",It.sum],["Tan","","7+",$t.tan],["Tanh","","6+",$t.tanh],["Tile","","6+",Mt.tile],["Transpose","","1+",Ot.transpose,Ot.parseTransposeAttributes],["Upsample","","7-8",kt.upsample,kt.parseUpsampleAttributesV7],["Upsample","","9",kt.upsample,kt.parseUpsampleAttributesV9],["Unsqueeze","","1-12",Lt.unsqueeze,Lt.parseUnsqueezeAttributes],["Unsqueeze","","13+",Lt.unsqueezeV13],["Xor","","7+",ot.xor]]},2898:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseBatchNormalizationAttributes=_.batchNormalization=void 0;const tt=et(246),nt=et(5060),it=et(2039),at={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]};_.batchNormalization=(dt,ht,ct)=>(st(ht),[dt.run(Object.assign(Object.assign({},at),{cacheHint:ct.cacheKey,get:()=>ot(dt,ht,ct)}),ht)]),_.parseBatchNormalizationAttributes=dt=>{const ht=dt.attributes.getFloat("epsilon",1e-5),ct=dt.attributes.getFloat("momentum",.9),ut=dt.attributes.getInt("spatial",1);return(0,tt.createAttributeWithCacheKey)({epsilon:ht,momentum:ct,spatial:ut})};const ot=(dt,ht,ct)=>{const ut=(0,nt.getGlsl)(dt.session.backend.glContext.version),ft=ht[0].dims.length,[gt,mt]=dt.calculateTextureWidthAndHeight(ht[1].dims,it.TextureType.unpacked),vt=`
  float process(int[${ft}] indices) {
    vec2 position = offsetToCoords(indices[1], ${gt}, ${mt});
    float scale = getColorAsFloat(${ut.texture2D}(Scale, position));
    float mean = getColorAsFloat(${ut.texture2D}(Mean, position));
    float variance = getColorAsFloat(${ut.texture2D}(Variance, position));
    float b = getColorAsFloat(${ut.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${ct.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},at),{output:{dims:ht[0].dims,type:ht[0].type,textureType:it.TextureType.unpacked},shaderSource:vt})},st=dt=>{if(!dt||dt.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const ht=dt[0],ct=dt[1],ut=dt[2],ft=dt[3],gt=dt[4];if(ht.dims.length<3||ct.dims.length!==1||ut.dims.length!==1||ft.dims.length!==1||gt.dims.length!==1)throw new Error("invalid input shape.");if(ct.dims[0]!==ht.dims[1]||ut.dims[0]!==ht.dims[1]||ft.dims[0]!==ht.dims[1]||gt.dims[0]!==ht.dims[1])throw new Error("invalid input shape.");if(ht.type!=="float32"&&ht.type!=="float64"||ct.type!=="float32"&&ct.type!=="float64"||ut.type!=="float32"&&ut.type!=="float64"||ft.type!=="float32"&&ft.type!=="float64"||gt.type!=="float32"&&gt.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.xor=_.sub=_.pRelu=_.pow=_.or=_.mul=_.less=_.greater=_.equal=_.div=_.and=_.add=_.glslPRelu=_.glslPow=_.glslXor=_.glslOr=_.glslAnd=_.glslLess=_.glslGreater=_.glslEqual=_.glslSub=_.glslMul=_.glslDiv=_.glslAdd=void 0;const tt=et(2517),nt=et(8520),it=et(5060),at=et(2039);function ot(){const St="add_";return{body:`
  float ${St}(float a, float b) {
    return a + b;
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:St,type:nt.FunctionType.ValueBased}}function st(){const St="div_";return{body:`
  float ${St}(float a, float b) {
    return a / b;
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:St,type:nt.FunctionType.ValueBased}}function dt(){const St="mul_";return{body:`
  float ${St}(float a, float b) {
    return a * b;
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:St,type:nt.FunctionType.ValueBased}}function ht(){const St="sub_";return{body:`
  float ${St}(float a, float b) {
    return a - b;
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:St,type:nt.FunctionType.ValueBased}}function ct(){const St="equal_";return{body:`
  float ${St}(float a, float b) {
    return float(a == b);
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:St,type:nt.FunctionType.ValueBased}}function ut(){const St="greater_";return{body:`
  float ${St}(float a, float b) {
    return float(a > b);
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:St,type:nt.FunctionType.ValueBased}}function ft(){const St="less_";return{body:`
  float ${St}(float a, float b) {
    return float(a < b);
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:St,type:nt.FunctionType.ValueBased}}function gt(){const St="and_";return{body:`
  float ${St}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:St,type:nt.FunctionType.ValueBased}}function mt(){const St="or_";return{body:`
  float ${St}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:St,type:nt.FunctionType.ValueBased}}function vt(){const St="xor_";return{body:`
  float ${St}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:St,type:nt.FunctionType.ValueBased}}function yt(){return function(St){const Tt=`${St}_`;return{body:`
  float ${Tt}(float a, float b) {
    return ${St}(a, b);
  }
  vec4 ${Tt}(vec4 v1, vec4 v2) {
    return ${St}(v1, v2);
  }
  `,name:Tt,type:nt.FunctionType.ValueBased}}("pow")}function bt(){const St="prelu_";return{body:`
  float ${St}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${St}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:St,type:nt.FunctionType.ValueBased}}_.glslAdd=ot,_.glslDiv=st,_.glslMul=dt,_.glslSub=ht,_.glslEqual=ct,_.glslGreater=ut,_.glslLess=ft,_.glslAnd=gt,_.glslOr=mt,_.glslXor=vt,_.glslPow=yt,_.glslPRelu=bt;const _t=(St,Tt,wt,Ct=Tt[0].type,Et)=>{const At=St.session.pack?at.TextureType.packed:at.TextureType.unpacked;return{name:wt.name,inputNames:["A","B"],inputTypes:[At,At],cacheHint:Et,get:()=>xt(St,Tt,wt,Ct)}},xt=(St,Tt,wt,Ct=Tt[0].type)=>{const Et=St.session.pack?at.TextureType.packed:at.TextureType.unpacked,At=!tt.ShapeUtil.areEqual(Tt[0].dims,Tt[1].dims);let Pt=Tt[0].dims;const Rt=St.session.pack;if(At){const Ot=tt.BroadcastUtil.calcShape(Tt[0].dims,Tt[1].dims,!1);if(!Ot)throw new Error("Can't perform binary op on the given tensors");Pt=Ot;const $t=Pt.length,Lt=Tt[0].dims.length!==0?Tt[0].dims.length:1,kt=Tt[1].dims.length!==0?Tt[1].dims.length:1,Nt=Tt[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Vt=Tt[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",zt=(0,it.getGlsl)(St.session.backend.glContext.version),Xt=Rt?`
      ${wt.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${wt.name}(a, b);
        ${zt.output} = result;
      }`:`
      ${wt.body}
      float process(int indices[${$t}]) {
        int aindices[${Lt}];
        int bindices[${kt}];
        ${Nt}
        ${Vt}
        return ${wt.name}(_A(aindices), _B(bindices));
      }`;return{name:wt.name,inputNames:["A","B"],inputTypes:[Et,Et],output:{dims:Pt,type:Ct,textureType:Et},shaderSource:Xt,hasMain:Rt}}const It=(0,it.getGlsl)(St.session.backend.glContext.version),Mt=`
    ${wt.body}
    void main() {
      vec4 v1 = ${It.texture2D}(A, TexCoords);
      vec4 v2 = ${It.texture2D}(B, TexCoords);
      vec4 result = ${wt.name}(v1, v2);
      ${It.output} = result;
    }
    `;return{name:wt.name,inputNames:["A","B"],inputTypes:[Et,Et],output:{dims:Tt[0].dims,type:Ct,textureType:Et},shaderSource:Mt,hasMain:!0}};_.add=(St,Tt)=>[St.run(_t(St,Tt,ot()),Tt)],_.and=(St,Tt)=>[St.run(_t(St,Tt,gt(),"bool"),Tt)],_.div=(St,Tt)=>[St.run(_t(St,Tt,st()),Tt)],_.equal=(St,Tt)=>[St.run(_t(St,Tt,ct(),"bool"),Tt)],_.greater=(St,Tt)=>[St.run(_t(St,Tt,ut(),"bool"),Tt)],_.less=(St,Tt)=>[St.run(_t(St,Tt,ft(),"bool"),Tt)],_.mul=(St,Tt)=>[St.run(_t(St,Tt,dt()),Tt)],_.or=(St,Tt)=>[St.run(_t(St,Tt,mt(),"bool"),Tt)],_.pow=(St,Tt)=>[St.run(_t(St,Tt,yt()),Tt)],_.pRelu=(St,Tt)=>[St.run(_t(St,Tt,bt()),Tt)],_.sub=(St,Tt)=>[St.run(_t(St,Tt,ht()),Tt)],_.xor=(St,Tt)=>[St.run(_t(St,Tt,vt(),"bool"),Tt)]},4196:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseCastAttributes=_.cast=void 0;const tt=et(2517);_.cast=(it,at,ot)=>(nt(at),[it.cast(at[0],ot)]),_.parseCastAttributes=it=>tt.ProtoUtil.tensorDataTypeFromProto(it.attributes.getInt("to"));const nt=it=>{if(!it||it.length!==1)throw new Error("Cast requires 1 input.");if(it[0].type==="string")throw new Error("Invalid input type.")}},1163:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedConcatProgramInfoLoader=void 0;const tt=et(5060),nt=et(2039),it=et(9390),at=et(2827);_.createPackedConcatProgramInfoLoader=(st,dt,ht)=>{const ct=(ut=dt.length,ft=ht.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:ut},(gt,mt)=>`X${mt}`),inputTypes:Array(ut).fill(nt.TextureType.packed),cacheHint:ft});var ut,ft;return Object.assign(Object.assign({},ct),{get:()=>((gt,mt,vt,yt)=>{const bt=vt[0].dims.slice();if(yt>=bt.length||yt<-1*bt.length)throw new Error("axis specified for concat doesn't match input dimensionality");yt<0&&(yt=bt.length+yt);const _t=bt.slice(0);for(let Nt=1;Nt<vt.length;Nt++){const Vt=vt[Nt].dims.slice();for(let zt=0;zt<bt.length;zt++)if(zt===yt)_t[yt]+=Vt[zt];else if(bt[zt]!==Vt[zt])throw new Error("non concat dimensions must match")}const xt=_t.length,St=(0,at.getChannels)("coords",xt),Tt=(0,it.getCoordsDataType)(xt),wt=(0,at.unpackFromChannel)(),Ct=vt.map(Nt=>Nt.dims),Et=(0,it.getGlChannels)(xt),At=new Array(Ct.length-1);At[0]=Ct[0][yt];for(let Nt=1;Nt<At.length;Nt++)At[Nt]=At[Nt-1]+Ct[Nt][yt];const Pt=Et[yt],Rt=Et.slice(-2),It=Et.join();let Mt=`if (${Pt} < ${At[0]}) {
        return getChannel(
            getX0(${It}), vec2(${Rt.join()}));
        }`;for(let Nt=1;Nt<At.length;Nt++){const Vt=At[Nt-1];Mt+=`
            if (${Pt} < ${At[Nt]}  && ${Pt} >= ${At[Nt-1]}) {
              return getChannel(
                getX${Nt}(${ot(Et,Pt,Vt)}),
                vec2(${ot(Rt,Pt,Vt)}));
            }`}const Ot=At.length,$t=At[At.length-1];Mt+=`
            return getChannel(
              getX${Ot}(${ot(Et,Pt,$t)}),
              vec2(${ot(Rt,Pt,$t)}));`;const Lt=(0,tt.getGlsl)(gt.session.backend.glContext.version),kt=`
          ${wt}
          float getValue(${Et.map(Nt=>"int "+Nt)}) {
            ${Mt}
          }

          void main() {
            ${Tt} coords = getOutputCoords();
            int lastDim = coords.${Et[xt-1]};
            coords.${Et[xt-1]} = coords.${Et[xt-2]};
            coords.${Et[xt-2]} = lastDim;

            vec4 result = vec4(getValue(${St}), 0., 0., 0.);

            ${St[xt-1]} = ${St[xt-1]} + 1;
            if (${St[xt-1]} < ${_t[xt-1]}) {
              result.g = getValue(${St});
            }

            ${St[xt-2]} = ${St[xt-2]} + 1;
            if (${St[xt-2]} < ${_t[xt-2]}) {
              result.a = getValue(${St});
            }

            ${St[xt-1]} = ${St[xt-1]} - 1;
            if (${St[xt-2]} < ${_t[xt-2]} &&
                ${St[xt-1]} < ${_t[xt-1]}) {
              result.b = getValue(${St});
            }
            ${Lt.output} = result;
          }
        `;return Object.assign(Object.assign({},mt),{output:{dims:_t,type:vt[0].type,textureType:nt.TextureType.packed},shaderSource:kt,hasMain:!0})})(st,ct,dt,ht.axis)})};const ot=(st,dt,ht)=>{const ct=st.indexOf(dt);return st.map((ut,ft)=>ft===ct?`${ut} - ${ht}`:ut).join()}},2069:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConcatAttributes=_.concat=void 0;const tt=et(246),nt=et(2039),it=et(1163);_.concat=(ut,ft,gt)=>(ct(ft),ut.session.pack&&ft[0].dims.length>1?[ut.run((0,it.createPackedConcatProgramInfoLoader)(ut,ft,gt),ft)]:[ut.run(at(ut,ft,gt),ft)]);const at=(ut,ft,gt)=>{const mt=(vt=ft.length,yt=gt.cacheKey,{name:"Concat",inputNames:Array.from({length:vt},(bt,_t)=>`X${_t}`),inputTypes:Array(vt).fill(nt.TextureType.unpacked),cacheHint:yt});var vt,yt;return Object.assign(Object.assign({},mt),{get:()=>((bt,_t,xt,St)=>{const Tt=xt[0].dims.slice();if(St>=Tt.length||St<-1*Tt.length)throw new Error("axis specified for concat doesn't match input dimensionality");St<0&&(St=Tt.length+St);const wt=Tt.slice(0);for(let It=1;It<xt.length;It++){const Mt=xt[It].dims.slice();for(let Ot=0;Ot<Tt.length;Ot++)if(Ot===St)wt[St]+=Mt[Ot];else if(Tt[Ot]!==Mt[Ot])throw new Error("non concat dimensions must match")}const Ct=wt.length,Et=new Array(xt.length);let At=0;for(let It=0;It<Et.length;++It)At+=xt[It].dims[St],Et[It]=At;let Pt="";Pt=xt.length<5?ot(Et):st(Et);const Rt=`
        ${dt(xt.length,Ct)}
        ${ht(Et)}
        ${Pt}
        float process(int indices[${Ct}]) {
          int textureIndex = getTextureWhereDataResides (indices[${St}]);

          if(textureIndex != 0) {
            indices[${St}] = indices[${St}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},_t),{output:{dims:wt,type:xt[0].type,textureType:nt.TextureType.unpacked},shaderSource:Rt})})(0,mt,ft,gt.axis)})},ot=ut=>`int getTextureWhereDataResides(int index) {
      ${ut.map((ft,gt)=>`if(index<${ft}) {return ${gt};}
`).join("")}
    }`,st=ut=>ot(ut),dt=(ut,ft)=>{const gt=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${ft}]) {`];for(let mt=0;mt<ut;++mt)mt===0?gt.push(`	if (textureIndex == ${mt}) { return _X${mt}(indices); }`):mt===ut-1?gt.push(`	else { return _X${mt}(indices); }`):gt.push(`	else if (textureIndex == ${mt}) { return _X${mt}(indices); }`);return gt.push("	}"),gt.join(`
`)},ht=ut=>{const ft=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let gt=0;gt<ut.length;++gt)gt===0?ft.push(`	if (index == ${gt}) { return ${ut[gt]}; }`):gt===ut.length-1?ft.push(`	else { return ${ut[gt]}; }`):ft.push(`	else if (index == ${gt}) { return ${ut[gt]}; }`);return ft.push("	}"),ft.join(`
`)};_.parseConcatAttributes=ut=>(0,tt.createAttributeWithCacheKey)({axis:ut.attributes.getInt("axis")});const ct=ut=>{if(!ut||ut.length<1)throw new Error("too few inputs");const ft=ut[0].type,gt=ut[0].dims.length;if(ft==="string")throw new Error("string tensor is not supported yet");for(const mt of ut){if(mt.type!==ft)throw new Error("input tensors should be one type");if(mt.dims.length!==gt)throw new Error("input tensors should have the same shape")}}},4770:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createUnpackedGroupedConvProgramInfoLoader=void 0;const tt=et(6231),nt=et(5060),it=et(2039),at=et(8138),ot=et(2823);_.createUnpackedGroupedConvProgramInfoLoader=(st,dt,ht)=>{const ct=(ut=dt.length>2,ft=ht.cacheKey,{name:"GroupedConv",inputNames:ut?["X","W","Bias"]:["X","W"],inputTypes:ut?[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.unpacked],cacheHint:ft});var ut,ft;return Object.assign(Object.assign({},ct),{get:()=>((gt,mt,vt,yt)=>{const bt=mt.length>2?"value += getBias(output_channel);":"",_t=mt[0].dims.slice(),xt=mt[1].dims.slice(),St=xt[0]/yt.group;tt.Logger.verbose("GroupedConv",`autpPad:${yt.autoPad}, dilations:${yt.dilations}, group:${yt.group}, kernelShape:${yt.kernelShape}, pads:${yt.pads}, strides:${yt.strides}`);const Tt=(0,at.calculateOutputShape)(_t,xt,yt.dilations,yt.pads,yt.strides),wt=(0,nt.getGlsl)(gt.session.backend.glContext.version),{activationFunction:Ct,applyActivation:Et}=(0,ot.getActivationSnippet)(yt),At=`
  const ivec2 strides = ivec2(${yt.strides[0]}, ${yt.strides[1]});
  const ivec2 pads = ivec2(${yt.pads[0]}, ${yt.pads[1]});
  ${Ct}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${St};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${xt[1]}; wInChannel++) {
      int input_channel = group_id * ${xt[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${xt[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${yt.dilations[0]};

        if (xHeight < 0 || xHeight >= ${_t[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${xt[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${yt.dilations[1]};
          if (xWidth < 0 || xWidth >= ${_t[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${bt}
    ${Et}
    ${wt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},vt),{output:{dims:Tt,type:mt[0].type,textureType:it.TextureType.unpacked},shaderSource:At,hasMain:!0})})(st,dt,ct,ht)})}},1386:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.conv2DPacked=_.conv2DPackedPointwise=void 0;const tt=et(8138),nt=et(8555),it=et(708);_.conv2DPackedPointwise=(at,ot,st)=>{const dt=ot[0].dims,ht=ot[1].dims,ct=(0,tt.calculateOutputShape)(dt,ht,st.dilations,st.pads,st.strides),ut=at.reshapePacked(ot[0],[dt[1],dt[2]*dt[3]]),ft=at.reshapePacked(ot[1],[ht[0],ht[1]]),gt=ot.length>2?[ft,ut,ot[2]]:[ft,ut],mt=at.run((0,it.createPackedMatmulProgramInfoLoader)(at,gt,st),gt);return at.reshapePacked(mt,ct)},_.conv2DPacked=(at,ot,st)=>{const dt=ot[0].dims,ht=ot[1].dims,ct=(0,tt.calculateOutputShape)(dt,ht,st.dilations,st.pads,st.strides),ut=at.run((0,nt.createPackedIm2ColProgramInfoLoader)(at,ot[0],ot[1],ct,st),[ot[0]]),ft=at.reshapePacked(ot[1],[ht[0],ht[1]*ht[2]*ht[3]]),gt=ot.length===3?[ft,ut,ot[2]]:[ft,ut],mt=at.run((0,it.createPackedMatmulProgramInfoLoader)(at,gt,st),gt);return at.reshapePacked(mt,ct)}},9663:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConvTransposeAttributes=_.convTranspose=void 0;const tt=et(246),nt=et(5060),it=et(2039),at=et(2823),ot=(ft,gt,mt,vt,yt,bt)=>(ft-1)*gt+mt+(vt-1)*yt+1-bt,st=(ft,gt,mt,vt,yt)=>{const bt=Math.floor(ft/2);gt==="SAME_UPPER"?(mt[vt]=bt,mt[yt]=ft-bt):gt==="SAME_LOWER"&&(mt[vt]=ft-bt,mt[yt]=bt)};_.convTranspose=(ft,gt,mt)=>(ut(gt,mt),dt(ft,gt,mt));const dt=(ft,gt,mt)=>{const vt=ct(mt,gt);return[ht(ft,gt,vt)]},ht=(ft,gt,mt)=>ft.run(((vt,yt,bt)=>{const _t=(xt=yt.length>2,St=bt.cacheKey,{name:"ConvTranspose",inputNames:xt?["X","W","B"]:["X","W"],inputTypes:xt?[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.unpacked],cacheHint:St});var xt,St;return Object.assign(Object.assign({},_t),{get:()=>((Tt,wt,Ct,Et)=>{const At=wt.length>2?"getB(output_channel)":"0.0",Pt=wt[0].dims,Rt=wt[1].dims,It=Rt[1],Mt=Rt[0]/Et.group,Ot=[wt[0].dims[0],wt[1].dims[1]*Et.group,...Et.outputShape],$t=(0,nt.getGlsl)(Tt.session.backend.glContext.version),{activationFunction:Lt,applyActivation:kt}=(0,at.getActivationSnippet)(Et),Nt=`
  const ivec2 strides = ivec2(${Et.strides[0]}, ${Et.strides[1]});
  const ivec2 pads = ivec2(${Et.pads[0]}, ${Et.pads[1]});
  ${Lt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${It};
    int wOutChannel = output_channel - group_id * ${It};

    float value = ${At};
    for (int inChannelOffset = 0; inChannelOffset < ${Mt}; inChannelOffset++) {
      int input_channel = group_id * ${Mt} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Rt[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Rt[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${Et.dilations[0]}, wHOff * ${Et.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${Pt[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${Pt[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${kt}
    ${$t.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Ct),{output:{dims:Ot,type:wt[0].type,textureType:it.TextureType.unpacked},shaderSource:Nt,hasMain:!0})})(vt,yt,_t,bt)})})(ft,gt,mt),gt),ct=(ft,gt)=>{const mt=ft.kernelShape.slice();if(ft.kernelShape.length===0)for(let _t=2;_t<gt[1].dims.length;++_t)mt.push(gt[1].dims[_t]);const vt=ft.pads.slice(),yt=ft.outputShape.slice();((_t,xt,St,Tt,wt,Ct,Et,At)=>{const Pt=_t.length-2,Rt=At.length===0;for(let It=0;It<Pt;++It){const Mt=Rt?_t[It+2]*Ct[It]:At[It],Ot=ot(_t[It+2],Ct[It],wt[It],xt[It],St[It],Mt);st(Ot,Tt,wt,It,It+Pt),Rt&&At.push(Ct[It]*(_t[It+2]-1)+Et[It]+(xt[It]-1)*St[It]+1-wt[It]-wt[It+Pt])}})(gt[0].dims,mt,ft.dilations,ft.autoPad,vt,ft.strides,ft.outputPadding,yt);const bt=Object.assign({},ft);return Object.assign(bt,{kernelShape:mt,pads:vt,outputShape:yt,cacheKey:ft.cacheKey}),bt};_.parseConvTransposeAttributes=ft=>{const gt=ft.attributes,mt=(0,at.parseInternalActivationAttributes)(gt),vt=gt.getString("auto_pad","NOTSET"),yt=gt.getInts("dilations",[1,1]),bt=gt.getInt("group",1),_t=gt.getInts("kernel_shape",[]),xt=gt.getInts("output_padding",[0,0]),St=gt.getInts("output_shape",[]),Tt=gt.getInts("pads",[0,0,0,0]),wt=gt.getInts("strides",[1,1]);return(0,tt.createAttributeWithCacheKey)(Object.assign({autoPad:vt,dilations:yt,group:bt,kernelShape:_t,outputPadding:xt,outputShape:St,pads:Tt,strides:wt},mt))};const ut=(ft,gt)=>{if(!ft||ft.length!==2&&ft.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(ft[0].dims.length!==4||ft[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(ft[0].dims[1]!==ft[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const mt=ft[1].dims[1]*gt.group;if(ft.length===3&&(ft[2].dims.length!==1||ft[2].dims[0]!==mt))throw new Error("invalid bias");const vt=ft[0].dims.length-2;if(gt.dilations.length!==vt)throw new Error(`dilations should be ${vt}D`);if(gt.strides.length!==vt)throw new Error(`strides should be ${vt}D`);if(gt.pads.length!==2*vt)throw new Error(`pads should be ${2*vt}D`);if(gt.outputPadding.length!==vt)throw new Error(`output_padding should be ${vt}D`);if(gt.kernelShape.length!==0&&gt.kernelShape.length!==ft[1].dims.length-2)throw new Error("invalid kernel shape");if(gt.outputShape.length!==0&&gt.outputShape.length!==ft[0].dims.length-2)throw new Error("invalid output shape");if(ft[0].type!=="float32"||ft[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(ft.length===3&&ft[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConvAttributes=_.conv=_.calculateOutputShape=void 0;const tt=et(246),nt=et(2517),it=et(4770),at=et(1386),ot=et(9828),st=et(2823),dt=et(3248),ht=et(5623);_.calculateOutputShape=(vt,yt,bt,_t,xt)=>{const St=vt[0],Tt=vt.slice(2),wt=Tt.length,Ct=yt[0],Et=yt.slice(2).map((Pt,Rt)=>Pt+(Pt-1)*(bt[Rt]-1)),At=Tt.map((Pt,Rt)=>Pt+_t[Rt]+_t[Rt+wt]).map((Pt,Rt)=>Math.floor((Pt-Et[Rt]+xt[Rt])/xt[Rt]));return[St,Ct].concat(...At)},_.conv=(vt,yt,bt)=>(mt(yt,bt),ct(vt,yt,bt));const ct=(vt,yt,bt)=>{const _t=gt(bt,yt),xt=vt.session.pack,St=_t.kernelShape[0]===1&&_t.kernelShape[1]===1;return _t.group>1?[vt.run((0,it.createUnpackedGroupedConvProgramInfoLoader)(vt,yt,_t),yt)]:St&&xt?[ut(vt,yt,_t)]:xt&&yt[0].dims.length===4&&yt[0].dims[0]===1&&!St?[(0,at.conv2DPacked)(vt,yt,_t)]:[ft(vt,yt,_t)]},ut=(vt,yt,bt)=>{const _t=yt[0].dims,xt=yt[1].dims,St=(0,_.calculateOutputShape)(_t,xt,bt.dilations,bt.pads,bt.strides),Tt=vt.reshapeUnpacked(yt[0],[_t[1],_t[2]*_t[3]]),wt=vt.reshapeUnpacked(yt[1],[xt[0],xt[1]]),Ct=yt.length>2?[wt,Tt,yt[2]]:[wt,Tt],Et=vt.run((0,ht.createMatmulProgramInfoLoader)(Ct,bt),Ct);return vt.reshapeUnpacked(Et,St)},ft=(vt,yt,bt)=>{const _t=yt[0].dims,xt=yt[1].dims,St=(0,_.calculateOutputShape)(_t,xt,bt.dilations,bt.pads,bt.strides),Tt=vt.run((0,dt.createIm2ColProgramInfoLoader)(vt,yt[0],yt[1],St,bt),[yt[0]]),wt=yt.length===3?[Tt,yt[1],yt[2]]:[Tt,yt[1]];return vt.run((0,ot.createDotProductProgramInfoLoader)(vt,yt,St,bt),wt)},gt=(vt,yt)=>{const bt=vt.kernelShape.slice();if(vt.kernelShape.length===0)for(let St=2;St<yt[1].dims.length;++St)bt.push(yt[1].dims[St]);const _t=vt.pads.slice();nt.PoolConvUtil.adjustPadsBasedOnAutoPad(yt[0].dims,vt.strides,vt.dilations,bt,_t,vt.autoPad);const xt=Object.assign({},vt);return Object.assign(xt,{kernelShape:bt,pads:_t,cacheKey:vt.cacheKey}),xt};_.parseConvAttributes=vt=>{const yt=vt.attributes,bt=(0,st.parseInternalActivationAttributes)(yt),_t=yt.getString("auto_pad","NOTSET"),xt=yt.getInts("dilations",[1,1]),St=yt.getInt("group",1),Tt=yt.getInts("kernel_shape",[]),wt=yt.getInts("pads",[0,0,0,0]),Ct=yt.getInts("strides",[1,1]);return(0,tt.createAttributeWithCacheKey)(Object.assign({autoPad:_t,dilations:xt,group:St,kernelShape:Tt,pads:wt,strides:Ct},bt))};const mt=(vt,yt)=>{if(!vt||vt.length!==2&&vt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(vt[0].dims.length!==4||vt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(vt[0].dims[1]!==vt[1].dims[1]*yt.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(vt.length===3&&(vt[2].dims.length!==1||vt[1].dims[0]!==vt[2].dims[0]))throw new Error("invalid bias");const bt=vt[0].dims.length-2;if(yt.dilations.length!==bt)throw new Error(`dilations should be ${bt}D`);if(yt.strides.length!==bt)throw new Error(`strides should be ${bt}D`);if(yt.pads.length!==2*bt)throw new Error(`pads should be ${2*bt}D`);if(yt.kernelShape.length!==0&&yt.kernelShape.length!==vt[1].dims.length-2)throw new Error("invalid kernel shape");if(vt[0].type!=="float32"||vt[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(vt.length===3&&vt[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseDepthToSpaceAttributes=_.depthToSpace=void 0;const tt=et(3738);_.depthToSpace=(it,at,ot)=>{nt(at);const st=ot.blocksize,dt=st*st,ht=ot.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],ct=ot.mode==="DCR"?[at[0].dims[0],st,st,at[0].dims[1]/dt,at[0].dims[2],at[0].dims[3]]:[at[0].dims[0],at[0].dims[1]/dt,st,st,at[0].dims[2],at[0].dims[3]],ut=it.reshapeUnpacked(at[0],ct),ft={perm:ht,cacheKey:`${ht}`},[gt]=(0,tt.transpose)(it,[ut],ft),mt=[at[0].dims[0],at[0].dims[1]/dt,at[0].dims[2]*st,at[0].dims[3]*st];return[it.reshapeUnpacked(gt,mt)]},_.parseDepthToSpaceAttributes=it=>{const at=it.attributes.getInt("blocksize");if(at<1)throw new Error(`blocksize must be >= 1, but got : ${at} for DepthToSpace`);const ot=it.attributes.getString("mode","DCR");if(ot!=="DCR"&&ot!=="CRD")throw new Error(`unrecognized mode: ${ot} for DepthToSpace`);return{mode:ot,blocksize:at}};const nt=it=>{if(it.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${it.length}`);if(it[0].type==="string"||it[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createDotProductProgramInfoLoader=void 0;const tt=et(2517),nt=et(5060),it=et(2039),at=et(2823),ot=et(3248);_.createDotProductProgramInfoLoader=(st,dt,ht,ct)=>{const ut=((ft,gt)=>({name:"ConvDotProduct",inputNames:ft?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:ft?[it.TextureType.unpacked,it.TextureType.packedLastDimension,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.packedLastDimension],cacheKey:gt.activationCacheKey}))(dt.length>2,ct);return Object.assign(Object.assign({},ut),{get:()=>((ft,gt,mt,vt,yt)=>{const bt=mt[0].dims,_t=mt[1].dims,xt=[_t[0],Math.ceil(bt[1]*_t[2]*_t[3]/4)],St=(0,ot.calculateIm2ColDims)(bt,_t,vt),[Tt,wt]=ft.calculateTextureWidthAndHeight(xt,it.TextureType.packedLastDimension),Ct=tt.ShapeUtil.computeStrides(St),[Et,At]=ft.calculateTextureWidthAndHeight(St,it.TextureType.packedLastDimension),Pt=vt.length,Rt=mt.length<3?"0.0":"_B(b)",It=Math.ceil(bt[1]*_t[2]*_t[3]/4),{activationFunction:Mt,applyActivation:Ot}=(0,at.getActivationSnippet)(yt),$t=(0,nt.getGlsl)(ft.session.backend.glContext.version),Lt=`
${Mt}
float process(int indices[${Pt}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${Ct[0]} + im2col[1] * ${Ct[1]} + im2col[2] * ${Ct[2]};
  int kernelOffset = indices[1] * ${xt[1]};
  float value = ${Rt};
  for (int i = 0; i < ${It}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${Et}, ${At});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${Tt}, ${wt});
    value += dot(${$t.texture2D}(Im2Col, im2colCoords), ${$t.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${Ot}
  return value;
}`;return Object.assign(Object.assign({},gt),{output:{dims:vt,type:mt[0].type,textureType:it.TextureType.unpacked},shaderSource:Lt})})(st,ut,dt,ht,ct)})}},7992:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseFlattenAttributes=_.flatten=void 0;const tt=et(2517);_.flatten=(it,at,ot)=>{nt(at,ot);const st=tt.ShapeUtil.flattenShape(at[0].dims,ot);return[it.reshapeUnpacked(at[0],st)]},_.parseFlattenAttributes=it=>it.attributes.getInt("axis",1);const nt=(it,at)=>{if(!it||it.length!==1)throw new Error("Flatten requires 1 input.");const ot=it[0].dims.length;if(ot===0)throw new Error("scalar tensor is not supported.");if(at<-ot||at>ot)throw new Error("Invalid axis");if(it[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseInternalActivationAttributes=_.getActivationSnippet=void 0;const tt=et(2517),nt=et(4909);_.getActivationSnippet=function(it){let at;switch(it.activation){case"Relu":at=(0,nt.glslRelu)();break;case"Sigmoid":at=(0,nt.glslSigmoid)();break;case"Clip":at=(0,nt.glslClip)(it.clipMin,it.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const ot=at.name;return{activationFunction:at.body,applyActivation:`value = ${ot}_(value);`}},_.parseInternalActivationAttributes=it=>{const at=it.getString("activation","");if(at==="Clip"){const[ot,st]=it.getFloats("activation_params",[tt.MIN_CLIP,tt.MAX_CLIP]);return{activation:at,clipMax:st,clipMin:ot,activationCacheKey:`${at}:${ot},${st}`}}return{activation:at,activationCacheKey:at}}},1253:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseGatherAttributes=_.gather=void 0;const tt=et(246),nt=et(782),it=et(2517),at=et(2039);_.gather=(ht,ct,ut)=>(dt(ct,ut.axis),[ht.run(st(ht,ct,ut),ct)]),_.parseGatherAttributes=ht=>(0,tt.createAttributeWithCacheKey)({axis:ht.attributes.getInt("axis",0)});const ot={name:"Gather",inputNames:["A","B"],inputTypes:[at.TextureType.unpacked,at.TextureType.unpacked]},st=(ht,ct,ut)=>{const ft=Object.assign(Object.assign({},ot),{cacheHint:ut.cacheKey});return Object.assign(Object.assign({},ft),{get:()=>((gt,mt,vt,yt)=>{const bt=vt[0].dims.slice(),_t=vt[1].dims.slice(),xt=new Array(bt.length+_t.length-1);yt=it.ShapeUtil.normalizeAxis(yt,bt.length);const St=[];for(let wt=0;wt<xt.length;wt++)wt<yt?(xt[wt]=bt[wt],St.push(`inputIdx[${wt}] = outputIdx[${wt}];`)):wt<yt+_t.length?(xt[wt]=_t[wt-yt],St.push(`indexDataIdx[${wt-yt}] = outputIdx[${wt}];`)):(xt[wt]=bt[wt-_t.length+1],St.push(`inputIdx[${wt-_t.length+1}] = outputIdx[${wt}];`));const Tt=`
      float process(int outputIdx[${xt.length||1}]) {
        int inputIdx[${bt.length}];
        int indexDataIdx[${_t.length||1}];
        indexDataIdx[0] = 0;
        ${St.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${yt}] = idx < 0 ? idx + ${bt[yt]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},mt),{output:{dims:xt,type:vt[0].type,textureType:at.TextureType.unpacked},shaderSource:Tt})})(0,ft,ct,ut.axis)})},dt=(ht,ct)=>{if(!ht||ht.length!==2)throw new Error("Gather requires 2 inputs.");const ut=ht[0].dims.length;if(ut<1)throw new Error("Invalid input shape.");if(ct<-ut||ct>ut-1)throw new Error("Invalid axis.");if(nt.NUMBER_TYPES.indexOf(ht[0].type)===-1)throw new Error("Invaid input type.");if(ht[1].type!=="int32"&&ht[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseGemmAttributesV11=_.parseGemmAttributesV7=_.gemm=void 0;const tt=et(246),nt=et(2517),it=et(2039);_.gemm=(ht,ct,ut)=>(dt(ct,ut),[ht.run(ot(ct,ut),ct)]);const at=(ht,ct)=>{const ut=ht.attributes.getInt("transA",0)!==0,ft=ht.attributes.getInt("transB",0)!==0,gt=ht.attributes.getFloat("alpha",1),mt=ht.attributes.getFloat("beta",1);return(0,tt.createAttributeWithCacheKey)({transA:ut,transB:ft,alpha:gt,beta:mt,isOptionalC:ct})};_.parseGemmAttributesV7=ht=>at(ht,!1),_.parseGemmAttributesV11=ht=>at(ht,!0);const ot=(ht,ct)=>{const ut={name:"Gemm",inputNames:ht.length===3?["A","B","C"]:["A","B"],inputTypes:ht.length===3?[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.unpacked],key:ct.cacheKey};return Object.assign(Object.assign({},ut),{get:()=>st(ut,ht,ct)})},st=(ht,ct,ut)=>{const ft=ct[0].dims.slice(),gt=ct[1].dims.slice(),[mt,vt]=nt.GemmUtil.getShapeOfGemmResult(ft,ut.transA,gt,ut.transB,ct.length===3?ct[2].dims:void 0),yt=[mt,vt];if(!yt)throw new Error("Can't use gemm on the given tensors");let bt=ft[ft.length-1],_t="";ut.transA&&(bt=ft[0]),ut.transA&&ut.transB?_t="value += _A_T(a) * _B_T(b);":ut.transA&&!ut.transB?_t="value += _A_T(a) * _B(b);":!ut.transA&&ut.transB?_t="value += _A(a) * _B_T(b);":ut.transA||ut.transB||(_t="value += _A(a) * _B(b);");const xt=yt.length,St=`
      float process(int indices[${xt}]) {
          int a[${xt}];
          int b[${xt}];
          ${ct.length===3?`int c[${ct[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${ct.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${bt}; ++k) {
              a[${xt-1}] = k;
              b[${xt-2}] = k;
              ${_t}
          }

          value = value * alpha;
          ${ct.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},ht),{output:{dims:yt,type:ct[0].type,textureType:it.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:ut.alpha},{name:"beta",type:"float",data:ut.beta}],shaderSource:St})},dt=(ht,ct)=>{if(!ht)throw new Error("Input is missing");if(ct.isOptionalC&&(ht.length<2||ht.length>3))throw new Error("Invaid input shape.");if(!ct.isOptionalC&&ht.length!==3)throw new Error("Gemm requires 3 inputs");if(ht.length===3&&ht[2].dims.length!==1&&ht[2].dims.length!==2)throw new Error("Invalid input shape of C");if(ht[0].type!=="float32"&&ht[0].type!=="float64"||ht[1].type!=="float32"&&ht[1].type!=="float64"||ht.length===3&&ht[2].type!=="float32"&&ht[2].type!=="float64")throw new Error("Invalid input type.");if(ht[0].type!==ht[1].type||ht.length===3&&ht[0].type!==ht[2].type)throw new Error("Input types are mismatched")}},8555:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedIm2ColProgramInfoLoader=void 0;const tt=et(5060),nt=et(2039),it=et(2827);_.createPackedIm2ColProgramInfoLoader=(at,ot,st,dt,ht)=>{const ct=(ut=ht.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[nt.TextureType.packed],cacheHint:ut});var ut;return Object.assign(Object.assign({},ct),{get:()=>((ft,gt,mt,vt,yt,bt)=>{const _t=mt.dims,xt=vt.dims,St=yt.length,Tt=[xt[1]*xt[2]*xt[3],yt[2]*yt[3]],wt=xt[2]*xt[3],Ct=(0,it.unpackFromChannel)(),Et=(0,tt.getGlsl)(ft.session.backend.glContext.version);let At="";for(let Rt=0;Rt<=1;Rt++)for(let It=0;It<=1;It++)At+=`
            blockIndex = rc.x + ${It};
            pos = rc.y + ${Rt};

            if(blockIndex < ${Tt[1]} && pos < ${Tt[0]}) {
              offsetY = int(blockIndex / (${yt[St-1]})) * ${bt.strides[0]} -
                ${bt.pads[0]};
              d0 = offsetY + ${bt.dilations[0]} * (imod(pos, ${wt}) / ${xt[2]});

              if(d0 < ${_t[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${yt[St-1]}) * ${bt.strides[1]} -
                  ${bt.pads[1]};
                d1 = offsetX + ${bt.dilations[1]} * imod(imod(pos, ${wt}), ${xt[2]});

                if(d1 < ${_t[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${wt}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Rt+It}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const Pt=`
      ${Ct}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${At}
          ${Et.output} = result;
      }
            `;return Object.assign(Object.assign({},gt),{output:{dims:Tt,type:mt.type,textureType:nt.TextureType.packed},shaderSource:Pt,hasMain:!0})})(at,ct,ot,st,dt,ht)})}},3248:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.calculateIm2ColDims=_.createIm2ColProgramInfoLoader=void 0;const tt=et(2039);_.createIm2ColProgramInfoLoader=(nt,it,at,ot,st)=>{const dt=(ht=st.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[tt.TextureType.unpacked],cacheHint:ht});var ht;return Object.assign(Object.assign({},dt),{get:()=>((ct,ut,ft,gt,mt,vt)=>{const yt=ft.dims,bt=gt.dims,_t=mt.length,xt=(0,_.calculateIm2ColDims)(yt,bt,mt,4),St=`
        const int XC = ${yt[1]};
        const int XH = ${yt[2]};
        const int XW = ${yt[3]};
        const int KH = ${vt.kernelShape[0]};
        const int KW = ${vt.kernelShape[1]};
        const int dilationH = ${vt.dilations[0]};
        const int dilationW = ${vt.dilations[1]};
        const int strideH = ${vt.strides[0]};
        const int strideW = ${vt.strides[1]};
        const int padH = ${vt.pads[0]};
        const int padW = ${vt.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${_t}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${yt.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},ut),{output:{dims:xt,type:ft.type,textureType:tt.TextureType.packedLastDimension},shaderSource:St})})(0,dt,it,at,ot,st)})},_.calculateIm2ColDims=(nt,it,at,ot=4)=>[at[0],at[2],at[3],Math.ceil(nt[1]*it[2]*it[3]/ot)]},6572:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseImageScalerAttributes=_.imageScaler=void 0;const tt=et(246),nt=et(2039);_.imageScaler=(dt,ht,ct)=>(st(ht),[dt.run(at(dt,ht,ct),ht)]),_.parseImageScalerAttributes=dt=>{const ht=dt.attributes.getFloat("scale"),ct=dt.attributes.getFloats("bias");return(0,tt.createAttributeWithCacheKey)({scale:ht,bias:ct})};const it={name:"ImageScaler",inputNames:["X"],inputTypes:[nt.TextureType.unpacked]},at=(dt,ht,ct)=>{const ut=Object.assign(Object.assign({},it),{cacheHint:ct.cacheKey});return Object.assign(Object.assign({},ut),{get:()=>((ft,gt,mt,vt)=>{const yt=mt[0].dims.slice(),bt=yt.length,_t=`
      ${ot(vt.bias.length)}
      float process(int indices[${bt}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},gt),{output:{dims:yt,type:mt[0].type,textureType:nt.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:vt.bias.length,data:vt.bias},{name:"scale",type:"float",data:vt.scale}],shaderSource:_t})})(0,ut,ht,ct)})},ot=dt=>{const ht=[`float getBias(float bias[${dt}], int channel) {`];for(let ct=0;ct<dt;++ct)ct===0?ht.push(`	if (channel == ${ct}) { return bias[${ct}]; }`):ct===dt-1?ht.push(`	else { return bias[${ct}]; }`):ht.push(`	else if (channel == ${ct}) { return bias[${ct}]; }`);return ht.push("	}"),ht.join(`
`)},st=dt=>{if(!dt||dt.length!==1)throw new Error("ImageScaler requires 1 input.");if(dt[0].dims.length!==4)throw new Error("Invalid input shape.");if(dt[0].type!=="float32"&&dt[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseInstanceNormalizationAttributes=_.instanceNormalization=void 0;const tt=et(5060),nt=et(2039);_.instanceNormalization=(ht,ct,ut)=>{dt(ct);const ft=ht.run(at(ct[0]),ct);return[ht.run(st(ht,ct[0],ut,ft.dims),[ct[0],ft,ct[1],ct[2]])]},_.parseInstanceNormalizationAttributes=ht=>ht.attributes.getFloat("epsilon",1e-5);const it={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[nt.TextureType.unpacked]},at=ht=>Object.assign(Object.assign({},it),{get:()=>((ct,ut)=>{const ft=ut.dims.slice(),gt=ft[1],mt=ft[2]*ft[3],vt=[ft[0],gt],yt=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${ft[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${ft[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${mt});
        temp = 0.0;
        for(int a2=0; a2<${ft[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${ft[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${mt});

        return v;
      }`;return Object.assign(Object.assign({},ct),{output:{dims:vt,type:ut.type,textureType:nt.TextureType.packedLastDimension},shaderSource:yt})})(it,ht)}),ot={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[nt.TextureType.unpacked,nt.TextureType.packedLastDimension,nt.TextureType.unpacked,nt.TextureType.unpacked]},st=(ht,ct,ut,ft)=>{const gt=Object.assign(Object.assign({},ot),{cacheHint:`${ut}`});return Object.assign(Object.assign({},gt),{get:()=>((mt,vt,yt,bt,_t)=>{const xt=(0,tt.getGlsl)(mt.session.backend.glContext.version),[St,Tt]=mt.calculateTextureWidthAndHeight(_t,nt.TextureType.packedLastDimension),[wt,Ct]=[St/4,Tt],Et=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${wt}, ${Ct});
        return ${xt.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},vt),{output:{dims:yt.dims,type:yt.type,textureType:nt.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:bt}],shaderSource:Et})})(ht,gt,ct,ut,ft)})},dt=ht=>{if(!ht||ht.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const ct=ht[0],ut=ht[1],ft=ht[2];if(ct.dims.length<3||ut.dims.length!==1||ft.dims.length!==1)throw new Error("Invalid input shape.");if(ut.dims[0]!==ct.dims[1]||ft.dims[0]!==ct.dims[1])throw new Error("Input shapes are mismatched.");if(ct.type!=="float32"&&ct.type!=="float64"||ut.type!=="float32"&&ut.type!=="float64"||ft.type!=="float32"&&ft.type!=="float64")throw new Error("Invalid input type.");if(ht[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedMatmulProgramInfoLoader=void 0;const tt=et(2517),nt=et(5060),it=et(2039),at=et(9390),ot=et(2823),st=et(5623);_.createPackedMatmulProgramInfoLoader=(dt,ht,ct)=>{const ut=(ft=ht.length>2,gt=ct.activationCacheKey,{name:"MatMul (packed)",inputNames:ft?["A","B","Bias"]:["A","B"],inputTypes:ft?[it.TextureType.packed,it.TextureType.packed,it.TextureType.packed]:[it.TextureType.packed,it.TextureType.packed],cacheHint:gt});var ft,gt;return Object.assign(Object.assign({},ut),{get:()=>((mt,vt,yt,bt)=>{const _t=yt.length>2,xt=_t?"value += getBiasForMatmul();":"",St=yt[0].dims,Tt=yt[1].dims,wt=tt.BroadcastUtil.calcShape(St,Tt,!0),Ct=!tt.ShapeUtil.areEqual(yt[0].dims,yt[1].dims);if(!wt)throw new Error("Can't use matmul on the given tensors");const Et=St[St.length-1],At=Math.ceil(Et/2),Pt=St.length,Rt=Tt.length,It=(0,nt.getGlsl)(mt.session.backend.glContext.version),Mt=(0,at.getCoordsDataType)(wt.length),Ot=wt.length,$t=(0,at.getGlChannels)(),{activationFunction:Lt,applyActivation:kt}=(0,ot.getActivationSnippet)(bt),Nt=_t?`${(0,st.getBiasForMatmul)(Mt,$t,yt[2].dims,wt,!0)}`:"",Vt=Ct?`${function(nr,Jt,lr,pr){let Zt=[],Kt=[];const ur=lr[0].dims,ir=lr[1].dims,hr=ur.length,fr=ir.length,mr=pr.length,br=mr-hr,Er=mr-fr;Zt=ur.map((Br,Gr)=>`coords.${Jt[Gr+br]}`),Zt[hr-1]="i*2",Zt.join(", "),Kt=ir.map((Br,Gr)=>`coords.${Jt[Gr+Er]}`),Kt[fr-2]="i*2",Kt.join(", ");const kr=tt.BroadcastUtil.getBroadcastDims(ur,pr),jr=tt.BroadcastUtil.getBroadcastDims(ir,pr),Hr=kr.map(Br=>`coords.${Jt[Br+br]} = 0;`).join(`
`),Wr=jr.map(Br=>`coords.${Jt[Br+Er]} = 0;`).join(`
`),Yr=`int lastDim = coords.${Jt[mr-1]};
  coords.${Jt[mr-1]} = coords.${Jt[mr-2]};
  coords.${Jt[mr-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${nr} coords = getOutputCoords();
  ${Yr}
  ${Hr}
  vec4 outputValue = getA(${Zt});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${nr} coords = getOutputCoords();
  ${Yr}
  ${Wr}
  vec4 outputValue = getB(${Kt});
  return outputValue;
}`}(Mt,$t,yt,wt)}`:"",zt=Ct?"getAAtOutCoordsMatmul(i)":`getA(${function(nr,Jt){let lr="";for(let pr=0;pr<Jt-2;pr++)lr+=`rc.${nr[pr]}, `;return lr+=`rc.${nr[Jt-2]}, i*2`,lr}($t,Pt)})`,Xt=Ct?"getBAtOutCoordsMatmul(i)":`getB(${function(nr,Jt){let lr="";for(let pr=0;pr<Jt-2;pr++)lr+=`rc.${nr[pr]}, `;return lr+=`i*2, rc.${nr[Jt-1]}`,lr}($t,Rt)})`,Wt=`
            ${Vt}
            ${Nt}
            ${Lt}
            void main() {
              ${Ct?"":`${Mt} rc =
          getOutputCoords(); int lastDim = rc.${$t[Ot-1]}; rc.${$t[Ot-1]} =
          rc.${$t[Ot-2]}; rc.${$t[Ot-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${At}; i++) {
                vec4 a = ${zt};
                vec4 b = ${Xt};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${xt}
              ${kt}
              ${It.output} = value;
            }`;return Object.assign(Object.assign({},vt),{output:{dims:wt,type:yt[0].type,textureType:it.TextureType.packed},shaderSource:Wt,hasMain:!0})})(dt,ut,ht,ct)})}},5623:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getBiasForMatmul=_.createMatmulProgramInfoLoader=_.parseMatMulAttributes=_.matMul=void 0;const tt=et(2517),nt=et(2039),it=et(9390),at=et(2823),ot=et(708);function st(ct,ut){const ft=(gt=ct.length>2,mt=ut.activationCacheKey,{name:"MatMul",inputNames:gt?["A","B","Bias"]:["A","B"],inputTypes:gt?[nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked]:[nt.TextureType.unpacked,nt.TextureType.unpacked],cacheHint:mt});var gt,mt;return Object.assign(Object.assign({},ft),{get:()=>function(vt,yt,bt){const _t=yt[0].dims,xt=yt[1].dims,St=tt.BroadcastUtil.calcShape(_t,xt,!0);if(!St)throw new Error("Can't use matmul on the given tensors");const Tt=(0,it.getCoordsDataType)(St.length),wt=(0,it.getGlChannels)(),{activationFunction:Ct,applyActivation:Et}=(0,at.getActivationSnippet)(bt),At=yt.length>2,Pt=At?"value += getBiasForMatmul();":"",Rt=At?`${ht(Tt,wt,yt[2].dims,St,!1)}`:"",It=St.length,Mt=_t.length,Ot=xt.length,$t=`
    ${Ct}
    ${Rt}
    float process(int indices[${It}]) {
        int a[${Mt}];
        int b[${Ot}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${_t[_t.length-1]}; ++k) {
            a[${Mt-1}] = k;
            b[${Ot-2}] = k;
            value += _A(a) * _B(b);
        }
        ${Pt}
        ${Et}
        return value;
    }`;return Object.assign(Object.assign({},vt),{output:{dims:St,type:yt[0].type,textureType:nt.TextureType.unpacked},shaderSource:$t})}(ft,ct,ut)})}_.matMul=(ct,ut,ft)=>(dt(ut),ct.session.pack?[ct.run((0,ot.createPackedMatmulProgramInfoLoader)(ct,ut,ft),ut)]:[ct.run(st(ut,ft),ut)]),_.parseMatMulAttributes=ct=>(0,at.parseInternalActivationAttributes)(ct.attributes),_.createMatmulProgramInfoLoader=st;const dt=ct=>{if(!ct||ct.length!==2)throw new Error("MatMul requires 2 inputs.");if(ct[0].dims[ct[0].dims.length-1]!==ct[1].dims[ct[1].dims.length-2])throw new Error("shared dimension does not match.");if(ct[0].type!=="float32"&&ct[0].type!=="float64"||ct[1].type!=="float32"&&ct[1].type!=="float64")throw new Error("inputs should be float type");if(ct[0].type!==ct[1].type)throw new Error("inputs types should match")};function ht(ct,ut,ft,gt,mt){let vt="";const yt=ft.length,bt=gt.length,_t=bt-yt;vt=bt<2&&yt>0?"coords":ft.map((Tt,wt)=>`coords.${ut[wt+_t]}`).join(", ");const xt=tt.BroadcastUtil.getBroadcastDims(ft,gt).map(Tt=>`coords.${ut[Tt+_t]} = 0;`).join(`
`);let St="vec4(outputValue.xx, outputValue.yy)";return tt.ShapeUtil.size(ft)===1&&(St="vec4(outputValue.x)"),mt?`
vec4 getBiasForMatmul() {
  ${ct} coords = getOutputCoords();
  ${xt}
  vec4 outputValue = getBias(${vt});
  return ${St};
}`:`
float getBiasForMatmul() {
  ${ct} coords = getOutputCoords();
  ${xt}
  return getBias(coords.x);
}`}_.getBiasForMatmul=ht},2403:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackProgramInfoLoader=void 0;const tt=et(5060),nt=et(2039),it=et(9390),at=et(2827),ot={name:"pack",inputNames:["A"],inputTypes:[nt.TextureType.unpackedReversed]};_.createPackProgramInfoLoader=(st,dt)=>Object.assign(Object.assign({},ot),{get:()=>((ht,ct)=>{const ut=(0,tt.getGlsl)(ht.session.backend.glContext.version),ft=ct.dims,gt=ft.length,mt=ct.dims.length,vt=(0,it.getCoordsDataType)(mt),yt=(0,at.getChannels)("rc",mt),bt=(_t=mt,xt=yt,St=ft[ft.length-2],Tt=ft[ft.length-1],_t===0||_t===1?"":`
    int r = ${xt[_t-2]};
    int c = ${xt[_t-1]};
    int rp1 = ${xt[_t-2]} + 1;
    int cp1 = ${xt[_t-1]} + 1;
    bool rEdge = rp1 >= ${Tt};
    bool cEdge = cp1 >= ${St};
    `);var _t,xt,St,Tt;let wt;wt=gt===0?[1,1]:gt===1?[ft[0],1]:[ft[mt-1],ft[mt-2]];const Ct=function(Pt,Rt,It){if(Pt===0)return"false";if(Pt===1)return`rc > ${Rt[0]}`;let Mt="";for(let Ot=Pt-2;Ot<Pt;Ot++)Mt+=`${It[Ot]} >= ${Rt[Ot-Pt+2]}`,Ot<Pt-1&&(Mt+="||");return Mt}(mt,wt,yt),Et=function(Pt,Rt){const It=Pt.length;if(It===0)return"getA(), 0, 0, 0";if(It===1)return`getA(rc),
            rc + 1 >= ${Pt[0]} ? 0. : getA(rc + 1),
            0, 0`;let Mt="";if(It>2)for(let Ot=0;Ot<It-2;++Ot)Mt+=`${Rt[Ot]},`;return`getA(${Mt}r, c),
          rEdge ? 0. : getA(${Mt}rp1, c),
          cEdge ? 0. : getA(${Mt}r, cp1),
          rEdge || cEdge ? 0. : getA(${Mt}rp1, cp1)`}(ft,yt),At=`
        void main() {
          ${vt} rc = getOutputCoords();

          if(${Ct}) {
            ${ut.output} = vec4(0);
          } else {
            ${bt}

            ${ut.output} = vec4(${Et});
          }
        }
      `;return Object.assign(Object.assign({},ot),{hasMain:!0,output:{dims:ct.dims,type:ct.type,textureType:nt.TextureType.packed},shaderSource:At})})(st,dt)})},2827:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.unpackFromChannel=_.getChannels=_.getVecChannels=void 0;const tt=et(9390);function nt(it,at){return(0,tt.getGlChannels)(at).map(ot=>`${it}.${ot}`)}_.getVecChannels=nt,_.getChannels=function(it,at){return at===1?[it]:nt(it,at)},_.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parsePadAttributesV11=_.padV11=_.parsePadAttributesV2=_.padV2=void 0;const tt=et(246),nt=et(2517),it=et(5060),at=et(2039),ot={name:"Pad",inputNames:["A"],inputTypes:[at.TextureType.unpacked]};_.padV2=(vt,yt,bt)=>(ht(yt),[vt.run(Object.assign(Object.assign({},ot),{cacheHint:bt.cacheKey,get:()=>dt(vt,yt[0],bt)}),yt)]),_.parsePadAttributesV2=vt=>{const yt=vt.attributes.getString("mode","constant"),bt=vt.attributes.getFloat("value",0),_t=vt.attributes.getInts("pads");return(0,tt.createAttributeWithCacheKey)({mode:yt,value:bt,pads:_t})},_.padV11=(vt,yt,bt)=>{ct(yt);const _t=st(vt,yt,bt);return(0,_.padV2)(vt,[yt[0]],_t)},_.parsePadAttributesV11=vt=>vt.attributes.getString("mode","constant");const st=(vt,yt,bt)=>{if(!vt.session.isInitializer(yt[1].dataId)||yt.length>=3&&!vt.session.isInitializer(yt[2].dataId))throw new Error("dynamic pad attributes are not allowed");const _t=Array.from(yt[1].integerData),xt=yt.length>=3?yt[2].floatData[0]:0;return(0,tt.createAttributeWithCacheKey)({mode:bt,pads:_t,value:xt})},dt=(vt,yt,bt)=>{const _t=nt.ShapeUtil.padShape(yt.dims.slice(),bt.pads),xt=_t.length,St=`
      ${ut(vt,yt,bt)}
      float process(int[${xt}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[at.TextureType.unpacked],output:{dims:_t,type:yt.type,textureType:at.TextureType.unpacked},shaderSource:St}},ht=vt=>{if(!vt||vt.length!==1)throw new Error("Pad requires 1 input");if(vt[0].type!=="float32"&&vt[0].type!=="float64")throw new Error("Invalid input type.")},ct=vt=>{if(!vt||vt.length!==2&&vt.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(vt[1].type!=="int32")throw new Error("Invalid input type.");if(vt.length>=3&&vt[2].type==="string")throw new Error("Invalid input type.")},ut=(vt,yt,bt)=>{const _t=(0,it.getGlsl)(vt.session.backend.glContext.version),[xt,St]=vt.calculateTextureWidthAndHeight(yt.dims,at.TextureType.unpacked),Tt=nt.ShapeUtil.computeStrides(yt.dims);switch(bt.mode){case"constant":return ft(_t,yt.dims,Tt,xt,St,bt.pads,bt.value);case"reflect":return gt(_t,yt.dims,Tt,xt,St,bt.pads);case"edge":return mt(_t,yt.dims,Tt,xt,St,bt.pads);default:throw new Error("Invalid mode")}},ft=(vt,yt,bt,_t,xt,St,Tt)=>{const wt=yt.length;let Ct="";for(let Et=wt-1;Et>=0;--Et)Ct+=`
        k = m[${Et}] - ${St[Et]};
        if (k < 0)  return constant;
        if (k >= ${yt[Et]}) return constant;
        offset += k * ${bt[Et]};
        `;return`
      float padA(int m[${wt}]) {
        const float constant = float(${Tt});
        int offset = 0;
        int k = 0;
        ${Ct}
        vec2 coords = offsetToCoords(offset, ${_t}, ${xt});
        float value = getColorAsFloat(${vt.texture2D}(A, coords));
        return value;
      }
      `},gt=(vt,yt,bt,_t,xt,St)=>{const Tt=yt.length;let wt="";for(let Ct=Tt-1;Ct>=0;--Ct)wt+=`
        k = m[${Ct}] - ${St[Ct]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(yt[Ct]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${yt[Ct]}) { k = _2n_1 - k; }
        }
        offset += k * ${bt[Ct]};
        `;return`
      float padA(int m[${Tt}]) {
        int offset = 0;
        int k = 0;
        ${wt}
        vec2 coords = offsetToCoords(offset, ${_t}, ${xt});
        float value = getColorAsFloat(${vt.texture2D}(A, coords));
        return value;
      }
      `},mt=(vt,yt,bt,_t,xt,St)=>{const Tt=yt.length;let wt="";for(let Ct=Tt-1;Ct>=0;--Ct)wt+=`
        k = m[${Ct}] - ${St[Ct]};
        if (k < 0)  k = 0;
        if (k >= ${yt[Ct]}) k = ${yt[Ct]-1};
        offset += k * ${bt[Ct]};
      `;return`
      float padA(int m[${Tt}]) {
        int offset = 0;
        int k = 0;
        ${wt}
        vec2 coords = offsetToCoords(offset, ${_t}, ${xt});
        float value = getColorAsFloat(${vt.texture2D}(A, coords));
        return value;
      }
      `}},2143:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.globalMaxPool=_.parseMaxPoolAttributes=_.maxPool=_.parseGlobalAveragePoolAttributes=_.globalAveragePool=_.parseAveragePoolAttributes=_.averagePool=void 0;const tt=et(246),nt=et(2517),it=et(2039);_.averagePool=(mt,vt,yt)=>{ct(vt);const bt={name:"AveragePool",inputNames:["X"],inputTypes:[it.TextureType.unpacked],cacheHint:yt.cacheKey};return[mt.run(Object.assign(Object.assign({},bt),{get:()=>at(vt,bt,!1,yt)}),vt)]},_.parseAveragePoolAttributes=mt=>{const vt=mt.attributes.getString("auto_pad","NOTSET"),yt=mt.attributes.getInt("ceil_mode",0),bt=mt.attributes.getInt("count_include_pad",0)!==0,_t=mt.attributes.getInts("kernel_shape"),xt=mt.attributes.getInts("strides",[]),St=mt.attributes.getInts("pads",[]);if(yt!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,tt.createAttributeWithCacheKey)({autoPad:vt,ceilMode:yt,countIncludePad:bt,kernelShape:_t,strides:xt,pads:St})};const at=(mt,vt,yt,bt)=>{const[_t,xt]=st(mt,bt,yt),St=nt.ShapeUtil.size(_t.kernelShape);let Tt="";_t.countIncludePad?Tt+=`value /= float(${St});`:Tt+=`value /= float(${St} - pad);`;const wt=`
        ${ut(mt[0].dims,_t,"value += _X(x);",Tt,"0.0")}
      `;return Object.assign(Object.assign({},vt),{output:{dims:xt,type:mt[0].type,textureType:it.TextureType.unpacked},shaderSource:wt})};_.globalAveragePool=(mt,vt,yt)=>{ct(vt);const bt={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[it.TextureType.unpacked],cacheHint:`${yt.countIncludePad}`};return[mt.run(Object.assign(Object.assign({},bt),{get:()=>at(vt,bt,!0,yt)}),vt)]},_.parseGlobalAveragePoolAttributes=mt=>{const vt=mt.attributes.getInt("count_include_pad",0)!==0;return(0,tt.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:vt,kernelShape:[],strides:[],pads:[]})},_.maxPool=(mt,vt,yt)=>{ct(vt);const bt={name:"MaxPool",inputNames:["X"],inputTypes:[it.TextureType.unpacked],cacheHint:yt.cacheKey};return[mt.run(Object.assign(Object.assign({},bt),{get:()=>ot(vt,bt,!1,yt)}),vt)]},_.parseMaxPoolAttributes=mt=>{const vt=mt.attributes.getString("auto_pad","NOTSET"),yt=mt.attributes.getInt("ceil_mode",0),bt=mt.attributes.getInts("kernel_shape"),_t=mt.attributes.getInts("strides",[]),xt=mt.attributes.getInts("pads",[]),St=mt.attributes.getInt("storage_order",0),Tt=mt.attributes.getInts("dilations",[]);if(St!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(yt!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,tt.createAttributeWithCacheKey)({autoPad:vt,ceilMode:yt,countIncludePad:!1,kernelShape:bt,strides:_t,pads:xt,storageOrder:St,dilations:Tt})};const ot=(mt,vt,yt,bt)=>{const[_t,xt]=st(mt,bt,yt),St=`
      ${ut(mt[0].dims,_t,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},vt),{output:{dims:xt,type:mt[0].type,textureType:it.TextureType.unpacked},shaderSource:St})},st=(mt,vt,yt)=>{const bt=mt[0].dims.slice(),_t=Object.hasOwnProperty.call(vt,"dilations"),xt=vt.kernelShape.slice(),St=vt.strides.slice(),Tt=_t?vt.dilations.slice():[],wt=vt.pads.slice();nt.PoolConvUtil.adjustPoolAttributes(yt,bt,xt,St,Tt,wt);const Ct=nt.PoolConvUtil.computePoolOutputShape(yt,bt,St,Tt,xt,wt,vt.autoPad),Et=Object.assign({},vt);return _t?Object.assign(Et,{kernelShape:xt,strides:St,pads:wt,dilations:Tt,cacheKey:vt.cacheKey}):Object.assign(Et,{kernelShape:xt,strides:St,pads:wt,cacheKey:vt.cacheKey}),[Et,Ct]},dt={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},ht={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[it.TextureType.unpacked]};_.globalMaxPool=(mt,vt)=>(ct(vt),[mt.run(Object.assign(Object.assign({},ht),{get:()=>ot(vt,ht,!0,dt)}),vt)]);const ct=mt=>{if(!mt||mt.length!==1)throw new Error("Pool ops requires 1 input.");if(mt[0].type!=="float32"&&mt[0].type!=="float64")throw new Error("Invalid input type.")},ut=(mt,vt,yt,bt,_t)=>{const xt=mt.length;if(vt.kernelShape.length<=2){const St=vt.kernelShape[vt.kernelShape.length-1],Tt=vt.strides[vt.strides.length-1],wt=vt.pads[vt.pads.length/2-1],Ct=vt.pads[vt.pads.length-1],Et=mt[xt-1];let At="",Pt="",Rt="";if(At=wt+Ct!==0?`
          for (int i = 0; i < ${St}; i++) {
            x[${xt} - 1] = indices[${xt} - 1] * ${Tt} - ${wt} + i;
            if (x[${xt} - 1] < 0 || x[${xt} - 1] >= ${Et}) {
              pad++;
              continue;
            }
            ${yt}
          }`:`
          for (int i = 0; i < ${St}; i++) {
            x[${xt} - 1] = indices[${xt} - 1] * ${Tt} - ${wt} + i;
            ${yt}
          }`,vt.kernelShape.length===2){const It=vt.kernelShape[vt.kernelShape.length-2],Mt=vt.strides[vt.strides.length-2],Ot=vt.pads[vt.pads.length/2-2],$t=vt.pads[vt.pads.length-2],Lt=mt[xt-2];Pt=Ot+$t!==0?`
            for (int j = 0; j < ${It}; j++) {
              x[${xt} - 2] = indices[${xt} - 2] * ${Mt} - ${Ot} + j;
              if (x[${xt} - 2] < 0 || x[${xt} - 2] >= ${Lt}) {
                pad+= ${St};
                continue;
              }
          `:`
            for (int j = 0; j < ${It}; j++) {
              x[${xt} - 2] = indices[${xt} - 2] * ${Mt} - ${Ot} + j;
            `,Rt=`
          }
        `}return`
        float process(int indices[${xt}]) {
          int x[${xt}];
          copyVec(indices, x);

          float value = ${_t};
          int pad = 0;
          ${Pt}
          ${At}
          ${Rt}
          ${bt}
          return value;
        }
      `}{const St=nt.ShapeUtil.size(vt.kernelShape),Tt=nt.ShapeUtil.computeStrides(vt.kernelShape),wt=Tt.length,Ct=vt.pads.length,Et=gt(wt),At=ft(mt,"inputDims"),Pt=ft(vt.pads,"pads"),Rt=ft(Tt,"kernelStrides"),It=ft(vt.strides,"strides");let Mt="";return Mt=vt.pads.reduce((Ot,$t)=>Ot+$t)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${yt}
          }`:`
          }
          ${yt}
        `,`
        ${Et}
        float process(int indices[${xt}]) {
          int x[${xt}];
          copyVec(indices, x);
          int offset[${wt}];
          int pads[${Ct}];
          int inputDims[${xt}];
          int kernelStrides[${wt}];
          int strides[${wt}];
          ${Pt}
          ${At}
          ${It}
          ${Rt}

          float value = ${_t};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${St}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${xt} - ${wt}; j < ${xt}; j++) {
              x[j] = indices[j] * strides[j - ${xt} + ${wt}]
                + offset[j - ${xt} + ${wt}] - pads[j - 2];
              ${Mt}
          }
          ${bt}

          return value;
        }
      `}},ft=(mt,vt)=>{let yt="";for(let bt=0;bt<mt.length;bt++)yt+=`
      ${vt}[${bt}] = ${mt[bt]};
    `;return yt},gt=mt=>`
  void offsetToIndices(int offset, int[${mt}] strides, out int[${mt}] indices) {
    if (${mt} == 0) {
      return;
    }
    for (int i = 0; i < ${mt} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${mt} - 1] = offset;
  }`},4939:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.reduceLogSumSquare=_.reduceLogSum=_.reduceProd=_.reduceMin=_.reduceMax=_.reduceMean=_.reduceSum=_.parseReduceAttributes=void 0;const tt=et(246),nt=et(782),it=et(2517),at=et(2039),ot=(ht,ct,ut,ft,gt)=>{dt(ct);const mt={name:ft,inputNames:["A"],inputTypes:[at.TextureType.unpacked]};return[ht.run(Object.assign(Object.assign({},mt),{cacheHint:ut.cacheKey,get:()=>st(ht,ct,ut,ft,gt,mt)}),ct)]};_.parseReduceAttributes=ht=>{const ct=ht.attributes.getInts("axes",[]),ut=ht.attributes.getInt("keepdims",1)===1;return(0,tt.createAttributeWithCacheKey)({axes:ct,keepDims:ut})};const st=(ht,ct,ut,ft,gt,mt)=>{const vt=[],yt=ct[0].dims.length||1,bt=[],_t=it.ShapeUtil.normalizeAxes(ut.axes,ct[0].dims.length),xt=gt(ct,_t);let St=xt[1];for(let wt=0;wt<ct[0].dims.length;wt++)_t.indexOf(wt)>=0||_t.length===0?(ut.keepDims&&vt.push(1),St=`
          for(int j${wt} = 0; j${wt} < ${ct[0].dims[wt]}; j${wt}++) {
            inputIdx[${wt}] = j${wt};
            ${St}
          }`):(bt.push(`inputIdx[${wt}] = outputIdx[${vt.length}];`),vt.push(ct[0].dims[wt]));const Tt=`
      float process(int outputIdx[${vt.length||1}]) {
        float value;                 // final result
        int inputIdx[${yt}];      // addressing input data
        ${bt.join(`
`)}
        ${xt[0]}       // init ops for reduce max/min
        ${St}
        ${xt[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},mt),{output:{dims:vt,type:ct[0].type,textureType:at.TextureType.unpacked},shaderSource:Tt})},dt=ht=>{if(!ht||ht.length!==1)throw new Error("Reduce op requires 1 input.");if(nt.NUMBER_TYPES.indexOf(ht[0].type)===-1)throw new Error("Invalid input type.")};_.reduceSum=(ht,ct,ut)=>ot(ht,ct,ut,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),_.reduceMean=(ht,ct,ut)=>ot(ht,ct,ut,"ReduceMean",(ft,gt)=>{let mt=1;for(let vt=0;vt<ft[0].dims.length;vt++)(gt.indexOf(vt)>=0||gt.length===0)&&(mt*=ft[0].dims[vt]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${mt}.;`]}),_.reduceMax=(ht,ct,ut)=>ot(ht,ct,ut,"ReduceMax",(ft,gt)=>{const mt=[];for(let vt=0;vt<ft[0].dims.length;vt++)(gt.indexOf(vt)>=0||gt.length===0)&&mt.push(`inputIdx[${vt}] = 0;`);return[`${mt.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),_.reduceMin=(ht,ct,ut)=>ot(ht,ct,ut,"ReduceMin",(ft,gt)=>{const mt=[];for(let vt=0;vt<ft[0].dims.length;vt++)(gt.indexOf(vt)>=0||gt.length===0)&&mt.push(`inputIdx[${vt}] = 0;`);return[`${mt.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),_.reduceProd=(ht,ct,ut)=>ot(ht,ct,ut,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),_.reduceLogSum=(ht,ct,ut)=>ot(ht,ct,ut,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),_.reduceLogSumSquare=(ht,ct,ut)=>ot(ht,ct,ut,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.isReshapeCheap=_.processDims3D=_.createPackedReshape3DProgramInfoLoader=void 0;const tt=et(2517),nt=et(5060),it=et(2039),at=et(2827);_.createPackedReshape3DProgramInfoLoader=(ot,st,dt)=>{const ht=(ct=>({name:"Reshape (packed)",inputTypes:[it.TextureType.packed],inputNames:["A"],cacheHint:`${ct}`}))(dt);return Object.assign(Object.assign({},ht),{get:()=>((ct,ut,ft,gt)=>{const mt=ut.dims,vt=gt;let yt="";for(let xt=0;xt<4;xt++){let St="";switch(xt){case 0:St="outputCoords = rc;";break;case 1:St="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:St="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:St="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}yt+=`
        ${St}
        ${xt>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${xt}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${xt>0?"}":""}
      `}const bt=(0,nt.getGlsl)(ct.session.backend.glContext.version),_t=`
      ${function(xt){const St=tt.ShapeUtil.computeStrides(xt),Tt=["b","r","c"],wt="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${St.map((Ct,Et)=>`int ${Tt[Et]} = ${wt} / ${Ct}; ${Et===St.length-1?`int ${Tt[Et+1]} = ${wt} - ${Tt[Et]} * ${Ct}`:`index -= ${Tt[Et]} * ${Ct}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(mt)}
      ${function(xt){const St=tt.ShapeUtil.computeStrides(xt);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${St[0]} + coords.z * ${St[1]} + coords.y;
  }
`}(vt)}
      ${(0,at.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${vt[2]};
        int cols = ${vt[1]};

        ${yt}
        ${bt.output} = result;
      }
    `;return Object.assign(Object.assign({},ft),{output:{dims:vt,type:ut.type,textureType:it.TextureType.packed},shaderSource:_t,hasMain:!0})})(ot,st,ht,dt)})},_.processDims3D=function(ot){if(ot.length===0)return[1,1,1];let st=1;for(let dt=0;dt<ot.length-2;++dt)st*=ot[dt];return[st,ot.length>1?ot[ot.length-2]:1,ot[ot.length-1]]},_.isReshapeCheap=function(ot,st){let dt=!1;return dt=ot.length===0||st.length===0||(ot.length<2||st.length<2?ot[ot.length-1]===st[st.length-1]:ot[ot.length-1]===st[st.length-1]&&ot[ot.length-2]===st[st.length-2]),dt}},718:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.reshape=void 0;const tt=et(2517);_.reshape=(nt,it)=>{const at=tt.ShapeUtil.calculateReshapedDims(it[0].dims,it[1].integerData);return nt.session.pack?[nt.reshapePacked(it[0],at)]:[nt.reshapeUnpacked(it[0],at)]}},2268:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseResizeAttributesV11=_.parseResizeAttributesV10=_.resize=void 0;const tt=et(5060),nt=et(2039),it=et(9390),at=et(2827),ot=et(9793),st={name:"Resize",inputNames:["A"],inputTypes:[nt.TextureType.packed]};_.resize=(ft,gt,mt)=>((0,ot.validateInputs)(gt,mt),[ft.run(Object.assign(Object.assign({},st),{cacheHint:mt.cacheKey,get:()=>dt(ft,gt,mt)}),gt)]),_.parseResizeAttributesV10=ft=>(0,ot.parseUpsampleAttributes)(ft,10),_.parseResizeAttributesV11=ft=>(0,ot.parseUpsampleAttributes)(ft,11);const dt=(ft,gt,mt)=>{const vt=(0,tt.getGlsl)(ft.session.backend.glContext.version),[yt,bt]=ht(gt,mt);if(yt.every(Mt=>Mt===1)&&mt.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},st),{output:{dims:bt,type:gt[0].type,textureType:nt.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${vt.texture2D}(X, TexCoords);
                    ${vt.output} = v;
                }`});const _t=bt.length;if(_t<2)throw new Error(`output dimension should be at least 2, but got ${_t}`);const xt=bt[_t-2],St=bt[_t-1],Tt=gt[0].dims;if(_t!==Tt.length)throw new Error(`output dimension should match input ${Tt.length}, but got ${_t}`);const wt=Tt[_t-2],Ct=Tt[_t-1],Et=yt[_t-2],At=yt[_t-1];let Pt="";if(mt.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${mt.mode}'`);switch(mt.coordinateTransformMode){case"asymmetric":Pt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":Pt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":Pt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${St}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${xt}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${St}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${xt}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":Pt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${St}.0 - 1.0, ${xt}.0 - 1.0, ${St}.0 - 1.0,
                            ${xt}.0 - 1.0);
                        vec4 original = vec4(${Ct}.0 - 1.0, ${wt}.0 - 1.0, ${Ct}.0 - 1.0,
                            ${wt}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${mt.coordinateTransformMode}'`)}const Rt=(0,it.getCoordsDataType)(_t),It=`
            const vec2 inputWH = vec2(${wt}.0, ${Ct}.0);
            const vec4 scaleWHWH = vec4(float(${Et}), float(${At}), float(${Et}), float(${At}));
            ${(0,at.unpackFromChannel)()}
            ${Pt}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Rt} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${xt-1};
                bool hasNextCol = rc.z < ${St-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${vt.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},st),{output:{dims:bt,type:gt[0].type,textureType:nt.TextureType.packed},hasMain:!0,shaderSource:It})},ht=(ft,gt)=>{const mt=ft[0].dims;let vt,yt=gt.scales;if(yt.length===0){const _t=ft[gt.scalesInputIdx];if(_t&&_t.size!==0){if(ft[gt.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");yt=ct(_t,gt.mode,gt.isResize)}else{const xt=ft[gt.sizesInputIdx];if(!xt||xt.size===0)throw new Error("Either scales or sizes MUST be provided as input.");vt=Array.from(xt.integerData),yt=ut(vt,mt,gt.mode,gt.isResize)}}else if(ft[gt.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const bt=vt||mt.map((_t,xt)=>Math.floor(_t*yt[xt]));return[yt,bt]},ct=(ft,gt,mt)=>{const vt=Array.from(ft.floatData);return(0,ot.scalesValidation)(vt,gt,mt),vt},ut=(ft,gt,mt,vt)=>{const yt=gt.length,bt=new Array(yt);for(let _t=0,xt=yt;_t<xt;_t++)if(gt[_t]===0){if(ft[_t]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");bt[_t]=1}else bt[_t]=ft[_t]/gt[_t];return(0,ot.scalesValidation)(bt,mt,vt),bt}},8117:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.shape=void 0;const tt=et(9162);_.shape=(it,at)=>(nt(at),[new tt.Tensor([at[0].dims.length],"int32",void 0,void 0,new Int32Array(at[0].dims))]);const nt=it=>{if(!it||it.length!==1)throw new Error("Shape requires 1 input.")}},2278:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.sliceV10=_.parseSliceAttributes=_.slice=void 0;const tt=et(246),nt=et(782),it=et(2517),at=et(2039),ot={name:"Slice",inputNames:["A"],inputTypes:[at.TextureType.unpacked]};_.slice=(ut,ft,gt)=>(dt(ft),[ut.run(Object.assign(Object.assign({},ot),{cacheHint:gt.cacheKey,get:()=>st(ut,ft[0],gt)}),ft)]),_.parseSliceAttributes=ut=>{const ft=ut.attributes.getInts("starts"),gt=ut.attributes.getInts("ends"),mt=ut.attributes.getInts("axes",[]);return(0,tt.createAttributeWithCacheKey)({starts:ft,ends:gt,axes:mt})};const st=(ut,ft,gt)=>{const mt=gt.axes.length===0?ft.dims.slice(0).map((Tt,wt)=>wt):gt.axes,vt=it.ShapeUtil.normalizeAxes(mt,ft.dims.length),yt=gt.starts.map((Tt,wt)=>Tt>ft.dims[vt[wt]]-1?ft.dims[vt[wt]]:it.ShapeUtil.normalizeAxis(Tt,ft.dims[vt[wt]])),bt=gt.ends.map((Tt,wt)=>Tt>ft.dims[vt[wt]]-1?ft.dims[vt[wt]]:it.ShapeUtil.normalizeAxis(Tt,ft.dims[vt[wt]])),_t=ft.dims.slice(),xt=[];for(let Tt=0;Tt<vt.length;Tt++)_t[vt[Tt]]=bt[Tt]-yt[Tt],yt[Tt]>0&&xt.push(`outputIdx[${vt[Tt]}] += ${yt[Tt]};`);const St=`
      float process(int outputIdx[${_t.length}]) {
        ${xt.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},ot),{output:{dims:_t,type:ft.type,textureType:at.TextureType.unpacked},shaderSource:St})},dt=ut=>{if(!ut||ut.length!==1)throw new Error("Slice requires 1 input.");if(nt.NUMBER_TYPES.indexOf(ut[0].type)===-1)throw new Error("Invalid input type.")};_.sliceV10=(ut,ft)=>{ct(ft);const gt=ht(ut,ft);return[ut.run(Object.assign(Object.assign({},ot),{cacheHint:gt.cacheKey,get:()=>st(ut,ft[0],gt)}),[ft[0]])]};const ht=(ut,ft)=>{if(!ut.session.isInitializer(ft[1].dataId)||!ut.session.isInitializer(ft[2].dataId)||ft.length>=4&&!ut.session.isInitializer(ft[3].dataId)||ft.length>=5&&!ut.session.isInitializer(ft[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(ft.length>=5&&ft[4].integerData.some(yt=>yt!==1))throw new Error("currently non-1 steps is not supported for Slice");const gt=Array.from(ft[1].integerData),mt=Array.from(ft[2].integerData),vt=ft.length>=4?Array.from(ft[3].integerData):[];return{starts:gt,ends:mt,axes:vt,cacheKey:`${vt};${gt};${mt}`}},ct=ut=>{if(!ut||ut.length<3||ut.length>5)throw new Error("Invalid input number.");if(ut[1].type!=="int32"||ut[1].dims.length!==1)throw new Error("Invalid input type.");if(ut[2].type!=="int32"||ut[2].dims.length!==1)throw new Error("Invalid input type.");if(ut.length>=4&&(ut[3].type!=="int32"||ut[3].dims.length!==1))throw new Error("Invalid input type.");if(ut.length>=5&&(ut[4].type!=="int32"||ut[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.softmaxV13=_.parseSoftmaxAttributesV13=_.parseSoftmaxAttributes=_.softmax=void 0;const tt=et(246),nt=et(2517),it=et(5060),at=et(2039),ot=et(3738),st={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[at.TextureType.unpacked]},dt={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[at.TextureType.unpacked,at.TextureType.unpacked]},ht={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[at.TextureType.unpacked,at.TextureType.unpacked,at.TextureType.unpacked]};_.softmax=(vt,yt,bt)=>{mt(yt);const _t=yt[0].dims.slice(),xt=nt.ShapeUtil.normalizeAxis(bt.axis,_t.length),St=nt.ShapeUtil.sizeToDimension(_t,xt),Tt=nt.ShapeUtil.sizeFromDimension(_t,xt);return ct(vt,yt,bt,St,Tt)},_.parseSoftmaxAttributes=vt=>(0,tt.createAttributeWithCacheKey)({axis:vt.attributes.getInt("axis",1)}),_.parseSoftmaxAttributesV13=vt=>(0,tt.createAttributeWithCacheKey)({axis:vt.attributes.getInt("axis",-1)}),_.softmaxV13=(vt,yt,bt)=>{mt(yt);const _t=yt[0].dims.slice(),xt=nt.ShapeUtil.normalizeAxis(bt.axis,_t.length),St=_t.length,Tt=xt!==St-1,wt=[];let Ct,Et=[],At=[];Tt&&(Et=Array.from({length:St}).map((Mt,Ot)=>Ot),Et[xt]=St-1,Et[St-1]=xt,Et.map(Mt=>wt.push(_t[Mt])),Ct=(0,tt.createAttributeWithCacheKey)({perm:Et}),At=(0,ot.transpose)(vt,yt,Ct));const Pt=Tt?nt.ShapeUtil.sizeToDimension(wt,St-1):nt.ShapeUtil.sizeToDimension(_t,St-1),Rt=Tt?nt.ShapeUtil.sizeFromDimension(wt,St-1):nt.ShapeUtil.sizeFromDimension(_t,St-1),It=ct(vt,Tt?At:yt,bt,Pt,Rt);return Tt?(0,ot.transpose)(vt,It,Ct):It};const ct=(vt,yt,bt,_t,xt)=>{const St=ut(vt,yt[0],_t,xt,[_t]),Tt=vt.run(Object.assign(Object.assign({},st),{cacheHint:bt.cacheKey,get:()=>St}),yt),wt=ft(vt,yt[0],_t,xt,St.output.dims,[_t]),Ct=vt.run(Object.assign(Object.assign({},dt),{cacheHint:bt.cacheKey,get:()=>wt}),[yt[0],Tt]),Et=gt(vt,yt[0],_t,xt,St.output.dims,wt.output.dims);return[vt.run(Object.assign(Object.assign({},ht),{cacheHint:bt.cacheKey,get:()=>Et}),[yt[0],Tt,Ct])]},ut=(vt,yt,bt,_t,xt)=>{const[St,Tt]=vt.calculateTextureWidthAndHeight(yt.dims,at.TextureType.unpacked),wt=xt.length;if(bt<1||_t<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(xt.length!==1)throw new Error("Dimensionality of the output should be 1");if(xt[0]!==bt)throw new Error("Shape of the output should be equal to logical row count");const Ct=(0,it.getGlsl)(vt.session.backend.glContext.version),Et=`
      float process(int[${wt}] indices) {
        int logical_row_start_offset = indices[0] * ${_t};

        float max = getColorAsFloat(${Ct.texture2D}(A, offsetToCoords(logical_row_start_offset, ${St},
        ${Tt} )));
        for(int i=1; i<${_t}; ++i)
        {
          float current = getColorAsFloat(${Ct.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${St}, ${Tt})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},st),{output:{dims:xt,type:yt.type,textureType:at.TextureType.unpacked},shaderSource:Et})},ft=(vt,yt,bt,_t,xt,St)=>{const[Tt,wt]=vt.calculateTextureWidthAndHeight(yt.dims,at.TextureType.unpacked),Ct=St.length;if(bt<1||_t<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(St.length!==1)throw new Error("Dimensionality of the output should be 1");if(St[0]!==bt)throw new Error("Shape of the output should be equal to logical row count");if(xt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(xt[0]!==bt)throw new Error("Shape of the intermediate results should be equal to logical row count");const Et=`
      float process(int[${Ct}] indices) {
        int logical_row_start_offset = indices[0] * ${_t};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${_t}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,it.getGlsl)(vt.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${Tt}, ${wt}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},dt),{output:{dims:St,type:yt.type,textureType:at.TextureType.unpacked},shaderSource:Et})},gt=(vt,yt,bt,_t,xt,St)=>{const[Tt,wt]=vt.calculateTextureWidthAndHeight(yt.dims,at.TextureType.unpacked),Ct=yt.dims.length;if(bt<1||_t<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(xt.length!==1||St.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(xt[0]!==bt||St[0]!==bt)throw new Error("Shape of the intermediate results should be equal to logical row count");const Et=`
      float process(int[${Ct}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${Tt}, ${wt});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${_t};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},ht),{output:{dims:yt.dims,type:yt.type,textureType:at.TextureType.unpacked},shaderSource:Et})},mt=vt=>{if(!vt||vt.length!==1)throw new Error("Softmax requires 1 input.");if(vt[0].type!=="float32"&&vt[0].type!=="float64")throw new Error("Invalid input type")}},5975:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseSplitAttributes=_.split=void 0;const tt=et(246),nt=et(2517),it=et(2039),at={name:"Split",inputNames:["A"],inputTypes:[it.TextureType.unpacked]};_.split=(ht,ct,ut)=>{dt(ct);const ft=nt.ShapeUtil.normalizeAxis(ut.axis,ct[0].dims.length),gt=ot(ht,ct,ft,ut),mt=[];for(let vt=0;vt<gt;++vt)mt.push(ht.run(Object.assign(Object.assign({},at),{cacheHint:`${ut.cacheKey};${vt}`,get:()=>st(ht,ct[0],ut,ft,vt)}),ct));return mt},_.parseSplitAttributes=ht=>{const ct=ht.attributes.getInt("axis",0),ut=ht.attributes.getInts("split",[]),ft=ht.outputs.length;return(0,tt.createAttributeWithCacheKey)({axis:ct,split:ut,numOutputs:ft})};const ot=(ht,ct,ut,ft)=>{const[,gt]=nt.SplitUtil.splitShape(ct[0].dims,ut,ft.split,ft.numOutputs);return gt.length},st=(ht,ct,ut,ft,gt)=>{const[mt,vt]=nt.SplitUtil.splitShape(ct.dims,ft,ut.split,ut.numOutputs),yt=vt[gt],bt=mt[gt],_t=`
      float process(int indices[${bt.length}]) {
        indices[${ft}] += ${yt};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},at),{cacheHint:`${ut.cacheKey}:${gt}`,output:{dims:bt,type:ct.type,textureType:it.TextureType.unpacked},shaderSource:_t})},dt=ht=>{if(!ht||ht.length!==1)throw new Error("Split requires one input.");if(ht[0].type!=="int8"&&ht[0].type!=="uint8"&&ht[0].type!=="int16"&&ht[0].type!=="uint16"&&ht[0].type!=="int32"&&ht[0].type!=="uint32"&&ht[0].type!=="float32"&&ht[0].type!=="float64"&&ht[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseSqueezeAttributes=_.squeezeV13=_.squeeze=void 0;const tt=et(2517);_.squeeze=(at,ot,st)=>{nt(ot);const dt=tt.ShapeUtil.squeezeShape(ot[0].dims,st);return[at.reshapeUnpacked(ot[0],dt)]},_.squeezeV13=(at,ot)=>(it(ot),(0,_.squeeze)(at,[ot[0]],Array.from(ot[1].integerData))),_.parseSqueezeAttributes=at=>at.attributes.getInts("axes");const nt=at=>{if(!at||at.length!==1)throw new Error("Squeeze requires 1 input.");if(at[0].type==="string")throw new Error("invalid input tensor types.")},it=at=>{if(!at||at.length!==2)throw new Error("Squeeze requires 2 inputs.");if(at[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.sum=void 0;const tt=et(5060),nt=et(2039);_.sum=(ot,st)=>{at(st);const dt={name:"Sum",inputNames:st.map((ht,ct)=>`X${ct}`),inputTypes:new Array(st.length).fill(nt.TextureType.unpacked)};return[ot.run(Object.assign(Object.assign({},dt),{get:()=>it(ot,st,dt)}),st)]};const it=(ot,st,dt)=>{const ht=(0,tt.getGlsl)(ot.session.backend.glContext.version),ct=st[0].dims.slice(),ut=`
      void main() {
        vec4 result = ${st.map((ft,gt)=>`${ht.texture2D}(X${gt},TexCoords)`).join(" + ")};
        ${ht.output} = result;
      }
    `;return Object.assign(Object.assign({},dt),{output:{dims:ct,type:st[0].type,textureType:nt.TextureType.unpacked},hasMain:!0,shaderSource:ut})},at=ot=>{if(!ot||ot.length===0)throw new Error("Sum requires inputs.");const st=ot[0].dims.length;for(let dt=1;dt<ot.length;dt++){if(st!==ot[dt].dims.length)throw new Error("Input shapes are mismatched.");for(let ht=0;ht<st;ht++)if(ot[0].dims[ht]!==ot[dt].dims[ht])throw new Error("Input shapes are not matched.")}if(ot[0].type!=="float32"&&ot[0].type!=="float64")throw new Error("Invalid input type.");for(let dt=1;dt<ot.length;dt++)if(ot[0].type!==ot[dt].type)throw new Error("Input types are not matched.")}},5723:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tile=void 0;const tt=et(782),nt=et(2039);_.tile=(ot,st)=>{at(st);const dt={name:"Tile",inputNames:["A"],inputTypes:[nt.TextureType.unpacked]};return[ot.run(Object.assign(Object.assign({},dt),{get:()=>it(ot,st,dt)}),st)]};const it=(ot,st,dt)=>{const ht=st[0].dims.slice(),ct=new Array(ht.length),ut=[];for(let mt=0;mt<ht.length;mt++)ct[mt]=ht[mt]*st[1].numberData[mt],ut.push(`inputIdx[${mt}] = int(mod(float(outputIdx[${mt}]), ${ht[mt]}.));`);const ft=ct.length,gt=`
      float process(int outputIdx[${ft}]) {
        int inputIdx[${ft}];
        ${ut.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},dt),{output:{dims:ct,type:st[0].type,textureType:nt.TextureType.unpacked},shaderSource:gt})},at=ot=>{if(!ot||ot.length!==2)throw new Error("Tile requires 2 input.");if(ot[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(ot[1].dims[0]!==ot[0].dims.length)throw new Error("Invalid input shape.");if(tt.NUMBER_TYPES.indexOf(ot[0].type)===-1)throw new Error("Invalid input type.");if(ot[1].type!=="int32"&&ot[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseTransposeAttributes=_.transpose=void 0;const tt=et(246),nt=et(2517),it=et(2039),at={name:"Transpose",inputNames:["A"],inputTypes:[it.TextureType.unpacked]};_.transpose=(ut,ft,gt)=>(ct(ft),[ut.run(Object.assign(Object.assign({},at),{cacheHint:gt.cacheKey,get:()=>ot(ut,ft[0],gt.perm)}),ft)]),_.parseTransposeAttributes=ut=>(0,tt.createAttributeWithCacheKey)({perm:ut.attributes.getInts("perm",[])});const ot=(ut,ft,gt)=>{const mt=ft.dims;gt=st(mt,gt);const vt=dt(mt,gt),yt=mt.length,bt=`
      ${ht("perm",gt,yt)}
      float process(int indices[${yt}]) {
        int a[${yt}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},at),{output:{dims:vt,type:ft.type,textureType:it.TextureType.unpacked},shaderSource:bt})},st=(ut,ft)=>(ft&&ft.length!==ut.length&&(ft=[...ut.keys()].reverse()),ft),dt=(ut,ft)=>(ft=st(ut,ft),nt.ShapeUtil.sortBasedOnPerm(ut,ft)),ht=(ut,ft,gt)=>{const mt=[];mt.push(`void ${ut}(out int a[${gt}], int src[${gt}]) {`);for(let vt=0;vt<gt;++vt)mt.push(`	a[${ft[vt]}]=src[${vt}];`);return mt.push("	}"),mt.join(`
`)},ct=ut=>{if(!ut||ut.length!==1)throw new Error("Transpose requires 1 input.");if(ut[0].type!=="float32"&&ut[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.encodeAsUint8=void 0;const tt=et(5060),nt=et(2039);_.encodeAsUint8=(it,at)=>{const ot=at.shape,st=(0,tt.getGlsl)(it.session.backend.glContext.version),dt=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${st.texture2D}(X,TexCoords).r;
      ${st.output} = encodeAsUint8(value);
    }`,ht={name:"Uint8Encode",inputTypes:[nt.TextureType.unpacked],inputNames:["X"],output:{dims:ot,type:at.tensor.type,textureType:nt.TextureType.downloadUint8AsFloat},shaderSource:dt,hasMain:!0};return it.executeProgram(ht,[at.tensor])}},4909:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tanh=_.tan=_.sqrt=_.sin=_.sigmoid=_.relu=_.not=_.neg=_.log=_.parseLeakyReluAttributes=_.leakyRelu=_.identity=_.floor=_.exp=_.parseEluAttributes=_.elu=_.cos=_.ceil=_.clipV11=_.parseClipAttributes=_.clip=_.atan=_.asin=_.acos=_.abs=_.glslTanh=_.glslTan=_.glslSqrt=_.glslSigmoid=_.glslRelu=_.glslSin=_.glslNot=_.glslNeg=_.glslLog=_.glslLeakyRelu=_.glslIdentity=_.glslClip=_.glslFloor=_.glslExp=_.glslElu=_.glslCos=_.glslCeil=_.glslAtan=_.glslAsin=_.glslAcos=_.glslAbs=void 0;const tt=et(246),nt=et(2517),it=et(8520),at=et(5060),ot=et(2039);function st(){return It("abs")}function dt(){return It("acos")}function ht(){return It("asin")}function ct(){return It("atan")}function ut(){return It("ceil")}function ft(){return It("cos")}function gt($t){const Lt="elu";return{body:`
  const float alpha = float(${$t});

  float ${Lt}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${Lt}_(vec4 v) {
    return vec4(${Lt}_(v.x), ${Lt}_(v.y), ${Lt}_(v.z), ${Lt}_(v.w));
  }
  `,name:Lt,type:it.FunctionType.ValueBased}}function mt(){return It("exp")}function vt(){return It("floor")}function yt($t,Lt){const kt="clip";return{body:`
  const float min = float(${$t});
  const float max = float(${Lt});

  float ${kt}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${kt}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:kt,type:it.FunctionType.ValueBased}}function bt(){const $t="indentity";return{body:`
  float ${$t}_(float a) {
    return a;
  }
  vec4 ${$t}_(vec4 v) {
    return v;
  }
  `,name:$t,type:it.FunctionType.ValueBased}}function _t($t){const Lt="leakyRelu";return{body:`
  const float alpha = float(${$t});

  float ${Lt}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${Lt}_(vec4 v) {
    return vec4(${Lt}_(v.x), ${Lt}_(v.y), ${Lt}_(v.z), ${Lt}_(v.w));
  }
  `,name:Lt,type:it.FunctionType.ValueBased}}function xt(){return It("log")}function St(){const $t="neg";return{body:`
  float ${$t}_(float a) {
    return -a;
  }
  vec4 ${$t}_(vec4 v) {
    return -v;
  }
  `,name:$t,type:it.FunctionType.ValueBased}}function Tt(){const $t="not";return{body:`
  float ${$t}_(float a) {
    return float( ! bool(a) );
  }
  bool ${$t}_(bool a) {
    return !a;
  }
  vec4 ${$t}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${$t}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:$t,type:it.FunctionType.ValueBased}}function wt(){return It("sin")}function Ct(){const $t="relu";return{body:`
  float ${$t}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${$t}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:$t,type:it.FunctionType.ValueBased}}function Et(){const $t="sigmoid";return{body:`
  float ${$t}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${$t}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:$t,type:it.FunctionType.ValueBased}}function At(){return It("sqrt")}function Pt(){return It("tan")}function Rt(){const $t="tanh";return{body:`
  float ${$t}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${$t}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:$t,type:it.FunctionType.ValueBased}}function It($t){return{body:`
  float ${$t}_(float a) {
    return ${$t}(a);
  }
  vec4 ${$t}_(vec4 v) {
    return ${$t}(v);
  }
  `,name:$t,type:it.FunctionType.ValueBased}}_.glslAbs=st,_.glslAcos=dt,_.glslAsin=ht,_.glslAtan=ct,_.glslCeil=ut,_.glslCos=ft,_.glslElu=gt,_.glslExp=mt,_.glslFloor=vt,_.glslClip=yt,_.glslIdentity=bt,_.glslLeakyRelu=_t,_.glslLog=xt,_.glslNeg=St,_.glslNot=Tt,_.glslSin=wt,_.glslRelu=Ct,_.glslSigmoid=Et,_.glslSqrt=At,_.glslTan=Pt,_.glslTanh=Rt;const Mt=($t,Lt,kt,Nt)=>{const Vt=$t.session.pack?ot.TextureType.packed:ot.TextureType.unpacked,zt={name:kt.name,inputTypes:[Vt],inputNames:["A"],cacheHint:Nt};return Object.assign(Object.assign({},zt),{get:()=>((Xt,Wt,nr,Jt)=>{const lr=Xt.session.pack?ot.TextureType.packed:ot.TextureType.unpacked,pr=(0,at.getGlsl)(Xt.session.backend.glContext.version);return Object.assign(Object.assign({},Wt),{output:{dims:nr.dims,type:nr.type,textureType:lr},shaderSource:`
     ${Jt.body}
     void main() {
       vec4 v = ${pr.texture2D}(A, TexCoords);
       v = ${Jt.name}_(v);
       ${pr.output} = v;
     }
     `,hasMain:!0})})($t,zt,Lt,kt)})};_.abs=($t,Lt)=>[$t.run(Mt($t,Lt[0],st()),Lt)],_.acos=($t,Lt)=>[$t.run(Mt($t,Lt[0],dt()),Lt)],_.asin=($t,Lt)=>[$t.run(Mt($t,Lt[0],ht()),Lt)],_.atan=($t,Lt)=>[$t.run(Mt($t,Lt[0],ct()),Lt)],_.clip=($t,Lt,kt)=>[$t.run(Mt($t,Lt[0],yt(kt.min,kt.max),kt.cacheKey),Lt)],_.parseClipAttributes=$t=>(0,tt.createAttributeWithCacheKey)({min:$t.attributes.getFloat("min",nt.MIN_CLIP),max:$t.attributes.getFloat("max",nt.MAX_CLIP)}),_.clipV11=($t,Lt)=>{const kt=Ot($t,Lt);return(0,_.clip)($t,[Lt[0]],kt)};const Ot=($t,Lt)=>{if(Lt.length>=3&&(!$t.session.isInitializer(Lt[1].dataId)||!$t.session.isInitializer(Lt[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const kt=Lt.length>=3?Lt[1].numberData[0]:nt.MIN_CLIP,Nt=Lt.length>=3?Lt[2].numberData[0]:nt.MAX_CLIP;return(0,tt.createAttributeWithCacheKey)({min:kt,max:Nt})};_.ceil=($t,Lt)=>[$t.run(Mt($t,Lt[0],ut()),Lt)],_.cos=($t,Lt)=>[$t.run(Mt($t,Lt[0],ft()),Lt)],_.elu=($t,Lt,kt)=>[$t.run(Mt($t,Lt[0],gt(kt.alpha),kt.cacheKey),Lt)],_.parseEluAttributes=$t=>(0,tt.createAttributeWithCacheKey)({alpha:$t.attributes.getFloat("alpha",1)}),_.exp=($t,Lt)=>[$t.run(Mt($t,Lt[0],mt()),Lt)],_.floor=($t,Lt)=>[$t.run(Mt($t,Lt[0],vt()),Lt)],_.identity=($t,Lt)=>[$t.run(Mt($t,Lt[0],bt()),Lt)],_.leakyRelu=($t,Lt,kt)=>[$t.run(Mt($t,Lt[0],_t(kt.alpha),kt.cacheKey),Lt)],_.parseLeakyReluAttributes=$t=>(0,tt.createAttributeWithCacheKey)({alpha:$t.attributes.getFloat("alpha",.01)}),_.log=($t,Lt)=>[$t.run(Mt($t,Lt[0],xt()),Lt)],_.neg=($t,Lt)=>[$t.run(Mt($t,Lt[0],St()),Lt)],_.not=($t,Lt)=>[$t.run(Mt($t,Lt[0],Tt()),Lt)],_.relu=($t,Lt)=>[$t.run(Mt($t,Lt[0],Ct()),Lt)],_.sigmoid=($t,Lt)=>[$t.run(Mt($t,Lt[0],Et()),Lt)],_.sin=($t,Lt)=>[$t.run(Mt($t,Lt[0],wt()),Lt)],_.sqrt=($t,Lt)=>[$t.run(Mt($t,Lt[0],At()),Lt)],_.tan=($t,Lt)=>[$t.run(Mt($t,Lt[0],Pt()),Lt)],_.tanh=($t,Lt)=>[$t.run(Mt($t,Lt[0],Rt()),Lt)]},5611:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createUnpackProgramInfoLoader=_.createUnpackProgramInfo=void 0;const tt=et(5060),nt=et(2039),it=et(9390),at=et(2827),ot={name:"unpack",inputNames:["A"],inputTypes:[nt.TextureType.packed]};_.createUnpackProgramInfo=(st,dt)=>{const ht=dt.dims.length,ct=(0,at.getChannels)("rc",ht),ut=ct.slice(-2),ft=(0,it.getCoordsDataType)(ht),gt=(0,at.unpackFromChannel)(),mt=dt.dims.length===0?"":function(bt,_t){if(bt===1)return"rc";let xt="";for(let St=0;St<bt;St++)xt+=_t[St],St<bt-1&&(xt+=",");return xt}(ht,ct),vt=ht<=1?"rc":`vec2(${ut.join(",")})`,yt=`
    ${gt}
    void main() {
      ${ft} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${mt});

       ${(0,tt.getGlsl)(st.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${vt}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},ot),{hasMain:!0,output:{dims:dt.dims,type:dt.type,textureType:nt.TextureType.unpacked},shaderSource:yt})},_.createUnpackProgramInfoLoader=(st,dt)=>Object.assign(Object.assign({},ot),{get:()=>(0,_.createUnpackProgramInfo)(st,dt)})},8428:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseUnsqueezeAttributes=_.unsqueezeV13=_.unsqueeze=void 0;const tt=et(2517);_.unsqueeze=(at,ot,st)=>{nt(ot);const dt=tt.ShapeUtil.unsqueezeShape(ot[0].dims,st);return[at.reshapeUnpacked(ot[0],dt)]},_.unsqueezeV13=(at,ot)=>(it(ot),(0,_.unsqueeze)(at,[ot[0]],Array.from(ot[1].integerData))),_.parseUnsqueezeAttributes=at=>at.attributes.getInts("axes");const nt=at=>{if(!at||at.length!==1)throw new Error("Unsqueeze requires 1 input.");if(at[0].type==="string")throw new Error("invalid input tensor types.")},it=at=>{if(!at||at.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(at[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.scalesValidation=_.validateInputs=_.parseUpsampleAttributes=_.parseUpsampleAttributesV9=_.parseUpsampleAttributesV7=_.upsample=void 0;const tt=et(246),nt=et(5060),it=et(2039),at={name:"Upsample",inputNames:["X"],inputTypes:[it.TextureType.unpacked]};_.upsample=(st,dt,ht)=>((0,_.validateInputs)(dt,ht),[st.run(Object.assign(Object.assign({},at),{cacheHint:ht.cacheKey,get:()=>ot(st,dt,ht)}),dt)]),_.parseUpsampleAttributesV7=st=>(0,_.parseUpsampleAttributes)(st,7),_.parseUpsampleAttributesV9=st=>(0,_.parseUpsampleAttributes)(st,9),_.parseUpsampleAttributes=(st,dt)=>{const ht=dt>=10,ct=st.attributes.getString("mode","nearest");if(ct!=="nearest"&&ct!=="linear"&&(dt<11||ct!=="cubic"))throw new Error(`unrecognized mode: ${ct}`);let ut=[];dt<9&&(ut=st.attributes.getFloats("scales"),(0,_.scalesValidation)(ut,ct,ht));const ft=st.attributes.getFloat("extrapolation_value",0),gt=dt>10?st.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(gt)===-1)throw new Error(`coordinate_transform_mode '${gt}' is not supported`);const mt=gt==="tf_crop_and_resize",vt=mt,yt=ct==="nearest"&&dt>=11?st.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(yt)===-1)throw new Error(`nearest_mode '${yt}' is not supported`);const bt=st.attributes.getFloat("cubic_coeff_a",-.75),_t=st.attributes.getInt("exclude_outside",0)!==0;if(_t&&ct!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const xt=dt<11||ct==="nearest"&&gt==="asymmetric"&&yt==="floor";let St=0,Tt=0,wt=0;return dt>10?st.inputs.length>2?(St=1,Tt=2,wt=3):(Tt=1,wt=2):dt===9&&(Tt=1),(0,tt.createAttributeWithCacheKey)({opset:dt,isResize:ht,mode:ct,scales:ut,extrapolationValue:ft,coordinateTransformMode:gt,useExtrapolation:vt,needRoiInput:mt,nearestMode:yt,cubicCoefficientA:bt,excludeOutside:_t,useNearest2xOptimization:xt,roiInputIdx:St,scalesInputIdx:Tt,sizesInputIdx:wt})};const ot=(st,dt,ht)=>{const ct=(0,nt.getGlsl)(st.session.backend.glContext.version),[ut,ft]=st.calculateTextureWidthAndHeight(dt[0].dims,it.TextureType.unpacked),gt=dt[0].dims.map((wt,Ct)=>Math.floor(wt*ht.scales[Ct])),[mt,vt]=st.calculateTextureWidthAndHeight(gt,it.TextureType.unpacked),yt=gt.length,bt=new Array(yt),_t=new Array(yt);let xt=`
      int output_pitches[${yt}];
      int input_pitches[${yt}];
      `;for(let wt=yt-1;wt>=0;wt--)bt[wt]=wt===yt-1?1:bt[wt+1]*gt[wt+1],_t[wt]=wt===yt-1?1:_t[wt+1]*dt[0].dims[wt+1],xt+=`
        output_pitches[${wt}] = ${bt[wt]};
        input_pitches[${wt}] = ${_t[wt]};
        `;const St=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${ut}, ${ft});
        float value = getColorAsFloat(${ct.texture2D}(X, coords));
        return value;
      }
      `,Tt=ht.mode==="nearest"?`
    ${St}
    float process(int indices[${yt}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${mt}, ${vt});

      ${xt}

      int d, m;
      for (int dim = 0; dim < ${yt}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:yt===4?`
    ${St}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${mt}, ${vt});

      ${xt}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${dt[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${St}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${mt}, ${vt});

      ${xt}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${dt[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},at),{output:{dims:gt,type:dt[0].type,textureType:it.TextureType.unpacked},shaderSource:Tt,variables:[{name:"scales",type:"int",arrayLength:ht.scales.length,data:ht.scales.map(wt=>Math.ceil(wt))}]})};_.validateInputs=(st,dt)=>{if(!st||dt.opset<9&&st.length!==1||dt.opset>=9&&dt.opset<11&&st.length!==2||dt.opset>=11&&st.length<2)throw new Error("invalid inputs.");if(dt.scales.length>0&&st[0].dims.length!==dt.scales.length)throw new Error("Invalid input shape.");if(st[0].type==="string")throw new Error("Invalid input tensor types.")},_.scalesValidation=(st,dt,ht)=>{if(ht){for(const ct of st)if(ct<=0)throw new Error("Scale value should be greater than 0.")}else for(const ct of st)if(ct<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(dt!=="linear"&&dt!=="cubic"||st.length===2||st.length===4&&st[0]===1&&st[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${ht?"Resize":"Upsample"} opeartor.`)}},1958:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ProgramManager=void 0;const tt=et(1670),nt=et(6231),it=et(8879),at=et(5060);_.ProgramManager=class{constructor(ot,st,dt){this.profiler=ot,this.glContext=st,this.textureLayoutStrategy=dt,this.repo=new Map,this.attributesBound=!1}getArtifact(ot){return this.repo.get(ot)}setArtifact(ot,st){this.repo.set(ot,st)}run(ot,st,dt){var ht;this.profiler.event("op",`ProgramManager.run ${(ht=ot.programInfo.name)!==null&&ht!==void 0?ht:"unknown kernel"}`,()=>{var ct;const ut=this.glContext.gl,ft=ot.program;ut.useProgram(ft);try{this.bindOutput(dt),this.attributesBound||this.bindAttributes(ot.attribLocations),this.bindUniforms(ot.uniformLocations,(ct=ot.programInfo.variables)!==null&&ct!==void 0?ct:[],st)}catch(gt){throw nt.Logger.error("ProgramManager",ot.programInfo.shaderSource),gt}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(ot=>this.glContext.deleteProgram(ot.program))}build(ot,st,dt){return this.profiler.event("backend","ProgramManager.build",()=>{const ht=new it.GlslPreprocessor(this.glContext,ot,st,dt),ct=ht.preprocess(),ut=this.compile(ct);return{programInfo:ot,program:ut,uniformLocations:this.getUniformLocations(ut,ht.context.programInfo.inputNames,ht.context.programInfo.variables),attribLocations:this.getAttribLocations(ut)}})}compile(ot){if(!this.vertexShader){nt.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const ht=(0,at.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(ht,this.glContext.gl.VERTEX_SHADER)}tt.env.debug&&nt.Logger.verbose("ProrgramManager",`FragShader:
${ot}
`);const st=this.glContext.compileShader(ot,this.glContext.gl.FRAGMENT_SHADER),dt=this.glContext.createProgram(this.vertexShader,st);return this.glContext.deleteShader(st),dt}bindOutput(ot){const st=ot.width,dt=ot.height;nt.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${st}/${dt}, shape=${ot.shape}, type=${ot.tensor.type}`),this.glContext.attachFramebuffer(ot.texture,st,dt)}bindAttributes(ot){const st=ot.position,dt=ot.textureCoord;this.glContext.setVertexAttributes(st,dt),this.attributesBound=!0}bindUniforms(ot,st,dt){var ht;const ct=this.glContext.gl;let ut=0;for(const{name:ft,type:gt,location:mt,arrayLength:vt}of ot){const yt=(ht=st.find(bt=>bt.name===ft))===null||ht===void 0?void 0:ht.data;if(gt!=="sampler2D"&&!yt)throw new Error(`variable '${ft}' does not have data defined in program info`);switch(gt){case"sampler2D":this.bindTexture(dt[ut],mt,ut),ut++;break;case"float":vt?ct.uniform1fv(mt,yt):ct.uniform1f(mt,yt);break;case"int":vt?ct.uniform1iv(mt,yt):ct.uniform1i(mt,yt);break;default:throw new Error(`Uniform not implemented: ${gt}`)}}}bindTexture(ot,st,dt){this.glContext.bindTextureToUniform(ot.texture,dt,st)}getAttribLocations(ot){return{position:this.getAttribLocation(ot,"position"),textureCoord:this.getAttribLocation(ot,"textureCoord")}}getUniformLocations(ot,st,dt){const ht=[];if(st)for(const ct of st)ht.push({name:ct,type:"sampler2D",location:this.getUniformLocation(ot,ct)});if(dt)for(const ct of dt)ht.push(Object.assign(Object.assign({},ct),{location:this.getUniformLocation(ot,ct.name)}));return ht}getUniformLocation(ot,st){const dt=this.glContext.gl.getUniformLocation(ot,st);if(dt===null)throw new Error(`Uniform ${st} not found.`);return dt}getAttribLocation(ot,st){return this.glContext.gl.getAttribLocation(ot,st)}}},6416:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLSessionHandler=void 0;const tt=et(6231),nt=et(1047),it=et(8316),at=et(1640),ot=et(1958),st=et(7859),dt=et(5702);_.WebGLSessionHandler=class{constructor(ht,ct){this.backend=ht,this.context=ct,this.layoutStrategy=new st.PreferLogicalStrategy(ht.glContext.maxTextureSize),this.programManager=new ot.ProgramManager(this.context.profiler,ht.glContext,this.layoutStrategy),this.textureManager=new dt.TextureManager(ht.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:ht.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=ht.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new it.WebGLInferenceHandler(this)}onGraphInitialized(ht){const ct=ht.getValues().filter(ut=>ut.from===-1&&ut.tensor).map(ut=>ut.tensor.dataId);this.initializers=new Set(ct)}isInitializer(ht){return!!this.initializers&&this.initializers.has(ht)}addInitializer(ht){this.initializers.add(ht)}getTextureData(ht,ct){return ct?this.packedTextureDataCache.get(ht):this.unpackedTextureDataCache.get(ht)}setTextureData(ht,ct,ut=!1){tt.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),ut?this.packedTextureDataCache.set(ht,ct):this.unpackedTextureDataCache.set(ht,ct)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(ht=>this.textureManager.releaseTexture(ht,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(ht=>this.textureManager.releaseTexture(ht,!0)),this.unpackedTextureDataCache=new Map}resolve(ht,ct,ut){const ft=(0,nt.resolveOperator)(ht,ct,at.WEBGL_OP_RESOLVE_RULES);return{impl:ft.opImpl,context:ft.opInit?ft.opInit(ht,ut):ht}}}},7769:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Uint8DataEncoder=_.RGBAFloatDataEncoder=_.RedFloat32DataEncoder=void 0;const tt=et(6231);_.RedFloat32DataEncoder=class{constructor(nt,it=1){if(it===1)this.internalFormat=nt.R32F,this.format=nt.RED,this.textureType=nt.FLOAT,this.channelSize=it;else{if(it!==4)throw new Error(`Invalid number of channels: ${it}`);this.internalFormat=nt.RGBA32F,this.format=nt.RGBA,this.textureType=nt.FLOAT,this.channelSize=it}}encode(nt,it){let at,ot;return nt.constructor!==Float32Array&&(tt.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),ot=new Float32Array(nt)),it*this.channelSize>nt.length?(tt.Logger.warning("Encoder","Source data too small. Allocating larger array"),ot=nt,at=this.allocate(it*this.channelSize),ot.forEach((st,dt)=>at[dt]=st)):(ot=nt,at=ot),at}allocate(nt){return new Float32Array(4*nt)}decode(nt,it){return this.channelSize===1?nt.filter((at,ot)=>ot%4==0).subarray(0,it):nt.subarray(0,it)}},_.RGBAFloatDataEncoder=class{constructor(nt,it=1,at){if(it!==1&&it!==4)throw new Error(`Invalid number of channels: ${it}`);this.internalFormat=nt.RGBA,this.format=nt.RGBA,this.channelSize=it,this.textureType=at||nt.FLOAT}encode(nt,it){let at=nt;return this.channelSize===1&&(tt.Logger.verbose("Encoder","Exploding into a larger array"),at=this.allocate(it),nt.forEach((ot,st)=>at[4*st]=ot)),at}allocate(nt){return new Float32Array(4*nt)}decode(nt,it){return this.channelSize===1?nt.filter((at,ot)=>ot%4==0).subarray(0,it):nt.subarray(0,it)}},_.Uint8DataEncoder=class{constructor(nt,it=1){if(this.channelSize=4,it===1)this.internalFormat=nt.ALPHA,this.format=nt.ALPHA,this.textureType=nt.UNSIGNED_BYTE,this.channelSize=it;else{if(it!==4)throw new Error(`Invalid number of channels: ${it}`);this.internalFormat=nt.RGBA,this.format=nt.RGBA,this.textureType=nt.UNSIGNED_BYTE,this.channelSize=it}}encode(nt,it){return new Uint8Array(nt.buffer,nt.byteOffset,nt.byteLength)}allocate(nt){return new Uint8Array(nt*this.channelSize)}decode(nt,it){if(nt instanceof Uint8Array)return nt.subarray(0,it);throw new Error(`Invalid array type: ${nt.constructor}`)}}},7859:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getBatchDim=_.sizeToSquarishShape=_.getRowsCols=_.sizeFromShape=_.isInt=_.parseAxisParam=_.squeezeShape=_.PreferLogicalStrategy=_.AlwaysKeepOriginalSizeStrategy=void 0;const tt=et(6231),nt=et(2517);function it(ht,ct){const ut=[],ft=[],gt=ct!=null&&Array.isArray(ct)&&ct.length===0,mt=ct==null||gt?null:at(ct,ht).sort();let vt=0;for(let yt=0;yt<ht.length;++yt){if(mt!=null){if(mt[vt]===yt&&ht[yt]!==1)throw new Error(`Can't squeeze axis ${yt} since its dim '${ht[yt]}' is not 1`);(mt[vt]==null||mt[vt]>yt)&&ht[yt]===1&&(ut.push(ht[yt]),ft.push(yt)),mt[vt]<=yt&&vt++}ht[yt]!==1&&(ut.push(ht[yt]),ft.push(yt))}return{newShape:ut,keptDims:ft}}function at(ht,ct){const ut=ct.length;return ht=ht==null?ct.map((ft,gt)=>gt):[].concat(ht),(0,nt.assert)(ht.every(ft=>ft>=-ut&&ft<ut),()=>`All values in axis param must be in range [-${ut}, ${ut}) but got axis ${ht}`),(0,nt.assert)(ht.every(ot),()=>`All values in axis param must be integers but got axis ${ht}`),ht.map(ft=>ft<0?ut+ft:ft)}function ot(ht){return ht%1==0}function st(ht){if(ht.length===0)return 1;let ct=ht[0];for(let ut=1;ut<ht.length;ut++)ct*=ht[ut];return ct}function dt(ht){const ct=Math.ceil(Math.sqrt(ht));return[ct,Math.ceil(ht/ct)]}_.AlwaysKeepOriginalSizeStrategy=class{constructor(ht){this.maxTextureSize=ht}computeTextureWH(ht,ct){if(ht.length===0)return[1,1];const ut=this.maxTextureSize;if(ct&&ct.breakAxis!==void 0){const mt=ct.breakAxis>=ht.length?1:ht.slice(ct.breakAxis).reduce((yt,bt)=>yt*bt),vt=ct.breakAxis<=0?1:ht.slice(0,ct.breakAxis).reduce((yt,bt)=>yt*bt);if(!(mt>ut||vt>ut))return[mt,vt];tt.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${ht}, breakAxis:${ct.breakAxis}`)}const ft=ht.reduce((mt,vt)=>mt*vt);let gt=Math.floor(Math.sqrt(ft));for(;gt<ut&&gt<ft&&ft%gt!=0;gt++);if(gt>=ut||ft%gt!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${ht}`);return[gt,ft/gt]}},_.PreferLogicalStrategy=class{constructor(ht){this.maxTextureSize=ht}computeTextureWH(ht,ct){const ut=this.computeTexture(ht,ct);return ct&&ct.isPacked&&(ut[0]/=2,ut[1]/=2),ct&&ct.reverseWH?[ut[1],ut[0]]:ut}computeTexture(ht,ct){const ut=ct&&ct.isPacked;if(ht.length===0)return ut?[2,2]:[1,1];let ft=this.maxTextureSize;if(ct&&ct.breakAxis!==void 0){const vt=ct.breakAxis>=ht.length?1:ht.slice(ct.breakAxis).reduce((bt,_t)=>bt*_t),yt=ct.breakAxis<=0?1:ht.slice(0,ct.breakAxis).reduce((bt,_t)=>bt*_t);if(!(vt>ft||yt>ft))return[vt,yt];tt.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${ht}, breakAxis:${ct.breakAxis}`)}let gt=ht.slice(0);ut&&(ft*=2,gt=gt.map((vt,yt)=>yt>=gt.length-2?gt[yt]%2==0?gt[yt]:gt[yt]+1:gt[yt]),gt.length===1&&(gt=[2,gt[0]])),gt.length!==2&&(gt=it(gt).newShape);const mt=st(gt);return gt.length<=1&&mt<=ft?[1,mt]:gt.length===2&&gt[0]<=ft&&gt[1]<=ft?gt:gt.length===3&&gt[0]*gt[1]<=ft&&gt[2]<=ft?[gt[0]*gt[1],gt[2]]:gt.length===3&&gt[0]<=ft&&gt[1]*gt[2]<=ft?[gt[0],gt[1]*gt[2]]:gt.length===4&&gt[0]*gt[1]*gt[2]<=ft&&gt[3]<=ft?[gt[0]*gt[1]*gt[2],gt[3]]:gt.length===4&&gt[0]<=ft&&gt[1]*gt[2]*gt[3]<=ft?[gt[0],gt[1]*gt[2]*gt[3]]:ut?dt(mt/4).map(vt=>2*vt):dt(mt)}},_.squeezeShape=it,_.parseAxisParam=at,_.isInt=ot,_.sizeFromShape=st,_.getRowsCols=function(ht){if(ht.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[ht.length>1?ht[ht.length-2]:1,ht[ht.length-1]]},_.sizeToSquarishShape=dt,_.getBatchDim=function(ht,ct=2){return st(ht.slice(0,ht.length-ct))}},4057:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createTextureLayoutFromShape=_.calculateTextureWidthAndHeight=_.createTextureLayoutFromTextureType=void 0;const tt=et(2517),nt=et(2039);_.createTextureLayoutFromTextureType=(it,at,ot)=>{const st=ot===nt.TextureType.unpacked||ot===nt.TextureType.unpackedReversed?1:4,dt=ot===nt.TextureType.packed,ht=ot===nt.TextureType.unpackedReversed||ot===nt.TextureType.packed,ct=ot===nt.TextureType.packedLastDimension?at.length-1:void 0,ut=ot===nt.TextureType.packedLastDimension?at.map((ft,gt)=>gt===at.length-1?4*ft:ft):void 0;return(0,_.createTextureLayoutFromShape)(it,at,st,ut,{isPacked:dt,reverseWH:ht,breakAxis:ct})},_.calculateTextureWidthAndHeight=(it,at,ot)=>{const st=(0,_.createTextureLayoutFromTextureType)(it,at,ot);return[st.width,st.height]},_.createTextureLayoutFromShape=(it,at,ot=1,st,dt)=>{const ht=!(!dt||!dt.isPacked),[ct,ut]=it.computeTextureWH(ht&&st||at,dt),ft=at.length;let gt=at.slice(0);if(ft===0&&(gt=[1]),ot===1)st=at;else if(ht){if(ot!==4)throw new Error("a packed texture must be 4-channel");st=at,ft>0&&(gt[ft-1]=Math.ceil(gt[ft-1]/2)),ft>1&&(gt[ft-2]=Math.ceil(gt[ft-2]/2))}else if(!st)throw new Error("Unpacked shape is needed when using channels > 1");return{width:ct,height:ut,channels:ot,isPacked:ht,shape:gt,strides:tt.ShapeUtil.computeStrides(gt),unpackedShape:st,reversedWH:dt&&dt.reverseWH}}},5702:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextureManager=void 0;const tt=et(6231);_.TextureManager=class{constructor(nt,it,at,ot){this.glContext=nt,this.layoutStrategy=it,this.profiler=at,this.config=ot,this.pendingRead=new Map,ot.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(nt,it,at,ot){const st=this.toEncoderType(nt),dt=this.glContext.getEncoder(st,it.channels||1,ot);if(it.isPacked&&ot===1)throw new Error("not implemented");const ht=it.width,ct=it.height;let ut,ft;if(this.config.reuseTextures){ut=`${ht}x${ct}_${dt.format}_${dt.internalFormat}_${dt.textureType}`,ft=this.inUseTextures.get(ut),ft||(ft=[],this.inUseTextures.set(ut,ft));const mt=this.idleTextures.get(ut);if(mt&&mt.length>0){const vt=mt.pop();return ft.push(vt),ot===1&&this.glContext.updateTexture(vt,ht,ct,dt,this.toTextureData(nt,at)),vt}}tt.Logger.verbose("TextureManager",`Creating new texture of size ${it.width}x${it.height}`);const gt=this.glContext.allocateTexture(ht,ct,dt,this.toTextureData(nt,at));return this.config.reuseTextures&&(ft.push(gt),this.textureLookup.set(gt,ut)),gt}readTexture(nt,it,at){return at||(at=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const ot=nt.shape.reduce((dt,ht)=>dt*ht)*at,st=this.glContext.readTexture(nt.texture,nt.width,nt.height,ot,this.toEncoderType(it),at);return this.toTensorData(it,st)})}async readTextureAsync(nt,it,at){const ot=nt.tensor.dataId;if(at||(at=1),this.pendingRead.has(ot)){const st=this.pendingRead.get(ot);return new Promise(dt=>st==null?void 0:st.push(dt))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(ot,[]);const st=nt.shape.reduce((ut,ft)=>ut*ft)*at;await this.glContext.createAndWaitForFence();const dt=this.glContext.readTexture(nt.texture,nt.width,nt.height,st,this.toEncoderType(it),at),ht=this.toTensorData(it,dt),ct=this.pendingRead.get(ot);return this.pendingRead.delete(ot),ct==null||ct.forEach(ut=>ut(ht)),ht})}readUint8TextureAsFloat(nt){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const it=nt.shape.reduce((ot,st)=>ot*st),at=this.glContext.readTexture(nt.texture,nt.width,nt.height,4*it,"byte",4);return new Float32Array(at.buffer,at.byteOffset,it)})}releaseTexture(nt,it){let at;if(this.config.reuseTextures&&(at=this.textureLookup.get(nt.texture),at)){it&&this.textureLookup.delete(at);const ot=this.inUseTextures.get(at);if(ot){const st=ot.indexOf(nt.texture);if(st!==-1){ot.splice(st,1);let dt=this.idleTextures.get(at);dt||(dt=[],this.idleTextures.set(at,dt)),dt.push(nt.texture)}}}at&&!it||(tt.Logger.verbose("TextureManager",`Deleting texture of size ${nt.width}x${nt.height}`),this.glContext.deleteTexture(nt.texture))}toTensorData(nt,it){switch(nt){case"int16":return it instanceof Int16Array?it:Int16Array.from(it);case"int32":return it instanceof Int32Array?it:Int32Array.from(it);case"int8":return it instanceof Int8Array?it:Int8Array.from(it);case"uint16":return it instanceof Uint16Array?it:Uint16Array.from(it);case"uint32":return it instanceof Uint32Array?it:Uint32Array.from(it);case"uint8":case"bool":return it instanceof Uint8Array?it:Uint8Array.from(it);case"float32":return it instanceof Float32Array?it:Float32Array.from(it);case"float64":return it instanceof Float64Array?it:Float64Array.from(it);default:throw new Error(`TensorData type ${nt} is not supported`)}}toTextureData(nt,it){if(it)return it instanceof Float32Array?it:new Float32Array(it)}toEncoderType(nt){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(_e,_)=>{var et;Object.defineProperty(_,"__esModule",{value:!0}),_.TextureType=void 0,(et=_.TextureType||(_.TextureType={}))[et.unpacked=0]="unpacked",et[et.unpackedReversed=1]="unpackedReversed",et[et.packed=2]="packed",et[et.downloadUint8AsFloat=3]="downloadUint8AsFloat",et[et.packedLastDimension=4]="packedLastDimension"},9390:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getGlChannels=_.getCoordsDataType=_.getSqueezedParams=_.squeezeInputShape=_.generateShaderFuncNameFromInputSamplerNameAtOutCoords=_.generateShaderFuncNameFromInputSamplerName=_.repeatedTry=_.getPackedShape=void 0;const tt=et(2517);_.getPackedShape=function(nt){const it=nt.length;return nt.slice(0,it-1).concat(nt[it-1]/4)},_.repeatedTry=async function(nt,it=ot=>0,at){return new Promise((ot,st)=>{let dt=0;const ht=()=>{if(nt())return void ot();dt++;const ct=it(dt);at!=null&&dt>=at?st():setTimeout(ht,ct)};ht()})},_.generateShaderFuncNameFromInputSamplerName=function(nt){return(0,tt.assert)(nt!==void 0&&nt.length!==0,()=>"empty string found for sampler name"),"get"+nt.charAt(0).toUpperCase()+nt.slice(1)},_.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(nt){return(0,tt.assert)(nt!==void 0&&nt.length!==0,()=>"empty string found for sampler name"),"get"+nt.charAt(0).toUpperCase()+nt.slice(1)+"AtOutCoords"},_.squeezeInputShape=function(nt,it){let at=JSON.parse(JSON.stringify(nt));return at=it,at},_.getSqueezedParams=function(nt,it){return it.map(at=>nt[at]).join(", ")},_.getCoordsDataType=function(nt){if(nt<=1)return"int";if(nt===2)return"ivec2";if(nt===3)return"ivec3";if(nt===4)return"ivec4";if(nt===5)return"ivec5";if(nt===6)return"ivec6";throw Error(`GPU for rank ${nt} is not yet supported`)},_.getGlChannels=function(nt=6){return["x","y","z","w","u","v"].slice(0,nt)}},7305:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createNewWebGLContext=_.createWebGLContext=void 0;const tt=et(6231),nt=et(1713),it={};function at(ot){const st=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const ct=document.createElement("canvas");return ct.width=1,ct.height=1,ct}();let dt;const ht={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!ot||ot==="webgl2")&&(dt=st.getContext("webgl2",ht),dt))try{return new nt.WebGLContext(dt,2)}catch(ct){tt.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${ct}`)}if((!ot||ot==="webgl")&&(dt=st.getContext("webgl",ht)||st.getContext("experimental-webgl",ht),dt))try{return new nt.WebGLContext(dt,1)}catch(ct){tt.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${ct}`)}throw new Error("WebGL is not supported")}_.createWebGLContext=function ot(st){let dt;st&&st!=="webgl2"||!("webgl2"in it)?st&&st!=="webgl"||!("webgl"in it)||(dt=it.webgl):dt=it.webgl2,dt=dt||at(st),st=st||dt.version===1?"webgl":"webgl2";const ht=dt.gl;return it[st]=dt,ht.isContextLost()?(delete it[st],ot(st)):(ht.disable(ht.DEPTH_TEST),ht.disable(ht.STENCIL_TEST),ht.disable(ht.BLEND),ht.disable(ht.DITHER),ht.disable(ht.POLYGON_OFFSET_FILL),ht.disable(ht.SAMPLE_COVERAGE),ht.enable(ht.SCISSOR_TEST),ht.enable(ht.CULL_FACE),ht.cullFace(ht.BACK),dt)},_.createNewWebGLContext=at},1713:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(ht,ct,ut,ft){ft===void 0&&(ft=ut);var gt=Object.getOwnPropertyDescriptor(ct,ut);gt&&!("get"in gt?!ct.__esModule:gt.writable||gt.configurable)||(gt={enumerable:!0,get:function(){return ct[ut]}}),Object.defineProperty(ht,ft,gt)}:function(ht,ct,ut,ft){ft===void 0&&(ft=ut),ht[ft]=ct[ut]}),nt=this&&this.__setModuleDefault||(Object.create?function(ht,ct){Object.defineProperty(ht,"default",{enumerable:!0,value:ct})}:function(ht,ct){ht.default=ct}),it=this&&this.__importStar||function(ht){if(ht&&ht.__esModule)return ht;var ct={};if(ht!=null)for(var ut in ht)ut!=="default"&&Object.prototype.hasOwnProperty.call(ht,ut)&&tt(ct,ht,ut);return nt(ct,ht),ct};Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLContext=_.linearSearchLastTrue=void 0;const at=et(1670),ot=it(et(7769)),st=et(9390);function dt(ht){let ct=0;for(;ct<ht.length&&ht[ct]();++ct);return ct-1}_.linearSearchLastTrue=dt,_.WebGLContext=class{constructor(ht,ct){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=ht,this.version=ct,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(ht,ct,ut,ft){const gt=this.gl,mt=gt.createTexture();gt.bindTexture(gt.TEXTURE_2D,mt),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_MIN_FILTER,gt.NEAREST),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_MAG_FILTER,gt.NEAREST),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_WRAP_S,gt.CLAMP_TO_EDGE),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_WRAP_T,gt.CLAMP_TO_EDGE);const vt=ft?ut.encode(ft,ht*ct):null;return gt.texImage2D(gt.TEXTURE_2D,0,ut.internalFormat,ht,ct,0,ut.format,ut.textureType,vt),this.checkError(),mt}updateTexture(ht,ct,ut,ft,gt){const mt=this.gl;mt.bindTexture(mt.TEXTURE_2D,ht);const vt=ft.encode(gt,ct*ut);mt.texSubImage2D(mt.TEXTURE_2D,0,0,0,ct,ut,ft.format,ft.textureType,vt),this.checkError()}attachFramebuffer(ht,ct,ut){const ft=this.gl;ft.bindTexture(ft.TEXTURE_2D,ht),ft.bindFramebuffer(ft.FRAMEBUFFER,this.framebuffer),ft.framebufferTexture2D(ft.FRAMEBUFFER,ft.COLOR_ATTACHMENT0,ft.TEXTURE_2D,ht,0),this.checkError(),ft.viewport(0,0,ct,ut),ft.scissor(0,0,ct,ut)}readTexture(ht,ct,ut,ft,gt,mt){const vt=this.gl;mt||(mt=1),this.frameBufferBound||this.attachFramebuffer(ht,ct,ut);const yt=this.getEncoder(gt,mt),bt=yt.allocate(ct*ut);return vt.bindTexture(vt.TEXTURE_2D,ht),vt.framebufferTexture2D(vt.FRAMEBUFFER,vt.COLOR_ATTACHMENT0,vt.TEXTURE_2D,ht,0),vt.readPixels(0,0,ct,ut,vt.RGBA,yt.textureType,bt),this.checkError(),yt.decode(bt,ft)}isFramebufferReady(){return!0}getActiveTexture(){const ht=this.gl;return"TEXTURE"+(ht.getParameter(this.gl.ACTIVE_TEXTURE)-ht.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(ht,ct){const ut=this.gl;ut.vertexAttribPointer(ht,3,ut.FLOAT,!1,20,0),ut.enableVertexAttribArray(ht),ct!==-1&&(ut.vertexAttribPointer(ct,2,ut.FLOAT,!1,20,12),ut.enableVertexAttribArray(ct)),this.checkError()}createProgram(ht,ct){const ut=this.gl,ft=ut.createProgram();return ut.attachShader(ft,ht),ut.attachShader(ft,ct),ut.linkProgram(ft),ft}compileShader(ht,ct){const ut=this.gl,ft=ut.createShader(ct);if(!ft)throw new Error(`createShader() returned null with type ${ct}`);if(ut.shaderSource(ft,ht),ut.compileShader(ft),ut.getShaderParameter(ft,ut.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${ut.getShaderInfoLog(ft)}
Shader source:
${ht}`);return ft}deleteShader(ht){this.gl.deleteShader(ht)}bindTextureToUniform(ht,ct,ut){const ft=this.gl;ft.activeTexture(ft.TEXTURE0+ct),this.checkError(),ft.bindTexture(ft.TEXTURE_2D,ht),this.checkError(),ft.uniform1i(ut,ct),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(at.env.debug){const ht=this.gl,ct=ht.getError();let ut="";switch(ct){case ht.NO_ERROR:return;case ht.INVALID_ENUM:ut="INVALID_ENUM";break;case ht.INVALID_VALUE:ut="INVALID_VALUE";break;case ht.INVALID_OPERATION:ut="INVALID_OPERATION";break;case ht.INVALID_FRAMEBUFFER_OPERATION:ut="INVALID_FRAMEBUFFER_OPERATION";break;case ht.OUT_OF_MEMORY:ut="OUT_OF_MEMORY";break;case ht.CONTEXT_LOST_WEBGL:ut="CONTEXT_LOST_WEBGL";break;default:ut=`Unknown WebGL Error: ${ct.toString(16)}`}throw new Error(ut)}}deleteTexture(ht){this.gl.deleteTexture(ht)}deleteProgram(ht){this.gl.deleteProgram(ht)}getEncoder(ht,ct,ut=0){if(this.version===2)return new ot.RedFloat32DataEncoder(this.gl,ct);switch(ht){case"float":return ut===1||this.isRenderFloat32Supported?new ot.RGBAFloatDataEncoder(this.gl,ct):new ot.RGBAFloatDataEncoder(this.gl,ct,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new ot.Uint8DataEncoder(this.gl,ct);default:throw new Error(`Invalid dataType: ${ht}`)}}clearActiveTextures(){const ht=this.gl;for(let ct=0;ct<this.maxTextureImageUnits;++ct)ht.activeTexture(ht.TEXTURE0+ct),ht.bindTexture(ht.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const ht=this.gl;ht.bindFramebuffer(ht.FRAMEBUFFER,null),ht.deleteFramebuffer(this.framebuffer),ht.bindBuffer(ht.ARRAY_BUFFER,null),ht.deleteBuffer(this.vertexbuffer),ht.bindBuffer(ht.ELEMENT_ARRAY_BUFFER,null),ht.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const ht=this.gl,ct=ht.createBuffer();if(!ct)throw new Error("createBuffer() returned null");const ut=this.createDefaultGeometry();return ht.bindBuffer(ht.ARRAY_BUFFER,ct),ht.bufferData(ht.ARRAY_BUFFER,ut,ht.STATIC_DRAW),this.checkError(),ct}createFramebuffer(){const ht=this.gl.createFramebuffer();if(!ht)throw new Error("createFramebuffer returned null");return ht}queryVitalParameters(){const ht=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=ht.getParameter(ht.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=ht.getParameter(ht.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const ht=this.gl,ct=ht.createTexture();ht.bindTexture(ht.TEXTURE_2D,ct);const ut=this.version===2?ht.RGBA32F:ht.RGBA;ht.texImage2D(ht.TEXTURE_2D,0,ut,1,1,0,ht.RGBA,ht.FLOAT,null);const ft=ht.createFramebuffer();ht.bindFramebuffer(ht.FRAMEBUFFER,ft),ht.framebufferTexture2D(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0,ht.TEXTURE_2D,ct,0);const gt=ht.checkFramebufferStatus(ht.FRAMEBUFFER)===ht.FRAMEBUFFER_COMPLETE;return ht.bindTexture(ht.TEXTURE_2D,null),ht.bindFramebuffer(ht.FRAMEBUFFER,null),ht.deleteTexture(ct),ht.deleteFramebuffer(ft),gt}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const ht=this.gl;let ct,ut,ft,gt,mt;try{ct=ht.createTexture(),ut=ht.createFramebuffer(),ht.bindTexture(ht.TEXTURE_2D,ct);const vt=this.version===2?ht.RGBA32F:ht.RGBA;return ht.texImage2D(ht.TEXTURE_2D,0,vt,1,1,0,ht.RGBA,ht.FLOAT,null),ht.bindFramebuffer(ht.FRAMEBUFFER,ut),ht.framebufferTexture2D(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0,ht.TEXTURE_2D,ct,0),ht.enable(ht.BLEND),ft=ht.createShader(ht.VERTEX_SHADER),!!ft&&(ht.shaderSource(ft,"void main(){}"),ht.compileShader(ft),gt=ht.createShader(ht.FRAGMENT_SHADER),!!gt&&(ht.shaderSource(gt,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),ht.compileShader(gt),mt=ht.createProgram(),!!mt&&(ht.attachShader(mt,ft),ht.attachShader(mt,gt),ht.linkProgram(mt),ht.useProgram(mt),ht.drawArrays(ht.POINTS,0,1),ht.getError()===ht.NO_ERROR)))}finally{ht.disable(ht.BLEND),mt&&ht.deleteProgram(mt),ft&&ht.deleteShader(ft),gt&&ht.deleteShader(gt),ut&&(ht.bindFramebuffer(ht.FRAMEBUFFER,null),ht.deleteFramebuffer(ut)),ct&&(ht.bindTexture(ht.TEXTURE_2D,null),ht.deleteTexture(ct))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const ht=this.gl,ct=this.disjointTimerQueryWebgl2Extension,ut=ht.createQuery();return ht.beginQuery(ct.TIME_ELAPSED_EXT,ut),ut}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const ht=this.gl,ct=this.disjointTimerQueryWebgl2Extension;ht.endQuery(ct.TIME_ELAPSED_EXT)}}isTimerResultAvailable(ht){let ct=!1,ut=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const ft=this.gl,gt=this.disjointTimerQueryWebgl2Extension;ct=ft.getQueryParameter(ht,ft.QUERY_RESULT_AVAILABLE),ut=ft.getParameter(gt.GPU_DISJOINT_EXT)}return ct&&!ut}getTimerResult(ht){let ct=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const ut=this.gl;ct=ut.getQueryParameter(ht,ut.QUERY_RESULT),ut.deleteQuery(ht)}return ct/1e6}async waitForQueryAndGetTime(ht){return await(0,st.repeatedTry)(()=>this.isTimerResultAvailable(ht)),this.getTimerResult(ht)}async createAndWaitForFence(){const ht=this.createFence(this.gl);return this.pollFence(ht)}createFence(ht){let ct;const ut=ht,ft=ut.fenceSync(ut.SYNC_GPU_COMMANDS_COMPLETE,0);return ht.flush(),ct=ft===null?()=>!0:()=>{const gt=ut.clientWaitSync(ft,0,0);return gt===ut.ALREADY_SIGNALED||gt===ut.CONDITION_SATISFIED},{query:ft,isFencePassed:ct}}async pollFence(ht){return new Promise(ct=>{this.addItemToPoll(()=>ht.isFencePassed(),()=>ct())})}pollItems(){const ht=dt(this.itemsToPoll.map(ct=>ct.isDoneFn));for(let ct=0;ct<=ht;++ct){const{resolveFn:ut}=this.itemsToPoll[ct];ut()}this.itemsToPoll=this.itemsToPoll.slice(ht+1)}async addItemToPoll(ht,ct){this.itemsToPoll.push({isDoneFn:ht,resolveFn:ct}),this.itemsToPoll.length>1||await(0,st.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ExecutionPlan=void 0;const tt=et(6231);class nt{constructor(at,ot){this.op=at,this.node=ot}}_.ExecutionPlan=class{constructor(it,at,ot){this.graph=it,this.profiler=ot,this.initialize(at)}initialize(it){this.profiler.event("session","ExecutionPlan.initialize",()=>{const at=this.graph.getNodes();if(at.length!==it.length)throw new Error("The size of nodes and OPs do not match.");this._ops=it.map((ot,st)=>new nt(ot,at[st])),this.reset(),this._starter=[],this._ops.forEach((ot,st)=>{let dt=!0;for(const ht of ot.node.inputs)if(!this._values[ht]&&this.graph.getInputIndices().indexOf(ht)===-1){dt=!1;break}dt&&this._starter.push(st)})})}reset(){this._values=this.graph.getValues().map(it=>it.tensor)}async execute(it,at){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const ot=it.createInferenceHandler(),st=this.graph.getInputIndices();if(at.length!==st.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${at.length} expected: ${st.length}`);at.forEach((gt,mt)=>{const vt=st[mt];this._values[vt]=gt});const dt=this._starter.slice(0),ht=this.graph.getValues(),ct=this.graph.getNodes();let ut=0;for(;ut<dt.length;){const gt=dt[ut++],mt=this._ops[gt],vt=mt.node.inputs.map(xt=>this._values[xt]);if(vt.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${mt.node}`);const yt=vt;tt.Logger.verbose("ExecPlan",`Runing op:${mt.node.name} (${yt.map((xt,St)=>`'${mt.node.inputs[St]}': ${xt.type}[${xt.dims.join(",")}]`).join(", ")})`);const bt=await this.profiler.event("node",mt.node.name,async()=>mt.op.impl(ot,yt,mt.op.context));if(bt.length!==mt.node.outputs.length)throw new Error("the size of output does not match model definition.");bt.forEach((xt,St)=>{const Tt=mt.node.outputs[St];if(this._values[Tt])throw new Error(`output [${Tt}] already has value: op:${mt.node.name}`);this._values[Tt]=xt});const _t=new Set;bt.forEach((xt,St)=>{const Tt=mt.node.outputs[St];for(const wt of ht[Tt].to){const Ct=ct[wt];let Et=!0;for(const At of Ct.inputs)if(!this._values[At]){Et=!1;break}Et&&_t.add(wt)}}),dt.push(..._t)}const ft=[];for(let gt=0;gt<this.graph.getOutputIndices().length;gt++){const mt=this.graph.getOutputIndices()[gt],vt=this._values[mt];if(vt===void 0)throw new Error(`required output [${mt}] does not have value`);mt===0?await vt.getData():vt.data,ft.push(vt)}return tt.Logger.verbose("ExecPlan","disposing of inferenceHandler"),ot.dispose(),ft})}}},7070:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Graph=void 0;const tt=et(1446),nt=et(7778),it=et(9395),at=et(9162),ot=et(2517);var st=it.onnxruntime.experimental.fbs;_.Graph={from:(ut,ft)=>new ct(ut,ft)};class dt{constructor(ft){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,ft&&(this.type=ot.ProtoUtil.tensorValueTypeFromProto(ft.type.tensorType))}get from(){return this._from}get to(){return this._to}}class ht{constructor(ft,gt){ft instanceof tt.onnx.NodeProto?(this.name=ft.name,this.opType=ft.opType,this.attributes=new nt.Attribute(ft.attribute)):ft instanceof st.Node&&(this.name=gt??ft.name(),this.opType=ft.opType(),this.attributes=new nt.Attribute(ot.ProtoUtil.tensorAttributesFromORTFormat(ft))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class ct{constructor(ft,gt){if(!ft)throw new TypeError("graph is empty");this.buildGraph(ft),this.transformGraph(gt),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(ft){if(ft instanceof tt.onnx.GraphProto)this.buildGraphFromOnnxFormat(ft);else{if(!(ft instanceof st.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(ft)}}buildGraphFromOnnxFormat(ft){const gt=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const mt=new Map;if(!ft.input)throw new Error("missing information in graph: input");const vt=[];for(const yt of ft.input){if(gt.has(yt.name))throw new Error(`duplicated input name: ${yt.name}`);const bt=this._allData.push(new dt(yt))-1;gt.set(yt.name,bt),vt.push(yt.name)}if(!ft.initializer)throw new Error("missing information in graph: initializer");for(const yt of ft.initializer){let bt=gt.get(yt.name);if(bt===void 0){const _t=new dt;_t.type={shape:{dims:ot.ProtoUtil.tensorDimsFromProto(yt.dims)},tensorType:ot.ProtoUtil.tensorDataTypeFromProto(yt.dataType)},bt=this._allData.push(_t)-1,gt.set(yt.name,bt)}this._allData[bt]._from=-1,this._allData[bt].tensor=at.Tensor.fromProto(yt)}for(let yt=0;yt<this._allData.length;yt++)this._allData[yt].tensor||(this._allInputIndices.push(yt),this._allInputNames.push(vt[yt]));if(!ft.output)throw new Error("missing information in graph: output");for(const yt of ft.output){if(gt.has(yt.name))throw new Error(`duplicated output name: ${yt.name}`);const bt=this._allData.push(new dt(yt))-1;gt.set(yt.name,bt),this._allOutputIndices.push(bt),this._allOutputNames.push(yt.name)}if(!ft.node)throw new Error("missing information in graph: node");for(const yt of ft.node){if(!yt.name)for(let _t=0;;_t++){const xt=`unnamed_${yt.opType}_${_t}`;if(!mt.has(xt)){yt.name=xt;break}}if(mt.has(yt.name))throw new Error(`duplicated node name: ${yt.name}`);const bt=this._nodes.push(new ht(yt))-1;mt.set(yt.name,bt)}for(let yt=0;yt<this._nodes.length;yt++){const bt=this._nodes[yt],_t=ft.node[yt];if(!_t.output)throw new Error(`missing output for node: ${_t.name}`);for(const xt of _t.output){let St=gt.get(xt);if(St===void 0&&(St=this._allData.push(new dt)-1,gt.set(xt,St)),bt.outputs.push(St),this._allData[St]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${St}`);if(this._allData[St]._from=yt,_t.opType==="Constant"){if(!_t.attribute||_t.attribute.length!==1||!_t.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!_t.output||_t.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");bt.outputs.pop(),bt.executeNode=!1,this._allData[St]._from=-1,this._allData[St].tensor=at.Tensor.fromProto(_t.attribute[0].t)}}}for(let yt=0;yt<this._nodes.length;yt++){const bt=this._nodes[yt],_t=ft.node[yt];if(!_t.input)throw new Error(`missing input for node: ${_t.name}`);for(const xt of _t.input){const St=gt.get(xt);if(St===void 0){if(xt===""&&_t.input.length===3&&_t.opType==="Resize")continue;throw new Error(`unrecognized input '${xt}' for node: ${_t.name}`)}bt.inputs.push(St),this._allData[St]._to.push(yt)}}return!0}buildGraphFromOrtFormat(ft){var gt,mt,vt;const yt=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const bt=new Map,_t=[];for(let xt=0;xt<ft.inputsLength();xt++){const St=ft.inputs(xt);if(yt.has(St))throw new Error(`duplicated input name: ${St}`);for(let Tt=0;Tt<ft.nodeArgsLength();Tt++)if(((gt=ft.nodeArgs(Tt))===null||gt===void 0?void 0:gt.name())===St){const wt=new dt;if(((vt=(mt=ft.nodeArgs(Tt))===null||mt===void 0?void 0:mt.type())===null||vt===void 0?void 0:vt.valueType())!==st.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const Ct=ft.nodeArgs(Tt).type().value(new st.TensorTypeAndShape),Et=ot.ProtoUtil.tensorDataTypeFromProto(Ct.elemType()),At=Ct.shape(),Pt=[];for(let It=0;It<At.dimLength();It++)Pt.push(ot.LongUtil.longToNumber(At.dim(It).value().dimValue()));wt.type={shape:{dims:Pt},tensorType:Et};const Rt=this._allData.push(wt)-1;yt.set(St,Rt),_t.push(St)}}for(let xt=0;xt<ft.initializersLength();xt++){const St=ft.initializers(xt);let Tt=yt.get(St.name());if(Tt===void 0){const wt=new dt,Ct=ot.ProtoUtil.tensorDimsFromORTFormat(St),Et=ot.ProtoUtil.tensorDataTypeFromProto(St.dataType());wt.type={shape:{dims:Ct},tensorType:Et},Tt=this._allData.push(wt)-1,yt.set(St.name(),Tt)}this._allData[Tt]._from=-1,this._allData[Tt].tensor=at.Tensor.fromOrtTensor(St)}for(let xt=0;xt<this._allData.length;xt++)this._allData[xt].tensor||(this._allInputIndices.push(xt),this._allInputNames.push(_t[xt]));for(let xt=0;xt<ft.outputsLength();xt++){const St=ft.outputs(xt);if(yt.has(St))throw new Error(`duplicated output name: ${St}`);const Tt=this._allData.push(new dt)-1;yt.set(St,Tt),this._allOutputIndices.push(Tt),this._allOutputNames.push(St)}if(!ft.nodes)throw new Error("missing information in graph: node");for(let xt=0;xt<ft.nodesLength();xt++){const St=ft.nodes(xt);let Tt=St.name();if(!Tt)for(let Ct=0;Tt=`unnamed_${St.opType()}_${Ct}`,bt.has(Tt);Ct++);if(bt.has(Tt))throw new Error(`duplicated node name: ${Tt}`);const wt=this._nodes.push(new ht(St,Tt))-1;bt.set(Tt,wt)}for(let xt=0;xt<this._nodes.length;xt++){const St=this._nodes[xt],Tt=ft.nodes(xt);if(Tt==null)throw new Error(`No node exists at index ${xt}`);if((Tt==null?void 0:Tt.outputsLength())===0)throw new Error(`missing output for node: ${Tt.name}`);for(let wt=0;wt<(Tt==null?void 0:Tt.outputsLength());wt++){const Ct=Tt==null?void 0:Tt.outputs(wt);let Et=yt.get(Ct);if(Et===void 0&&(Et=this._allData.push(new dt)-1,yt.set(Ct,Et)),St.outputs.push(Et),this._allData[Et]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${Et}`);if(this._allData[Et]._from=xt,Tt.opType()==="Constant"){if(Tt.attributesLength()!==1||!Tt.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(Tt.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");St.outputs.pop(),St.executeNode=!1,this._allData[Et]._from=-1,this._allData[Et].tensor=at.Tensor.fromOrtTensor(Tt.attributes(0).t())}}}for(let xt=0;xt<this._nodes.length;xt++){const St=this._nodes[xt],Tt=ft.nodes(xt);if(Tt.inputsLength()===0)throw new Error(`missing input for node: ${Tt.name}`);for(let wt=0;wt<Tt.inputsLength();wt++){const Ct=Tt.inputs(wt),Et=yt.get(Ct);if(Et===void 0)throw new Error(`unrecognized input '${Ct}' for node: ${Tt.name()}`);St.inputs.push(Et),this._allData[Et]._to.push(xt)}}}checkIsAcyclic(){const ft=new Set;this._allInputIndices.forEach(vt=>{this._allData[vt]._to.forEach(yt=>{ft.add(yt)})});const gt=Array.from(ft),mt=new Array(this._nodes.length).fill("white");for(;gt.length>0;){const vt=gt.pop();mt[vt]==="gray"?mt[vt]="black":(gt.push(vt),mt[vt]="gray",this._nodes[vt].outputs.forEach(yt=>{const bt=this._allData[yt];if(bt.tensor!==void 0)throw new Error("node outputs should not be initialized");if(bt._from!==vt)throw new Error("from property of the Value object doesn't match index of Node being processed");bt._to.forEach(_t=>{if(mt[_t]==="gray")throw new Error("model graph is cyclic");mt[_t]==="white"&&gt.push(_t)})}))}}transformGraph(ft){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),ft&&ft.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let ft=0;for(let gt=0;gt<this._nodes.length;gt++)this._nodes[gt].executeNode?ft>0&&(this._nodes[gt].inputs.forEach(mt=>{const vt=this._allData[mt]._to.indexOf(gt+ft);vt!==-1&&(this._allData[mt]._to[vt]=gt)}),this._nodes[gt].outputs.forEach(mt=>{this._allData[mt]._from&&this._allData[mt]._from===gt+ft&&(this._allData[mt]._from=gt)})):(ft++,this._nodes[gt].outputs.forEach(mt=>{this._allData[mt]._from=-2}),this._nodes.splice(gt,1),gt--);ft=0;for(let gt=0;gt<this._allData.length;gt++)if(this._allData[gt].from!==-2||this._allOutputIndices.indexOf(gt+ft)!==-1){if(ft>0){let mt=-1;this._allData[gt].from!==void 0&&this._allData[gt].from!==-1?(mt=this._nodes[this._allData[gt].from].outputs.indexOf(gt+ft),mt!==-1&&(this._nodes[this._allData[gt].from].outputs[mt]=gt)):(mt=this._allInputIndices.indexOf(gt+ft),mt!==-1&&(this._allInputIndices[mt]=gt)),this._allData[gt].to.forEach(vt=>{mt=this._nodes[vt].inputs.indexOf(gt+ft),mt!==-1&&(this._nodes[vt].inputs[mt]=gt)}),this._allData[gt].to.length===0&&(mt=this._allOutputIndices.indexOf(gt+ft),mt!==-1&&(this._allOutputIndices[mt]=gt))}}else ft++,this._allData.splice(gt,1),gt--}deleteNode(ft){const gt=this._nodes[ft];if(gt.outputs.length>1){for(let xt=1;xt<gt.outputs.length;xt++)if(this._allData[gt.outputs[xt]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}gt.executeNode=!1;const mt=gt.inputs[0],vt=gt.outputs[0],yt=this._allData[vt].to,bt=this._allData[mt].to.indexOf(ft);if(bt===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[mt].to.splice(bt,1),this._allData[vt]._to=[];const _t=this._allOutputIndices.indexOf(vt);if(_t!==-1&&(this._allOutputIndices[_t]=mt),yt&&yt.length>0)for(const xt of yt){const St=this._nodes[xt].inputs.indexOf(vt);if(St===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[xt].inputs[St]=mt,this._allData[mt].to.push(xt)}}removeAllDropoutNodes(){let ft=0;for(const gt of this._nodes){if(gt.opType==="Dropout"){if(gt.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(gt.outputs.length!==1&&gt.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(gt.outputs.length===2&&this._allData[gt.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(ft)}ft++}}removeAllIdentityNodes(){let ft=0;for(const gt of this._nodes)gt.opType==="Identity"&&this.deleteNode(ft),ft++}isActivation(ft){switch(ft.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const ft of this._nodes)if(ft.opType==="Conv"){const gt=this._allData[ft.outputs[0]]._to;if(gt.length===1&&this.isActivation(this._nodes[gt[0]])){const mt=this._nodes[gt[0]];if(mt.opType==="Clip")if(mt.inputs.length===1)try{ft.attributes.set("activation_params","floats",[mt.attributes.getFloat("min"),mt.attributes.getFloat("max")])}catch{ft.attributes.set("activation_params","floats",[ot.MIN_CLIP,ot.MAX_CLIP])}else{if(!(mt.inputs.length>=3&&this._allData[mt.inputs[1]].tensor!==void 0&&this._allData[mt.inputs[2]].tensor!==void 0))continue;ft.attributes.set("activation_params","floats",[this._allData[mt.inputs[1]].tensor.floatData[0],this._allData[mt.inputs[2]].tensor.floatData[0]])}ft.attributes.set("activation","string",mt.opType),this.deleteNode(gt[0])}}}}},6231:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.now=_.Profiler=_.Logger=void 0;const et={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},tt={none:new class{log(ht,ct,ut){}},console:new class{log(ht,ct,ut){console.log(`${this.color(ht)} ${ut?"\x1B[35m"+ut+"\x1B[0m ":""}${ct}`)}color(ht){switch(ht){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${ht}`)}}}},nt={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let it={"":nt};function at(ht,ct,ut,ft){if(ct===void 0)return gt=ht,{verbose:at.verbose.bind(null,gt),info:at.info.bind(null,gt),warning:at.warning.bind(null,gt),error:at.error.bind(null,gt),fatal:at.fatal.bind(null,gt)};if(ut===void 0)ot(ht,ct);else if(typeof ut=="number"&&ft===void 0)ot(ht,ct);else if(typeof ut=="string"&&ft===void 0)ot(ht,ut,0,ct);else{if(typeof ut!="string"||typeof ft!="number")throw new TypeError("input is valid");ot(ht,ut,0,ct)}var gt}function ot(ht,ct,ut,ft){const gt=it[ft||""]||it[""];et[ht]<et[gt.minimalSeverity]||(gt.logDateTime&&(ct=`${new Date().toISOString()}|${ct}`),gt.logSourceLocation,tt[gt.provider].log(ht,ct,ft))}(function(ht){function ct(ft){it={},ut("",ft||{})}function ut(ft,gt){if(ft==="*")ct(gt);else{const mt=it[ft]||nt;it[ft]={provider:gt.provider||mt.provider,minimalSeverity:gt.minimalSeverity||mt.minimalSeverity,logDateTime:gt.logDateTime===void 0?mt.logDateTime:gt.logDateTime,logSourceLocation:gt.logSourceLocation===void 0?mt.logSourceLocation:gt.logSourceLocation}}}ht.verbose=function(ft,gt){ht("verbose",ft,gt)},ht.info=function(ft,gt){ht("info",ft,gt)},ht.warning=function(ft,gt){ht("warning",ft,gt)},ht.error=function(ft,gt){ht("error",ft,gt)},ht.fatal=function(ft,gt){ht("fatal",ft,gt)},ht.reset=ct,ht.set=ut,ht.setWithEnv=function(ft){const gt={};ft.logLevel&&(gt.minimalSeverity=ft.logLevel),ut("",gt)}})(at),_.Logger=at;class st{constructor(ct,ut,ft,gt,mt,vt){this.category=ct,this.name=ut,this.startTime=ft,this.endCallback=gt,this.timer=mt,this.ctx=vt}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class dt{constructor(ct,ut,ft,gt){this.category=ct,this.name=ut,this.startTime=ft,this.endTime=gt}}_.Profiler=class{static create(ht){return ht===void 0?new this:new this(ht.maxNumberEvents,ht.flushBatchSize,ht.flushIntervalInMilliseconds)}constructor(ht,ct,ut){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=ht===void 0?1e4:ht,this._flushBatchSize=ct===void 0?10:ct,this._flushIntervalInMilliseconds=ut===void 0?5e3:ut}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,_.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(ht,ct,ut,ft){const gt=this._started?this.begin(ht,ct,ft):void 0;let mt=!1;const vt=ut();if(vt&&typeof vt.then=="function")return mt=!0,new Promise((yt,bt)=>{vt.then(async _t=>{gt&&await gt.end(),yt(_t)},async _t=>{gt&&await gt.end(),bt(_t)})});if(!mt&&gt){const yt=gt.end();if(yt&&typeof yt.then=="function")return new Promise((bt,_t)=>{yt.then(()=>{bt(vt)},xt=>{_t(xt)})})}return vt}begin(ht,ct,ut){if(!this._started)throw new Error("profiler is not started yet");if(ut===void 0){const ft=(0,_.now)();return this.flush(ft),new st(ht,ct,ft,gt=>this.endSync(gt))}{const ft=ut.beginTimer();return new st(ht,ct,0,async gt=>this.end(gt),ft,ut)}}async end(ht){const ct=await ht.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new dt(ht.category,ht.name,ht.startTime,ct)),this.flush(ct))}endSync(ht){const ct=(0,_.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new dt(ht.category,ht.name,ht.startTime,ct)),this.flush(ct))}logOneEvent(ht){_.Logger.verbose(`Profiler.${ht.category}`,`${(ht.endTime-ht.startTime).toFixed(2)}ms on event '${ht.name}' at ${ht.endTime.toFixed(2)}`)}flush(ht){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||ht-this._flushTime>=this._flushIntervalInMilliseconds){for(const ct=this._flushPointer;this._flushPointer<ct+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,_.now)()}}get started(){return this._started}},_.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Model=void 0;const tt=et(5686),nt=et(1446),it=et(7070),at=et(9395),ot=et(2517);var st=at.onnxruntime.experimental.fbs;_.Model=class{constructor(){}load(dt,ht,ct){if(!ct)try{return void this.loadFromOnnxFormat(dt,ht)}catch(ut){if(ct!==void 0)throw ut}this.loadFromOrtFormat(dt,ht)}loadFromOnnxFormat(dt,ht){const ct=nt.onnx.ModelProto.decode(dt);if(ot.LongUtil.longToNumber(ct.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=ct.opsetImport.map(ut=>({domain:ut.domain,version:ot.LongUtil.longToNumber(ut.version)})),this._graph=it.Graph.from(ct.graph,ht)}loadFromOrtFormat(dt,ht){const ct=new tt.flatbuffers.ByteBuffer(dt),ut=st.InferenceSession.getRootAsInferenceSession(ct).model();if(ot.LongUtil.longToNumber(ut.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let ft=0;ft<ut.opsetImportLength();ft++){const gt=ut.opsetImport(ft);this._opsets.push({domain:gt==null?void 0:gt.domain(),version:ot.LongUtil.longToNumber(gt.version())})}this._graph=it.Graph.from(ut.graph(),ht)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FLOAT_TYPES=_.INT_TYPES=_.NUMBER_TYPES=void 0,_.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],_.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],_.FLOAT_TYPES=["float32","float64"]},1047:(_e,_)=>{function et(tt,nt){if(nt.endsWith("+")){const it=Number.parseInt(nt.substring(0,nt.length-1),10);return!isNaN(it)&&it<=tt}if(nt.split("-").length===2){const it=nt.split("-"),at=Number.parseInt(it[0],10),ot=Number.parseInt(it[1],10);return!isNaN(at)&&!isNaN(ot)&&at<=tt&&tt<=ot}return Number.parseInt(nt,10)===tt}Object.defineProperty(_,"__esModule",{value:!0}),_.resolveOperator=void 0,_.resolveOperator=function(tt,nt,it){for(const at of it){const ot=at[0],st=at[1],dt=at[2],ht=at[3],ct=at[4];if(tt.opType===ot){for(const ut of nt)if((ut.domain===st||ut.domain==="ai.onnx"&&st==="")&&et(ut.version,dt))return{opImpl:ht,opInit:ct}}}throw new TypeError(`cannot resolve operator '${tt.opType}' with opsets: ${nt.map(at=>`${at.domain||"ai.onnx"} v${at.version}`).join(", ")}`)}},9395:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.onnxruntime=void 0;const tt=et(5686);var nt,it;nt=_.onnxruntime||(_.onnxruntime={}),function(at){(function(ot){ot[ot.UNDEFINED=0]="UNDEFINED",ot[ot.FLOAT=1]="FLOAT",ot[ot.INT=2]="INT",ot[ot.STRING=3]="STRING",ot[ot.TENSOR=4]="TENSOR",ot[ot.GRAPH=5]="GRAPH",ot[ot.FLOATS=6]="FLOATS",ot[ot.INTS=7]="INTS",ot[ot.STRINGS=8]="STRINGS",ot[ot.TENSORS=9]="TENSORS",ot[ot.GRAPHS=10]="GRAPHS",ot[ot.SPARSE_TENSOR=11]="SPARSE_TENSOR",ot[ot.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(at.AttributeType||(at.AttributeType={}))}((it=nt.experimental||(nt.experimental={})).fbs||(it.fbs={})),function(at){(function(ot){(function(st){(function(dt){dt[dt.UNKNOWN=0]="UNKNOWN",dt[dt.VALUE=1]="VALUE",dt[dt.PARAM=2]="PARAM"})(st.DimensionValueType||(st.DimensionValueType={}))})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){(function(dt){dt[dt.UNDEFINED=0]="UNDEFINED",dt[dt.FLOAT=1]="FLOAT",dt[dt.UINT8=2]="UINT8",dt[dt.INT8=3]="INT8",dt[dt.UINT16=4]="UINT16",dt[dt.INT16=5]="INT16",dt[dt.INT32=6]="INT32",dt[dt.INT64=7]="INT64",dt[dt.STRING=8]="STRING",dt[dt.BOOL=9]="BOOL",dt[dt.FLOAT16=10]="FLOAT16",dt[dt.DOUBLE=11]="DOUBLE",dt[dt.UINT32=12]="UINT32",dt[dt.UINT64=13]="UINT64",dt[dt.COMPLEX64=14]="COMPLEX64",dt[dt.COMPLEX128=15]="COMPLEX128",dt[dt.BFLOAT16=16]="BFLOAT16"})(st.TensorDataType||(st.TensorDataType={}))})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){(function(dt){dt[dt.Primitive=0]="Primitive",dt[dt.Fused=1]="Fused"})(st.NodeType||(st.NodeType={}))})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){(function(dt){dt[dt.NONE=0]="NONE",dt[dt.tensor_type=1]="tensor_type",dt[dt.sequence_type=2]="sequence_type",dt[dt.map_type=3]="map_type"})(st.TypeInfoValue||(st.TypeInfoValue={}))})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsShape(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsShape(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}dim(ct,ut){let ft=this.bb.__offset(this.bb_pos,4);return ft?(ut||new at.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}dimLength(){let ct=this.bb.__offset(this.bb_pos,4);return ct?this.bb.__vector_len(this.bb_pos+ct):0}static startShape(ct){ct.startObject(1)}static addDim(ct,ut){ct.addFieldOffset(0,ut,0)}static createDimVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startDimVector(ct,ut){ct.startVector(4,ut,4)}static endShape(ct){return ct.endObject()}static createShape(ct,ut){return dt.startShape(ct),dt.addDim(ct,ut),dt.endShape(ct)}}st.Shape=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsDimension(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsDimension(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}value(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?(ct||new at.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}denotation(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?this.bb.__string(this.bb_pos+ut,ct):null}static startDimension(ct){ct.startObject(2)}static addValue(ct,ut){ct.addFieldOffset(0,ut,0)}static addDenotation(ct,ut){ct.addFieldOffset(1,ut,0)}static endDimension(ct){return ct.endObject()}static createDimension(ct,ut,ft){return dt.startDimension(ct),dt.addValue(ct,ut),dt.addDenotation(ct,ft),dt.endDimension(ct)}}st.Dimension=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsDimensionValue(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsDimensionValue(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}dimType(){let ct=this.bb.__offset(this.bb_pos,4);return ct?this.bb.readInt8(this.bb_pos+ct):at.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let ct=this.bb.__offset(this.bb_pos,6);return ct?this.bb.readInt64(this.bb_pos+ct):this.bb.createLong(0,0)}dimParam(ct){let ut=this.bb.__offset(this.bb_pos,8);return ut?this.bb.__string(this.bb_pos+ut,ct):null}static startDimensionValue(ct){ct.startObject(3)}static addDimType(ct,ut){ct.addFieldInt8(0,ut,at.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(ct,ut){ct.addFieldInt64(1,ut,ct.createLong(0,0))}static addDimParam(ct,ut){ct.addFieldOffset(2,ut,0)}static endDimensionValue(ct){return ct.endObject()}static createDimensionValue(ct,ut,ft,gt){return dt.startDimensionValue(ct),dt.addDimType(ct,ut),dt.addDimValue(ct,ft),dt.addDimParam(ct,gt),dt.endDimensionValue(ct)}}st.DimensionValue=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsTensorTypeAndShape(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsTensorTypeAndShape(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}elemType(){let ct=this.bb.__offset(this.bb_pos,4);return ct?this.bb.readInt32(this.bb_pos+ct):at.experimental.fbs.TensorDataType.UNDEFINED}shape(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?(ct||new at.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}static startTensorTypeAndShape(ct){ct.startObject(2)}static addElemType(ct,ut){ct.addFieldInt32(0,ut,at.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(ct,ut){ct.addFieldOffset(1,ut,0)}static endTensorTypeAndShape(ct){return ct.endObject()}static createTensorTypeAndShape(ct,ut,ft){return dt.startTensorTypeAndShape(ct),dt.addElemType(ct,ut),dt.addShape(ct,ft),dt.endTensorTypeAndShape(ct)}}st.TensorTypeAndShape=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsMapType(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsMapType(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}keyType(){let ct=this.bb.__offset(this.bb_pos,4);return ct?this.bb.readInt32(this.bb_pos+ct):at.experimental.fbs.TensorDataType.UNDEFINED}valueType(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?(ct||new at.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}static startMapType(ct){ct.startObject(2)}static addKeyType(ct,ut){ct.addFieldInt32(0,ut,at.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(ct,ut){ct.addFieldOffset(1,ut,0)}static endMapType(ct){return ct.endObject()}static createMapType(ct,ut,ft){return dt.startMapType(ct),dt.addKeyType(ct,ut),dt.addValueType(ct,ft),dt.endMapType(ct)}}st.MapType=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsSequenceType(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsSequenceType(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}elemType(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?(ct||new at.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}static startSequenceType(ct){ct.startObject(1)}static addElemType(ct,ut){ct.addFieldOffset(0,ut,0)}static endSequenceType(ct){return ct.endObject()}static createSequenceType(ct,ut){return dt.startSequenceType(ct),dt.addElemType(ct,ut),dt.endSequenceType(ct)}}st.SequenceType=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(ot.fbs||(ot.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(st,dt){return this.bb_pos=st,this.bb=dt,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(st,dt,ht,ct){return st.prep(4,12),st.writeInt32(ct),st.writeInt32(ht),st.writeInt32(dt),st.offset()}}})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsNodeEdge(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsNodeEdge(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}nodeIndex(){let ct=this.bb.__offset(this.bb_pos,4);return ct?this.bb.readUint32(this.bb_pos+ct):0}inputEdges(ct,ut){let ft=this.bb.__offset(this.bb_pos,6);return ft?(ut||new at.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+ft)+12*ct,this.bb):null}inputEdgesLength(){let ct=this.bb.__offset(this.bb_pos,6);return ct?this.bb.__vector_len(this.bb_pos+ct):0}outputEdges(ct,ut){let ft=this.bb.__offset(this.bb_pos,8);return ft?(ut||new at.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+ft)+12*ct,this.bb):null}outputEdgesLength(){let ct=this.bb.__offset(this.bb_pos,8);return ct?this.bb.__vector_len(this.bb_pos+ct):0}static startNodeEdge(ct){ct.startObject(3)}static addNodeIndex(ct,ut){ct.addFieldInt32(0,ut,0)}static addInputEdges(ct,ut){ct.addFieldOffset(1,ut,0)}static startInputEdgesVector(ct,ut){ct.startVector(12,ut,4)}static addOutputEdges(ct,ut){ct.addFieldOffset(2,ut,0)}static startOutputEdgesVector(ct,ut){ct.startVector(12,ut,4)}static endNodeEdge(ct){return ct.endObject()}static createNodeEdge(ct,ut,ft,gt){return dt.startNodeEdge(ct),dt.addNodeIndex(ct,ut),dt.addInputEdges(ct,ft),dt.addOutputEdges(ct,gt),dt.endNodeEdge(ct)}}st.NodeEdge=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsNode(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsNode(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}name(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?this.bb.__string(this.bb_pos+ut,ct):null}docString(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?this.bb.__string(this.bb_pos+ut,ct):null}domain(ct){let ut=this.bb.__offset(this.bb_pos,8);return ut?this.bb.__string(this.bb_pos+ut,ct):null}sinceVersion(){let ct=this.bb.__offset(this.bb_pos,10);return ct?this.bb.readInt32(this.bb_pos+ct):0}index(){let ct=this.bb.__offset(this.bb_pos,12);return ct?this.bb.readUint32(this.bb_pos+ct):0}opType(ct){let ut=this.bb.__offset(this.bb_pos,14);return ut?this.bb.__string(this.bb_pos+ut,ct):null}type(){let ct=this.bb.__offset(this.bb_pos,16);return ct?this.bb.readInt32(this.bb_pos+ct):at.experimental.fbs.NodeType.Primitive}executionProviderType(ct){let ut=this.bb.__offset(this.bb_pos,18);return ut?this.bb.__string(this.bb_pos+ut,ct):null}inputs(ct,ut){let ft=this.bb.__offset(this.bb_pos,20);return ft?this.bb.__string(this.bb.__vector(this.bb_pos+ft)+4*ct,ut):null}inputsLength(){let ct=this.bb.__offset(this.bb_pos,20);return ct?this.bb.__vector_len(this.bb_pos+ct):0}outputs(ct,ut){let ft=this.bb.__offset(this.bb_pos,22);return ft?this.bb.__string(this.bb.__vector(this.bb_pos+ft)+4*ct,ut):null}outputsLength(){let ct=this.bb.__offset(this.bb_pos,22);return ct?this.bb.__vector_len(this.bb_pos+ct):0}attributes(ct,ut){let ft=this.bb.__offset(this.bb_pos,24);return ft?(ut||new at.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}attributesLength(){let ct=this.bb.__offset(this.bb_pos,24);return ct?this.bb.__vector_len(this.bb_pos+ct):0}inputArgCounts(ct){let ut=this.bb.__offset(this.bb_pos,26);return ut?this.bb.readInt32(this.bb.__vector(this.bb_pos+ut)+4*ct):0}inputArgCountsLength(){let ct=this.bb.__offset(this.bb_pos,26);return ct?this.bb.__vector_len(this.bb_pos+ct):0}inputArgCountsArray(){let ct=this.bb.__offset(this.bb_pos,26);return ct?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ct),this.bb.__vector_len(this.bb_pos+ct)):null}implicitInputs(ct,ut){let ft=this.bb.__offset(this.bb_pos,28);return ft?this.bb.__string(this.bb.__vector(this.bb_pos+ft)+4*ct,ut):null}implicitInputsLength(){let ct=this.bb.__offset(this.bb_pos,28);return ct?this.bb.__vector_len(this.bb_pos+ct):0}static startNode(ct){ct.startObject(13)}static addName(ct,ut){ct.addFieldOffset(0,ut,0)}static addDocString(ct,ut){ct.addFieldOffset(1,ut,0)}static addDomain(ct,ut){ct.addFieldOffset(2,ut,0)}static addSinceVersion(ct,ut){ct.addFieldInt32(3,ut,0)}static addIndex(ct,ut){ct.addFieldInt32(4,ut,0)}static addOpType(ct,ut){ct.addFieldOffset(5,ut,0)}static addType(ct,ut){ct.addFieldInt32(6,ut,at.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(ct,ut){ct.addFieldOffset(7,ut,0)}static addInputs(ct,ut){ct.addFieldOffset(8,ut,0)}static createInputsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startInputsVector(ct,ut){ct.startVector(4,ut,4)}static addOutputs(ct,ut){ct.addFieldOffset(9,ut,0)}static createOutputsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startOutputsVector(ct,ut){ct.startVector(4,ut,4)}static addAttributes(ct,ut){ct.addFieldOffset(10,ut,0)}static createAttributesVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startAttributesVector(ct,ut){ct.startVector(4,ut,4)}static addInputArgCounts(ct,ut){ct.addFieldOffset(11,ut,0)}static createInputArgCountsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addInt32(ut[ft]);return ct.endVector()}static startInputArgCountsVector(ct,ut){ct.startVector(4,ut,4)}static addImplicitInputs(ct,ut){ct.addFieldOffset(12,ut,0)}static createImplicitInputsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startImplicitInputsVector(ct,ut){ct.startVector(4,ut,4)}static endNode(ct){return ct.endObject()}static createNode(ct,ut,ft,gt,mt,vt,yt,bt,_t,xt,St,Tt,wt,Ct){return dt.startNode(ct),dt.addName(ct,ut),dt.addDocString(ct,ft),dt.addDomain(ct,gt),dt.addSinceVersion(ct,mt),dt.addIndex(ct,vt),dt.addOpType(ct,yt),dt.addType(ct,bt),dt.addExecutionProviderType(ct,_t),dt.addInputs(ct,xt),dt.addOutputs(ct,St),dt.addAttributes(ct,Tt),dt.addInputArgCounts(ct,wt),dt.addImplicitInputs(ct,Ct),dt.endNode(ct)}}st.Node=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsValueInfo(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsValueInfo(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}name(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?this.bb.__string(this.bb_pos+ut,ct):null}docString(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?this.bb.__string(this.bb_pos+ut,ct):null}type(ct){let ut=this.bb.__offset(this.bb_pos,8);return ut?(ct||new at.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}static startValueInfo(ct){ct.startObject(3)}static addName(ct,ut){ct.addFieldOffset(0,ut,0)}static addDocString(ct,ut){ct.addFieldOffset(1,ut,0)}static addType(ct,ut){ct.addFieldOffset(2,ut,0)}static endValueInfo(ct){return ct.endObject()}static createValueInfo(ct,ut,ft,gt){return dt.startValueInfo(ct),dt.addName(ct,ut),dt.addDocString(ct,ft),dt.addType(ct,gt),dt.endValueInfo(ct)}}st.ValueInfo=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsTypeInfo(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsTypeInfo(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}denotation(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?this.bb.__string(this.bb_pos+ut,ct):null}valueType(){let ct=this.bb.__offset(this.bb_pos,6);return ct?this.bb.readUint8(this.bb_pos+ct):at.experimental.fbs.TypeInfoValue.NONE}value(ct){let ut=this.bb.__offset(this.bb_pos,8);return ut?this.bb.__union(ct,this.bb_pos+ut):null}static startTypeInfo(ct){ct.startObject(3)}static addDenotation(ct,ut){ct.addFieldOffset(0,ut,0)}static addValueType(ct,ut){ct.addFieldInt8(1,ut,at.experimental.fbs.TypeInfoValue.NONE)}static addValue(ct,ut){ct.addFieldOffset(2,ut,0)}static endTypeInfo(ct){return ct.endObject()}static createTypeInfo(ct,ut,ft,gt){return dt.startTypeInfo(ct),dt.addDenotation(ct,ut),dt.addValueType(ct,ft),dt.addValue(ct,gt),dt.endTypeInfo(ct)}}st.TypeInfo=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsOperatorSetId(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsOperatorSetId(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}domain(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?this.bb.__string(this.bb_pos+ut,ct):null}version(){let ct=this.bb.__offset(this.bb_pos,6);return ct?this.bb.readInt64(this.bb_pos+ct):this.bb.createLong(0,0)}static startOperatorSetId(ct){ct.startObject(2)}static addDomain(ct,ut){ct.addFieldOffset(0,ut,0)}static addVersion(ct,ut){ct.addFieldInt64(1,ut,ct.createLong(0,0))}static endOperatorSetId(ct){return ct.endObject()}static createOperatorSetId(ct,ut,ft){return dt.startOperatorSetId(ct),dt.addDomain(ct,ut),dt.addVersion(ct,ft),dt.endOperatorSetId(ct)}}st.OperatorSetId=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsTensor(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsTensor(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}name(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?this.bb.__string(this.bb_pos+ut,ct):null}docString(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?this.bb.__string(this.bb_pos+ut,ct):null}dims(ct){let ut=this.bb.__offset(this.bb_pos,8);return ut?this.bb.readInt64(this.bb.__vector(this.bb_pos+ut)+8*ct):this.bb.createLong(0,0)}dimsLength(){let ct=this.bb.__offset(this.bb_pos,8);return ct?this.bb.__vector_len(this.bb_pos+ct):0}dataType(){let ct=this.bb.__offset(this.bb_pos,10);return ct?this.bb.readInt32(this.bb_pos+ct):at.experimental.fbs.TensorDataType.UNDEFINED}rawData(ct){let ut=this.bb.__offset(this.bb_pos,12);return ut?this.bb.readUint8(this.bb.__vector(this.bb_pos+ut)+ct):0}rawDataLength(){let ct=this.bb.__offset(this.bb_pos,12);return ct?this.bb.__vector_len(this.bb_pos+ct):0}rawDataArray(){let ct=this.bb.__offset(this.bb_pos,12);return ct?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ct),this.bb.__vector_len(this.bb_pos+ct)):null}stringData(ct,ut){let ft=this.bb.__offset(this.bb_pos,14);return ft?this.bb.__string(this.bb.__vector(this.bb_pos+ft)+4*ct,ut):null}stringDataLength(){let ct=this.bb.__offset(this.bb_pos,14);return ct?this.bb.__vector_len(this.bb_pos+ct):0}static startTensor(ct){ct.startObject(6)}static addName(ct,ut){ct.addFieldOffset(0,ut,0)}static addDocString(ct,ut){ct.addFieldOffset(1,ut,0)}static addDims(ct,ut){ct.addFieldOffset(2,ut,0)}static createDimsVector(ct,ut){ct.startVector(8,ut.length,8);for(let ft=ut.length-1;ft>=0;ft--)ct.addInt64(ut[ft]);return ct.endVector()}static startDimsVector(ct,ut){ct.startVector(8,ut,8)}static addDataType(ct,ut){ct.addFieldInt32(3,ut,at.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(ct,ut){ct.addFieldOffset(4,ut,0)}static createRawDataVector(ct,ut){ct.startVector(1,ut.length,1);for(let ft=ut.length-1;ft>=0;ft--)ct.addInt8(ut[ft]);return ct.endVector()}static startRawDataVector(ct,ut){ct.startVector(1,ut,1)}static addStringData(ct,ut){ct.addFieldOffset(5,ut,0)}static createStringDataVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startStringDataVector(ct,ut){ct.startVector(4,ut,4)}static endTensor(ct){return ct.endObject()}static createTensor(ct,ut,ft,gt,mt,vt,yt){return dt.startTensor(ct),dt.addName(ct,ut),dt.addDocString(ct,ft),dt.addDims(ct,gt),dt.addDataType(ct,mt),dt.addRawData(ct,vt),dt.addStringData(ct,yt),dt.endTensor(ct)}}st.Tensor=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsSparseTensor(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsSparseTensor(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}values(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?(ct||new at.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}indices(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?(ct||new at.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}dims(ct){let ut=this.bb.__offset(this.bb_pos,8);return ut?this.bb.readInt64(this.bb.__vector(this.bb_pos+ut)+8*ct):this.bb.createLong(0,0)}dimsLength(){let ct=this.bb.__offset(this.bb_pos,8);return ct?this.bb.__vector_len(this.bb_pos+ct):0}static startSparseTensor(ct){ct.startObject(3)}static addValues(ct,ut){ct.addFieldOffset(0,ut,0)}static addIndices(ct,ut){ct.addFieldOffset(1,ut,0)}static addDims(ct,ut){ct.addFieldOffset(2,ut,0)}static createDimsVector(ct,ut){ct.startVector(8,ut.length,8);for(let ft=ut.length-1;ft>=0;ft--)ct.addInt64(ut[ft]);return ct.endVector()}static startDimsVector(ct,ut){ct.startVector(8,ut,8)}static endSparseTensor(ct){return ct.endObject()}static createSparseTensor(ct,ut,ft,gt){return dt.startSparseTensor(ct),dt.addValues(ct,ut),dt.addIndices(ct,ft),dt.addDims(ct,gt),dt.endSparseTensor(ct)}}st.SparseTensor=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsAttribute(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsAttribute(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}name(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?this.bb.__string(this.bb_pos+ut,ct):null}docString(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?this.bb.__string(this.bb_pos+ut,ct):null}type(){let ct=this.bb.__offset(this.bb_pos,8);return ct?this.bb.readInt32(this.bb_pos+ct):at.experimental.fbs.AttributeType.UNDEFINED}f(){let ct=this.bb.__offset(this.bb_pos,10);return ct?this.bb.readFloat32(this.bb_pos+ct):0}i(){let ct=this.bb.__offset(this.bb_pos,12);return ct?this.bb.readInt64(this.bb_pos+ct):this.bb.createLong(0,0)}s(ct){let ut=this.bb.__offset(this.bb_pos,14);return ut?this.bb.__string(this.bb_pos+ut,ct):null}t(ct){let ut=this.bb.__offset(this.bb_pos,16);return ut?(ct||new at.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}g(ct){let ut=this.bb.__offset(this.bb_pos,18);return ut?(ct||new at.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}floats(ct){let ut=this.bb.__offset(this.bb_pos,20);return ut?this.bb.readFloat32(this.bb.__vector(this.bb_pos+ut)+4*ct):0}floatsLength(){let ct=this.bb.__offset(this.bb_pos,20);return ct?this.bb.__vector_len(this.bb_pos+ct):0}floatsArray(){let ct=this.bb.__offset(this.bb_pos,20);return ct?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ct),this.bb.__vector_len(this.bb_pos+ct)):null}ints(ct){let ut=this.bb.__offset(this.bb_pos,22);return ut?this.bb.readInt64(this.bb.__vector(this.bb_pos+ut)+8*ct):this.bb.createLong(0,0)}intsLength(){let ct=this.bb.__offset(this.bb_pos,22);return ct?this.bb.__vector_len(this.bb_pos+ct):0}strings(ct,ut){let ft=this.bb.__offset(this.bb_pos,24);return ft?this.bb.__string(this.bb.__vector(this.bb_pos+ft)+4*ct,ut):null}stringsLength(){let ct=this.bb.__offset(this.bb_pos,24);return ct?this.bb.__vector_len(this.bb_pos+ct):0}tensors(ct,ut){let ft=this.bb.__offset(this.bb_pos,26);return ft?(ut||new at.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}tensorsLength(){let ct=this.bb.__offset(this.bb_pos,26);return ct?this.bb.__vector_len(this.bb_pos+ct):0}graphs(ct,ut){let ft=this.bb.__offset(this.bb_pos,28);return ft?(ut||new at.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}graphsLength(){let ct=this.bb.__offset(this.bb_pos,28);return ct?this.bb.__vector_len(this.bb_pos+ct):0}static startAttribute(ct){ct.startObject(13)}static addName(ct,ut){ct.addFieldOffset(0,ut,0)}static addDocString(ct,ut){ct.addFieldOffset(1,ut,0)}static addType(ct,ut){ct.addFieldInt32(2,ut,at.experimental.fbs.AttributeType.UNDEFINED)}static addF(ct,ut){ct.addFieldFloat32(3,ut,0)}static addI(ct,ut){ct.addFieldInt64(4,ut,ct.createLong(0,0))}static addS(ct,ut){ct.addFieldOffset(5,ut,0)}static addT(ct,ut){ct.addFieldOffset(6,ut,0)}static addG(ct,ut){ct.addFieldOffset(7,ut,0)}static addFloats(ct,ut){ct.addFieldOffset(8,ut,0)}static createFloatsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addFloat32(ut[ft]);return ct.endVector()}static startFloatsVector(ct,ut){ct.startVector(4,ut,4)}static addInts(ct,ut){ct.addFieldOffset(9,ut,0)}static createIntsVector(ct,ut){ct.startVector(8,ut.length,8);for(let ft=ut.length-1;ft>=0;ft--)ct.addInt64(ut[ft]);return ct.endVector()}static startIntsVector(ct,ut){ct.startVector(8,ut,8)}static addStrings(ct,ut){ct.addFieldOffset(10,ut,0)}static createStringsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startStringsVector(ct,ut){ct.startVector(4,ut,4)}static addTensors(ct,ut){ct.addFieldOffset(11,ut,0)}static createTensorsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startTensorsVector(ct,ut){ct.startVector(4,ut,4)}static addGraphs(ct,ut){ct.addFieldOffset(12,ut,0)}static createGraphsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startGraphsVector(ct,ut){ct.startVector(4,ut,4)}static endAttribute(ct){return ct.endObject()}static createAttribute(ct,ut,ft,gt,mt,vt,yt,bt,_t,xt,St,Tt,wt,Ct){return dt.startAttribute(ct),dt.addName(ct,ut),dt.addDocString(ct,ft),dt.addType(ct,gt),dt.addF(ct,mt),dt.addI(ct,vt),dt.addS(ct,yt),dt.addT(ct,bt),dt.addG(ct,_t),dt.addFloats(ct,xt),dt.addInts(ct,St),dt.addStrings(ct,Tt),dt.addTensors(ct,wt),dt.addGraphs(ct,Ct),dt.endAttribute(ct)}}st.Attribute=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsGraph(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsGraph(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}initializers(ct,ut){let ft=this.bb.__offset(this.bb_pos,4);return ft?(ut||new at.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}initializersLength(){let ct=this.bb.__offset(this.bb_pos,4);return ct?this.bb.__vector_len(this.bb_pos+ct):0}nodeArgs(ct,ut){let ft=this.bb.__offset(this.bb_pos,6);return ft?(ut||new at.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}nodeArgsLength(){let ct=this.bb.__offset(this.bb_pos,6);return ct?this.bb.__vector_len(this.bb_pos+ct):0}nodes(ct,ut){let ft=this.bb.__offset(this.bb_pos,8);return ft?(ut||new at.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}nodesLength(){let ct=this.bb.__offset(this.bb_pos,8);return ct?this.bb.__vector_len(this.bb_pos+ct):0}maxNodeIndex(){let ct=this.bb.__offset(this.bb_pos,10);return ct?this.bb.readUint32(this.bb_pos+ct):0}nodeEdges(ct,ut){let ft=this.bb.__offset(this.bb_pos,12);return ft?(ut||new at.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}nodeEdgesLength(){let ct=this.bb.__offset(this.bb_pos,12);return ct?this.bb.__vector_len(this.bb_pos+ct):0}inputs(ct,ut){let ft=this.bb.__offset(this.bb_pos,14);return ft?this.bb.__string(this.bb.__vector(this.bb_pos+ft)+4*ct,ut):null}inputsLength(){let ct=this.bb.__offset(this.bb_pos,14);return ct?this.bb.__vector_len(this.bb_pos+ct):0}outputs(ct,ut){let ft=this.bb.__offset(this.bb_pos,16);return ft?this.bb.__string(this.bb.__vector(this.bb_pos+ft)+4*ct,ut):null}outputsLength(){let ct=this.bb.__offset(this.bb_pos,16);return ct?this.bb.__vector_len(this.bb_pos+ct):0}sparseInitializers(ct,ut){let ft=this.bb.__offset(this.bb_pos,18);return ft?(ut||new at.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}sparseInitializersLength(){let ct=this.bb.__offset(this.bb_pos,18);return ct?this.bb.__vector_len(this.bb_pos+ct):0}static startGraph(ct){ct.startObject(8)}static addInitializers(ct,ut){ct.addFieldOffset(0,ut,0)}static createInitializersVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startInitializersVector(ct,ut){ct.startVector(4,ut,4)}static addNodeArgs(ct,ut){ct.addFieldOffset(1,ut,0)}static createNodeArgsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startNodeArgsVector(ct,ut){ct.startVector(4,ut,4)}static addNodes(ct,ut){ct.addFieldOffset(2,ut,0)}static createNodesVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startNodesVector(ct,ut){ct.startVector(4,ut,4)}static addMaxNodeIndex(ct,ut){ct.addFieldInt32(3,ut,0)}static addNodeEdges(ct,ut){ct.addFieldOffset(4,ut,0)}static createNodeEdgesVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startNodeEdgesVector(ct,ut){ct.startVector(4,ut,4)}static addInputs(ct,ut){ct.addFieldOffset(5,ut,0)}static createInputsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startInputsVector(ct,ut){ct.startVector(4,ut,4)}static addOutputs(ct,ut){ct.addFieldOffset(6,ut,0)}static createOutputsVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startOutputsVector(ct,ut){ct.startVector(4,ut,4)}static addSparseInitializers(ct,ut){ct.addFieldOffset(7,ut,0)}static createSparseInitializersVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startSparseInitializersVector(ct,ut){ct.startVector(4,ut,4)}static endGraph(ct){return ct.endObject()}static createGraph(ct,ut,ft,gt,mt,vt,yt,bt,_t){return dt.startGraph(ct),dt.addInitializers(ct,ut),dt.addNodeArgs(ct,ft),dt.addNodes(ct,gt),dt.addMaxNodeIndex(ct,mt),dt.addNodeEdges(ct,vt),dt.addInputs(ct,yt),dt.addOutputs(ct,bt),dt.addSparseInitializers(ct,_t),dt.endGraph(ct)}}st.Graph=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsModel(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsModel(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}irVersion(){let ct=this.bb.__offset(this.bb_pos,4);return ct?this.bb.readInt64(this.bb_pos+ct):this.bb.createLong(0,0)}opsetImport(ct,ut){let ft=this.bb.__offset(this.bb_pos,6);return ft?(ut||new at.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}opsetImportLength(){let ct=this.bb.__offset(this.bb_pos,6);return ct?this.bb.__vector_len(this.bb_pos+ct):0}producerName(ct){let ut=this.bb.__offset(this.bb_pos,8);return ut?this.bb.__string(this.bb_pos+ut,ct):null}producerVersion(ct){let ut=this.bb.__offset(this.bb_pos,10);return ut?this.bb.__string(this.bb_pos+ut,ct):null}domain(ct){let ut=this.bb.__offset(this.bb_pos,12);return ut?this.bb.__string(this.bb_pos+ut,ct):null}modelVersion(){let ct=this.bb.__offset(this.bb_pos,14);return ct?this.bb.readInt64(this.bb_pos+ct):this.bb.createLong(0,0)}docString(ct){let ut=this.bb.__offset(this.bb_pos,16);return ut?this.bb.__string(this.bb_pos+ut,ct):null}graph(ct){let ut=this.bb.__offset(this.bb_pos,18);return ut?(ct||new at.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}graphDocString(ct){let ut=this.bb.__offset(this.bb_pos,20);return ut?this.bb.__string(this.bb_pos+ut,ct):null}static startModel(ct){ct.startObject(9)}static addIrVersion(ct,ut){ct.addFieldInt64(0,ut,ct.createLong(0,0))}static addOpsetImport(ct,ut){ct.addFieldOffset(1,ut,0)}static createOpsetImportVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startOpsetImportVector(ct,ut){ct.startVector(4,ut,4)}static addProducerName(ct,ut){ct.addFieldOffset(2,ut,0)}static addProducerVersion(ct,ut){ct.addFieldOffset(3,ut,0)}static addDomain(ct,ut){ct.addFieldOffset(4,ut,0)}static addModelVersion(ct,ut){ct.addFieldInt64(5,ut,ct.createLong(0,0))}static addDocString(ct,ut){ct.addFieldOffset(6,ut,0)}static addGraph(ct,ut){ct.addFieldOffset(7,ut,0)}static addGraphDocString(ct,ut){ct.addFieldOffset(8,ut,0)}static endModel(ct){return ct.endObject()}static createModel(ct,ut,ft,gt,mt,vt,yt,bt,_t,xt){return dt.startModel(ct),dt.addIrVersion(ct,ut),dt.addOpsetImport(ct,ft),dt.addProducerName(ct,gt),dt.addProducerVersion(ct,mt),dt.addDomain(ct,vt),dt.addModelVersion(ct,yt),dt.addDocString(ct,bt),dt.addGraph(ct,_t),dt.addGraphDocString(ct,xt),dt.endModel(ct)}}st.Model=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsKernelCreateInfos(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsKernelCreateInfos(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}nodeIndices(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?this.bb.readUint32(this.bb.__vector(this.bb_pos+ut)+4*ct):0}nodeIndicesLength(){let ct=this.bb.__offset(this.bb_pos,4);return ct?this.bb.__vector_len(this.bb_pos+ct):0}nodeIndicesArray(){let ct=this.bb.__offset(this.bb_pos,4);return ct?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ct),this.bb.__vector_len(this.bb_pos+ct)):null}kernelDefHashes(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?this.bb.readUint64(this.bb.__vector(this.bb_pos+ut)+8*ct):this.bb.createLong(0,0)}kernelDefHashesLength(){let ct=this.bb.__offset(this.bb_pos,6);return ct?this.bb.__vector_len(this.bb_pos+ct):0}static startKernelCreateInfos(ct){ct.startObject(2)}static addNodeIndices(ct,ut){ct.addFieldOffset(0,ut,0)}static createNodeIndicesVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addInt32(ut[ft]);return ct.endVector()}static startNodeIndicesVector(ct,ut){ct.startVector(4,ut,4)}static addKernelDefHashes(ct,ut){ct.addFieldOffset(1,ut,0)}static createKernelDefHashesVector(ct,ut){ct.startVector(8,ut.length,8);for(let ft=ut.length-1;ft>=0;ft--)ct.addInt64(ut[ft]);return ct.endVector()}static startKernelDefHashesVector(ct,ut){ct.startVector(8,ut,8)}static endKernelCreateInfos(ct){return ct.endObject()}static createKernelCreateInfos(ct,ut,ft){return dt.startKernelCreateInfos(ct),dt.addNodeIndices(ct,ut),dt.addKernelDefHashes(ct,ft),dt.endKernelCreateInfos(ct)}}st.KernelCreateInfos=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsSubGraphSessionState(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsSubGraphSessionState(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}graphId(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?this.bb.__string(this.bb_pos+ut,ct):null}sessionState(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?(ct||new at.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}static startSubGraphSessionState(ct){ct.startObject(2)}static addGraphId(ct,ut){ct.addFieldOffset(0,ut,0)}static addSessionState(ct,ut){ct.addFieldOffset(1,ut,0)}static endSubGraphSessionState(ct){let ut=ct.endObject();return ct.requiredField(ut,4),ut}static createSubGraphSessionState(ct,ut,ft){return dt.startSubGraphSessionState(ct),dt.addGraphId(ct,ut),dt.addSessionState(ct,ft),dt.endSubGraphSessionState(ct)}}st.SubGraphSessionState=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsSessionState(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsSessionState(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}kernels(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?(ct||new at.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}subGraphSessionStates(ct,ut){let ft=this.bb.__offset(this.bb_pos,6);return ft?(ut||new at.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ft)+4*ct),this.bb):null}subGraphSessionStatesLength(){let ct=this.bb.__offset(this.bb_pos,6);return ct?this.bb.__vector_len(this.bb_pos+ct):0}static startSessionState(ct){ct.startObject(2)}static addKernels(ct,ut){ct.addFieldOffset(0,ut,0)}static addSubGraphSessionStates(ct,ut){ct.addFieldOffset(1,ut,0)}static createSubGraphSessionStatesVector(ct,ut){ct.startVector(4,ut.length,4);for(let ft=ut.length-1;ft>=0;ft--)ct.addOffset(ut[ft]);return ct.endVector()}static startSubGraphSessionStatesVector(ct,ut){ct.startVector(4,ut,4)}static endSessionState(ct){return ct.endObject()}static createSessionState(ct,ut,ft){return dt.startSessionState(ct),dt.addKernels(ct,ut),dt.addSubGraphSessionStates(ct,ft),dt.endSessionState(ct)}}st.SessionState=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(at){(function(ot){(function(st){class dt{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}static getRootAsInferenceSession(ct,ut){return(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static getSizePrefixedRootAsInferenceSession(ct,ut){return ct.setPosition(ct.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(ut||new dt).__init(ct.readInt32(ct.position())+ct.position(),ct)}static bufferHasIdentifier(ct){return ct.__has_identifier("ORTM")}ortVersion(ct){let ut=this.bb.__offset(this.bb_pos,4);return ut?this.bb.__string(this.bb_pos+ut,ct):null}model(ct){let ut=this.bb.__offset(this.bb_pos,6);return ut?(ct||new at.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}sessionState(ct){let ut=this.bb.__offset(this.bb_pos,8);return ut?(ct||new at.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+ut),this.bb):null}static startInferenceSession(ct){ct.startObject(3)}static addOrtVersion(ct,ut){ct.addFieldOffset(0,ut,0)}static addModel(ct,ut){ct.addFieldOffset(1,ut,0)}static addSessionState(ct,ut){ct.addFieldOffset(2,ut,0)}static endInferenceSession(ct){return ct.endObject()}static finishInferenceSessionBuffer(ct,ut){ct.finish(ut,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(ct,ut){ct.finish(ut,"ORTM",!0)}static createInferenceSession(ct,ut,ft,gt){return dt.startInferenceSession(ct),dt.addOrtVersion(ct,ut),dt.addModel(ct,ft),dt.addSessionState(ct,gt),dt.endInferenceSession(ct)}}st.InferenceSession=dt})(ot.fbs||(ot.fbs={}))})(at.experimental||(at.experimental={}))}(_.onnxruntime||(_.onnxruntime={}))},7448:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OnnxjsSessionHandler=void 0;const tt=et(1670),nt=et(9162);_.OnnxjsSessionHandler=class{constructor(it){this.session=it,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(it,at,ot){const st=new Map;for(const ct in it)if(Object.hasOwnProperty.call(it,ct)){const ut=it[ct];st.set(ct,new nt.Tensor(ut.dims,ut.type,void 0,void 0,ut.data))}const dt=await this.session.run(st),ht={};return dt.forEach((ct,ut)=>{ht[ut]=new tt.Tensor(ct.type,ct.data,ct.dims)}),ht}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Session=void 0;const tt=et(7067),nt=et(1296),it=et(7091),at=et(1036),ot=et(6231),st=et(2644);_.Session=class{constructor(dt={}){this._initialized=!1,this.backendHint=dt.backendHint,this.profiler=ot.Profiler.create(dt.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(dt,ht,ct){await this.profiler.event("session","Session.loadModel",async()=>{const ut=await(0,it.resolveBackend)(this.backendHint);if(this.sessionHandler=ut.createSessionHandler(this.context),this._model=new st.Model,typeof dt=="string"){const ft=dt.endsWith(".ort");if(typeof fetch>"u"){const gt=await(0,nt.promisify)(tt.readFile)(dt);this.initialize(gt,ft)}else{const gt=await fetch(dt),mt=await gt.arrayBuffer();this.initialize(new Uint8Array(mt),ft)}}else if(ArrayBuffer.isView(dt))this.initialize(dt);else{const ft=new Uint8Array(dt,ht||0,ct||dt.byteLength);this.initialize(ft)}})}initialize(dt,ht){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const ct=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(dt,ct,ht),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new at.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(dt){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const ht=this.normalizeAndValidateInputs(dt),ct=await this._executionPlan.execute(this.sessionHandler,ht);return this.createOutput(ct)})}normalizeAndValidateInputs(dt){const ht=this._model.graph.getInputNames();if(Array.isArray(dt)){if(dt.length!==ht.length)throw new Error(`incorrect input array length: expected ${ht.length} but got ${dt.length}`)}else{if(dt.size!==ht.length)throw new Error(`incorrect input map size: expected ${ht.length} but got ${dt.size}`);const ct=new Array(dt.size);let ut=0;for(let ft=0;ft<ht.length;++ft){const gt=dt.get(ht[ft]);if(!gt)throw new Error(`missing input tensor for: '${name}'`);ct[ut++]=gt}dt=ct}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,dt,!1);else{const ct=this._model.graph.getInputIndices(),ut=this._model.graph.getValues(),ft=new Array(ct.length);for(let gt=0;gt<ct.length;++gt){const mt=ut[ct[gt]];ft[gt]=mt.type.shape.dims,this.context.graphInputTypes.push(mt.type.tensorType),this.context.graphInputDims.push(dt[gt].dims)}this.validateInputTensorDims(ft,dt,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,dt),dt}validateInputTensorTypes(dt,ht){for(let ct=0;ct<ht.length;ct++){const ut=dt[ct],ft=ht[ct].type;if(ut!==ft)throw new Error(`input tensor[${ct}] check failed: expected type '${ut}' but got ${ft}`)}}validateInputTensorDims(dt,ht,ct){for(let ut=0;ut<ht.length;ut++){const ft=dt[ut],gt=ht[ut].dims;if(!this.compareTensorDims(ft,gt,ct))throw new Error(`input tensor[${ut}] check failed: expected shape '[${ft.join(",")}]' but got [${gt.join(",")}]`)}}compareTensorDims(dt,ht,ct){if(dt.length!==ht.length)return!1;for(let ut=0;ut<dt.length;++ut)if(dt[ut]!==ht[ut]&&(!ct||dt[ut]!==0))return!1;return!0}createOutput(dt){const ht=this._model.graph.getOutputNames();if(dt.length!==ht.length)throw new Error("expected number of outputs do not match number of generated outputs");const ct=new Map;for(let ut=0;ut<ht.length;++ut)ct.set(ht[ut],dt[ut]);return ct}initializeOps(dt){const ht=dt.getNodes();this._ops=new Array(ht.length);for(let ct=0;ct<ht.length;ct++)this._ops[ct]=this.sessionHandler.resolve(ht[ct],this._model.opsets,dt)}}},9162:function(_e,_,et){var tt=this&&this.__importDefault||function(mt){return mt&&mt.__esModule?mt:{default:mt}};Object.defineProperty(_,"__esModule",{value:!0}),_.Tensor=void 0;const nt=et(3442),it=tt(et(3720)),at=et(1446),ot=et(9395),st=et(2517);var dt=ot.onnxruntime.experimental.fbs;class ht{get data(){if(this.cache===void 0){const vt=this.dataProvider(this.dataId);if(vt.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=vt}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(vt){return this.data[st.ShapeUtil.indicesToOffset(vt,this.strides)]}set(vt,yt){this.data[st.ShapeUtil.indicesToOffset(vt,this.strides)]=yt}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=st.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(vt,yt,bt,_t,xt,St=nt.Guid.create()){this.dims=vt,this.type=yt,this.dataProvider=bt,this.asyncDataProvider=_t,this.cache=xt,this.dataId=St,this.size=st.ShapeUtil.validateDimsAndCalcSize(vt);const Tt=this.size,wt=bt===void 0&&_t===void 0&&xt===void 0;if(xt!==void 0&&xt.length!==Tt)throw new RangeError("Input dims doesn't match data length.");if(yt==="string"){if(!(xt===void 0||Array.isArray(xt)&&xt.every(Ct=>typeof Ct=="string")))throw new TypeError("cache should be a string array");wt&&(this.cache=new Array(Tt))}else{if(xt!==void 0){const Ct=ut(yt);if(!(xt instanceof Ct))throw new TypeError(`cache should be type ${Ct.name}`)}if(wt){const Ct=new ArrayBuffer(Tt*function(Et){switch(Et){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${Et}`)}}(yt));this.cache=function(Et,At){return new(ut(At))(Et)}(Ct,yt)}}}static fromProto(vt){if(!vt)throw new Error("cannot construct Value from an empty tensor");const yt=st.ProtoUtil.tensorDataTypeFromProto(vt.dataType),bt=st.ProtoUtil.tensorDimsFromProto(vt.dims),_t=new ht(bt,yt);if(yt==="string")vt.stringData.forEach((xt,St)=>{_t.data[St]=(0,st.decodeUtf8String)(xt)});else if(vt.rawData&&typeof vt.rawData.byteLength=="number"&&vt.rawData.byteLength>0){const xt=_t.data,St=new DataView(vt.rawData.buffer,vt.rawData.byteOffset,vt.rawData.byteLength),Tt=ct(vt.dataType),wt=vt.rawData.byteLength/Tt;if(vt.rawData.byteLength%Tt!=0)throw new Error("invalid buffer length");if(xt.length!==wt)throw new Error("buffer length mismatch");for(let Ct=0;Ct<wt;Ct++){const Et=gt(St,vt.dataType,Ct*Tt);xt[Ct]=Et}}else{let xt;switch(vt.dataType){case at.onnx.TensorProto.DataType.FLOAT:xt=vt.floatData;break;case at.onnx.TensorProto.DataType.INT32:case at.onnx.TensorProto.DataType.INT16:case at.onnx.TensorProto.DataType.UINT16:case at.onnx.TensorProto.DataType.INT8:case at.onnx.TensorProto.DataType.UINT8:case at.onnx.TensorProto.DataType.BOOL:xt=vt.int32Data;break;case at.onnx.TensorProto.DataType.INT64:xt=vt.int64Data;break;case at.onnx.TensorProto.DataType.DOUBLE:xt=vt.doubleData;break;case at.onnx.TensorProto.DataType.UINT32:case at.onnx.TensorProto.DataType.UINT64:xt=vt.uint64Data;break;default:throw new Error("unspecific error")}if(xt==null)throw new Error("failed to populate data from a tensorproto value");const St=_t.data;if(St.length!==xt.length)throw new Error("array length mismatch");for(let Tt=0;Tt<xt.length;Tt++){const wt=xt[Tt];it.default.isLong(wt)?St[Tt]=ft(wt,vt.dataType):St[Tt]=wt}}return _t}static fromData(vt,yt,bt){return new ht(yt,bt,void 0,void 0,vt)}static fromOrtTensor(vt){if(!vt)throw new Error("cannot construct Value from an empty tensor");const yt=st.ProtoUtil.tensorDimsFromORTFormat(vt),bt=st.ProtoUtil.tensorDataTypeFromProto(vt.dataType()),_t=new ht(yt,bt);if(bt==="string")for(let xt=0;xt<vt.stringDataLength();xt++)_t.data[xt]=vt.stringData(xt);else if(vt.rawDataArray()&&typeof vt.rawDataLength()=="number"&&vt.rawDataLength()>0){const xt=_t.data,St=new DataView(vt.rawDataArray().buffer,vt.rawDataArray().byteOffset,vt.rawDataLength()),Tt=ct(vt.dataType()),wt=vt.rawDataLength()/Tt;if(vt.rawDataLength()%Tt!=0)throw new Error("invalid buffer length");if(xt.length!==wt)throw new Error("buffer length mismatch");for(let Ct=0;Ct<wt;Ct++){const Et=gt(St,vt.dataType(),Ct*Tt);xt[Ct]=Et}}return _t}}function ct(mt){switch(mt){case at.onnx.TensorProto.DataType.UINT8:case at.onnx.TensorProto.DataType.INT8:case at.onnx.TensorProto.DataType.BOOL:return 1;case at.onnx.TensorProto.DataType.UINT16:case at.onnx.TensorProto.DataType.INT16:return 2;case at.onnx.TensorProto.DataType.FLOAT:case at.onnx.TensorProto.DataType.INT32:case at.onnx.TensorProto.DataType.UINT32:return 4;case at.onnx.TensorProto.DataType.INT64:case at.onnx.TensorProto.DataType.DOUBLE:case at.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${at.onnx.TensorProto.DataType[mt]}`)}}function ut(mt){switch(mt){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function ft(mt,vt){if(vt===at.onnx.TensorProto.DataType.INT64||vt===dt.TensorDataType.INT64){if(mt.greaterThanOrEqual(2147483648)||mt.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(vt!==at.onnx.TensorProto.DataType.UINT32&&vt!==dt.TensorDataType.UINT32&&vt!==at.onnx.TensorProto.DataType.UINT64&&vt!==dt.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${at.onnx.TensorProto.DataType[vt]}`);if(mt.greaterThanOrEqual(4294967296)||mt.lessThan(0))throw new TypeError("uint64 is not supported")}return mt.toNumber()}function gt(mt,vt,yt){switch(vt){case at.onnx.TensorProto.DataType.BOOL:case at.onnx.TensorProto.DataType.UINT8:return mt.getUint8(yt);case at.onnx.TensorProto.DataType.INT8:return mt.getInt8(yt);case at.onnx.TensorProto.DataType.UINT16:return mt.getUint16(yt,!0);case at.onnx.TensorProto.DataType.INT16:return mt.getInt16(yt,!0);case at.onnx.TensorProto.DataType.FLOAT:return mt.getFloat32(yt,!0);case at.onnx.TensorProto.DataType.INT32:return mt.getInt32(yt,!0);case at.onnx.TensorProto.DataType.UINT32:return mt.getUint32(yt,!0);case at.onnx.TensorProto.DataType.INT64:return ft(it.default.fromBits(mt.getUint32(yt,!0),mt.getUint32(yt+4,!0),!1),vt);case at.onnx.TensorProto.DataType.DOUBLE:return mt.getFloat64(yt,!0);case at.onnx.TensorProto.DataType.UINT64:return ft(it.default.fromBits(mt.getUint32(yt,!0),mt.getUint32(yt+4,!0),!0),vt);default:throw new Error(`cannot read from DataView for type ${at.onnx.TensorProto.DataType[vt]}`)}}_.Tensor=ht},2517:function(_e,_,et){var tt=this&&this.__importDefault||function(vt){return vt&&vt.__esModule?vt:{default:vt}};Object.defineProperty(_,"__esModule",{value:!0}),_.decodeUtf8String=_.MAX_CLIP=_.MIN_CLIP=_.PoolConvUtil=_.ReduceUtil=_.SplitUtil=_.MathUtil=_.ShapeUtil=_.LongUtil=_.ProtoUtil=_.GemmUtil=_.arrayCopyHelper=_.BroadcastUtil=_.MatMulUtil=_.ArrayUtil=_.assert=_.checkInputsShape=void 0;const nt=et(5686),it=tt(et(3720)),at=et(1446),ot=et(9162);_.checkInputsShape=function(vt,...yt){if(!vt||vt.length!==yt.length)return!1;for(let bt=0;bt<vt.length;bt++)if(!vt[bt].dims||vt[bt].dims.length!==yt[bt])return!1;return!0},_.assert=function(vt,yt){if(!vt)throw new Error(typeof yt=="string"?yt:yt())},_.ArrayUtil=class{static arraysEqual(vt,yt){if(vt.length!==yt.length)return!1;for(let bt=0;bt<vt.length;bt++)if(vt[bt]!==yt[bt])return!1;return!0}};class st{static preprocessInputShapes(yt,bt){return[yt.length===1?[1,yt[0]]:yt,bt.length===1?[bt[0],1]:bt]}static postprocessOutputShape(yt,bt,_t){bt===1&&yt.splice(yt.length-2,1),_t===1&&yt.pop()}static calcMatMulShape(yt,bt){return yt[1]!==bt[0]?void 0:[yt[0],bt[1]]}}_.MatMulUtil=st;class dt{static calcShape(yt,bt,_t=!1){const xt=yt.length,St=bt.length;if(xt===0)return bt;if(St===0)return yt;const Tt=Math.max(yt.length,bt.length),wt=new Array(Tt);if(_t){if(xt<2||St<2)return;const Ct=st.calcMatMulShape([yt[xt-2],yt[xt-1]],[bt[St-2],bt[St-1]]);if(Ct===void 0)return;[wt[Tt-2],wt[Tt-1]]=Ct}for(let Ct=_t?3:1;Ct<=Tt;Ct++){const Et=xt-Ct<0?1:yt[xt-Ct],At=St-Ct<0?1:bt[St-Ct];if(Et!==At&&Et>1&&At>1)return;wt[Tt-Ct]=Math.max(Et,At)}return wt}static index(yt,bt){const _t=new Array(bt.length);return dt.fillIndex(yt,bt,_t),_t}static fillIndex(yt,bt,_t){const xt=yt.length-bt.length;for(let St=0;St<bt.length;St++)_t[St]=yt[xt+St]%bt[St]}static calc(yt,bt,_t,xt,St){const Tt=dt.calcShape(yt.dims,bt.dims);if(Tt){if(xt&&!ut.areEqual(Tt,yt.dims))return;const wt=ut.size(Tt),Ct=xt?yt:new ot.Tensor(Tt,St||yt.type);if(Tt.length===0)Ct.set([],_t(yt.get([]),bt.get([])));else{const Et=new Array(Tt.length),At=new Array(yt.dims.length),Pt=new Array(bt.dims.length);let Rt,It=0,Mt=0,Ot=!1,$t=!1;yt.dims.length===0&&(It=yt.get([]),Ot=!0),bt.dims.length===0&&(Mt=bt.get([]),$t=!0);for(let Lt=0;Lt<wt;Lt++){Rt=Lt;for(let kt=Tt.length-1;kt>=0;kt--)Et[kt]=Rt%Tt[kt],Rt=Math.floor(Rt/Tt[kt]);Ot||(dt.fillIndex(Et,yt.dims,At),It=yt.get(At)),$t||(dt.fillIndex(Et,bt.dims,Pt),Mt=bt.get(Pt)),Ct.set(Et,_t(It,Mt))}}return Ct}}static isValidBroadcast(yt,bt){const _t=yt.length,xt=bt.length;if(_t>xt)return!1;for(let St=1;St<=_t;St++)if(yt[_t-St]!==1&&yt[_t-St]!==bt[xt-St])return!1;return!0}static getBroadcastDims(yt,bt){const _t=yt.length,xt=[];for(let St=0;St<_t;St++){const Tt=_t-1-St,wt=yt[Tt]||1;(bt[bt.length-1-St]||1)>1&&wt===1&&xt.unshift(Tt)}return xt}}_.BroadcastUtil=dt,_.arrayCopyHelper=function(vt,yt,bt,_t,xt){if(_t<0||_t>=yt.length)throw new Error("sourceIndex out of bounds");if(bt<0||bt>=vt.length)throw new Error("targetIndex out of bounds");if(_t+xt>yt.length)throw new Error("source indices to be copied are outside bounds");if(bt+xt>vt.length)throw new Error("target array is too small to hold result");for(let St=0;St<xt;St++)vt[bt+St]=yt[_t+St]},_.GemmUtil=class{static getShapeOfGemmResult(vt,yt,bt,_t,xt){if(vt.length!==2||bt.length!==2)throw new Error("shape need to be of size 2");let St,Tt,wt;yt?(St=vt[1],Tt=vt[0]):(St=vt[0],Tt=vt[1]);let Ct=-1;if(_t?(wt=bt[0],Ct=1):(wt=bt[1],Ct=0),bt[Ct]!==Tt)throw new Error("dimension mismatch");if(St<=0||wt<=0||Tt<=0)throw new Error("invalid shape specified");if(xt&&!dt.isValidBroadcast(xt,[St,wt]))throw new Error("gemm: invalid bias shape for broadcast");return[St,wt,Tt]}};class ht{static tensorDataTypeFromProto(yt){switch(yt){case at.onnx.TensorProto.DataType.INT8:return"int8";case at.onnx.TensorProto.DataType.UINT8:return"uint8";case at.onnx.TensorProto.DataType.BOOL:return"bool";case at.onnx.TensorProto.DataType.INT16:return"int16";case at.onnx.TensorProto.DataType.UINT16:return"uint16";case at.onnx.TensorProto.DataType.INT32:return"int32";case at.onnx.TensorProto.DataType.UINT32:return"uint32";case at.onnx.TensorProto.DataType.FLOAT:return"float32";case at.onnx.TensorProto.DataType.DOUBLE:return"float64";case at.onnx.TensorProto.DataType.STRING:return"string";case at.onnx.TensorProto.DataType.INT64:return"int32";case at.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${at.onnx.TensorProto.DataType[yt]}`)}}static tensorDataTypeStringToEnum(yt){switch(yt){case"int8":return at.onnx.TensorProto.DataType.INT8;case"uint8":return at.onnx.TensorProto.DataType.UINT8;case"bool":return at.onnx.TensorProto.DataType.BOOL;case"int16":return at.onnx.TensorProto.DataType.INT16;case"uint16":return at.onnx.TensorProto.DataType.UINT16;case"int32":return at.onnx.TensorProto.DataType.INT32;case"uint32":return at.onnx.TensorProto.DataType.UINT32;case"float32":return at.onnx.TensorProto.DataType.FLOAT;case"float64":return at.onnx.TensorProto.DataType.DOUBLE;case"string":return at.onnx.TensorProto.DataType.STRING;case"int64":return at.onnx.TensorProto.DataType.INT64;case"uint64":return at.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${yt}`)}}static tensorDimsFromProto(yt){return yt.map(bt=>it.default.isLong(bt)?bt.toNumber():bt)}static tensorValueTypeFromProto(yt){return{tensorType:ht.tensorDataTypeFromProto(yt.elemType),shape:{dims:ht.tensorDimsFromProto(yt.shape.dim.map(bt=>bt.dimValue))}}}static tensorDimsFromORTFormat(yt){const bt=[];for(let _t=0;_t<yt.dimsLength();_t++)bt.push(ct.longToNumber(yt.dims(_t)));return bt}static tensorAttributesFromORTFormat(yt){const bt=[];for(let _t=0;_t<yt.attributesLength();_t++)bt.push(yt.attributes(_t));return bt}}_.ProtoUtil=ht;class ct{static longToNumber(yt,bt){return it.default.isLong(yt)?yt.toNumber():yt instanceof nt.flatbuffers.Long?it.default.fromValue({low:yt.low,high:yt.high,unsigned:bt!=null&&bt}).toNumber():yt}static isLong(yt){return it.default.isLong(yt)||yt instanceof nt.flatbuffers.Long}}_.LongUtil=ct;class ut{static size(yt){return ut.getSizeFromDimensionRange(yt,0,yt.length)}static sizeFromDimension(yt,bt){if(bt<0||bt>yt.length)throw new Error(`invalid dimension of ${bt} for sizeFromDimension as Tensor has ${yt.length} dimensions.`);return ut.getSizeFromDimensionRange(yt,bt,yt.length)}static sizeToDimension(yt,bt){if(bt<0||bt>yt.length)throw new Error(`invalid dimension of ${bt} for sizeToDimension as Tensor has ${yt.length} dimensions.`);return ut.getSizeFromDimensionRange(yt,0,bt)}static getSizeFromDimensionRange(yt,bt,_t){let xt=1;for(let St=bt;St<_t;St++){if(yt[St]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");xt*=yt[St]}return xt}static computeStrides(yt){const bt=yt.length;if(bt===0)return[];if(bt===1)return[1];const _t=new Array(bt);_t[bt-1]=1,_t[bt-2]=yt[bt-1];for(let xt=bt-3;xt>=0;--xt)_t[xt]=_t[xt+1]*yt[xt+1];return _t}static transpose(yt){return yt.slice().reverse()}static indicesToOffset(yt,bt,_t){_t===void 0&&(_t=yt.length);let xt=0;for(let St=0;St<_t;++St)xt+=bt[St]*yt[St];return xt}static offsetToIndices(yt,bt){const _t=bt.length;if(_t===0)return[];if(_t===1)return[yt*bt[0]];const xt=new Array(bt.length);for(let St=0;St<xt.length-1;++St)xt[St]=Math.floor(yt/bt[St]),yt-=xt[St]*bt[St];return xt[xt.length-1]=yt,xt}static normalizeAxis(yt,bt){if(yt<-bt&&yt>=bt)throw new Error("unsupported axis for this operation.");return yt<0?yt+bt:yt}static normalizeAxes(yt,bt){return yt.map(_t=>this.normalizeAxis(_t,bt))}static incrementIndex(yt,bt,_t){if(bt.length===0||yt.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(_t===void 0)_t=bt.length;else if(_t<=0||_t>bt.length)throw new Error("Incorrect axis to increment on");for(let xt=_t-1;xt>=0&&(yt[xt]++,!(yt[xt]<bt[xt]));--xt)yt[xt]=0}static calculateReshapedDims(yt,bt){if(bt.length===0){if(yt.length===0||ut.size(yt)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const _t=bt.length,xt=new Array(_t);let St=-1,Tt=1;for(let Ct=0;Ct<_t;Ct++){if(bt[Ct]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(bt[Ct]===-1){if(St!==-1)throw new Error("at most one dimension in shape hints can be -1");St=Ct}else{if(bt[Ct]===0){if(Ct>=yt.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");xt[Ct]=yt[Ct]}else xt[Ct]=bt[Ct];Tt*=xt[Ct]}}const wt=ut.size(yt);if(St!==-1){if(wt%Tt!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${yt}] Output shape: [${bt}]`);xt[St]=wt/Tt}else if(Tt!==wt)throw new Error("reshapedDims and originalDims don't have matching sizes");return xt}static sortBasedOnPerm(yt,bt){return bt?bt.map(_t=>yt[_t]):yt.slice().reverse()}static padShape(yt,bt){const _t=yt.length;return yt.map((xt,St)=>xt+bt[St]+bt[St+_t])}static areEqual(yt,bt){return yt.length===bt.length&&yt.every((_t,xt)=>_t===bt[xt])}static validateDimsAndCalcSize(yt){if(yt.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let bt=1;for(const _t of yt){if(!Number.isInteger(_t))throw new TypeError(`Invalid shape: ${_t} is not an integer`);if(_t<0||_t>2147483647)throw new TypeError(`Invalid shape: length ${_t} is not allowed`);bt*=_t}return bt}static flattenShape(yt,bt){bt<0&&(bt+=yt.length);const _t=yt.reduce((St,Tt)=>St*Tt,1),xt=yt.slice(bt).reduce((St,Tt)=>St*Tt,1);return[_t/xt,xt]}static squeezeShape(yt,bt){const _t=new Array;bt=ut.normalizeAxes(bt,yt.length);for(let xt=0;xt<yt.length;xt++){const St=bt.indexOf(xt)>=0;if(St&&yt[xt]!==1)throw new Error("squeeze an axis of size different than 1");(bt.length===0&&yt[xt]>1||bt.length>0&&!St)&&_t.push(yt[xt])}return _t}static unsqueezeShape(yt,bt){const _t=new Array(yt.length+bt.length);_t.fill(0);for(let St=0;St<bt.length;St++){const Tt=ut.normalizeAxis(bt[St],_t.length);if(Tt>=_t.length)throw new Error("'axes' has an out of range axis");if(_t[Tt]!==0)throw new Error("'axes' has a duplicate axis");_t[Tt]=1}let xt=0;for(let St=0;St<_t.length;St++)_t[St]===0&&(_t[St]=yt[xt++]);if(xt!==yt.length)throw new Error("the unsqueezed dimension could not be established");return _t}}_.ShapeUtil=ut,_.MathUtil=class{static sqr(vt,yt,bt,_t,xt){if(_t<0||_t>=yt.length)throw new Error("sourceIndex out of bounds");if(bt<0||bt>=vt.length)throw new Error("targetIndex out of bounds");if(_t+xt>yt.length)throw new Error("source indices to be copied are outside bounds");if(bt+xt>vt.length)throw new Error("target array is too small to hold result");for(let St=0;St<xt;St++)vt[bt+St]+=Math.pow(yt[_t+St],2)}static axpy(vt,yt,bt,_t,xt,St){if(_t<0||_t>=yt.length)throw new Error("sourceIndex out of bounds");if(bt<0||bt>=vt.length)throw new Error("targetIndex out of bounds");if(_t+xt>yt.length)throw new Error("source indices to be copied are outside bounds");if(bt+xt>vt.length)throw new Error("target array is too small to hold result");for(let Tt=0;Tt<xt;Tt++)vt[bt+Tt]+=St*yt[_t+Tt]}static powx(vt,yt,bt,_t,xt,St){if(_t<0||_t>=yt.length)throw new Error("sourceIndex out of bounds");if(bt<0||bt>=vt.length)throw new Error("targetIndex out of bounds");if(_t+xt>yt.length)throw new Error("source indices to be copied are outside bounds");if(bt+xt>vt.length)throw new Error("target array is too small to hold result");for(let Tt=0;Tt<xt;Tt++)vt[bt+Tt]=Math.pow(yt[_t+Tt],St)}static mul(vt,yt,bt,_t,xt){if(_t<0||_t>=yt.length)throw new Error("sourceIndex out of bounds");if(bt<0||bt>=vt.length)throw new Error("targetIndex out of bounds");if(_t+xt>yt.length)throw new Error("source indices to be copied are outside bounds");if(bt+xt>vt.length)throw new Error("target array is too small to hold result");for(let St=0;St<xt;St++)vt[bt+St]=yt[_t+St]*vt[bt+St]}};class ft{static splitShape(yt,bt,_t,xt){if(_t.length===0){if(!xt)throw new Error("need to know number of outputs when the 'split' attribute is not specified");ft.determineSplit(yt[bt],xt,_t)}const St=[],Tt=[0];for(let wt=0;wt<_t.length;++wt){wt!==0&&Tt.push(Tt[wt-1]+_t[wt-1]);const Ct=yt.slice();Ct[bt]=_t[wt],St.push(Ct)}return[St,Tt]}static determineSplit(yt,bt,_t){if(yt%bt!=0)throw new Error("cannot split tensor to equal sized parts");for(let xt=0;xt<bt;++xt)_t.push(yt/bt)}}_.SplitUtil=ft;class gt{static calcReduce(yt,bt,_t,xt,St){const Tt=yt.dims.slice(0);bt.length===0&&Tt.forEach((It,Mt)=>bt.push(Mt));const wt=gt.calcReduceShape(Tt,bt,!0),Ct=ut.size(wt),Et=new ot.Tensor(wt,yt.type),At=ut.computeStrides(wt),Pt=ut.computeStrides(Tt),Rt=new Array(Tt.length);for(let It=0;It<Ct;It++){const Mt=ut.offsetToIndices(It,At);dt.fillIndex(Mt,Tt,Rt),Et.set(Mt,gt.calcReduceByAxis(yt.numberData,bt,Tt,0,ut.indicesToOffset(Rt,Pt),xt,St))}return _t?Et:new ot.Tensor(gt.calcReduceShape(Tt,bt,_t),Et.type,void 0,void 0,Et.data,Et.dataId)}static calcReduceByAxis(yt,bt,_t,xt,St,Tt,wt){let Ct=0;if(xt>=bt.length)return Tt(yt[St]);const Et=bt[xt],At=Et>=_t.length?1:ut.size(_t.slice(Et+1));for(let Pt=0;Pt<_t[Et];Pt++)Ct=Pt===0?gt.calcReduceByAxis(yt,bt,_t,xt+1,St,Tt,wt):wt(Ct,gt.calcReduceByAxis(yt,bt,_t,xt+1,St,Tt,wt)),St+=At;return Ct}static calcReduceShape(yt,bt,_t){const xt=yt.slice();for(let St=0;St<bt.length;St++)xt[bt[St]]=_t?1:0;return xt.filter(St=>St!==0)}}_.ReduceUtil=gt;class mt{static adjustPoolAttributes(yt,bt,_t,xt,St,Tt){if(!yt&&_t.length!==bt.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(yt)for(let wt=0;wt<bt.length-2;wt++)wt>=_t.length?_t.push(bt[wt+2]):_t[wt]=bt[wt+2];for(let wt=0;wt<_t.length;wt++)if(wt<xt.length){if(xt[wt]<0)throw new Error("strides should be greater than or equal to 1")}else xt.push(1);for(let wt=0;wt<_t.length;wt++)if(wt<St.length){if(St[wt]<0)throw new Error("dilations should be greater than or equal to 1")}else St.push(1);for(let wt=0;wt<2*_t.length;wt++)if(wt<Tt.length){if(Tt[wt]<0)throw new Error("pad should be greater than or equal to 1")}else Tt.push(0);for(let wt=0;wt<_t.length;wt++){if(_t[wt]<=0)throw new Error("kernel shapes need to be greater than 0");if(Tt[wt]>=_t[wt]||Tt[wt+_t.length]>=_t[wt])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(yt,bt,_t,xt,St,Tt){if(Tt){if(St.length!==2*(yt.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(bt.length!==yt.length-2)throw new Error("length of strides should be the length of data dimensions");if(xt.length!==yt.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let wt=0;wt<yt.length-2;wt++)mt.adjustPadAndReturnShape(yt[wt+2],bt[wt],_t[wt],xt[wt],St,wt,wt+yt.length-2,Tt)}}static computePoolOutputShape(yt,bt,_t,xt,St,Tt,wt){if(bt.length<=0)throw new Error("input shape must be of size greater than 0");const Ct=[bt[0],bt[1]];return mt.computeShapeHelper(yt,bt,Ct,_t,xt,St,Tt,wt),Ct}static computeConvOutputShape(yt,bt,_t,xt,St,Tt,wt){if(yt.length<=0||bt.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const Ct=[yt[0],bt[0]];return mt.computeShapeHelper(!1,yt,Ct,_t,xt,St,Tt,wt),Ct}static computeShapeHelper(yt,bt,_t,xt,St,Tt,wt,Ct){if(yt)for(let Et=0;Et<bt.length-2;Et++)_t.push(1);else for(let Et=0;Et<bt.length-2;Et++)_t.push(mt.adjustPadAndReturnShape(bt[Et+2],xt[Et],St[Et],Tt[Et],wt,Et,Et+bt.length-2,Ct))}static adjustPadAndReturnShape(yt,bt,_t,xt,St,Tt,wt,Ct){const Et=_t*(xt-1)+1;if(!Ct||Ct==="NOTSET")return Math.floor((yt+St[Tt]+St[wt]-Et)/bt+1);switch(Ct){case"VALID":return St[Tt]=0,St[wt]=0,Math.floor((yt-Et)/bt+1);case"SAME_LOWER":case"SAME_UPPER":if(_t!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const At=((yt+bt-1)/bt-1)*bt+xt-yt;return St[Tt]=Math.floor(Ct==="SAME_LOWER"?(At+1)/2:At/2),St[wt]=At-St[Tt],Math.floor((yt+At-xt)/bt+1)}default:throw new Error("Unsupported AutoPad type")}}}_.PoolConvUtil=mt,_.MIN_CLIP=-34028234663852886e22,_.MAX_CLIP=34028234663852886e22,_.decodeUtf8String=function(vt){return new TextDecoder().decode(vt)}},7967:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.iterateExtraOptions=void 0,_.iterateExtraOptions=(et,tt,nt,it)=>{if(typeof et=="object"&&et!==null){if(nt.has(et))throw new Error("Circular reference in options");nt.add(et)}Object.entries(et).forEach(([at,ot])=>{const st=tt?tt+at:at;if(typeof ot=="object")(0,_.iterateExtraOptions)(ot,st+".",nt,it);else if(typeof ot=="string"||typeof ot=="number")it(st,ot.toString());else{if(typeof ot!="boolean")throw new Error("Can't handle extra config type: "+typeof ot);it(st,ot?"1":"0")}})}},2157:function(_e,_,et){var tt,nt=this&&this.__createBinding||(Object.create?function(At,Pt,Rt,It){It===void 0&&(It=Rt);var Mt=Object.getOwnPropertyDescriptor(Pt,Rt);Mt&&!("get"in Mt?!Pt.__esModule:Mt.writable||Mt.configurable)||(Mt={enumerable:!0,get:function(){return Pt[Rt]}}),Object.defineProperty(At,It,Mt)}:function(At,Pt,Rt,It){It===void 0&&(It=Rt),At[It]=Pt[Rt]}),it=this&&this.__setModuleDefault||(Object.create?function(At,Pt){Object.defineProperty(At,"default",{enumerable:!0,value:Pt})}:function(At,Pt){At.default=Pt}),at=this&&this.__importStar||function(At){if(At&&At.__esModule)return At;var Pt={};if(At!=null)for(var Rt in At)Rt!=="default"&&Object.prototype.hasOwnProperty.call(At,Rt)&&nt(Pt,At,Rt);return it(Pt,At),Pt};Object.defineProperty(_,"__esModule",{value:!0}),_.endProfiling=_.run=_.releaseSession=_.createSession=_.createSessionFinalize=_.createSessionAllocate=_.initOrt=_.initWasm=void 0;const ot=et(1670),st=at(et(349)),dt=et(6361),ht=()=>!!ot.env.wasm.proxy&&typeof document<"u";let ct,ut,ft,gt=!1,mt=!1,vt=!1;const yt=[],bt=[],_t=[],xt=[],St=[],Tt=[],wt=()=>{if(gt||!mt||vt||!ct)throw new Error("worker not ready")},Ct=At=>{switch(At.data.type){case"init-wasm":gt=!1,At.data.err?(vt=!0,ut[1](At.data.err)):(mt=!0,ut[0]());break;case"init-ort":At.data.err?ft[1](At.data.err):ft[0]();break;case"create_allocate":At.data.err?yt.shift()[1](At.data.err):yt.shift()[0](At.data.out);break;case"create_finalize":At.data.err?bt.shift()[1](At.data.err):bt.shift()[0](At.data.out);break;case"create":At.data.err?_t.shift()[1](At.data.err):_t.shift()[0](At.data.out);break;case"release":At.data.err?xt.shift()[1](At.data.err):xt.shift()[0]();break;case"run":At.data.err?St.shift()[1](At.data.err):St.shift()[0](At.data.out);break;case"end-profiling":At.data.err?Tt.shift()[1](At.data.err):Tt.shift()[0]()}},Et=typeof document<"u"?(tt=document==null?void 0:document.currentScript)===null||tt===void 0?void 0:tt.src:void 0;_.initWasm=async()=>{if(ht()){if(mt)return;if(gt)throw new Error("multiple calls to 'initWasm()' detected.");if(vt)throw new Error("previous call to 'initWasm()' failed.");return gt=!0,ot.env.wasm.wasmPaths===void 0&&Et&&Et.indexOf("blob:")!==0&&(ot.env.wasm.wasmPaths=Et.substr(0,+Et.lastIndexOf("/")+1)),new Promise((At,Pt)=>{ct==null||ct.terminate(),ct=et(9710).Z(),ct.onmessage=Ct,ut=[At,Pt];const Rt={type:"init-wasm",in:ot.env.wasm};ct.postMessage(Rt)})}return(0,dt.initializeWebAssembly)(ot.env.wasm)},_.initOrt=async(At,Pt)=>{if(ht())return wt(),new Promise((Rt,It)=>{ft=[Rt,It];const Mt={type:"init-ort",in:{numThreads:At,loggingLevel:Pt}};ct.postMessage(Mt)});st.initOrt(At,Pt)},_.createSessionAllocate=async At=>ht()?(wt(),new Promise((Pt,Rt)=>{yt.push([Pt,Rt]);const It={type:"create_allocate",in:{model:At}};ct.postMessage(It,[At.buffer])})):st.createSessionAllocate(At),_.createSessionFinalize=async(At,Pt)=>ht()?(wt(),new Promise((Rt,It)=>{bt.push([Rt,It]);const Mt={type:"create_finalize",in:{modeldata:At,options:Pt}};ct.postMessage(Mt)})):st.createSessionFinalize(At,Pt),_.createSession=async(At,Pt)=>ht()?(wt(),new Promise((Rt,It)=>{_t.push([Rt,It]);const Mt={type:"create",in:{model:At,options:Pt}};ct.postMessage(Mt,[At.buffer])})):st.createSession(At,Pt),_.releaseSession=async At=>{if(ht())return wt(),new Promise((Pt,Rt)=>{xt.push([Pt,Rt]);const It={type:"release",in:At};ct.postMessage(It)});st.releaseSession(At)},_.run=async(At,Pt,Rt,It,Mt)=>ht()?(wt(),new Promise((Ot,$t)=>{St.push([Ot,$t]);const Lt={type:"run",in:{sessionId:At,inputIndices:Pt,inputs:Rt,outputIndices:It,options:Mt}};ct.postMessage(Lt,st.extractTransferableBuffers(Rt))})):st.run(At,Pt,Rt,It,Mt),_.endProfiling=async At=>{if(ht())return wt(),new Promise((Pt,Rt)=>{Tt.push([Pt,Rt]);const It={type:"end-profiling",in:At};ct.postMessage(It)});st.endProfiling(At)}},586:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.setRunOptions=void 0;const tt=et(7967),nt=et(4983),it=et(6361);_.setRunOptions=at=>{const ot=(0,it.getInstance)();let st=0;const dt=[],ht=at||{};try{if((at==null?void 0:at.logSeverityLevel)===void 0)ht.logSeverityLevel=2;else if(typeof at.logSeverityLevel!="number"||!Number.isInteger(at.logSeverityLevel)||at.logSeverityLevel<0||at.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${at.logSeverityLevel}`);if((at==null?void 0:at.logVerbosityLevel)===void 0)ht.logVerbosityLevel=0;else if(typeof at.logVerbosityLevel!="number"||!Number.isInteger(at.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${at.logVerbosityLevel}`);(at==null?void 0:at.terminate)===void 0&&(ht.terminate=!1);let ct=0;if((at==null?void 0:at.tag)!==void 0&&(ct=(0,nt.allocWasmString)(at.tag,dt)),st=ot._OrtCreateRunOptions(ht.logSeverityLevel,ht.logVerbosityLevel,!!ht.terminate,ct),st===0)throw new Error("Can't create run options");return(at==null?void 0:at.extra)!==void 0&&(0,tt.iterateExtraOptions)(at.extra,"",new WeakSet,(ut,ft)=>{const gt=(0,nt.allocWasmString)(ut,dt),mt=(0,nt.allocWasmString)(ft,dt);if(ot._OrtAddRunConfigEntry(st,gt,mt)!==0)throw new Error(`Can't set a run config entry: ${ut} - ${ft}`)}),[st,dt]}catch(ct){throw st!==0&&ot._OrtReleaseRunOptions(st),dt.forEach(ot._free),ct}}},2306:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OnnxruntimeWebAssemblySessionHandler=void 0;const tt=et(2806),nt=et(1670),it=et(2850),at=et(2157);let ot;_.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(st){const dt=await fetch(st),ht=await dt.arrayBuffer();return(0,at.createSessionAllocate)(new Uint8Array(ht))}async loadModel(st,dt){if(ot||(await(0,at.initOrt)(nt.env.wasm.numThreads,(ht=>{switch(ht){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${ht}`)}})(nt.env.logLevel)),ot=!0),typeof st=="string")if(typeof fetch>"u"){const ht=await(0,it.promisify)(tt.readFile)(st);[this.sessionId,this.inputNames,this.outputNames]=await(0,at.createSession)(ht,dt)}else{const ht=await this.createSessionAllocate(st);[this.sessionId,this.inputNames,this.outputNames]=await(0,at.createSessionFinalize)(ht,dt)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,at.createSession)(st,dt)}async dispose(){return(0,at.releaseSession)(this.sessionId)}async run(st,dt,ht){const ct=[],ut=[];Object.entries(st).forEach(vt=>{const yt=vt[0],bt=vt[1],_t=this.inputNames.indexOf(yt);if(_t===-1)throw new Error(`invalid input '${yt}'`);ct.push(bt),ut.push(_t)});const ft=[];Object.entries(dt).forEach(vt=>{const yt=vt[0],bt=this.outputNames.indexOf(yt);if(bt===-1)throw new Error(`invalid output '${yt}'`);ft.push(bt)});const gt=await(0,at.run)(this.sessionId,ut,ct.map(vt=>[vt.type,vt.dims,vt.data]),ft,ht),mt={};for(let vt=0;vt<gt.length;vt++)mt[this.outputNames[ft[vt]]]=new nt.Tensor(gt[vt][0],gt[vt][2],gt[vt][1]);return mt}startProfiling(){}endProfiling(){(0,at.endProfiling)(this.sessionId)}}},4919:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.setSessionOptions=void 0;const tt=et(7967),nt=et(4983),it=et(6361);_.setSessionOptions=at=>{const ot=(0,it.getInstance)();let st=0;const dt=[],ht=at||{};(ct=>{ct.extra||(ct.extra={}),ct.extra.session||(ct.extra.session={});const ut=ct.extra.session;ut.use_ort_model_bytes_directly||(ut.use_ort_model_bytes_directly="1")})(ht);try{(at==null?void 0:at.graphOptimizationLevel)===void 0&&(ht.graphOptimizationLevel="all");const ct=(gt=>{switch(gt){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${gt}`)}})(ht.graphOptimizationLevel);(at==null?void 0:at.enableCpuMemArena)===void 0&&(ht.enableCpuMemArena=!0),(at==null?void 0:at.enableMemPattern)===void 0&&(ht.enableMemPattern=!0),(at==null?void 0:at.executionMode)===void 0&&(ht.executionMode="sequential");const ut=(gt=>{switch(gt){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${gt}`)}})(ht.executionMode);let ft=0;if((at==null?void 0:at.logId)!==void 0&&(ft=(0,nt.allocWasmString)(at.logId,dt)),(at==null?void 0:at.logSeverityLevel)===void 0)ht.logSeverityLevel=2;else if(typeof at.logSeverityLevel!="number"||!Number.isInteger(at.logSeverityLevel)||at.logSeverityLevel<0||at.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${at.logSeverityLevel}`);if((at==null?void 0:at.logVerbosityLevel)===void 0)ht.logVerbosityLevel=0;else if(typeof at.logVerbosityLevel!="number"||!Number.isInteger(at.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${at.logVerbosityLevel}`);if((at==null?void 0:at.enableProfiling)===void 0&&(ht.enableProfiling=!1),st=ot._OrtCreateSessionOptions(ct,!!ht.enableCpuMemArena,!!ht.enableMemPattern,ut,!!ht.enableProfiling,0,ft,ht.logSeverityLevel,ht.logVerbosityLevel),st===0)throw new Error("Can't create session options");return at!=null&&at.executionProviders&&((gt,mt,vt)=>{for(const yt of mt){let bt=typeof yt=="string"?yt:yt.name;switch(bt){case"xnnpack":bt="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${bt}`)}const _t=(0,nt.allocWasmString)(bt,vt);if((0,it.getInstance)()._OrtAppendExecutionProvider(gt,_t)!==0)throw new Error(`Can't append execution provider: ${bt}`)}})(st,at.executionProviders,dt),(at==null?void 0:at.extra)!==void 0&&(0,tt.iterateExtraOptions)(at.extra,"",new WeakSet,(gt,mt)=>{const vt=(0,nt.allocWasmString)(gt,dt),yt=(0,nt.allocWasmString)(mt,dt);if(ot._OrtAddSessionConfigEntry(st,vt,yt)!==0)throw new Error(`Can't set a session config entry: ${gt} - ${mt}`)}),[st,dt]}catch(ct){throw st!==0&&ot._OrtReleaseSessionOptions(st),dt.forEach(ot._free),ct}}},4983:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.allocWasmString=void 0;const tt=et(6361);_.allocWasmString=(nt,it)=>{const at=(0,tt.getInstance)(),ot=at.lengthBytesUTF8(nt)+1,st=at._malloc(ot);return at.stringToUTF8(nt,st,ot),it.push(st),st}},349:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.extractTransferableBuffers=_.endProfiling=_.run=_.releaseSession=_.createSession=_.createSessionFinalize=_.createSessionAllocate=_.initOrt=void 0;const tt=et(586),nt=et(4919),it=et(4983),at=et(6361);_.initOrt=(ct,ut)=>{const ft=(0,at.getInstance)()._OrtInit(ct,ut);if(ft!==0)throw new Error(`Can't initialize onnxruntime. error code = ${ft}`)};const ot=new Map;_.createSessionAllocate=ct=>{const ut=(0,at.getInstance)(),ft=ut._malloc(ct.byteLength);return ut.HEAPU8.set(ct,ft),[ft,ct.byteLength]},_.createSessionFinalize=(ct,ut)=>{const ft=(0,at.getInstance)();let gt=0,mt=0,vt=[];try{if([mt,vt]=(0,nt.setSessionOptions)(ut),gt=ft._OrtCreateSession(ct[0],ct[1],mt),gt===0)throw new Error("Can't create a session")}finally{ft._free(ct[0]),ft._OrtReleaseSessionOptions(mt),vt.forEach(ft._free)}const yt=ft._OrtGetInputCount(gt),bt=ft._OrtGetOutputCount(gt),_t=[],xt=[],St=[],Tt=[];for(let wt=0;wt<yt;wt++){const Ct=ft._OrtGetInputName(gt,wt);if(Ct===0)throw new Error("Can't get an input name");xt.push(Ct),_t.push(ft.UTF8ToString(Ct))}for(let wt=0;wt<bt;wt++){const Ct=ft._OrtGetOutputName(gt,wt);if(Ct===0)throw new Error("Can't get an output name");Tt.push(Ct),St.push(ft.UTF8ToString(Ct))}return ot.set(gt,[gt,xt,Tt]),[gt,_t,St]},_.createSession=(ct,ut)=>{const ft=(0,_.createSessionAllocate)(ct);return(0,_.createSessionFinalize)(ft,ut)},_.releaseSession=ct=>{const ut=(0,at.getInstance)(),ft=ot.get(ct);if(!ft)throw new Error("invalid session id");const gt=ft[0],mt=ft[1],vt=ft[2];mt.forEach(ut._OrtFree),vt.forEach(ut._OrtFree),ut._OrtReleaseSession(gt),ot.delete(ct)};const st=ct=>{switch(ct){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${ct}`)}},dt=ct=>{switch(ct){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${ct}`)}},ht=ct=>{switch(ct){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${ct}`)}};_.run=(ct,ut,ft,gt,mt)=>{const vt=(0,at.getInstance)(),yt=ot.get(ct);if(!yt)throw new Error("invalid session id");const bt=yt[0],_t=yt[1],xt=yt[2],St=ut.length,Tt=gt.length;let wt=0,Ct=[];const Et=[],At=[];try{[wt,Ct]=(0,tt.setRunOptions)(mt);for(let $t=0;$t<St;$t++){const Lt=ft[$t][0],kt=ft[$t][1],Nt=ft[$t][2];let Vt,zt;if(Array.isArray(Nt)){zt=4*Nt.length,Vt=vt._malloc(zt),At.push(Vt);let nr=Vt/4;for(let Jt=0;Jt<Nt.length;Jt++){if(typeof Nt[Jt]!="string")throw new TypeError(`tensor data at index ${Jt} is not a string`);vt.HEAPU32[nr++]=(0,it.allocWasmString)(Nt[Jt],At)}}else zt=Nt.byteLength,Vt=vt._malloc(zt),At.push(Vt),vt.HEAPU8.set(new Uint8Array(Nt.buffer,Nt.byteOffset,zt),Vt);const Xt=vt.stackSave(),Wt=vt.stackAlloc(4*kt.length);try{let nr=Wt/4;kt.forEach(lr=>vt.HEAP32[nr++]=lr);const Jt=vt._OrtCreateTensor(st(Lt),Vt,zt,Wt,kt.length);if(Jt===0)throw new Error("Can't create a tensor");Et.push(Jt)}finally{vt.stackRestore(Xt)}}const Pt=vt.stackSave(),Rt=vt.stackAlloc(4*St),It=vt.stackAlloc(4*St),Mt=vt.stackAlloc(4*Tt),Ot=vt.stackAlloc(4*Tt);try{let $t=Rt/4,Lt=It/4,kt=Mt/4,Nt=Ot/4;for(let Xt=0;Xt<St;Xt++)vt.HEAPU32[$t++]=Et[Xt],vt.HEAPU32[Lt++]=_t[ut[Xt]];for(let Xt=0;Xt<Tt;Xt++)vt.HEAPU32[kt++]=0,vt.HEAPU32[Nt++]=xt[gt[Xt]];let Vt=vt._OrtRun(bt,It,Rt,St,Ot,Tt,Mt,wt);const zt=[];if(Vt===0)for(let Xt=0;Xt<Tt;Xt++){const Wt=vt.HEAPU32[Mt/4+Xt],nr=vt.stackSave(),Jt=vt.stackAlloc(16);let lr,pr=0;try{if(Vt=vt._OrtGetTensorData(Wt,Jt,Jt+4,Jt+8,Jt+12),Vt!==0)throw new Error(`Can't access output tensor data. error code = ${Vt}`);let Zt=Jt/4;const Kt=vt.HEAPU32[Zt++];pr=vt.HEAPU32[Zt++];const ur=vt.HEAPU32[Zt++],ir=vt.HEAPU32[Zt++],hr=[];for(let mr=0;mr<ir;mr++)hr.push(vt.HEAPU32[ur/4+mr]);vt._OrtFree(ur);const fr=hr.length===0?1:hr.reduce((mr,br)=>mr*br);if(lr=dt(Kt),lr==="string"){const mr=[];let br=pr/4;for(let Er=0;Er<fr;Er++){const kr=vt.HEAPU32[br++],jr=Er===fr-1?void 0:vt.HEAPU32[br]-kr;mr.push(vt.UTF8ToString(kr,jr))}zt.push([lr,hr,mr])}else{const mr=new(ht(lr))(fr);new Uint8Array(mr.buffer,mr.byteOffset,mr.byteLength).set(vt.HEAPU8.subarray(pr,pr+mr.byteLength)),zt.push([lr,hr,mr])}}finally{vt.stackRestore(nr),lr==="string"&&pr&&vt._free(pr),vt._OrtReleaseTensor(Wt)}}if(Vt===0)return zt;throw new Error(`failed to call OrtRun(). error code = ${Vt}.`)}finally{vt.stackRestore(Pt)}}finally{Et.forEach(vt._OrtReleaseTensor),At.forEach(vt._free),vt._OrtReleaseRunOptions(wt),Ct.forEach(vt._free)}},_.endProfiling=ct=>{const ut=(0,at.getInstance)(),ft=ot.get(ct);if(!ft)throw new Error("invalid session id");const gt=ft[0],mt=ut._OrtEndProfiling(gt);if(mt===0)throw new Error("Can't get an profile file name");ut._OrtFree(mt)},_.extractTransferableBuffers=ct=>{const ut=[];for(const ft of ct){const gt=ft[2];!Array.isArray(gt)&&gt.buffer&&ut.push(gt.buffer)}return ut}},6361:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(mt,vt,yt,bt){bt===void 0&&(bt=yt);var _t=Object.getOwnPropertyDescriptor(vt,yt);_t&&!("get"in _t?!vt.__esModule:_t.writable||_t.configurable)||(_t={enumerable:!0,get:function(){return vt[yt]}}),Object.defineProperty(mt,bt,_t)}:function(mt,vt,yt,bt){bt===void 0&&(bt=yt),mt[bt]=vt[yt]}),nt=this&&this.__setModuleDefault||(Object.create?function(mt,vt){Object.defineProperty(mt,"default",{enumerable:!0,value:vt})}:function(mt,vt){mt.default=vt}),it=this&&this.__importStar||function(mt){if(mt&&mt.__esModule)return mt;var vt={};if(mt!=null)for(var yt in mt)yt!=="default"&&Object.prototype.hasOwnProperty.call(mt,yt)&&tt(vt,mt,yt);return nt(vt,mt),vt},at=this&&this.__importDefault||function(mt){return mt&&mt.__esModule?mt:{default:mt}};Object.defineProperty(_,"__esModule",{value:!0}),_.dispose=_.getInstance=_.initializeWebAssembly=void 0;const ot=it(et(6449)),st=at(et(932)),dt=et(3474);let ht,ct=!1,ut=!1,ft=!1;const gt=(mt,vt)=>vt?mt?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":mt?"ort-wasm-simd.wasm":"ort-wasm.wasm";_.initializeWebAssembly=async mt=>{if(ct)return Promise.resolve();if(ut)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(ft)throw new Error("previous call to 'initializeWebAssembly()' failed.");ut=!0;const vt=mt.initTimeout,yt=mt.numThreads,bt=mt.simd,_t=yt>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),xt=bt&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),St=typeof mt.wasmPaths=="string"?mt.wasmPaths:void 0,Tt=gt(!1,_t),wt=gt(xt,_t),Ct=typeof mt.wasmPaths=="object"?mt.wasmPaths[wt]:void 0;let Et=!1;const At=[];if(vt>0&&At.push(new Promise(Pt=>{setTimeout(()=>{Et=!0,Pt()},vt)})),At.push(new Promise((Pt,Rt)=>{const It=_t?dt:st.default,Mt={locateFile:(Ot,$t)=>_t&&Ot.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([et(4154)],{type:"text/javascript"})):Ot===Tt?Ct??(St??$t)+wt:$t+Ot};if(_t)if(typeof Blob>"u")Mt.mainScriptUrlOrBlob=ot.join("/","ort-wasm-threaded.js");else{const Ot=`var ortWasmThreaded=(function(){var _scriptDir;return ${It.toString()}})();`;Mt.mainScriptUrlOrBlob=new Blob([Ot],{type:"text/javascript"})}It(Mt).then(Ot=>{ut=!1,ct=!0,ht=Ot,Pt()},Ot=>{ut=!1,ft=!0,Rt(Ot)})})),await Promise.race(At),Et)throw new Error(`WebAssembly backend initializing failed due to timeout: ${vt}ms`)},_.getInstance=()=>{if(ct&&ht)return ht;throw new Error("WebAssembly is not initialized yet.")},_.dispose=()=>{var mt;!ct||ut||ft||(ut=!0,(mt=ht.PThread)===null||mt===void 0||mt.terminateAllThreads(),ht=void 0,ut=!1,ct=!1,ft=!0)}},9710:(_e,_,et)=>{et.d(_,{Z:()=>it});var tt=et(477),nt=et.n(tt);function it(){return nt()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:_e=>{_e.exports=function(_,et,tt,nt){var it=self||window;try{try{var at;try{at=new it.Blob([_])}catch{(at=new(it.BlobBuilder||it.WebKitBlobBuilder||it.MozBlobBuilder||it.MSBlobBuilder)).append(_),at=at.getBlob()}var ot=it.URL||it.webkitURL,st=ot.createObjectURL(at),dt=new it[et](st,tt);return ot.revokeObjectURL(st),dt}catch{return new it[et]("data:application/javascript,".concat(encodeURIComponent(_)),tt)}}catch{if(!nt)throw Error("Inline worker is not supported");return new it[et](nt,tt)}}},4154:_e=>{_e.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:_e=>{_e.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(_e,_,et)=>{et.r(_),et.d(_,{flatbuffers:()=>tt});var tt={};tt.Offset,tt.Table,tt.SIZEOF_SHORT=2,tt.SIZEOF_INT=4,tt.FILE_IDENTIFIER_LENGTH=4,tt.SIZE_PREFIX_LENGTH=4,tt.Encoding={UTF8_BYTES:1,UTF16_STRING:2},tt.int32=new Int32Array(2),tt.float32=new Float32Array(tt.int32.buffer),tt.float64=new Float64Array(tt.int32.buffer),tt.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,tt.Long=function(nt,it){this.low=0|nt,this.high=0|it},tt.Long.create=function(nt,it){return nt==0&&it==0?tt.Long.ZERO:new tt.Long(nt,it)},tt.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},tt.Long.prototype.equals=function(nt){return this.low==nt.low&&this.high==nt.high},tt.Long.ZERO=new tt.Long(0,0),tt.Builder=function(nt){if(nt)it=nt;else var it=1024;this.bb=tt.ByteBuffer.allocate(it),this.space=it,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},tt.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},tt.Builder.prototype.forceDefaults=function(nt){this.force_defaults=nt},tt.Builder.prototype.dataBuffer=function(){return this.bb},tt.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},tt.Builder.prototype.prep=function(nt,it){nt>this.minalign&&(this.minalign=nt);for(var at=1+~(this.bb.capacity()-this.space+it)&nt-1;this.space<at+nt+it;){var ot=this.bb.capacity();this.bb=tt.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-ot}this.pad(at)},tt.Builder.prototype.pad=function(nt){for(var it=0;it<nt;it++)this.bb.writeInt8(--this.space,0)},tt.Builder.prototype.writeInt8=function(nt){this.bb.writeInt8(this.space-=1,nt)},tt.Builder.prototype.writeInt16=function(nt){this.bb.writeInt16(this.space-=2,nt)},tt.Builder.prototype.writeInt32=function(nt){this.bb.writeInt32(this.space-=4,nt)},tt.Builder.prototype.writeInt64=function(nt){this.bb.writeInt64(this.space-=8,nt)},tt.Builder.prototype.writeFloat32=function(nt){this.bb.writeFloat32(this.space-=4,nt)},tt.Builder.prototype.writeFloat64=function(nt){this.bb.writeFloat64(this.space-=8,nt)},tt.Builder.prototype.addInt8=function(nt){this.prep(1,0),this.writeInt8(nt)},tt.Builder.prototype.addInt16=function(nt){this.prep(2,0),this.writeInt16(nt)},tt.Builder.prototype.addInt32=function(nt){this.prep(4,0),this.writeInt32(nt)},tt.Builder.prototype.addInt64=function(nt){this.prep(8,0),this.writeInt64(nt)},tt.Builder.prototype.addFloat32=function(nt){this.prep(4,0),this.writeFloat32(nt)},tt.Builder.prototype.addFloat64=function(nt){this.prep(8,0),this.writeFloat64(nt)},tt.Builder.prototype.addFieldInt8=function(nt,it,at){(this.force_defaults||it!=at)&&(this.addInt8(it),this.slot(nt))},tt.Builder.prototype.addFieldInt16=function(nt,it,at){(this.force_defaults||it!=at)&&(this.addInt16(it),this.slot(nt))},tt.Builder.prototype.addFieldInt32=function(nt,it,at){(this.force_defaults||it!=at)&&(this.addInt32(it),this.slot(nt))},tt.Builder.prototype.addFieldInt64=function(nt,it,at){!this.force_defaults&&it.equals(at)||(this.addInt64(it),this.slot(nt))},tt.Builder.prototype.addFieldFloat32=function(nt,it,at){(this.force_defaults||it!=at)&&(this.addFloat32(it),this.slot(nt))},tt.Builder.prototype.addFieldFloat64=function(nt,it,at){(this.force_defaults||it!=at)&&(this.addFloat64(it),this.slot(nt))},tt.Builder.prototype.addFieldOffset=function(nt,it,at){(this.force_defaults||it!=at)&&(this.addOffset(it),this.slot(nt))},tt.Builder.prototype.addFieldStruct=function(nt,it,at){it!=at&&(this.nested(it),this.slot(nt))},tt.Builder.prototype.nested=function(nt){if(nt!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},tt.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},tt.Builder.prototype.slot=function(nt){this.vtable[nt]=this.offset()},tt.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},tt.Builder.growByteBuffer=function(nt){var it=nt.capacity();if(3221225472&it)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var at=it<<1,ot=tt.ByteBuffer.allocate(at);return ot.setPosition(at-it),ot.bytes().set(nt.bytes(),at-it),ot},tt.Builder.prototype.addOffset=function(nt){this.prep(tt.SIZEOF_INT,0),this.writeInt32(this.offset()-nt+tt.SIZEOF_INT)},tt.Builder.prototype.startObject=function(nt){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=nt;for(var it=0;it<nt;it++)this.vtable[it]=0;this.isNested=!0,this.object_start=this.offset()},tt.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var nt=this.offset(),it=this.vtable_in_use-1;it>=0&&this.vtable[it]==0;it--);for(var at=it+1;it>=0;it--)this.addInt16(this.vtable[it]!=0?nt-this.vtable[it]:0);this.addInt16(nt-this.object_start);var ot=(at+2)*tt.SIZEOF_SHORT;this.addInt16(ot);var st=0,dt=this.space;e:for(it=0;it<this.vtables.length;it++){var ht=this.bb.capacity()-this.vtables[it];if(ot==this.bb.readInt16(ht)){for(var ct=tt.SIZEOF_SHORT;ct<ot;ct+=tt.SIZEOF_SHORT)if(this.bb.readInt16(dt+ct)!=this.bb.readInt16(ht+ct))continue e;st=this.vtables[it];break}}return st?(this.space=this.bb.capacity()-nt,this.bb.writeInt32(this.space,st-nt)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-nt,this.offset()-nt)),this.isNested=!1,nt},tt.Builder.prototype.finish=function(nt,it,at){var ot=at?tt.SIZE_PREFIX_LENGTH:0;if(it){var st=it;if(this.prep(this.minalign,tt.SIZEOF_INT+tt.FILE_IDENTIFIER_LENGTH+ot),st.length!=tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+tt.FILE_IDENTIFIER_LENGTH);for(var dt=tt.FILE_IDENTIFIER_LENGTH-1;dt>=0;dt--)this.writeInt8(st.charCodeAt(dt))}this.prep(this.minalign,tt.SIZEOF_INT+ot),this.addOffset(nt),ot&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},tt.Builder.prototype.finishSizePrefixed=function(nt,it){this.finish(nt,it,!0)},tt.Builder.prototype.requiredField=function(nt,it){var at=this.bb.capacity()-nt,ot=at-this.bb.readInt32(at);if(this.bb.readInt16(ot+it)==0)throw new Error("FlatBuffers: field "+it+" must be set")},tt.Builder.prototype.startVector=function(nt,it,at){this.notNested(),this.vector_num_elems=it,this.prep(tt.SIZEOF_INT,nt*it),this.prep(at,nt*it)},tt.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},tt.Builder.prototype.createString=function(nt){if(nt instanceof Uint8Array)var it=nt;else{it=[];for(var at=0;at<nt.length;){var ot,st=nt.charCodeAt(at++);(ot=st<55296||st>=56320?st:(st<<10)+nt.charCodeAt(at++)+-56613888)<128?it.push(ot):(ot<2048?it.push(ot>>6&31|192):(ot<65536?it.push(ot>>12&15|224):it.push(ot>>18&7|240,ot>>12&63|128),it.push(ot>>6&63|128)),it.push(63&ot|128))}}this.addInt8(0),this.startVector(1,it.length,1),this.bb.setPosition(this.space-=it.length),at=0;for(var dt=this.space,ht=this.bb.bytes();at<it.length;at++)ht[dt++]=it[at];return this.endVector()},tt.Builder.prototype.createLong=function(nt,it){return tt.Long.create(nt,it)},tt.ByteBuffer=function(nt){this.bytes_=nt,this.position_=0},tt.ByteBuffer.allocate=function(nt){return new tt.ByteBuffer(new Uint8Array(nt))},tt.ByteBuffer.prototype.clear=function(){this.position_=0},tt.ByteBuffer.prototype.bytes=function(){return this.bytes_},tt.ByteBuffer.prototype.position=function(){return this.position_},tt.ByteBuffer.prototype.setPosition=function(nt){this.position_=nt},tt.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},tt.ByteBuffer.prototype.readInt8=function(nt){return this.readUint8(nt)<<24>>24},tt.ByteBuffer.prototype.readUint8=function(nt){return this.bytes_[nt]},tt.ByteBuffer.prototype.readInt16=function(nt){return this.readUint16(nt)<<16>>16},tt.ByteBuffer.prototype.readUint16=function(nt){return this.bytes_[nt]|this.bytes_[nt+1]<<8},tt.ByteBuffer.prototype.readInt32=function(nt){return this.bytes_[nt]|this.bytes_[nt+1]<<8|this.bytes_[nt+2]<<16|this.bytes_[nt+3]<<24},tt.ByteBuffer.prototype.readUint32=function(nt){return this.readInt32(nt)>>>0},tt.ByteBuffer.prototype.readInt64=function(nt){return new tt.Long(this.readInt32(nt),this.readInt32(nt+4))},tt.ByteBuffer.prototype.readUint64=function(nt){return new tt.Long(this.readUint32(nt),this.readUint32(nt+4))},tt.ByteBuffer.prototype.readFloat32=function(nt){return tt.int32[0]=this.readInt32(nt),tt.float32[0]},tt.ByteBuffer.prototype.readFloat64=function(nt){return tt.int32[tt.isLittleEndian?0:1]=this.readInt32(nt),tt.int32[tt.isLittleEndian?1:0]=this.readInt32(nt+4),tt.float64[0]},tt.ByteBuffer.prototype.writeInt8=function(nt,it){this.bytes_[nt]=it},tt.ByteBuffer.prototype.writeUint8=function(nt,it){this.bytes_[nt]=it},tt.ByteBuffer.prototype.writeInt16=function(nt,it){this.bytes_[nt]=it,this.bytes_[nt+1]=it>>8},tt.ByteBuffer.prototype.writeUint16=function(nt,it){this.bytes_[nt]=it,this.bytes_[nt+1]=it>>8},tt.ByteBuffer.prototype.writeInt32=function(nt,it){this.bytes_[nt]=it,this.bytes_[nt+1]=it>>8,this.bytes_[nt+2]=it>>16,this.bytes_[nt+3]=it>>24},tt.ByteBuffer.prototype.writeUint32=function(nt,it){this.bytes_[nt]=it,this.bytes_[nt+1]=it>>8,this.bytes_[nt+2]=it>>16,this.bytes_[nt+3]=it>>24},tt.ByteBuffer.prototype.writeInt64=function(nt,it){this.writeInt32(nt,it.low),this.writeInt32(nt+4,it.high)},tt.ByteBuffer.prototype.writeUint64=function(nt,it){this.writeUint32(nt,it.low),this.writeUint32(nt+4,it.high)},tt.ByteBuffer.prototype.writeFloat32=function(nt,it){tt.float32[0]=it,this.writeInt32(nt,tt.int32[0])},tt.ByteBuffer.prototype.writeFloat64=function(nt,it){tt.float64[0]=it,this.writeInt32(nt,tt.int32[tt.isLittleEndian?0:1]),this.writeInt32(nt+4,tt.int32[tt.isLittleEndian?1:0])},tt.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+tt.SIZEOF_INT+tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var nt="",it=0;it<tt.FILE_IDENTIFIER_LENGTH;it++)nt+=String.fromCharCode(this.readInt8(this.position_+tt.SIZEOF_INT+it));return nt},tt.ByteBuffer.prototype.__offset=function(nt,it){var at=nt-this.readInt32(nt);return it<this.readInt16(at)?this.readInt16(at+it):0},tt.ByteBuffer.prototype.__union=function(nt,it){return nt.bb_pos=it+this.readInt32(it),nt.bb=this,nt},tt.ByteBuffer.prototype.__string=function(nt,it){nt+=this.readInt32(nt);var at=this.readInt32(nt),ot="",st=0;if(nt+=tt.SIZEOF_INT,it===tt.Encoding.UTF8_BYTES)return this.bytes_.subarray(nt,nt+at);for(;st<at;){var dt,ht=this.readUint8(nt+st++);if(ht<192)dt=ht;else{var ct=this.readUint8(nt+st++);if(ht<224)dt=(31&ht)<<6|63&ct;else{var ut=this.readUint8(nt+st++);dt=ht<240?(15&ht)<<12|(63&ct)<<6|63&ut:(7&ht)<<18|(63&ct)<<12|(63&ut)<<6|63&this.readUint8(nt+st++)}}dt<65536?ot+=String.fromCharCode(dt):(dt-=65536,ot+=String.fromCharCode(55296+(dt>>10),56320+(1023&dt)))}return ot},tt.ByteBuffer.prototype.__indirect=function(nt){return nt+this.readInt32(nt)},tt.ByteBuffer.prototype.__vector=function(nt){return nt+this.readInt32(nt)+tt.SIZEOF_INT},tt.ByteBuffer.prototype.__vector_len=function(nt){return this.readInt32(nt+this.readInt32(nt))},tt.ByteBuffer.prototype.__has_identifier=function(nt){if(nt.length!=tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+tt.FILE_IDENTIFIER_LENGTH);for(var it=0;it<tt.FILE_IDENTIFIER_LENGTH;it++)if(nt.charCodeAt(it)!=this.readInt8(this.position_+tt.SIZEOF_INT+it))return!1;return!0},tt.ByteBuffer.prototype.createLong=function(nt,it){return tt.Long.create(nt,it)}}},__webpack_module_cache__={};function __webpack_require__(_e){var _=__webpack_module_cache__[_e];if(_!==void 0)return _.exports;var et=__webpack_module_cache__[_e]={exports:{}};return __webpack_modules__[_e].call(et.exports,et,et.exports,__webpack_require__),et.exports}__webpack_require__.n=_e=>{var _=_e&&_e.__esModule?()=>_e.default:()=>_e;return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=(_e,_)=>{for(var et in _)__webpack_require__.o(_,et)&&!__webpack_require__.o(_e,et)&&Object.defineProperty(_e,et,{enumerable:!0,get:_[et]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(_e,_)=>Object.prototype.hasOwnProperty.call(_e,_),__webpack_require__.r=_e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())})(ortWeb_min);var ortWeb_minExports=ortWeb_min.exports,assetPath={};Object.defineProperty(assetPath,"__esModule",{value:!0});assetPath.baseAssetPath=void 0;const isWeb=typeof window<"u"&&typeof window.document<"u",currentScript=isWeb?window.document.currentScript:null;let basePath="/";currentScript&&(basePath=currentScript.src.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"));assetPath.baseAssetPath=basePath;var defaultModelFetcher$1={};Object.defineProperty(defaultModelFetcher$1,"__esModule",{value:!0});defaultModelFetcher$1.defaultModelFetcher=void 0;const defaultModelFetcher=_e=>fetch(_e).then(_=>_.arrayBuffer());defaultModelFetcher$1.defaultModelFetcher=defaultModelFetcher;var frameProcessor={},logging={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.log=_e.LOG_PREFIX=void 0,_e.LOG_PREFIX="[VAD]";const _=["error","debug","warn"];function et(nt){return(...it)=>{console[nt](_e.LOG_PREFIX,...it)}}const tt=_.reduce((nt,it)=>(nt[it]=et(it),nt),{});_e.log=tt})(logging);var messages={};Object.defineProperty(messages,"__esModule",{value:!0});messages.Message=void 0;var Message$1;(function(_e){_e.AudioFrame="AUDIO_FRAME",_e.SpeechStart="SPEECH_START",_e.VADMisfire="VAD_MISFIRE",_e.SpeechEnd="SPEECH_END",_e.SpeechStop="SPEECH_STOP"})(Message$1||(messages.Message=Message$1={}));Object.defineProperty(frameProcessor,"__esModule",{value:!0});frameProcessor.FrameProcessor=frameProcessor.validateOptions=frameProcessor.defaultV5FrameProcessorOptions=frameProcessor.defaultLegacyFrameProcessorOptions=void 0;const logging_1$3=logging,messages_1=messages,RECOMMENDED_FRAME_SAMPLES=[512,1024,1536];frameProcessor.defaultLegacyFrameProcessorOptions={positiveSpeechThreshold:.5,negativeSpeechThreshold:.5-.15,preSpeechPadFrames:1,redemptionFrames:8,frameSamples:1536,minSpeechFrames:3,submitUserSpeechOnPause:!1};frameProcessor.defaultV5FrameProcessorOptions={positiveSpeechThreshold:.5,negativeSpeechThreshold:.5-.15,preSpeechPadFrames:3,redemptionFrames:24,frameSamples:512,minSpeechFrames:9,submitUserSpeechOnPause:!1};function validateOptions(_e){RECOMMENDED_FRAME_SAMPLES.includes(_e.frameSamples)||logging_1$3.log.warn("You are using an unusual frame size"),(_e.positiveSpeechThreshold<0||_e.positiveSpeechThreshold>1)&&logging_1$3.log.error("positiveSpeechThreshold should be a number between 0 and 1"),(_e.negativeSpeechThreshold<0||_e.negativeSpeechThreshold>_e.positiveSpeechThreshold)&&logging_1$3.log.error("negativeSpeechThreshold should be between 0 and positiveSpeechThreshold"),_e.preSpeechPadFrames<0&&logging_1$3.log.error("preSpeechPadFrames should be positive"),_e.redemptionFrames<0&&logging_1$3.log.error("redemptionFrames should be positive")}frameProcessor.validateOptions=validateOptions;const concatArrays=_e=>{const _=_e.reduce((tt,nt)=>(tt.push(tt.at(-1)+nt.length),tt),[0]),et=new Float32Array(_.at(-1));return _e.forEach((tt,nt)=>{const it=_[nt];et.set(tt,it)}),et};class FrameProcessor{constructor(_,et,tt){this.modelProcessFunc=_,this.modelResetFunc=et,this.options=tt,this.speaking=!1,this.redemptionCounter=0,this.active=!1,this.reset=()=>{this.speaking=!1,this.audioBuffer=[],this.modelResetFunc(),this.redemptionCounter=0},this.pause=()=>(this.active=!1,this.options.submitUserSpeechOnPause?this.endSegment():(this.reset(),{})),this.resume=()=>{this.active=!0},this.endSegment=()=>{const nt=this.audioBuffer;this.audioBuffer=[];const it=this.speaking;this.reset();const at=nt.reduce((ot,st)=>ot+ +st.isSpeech,0);if(it)if(at>=this.options.minSpeechFrames){const ot=concatArrays(nt.map(st=>st.frame));return{msg:messages_1.Message.SpeechEnd,audio:ot}}else return{msg:messages_1.Message.VADMisfire};return{}},this.process=async nt=>{if(!this.active)return{};const it=await this.modelProcessFunc(nt);if(this.audioBuffer.push({frame:nt,isSpeech:it.isSpeech>=this.options.positiveSpeechThreshold}),it.isSpeech>=this.options.positiveSpeechThreshold&&this.redemptionCounter&&(this.redemptionCounter=0),it.isSpeech>=this.options.positiveSpeechThreshold&&!this.speaking)return this.speaking=!0,{probs:it,msg:messages_1.Message.SpeechStart,frame:nt};if(it.isSpeech<this.options.negativeSpeechThreshold&&this.speaking&&++this.redemptionCounter>=this.options.redemptionFrames){this.redemptionCounter=0,this.speaking=!1;const at=this.audioBuffer;if(this.audioBuffer=[],at.reduce((st,dt)=>st+ +dt.isSpeech,0)>=this.options.minSpeechFrames){const st=concatArrays(at.map(dt=>dt.frame));return{probs:it,msg:messages_1.Message.SpeechEnd,audio:st,frame:nt}}else return{probs:it,msg:messages_1.Message.VADMisfire,frame:nt}}if(!this.speaking)for(;this.audioBuffer.length>this.options.preSpeechPadFrames;)this.audioBuffer.shift();return{probs:it,frame:nt}},this.audioBuffer=[],this.reset()}}frameProcessor.FrameProcessor=FrameProcessor;var nonRealTimeVad={},models={},common={};Object.defineProperty(common,"__esModule",{value:!0});var legacy={},_a$3;Object.defineProperty(legacy,"__esModule",{value:!0});legacy.SileroLegacy=void 0;const logging_1$2=logging;class SileroLegacy{constructor(_,et,tt,nt,it){this.ortInstance=_,this._session=et,this._h=tt,this._c=nt,this._sr=it,this.reset_state=()=>{const at=Array(128).fill(0);this._h=new this.ortInstance.Tensor("float32",at,[2,1,64]),this._c=new this.ortInstance.Tensor("float32",at,[2,1,64])},this.process=async at=>{var ut;const st={input:new this.ortInstance.Tensor("float32",at,[1,at.length]),h:this._h,c:this._c,sr:this._sr},dt=await this._session.run(st);this._h=dt.hn,this._c=dt.cn;const[ht]=(ut=dt.output)==null?void 0:ut.data;return{notSpeech:1-ht,isSpeech:ht}}}}legacy.SileroLegacy=SileroLegacy;_a$3=SileroLegacy;SileroLegacy.new=async(_e,_)=>{logging_1$2.log.debug("initializing vad");const et=await _(),tt=await _e.InferenceSession.create(et),nt=new _e.Tensor("int64",[16000n]),it=Array(2*64).fill(0),at=new _e.Tensor("float32",it,[2,1,64]),ot=new _e.Tensor("float32",it,[2,1,64]);return logging_1$2.log.debug("vad is initialized"),new _a$3(_e,tt,at,ot,nt)};var v5={},_a$2;Object.defineProperty(v5,"__esModule",{value:!0});v5.SileroV5=void 0;const logging_1$1=logging;function getNewState(_e){const _=Array(256).fill(0);return new _e.Tensor("float32",_,[2,1,128])}class SileroV5{constructor(_,et,tt,nt){this._session=_,this._state=et,this._sr=tt,this.ortInstance=nt,this.reset_state=()=>{this._state=getNewState(this.ortInstance)},this.process=async it=>{var ct;const ot={input:new this.ortInstance.Tensor("float32",it,[1,it.length]),state:this._state,sr:this._sr},st=await this._session.run(ot);this._state=st.stateN;const[dt]=(ct=st.output)==null?void 0:ct.data;return{notSpeech:1-dt,isSpeech:dt}}}}v5.SileroV5=SileroV5;_a$2=SileroV5;SileroV5.new=async(_e,_)=>{logging_1$1.log.debug("Loading VAD...");const et=await _(),tt=await _e.InferenceSession.create(et),nt=new _e.Tensor("int64",[16000n]),it=getNewState(_e);return logging_1$1.log.debug("...finished loading VAD"),new _a$2(tt,it,nt,_e)};(function(_e){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(it,at,ot,st){st===void 0&&(st=ot);var dt=Object.getOwnPropertyDescriptor(at,ot);(!dt||("get"in dt?!at.__esModule:dt.writable||dt.configurable))&&(dt={enumerable:!0,get:function(){return at[ot]}}),Object.defineProperty(it,st,dt)}:function(it,at,ot,st){st===void 0&&(st=ot),it[st]=at[ot]}),et=commonjsGlobal&&commonjsGlobal.__exportStar||function(it,at){for(var ot in it)ot!=="default"&&!Object.prototype.hasOwnProperty.call(at,ot)&&_(at,it,ot)};Object.defineProperty(_e,"__esModule",{value:!0}),_e.SileroV5=_e.SileroLegacy=void 0,et(common,_e);var tt=legacy;Object.defineProperty(_e,"SileroLegacy",{enumerable:!0,get:function(){return tt.SileroLegacy}});var nt=v5;Object.defineProperty(_e,"SileroV5",{enumerable:!0,get:function(){return nt.SileroV5}})})(models);var resampler={};Object.defineProperty(resampler,"__esModule",{value:!0});resampler.Resampler=void 0;const logging_1=logging;class Resampler{constructor(_){this.options=_,this.process=et=>{const tt=[];for(const nt of et)for(this.inputBuffer.push(nt);this.hasEnoughDataForFrame();){const it=this.generateOutputFrame();tt.push(it)}return tt},this.stream=async function*(et){for(const tt of et)for(this.inputBuffer.push(tt);this.hasEnoughDataForFrame();)yield this.generateOutputFrame()},_.nativeSampleRate<16e3&&logging_1.log.error("nativeSampleRate is too low. Should have 16000 = targetSampleRate <= nativeSampleRate"),this.inputBuffer=[]}hasEnoughDataForFrame(){return this.inputBuffer.length*this.options.targetSampleRate/this.options.nativeSampleRate>=this.options.targetFrameSize}generateOutputFrame(){const _=new Float32Array(this.options.targetFrameSize);let et=0,tt=0;for(;et<this.options.targetFrameSize;){let nt=0,it=0;for(;tt<Math.min(this.inputBuffer.length,(et+1)*this.options.nativeSampleRate/this.options.targetSampleRate);){const at=this.inputBuffer[tt];at!==void 0&&(nt+=at,it++),tt++}_[et]=nt/it,et++}return this.inputBuffer=this.inputBuffer.slice(tt),_}}resampler.Resampler=Resampler;(function(_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.PlatformAgnosticNonRealTimeVAD=_e.defaultNonRealTimeVADOptions=void 0;const _=frameProcessor,et=messages,tt=models,nt=resampler;_e.defaultNonRealTimeVADOptions={..._.defaultLegacyFrameProcessorOptions,ortConfig:void 0};class it{static async _new(ot,st,dt={}){const ht={..._e.defaultNonRealTimeVADOptions,...dt};ht.ortConfig!==void 0&&ht.ortConfig(st);const ct=new this(ot,st,ht);return await ct.init(),ct}constructor(ot,st,dt){this.modelFetcher=ot,this.ort=st,this.options=dt,this.init=async()=>{const ht=await tt.SileroLegacy.new(this.ort,this.modelFetcher);this.frameProcessor=new _.FrameProcessor(ht.process,ht.reset_state,{frameSamples:this.options.frameSamples,positiveSpeechThreshold:this.options.positiveSpeechThreshold,negativeSpeechThreshold:this.options.negativeSpeechThreshold,redemptionFrames:this.options.redemptionFrames,preSpeechPadFrames:this.options.preSpeechPadFrames,minSpeechFrames:this.options.minSpeechFrames,submitUserSpeechOnPause:this.options.submitUserSpeechOnPause}),this.frameProcessor.resume()},this.run=async function*(ht,ct){const ut={nativeSampleRate:ct,targetSampleRate:16e3,targetFrameSize:this.options.frameSamples},ft=new nt.Resampler(ut);let gt=0,mt=0,vt=0;for await(const _t of ft.stream(ht)){const{msg:xt,audio:St}=await this.frameProcessor.process(_t);switch(xt){case et.Message.SpeechStart:gt=vt*this.options.frameSamples/16;break;case et.Message.SpeechEnd:mt=(vt+1)*this.options.frameSamples/16,yield{audio:St,start:gt,end:mt};break}vt++}const{msg:yt,audio:bt}=this.frameProcessor.endSegment();yt==et.Message.SpeechEnd&&(yield{audio:bt,start:gt,end:vt*this.options.frameSamples/16})},(0,_.validateOptions)(dt)}}_e.PlatformAgnosticNonRealTimeVAD=it})(nonRealTimeVad);var utils$3={};Object.defineProperty(utils$3,"__esModule",{value:!0});utils$3.audioFileToArray=utils$3.encodeWAV=utils$3.arrayBufferToBase64=utils$3.minFramesForTargetMS=void 0;function minFramesForTargetMS(_e,_,et=16e3){return Math.ceil(_e*et/1e3/_)}utils$3.minFramesForTargetMS=minFramesForTargetMS;function arrayBufferToBase64(_e){const _=new Uint8Array(_e),et=_.byteLength,tt=new Array(et);for(var nt=0;nt<et;nt++){const it=_[nt];if(it===void 0)break;tt[nt]=String.fromCharCode(it)}return btoa(tt.join(""))}utils$3.arrayBufferToBase64=arrayBufferToBase64;function encodeWAV(_e,_=3,et=16e3,tt=1,nt=32){var it=nt/8,at=tt*it,ot=new ArrayBuffer(44+_e.length*it),st=new DataView(ot);return writeString(st,0,"RIFF"),st.setUint32(4,36+_e.length*it,!0),writeString(st,8,"WAVE"),writeString(st,12,"fmt "),st.setUint32(16,16,!0),st.setUint16(20,_,!0),st.setUint16(22,tt,!0),st.setUint32(24,et,!0),st.setUint32(28,et*at,!0),st.setUint16(32,at,!0),st.setUint16(34,nt,!0),writeString(st,36,"data"),st.setUint32(40,_e.length*it,!0),_===1?floatTo16BitPCM(st,44,_e):writeFloat32(st,44,_e),ot}utils$3.encodeWAV=encodeWAV;function writeFloat32(_e,_,et){for(var tt=0;tt<et.length;tt++,_+=4)_e.setFloat32(_,et[tt],!0)}function floatTo16BitPCM(_e,_,et){for(var tt=0;tt<et.length;tt++,_+=2){var nt=Math.max(-1,Math.min(1,et[tt]));_e.setInt16(_,nt<0?nt*32768:nt*32767,!0)}}function writeString(_e,_,et){for(var tt=0;tt<et.length;tt++)_e.setUint8(_+tt,et.charCodeAt(tt))}async function audioFileToArray(_e){const _=new OfflineAudioContext(1,1,44100),et=new FileReader;let tt=null;if(await new Promise(at=>{et.addEventListener("loadend",ot=>{const st=et.result;_.decodeAudioData(st,dt=>{tt=dt,_.startRendering().then(ht=>{console.log("Rendering completed successfully"),at()}).catch(ht=>{console.error(`Rendering failed: ${ht}`)})},dt=>{console.log(`Error with decoding audio data: ${dt}`)})}),et.readAsArrayBuffer(_e)}),tt===null)throw Error("some shit");let nt=tt,it=new Float32Array(nt.length);for(let at=0;at<nt.length;at++)for(let ot=0;ot<nt.numberOfChannels;ot++)it[at]+=nt.getChannelData(ot)[at];return{audio:it,sampleRate:nt.sampleRate}}utils$3.audioFileToArray=audioFileToArray;var realTimeVad={};(function(_e){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(yt,bt,_t,xt){xt===void 0&&(xt=_t);var St=Object.getOwnPropertyDescriptor(bt,_t);(!St||("get"in St?!bt.__esModule:St.writable||St.configurable))&&(St={enumerable:!0,get:function(){return bt[_t]}}),Object.defineProperty(yt,xt,St)}:function(yt,bt,_t,xt){xt===void 0&&(xt=_t),yt[xt]=bt[_t]}),et=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(yt,bt){Object.defineProperty(yt,"default",{enumerable:!0,value:bt})}:function(yt,bt){yt.default=bt}),tt=commonjsGlobal&&commonjsGlobal.__importStar||function(yt){if(yt&&yt.__esModule)return yt;var bt={};if(yt!=null)for(var _t in yt)_t!=="default"&&Object.prototype.hasOwnProperty.call(yt,_t)&&_(bt,yt,_t);return et(bt,yt),bt};Object.defineProperty(_e,"__esModule",{value:!0}),_e.AudioNodeVAD=_e.MicVAD=_e.getDefaultRealTimeVADOptions=_e.ort=_e.DEFAULT_MODEL=void 0;const nt=tt(ortWeb_minExports),it=defaultModelFetcher$1,at=frameProcessor,ot=logging,st=messages,dt=models,ht=resampler;_e.DEFAULT_MODEL="legacy",_e.ort=nt;const ct="vad.worklet.bundle.min.js",ut="silero_vad_v5.onnx",ft="silero_vad_legacy.onnx",gt=yt=>({...yt==="v5"?at.defaultV5FrameProcessorOptions:at.defaultLegacyFrameProcessorOptions,onFrameProcessed:_t=>{},onVADMisfire:()=>{ot.log.debug("VAD misfire")},onSpeechStart:()=>{ot.log.debug("Detected speech start")},onSpeechEnd:()=>{ot.log.debug("Detected speech end")},baseAssetPath:"https://cdn.jsdelivr.net/npm/@ricky0123/vad-web@0.0.22/dist/",onnxWASMBasePath:"https://cdn.jsdelivr.net/npm/onnxruntime-web@1.14.0/dist/",stream:void 0,ortConfig:void 0,model:_e.DEFAULT_MODEL,workletOptions:{}});_e.getDefaultRealTimeVADOptions=gt;class mt{static async new(bt={}){const _t={...(0,_e.getDefaultRealTimeVADOptions)(bt.model??_e.DEFAULT_MODEL),...bt};(0,at.validateOptions)(_t);let xt;_t.stream===void 0?xt=await navigator.mediaDevices.getUserMedia({audio:{..._t.additionalAudioConstraints,channelCount:1,echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}}):xt=_t.stream;const St=new AudioContext,Tt=new MediaStreamAudioSourceNode(St,{mediaStream:xt}),wt=await vt.new(St,_t);return wt.receive(Tt),new mt(_t,St,xt,wt,Tt)}constructor(bt,_t,xt,St,Tt,wt=!1){this.options=bt,this.audioContext=_t,this.stream=xt,this.audioNodeVAD=St,this.sourceNode=Tt,this.listening=wt,this.pause=()=>{this.audioNodeVAD.pause(),this.listening=!1},this.start=()=>{this.audioNodeVAD.start(),this.listening=!0},this.destroy=()=>{this.listening&&this.pause(),this.options.stream===void 0&&this.stream.getTracks().forEach(Ct=>Ct.stop()),this.sourceNode.disconnect(),this.audioNodeVAD.destroy(),this.audioContext.close()}}}_e.MicVAD=mt;class vt{static async new(bt,_t={}){const xt={...(0,_e.getDefaultRealTimeVADOptions)(_t.model??_e.DEFAULT_MODEL),..._t};(0,at.validateOptions)(xt),_e.ort.env.wasm.wasmPaths=xt.onnxWASMBasePath,xt.ortConfig!==void 0&&xt.ortConfig(_e.ort);const St=xt.model==="v5"?ut:ft,Tt=xt.baseAssetPath+St,wt=xt.model==="v5"?dt.SileroV5.new:dt.SileroLegacy.new;let Ct;try{Ct=await wt(_e.ort,()=>(0,it.defaultModelFetcher)(Tt))}catch(Pt){throw console.error(`Encountered an error while loading model file ${Tt}`),Pt}const Et=new at.FrameProcessor(Ct.process,Ct.reset_state,{frameSamples:xt.frameSamples,positiveSpeechThreshold:xt.positiveSpeechThreshold,negativeSpeechThreshold:xt.negativeSpeechThreshold,redemptionFrames:xt.redemptionFrames,preSpeechPadFrames:xt.preSpeechPadFrames,minSpeechFrames:xt.minSpeechFrames,submitUserSpeechOnPause:xt.submitUserSpeechOnPause}),At=new vt(bt,xt,Et);return await At.setupAudioNode(),At}constructor(bt,_t,xt){this.ctx=bt,this.options=_t,this.bufferIndex=0,this.pause=()=>{const St=this.frameProcessor.pause();this.handleFrameProcessorEvent(St)},this.start=()=>{this.frameProcessor.resume()},this.receive=St=>{St.connect(this.audioNode)},this.processFrame=async St=>{const Tt=await this.frameProcessor.process(St);this.handleFrameProcessorEvent(Tt)},this.handleFrameProcessorEvent=St=>{switch(St.probs!==void 0&&this.options.onFrameProcessed(St.probs,St.frame),St.msg){case st.Message.SpeechStart:this.options.onSpeechStart();break;case st.Message.VADMisfire:this.options.onVADMisfire();break;case st.Message.SpeechEnd:this.options.onSpeechEnd(St.audio);break}},this.destroy=()=>{var St;this.audioNode instanceof AudioWorkletNode&&this.audioNode.port.postMessage({message:st.Message.SpeechStop}),this.audioNode.disconnect(),(St=this.gainNode)==null||St.disconnect()},this.frameProcessor=xt}async setupAudioNode(){if("audioWorklet"in this.ctx&&typeof AudioWorkletNode=="function")try{const St=this.options.baseAssetPath+ct;await this.ctx.audioWorklet.addModule(St);const Tt=this.options.workletOptions??{};Tt.processorOptions={...Tt.processorOptions??{},frameSamples:this.options.frameSamples},this.audioNode=new AudioWorkletNode(this.ctx,"vad-helper-worklet",Tt),this.audioNode.port.onmessage=async wt=>{var Ct;switch((Ct=wt.data)==null?void 0:Ct.message){case st.Message.AudioFrame:let Et=wt.data.data;Et instanceof ArrayBuffer||(Et=new ArrayBuffer(wt.data.data.byteLength),new Uint8Array(Et).set(new Uint8Array(wt.data.data)));const At=new Float32Array(Et);await this.processFrame(At);break}};return}catch(St){console.log("AudioWorklet setup failed, falling back to ScriptProcessor",St)}this.resampler=new ht.Resampler({nativeSampleRate:this.ctx.sampleRate,targetSampleRate:16e3,targetFrameSize:this.options.frameSamples??480});const _t=4096;this.audioNode=this.ctx.createScriptProcessor(_t,1,1),this.gainNode=this.ctx.createGain(),this.gainNode.gain.value=0;let xt=!1;this.audioNode.onaudioprocess=async St=>{if(!xt){xt=!0;try{const Tt=St.inputBuffer.getChannelData(0);if(St.outputBuffer.getChannelData(0).fill(0),this.resampler){const Ct=this.resampler.process(Tt);for(const Et of Ct)await this.processFrame(Et)}}catch(Tt){console.error("Error processing audio:",Tt)}finally{xt=!1}}},this.audioNode.connect(this.gainNode),this.gainNode.connect(this.ctx.destination)}}_e.AudioNodeVAD=vt})(realTimeVad);(function(_e){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ft,gt,mt,vt){vt===void 0&&(vt=mt);var yt=Object.getOwnPropertyDescriptor(gt,mt);(!yt||("get"in yt?!gt.__esModule:yt.writable||yt.configurable))&&(yt={enumerable:!0,get:function(){return gt[mt]}}),Object.defineProperty(ft,vt,yt)}:function(ft,gt,mt,vt){vt===void 0&&(vt=mt),ft[vt]=gt[mt]}),et=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ft,gt){Object.defineProperty(ft,"default",{enumerable:!0,value:gt})}:function(ft,gt){ft.default=gt}),tt=commonjsGlobal&&commonjsGlobal.__importStar||function(ft){if(ft&&ft.__esModule)return ft;var gt={};if(ft!=null)for(var mt in ft)mt!=="default"&&Object.prototype.hasOwnProperty.call(ft,mt)&&_(gt,ft,mt);return et(gt,ft),gt};Object.defineProperty(_e,"__esModule",{value:!0}),_e.NonRealTimeVAD=_e.Message=_e.FrameProcessor=_e.getDefaultRealTimeVADOptions=_e.MicVAD=_e.DEFAULT_MODEL=_e.AudioNodeVAD=_e.utils=_e.defaultNonRealTimeVADOptions=void 0;const nt=tt(ortWeb_minExports),it=assetPath,at=defaultModelFetcher$1,ot=frameProcessor;Object.defineProperty(_e,"FrameProcessor",{enumerable:!0,get:function(){return ot.FrameProcessor}});const st=messages;Object.defineProperty(_e,"Message",{enumerable:!0,get:function(){return st.Message}});const dt=nonRealTimeVad,ht=utils$3;_e.defaultNonRealTimeVADOptions={modelURL:it.baseAssetPath+"silero_vad_legacy.onnx",modelFetcher:at.defaultModelFetcher};class ct extends dt.PlatformAgnosticNonRealTimeVAD{static async new(gt={}){const{modelURL:mt,modelFetcher:vt}={..._e.defaultNonRealTimeVADOptions,...gt};return await this._new(()=>vt(mt),nt,gt)}}_e.NonRealTimeVAD=ct,_e.utils={audioFileToArray:ht.audioFileToArray,minFramesForTargetMS:ht.minFramesForTargetMS,arrayBufferToBase64:ht.arrayBufferToBase64,encodeWAV:ht.encodeWAV};var ut=realTimeVad;Object.defineProperty(_e,"AudioNodeVAD",{enumerable:!0,get:function(){return ut.AudioNodeVAD}}),Object.defineProperty(_e,"DEFAULT_MODEL",{enumerable:!0,get:function(){return ut.DEFAULT_MODEL}}),Object.defineProperty(_e,"MicVAD",{enumerable:!0,get:function(){return ut.MicVAD}}),Object.defineProperty(_e,"getDefaultRealTimeVADOptions",{enumerable:!0,get:function(){return ut.getDefaultRealTimeVADOptions}})})(dist$2);class TaskQueue{constructor(_=3e3){pn(this,"queue",[]);pn(this,"running",!1);pn(this,"taskInterval");pn(this,"pendingComplete",!1);pn(this,"activeTasks",new Set);this.taskInterval=_}addTask(_){this.queue.push(_),this.runNextTask()}clearQueue(){this.queue=[],this.activeTasks.clear(),this.running=!1}async runNextTask(){if(this.running||this.queue.length===0){this.queue.length===0&&this.activeTasks.size===0&&this.pendingComplete&&(this.pendingComplete=!1,await new Promise(et=>setTimeout(et,this.taskInterval)));return}this.running=!0;const _=this.queue.shift();if(_){const et=_();this.activeTasks.add(et);try{await et,await new Promise(tt=>setTimeout(tt,this.taskInterval))}catch(tt){console.error("Task Queue Error",tt)}finally{this.activeTasks.delete(et),this.running=!1,this.runNextTask()}}}hasTask(){return this.queue.length>0||this.activeTasks.size>0||this.running}waitForCompletion(){return this.pendingComplete=!0,new Promise(_=>{const et=()=>{this.hasTask()?setTimeout(et,100):_()};et()})}}const audioTaskQueue=new TaskQueue(20),ScreenCaptureContext=reactExports.createContext(void 0);function ScreenCaptureProvider({children:_e}){const[_,et]=reactExports.useState(null),[tt,nt]=reactExports.useState(!1),[it,at]=reactExports.useState(""),ot=async()=>{try{let dt;if(window.electron){const ct={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:await window.electron.ipcRenderer.invoke("get-screen-capture"),minWidth:1280,maxWidth:1280,minHeight:720,maxHeight:720}},audio:!1};dt=await navigator.mediaDevices.getUserMedia(ct)}else{const ht={video:!0,audio:!1};dt=await navigator.mediaDevices.getDisplayMedia(ht)}et(dt),nt(!0),at("")}catch(dt){at("Failed to start screen capture"),toaster.create({title:`Failed to start screen capture: ${dt}`,type:"error",duration:2e3}),console.error(dt)}},st=()=>{_&&(_.getTracks().forEach(dt=>dt.stop()),et(null),nt(!1))};return jsxRuntimeExports.jsx(ScreenCaptureContext.Provider,{value:{stream:_,isStreaming:tt,error:it,startCapture:ot,stopCapture:st},children:_e})}const useScreenCaptureContext=()=>{const _e=reactExports.useContext(ScreenCaptureContext);if(_e===void 0)throw new Error("useScreenCaptureContext must be used within a ScreenCaptureProvider");return _e};function useMediaCapture(){const{stream:_e}=useCamera(),{stream:_}=useScreenCaptureContext(),et=reactExports.useCallback(async(nt,it)=>{if(!nt)return console.warn(`No ${it} stream available`),null;const at=nt.getVideoTracks()[0];if(!at)return console.warn(`No video track in ${it} stream`),null;const ot=new ImageCapture(at);try{const st=await ot.grabFrame(),dt=document.createElement("canvas");dt.width=st.width,dt.height=st.height;const ht=dt.getContext("2d");return ht?(ht.drawImage(st,0,0),dt.toDataURL("image/jpeg",.8)):(console.error("Failed to get canvas context"),null)}catch(st){return console.error(`Error capturing ${it} frame:`,st),toaster.create({title:`Failed to capture ${it} frame: ${st}`,type:"error",duration:2e3}),null}},[]);return{captureAllMedia:reactExports.useCallback(async()=>{const nt=[];if(_e){const it=await et(_e,"camera");it&&nt.push({source:"camera",data:it,mime_type:"image/jpeg"})}if(_){const it=await et(_,"screen");it&&nt.push({source:"screen",data:it,mime_type:"image/jpeg"})}return console.log("images: ",nt),nt},[_e,_,et])}}function useSendAudio(){const{sendMessage:_e}=useWebSocket(),{captureAllMedia:_}=useMediaCapture();return{sendAudioPartition:reactExports.useCallback(async tt=>{for(let at=0;at<tt.length;at+=4096){const ot=Math.min(at+4096,tt.length),st=tt.slice(at,ot);_e({type:"mic-audio-data",audio:Array.from(st)})}const it=await _();_e({type:"mic-audio-end",images:it})},[_e,_])}}var AiStateEnum=(_e=>(_e.IDLE="idle",_e.THINKING_SPEAKING="thinking-speaking",_e.INTERRUPTED="interrupted",_e.LOADING="loading",_e.LISTENING="listening",_e.WAITING="waiting",_e))(AiStateEnum||{});const initialState="loading",AiStateContext=reactExports.createContext(null);function AiStateProvider({children:_e}){const[_,et]=reactExports.useState(initialState),[tt,nt]=reactExports.useState(!1),it=reactExports.useRef(null),at=reactExports.useCallback(ht=>{const ct=typeof ht=="function"?ht(_):ht;ct==="waiting"?_!=="thinking-speaking"&&(et(ct),it.current&&clearTimeout(it.current),it.current=setTimeout(()=>{et("idle"),it.current=null},2e3)):(et(ct),it.current&&(clearTimeout(it.current),it.current=null))},[_]),ot=reactExports.useMemo(()=>({isIdle:_==="idle",isThinkingSpeaking:_==="thinking-speaking",isInterrupted:_==="interrupted",isLoading:_==="loading",isListening:_==="listening",isWaiting:_==="waiting"}),[_]),st=reactExports.useCallback(()=>{at("idle")},[at]);reactExports.useEffect(()=>()=>{it.current&&clearTimeout(it.current)},[]);const dt=reactExports.useMemo(()=>({aiState:_,setAiState:at,backendSynthComplete:tt,setBackendSynthComplete:nt,...ot,resetState:st}),[_,at,tt,ot,st]);return jsxRuntimeExports.jsx(AiStateContext.Provider,{value:dt,children:_e})}function useAiState(){const _e=reactExports.useContext(AiStateContext);if(!_e)throw new Error("useAiState must be used within a AiStateProvider");return _e}const DEFAULT_VAD_SETTINGS={positiveSpeechThreshold:50,negativeSpeechThreshold:35,redemptionFrames:35},DEFAULT_VAD_STATE={micOn:!1,autoStopMic:!1,autoStartMicOn:!1,autoStartMicOnConvEnd:!1},VADContext=reactExports.createContext(null);function VADProvider({children:_e}){const _=reactExports.useRef(null),et=reactExports.useRef(0),[tt,nt]=useLocalStorage("micOn",DEFAULT_VAD_STATE.micOn),it=reactExports.useRef(!0),[at,ot]=useLocalStorage("autoStopMic",DEFAULT_VAD_STATE.autoStopMic),[st,dt]=useLocalStorage("vadSettings",DEFAULT_VAD_SETTINGS),[ht,ct]=useLocalStorage("autoStartMicOn",DEFAULT_VAD_STATE.autoStartMicOn),ut=reactExports.useRef(!1),[ft,gt]=useLocalStorage("autoStartMicOnConvEnd",DEFAULT_VAD_STATE.autoStartMicOnConvEnd),mt=reactExports.useRef(!1),[,vt]=reactExports.useReducer(Jt=>Jt+1,0),{interrupt:yt}=useInterrupt(),{sendAudioPartition:bt}=useSendAudio(),{setSubtitleText:_t}=reactExports.useContext(SubtitleContext),{aiState:xt,setAiState:St}=reactExports.useContext(AiStateContext),Tt=reactExports.useRef(yt),wt=reactExports.useRef(bt),Ct=reactExports.useRef(xt),Et=reactExports.useRef(_t),At=reactExports.useRef(St),Pt=reactExports.useRef(!1);reactExports.useEffect(()=>{Ct.current=xt},[xt]),reactExports.useEffect(()=>{Tt.current=yt},[yt]),reactExports.useEffect(()=>{wt.current=bt},[bt]),reactExports.useEffect(()=>{Et.current=_t},[_t]),reactExports.useEffect(()=>{At.current=St},[St]),reactExports.useEffect(()=>{it.current=at},[]),reactExports.useEffect(()=>{ut.current=ht},[]),reactExports.useEffect(()=>{mt.current=ft},[]);const Rt=reactExports.useCallback(Jt=>{et.current=Jt,vt()},[]),It=reactExports.useCallback(()=>{console.log("Speech started"),Ct.current==="thinking-speaking"&&Tt.current(),Pt.current=!0,At.current("listening")},[]),Mt=reactExports.useCallback(Jt=>{Jt.isSpeech>et.current&&Rt(Jt.isSpeech)},[]),Ot=reactExports.useCallback(Jt=>{Pt.current&&(console.log("Speech ended"),audioTaskQueue.clearQueue(),it.current?Vt():console.log("Auto stop mic is on, keeping mic active"),Rt(0),wt.current(Jt),Pt.current=!1)},[]),$t=reactExports.useCallback(()=>{Pt.current&&(console.log("VAD misfire detected"),Rt(0),Pt.current=!1,(Ct.current==="interrupted"||Ct.current==="listening")&&At.current("idle"),Et.current("The LLM can't hear you."))},[]),Lt=reactExports.useCallback(Jt=>{dt(Jt),_.current&&(Vt(),setTimeout(()=>{Nt()},100))},[]),kt=async()=>{const Jt=await dist$2.MicVAD.new({model:"v5",preSpeechPadFrames:20,positiveSpeechThreshold:st.positiveSpeechThreshold/100,negativeSpeechThreshold:st.negativeSpeechThreshold/100,redemptionFrames:st.redemptionFrames,baseAssetPath:"/libs/",onnxWASMBasePath:"/libs/",onSpeechStart:It,onFrameProcessed:Mt,onSpeechEnd:Ot,onVADMisfire:$t});_.current=Jt,Jt.start()},Nt=reactExports.useCallback(async()=>{try{_.current?(console.log("Starting VAD"),_.current.start()):(console.log("Initializing VAD"),await kt()),nt(!0)}catch(Jt){console.error("Failed to start VAD:",Jt),toaster.create({title:`Failed to start VAD: ${Jt}`,type:"error",duration:2e3})}},[]),Vt=reactExports.useCallback(()=>{console.log("Stopping VAD"),_.current?(_.current.pause(),_.current.destroy(),_.current=null,console.log("VAD stopped and destroyed successfully"),Rt(0)):console.log("VAD instance not found"),nt(!1),Pt.current=!1},[]),zt=reactExports.useCallback(Jt=>{it.current=Jt,ot(Jt),vt()},[]),Xt=reactExports.useCallback(Jt=>{ut.current=Jt,ct(Jt),vt()},[]),Wt=reactExports.useCallback(Jt=>{mt.current=Jt,gt(Jt),vt()},[]),nr=reactExports.useMemo(()=>({autoStopMic:it.current,micOn:tt,setMicOn:nt,setAutoStopMic:zt,startMic:Nt,stopMic:Vt,previousTriggeredProbability:et.current,setPreviousTriggeredProbability:Rt,settings:st,updateSettings:Lt,autoStartMicOn:ut.current,setAutoStartMicOn:Xt,autoStartMicOnConvEnd:mt.current,setAutoStartMicOnConvEnd:Wt}),[tt,Nt,Vt,st,Lt]);return jsxRuntimeExports.jsx(VADContext.Provider,{value:nr,children:_e})}function useVAD(){const _e=reactExports.useContext(VADContext);if(!_e)throw new Error("useVAD must be used within a VADProvider");return _e}function useMicToggle(){const{startMic:_e,stopMic:_,micOn:et}=useVAD(),{aiState:tt,setAiState:nt}=useAiState();return{handleMicToggle:async()=>{et?(_(),tt==="listening"&&nt("idle")):await _e()},micOn:et}}function useSwitchCharacter(){const{sendMessage:_e}=useWebSocket(),{confName:_,getFilenameByName:et}=useConfig(),{interrupt:tt}=useInterrupt(),{stopMic:nt}=useVAD(),{setSubtitleText:it}=useSubtitle(),{setAiState:at}=useAiState(),{setModelInfo:ot}=useLive2DConfig();return{switchCharacter:reactExports.useCallback(dt=>{if(et(_)===dt){console.log("Skipping character switch - same configuration file");return}it("New Character Loading..."),tt(),nt(),at("loading"),ot(void 0),_e({type:"switch-config",file:dt}),console.log("Switch Character fileName: ",dt)},[_,et,_e,tt,nt,it,at])}}const createStoreImpl=_e=>{let _;const et=new Set,tt=(dt,ht)=>{const ct=typeof dt=="function"?dt(_):dt;if(!Object.is(ct,_)){const ut=_;_=ht??(typeof ct!="object"||ct===null)?ct:Object.assign({},_,ct),et.forEach(ft=>ft(_,ut))}},nt=()=>_,ot={setState:tt,getState:nt,getInitialState:()=>st,subscribe:dt=>(et.add(dt),()=>et.delete(dt))},st=_=_e(tt,nt,ot);return ot},createStore=_e=>createStoreImpl(_e),identity$1=_e=>_e;function useStore(_e,_=identity$1){const et=React.useSyncExternalStore(_e.subscribe,()=>_(_e.getState()),()=>_(_e.getInitialState()));return React.useDebugValue(et),et}const createImpl=_e=>{const _=createStore(_e),et=tt=>useStore(_,tt);return Object.assign(et,_),et},create$3=_e=>createImpl(_e),useForceIgnoreMouseStore=create$3(_e=>({forceIgnoreMouse:!1,setForceIgnoreMouse:_=>_e({forceIgnoreMouse:_})}));function useForceIgnoreMouse(){const{forceIgnoreMouse:_e,setForceIgnoreMouse:_}=useForceIgnoreMouseStore();return{forceIgnoreMouse:_e,setForceIgnoreMouse:_}}function useIpcHandlers({isPet:_e}){const{handleMicToggle:_}=useMicToggle(),{interrupt:et}=useInterrupt(),{modelInfo:tt,setModelInfo:nt}=useLive2DConfig(),{switchCharacter:it}=useSwitchCharacter(),{setForceIgnoreMouse:at}=useForceIgnoreMouse(),ot=reactExports.useCallback(()=>{_()},[_]),st=reactExports.useCallback(()=>{et()},[et]),dt=reactExports.useCallback(()=>{tt&&nt({...tt,scrollToResize:!tt.scrollToResize})},[tt,nt]),ht=reactExports.useCallback((ft,gt)=>{it(gt)},[it]),ct=reactExports.useCallback((ft,gt)=>{console.log("Force ignore mouse changed:",gt),at(gt)},[at]),ut=reactExports.useCallback(()=>{window.api.toggleForceIgnoreMouse()},[]);reactExports.useEffect(()=>{var ft;if((ft=window.electron)!=null&&ft.ipcRenderer&&_e)return window.electron.ipcRenderer.removeAllListeners("mic-toggle"),window.electron.ipcRenderer.removeAllListeners("interrupt"),window.electron.ipcRenderer.removeAllListeners("toggle-scroll-to-resize"),window.electron.ipcRenderer.removeAllListeners("switch-character"),window.electron.ipcRenderer.removeAllListeners("toggle-force-ignore-mouse"),window.electron.ipcRenderer.removeAllListeners("force-ignore-mouse-changed"),window.electron.ipcRenderer.on("mic-toggle",ot),window.electron.ipcRenderer.on("interrupt",st),window.electron.ipcRenderer.on("toggle-scroll-to-resize",dt),window.electron.ipcRenderer.on("switch-character",ht),window.electron.ipcRenderer.on("toggle-force-ignore-mouse",ut),window.electron.ipcRenderer.on("force-ignore-mouse-changed",ct),()=>{var gt,mt,vt,yt,bt,_t;(gt=window.electron)==null||gt.ipcRenderer.removeAllListeners("mic-toggle"),(mt=window.electron)==null||mt.ipcRenderer.removeAllListeners("interrupt"),(vt=window.electron)==null||vt.ipcRenderer.removeAllListeners("toggle-scroll-to-resize"),(yt=window.electron)==null||yt.ipcRenderer.removeAllListeners("switch-character"),(bt=window.electron)==null||bt.ipcRenderer.removeAllListeners("toggle-force-ignore-mouse"),(_t=window.electron)==null||_t.ipcRenderer.removeAllListeners("force-ignore-mouse-changed")}},[ot,st,dt,ht,ut,ct,_e])}var ENV=(_e=>(_e[_e.WEBGL_LEGACY=0]="WEBGL_LEGACY",_e[_e.WEBGL=1]="WEBGL",_e[_e.WEBGL2=2]="WEBGL2",_e))(ENV||{}),RENDERER_TYPE=(_e=>(_e[_e.UNKNOWN=0]="UNKNOWN",_e[_e.WEBGL=1]="WEBGL",_e[_e.CANVAS=2]="CANVAS",_e))(RENDERER_TYPE||{}),BUFFER_BITS=(_e=>(_e[_e.COLOR=16384]="COLOR",_e[_e.DEPTH=256]="DEPTH",_e[_e.STENCIL=1024]="STENCIL",_e))(BUFFER_BITS||{}),BLEND_MODES=(_e=>(_e[_e.NORMAL=0]="NORMAL",_e[_e.ADD=1]="ADD",_e[_e.MULTIPLY=2]="MULTIPLY",_e[_e.SCREEN=3]="SCREEN",_e[_e.OVERLAY=4]="OVERLAY",_e[_e.DARKEN=5]="DARKEN",_e[_e.LIGHTEN=6]="LIGHTEN",_e[_e.COLOR_DODGE=7]="COLOR_DODGE",_e[_e.COLOR_BURN=8]="COLOR_BURN",_e[_e.HARD_LIGHT=9]="HARD_LIGHT",_e[_e.SOFT_LIGHT=10]="SOFT_LIGHT",_e[_e.DIFFERENCE=11]="DIFFERENCE",_e[_e.EXCLUSION=12]="EXCLUSION",_e[_e.HUE=13]="HUE",_e[_e.SATURATION=14]="SATURATION",_e[_e.COLOR=15]="COLOR",_e[_e.LUMINOSITY=16]="LUMINOSITY",_e[_e.NORMAL_NPM=17]="NORMAL_NPM",_e[_e.ADD_NPM=18]="ADD_NPM",_e[_e.SCREEN_NPM=19]="SCREEN_NPM",_e[_e.NONE=20]="NONE",_e[_e.SRC_OVER=0]="SRC_OVER",_e[_e.SRC_IN=21]="SRC_IN",_e[_e.SRC_OUT=22]="SRC_OUT",_e[_e.SRC_ATOP=23]="SRC_ATOP",_e[_e.DST_OVER=24]="DST_OVER",_e[_e.DST_IN=25]="DST_IN",_e[_e.DST_OUT=26]="DST_OUT",_e[_e.DST_ATOP=27]="DST_ATOP",_e[_e.ERASE=26]="ERASE",_e[_e.SUBTRACT=28]="SUBTRACT",_e[_e.XOR=29]="XOR",_e))(BLEND_MODES||{}),DRAW_MODES=(_e=>(_e[_e.POINTS=0]="POINTS",_e[_e.LINES=1]="LINES",_e[_e.LINE_LOOP=2]="LINE_LOOP",_e[_e.LINE_STRIP=3]="LINE_STRIP",_e[_e.TRIANGLES=4]="TRIANGLES",_e[_e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",_e[_e.TRIANGLE_FAN=6]="TRIANGLE_FAN",_e))(DRAW_MODES||{}),FORMATS=(_e=>(_e[_e.RGBA=6408]="RGBA",_e[_e.RGB=6407]="RGB",_e[_e.RG=33319]="RG",_e[_e.RED=6403]="RED",_e[_e.RGBA_INTEGER=36249]="RGBA_INTEGER",_e[_e.RGB_INTEGER=36248]="RGB_INTEGER",_e[_e.RG_INTEGER=33320]="RG_INTEGER",_e[_e.RED_INTEGER=36244]="RED_INTEGER",_e[_e.ALPHA=6406]="ALPHA",_e[_e.LUMINANCE=6409]="LUMINANCE",_e[_e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",_e[_e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",_e[_e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",_e))(FORMATS||{}),TARGETS=(_e=>(_e[_e.TEXTURE_2D=3553]="TEXTURE_2D",_e[_e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",_e[_e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",_e[_e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",_e[_e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",_e[_e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",_e[_e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",_e[_e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",_e[_e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",_e))(TARGETS||{}),TYPES=(_e=>(_e[_e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",_e[_e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",_e[_e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",_e[_e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",_e[_e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",_e[_e.UNSIGNED_INT=5125]="UNSIGNED_INT",_e[_e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",_e[_e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",_e[_e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",_e[_e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",_e[_e.BYTE=5120]="BYTE",_e[_e.SHORT=5122]="SHORT",_e[_e.INT=5124]="INT",_e[_e.FLOAT=5126]="FLOAT",_e[_e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",_e[_e.HALF_FLOAT=36193]="HALF_FLOAT",_e))(TYPES||{}),SAMPLER_TYPES=(_e=>(_e[_e.FLOAT=0]="FLOAT",_e[_e.INT=1]="INT",_e[_e.UINT=2]="UINT",_e))(SAMPLER_TYPES||{}),SCALE_MODES=(_e=>(_e[_e.NEAREST=0]="NEAREST",_e[_e.LINEAR=1]="LINEAR",_e))(SCALE_MODES||{}),WRAP_MODES=(_e=>(_e[_e.CLAMP=33071]="CLAMP",_e[_e.REPEAT=10497]="REPEAT",_e[_e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",_e))(WRAP_MODES||{}),MIPMAP_MODES=(_e=>(_e[_e.OFF=0]="OFF",_e[_e.POW2=1]="POW2",_e[_e.ON=2]="ON",_e[_e.ON_MANUAL=3]="ON_MANUAL",_e))(MIPMAP_MODES||{}),ALPHA_MODES=(_e=>(_e[_e.NPM=0]="NPM",_e[_e.UNPACK=1]="UNPACK",_e[_e.PMA=2]="PMA",_e[_e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",_e[_e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",_e[_e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",_e))(ALPHA_MODES||{}),CLEAR_MODES=(_e=>(_e[_e.NO=0]="NO",_e[_e.YES=1]="YES",_e[_e.AUTO=2]="AUTO",_e[_e.BLEND=0]="BLEND",_e[_e.CLEAR=1]="CLEAR",_e[_e.BLIT=2]="BLIT",_e))(CLEAR_MODES||{}),GC_MODES=(_e=>(_e[_e.AUTO=0]="AUTO",_e[_e.MANUAL=1]="MANUAL",_e))(GC_MODES||{}),PRECISION=(_e=>(_e.LOW="lowp",_e.MEDIUM="mediump",_e.HIGH="highp",_e))(PRECISION||{}),MASK_TYPES=(_e=>(_e[_e.NONE=0]="NONE",_e[_e.SCISSOR=1]="SCISSOR",_e[_e.STENCIL=2]="STENCIL",_e[_e.SPRITE=3]="SPRITE",_e[_e.COLOR=4]="COLOR",_e))(MASK_TYPES||{}),MSAA_QUALITY=(_e=>(_e[_e.NONE=0]="NONE",_e[_e.LOW=2]="LOW",_e[_e.MEDIUM=4]="MEDIUM",_e[_e.HIGH=8]="HIGH",_e))(MSAA_QUALITY||{}),BUFFER_TYPE=(_e=>(_e[_e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",_e[_e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",_e[_e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",_e))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(_e,_)=>{const et=document.createElement("canvas");return et.width=_e,et.height=_,et},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(_e,_)=>fetch(_e,_),parseXML:_e=>new DOMParser().parseFromString(_e,"text/xml")},settings={ADAPTER:BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(_e){return typeof _e<"u"&&_e.platform==="MacIntel"&&typeof _e.maxTouchPoints=="number"&&_e.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(_e){return function(_){return _.test(_e)}}function isMobile$1(_e){var _={userAgent:"",platform:"",maxTouchPoints:0};!_e&&typeof navigator<"u"?_={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof _e=="string"?_.userAgent=_e:_e&&_e.userAgent&&(_={userAgent:_e.userAgent,platform:_e.platform,maxTouchPoints:_e.maxTouchPoints||0});var et=_.userAgent,tt=et.split("[FBAN");typeof tt[1]<"u"&&(et=tt[0]),tt=et.split("Twitter"),typeof tt[1]<"u"&&(et=tt[0]);var nt=createMatch(et),it={apple:{phone:nt(appleIphone)&&!nt(windowsPhone),ipod:nt(appleIpod),tablet:!nt(appleIphone)&&(nt(appleTablet)||isAppleTabletOnIos13(_))&&!nt(windowsPhone),universal:nt(appleUniversal),device:(nt(appleIphone)||nt(appleIpod)||nt(appleTablet)||nt(appleUniversal)||isAppleTabletOnIos13(_))&&!nt(windowsPhone)},amazon:{phone:nt(amazonPhone),tablet:!nt(amazonPhone)&&nt(amazonTablet),device:nt(amazonPhone)||nt(amazonTablet)},android:{phone:!nt(windowsPhone)&&nt(amazonPhone)||!nt(windowsPhone)&&nt(androidPhone),tablet:!nt(windowsPhone)&&!nt(amazonPhone)&&!nt(androidPhone)&&(nt(amazonTablet)||nt(androidTablet)),device:!nt(windowsPhone)&&(nt(amazonPhone)||nt(amazonTablet)||nt(androidPhone)||nt(androidTablet))||nt(/\bokhttp\b/i)},windows:{phone:nt(windowsPhone),tablet:nt(windowsTablet),device:nt(windowsPhone)||nt(windowsTablet)},other:{blackberry:nt(otherBlackBerry),blackberry10:nt(otherBlackBerry10),opera:nt(otherOpera),firefox:nt(otherFirefox),chrome:nt(otherChrome),device:nt(otherBlackBerry)||nt(otherBlackBerry10)||nt(otherOpera)||nt(otherFirefox)||nt(otherChrome)},any:!1,phone:!1,tablet:!1};return it.any=it.apple.device||it.android.device||it.windows.device||it.other.device,it.phone=it.apple.phone||it.android.phone||it.windows.phone,it.tablet=it.apple.tablet||it.android.tablet||it.windows.tablet,it}const isMobileCall=isMobile$1.default??isMobile$1,isMobile=isMobileCall(globalThis.navigator);settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var eventemitter3={exports:{}};(function(_e){var _=Object.prototype.hasOwnProperty,et="~";function tt(){}Object.create&&(tt.prototype=Object.create(null),new tt().__proto__||(et=!1));function nt(st,dt,ht){this.fn=st,this.context=dt,this.once=ht||!1}function it(st,dt,ht,ct,ut){if(typeof ht!="function")throw new TypeError("The listener must be a function");var ft=new nt(ht,ct||st,ut),gt=et?et+dt:dt;return st._events[gt]?st._events[gt].fn?st._events[gt]=[st._events[gt],ft]:st._events[gt].push(ft):(st._events[gt]=ft,st._eventsCount++),st}function at(st,dt){--st._eventsCount===0?st._events=new tt:delete st._events[dt]}function ot(){this._events=new tt,this._eventsCount=0}ot.prototype.eventNames=function(){var dt=[],ht,ct;if(this._eventsCount===0)return dt;for(ct in ht=this._events)_.call(ht,ct)&&dt.push(et?ct.slice(1):ct);return Object.getOwnPropertySymbols?dt.concat(Object.getOwnPropertySymbols(ht)):dt},ot.prototype.listeners=function(dt){var ht=et?et+dt:dt,ct=this._events[ht];if(!ct)return[];if(ct.fn)return[ct.fn];for(var ut=0,ft=ct.length,gt=new Array(ft);ut<ft;ut++)gt[ut]=ct[ut].fn;return gt},ot.prototype.listenerCount=function(dt){var ht=et?et+dt:dt,ct=this._events[ht];return ct?ct.fn?1:ct.length:0},ot.prototype.emit=function(dt,ht,ct,ut,ft,gt){var mt=et?et+dt:dt;if(!this._events[mt])return!1;var vt=this._events[mt],yt=arguments.length,bt,_t;if(vt.fn){switch(vt.once&&this.removeListener(dt,vt.fn,void 0,!0),yt){case 1:return vt.fn.call(vt.context),!0;case 2:return vt.fn.call(vt.context,ht),!0;case 3:return vt.fn.call(vt.context,ht,ct),!0;case 4:return vt.fn.call(vt.context,ht,ct,ut),!0;case 5:return vt.fn.call(vt.context,ht,ct,ut,ft),!0;case 6:return vt.fn.call(vt.context,ht,ct,ut,ft,gt),!0}for(_t=1,bt=new Array(yt-1);_t<yt;_t++)bt[_t-1]=arguments[_t];vt.fn.apply(vt.context,bt)}else{var xt=vt.length,St;for(_t=0;_t<xt;_t++)switch(vt[_t].once&&this.removeListener(dt,vt[_t].fn,void 0,!0),yt){case 1:vt[_t].fn.call(vt[_t].context);break;case 2:vt[_t].fn.call(vt[_t].context,ht);break;case 3:vt[_t].fn.call(vt[_t].context,ht,ct);break;case 4:vt[_t].fn.call(vt[_t].context,ht,ct,ut);break;default:if(!bt)for(St=1,bt=new Array(yt-1);St<yt;St++)bt[St-1]=arguments[St];vt[_t].fn.apply(vt[_t].context,bt)}}return!0},ot.prototype.on=function(dt,ht,ct){return it(this,dt,ht,ct,!1)},ot.prototype.once=function(dt,ht,ct){return it(this,dt,ht,ct,!0)},ot.prototype.removeListener=function(dt,ht,ct,ut){var ft=et?et+dt:dt;if(!this._events[ft])return this;if(!ht)return at(this,ft),this;var gt=this._events[ft];if(gt.fn)gt.fn===ht&&(!ut||gt.once)&&(!ct||gt.context===ct)&&at(this,ft);else{for(var mt=0,vt=[],yt=gt.length;mt<yt;mt++)(gt[mt].fn!==ht||ut&&!gt[mt].once||ct&&gt[mt].context!==ct)&&vt.push(gt[mt]);vt.length?this._events[ft]=vt.length===1?vt[0]:vt:at(this,ft)}return this},ot.prototype.removeAllListeners=function(dt){var ht;return dt?(ht=et?et+dt:dt,this._events[ht]&&at(this,ht)):(this._events=new tt,this._eventsCount=0),this},ot.prototype.off=ot.prototype.removeListener,ot.prototype.addListener=ot.prototype.on,ot.prefixed=et,ot.EventEmitter=ot,_e.exports=ot})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(_e,_,et){et=et||2;var tt=_&&_.length,nt=tt?_[0]*et:_e.length,it=linkedList(_e,0,nt,et,!0),at=[];if(!it||it.next===it.prev)return at;var ot,st,dt,ht,ct,ut,ft;if(tt&&(it=eliminateHoles(_e,_,it,et)),_e.length>80*et){ot=dt=_e[0],st=ht=_e[1];for(var gt=et;gt<nt;gt+=et)ct=_e[gt],ut=_e[gt+1],ct<ot&&(ot=ct),ut<st&&(st=ut),ct>dt&&(dt=ct),ut>ht&&(ht=ut);ft=Math.max(dt-ot,ht-st),ft=ft!==0?32767/ft:0}return earcutLinked(it,at,et,ot,st,ft,0),at}function linkedList(_e,_,et,tt,nt){var it,at;if(nt===signedArea(_e,_,et,tt)>0)for(it=_;it<et;it+=tt)at=insertNode(it,_e[it],_e[it+1],at);else for(it=et-tt;it>=_;it-=tt)at=insertNode(it,_e[it],_e[it+1],at);return at&&equals(at,at.next)&&(removeNode$1(at),at=at.next),at}function filterPoints(_e,_){if(!_e)return _e;_||(_=_e);var et=_e,tt;do if(tt=!1,!et.steiner&&(equals(et,et.next)||area(et.prev,et,et.next)===0)){if(removeNode$1(et),et=_=et.prev,et===et.next)break;tt=!0}else et=et.next;while(tt||et!==_);return _}function earcutLinked(_e,_,et,tt,nt,it,at){if(_e){!at&&it&&indexCurve(_e,tt,nt,it);for(var ot=_e,st,dt;_e.prev!==_e.next;){if(st=_e.prev,dt=_e.next,it?isEarHashed(_e,tt,nt,it):isEar(_e)){_.push(st.i/et|0),_.push(_e.i/et|0),_.push(dt.i/et|0),removeNode$1(_e),_e=dt.next,ot=dt.next;continue}if(_e=dt,_e===ot){at?at===1?(_e=cureLocalIntersections(filterPoints(_e),_,et),earcutLinked(_e,_,et,tt,nt,it,2)):at===2&&splitEarcut(_e,_,et,tt,nt,it):earcutLinked(filterPoints(_e),_,et,tt,nt,it,1);break}}}}function isEar(_e){var _=_e.prev,et=_e,tt=_e.next;if(area(_,et,tt)>=0)return!1;for(var nt=_.x,it=et.x,at=tt.x,ot=_.y,st=et.y,dt=tt.y,ht=nt<it?nt<at?nt:at:it<at?it:at,ct=ot<st?ot<dt?ot:dt:st<dt?st:dt,ut=nt>it?nt>at?nt:at:it>at?it:at,ft=ot>st?ot>dt?ot:dt:st>dt?st:dt,gt=tt.next;gt!==_;){if(gt.x>=ht&&gt.x<=ut&&gt.y>=ct&&gt.y<=ft&&pointInTriangle(nt,ot,it,st,at,dt,gt.x,gt.y)&&area(gt.prev,gt,gt.next)>=0)return!1;gt=gt.next}return!0}function isEarHashed(_e,_,et,tt){var nt=_e.prev,it=_e,at=_e.next;if(area(nt,it,at)>=0)return!1;for(var ot=nt.x,st=it.x,dt=at.x,ht=nt.y,ct=it.y,ut=at.y,ft=ot<st?ot<dt?ot:dt:st<dt?st:dt,gt=ht<ct?ht<ut?ht:ut:ct<ut?ct:ut,mt=ot>st?ot>dt?ot:dt:st>dt?st:dt,vt=ht>ct?ht>ut?ht:ut:ct>ut?ct:ut,yt=zOrder(ft,gt,_,et,tt),bt=zOrder(mt,vt,_,et,tt),_t=_e.prevZ,xt=_e.nextZ;_t&&_t.z>=yt&&xt&&xt.z<=bt;){if(_t.x>=ft&&_t.x<=mt&&_t.y>=gt&&_t.y<=vt&&_t!==nt&&_t!==at&&pointInTriangle(ot,ht,st,ct,dt,ut,_t.x,_t.y)&&area(_t.prev,_t,_t.next)>=0||(_t=_t.prevZ,xt.x>=ft&&xt.x<=mt&&xt.y>=gt&&xt.y<=vt&&xt!==nt&&xt!==at&&pointInTriangle(ot,ht,st,ct,dt,ut,xt.x,xt.y)&&area(xt.prev,xt,xt.next)>=0))return!1;xt=xt.nextZ}for(;_t&&_t.z>=yt;){if(_t.x>=ft&&_t.x<=mt&&_t.y>=gt&&_t.y<=vt&&_t!==nt&&_t!==at&&pointInTriangle(ot,ht,st,ct,dt,ut,_t.x,_t.y)&&area(_t.prev,_t,_t.next)>=0)return!1;_t=_t.prevZ}for(;xt&&xt.z<=bt;){if(xt.x>=ft&&xt.x<=mt&&xt.y>=gt&&xt.y<=vt&&xt!==nt&&xt!==at&&pointInTriangle(ot,ht,st,ct,dt,ut,xt.x,xt.y)&&area(xt.prev,xt,xt.next)>=0)return!1;xt=xt.nextZ}return!0}function cureLocalIntersections(_e,_,et){var tt=_e;do{var nt=tt.prev,it=tt.next.next;!equals(nt,it)&&intersects(nt,tt,tt.next,it)&&locallyInside(nt,it)&&locallyInside(it,nt)&&(_.push(nt.i/et|0),_.push(tt.i/et|0),_.push(it.i/et|0),removeNode$1(tt),removeNode$1(tt.next),tt=_e=it),tt=tt.next}while(tt!==_e);return filterPoints(tt)}function splitEarcut(_e,_,et,tt,nt,it){var at=_e;do{for(var ot=at.next.next;ot!==at.prev;){if(at.i!==ot.i&&isValidDiagonal(at,ot)){var st=splitPolygon(at,ot);at=filterPoints(at,at.next),st=filterPoints(st,st.next),earcutLinked(at,_,et,tt,nt,it,0),earcutLinked(st,_,et,tt,nt,it,0);return}ot=ot.next}at=at.next}while(at!==_e)}function eliminateHoles(_e,_,et,tt){var nt=[],it,at,ot,st,dt;for(it=0,at=_.length;it<at;it++)ot=_[it]*tt,st=it<at-1?_[it+1]*tt:_e.length,dt=linkedList(_e,ot,st,tt,!1),dt===dt.next&&(dt.steiner=!0),nt.push(getLeftmost(dt));for(nt.sort(compareX),it=0;it<nt.length;it++)et=eliminateHole(nt[it],et);return et}function compareX(_e,_){return _e.x-_.x}function eliminateHole(_e,_){var et=findHoleBridge(_e,_);if(!et)return _;var tt=splitPolygon(et,_e);return filterPoints(tt,tt.next),filterPoints(et,et.next)}function findHoleBridge(_e,_){var et=_,tt=_e.x,nt=_e.y,it=-1/0,at;do{if(nt<=et.y&&nt>=et.next.y&&et.next.y!==et.y){var ot=et.x+(nt-et.y)*(et.next.x-et.x)/(et.next.y-et.y);if(ot<=tt&&ot>it&&(it=ot,at=et.x<et.next.x?et:et.next,ot===tt))return at}et=et.next}while(et!==_);if(!at)return null;var st=at,dt=at.x,ht=at.y,ct=1/0,ut;et=at;do tt>=et.x&&et.x>=dt&&tt!==et.x&&pointInTriangle(nt<ht?tt:it,nt,dt,ht,nt<ht?it:tt,nt,et.x,et.y)&&(ut=Math.abs(nt-et.y)/(tt-et.x),locallyInside(et,_e)&&(ut<ct||ut===ct&&(et.x>at.x||et.x===at.x&&sectorContainsSector(at,et)))&&(at=et,ct=ut)),et=et.next;while(et!==st);return at}function sectorContainsSector(_e,_){return area(_e.prev,_e,_.prev)<0&&area(_.next,_e,_e.next)<0}function indexCurve(_e,_,et,tt){var nt=_e;do nt.z===0&&(nt.z=zOrder(nt.x,nt.y,_,et,tt)),nt.prevZ=nt.prev,nt.nextZ=nt.next,nt=nt.next;while(nt!==_e);nt.prevZ.nextZ=null,nt.prevZ=null,sortLinked(nt)}function sortLinked(_e){var _,et,tt,nt,it,at,ot,st,dt=1;do{for(et=_e,_e=null,it=null,at=0;et;){for(at++,tt=et,ot=0,_=0;_<dt&&(ot++,tt=tt.nextZ,!!tt);_++);for(st=dt;ot>0||st>0&&tt;)ot!==0&&(st===0||!tt||et.z<=tt.z)?(nt=et,et=et.nextZ,ot--):(nt=tt,tt=tt.nextZ,st--),it?it.nextZ=nt:_e=nt,nt.prevZ=it,it=nt;et=tt}it.nextZ=null,dt*=2}while(at>1);return _e}function zOrder(_e,_,et,tt,nt){return _e=(_e-et)*nt|0,_=(_-tt)*nt|0,_e=(_e|_e<<8)&16711935,_e=(_e|_e<<4)&252645135,_e=(_e|_e<<2)&858993459,_e=(_e|_e<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,_e|_<<1}function getLeftmost(_e){var _=_e,et=_e;do(_.x<et.x||_.x===et.x&&_.y<et.y)&&(et=_),_=_.next;while(_!==_e);return et}function pointInTriangle(_e,_,et,tt,nt,it,at,ot){return(nt-at)*(_-ot)>=(_e-at)*(it-ot)&&(_e-at)*(tt-ot)>=(et-at)*(_-ot)&&(et-at)*(it-ot)>=(nt-at)*(tt-ot)}function isValidDiagonal(_e,_){return _e.next.i!==_.i&&_e.prev.i!==_.i&&!intersectsPolygon(_e,_)&&(locallyInside(_e,_)&&locallyInside(_,_e)&&middleInside(_e,_)&&(area(_e.prev,_e,_.prev)||area(_e,_.prev,_))||equals(_e,_)&&area(_e.prev,_e,_e.next)>0&&area(_.prev,_,_.next)>0)}function area(_e,_,et){return(_.y-_e.y)*(et.x-_.x)-(_.x-_e.x)*(et.y-_.y)}function equals(_e,_){return _e.x===_.x&&_e.y===_.y}function intersects(_e,_,et,tt){var nt=sign$3(area(_e,_,et)),it=sign$3(area(_e,_,tt)),at=sign$3(area(et,tt,_e)),ot=sign$3(area(et,tt,_));return!!(nt!==it&&at!==ot||nt===0&&onSegment(_e,et,_)||it===0&&onSegment(_e,tt,_)||at===0&&onSegment(et,_e,tt)||ot===0&&onSegment(et,_,tt))}function onSegment(_e,_,et){return _.x<=Math.max(_e.x,et.x)&&_.x>=Math.min(_e.x,et.x)&&_.y<=Math.max(_e.y,et.y)&&_.y>=Math.min(_e.y,et.y)}function sign$3(_e){return _e>0?1:_e<0?-1:0}function intersectsPolygon(_e,_){var et=_e;do{if(et.i!==_e.i&&et.next.i!==_e.i&&et.i!==_.i&&et.next.i!==_.i&&intersects(et,et.next,_e,_))return!0;et=et.next}while(et!==_e);return!1}function locallyInside(_e,_){return area(_e.prev,_e,_e.next)<0?area(_e,_,_e.next)>=0&&area(_e,_e.prev,_)>=0:area(_e,_,_e.prev)<0||area(_e,_e.next,_)<0}function middleInside(_e,_){var et=_e,tt=!1,nt=(_e.x+_.x)/2,it=(_e.y+_.y)/2;do et.y>it!=et.next.y>it&&et.next.y!==et.y&&nt<(et.next.x-et.x)*(it-et.y)/(et.next.y-et.y)+et.x&&(tt=!tt),et=et.next;while(et!==_e);return tt}function splitPolygon(_e,_){var et=new Node$1(_e.i,_e.x,_e.y),tt=new Node$1(_.i,_.x,_.y),nt=_e.next,it=_.prev;return _e.next=_,_.prev=_e,et.next=nt,nt.prev=et,tt.next=et,et.prev=tt,it.next=tt,tt.prev=it,tt}function insertNode(_e,_,et,tt){var nt=new Node$1(_e,_,et);return tt?(nt.next=tt.next,nt.prev=tt,tt.next.prev=nt,tt.next=nt):(nt.prev=nt,nt.next=nt),nt}function removeNode$1(_e){_e.next.prev=_e.prev,_e.prev.next=_e.next,_e.prevZ&&(_e.prevZ.nextZ=_e.nextZ),_e.nextZ&&(_e.nextZ.prevZ=_e.prevZ)}function Node$1(_e,_,et){this.i=_e,this.x=_,this.y=et,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(_e,_,et,tt){var nt=_&&_.length,it=nt?_[0]*et:_e.length,at=Math.abs(signedArea(_e,0,it,et));if(nt)for(var ot=0,st=_.length;ot<st;ot++){var dt=_[ot]*et,ht=ot<st-1?_[ot+1]*et:_e.length;at-=Math.abs(signedArea(_e,dt,ht,et))}var ct=0;for(ot=0;ot<tt.length;ot+=3){var ut=tt[ot]*et,ft=tt[ot+1]*et,gt=tt[ot+2]*et;ct+=Math.abs((_e[ut]-_e[gt])*(_e[ft+1]-_e[ut+1])-(_e[ut]-_e[ft])*(_e[gt+1]-_e[ut+1]))}return at===0&&ct===0?0:Math.abs((ct-at)/at)};function signedArea(_e,_,et,tt){for(var nt=0,it=_,at=et-tt;it<et;it+=tt)nt+=(_e[at]-_e[it])*(_e[it+1]+_e[at+1]),at=it;return nt}earcut.flatten=function(_e){for(var _=_e[0][0].length,et={vertices:[],holes:[],dimensions:_},tt=0,nt=0;nt<_e.length;nt++){for(var it=0;it<_e[nt].length;it++)for(var at=0;at<_;at++)et.vertices.push(_e[nt][it][at]);nt>0&&(tt+=_e[nt-1].length,et.holes.push(tt))}return et};var earcutExports=earcut$2.exports;const earcut$1=getDefaultExportFromCjs(earcutExports);var punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */punycode$1.exports;(function(_e,_){(function(et){var tt=_&&!_.nodeType&&_,nt=!_e.nodeType&&_e,it=typeof commonjsGlobal=="object"&&commonjsGlobal;(it.global===it||it.window===it||it.self===it)&&(et=it);var at,ot=2147483647,st=36,dt=1,ht=26,ct=38,ut=700,ft=72,gt=128,mt="-",vt=/^xn--/,yt=/[^\x20-\x7E]/,bt=/[\x2E\u3002\uFF0E\uFF61]/g,_t={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},xt=st-dt,St=Math.floor,Tt=String.fromCharCode,wt;function Ct(Vt){throw new RangeError(_t[Vt])}function Et(Vt,zt){for(var Xt=Vt.length,Wt=[];Xt--;)Wt[Xt]=zt(Vt[Xt]);return Wt}function At(Vt,zt){var Xt=Vt.split("@"),Wt="";Xt.length>1&&(Wt=Xt[0]+"@",Vt=Xt[1]),Vt=Vt.replace(bt,".");var nr=Vt.split("."),Jt=Et(nr,zt).join(".");return Wt+Jt}function Pt(Vt){for(var zt=[],Xt=0,Wt=Vt.length,nr,Jt;Xt<Wt;)nr=Vt.charCodeAt(Xt++),nr>=55296&&nr<=56319&&Xt<Wt?(Jt=Vt.charCodeAt(Xt++),(Jt&64512)==56320?zt.push(((nr&1023)<<10)+(Jt&1023)+65536):(zt.push(nr),Xt--)):zt.push(nr);return zt}function Rt(Vt){return Et(Vt,function(zt){var Xt="";return zt>65535&&(zt-=65536,Xt+=Tt(zt>>>10&1023|55296),zt=56320|zt&1023),Xt+=Tt(zt),Xt}).join("")}function It(Vt){return Vt-48<10?Vt-22:Vt-65<26?Vt-65:Vt-97<26?Vt-97:st}function Mt(Vt,zt){return Vt+22+75*(Vt<26)-((zt!=0)<<5)}function Ot(Vt,zt,Xt){var Wt=0;for(Vt=Xt?St(Vt/ut):Vt>>1,Vt+=St(Vt/zt);Vt>xt*ht>>1;Wt+=st)Vt=St(Vt/xt);return St(Wt+(xt+1)*Vt/(Vt+ct))}function $t(Vt){var zt=[],Xt=Vt.length,Wt,nr=0,Jt=gt,lr=ft,pr,Zt,Kt,ur,ir,hr,fr,mr,br;for(pr=Vt.lastIndexOf(mt),pr<0&&(pr=0),Zt=0;Zt<pr;++Zt)Vt.charCodeAt(Zt)>=128&&Ct("not-basic"),zt.push(Vt.charCodeAt(Zt));for(Kt=pr>0?pr+1:0;Kt<Xt;){for(ur=nr,ir=1,hr=st;Kt>=Xt&&Ct("invalid-input"),fr=It(Vt.charCodeAt(Kt++)),(fr>=st||fr>St((ot-nr)/ir))&&Ct("overflow"),nr+=fr*ir,mr=hr<=lr?dt:hr>=lr+ht?ht:hr-lr,!(fr<mr);hr+=st)br=st-mr,ir>St(ot/br)&&Ct("overflow"),ir*=br;Wt=zt.length+1,lr=Ot(nr-ur,Wt,ur==0),St(nr/Wt)>ot-Jt&&Ct("overflow"),Jt+=St(nr/Wt),nr%=Wt,zt.splice(nr++,0,Jt)}return Rt(zt)}function Lt(Vt){var zt,Xt,Wt,nr,Jt,lr,pr,Zt,Kt,ur,ir,hr=[],fr,mr,br,Er;for(Vt=Pt(Vt),fr=Vt.length,zt=gt,Xt=0,Jt=ft,lr=0;lr<fr;++lr)ir=Vt[lr],ir<128&&hr.push(Tt(ir));for(Wt=nr=hr.length,nr&&hr.push(mt);Wt<fr;){for(pr=ot,lr=0;lr<fr;++lr)ir=Vt[lr],ir>=zt&&ir<pr&&(pr=ir);for(mr=Wt+1,pr-zt>St((ot-Xt)/mr)&&Ct("overflow"),Xt+=(pr-zt)*mr,zt=pr,lr=0;lr<fr;++lr)if(ir=Vt[lr],ir<zt&&++Xt>ot&&Ct("overflow"),ir==zt){for(Zt=Xt,Kt=st;ur=Kt<=Jt?dt:Kt>=Jt+ht?ht:Kt-Jt,!(Zt<ur);Kt+=st)Er=Zt-ur,br=st-ur,hr.push(Tt(Mt(ur+Er%br,0))),Zt=St(Er/br);hr.push(Tt(Mt(Zt,0))),Jt=Ot(Xt,mr,Wt==nr),Xt=0,++Wt}++Xt,++zt}return hr.join("")}function kt(Vt){return At(Vt,function(zt){return vt.test(zt)?$t(zt.slice(4).toLowerCase()):zt})}function Nt(Vt){return At(Vt,function(zt){return yt.test(zt)?"xn--"+Lt(zt):zt})}if(at={version:"1.4.1",ucs2:{decode:Pt,encode:Rt},decode:$t,encode:Lt,toASCII:Nt,toUnicode:kt},tt&&nt)if(_e.exports==tt)nt.exports=at;else for(wt in at)at.hasOwnProperty(wt)&&(tt[wt]=at[wt]);else et.punycode=at})(commonjsGlobal)})(punycode$1,punycode$1.exports);var punycodeExports=punycode$1.exports,type=TypeError;const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasMap$1=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap$1?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize$1=hasMap$1&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap$1&&Map.prototype.forEach,hasSet$1=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet$1?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet$1&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet$1&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace$1=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat$1=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||!0)?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(_e){return _e.__proto__}:null);function addNumericSeparator(_e,_){if(_e===1/0||_e===-1/0||_e!==_e||_e&&_e>-1e3&&_e<1e3||$test.call(/e/,_))return _;var et=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof _e=="number"){var tt=_e<0?-$floor(-_e):$floor(_e);if(tt!==_e){var nt=String(tt),it=$slice.call(_,nt.length+1);return $replace$1.call(nt,et,"$&_")+"."+$replace$1.call($replace$1.call(it,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace$1.call(_,et,"$&_")}var utilInspect=require$$0,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,quotes={__proto__:null,double:'"',single:"'"},quoteREs={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},objectInspect=function _e(_,et,tt,nt){var it=et||{};if(has$5(it,"quoteStyle")&&!has$5(quotes,it.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$5(it,"maxStringLength")&&(typeof it.maxStringLength=="number"?it.maxStringLength<0&&it.maxStringLength!==1/0:it.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var at=has$5(it,"customInspect")?it.customInspect:!0;if(typeof at!="boolean"&&at!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$5(it,"indent")&&it.indent!==null&&it.indent!=="	"&&!(parseInt(it.indent,10)===it.indent&&it.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$5(it,"numericSeparator")&&typeof it.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ot=it.numericSeparator;if(typeof _>"u")return"undefined";if(_===null)return"null";if(typeof _=="boolean")return _?"true":"false";if(typeof _=="string")return inspectString(_,it);if(typeof _=="number"){if(_===0)return 1/0/_>0?"0":"-0";var st=String(_);return ot?addNumericSeparator(_,st):st}if(typeof _=="bigint"){var dt=String(_)+"n";return ot?addNumericSeparator(_,dt):dt}var ht=typeof it.depth>"u"?5:it.depth;if(typeof tt>"u"&&(tt=0),tt>=ht&&ht>0&&typeof _=="object")return isArray$5(_)?"[Array]":"[Object]";var ct=getIndent(it,tt);if(typeof nt>"u")nt=[];else if(indexOf$1(nt,_)>=0)return"[Circular]";function ut(It,Mt,Ot){if(Mt&&(nt=$arrSlice.call(nt),nt.push(Mt)),Ot){var $t={depth:it.depth};return has$5(it,"quoteStyle")&&($t.quoteStyle=it.quoteStyle),_e(It,$t,tt+1,nt)}return _e(It,it,tt+1,nt)}if(typeof _=="function"&&!isRegExp$2(_)){var ft=nameOf(_),gt=arrObjKeys(_,ut);return"[Function"+(ft?": "+ft:" (anonymous)")+"]"+(gt.length>0?" { "+$join.call(gt,", ")+" }":"")}if(isSymbol(_)){var mt=hasShammedSymbols?$replace$1.call(String(_),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(_);return typeof _=="object"&&!hasShammedSymbols?markBoxed(mt):mt}if(isElement(_)){for(var vt="<"+$toLowerCase.call(String(_.nodeName)),yt=_.attributes||[],bt=0;bt<yt.length;bt++)vt+=" "+yt[bt].name+"="+wrapQuotes(quote(yt[bt].value),"double",it);return vt+=">",_.childNodes&&_.childNodes.length&&(vt+="..."),vt+="</"+$toLowerCase.call(String(_.nodeName))+">",vt}if(isArray$5(_)){if(_.length===0)return"[]";var _t=arrObjKeys(_,ut);return ct&&!singleLineValues(_t)?"["+indentedJoin(_t,ct)+"]":"[ "+$join.call(_t,", ")+" ]"}if(isError(_)){var xt=arrObjKeys(_,ut);return!("cause"in Error.prototype)&&"cause"in _&&!isEnumerable.call(_,"cause")?"{ ["+String(_)+"] "+$join.call($concat$1.call("[cause]: "+ut(_.cause),xt),", ")+" }":xt.length===0?"["+String(_)+"]":"{ ["+String(_)+"] "+$join.call(xt,", ")+" }"}if(typeof _=="object"&&at){if(inspectSymbol&&typeof _[inspectSymbol]=="function"&&utilInspect)return utilInspect(_,{depth:ht-tt});if(at!=="symbol"&&typeof _.inspect=="function")return _.inspect()}if(isMap(_)){var St=[];return mapForEach&&mapForEach.call(_,function(It,Mt){St.push(ut(Mt,_,!0)+" => "+ut(It,_))}),collectionOf("Map",mapSize$1.call(_),St,ct)}if(isSet(_)){var Tt=[];return setForEach&&setForEach.call(_,function(It){Tt.push(ut(It,_))}),collectionOf("Set",setSize.call(_),Tt,ct)}if(isWeakMap(_))return weakCollectionOf("WeakMap");if(isWeakSet(_))return weakCollectionOf("WeakSet");if(isWeakRef(_))return weakCollectionOf("WeakRef");if(isNumber$1(_))return markBoxed(ut(Number(_)));if(isBigInt(_))return markBoxed(ut(bigIntValueOf.call(_)));if(isBoolean(_))return markBoxed(booleanValueOf.call(_));if(isString$2(_))return markBoxed(ut(String(_)));if(typeof window<"u"&&_===window)return"{ [object Window] }";if(typeof globalThis<"u"&&_===globalThis||typeof commonjsGlobal<"u"&&_===commonjsGlobal)return"{ [object globalThis] }";if(!isDate(_)&&!isRegExp$2(_)){var wt=arrObjKeys(_,ut),Ct=gPO?gPO(_)===Object.prototype:_ instanceof Object||_.constructor===Object,Et=_ instanceof Object?"":"null prototype",At=!Ct&&toStringTag&&Object(_)===_&&toStringTag in _?$slice.call(toStr$1(_),8,-1):Et?"Object":"",Pt=Ct||typeof _.constructor!="function"?"":_.constructor.name?_.constructor.name+" ":"",Rt=Pt+(At||Et?"["+$join.call($concat$1.call([],At||[],Et||[]),": ")+"] ":"");return wt.length===0?Rt+"{}":ct?Rt+"{"+indentedJoin(wt,ct)+"}":Rt+"{ "+$join.call(wt,", ")+" }"}return String(_)};function wrapQuotes(_e,_,et){var tt=et.quoteStyle||_,nt=quotes[tt];return nt+_e+nt}function quote(_e){return $replace$1.call(String(_e),/"/g,"&quot;")}function isArray$5(_e){return toStr$1(_e)==="[object Array]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isDate(_e){return toStr$1(_e)==="[object Date]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isRegExp$2(_e){return toStr$1(_e)==="[object RegExp]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isError(_e){return toStr$1(_e)==="[object Error]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isString$2(_e){return toStr$1(_e)==="[object String]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isNumber$1(_e){return toStr$1(_e)==="[object Number]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isBoolean(_e){return toStr$1(_e)==="[object Boolean]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isSymbol(_e){if(hasShammedSymbols)return _e&&typeof _e=="object"&&_e instanceof Symbol;if(typeof _e=="symbol")return!0;if(!_e||typeof _e!="object"||!symToString)return!1;try{return symToString.call(_e),!0}catch{}return!1}function isBigInt(_e){if(!_e||typeof _e!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(_e),!0}catch{}return!1}var hasOwn$2=Object.prototype.hasOwnProperty||function(_e){return _e in this};function has$5(_e,_){return hasOwn$2.call(_e,_)}function toStr$1(_e){return objectToString.call(_e)}function nameOf(_e){if(_e.name)return _e.name;var _=$match.call(functionToString.call(_e),/^function\s*([\w$]+)/);return _?_[1]:null}function indexOf$1(_e,_){if(_e.indexOf)return _e.indexOf(_);for(var et=0,tt=_e.length;et<tt;et++)if(_e[et]===_)return et;return-1}function isMap(_e){if(!mapSize$1||!_e||typeof _e!="object")return!1;try{mapSize$1.call(_e);try{setSize.call(_e)}catch{return!0}return _e instanceof Map}catch{}return!1}function isWeakMap(_e){if(!weakMapHas||!_e||typeof _e!="object")return!1;try{weakMapHas.call(_e,weakMapHas);try{weakSetHas.call(_e,weakSetHas)}catch{return!0}return _e instanceof WeakMap}catch{}return!1}function isWeakRef(_e){if(!weakRefDeref||!_e||typeof _e!="object")return!1;try{return weakRefDeref.call(_e),!0}catch{}return!1}function isSet(_e){if(!setSize||!_e||typeof _e!="object")return!1;try{setSize.call(_e);try{mapSize$1.call(_e)}catch{return!0}return _e instanceof Set}catch{}return!1}function isWeakSet(_e){if(!weakSetHas||!_e||typeof _e!="object")return!1;try{weakSetHas.call(_e,weakSetHas);try{weakMapHas.call(_e,weakMapHas)}catch{return!0}return _e instanceof WeakSet}catch{}return!1}function isElement(_e){return!_e||typeof _e!="object"?!1:typeof HTMLElement<"u"&&_e instanceof HTMLElement?!0:typeof _e.nodeName=="string"&&typeof _e.getAttribute=="function"}function inspectString(_e,_){if(_e.length>_.maxStringLength){var et=_e.length-_.maxStringLength,tt="... "+et+" more character"+(et>1?"s":"");return inspectString($slice.call(_e,0,_.maxStringLength),_)+tt}var nt=quoteREs[_.quoteStyle||"single"];nt.lastIndex=0;var it=$replace$1.call($replace$1.call(_e,nt,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(it,"single",_)}function lowbyte(_e){var _=_e.charCodeAt(0),et={8:"b",9:"t",10:"n",12:"f",13:"r"}[_];return et?"\\"+et:"\\x"+(_<16?"0":"")+$toUpperCase.call(_.toString(16))}function markBoxed(_e){return"Object("+_e+")"}function weakCollectionOf(_e){return _e+" { ? }"}function collectionOf(_e,_,et,tt){var nt=tt?indentedJoin(et,tt):$join.call(et,", ");return _e+" ("+_+") {"+nt+"}"}function singleLineValues(_e){for(var _=0;_<_e.length;_++)if(indexOf$1(_e[_],`
`)>=0)return!1;return!0}function getIndent(_e,_){var et;if(_e.indent==="	")et="	";else if(typeof _e.indent=="number"&&_e.indent>0)et=$join.call(Array(_e.indent+1)," ");else return null;return{base:et,prev:$join.call(Array(_+1),et)}}function indentedJoin(_e,_){if(_e.length===0)return"";var et=`
`+_.prev+_.base;return et+$join.call(_e,","+et)+`
`+_.prev}function arrObjKeys(_e,_){var et=isArray$5(_e),tt=[];if(et){tt.length=_e.length;for(var nt=0;nt<_e.length;nt++)tt[nt]=has$5(_e,nt)?_(_e[nt],_e):""}var it=typeof gOPS=="function"?gOPS(_e):[],at;if(hasShammedSymbols){at={};for(var ot=0;ot<it.length;ot++)at["$"+it[ot]]=it[ot]}for(var st in _e)has$5(_e,st)&&(et&&String(Number(st))===st&&st<_e.length||hasShammedSymbols&&at["$"+st]instanceof Symbol||($test.call(/[^\w$]/,st)?tt.push(_(st,_e)+": "+_(_e[st],_e)):tt.push(st+": "+_(_e[st],_e))));if(typeof gOPS=="function")for(var dt=0;dt<it.length;dt++)isEnumerable.call(_e,it[dt])&&tt.push("["+_(it[dt])+"]: "+_(_e[it[dt]],_e));return tt}var inspect$3=objectInspect,$TypeError$5=type,listGetNode=function(_e,_,et){for(var tt=_e,nt;(nt=tt.next)!=null;tt=nt)if(nt.key===_)return tt.next=nt.next,et||(nt.next=_e.next,_e.next=nt),nt},listGet=function(_e,_){if(_e){var et=listGetNode(_e,_);return et&&et.value}},listSet=function(_e,_,et){var tt=listGetNode(_e,_);tt?tt.value=et:_e.next={key:_,next:_e.next,value:et}},listHas=function(_e,_){return _e?!!listGetNode(_e,_):!1},listDelete=function(_e,_){if(_e)return listGetNode(_e,_,!0)},sideChannelList=function _e(){var _,et={assert:function(tt){if(!et.has(tt))throw new $TypeError$5("Side channel does not contain "+inspect$3(tt))},delete:function(tt){var nt=_&&_.next,it=listDelete(_,tt);return it&&nt&&nt===it&&(_=void 0),!!it},get:function(tt){return listGet(_,tt)},has:function(tt){return listHas(_,tt)},set:function(tt,nt){_||(_={next:void 0}),listSet(_,tt,nt)}};return et},esObjectAtoms=Object,esErrors=Error,_eval=EvalError,range=RangeError,ref=ReferenceError,syntax=SyntaxError,uri=URIError,abs$2=Math.abs,floor$1=Math.floor,max$4=Math.max,min$3=Math.min,pow$1=Math.pow,round$6=Math.round,_isNaN=Number.isNaN||function _e(_){return _!==_},$isNaN=_isNaN,sign$2=function _e(_){return $isNaN(_)||_===0?_:_<0?-1:1},gOPD=Object.getOwnPropertyDescriptor,$gOPD$1=gOPD;if($gOPD$1)try{$gOPD$1([],"length")}catch{$gOPD$1=null}var gopd=$gOPD$1,$defineProperty$1=Object.defineProperty||!1;if($defineProperty$1)try{$defineProperty$1({},"a",{value:1})}catch{$defineProperty$1=!1}var esDefineProperty=$defineProperty$1,shams,hasRequiredShams;function requireShams(){return hasRequiredShams||(hasRequiredShams=1,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},et=Symbol("test"),tt=Object(et);if(typeof et=="string"||Object.prototype.toString.call(et)!=="[object Symbol]"||Object.prototype.toString.call(tt)!=="[object Symbol]")return!1;var nt=42;_[et]=nt;for(var it in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var at=Object.getOwnPropertySymbols(_);if(at.length!==1||at[0]!==et||!Object.prototype.propertyIsEnumerable.call(_,et))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var ot=Object.getOwnPropertyDescriptor(_,et);if(ot.value!==nt||ot.enumerable!==!0)return!1}return!0}),shams}var hasSymbols$1,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols$1;hasRequiredHasSymbols=1;var _e=typeof Symbol<"u"&&Symbol,_=requireShams();return hasSymbols$1=function(){return typeof _e!="function"||typeof Symbol!="function"||typeof _e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:_()},hasSymbols$1}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var _e=esObjectAtoms;return Object_getPrototypeOf=_e.getPrototypeOf||null,Object_getPrototypeOf}var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr=Object.prototype.toString,max$3=Math.max,funcType="[object Function]",concatty=function _e(_,et){for(var tt=[],nt=0;nt<_.length;nt+=1)tt[nt]=_[nt];for(var it=0;it<et.length;it+=1)tt[it+_.length]=et[it];return tt},slicy=function _e(_,et){for(var tt=[],nt=et,it=0;nt<_.length;nt+=1,it+=1)tt[it]=_[nt];return tt},joiny=function(_e,_){for(var et="",tt=0;tt<_e.length;tt+=1)et+=_e[tt],tt+1<_e.length&&(et+=_);return et},implementation$1=function _e(_){var et=this;if(typeof et!="function"||toStr.apply(et)!==funcType)throw new TypeError(ERROR_MESSAGE+et);for(var tt=slicy(arguments,1),nt,it=function(){if(this instanceof nt){var ht=et.apply(this,concatty(tt,arguments));return Object(ht)===ht?ht:this}return et.apply(_,concatty(tt,arguments))},at=max$3(0,et.length-tt.length),ot=[],st=0;st<at;st++)ot[st]="$"+st;if(nt=Function("binder","return function ("+joiny(ot,",")+"){ return binder.apply(this,arguments); }")(it),et.prototype){var dt=function(){};dt.prototype=et.prototype,nt.prototype=new dt,dt.prototype=null}return nt},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,functionCall=Function.prototype.call,functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply,bind$5=functionBind,$apply$1=requireFunctionApply(),$call$2=functionCall,$reflectApply=reflectApply,actualApply=$reflectApply||bind$5.call($call$2,$apply$1),bind$4=functionBind,$TypeError$4=type,$call$1=functionCall,$actualApply=actualApply,callBindApplyHelpers=function _e(_){if(_.length<1||typeof _[0]!="function")throw new $TypeError$4("a function is required");return $actualApply(bind$4,$call$1,_)},get$4,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get$4;hasRequiredGet=1;var _e=callBindApplyHelpers,_=gopd,et;try{et=[].__proto__===Array.prototype}catch(at){if(!at||typeof at!="object"||!("code"in at)||at.code!=="ERR_PROTO_ACCESS")throw at}var tt=!!et&&_&&_(Object.prototype,"__proto__"),nt=Object,it=nt.getPrototypeOf;return get$4=tt&&typeof tt.get=="function"?_e([tt.get]):typeof it=="function"?function(ot){return it(ot==null?ot:nt(ot))}:!1,get$4}var getProto$1,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto$1;hasRequiredGetProto=1;var _e=requireReflect_getPrototypeOf(),_=requireObject_getPrototypeOf(),et=requireGet();return getProto$1=_e?function(nt){return _e(nt)}:_?function(nt){if(!nt||typeof nt!="object"&&typeof nt!="function")throw new TypeError("getProto: not an object");return _(nt)}:et?function(nt){return et(nt)}:null,getProto$1}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var _e=Function.prototype.call,_=Object.prototype.hasOwnProperty,et=functionBind;return hasown=et.call(_e,_),hasown}var undefined$1,$Object=esObjectAtoms,$Error=esErrors,$EvalError=_eval,$RangeError=range,$ReferenceError=ref,$SyntaxError=syntax,$TypeError$3=type,$URIError=uri,abs$1=abs$2,floor=floor$1,max$2=max$4,min$2=min$3,pow=pow$1,round$5=round$6,sign$1=sign$2,$Function=Function,getEvalledConstructor=function(_e){try{return $Function('"use strict"; return ('+_e+").constructor;")()}catch{}},$gOPD=gopd,$defineProperty=esDefineProperty,throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=requireHasSymbols()(),getProto=requireGetProto(),$ObjectGPO=requireObject_getPrototypeOf(),$ReflectGPO=requireReflect_getPrototypeOf(),$apply=requireFunctionApply(),$call=functionCall,needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":$Object,"%Object.getOwnPropertyDescriptor%":$gOPD,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet,"%Function.prototype.call%":$call,"%Function.prototype.apply%":$apply,"%Object.defineProperty%":$defineProperty,"%Object.getPrototypeOf%":$ObjectGPO,"%Math.abs%":abs$1,"%Math.floor%":floor,"%Math.max%":max$2,"%Math.min%":min$2,"%Math.pow%":pow,"%Math.round%":round$5,"%Math.sign%":sign$1,"%Reflect.getPrototypeOf%":$ReflectGPO};if(getProto)try{null.error}catch(_e){var errorProto=getProto(getProto(_e));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function _e(_){var et;if(_==="%AsyncFunction%")et=getEvalledConstructor("async function () {}");else if(_==="%GeneratorFunction%")et=getEvalledConstructor("function* () {}");else if(_==="%AsyncGeneratorFunction%")et=getEvalledConstructor("async function* () {}");else if(_==="%AsyncGenerator%"){var tt=_e("%AsyncGeneratorFunction%");tt&&(et=tt.prototype)}else if(_==="%AsyncIteratorPrototype%"){var nt=_e("%AsyncGenerator%");nt&&getProto&&(et=getProto(nt.prototype))}return INTRINSICS[_]=et,et},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$3=functionBind,hasOwn$1=requireHasown(),$concat=bind$3.call($call,Array.prototype.concat),$spliceApply=bind$3.call($apply,Array.prototype.splice),$replace=bind$3.call($call,String.prototype.replace),$strSlice=bind$3.call($call,String.prototype.slice),$exec=bind$3.call($call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function _e(_){var et=$strSlice(_,0,1),tt=$strSlice(_,-1);if(et==="%"&&tt!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(tt==="%"&&et!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var nt=[];return $replace(_,rePropName,function(it,at,ot,st){nt[nt.length]=ot?$replace(st,reEscapeChar,"$1"):at||it}),nt},getBaseIntrinsic=function _e(_,et){var tt=_,nt;if(hasOwn$1(LEGACY_ALIASES,tt)&&(nt=LEGACY_ALIASES[tt],tt="%"+nt[0]+"%"),hasOwn$1(INTRINSICS,tt)){var it=INTRINSICS[tt];if(it===needsEval&&(it=doEval(tt)),typeof it>"u"&&!et)throw new $TypeError$3("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:nt,name:tt,value:it}}throw new $SyntaxError("intrinsic "+_+" does not exist!")},getIntrinsic=function _e(_,et){if(typeof _!="string"||_.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof et!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,_)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var tt=stringToPath(_),nt=tt.length>0?tt[0]:"",it=getBaseIntrinsic("%"+nt+"%",et),at=it.name,ot=it.value,st=!1,dt=it.alias;dt&&(nt=dt[0],$spliceApply(tt,$concat([0,1],dt)));for(var ht=1,ct=!0;ht<tt.length;ht+=1){var ut=tt[ht],ft=$strSlice(ut,0,1),gt=$strSlice(ut,-1);if((ft==='"'||ft==="'"||ft==="`"||gt==='"'||gt==="'"||gt==="`")&&ft!==gt)throw new $SyntaxError("property names with quotes must have matching quotes");if((ut==="constructor"||!ct)&&(st=!0),nt+="."+ut,at="%"+nt+"%",hasOwn$1(INTRINSICS,at))ot=INTRINSICS[at];else if(ot!=null){if(!(ut in ot)){if(!et)throw new $TypeError$3("base intrinsic for "+_+" exists, but the property is not available.");return}if($gOPD&&ht+1>=tt.length){var mt=$gOPD(ot,ut);ct=!!mt,ct&&"get"in mt&&!("originalValue"in mt.get)?ot=mt.get:ot=ot[ut]}else ct=hasOwn$1(ot,ut),ot=ot[ut];ct&&!st&&(INTRINSICS[at]=ot)}}return ot},GetIntrinsic$2=getIntrinsic,callBindBasic=callBindApplyHelpers,$indexOf=callBindBasic([GetIntrinsic$2("%String.prototype.indexOf%")]),callBound$2=function _e(_,et){var tt=GetIntrinsic$2(_,!!et);return typeof tt=="function"&&$indexOf(_,".prototype.")>-1?callBindBasic([tt]):tt},GetIntrinsic$1=getIntrinsic,callBound$1=callBound$2,inspect$2=objectInspect,$TypeError$2=type,$Map=GetIntrinsic$1("%Map%",!0),$mapGet=callBound$1("Map.prototype.get",!0),$mapSet=callBound$1("Map.prototype.set",!0),$mapHas=callBound$1("Map.prototype.has",!0),$mapDelete=callBound$1("Map.prototype.delete",!0),$mapSize=callBound$1("Map.prototype.size",!0),sideChannelMap=!!$Map&&function _e(){var _,et={assert:function(tt){if(!et.has(tt))throw new $TypeError$2("Side channel does not contain "+inspect$2(tt))},delete:function(tt){if(_){var nt=$mapDelete(_,tt);return $mapSize(_)===0&&(_=void 0),nt}return!1},get:function(tt){if(_)return $mapGet(_,tt)},has:function(tt){return _?$mapHas(_,tt):!1},set:function(tt,nt){_||(_=new $Map),$mapSet(_,tt,nt)}};return et},GetIntrinsic=getIntrinsic,callBound=callBound$2,inspect$1=objectInspect,getSideChannelMap$1=sideChannelMap,$TypeError$1=type,$WeakMap=GetIntrinsic("%WeakMap%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$weakMapDelete=callBound("WeakMap.prototype.delete",!0),sideChannelWeakmap=$WeakMap?function _e(){var _,et,tt={assert:function(nt){if(!tt.has(nt))throw new $TypeError$1("Side channel does not contain "+inspect$1(nt))},delete:function(nt){if($WeakMap&&nt&&(typeof nt=="object"||typeof nt=="function")){if(_)return $weakMapDelete(_,nt)}else if(getSideChannelMap$1&&et)return et.delete(nt);return!1},get:function(nt){return $WeakMap&&nt&&(typeof nt=="object"||typeof nt=="function")&&_?$weakMapGet(_,nt):et&&et.get(nt)},has:function(nt){return $WeakMap&&nt&&(typeof nt=="object"||typeof nt=="function")&&_?$weakMapHas(_,nt):!!et&&et.has(nt)},set:function(nt,it){$WeakMap&&nt&&(typeof nt=="object"||typeof nt=="function")?(_||(_=new $WeakMap),$weakMapSet(_,nt,it)):getSideChannelMap$1&&(et||(et=getSideChannelMap$1()),et.set(nt,it))}};return tt}:getSideChannelMap$1,$TypeError=type,inspect=objectInspect,getSideChannelList=sideChannelList,getSideChannelMap=sideChannelMap,getSideChannelWeakMap=sideChannelWeakmap,makeChannel=getSideChannelWeakMap||getSideChannelMap||getSideChannelList,sideChannel=function _e(){var _,et={assert:function(tt){if(!et.has(tt))throw new $TypeError("Side channel does not contain "+inspect(tt))},delete:function(tt){return!!_&&_.delete(tt)},get:function(tt){return _&&_.get(tt)},has:function(tt){return!!_&&_.has(tt)},set:function(tt,nt){_||(_=makeChannel()),_.set(tt,nt)}};return et},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$4={default:Format.RFC3986,formatters:{RFC1738:function(_e){return replace.call(_e,percentTwenties,"+")},RFC3986:function(_e){return String(_e)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$3=formats$4,has$4=Object.prototype.hasOwnProperty,isArray$4=Array.isArray,hexTable=function(){for(var _e=[],_=0;_<256;++_)_e.push("%"+((_<16?"0":"")+_.toString(16)).toUpperCase());return _e}(),compactQueue=function _e(_){for(;_.length>1;){var et=_.pop(),tt=et.obj[et.prop];if(isArray$4(tt)){for(var nt=[],it=0;it<tt.length;++it)typeof tt[it]<"u"&&nt.push(tt[it]);et.obj[et.prop]=nt}}},arrayToObject=function _e(_,et){for(var tt=et&&et.plainObjects?{__proto__:null}:{},nt=0;nt<_.length;++nt)typeof _[nt]<"u"&&(tt[nt]=_[nt]);return tt},merge$2=function _e(_,et,tt){if(!et)return _;if(typeof et!="object"&&typeof et!="function"){if(isArray$4(_))_.push(et);else if(_&&typeof _=="object")(tt&&(tt.plainObjects||tt.allowPrototypes)||!has$4.call(Object.prototype,et))&&(_[et]=!0);else return[_,et];return _}if(!_||typeof _!="object")return[_].concat(et);var nt=_;return isArray$4(_)&&!isArray$4(et)&&(nt=arrayToObject(_,tt)),isArray$4(_)&&isArray$4(et)?(et.forEach(function(it,at){if(has$4.call(_,at)){var ot=_[at];ot&&typeof ot=="object"&&it&&typeof it=="object"?_[at]=_e(ot,it,tt):_.push(it)}else _[at]=it}),_):Object.keys(et).reduce(function(it,at){var ot=et[at];return has$4.call(it,at)?it[at]=_e(it[at],ot,tt):it[at]=ot,it},nt)},assign=function _e(_,et){return Object.keys(et).reduce(function(tt,nt){return tt[nt]=et[nt],tt},_)},decode$1=function(_e,_,et){var tt=_e.replace(/\+/g," ");if(et==="iso-8859-1")return tt.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(tt)}catch{return tt}},limit=1024,encode=function _e(_,et,tt,nt,it){if(_.length===0)return _;var at=_;if(typeof _=="symbol"?at=Symbol.prototype.toString.call(_):typeof _!="string"&&(at=String(_)),tt==="iso-8859-1")return escape(at).replace(/%u[0-9a-f]{4}/gi,function(ft){return"%26%23"+parseInt(ft.slice(2),16)+"%3B"});for(var ot="",st=0;st<at.length;st+=limit){for(var dt=at.length>=limit?at.slice(st,st+limit):at,ht=[],ct=0;ct<dt.length;++ct){var ut=dt.charCodeAt(ct);if(ut===45||ut===46||ut===95||ut===126||ut>=48&&ut<=57||ut>=65&&ut<=90||ut>=97&&ut<=122||it===formats$3.RFC1738&&(ut===40||ut===41)){ht[ht.length]=dt.charAt(ct);continue}if(ut<128){ht[ht.length]=hexTable[ut];continue}if(ut<2048){ht[ht.length]=hexTable[192|ut>>6]+hexTable[128|ut&63];continue}if(ut<55296||ut>=57344){ht[ht.length]=hexTable[224|ut>>12]+hexTable[128|ut>>6&63]+hexTable[128|ut&63];continue}ct+=1,ut=65536+((ut&1023)<<10|dt.charCodeAt(ct)&1023),ht[ht.length]=hexTable[240|ut>>18]+hexTable[128|ut>>12&63]+hexTable[128|ut>>6&63]+hexTable[128|ut&63]}ot+=ht.join("")}return ot},compact=function _e(_){for(var et=[{obj:{o:_},prop:"o"}],tt=[],nt=0;nt<et.length;++nt)for(var it=et[nt],at=it.obj[it.prop],ot=Object.keys(at),st=0;st<ot.length;++st){var dt=ot[st],ht=at[dt];typeof ht=="object"&&ht!==null&&tt.indexOf(ht)===-1&&(et.push({obj:at,prop:dt}),tt.push(ht))}return compactQueue(et),_},isRegExp$1=function _e(_){return Object.prototype.toString.call(_)==="[object RegExp]"},isBuffer=function _e(_){return!_||typeof _!="object"?!1:!!(_.constructor&&_.constructor.isBuffer&&_.constructor.isBuffer(_))},combine=function _e(_,et){return[].concat(_,et)},maybeMap=function _e(_,et){if(isArray$4(_)){for(var tt=[],nt=0;nt<_.length;nt+=1)tt.push(et(_[nt]));return tt}return et(_)},utils$2={arrayToObject,assign,combine,compact,decode:decode$1,encode,isBuffer,isRegExp:isRegExp$1,maybeMap,merge:merge$2},getSideChannel=sideChannel,utils$1=utils$2,formats$2=formats$4,has$3=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function _e(_){return _+"[]"},comma:"comma",indices:function _e(_,et){return _+"["+et+"]"},repeat:function _e(_){return _}},isArray$3=Array.isArray,push$1=Array.prototype.push,pushToArray=function(_e,_){push$1.apply(_e,isArray$3(_)?_:[_])},toISO=Date.prototype.toISOString,defaultFormat=formats$2.default,defaults$2={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:utils$1.encode,encodeValuesOnly:!1,filter:void 0,format:defaultFormat,formatter:formats$2.formatters[defaultFormat],indices:!1,serializeDate:function _e(_){return toISO.call(_)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function _e(_){return typeof _=="string"||typeof _=="number"||typeof _=="boolean"||typeof _=="symbol"||typeof _=="bigint"},sentinel={},stringify$2=function _e(_,et,tt,nt,it,at,ot,st,dt,ht,ct,ut,ft,gt,mt,vt,yt,bt){for(var _t=_,xt=bt,St=0,Tt=!1;(xt=xt.get(sentinel))!==void 0&&!Tt;){var wt=xt.get(_);if(St+=1,typeof wt<"u"){if(wt===St)throw new RangeError("Cyclic object value");Tt=!0}typeof xt.get(sentinel)>"u"&&(St=0)}if(typeof ht=="function"?_t=ht(et,_t):_t instanceof Date?_t=ft(_t):tt==="comma"&&isArray$3(_t)&&(_t=utils$1.maybeMap(_t,function(Vt){return Vt instanceof Date?ft(Vt):Vt})),_t===null){if(at)return dt&&!vt?dt(et,defaults$2.encoder,yt,"key",gt):et;_t=""}if(isNonNullishPrimitive(_t)||utils$1.isBuffer(_t)){if(dt){var Ct=vt?et:dt(et,defaults$2.encoder,yt,"key",gt);return[mt(Ct)+"="+mt(dt(_t,defaults$2.encoder,yt,"value",gt))]}return[mt(et)+"="+mt(String(_t))]}var Et=[];if(typeof _t>"u")return Et;var At;if(tt==="comma"&&isArray$3(_t))vt&&dt&&(_t=utils$1.maybeMap(_t,dt)),At=[{value:_t.length>0?_t.join(",")||null:void 0}];else if(isArray$3(ht))At=ht;else{var Pt=Object.keys(_t);At=ct?Pt.sort(ct):Pt}var Rt=st?String(et).replace(/\./g,"%2E"):String(et),It=nt&&isArray$3(_t)&&_t.length===1?Rt+"[]":Rt;if(it&&isArray$3(_t)&&_t.length===0)return It+"[]";for(var Mt=0;Mt<At.length;++Mt){var Ot=At[Mt],$t=typeof Ot=="object"&&Ot&&typeof Ot.value<"u"?Ot.value:_t[Ot];if(!(ot&&$t===null)){var Lt=ut&&st?String(Ot).replace(/\./g,"%2E"):String(Ot),kt=isArray$3(_t)?typeof tt=="function"?tt(It,Lt):It:It+(ut?"."+Lt:"["+Lt+"]");bt.set(_,St);var Nt=getSideChannel();Nt.set(sentinel,bt),pushToArray(Et,_e($t,kt,tt,nt,it,at,ot,st,tt==="comma"&&vt&&isArray$3(_t)?null:dt,ht,ct,ut,ft,gt,mt,vt,yt,Nt))}}return Et},normalizeStringifyOptions=function _e(_){if(!_)return defaults$2;if(typeof _.allowEmptyArrays<"u"&&typeof _.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof _.encodeDotInKeys<"u"&&typeof _.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(_.encoder!==null&&typeof _.encoder<"u"&&typeof _.encoder!="function")throw new TypeError("Encoder has to be a function.");var et=_.charset||defaults$2.charset;if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var tt=formats$2.default;if(typeof _.format<"u"){if(!has$3.call(formats$2.formatters,_.format))throw new TypeError("Unknown format option provided.");tt=_.format}var nt=formats$2.formatters[tt],it=defaults$2.filter;(typeof _.filter=="function"||isArray$3(_.filter))&&(it=_.filter);var at;if(_.arrayFormat in arrayPrefixGenerators?at=_.arrayFormat:"indices"in _?at=_.indices?"indices":"repeat":at=defaults$2.arrayFormat,"commaRoundTrip"in _&&typeof _.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var ot=typeof _.allowDots>"u"?_.encodeDotInKeys===!0?!0:defaults$2.allowDots:!!_.allowDots;return{addQueryPrefix:typeof _.addQueryPrefix=="boolean"?_.addQueryPrefix:defaults$2.addQueryPrefix,allowDots:ot,allowEmptyArrays:typeof _.allowEmptyArrays=="boolean"?!!_.allowEmptyArrays:defaults$2.allowEmptyArrays,arrayFormat:at,charset:et,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:defaults$2.charsetSentinel,commaRoundTrip:!!_.commaRoundTrip,delimiter:typeof _.delimiter>"u"?defaults$2.delimiter:_.delimiter,encode:typeof _.encode=="boolean"?_.encode:defaults$2.encode,encodeDotInKeys:typeof _.encodeDotInKeys=="boolean"?_.encodeDotInKeys:defaults$2.encodeDotInKeys,encoder:typeof _.encoder=="function"?_.encoder:defaults$2.encoder,encodeValuesOnly:typeof _.encodeValuesOnly=="boolean"?_.encodeValuesOnly:defaults$2.encodeValuesOnly,filter:it,format:tt,formatter:nt,serializeDate:typeof _.serializeDate=="function"?_.serializeDate:defaults$2.serializeDate,skipNulls:typeof _.skipNulls=="boolean"?_.skipNulls:defaults$2.skipNulls,sort:typeof _.sort=="function"?_.sort:null,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:defaults$2.strictNullHandling}},stringify_1=function(_e,_){var et=_e,tt=normalizeStringifyOptions(_),nt,it;typeof tt.filter=="function"?(it=tt.filter,et=it("",et)):isArray$3(tt.filter)&&(it=tt.filter,nt=it);var at=[];if(typeof et!="object"||et===null)return"";var ot=arrayPrefixGenerators[tt.arrayFormat],st=ot==="comma"&&tt.commaRoundTrip;nt||(nt=Object.keys(et)),tt.sort&&nt.sort(tt.sort);for(var dt=getSideChannel(),ht=0;ht<nt.length;++ht){var ct=nt[ht],ut=et[ct];tt.skipNulls&&ut===null||pushToArray(at,stringify$2(ut,ct,ot,st,tt.allowEmptyArrays,tt.strictNullHandling,tt.skipNulls,tt.encodeDotInKeys,tt.encode?tt.encoder:null,tt.filter,tt.sort,tt.allowDots,tt.serializeDate,tt.format,tt.formatter,tt.encodeValuesOnly,tt.charset,dt))}var ft=at.join(tt.delimiter),gt=tt.addQueryPrefix===!0?"?":"";return tt.charsetSentinel&&(tt.charset==="iso-8859-1"?gt+="utf8=%26%2310003%3B&":gt+="utf8=%E2%9C%93&"),ft.length>0?gt+ft:""},utils=utils$2,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,defaults$1={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:utils.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},interpretNumericEntities=function(_e){return _e.replace(/&#(\d+);/g,function(_,et){return String.fromCharCode(parseInt(et,10))})},parseArrayValue=function(_e,_,et){if(_e&&typeof _e=="string"&&_.comma&&_e.indexOf(",")>-1)return _e.split(",");if(_.throwOnLimitExceeded&&et>=_.arrayLimit)throw new RangeError("Array limit exceeded. Only "+_.arrayLimit+" element"+(_.arrayLimit===1?"":"s")+" allowed in an array.");return _e},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function _e(_,et){var tt={__proto__:null},nt=et.ignoreQueryPrefix?_.replace(/^\?/,""):_;nt=nt.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var it=et.parameterLimit===1/0?void 0:et.parameterLimit,at=nt.split(et.delimiter,et.throwOnLimitExceeded?it+1:it);if(et.throwOnLimitExceeded&&at.length>it)throw new RangeError("Parameter limit exceeded. Only "+it+" parameter"+(it===1?"":"s")+" allowed.");var ot=-1,st,dt=et.charset;if(et.charsetSentinel)for(st=0;st<at.length;++st)at[st].indexOf("utf8=")===0&&(at[st]===charsetSentinel?dt="utf-8":at[st]===isoSentinel&&(dt="iso-8859-1"),ot=st,st=at.length);for(st=0;st<at.length;++st)if(st!==ot){var ht=at[st],ct=ht.indexOf("]="),ut=ct===-1?ht.indexOf("="):ct+1,ft,gt;ut===-1?(ft=et.decoder(ht,defaults$1.decoder,dt,"key"),gt=et.strictNullHandling?null:""):(ft=et.decoder(ht.slice(0,ut),defaults$1.decoder,dt,"key"),gt=utils.maybeMap(parseArrayValue(ht.slice(ut+1),et,isArray$2(tt[ft])?tt[ft].length:0),function(vt){return et.decoder(vt,defaults$1.decoder,dt,"value")})),gt&&et.interpretNumericEntities&&dt==="iso-8859-1"&&(gt=interpretNumericEntities(String(gt))),ht.indexOf("[]=")>-1&&(gt=isArray$2(gt)?[gt]:gt);var mt=has$2.call(tt,ft);mt&&et.duplicates==="combine"?tt[ft]=utils.combine(tt[ft],gt):(!mt||et.duplicates==="last")&&(tt[ft]=gt)}return tt},parseObject=function(_e,_,et,tt){var nt=0;if(_e.length>0&&_e[_e.length-1]==="[]"){var it=_e.slice(0,-1).join("");nt=Array.isArray(_)&&_[it]?_[it].length:0}for(var at=tt?_:parseArrayValue(_,et,nt),ot=_e.length-1;ot>=0;--ot){var st,dt=_e[ot];if(dt==="[]"&&et.parseArrays)st=et.allowEmptyArrays&&(at===""||et.strictNullHandling&&at===null)?[]:utils.combine([],at);else{st=et.plainObjects?{__proto__:null}:{};var ht=dt.charAt(0)==="["&&dt.charAt(dt.length-1)==="]"?dt.slice(1,-1):dt,ct=et.decodeDotInKeys?ht.replace(/%2E/g,"."):ht,ut=parseInt(ct,10);!et.parseArrays&&ct===""?st={0:at}:!isNaN(ut)&&dt!==ct&&String(ut)===ct&&ut>=0&&et.parseArrays&&ut<=et.arrayLimit?(st=[],st[ut]=at):ct!=="__proto__"&&(st[ct]=at)}at=st}return at},parseKeys=function _e(_,et,tt,nt){if(_){var it=tt.allowDots?_.replace(/\.([^.[]+)/g,"[$1]"):_,at=/(\[[^[\]]*])/,ot=/(\[[^[\]]*])/g,st=tt.depth>0&&at.exec(it),dt=st?it.slice(0,st.index):it,ht=[];if(dt){if(!tt.plainObjects&&has$2.call(Object.prototype,dt)&&!tt.allowPrototypes)return;ht.push(dt)}for(var ct=0;tt.depth>0&&(st=ot.exec(it))!==null&&ct<tt.depth;){if(ct+=1,!tt.plainObjects&&has$2.call(Object.prototype,st[1].slice(1,-1))&&!tt.allowPrototypes)return;ht.push(st[1])}if(st){if(tt.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+tt.depth+" and strictDepth is true");ht.push("["+it.slice(st.index)+"]")}return parseObject(ht,et,tt,nt)}},normalizeParseOptions=function _e(_){if(!_)return defaults$1;if(typeof _.allowEmptyArrays<"u"&&typeof _.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof _.decodeDotInKeys<"u"&&typeof _.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(_.decoder!==null&&typeof _.decoder<"u"&&typeof _.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof _.throwOnLimitExceeded<"u"&&typeof _.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var et=typeof _.charset>"u"?defaults$1.charset:_.charset,tt=typeof _.duplicates>"u"?defaults$1.duplicates:_.duplicates;if(tt!=="combine"&&tt!=="first"&&tt!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var nt=typeof _.allowDots>"u"?_.decodeDotInKeys===!0?!0:defaults$1.allowDots:!!_.allowDots;return{allowDots:nt,allowEmptyArrays:typeof _.allowEmptyArrays=="boolean"?!!_.allowEmptyArrays:defaults$1.allowEmptyArrays,allowPrototypes:typeof _.allowPrototypes=="boolean"?_.allowPrototypes:defaults$1.allowPrototypes,allowSparse:typeof _.allowSparse=="boolean"?_.allowSparse:defaults$1.allowSparse,arrayLimit:typeof _.arrayLimit=="number"?_.arrayLimit:defaults$1.arrayLimit,charset:et,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:defaults$1.charsetSentinel,comma:typeof _.comma=="boolean"?_.comma:defaults$1.comma,decodeDotInKeys:typeof _.decodeDotInKeys=="boolean"?_.decodeDotInKeys:defaults$1.decodeDotInKeys,decoder:typeof _.decoder=="function"?_.decoder:defaults$1.decoder,delimiter:typeof _.delimiter=="string"||utils.isRegExp(_.delimiter)?_.delimiter:defaults$1.delimiter,depth:typeof _.depth=="number"||_.depth===!1?+_.depth:defaults$1.depth,duplicates:tt,ignoreQueryPrefix:_.ignoreQueryPrefix===!0,interpretNumericEntities:typeof _.interpretNumericEntities=="boolean"?_.interpretNumericEntities:defaults$1.interpretNumericEntities,parameterLimit:typeof _.parameterLimit=="number"?_.parameterLimit:defaults$1.parameterLimit,parseArrays:_.parseArrays!==!1,plainObjects:typeof _.plainObjects=="boolean"?_.plainObjects:defaults$1.plainObjects,strictDepth:typeof _.strictDepth=="boolean"?!!_.strictDepth:defaults$1.strictDepth,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:defaults$1.strictNullHandling,throwOnLimitExceeded:typeof _.throwOnLimitExceeded=="boolean"?_.throwOnLimitExceeded:!1}},parse$4=function(_e,_){var et=normalizeParseOptions(_);if(_e===""||_e===null||typeof _e>"u")return et.plainObjects?{__proto__:null}:{};for(var tt=typeof _e=="string"?parseValues(_e,et):_e,nt=et.plainObjects?{__proto__:null}:{},it=Object.keys(tt),at=0;at<it.length;++at){var ot=it[at],st=parseKeys(ot,tt[ot],et,typeof _e=="string");nt=utils.merge(nt,st,et)}return et.allowSparse===!0?nt:utils.compact(nt)},stringify$1=stringify_1,parse$3=parse$4,formats$1=formats$4,lib$1={formats:formats$1,parse:parse$3,stringify:stringify$1},punycode=punycodeExports;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=lib$1;function urlParse(_e,_,et){if(_e&&typeof _e=="object"&&_e instanceof Url)return _e;var tt=new Url;return tt.parse(_e,_,et),tt}Url.prototype.parse=function(_e,_,et){if(typeof _e!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof _e);var tt=_e.indexOf("?"),nt=tt!==-1&&tt<_e.indexOf("#")?"?":"#",it=_e.split(nt),at=/\\/g;it[0]=it[0].replace(at,"/"),_e=it.join(nt);var ot=_e;if(ot=ot.trim(),!et&&_e.split("#").length===1){var st=simplePathPattern.exec(ot);if(st)return this.path=ot,this.href=ot,this.pathname=st[1],st[2]?(this.search=st[2],_?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):_&&(this.search="",this.query={}),this}var dt=protocolPattern.exec(ot);if(dt){dt=dt[0];var ht=dt.toLowerCase();this.protocol=ht,ot=ot.substr(dt.length)}if(et||dt||ot.match(/^\/\/[^@/]+@[^@/]+/)){var ct=ot.substr(0,2)==="//";ct&&!(dt&&hostlessProtocol[dt])&&(ot=ot.substr(2),this.slashes=!0)}if(!hostlessProtocol[dt]&&(ct||dt&&!slashedProtocol[dt])){for(var ut=-1,ft=0;ft<hostEndingChars.length;ft++){var gt=ot.indexOf(hostEndingChars[ft]);gt!==-1&&(ut===-1||gt<ut)&&(ut=gt)}var mt,vt;ut===-1?vt=ot.lastIndexOf("@"):vt=ot.lastIndexOf("@",ut),vt!==-1&&(mt=ot.slice(0,vt),ot=ot.slice(vt+1),this.auth=decodeURIComponent(mt)),ut=-1;for(var ft=0;ft<nonHostChars.length;ft++){var gt=ot.indexOf(nonHostChars[ft]);gt!==-1&&(ut===-1||gt<ut)&&(ut=gt)}ut===-1&&(ut=ot.length),this.host=ot.slice(0,ut),ot=ot.slice(ut),this.parseHost(),this.hostname=this.hostname||"";var yt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!yt)for(var bt=this.hostname.split(/\./),ft=0,_t=bt.length;ft<_t;ft++){var xt=bt[ft];if(xt&&!xt.match(hostnamePartPattern)){for(var St="",Tt=0,wt=xt.length;Tt<wt;Tt++)xt.charCodeAt(Tt)>127?St+="x":St+=xt[Tt];if(!St.match(hostnamePartPattern)){var Ct=bt.slice(0,ft),Et=bt.slice(ft+1),At=xt.match(hostnamePartStart);At&&(Ct.push(At[1]),Et.unshift(At[2])),Et.length&&(ot="/"+Et.join(".")+ot),this.hostname=Ct.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),yt||(this.hostname=punycode.toASCII(this.hostname));var Pt=this.port?":"+this.port:"",Rt=this.hostname||"";this.host=Rt+Pt,this.href+=this.host,yt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),ot[0]!=="/"&&(ot="/"+ot))}if(!unsafeProtocol[ht])for(var ft=0,_t=autoEscape.length;ft<_t;ft++){var It=autoEscape[ft];if(ot.indexOf(It)!==-1){var Mt=encodeURIComponent(It);Mt===It&&(Mt=escape(It)),ot=ot.split(It).join(Mt)}}var Ot=ot.indexOf("#");Ot!==-1&&(this.hash=ot.substr(Ot),ot=ot.slice(0,Ot));var $t=ot.indexOf("?");if($t!==-1?(this.search=ot.substr($t),this.query=ot.substr($t+1),_&&(this.query=querystring.parse(this.query)),ot=ot.slice(0,$t)):_&&(this.search="",this.query={}),ot&&(this.pathname=ot),slashedProtocol[ht]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Pt=this.pathname||"",Lt=this.search||"";this.path=Pt+Lt}return this.href=this.format(),this};function urlFormat(_e){return typeof _e=="string"&&(_e=urlParse(_e)),_e instanceof Url?_e.format():Url.prototype.format.call(_e)}Url.prototype.format=function(){var _e=this.auth||"";_e&&(_e=encodeURIComponent(_e),_e=_e.replace(/%3A/i,":"),_e+="@");var _=this.protocol||"",et=this.pathname||"",tt=this.hash||"",nt=!1,it="";this.host?nt=_e+this.host:this.hostname&&(nt=_e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(nt+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(it=querystring.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var at=this.search||it&&"?"+it||"";return _&&_.substr(-1)!==":"&&(_+=":"),this.slashes||(!_||slashedProtocol[_])&&nt!==!1?(nt="//"+(nt||""),et&&et.charAt(0)!=="/"&&(et="/"+et)):nt||(nt=""),tt&&tt.charAt(0)!=="#"&&(tt="#"+tt),at&&at.charAt(0)!=="?"&&(at="?"+at),et=et.replace(/[?#]/g,function(ot){return encodeURIComponent(ot)}),at=at.replace("#","%23"),_+nt+et+at+tt};function urlResolve(_e,_){return urlParse(_e,!1,!0).resolve(_)}Url.prototype.resolve=function(_e){return this.resolveObject(urlParse(_e,!1,!0)).format()};Url.prototype.resolveObject=function(_e){if(typeof _e=="string"){var _=new Url;_.parse(_e,!1,!0),_e=_}for(var et=new Url,tt=Object.keys(this),nt=0;nt<tt.length;nt++){var it=tt[nt];et[it]=this[it]}if(et.hash=_e.hash,_e.href==="")return et.href=et.format(),et;if(_e.slashes&&!_e.protocol){for(var at=Object.keys(_e),ot=0;ot<at.length;ot++){var st=at[ot];st!=="protocol"&&(et[st]=_e[st])}return slashedProtocol[et.protocol]&&et.hostname&&!et.pathname&&(et.pathname="/",et.path=et.pathname),et.href=et.format(),et}if(_e.protocol&&_e.protocol!==et.protocol){if(!slashedProtocol[_e.protocol]){for(var dt=Object.keys(_e),ht=0;ht<dt.length;ht++){var ct=dt[ht];et[ct]=_e[ct]}return et.href=et.format(),et}if(et.protocol=_e.protocol,!_e.host&&!hostlessProtocol[_e.protocol]){for(var _t=(_e.pathname||"").split("/");_t.length&&!(_e.host=_t.shift()););_e.host||(_e.host=""),_e.hostname||(_e.hostname=""),_t[0]!==""&&_t.unshift(""),_t.length<2&&_t.unshift(""),et.pathname=_t.join("/")}else et.pathname=_e.pathname;if(et.search=_e.search,et.query=_e.query,et.host=_e.host||"",et.auth=_e.auth,et.hostname=_e.hostname||_e.host,et.port=_e.port,et.pathname||et.search){var ut=et.pathname||"",ft=et.search||"";et.path=ut+ft}return et.slashes=et.slashes||_e.slashes,et.href=et.format(),et}var gt=et.pathname&&et.pathname.charAt(0)==="/",mt=_e.host||_e.pathname&&_e.pathname.charAt(0)==="/",vt=mt||gt||et.host&&_e.pathname,yt=vt,bt=et.pathname&&et.pathname.split("/")||[],_t=_e.pathname&&_e.pathname.split("/")||[],xt=et.protocol&&!slashedProtocol[et.protocol];if(xt&&(et.hostname="",et.port=null,et.host&&(bt[0]===""?bt[0]=et.host:bt.unshift(et.host)),et.host="",_e.protocol&&(_e.hostname=null,_e.port=null,_e.host&&(_t[0]===""?_t[0]=_e.host:_t.unshift(_e.host)),_e.host=null),vt=vt&&(_t[0]===""||bt[0]==="")),mt)et.host=_e.host||_e.host===""?_e.host:et.host,et.hostname=_e.hostname||_e.hostname===""?_e.hostname:et.hostname,et.search=_e.search,et.query=_e.query,bt=_t;else if(_t.length)bt||(bt=[]),bt.pop(),bt=bt.concat(_t),et.search=_e.search,et.query=_e.query;else if(_e.search!=null){if(xt){et.host=bt.shift(),et.hostname=et.host;var St=et.host&&et.host.indexOf("@")>0?et.host.split("@"):!1;St&&(et.auth=St.shift(),et.hostname=St.shift(),et.host=et.hostname)}return et.search=_e.search,et.query=_e.query,(et.pathname!==null||et.search!==null)&&(et.path=(et.pathname?et.pathname:"")+(et.search?et.search:"")),et.href=et.format(),et}if(!bt.length)return et.pathname=null,et.search?et.path="/"+et.search:et.path=null,et.href=et.format(),et;for(var Tt=bt.slice(-1)[0],wt=(et.host||_e.host||bt.length>1)&&(Tt==="."||Tt==="..")||Tt==="",Ct=0,Et=bt.length;Et>=0;Et--)Tt=bt[Et],Tt==="."?bt.splice(Et,1):Tt===".."?(bt.splice(Et,1),Ct++):Ct&&(bt.splice(Et,1),Ct--);if(!vt&&!yt)for(;Ct--;Ct)bt.unshift("..");vt&&bt[0]!==""&&(!bt[0]||bt[0].charAt(0)!=="/")&&bt.unshift(""),wt&&bt.join("/").substr(-1)!=="/"&&bt.push("");var At=bt[0]===""||bt[0]&&bt[0].charAt(0)==="/";if(xt){et.hostname=At?"":bt.length?bt.shift():"",et.host=et.hostname;var St=et.host&&et.host.indexOf("@")>0?et.host.split("@"):!1;St&&(et.auth=St.shift(),et.hostname=St.shift(),et.host=et.hostname)}return vt=vt||et.host&&bt.length,vt&&!At&&bt.unshift(""),bt.length>0?et.pathname=bt.join("/"):(et.pathname=null,et.path=null),(et.pathname!==null||et.search!==null)&&(et.path=(et.pathname?et.pathname:"")+(et.search?et.search:"")),et.auth=_e.auth||et.auth,et.slashes=et.slashes||_e.slashes,et.href=et.format(),et};Url.prototype.parseHost=function(){var _e=this.host,_=portPattern.exec(_e);_&&(_=_[0],_!==":"&&(this.port=_.substr(1)),_e=_e.substr(0,_e.length-_.length)),_e&&(this.hostname=_e)};var parse$2=urlParse,resolve$1=urlResolve,format$2=urlFormat;const warnings={};function deprecation(_e,_,et=3){if(warnings[_])return;let tt=new Error().stack;typeof tt>"u"?console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${_e}`):(tt=tt.split(`
`).splice(et).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${_}
Deprecated since v${_e}`),console.warn(tt),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${_e}`),console.warn(tt))),warnings[_]=!0}const url={get parse(){return deprecation("7.3.0","utils.url.parse is deprecated, use native URL API instead."),parse$2},get format(){return deprecation("7.3.0","utils.url.format is deprecated, use native URL API instead."),format$2},get resolve(){return deprecation("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),resolve$1}};function assertPath(_e){if(typeof _e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(_e)}`)}function removeUrlParams(_e){return _e.split("?")[0].split("#")[0]}function escapeRegExp(_e){return _e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(_e,_,et){return _e.replace(new RegExp(escapeRegExp(_),"g"),et)}function normalizeStringPosix(_e,_){let et="",tt=0,nt=-1,it=0,at=-1;for(let ot=0;ot<=_e.length;++ot){if(ot<_e.length)at=_e.charCodeAt(ot);else{if(at===47)break;at=47}if(at===47){if(!(nt===ot-1||it===1))if(nt!==ot-1&&it===2){if(et.length<2||tt!==2||et.charCodeAt(et.length-1)!==46||et.charCodeAt(et.length-2)!==46){if(et.length>2){const st=et.lastIndexOf("/");if(st!==et.length-1){st===-1?(et="",tt=0):(et=et.slice(0,st),tt=et.length-1-et.lastIndexOf("/")),nt=ot,it=0;continue}}else if(et.length===2||et.length===1){et="",tt=0,nt=ot,it=0;continue}}}else et.length>0?et+=`/${_e.slice(nt+1,ot)}`:et=_e.slice(nt+1,ot),tt=ot-nt-1;nt=ot,it=0}else at===46&&it!==-1?++it:it=-1}return et}const path={toPosix(_e){return replaceAll(_e,"\\","/")},isUrl(_e){return/^https?:/.test(this.toPosix(_e))},isDataUrl(_e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(_e)},isBlobUrl(_e){return _e.startsWith("blob:")},hasProtocol(_e){return/^[^/:]+:/.test(this.toPosix(_e))},getProtocol(_e){assertPath(_e),_e=this.toPosix(_e);const _=/^file:\/\/\//.exec(_e);if(_)return _[0];const et=/^[^/:]+:\/{0,2}/.exec(_e);return et?et[0]:""},toAbsolute(_e,_,et){if(assertPath(_e),this.isDataUrl(_e)||this.isBlobUrl(_e))return _e;const tt=removeUrlParams(this.toPosix(_??settings.ADAPTER.getBaseUrl())),nt=removeUrlParams(this.toPosix(et??this.rootname(tt)));return _e=this.toPosix(_e),_e.startsWith("/")?path.join(nt,_e.slice(1)):this.isAbsolute(_e)?_e:this.join(tt,_e)},normalize(_e){if(assertPath(_e),_e.length===0)return".";if(this.isDataUrl(_e)||this.isBlobUrl(_e))return _e;_e=this.toPosix(_e);let _="";const et=_e.startsWith("/");this.hasProtocol(_e)&&(_=this.rootname(_e),_e=_e.slice(_.length));const tt=_e.endsWith("/");return _e=normalizeStringPosix(_e),_e.length>0&&tt&&(_e+="/"),et?`/${_e}`:_+_e},isAbsolute(_e){return assertPath(_e),_e=this.toPosix(_e),this.hasProtocol(_e)?!0:_e.startsWith("/")},join(..._e){if(_e.length===0)return".";let _;for(let et=0;et<_e.length;++et){const tt=_e[et];if(assertPath(tt),tt.length>0)if(_===void 0)_=tt;else{const nt=_e[et-1]??"";this.joinExtensions.includes(this.extname(nt).toLowerCase())?_+=`/../${tt}`:_+=`/${tt}`}}return _===void 0?".":this.normalize(_)},dirname(_e){if(assertPath(_e),_e.length===0)return".";_e=this.toPosix(_e);let _=_e.charCodeAt(0);const et=_===47;let tt=-1,nt=!0;const it=this.getProtocol(_e),at=_e;_e=_e.slice(it.length);for(let ot=_e.length-1;ot>=1;--ot)if(_=_e.charCodeAt(ot),_===47){if(!nt){tt=ot;break}}else nt=!1;return tt===-1?et?"/":this.isUrl(at)?it+_e:it:et&&tt===1?"//":it+_e.slice(0,tt)},rootname(_e){assertPath(_e),_e=this.toPosix(_e);let _="";if(_e.startsWith("/")?_="/":_=this.getProtocol(_e),this.isUrl(_e)){const et=_e.indexOf("/",_.length);et!==-1?_=_e.slice(0,et):_=_e,_.endsWith("/")||(_+="/")}return _},basename(_e,_){assertPath(_e),_&&assertPath(_),_e=removeUrlParams(this.toPosix(_e));let et=0,tt=-1,nt=!0,it;if(_!==void 0&&_.length>0&&_.length<=_e.length){if(_.length===_e.length&&_===_e)return"";let at=_.length-1,ot=-1;for(it=_e.length-1;it>=0;--it){const st=_e.charCodeAt(it);if(st===47){if(!nt){et=it+1;break}}else ot===-1&&(nt=!1,ot=it+1),at>=0&&(st===_.charCodeAt(at)?--at===-1&&(tt=it):(at=-1,tt=ot))}return et===tt?tt=ot:tt===-1&&(tt=_e.length),_e.slice(et,tt)}for(it=_e.length-1;it>=0;--it)if(_e.charCodeAt(it)===47){if(!nt){et=it+1;break}}else tt===-1&&(nt=!1,tt=it+1);return tt===-1?"":_e.slice(et,tt)},extname(_e){assertPath(_e),_e=removeUrlParams(this.toPosix(_e));let _=-1,et=0,tt=-1,nt=!0,it=0;for(let at=_e.length-1;at>=0;--at){const ot=_e.charCodeAt(at);if(ot===47){if(!nt){et=at+1;break}continue}tt===-1&&(nt=!1,tt=at+1),ot===46?_===-1?_=at:it!==1&&(it=1):_!==-1&&(it=-1)}return _===-1||tt===-1||it===0||it===1&&_===tt-1&&_===et+1?"":_e.slice(_,tt)},parse(_e){assertPath(_e);const _={root:"",dir:"",base:"",ext:"",name:""};if(_e.length===0)return _;_e=removeUrlParams(this.toPosix(_e));let et=_e.charCodeAt(0);const tt=this.isAbsolute(_e);let nt;_.root=this.rootname(_e),tt||this.hasProtocol(_e)?nt=1:nt=0;let it=-1,at=0,ot=-1,st=!0,dt=_e.length-1,ht=0;for(;dt>=nt;--dt){if(et=_e.charCodeAt(dt),et===47){if(!st){at=dt+1;break}continue}ot===-1&&(st=!1,ot=dt+1),et===46?it===-1?it=dt:ht!==1&&(ht=1):it!==-1&&(ht=-1)}return it===-1||ot===-1||ht===0||ht===1&&it===ot-1&&it===at+1?ot!==-1&&(at===0&&tt?_.base=_.name=_e.slice(1,ot):_.base=_.name=_e.slice(at,ot)):(at===0&&tt?(_.name=_e.slice(1,it),_.base=_e.slice(1,ot)):(_.name=_e.slice(at,it),_.base=_e.slice(at,ot)),_.ext=_e.slice(it,ot)),_.dir=this.dirname(_e),_},sep:"/",delimiter:":",joinExtensions:[".html"]};let promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{var it;const _e=document.createElement("canvas").getContext("webgl");if(!_e)return ALPHA_MODES.UNPACK;const _=await new Promise(at=>{const ot=document.createElement("video");ot.onloadeddata=()=>at(ot),ot.onerror=()=>at(null),ot.autoplay=!1,ot.crossOrigin="anonymous",ot.preload="auto",ot.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",ot.load()});if(!_)return ALPHA_MODES.UNPACK;const et=_e.createTexture();_e.bindTexture(_e.TEXTURE_2D,et);const tt=_e.createFramebuffer();_e.bindFramebuffer(_e.FRAMEBUFFER,tt),_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_2D,et,0),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),_e.pixelStorei(_e.UNPACK_COLORSPACE_CONVERSION_WEBGL,_e.NONE),_e.texImage2D(_e.TEXTURE_2D,0,_e.RGBA,_e.RGBA,_e.UNSIGNED_BYTE,_);const nt=new Uint8Array(4);return _e.readPixels(0,0,1,1,_e.RGBA,_e.UNSIGNED_BYTE,nt),_e.deleteFramebuffer(tt),_e.deleteTexture(et),(it=_e.getExtension("WEBGL_lose_context"))==null||it.loseContext(),nt[0]<=nt[3]?ALPHA_MODES.PMA:ALPHA_MODES.UNPACK})()),promise}let supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var _;const _e={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings.ADAPTER.getWebGLRenderingContext())return!1;const et=settings.ADAPTER.createCanvas();let tt=et.getContext("webgl",_e)||et.getContext("experimental-webgl",_e);const nt=!!((_=tt==null?void 0:tt.getContextAttributes())!=null&&_.stencil);if(tt){const it=tt.getExtension("WEBGL_lose_context");it&&it.loseContext()}return tt=null,nt}catch{return!1}}()),supported}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t$1=function(_e){return typeof _e=="string"?_e.length>0:typeof _e=="number"},n=function(_e,_,et){return _===void 0&&(_=0),et===void 0&&(et=Math.pow(10,_)),Math.round(et*_e)/et+0},e$1=function(_e,_,et){return _===void 0&&(_=0),et===void 0&&(et=1),_e>et?et:_e>_?_e:_},u=function(_e){return(_e=isFinite(_e)?_e%360:0)>0?_e:_e+360},a=function(_e){return{r:e$1(_e.r,0,255),g:e$1(_e.g,0,255),b:e$1(_e.b,0,255),a:e$1(_e.a)}},o=function(_e){return{r:n(_e.r),g:n(_e.g),b:n(_e.b),a:n(_e.a,3)}},i$1=/^#([0-9a-f]{3,8})$/i,s=function(_e){var _=_e.toString(16);return _.length<2?"0"+_:_},h=function(_e){var _=_e.r,et=_e.g,tt=_e.b,nt=_e.a,it=Math.max(_,et,tt),at=it-Math.min(_,et,tt),ot=at?it===_?(et-tt)/at:it===et?2+(tt-_)/at:4+(_-et)/at:0;return{h:60*(ot<0?ot+6:ot),s:it?at/it*100:0,v:it/255*100,a:nt}},b=function(_e){var _=_e.h,et=_e.s,tt=_e.v,nt=_e.a;_=_/360*6,et/=100,tt/=100;var it=Math.floor(_),at=tt*(1-et),ot=tt*(1-(_-it)*et),st=tt*(1-(1-_+it)*et),dt=it%6;return{r:255*[tt,ot,at,at,st,tt][dt],g:255*[st,tt,tt,ot,at,at][dt],b:255*[at,at,st,tt,tt,ot][dt],a:nt}},g=function(_e){return{h:u(_e.h),s:e$1(_e.s,0,100),l:e$1(_e.l,0,100),a:e$1(_e.a)}},d=function(_e){return{h:n(_e.h),s:n(_e.s),l:n(_e.l),a:n(_e.a,3)}},f=function(_e){return b((et=(_=_e).s,{h:_.h,s:(et*=((tt=_.l)<50?tt:100-tt)/100)>0?2*et/(tt+et)*100:0,v:tt+et,a:_.a}));var _,et,tt},c=function(_e){return{h:(_=h(_e)).h,s:(nt=(200-(et=_.s))*(tt=_.v)/100)>0&&nt<200?et*tt/100/(nt<=100?nt:200-nt)*100:0,l:nt/2,a:_.a};var _,et,tt,nt},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(_e){var _=i$1.exec(_e);return _?(_e=_[1]).length<=4?{r:parseInt(_e[0]+_e[0],16),g:parseInt(_e[1]+_e[1],16),b:parseInt(_e[2]+_e[2],16),a:_e.length===4?n(parseInt(_e[3]+_e[3],16)/255,2):1}:_e.length===6||_e.length===8?{r:parseInt(_e.substr(0,2),16),g:parseInt(_e.substr(2,2),16),b:parseInt(_e.substr(4,2),16),a:_e.length===8?n(parseInt(_e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(_e){var _=v.exec(_e)||m$1.exec(_e);return _?_[2]!==_[4]||_[4]!==_[6]?null:a({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(_e){var _=l.exec(_e)||p.exec(_e);if(!_)return null;var et,tt,nt=g({h:(et=_[1],tt=_[2],tt===void 0&&(tt="deg"),Number(et)*(r[tt]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f(nt)},"hsl"]],object:[[function(_e){var _=_e.r,et=_e.g,tt=_e.b,nt=_e.a,it=nt===void 0?1:nt;return t$1(_)&&t$1(et)&&t$1(tt)?a({r:Number(_),g:Number(et),b:Number(tt),a:Number(it)}):null},"rgb"],[function(_e){var _=_e.h,et=_e.s,tt=_e.l,nt=_e.a,it=nt===void 0?1:nt;if(!t$1(_)||!t$1(et)||!t$1(tt))return null;var at=g({h:Number(_),s:Number(et),l:Number(tt),a:Number(it)});return f(at)},"hsl"],[function(_e){var _=_e.h,et=_e.s,tt=_e.v,nt=_e.a,it=nt===void 0?1:nt;if(!t$1(_)||!t$1(et)||!t$1(tt))return null;var at=function(ot){return{h:u(ot.h),s:e$1(ot.s,0,100),v:e$1(ot.v,0,100),a:e$1(ot.a)}}({h:Number(_),s:Number(et),v:Number(tt),a:Number(it)});return b(at)},"hsv"]]},N=function(_e,_){for(var et=0;et<_.length;et++){var tt=_[et][0](_e);if(tt)return[tt,_[et][1]]}return[null,void 0]},x=function(_e){return typeof _e=="string"?N(_e.trim(),y.string):typeof _e=="object"&&_e!==null?N(_e,y.object):[null,void 0]},M=function(_e,_){var et=c(_e);return{h:et.h,s:e$1(et.s+100*_,0,100),l:et.l,a:et.a}},H=function(_e){return(299*_e.r+587*_e.g+114*_e.b)/1e3/255},$=function(_e,_){var et=c(_e);return{h:et.h,s:et.s,l:e$1(et.l+100*_,0,100),a:et.a}},j=function(){function _e(_){this.parsed=x(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return _e.prototype.isValid=function(){return this.parsed!==null},_e.prototype.brightness=function(){return n(H(this.rgba),2)},_e.prototype.isDark=function(){return H(this.rgba)<.5},_e.prototype.isLight=function(){return H(this.rgba)>=.5},_e.prototype.toHex=function(){return _=o(this.rgba),et=_.r,tt=_.g,nt=_.b,at=(it=_.a)<1?s(n(255*it)):"","#"+s(et)+s(tt)+s(nt)+at;var _,et,tt,nt,it,at},_e.prototype.toRgb=function(){return o(this.rgba)},_e.prototype.toRgbString=function(){return _=o(this.rgba),et=_.r,tt=_.g,nt=_.b,(it=_.a)<1?"rgba("+et+", "+tt+", "+nt+", "+it+")":"rgb("+et+", "+tt+", "+nt+")";var _,et,tt,nt,it},_e.prototype.toHsl=function(){return d(c(this.rgba))},_e.prototype.toHslString=function(){return _=d(c(this.rgba)),et=_.h,tt=_.s,nt=_.l,(it=_.a)<1?"hsla("+et+", "+tt+"%, "+nt+"%, "+it+")":"hsl("+et+", "+tt+"%, "+nt+"%)";var _,et,tt,nt,it},_e.prototype.toHsv=function(){return _=h(this.rgba),{h:n(_.h),s:n(_.s),v:n(_.v),a:n(_.a,3)};var _},_e.prototype.invert=function(){return w$1({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},_e.prototype.saturate=function(_){return _===void 0&&(_=.1),w$1(M(this.rgba,_))},_e.prototype.desaturate=function(_){return _===void 0&&(_=.1),w$1(M(this.rgba,-_))},_e.prototype.grayscale=function(){return w$1(M(this.rgba,-1))},_e.prototype.lighten=function(_){return _===void 0&&(_=.1),w$1($(this.rgba,_))},_e.prototype.darken=function(_){return _===void 0&&(_=.1),w$1($(this.rgba,-_))},_e.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},_e.prototype.alpha=function(_){return typeof _=="number"?w$1({r:(et=this.rgba).r,g:et.g,b:et.b,a:_}):n(this.rgba.a,3);var et},_e.prototype.hue=function(_){var et=c(this.rgba);return typeof _=="number"?w$1({h:_,s:et.s,l:et.l,a:et.a}):n(et.h)},_e.prototype.isEqual=function(_){return this.toHex()===w$1(_).toHex()},_e}(),w$1=function(_e){return _e instanceof j?_e:new j(_e)},S=[],k$1=function(_e){_e.forEach(function(_){S.indexOf(_)<0&&(_(j,y),S.push(_))})};function namesPlugin(_e,_){var et={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},tt={};for(var nt in et)tt[et[nt]]=nt;var it={};_e.prototype.toName=function(at){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var ot,st,dt=tt[this.toHex()];if(dt)return dt;if(at!=null&&at.closest){var ht=this.toRgb(),ct=1/0,ut="black";if(!it.length)for(var ft in et)it[ft]=new _e(et[ft]).toRgb();for(var gt in et){var mt=(ot=ht,st=it[gt],Math.pow(ot.r-st.r,2)+Math.pow(ot.g-st.g,2)+Math.pow(ot.b-st.b,2));mt<ct&&(ct=mt,ut=gt)}return ut}},_.string.push([function(at){var ot=at.toLowerCase(),st=ot==="transparent"?"#0000":et[ot];return st?new _e(st).toRgb():null},"name"])}k$1([namesPlugin]);const _Color=class Co{constructor(_=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=_}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(_){return this.value=_,this}set value(_){if(_ instanceof Co)this._value=this.cloneSource(_._value),this._int=_._int,this._components.set(_._components);else{if(_===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,_))&&(this.normalize(_),this._value=this.cloneSource(_))}}get value(){return this._value}cloneSource(_){return typeof _=="string"||typeof _=="number"||_ instanceof Number||_===null?_:Array.isArray(_)||ArrayBuffer.isView(_)?_.slice(0):typeof _=="object"&&_!==null?{..._}:_}isSourceEqual(_,et){const tt=typeof _;if(tt!==typeof et)return!1;if(tt==="number"||tt==="string"||_ instanceof Number)return _===et;if(Array.isArray(_)&&Array.isArray(et)||ArrayBuffer.isView(_)&&ArrayBuffer.isView(et))return _.length!==et.length?!1:_.every((nt,it)=>nt===et[it]);if(_!==null&&et!==null){const nt=Object.keys(_),it=Object.keys(et);return nt.length!==it.length?!1:nt.every(at=>_[at]===et[at])}return _===et}toRgba(){const[_,et,tt,nt]=this._components;return{r:_,g:et,b:tt,a:nt}}toRgb(){const[_,et,tt]=this._components;return{r:_,g:et,b:tt}}toRgbaString(){const[_,et,tt]=this.toUint8RgbArray();return`rgba(${_},${et},${tt},${this.alpha})`}toUint8RgbArray(_){const[et,tt,nt]=this._components;return _=_??[],_[0]=Math.round(et*255),_[1]=Math.round(tt*255),_[2]=Math.round(nt*255),_}toRgbArray(_){_=_??[];const[et,tt,nt]=this._components;return _[0]=et,_[1]=tt,_[2]=nt,_}toNumber(){return this._int}toLittleEndianNumber(){const _=this._int;return(_>>16)+(_&65280)+((_&255)<<16)}multiply(_){const[et,tt,nt,it]=Co.temp.setValue(_)._components;return this._components[0]*=et,this._components[1]*=tt,this._components[2]*=nt,this._components[3]*=it,this.refreshInt(),this._value=null,this}premultiply(_,et=!0){return et&&(this._components[0]*=_,this._components[1]*=_,this._components[2]*=_),this._components[3]=_,this.refreshInt(),this._value=null,this}toPremultiplied(_,et=!0){if(_===1)return(255<<24)+this._int;if(_===0)return et?0:this._int;let tt=this._int>>16&255,nt=this._int>>8&255,it=this._int&255;return et&&(tt=tt*_+.5|0,nt=nt*_+.5|0,it=it*_+.5|0),(_*255<<24)+(tt<<16)+(nt<<8)+it}toHex(){const _=this._int.toString(16);return`#${"000000".substring(0,6-_.length)+_}`}toHexa(){const _=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-_.length)+_}setAlpha(_){return this._components[3]=this._clamp(_),this}round(_){const[et,tt,nt]=this._components;return this._components[0]=Math.round(et*_)/_,this._components[1]=Math.round(tt*_)/_,this._components[2]=Math.round(nt*_)/_,this.refreshInt(),this._value=null,this}toArray(_){_=_??[];const[et,tt,nt,it]=this._components;return _[0]=et,_[1]=tt,_[2]=nt,_[3]=it,_}normalize(_){let et,tt,nt,it;if((typeof _=="number"||_ instanceof Number)&&_>=0&&_<=16777215){const at=_;et=(at>>16&255)/255,tt=(at>>8&255)/255,nt=(at&255)/255,it=1}else if((Array.isArray(_)||_ instanceof Float32Array)&&_.length>=3&&_.length<=4)_=this._clamp(_),[et,tt,nt,it=1]=_;else if((_ instanceof Uint8Array||_ instanceof Uint8ClampedArray)&&_.length>=3&&_.length<=4)_=this._clamp(_,0,255),[et,tt,nt,it=255]=_,et/=255,tt/=255,nt/=255,it/=255;else if(typeof _=="string"||typeof _=="object"){if(typeof _=="string"){const ot=Co.HEX_PATTERN.exec(_);ot&&(_=`#${ot[2]}`)}const at=w$1(_);at.isValid()&&({r:et,g:tt,b:nt,a:it}=at.rgba,et/=255,tt/=255,nt/=255)}if(et!==void 0)this._components[0]=et,this._components[1]=tt,this._components[2]=nt,this._components[3]=it,this.refreshInt();else throw new Error(`Unable to convert color ${_}`)}refreshInt(){this._clamp(this._components);const[_,et,tt]=this._components;this._int=(_*255<<16)+(et*255<<8)+(tt*255|0)}_clamp(_,et=0,tt=1){return typeof _=="number"?Math.min(Math.max(_,et),tt):(_.forEach((nt,it)=>{_[it]=Math.min(Math.max(nt,et),tt)}),_)}};_Color.shared=new _Color,_Color.temp=new _Color,_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color=_Color;function hex2string(_e){return deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Color.shared.setValue(_e).toHex()}function rgb2hex(_e){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Color.shared.setValue(_e).toNumber()}function mapPremultipliedBlendModes(){const _e=[],_=[];for(let tt=0;tt<32;tt++)_e[tt]=tt,_[tt]=tt;_e[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,_e[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,_e[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,_[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,_[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,_[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const et=[];return et.push(_),et.push(_e),et}const premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(_e,_){return premultiplyBlendMode[_?1:0][_e]}function createIndicesForQuads(_e,_=null){const et=_e*6;if(_=_||new Uint16Array(et),_.length!==et)throw new Error(`Out buffer length is incorrect, got ${_.length} and expected ${et}`);for(let tt=0,nt=0;tt<et;tt+=6,nt+=4)_[tt+0]=nt+0,_[tt+1]=nt+1,_[tt+2]=nt+2,_[tt+3]=nt+0,_[tt+4]=nt+2,_[tt+5]=nt+3;return _}function getBufferType(_e){if(_e.BYTES_PER_ELEMENT===4)return _e instanceof Float32Array?"Float32Array":_e instanceof Uint32Array?"Uint32Array":"Int32Array";if(_e.BYTES_PER_ELEMENT===2){if(_e instanceof Uint16Array)return"Uint16Array"}else if(_e.BYTES_PER_ELEMENT===1&&_e instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(_e){return _e+=_e===0?1:0,--_e,_e|=_e>>>1,_e|=_e>>>2,_e|=_e>>>4,_e|=_e>>>8,_e|=_e>>>16,_e+1}function isPow2(_e){return!(_e&_e-1)&&!!_e}function log2(_e){let _=(_e>65535?1:0)<<4;_e>>>=_;let et=(_e>255?1:0)<<3;return _e>>>=et,_|=et,et=(_e>15?1:0)<<2,_e>>>=et,_|=et,et=(_e>3?1:0)<<1,_e>>>=et,_|=et,_|_e>>1}function removeItems(_e,_,et){const tt=_e.length;let nt;if(_>=tt||et===0)return;et=_+et>tt?tt-_:et;const it=tt-et;for(nt=_;nt<it;++nt)_e[nt]=_e[nt+et];_e.length=it}function sign(_e){return _e===0?0:_e<0?-1:1}let nextUid=0;function uid(){return++nextUid}const _BoundingBox=class{constructor(_e,_,et,tt){this.left=_e,this.top=_,this.right=et,this.bottom=tt}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};_BoundingBox.EMPTY=new _BoundingBox(0,0,0,0);let BoundingBox=_BoundingBox;const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);function destroyTextureCache(){let _e;for(_e in TextureCache)TextureCache[_e].destroy();for(_e in BaseTextureCache)BaseTextureCache[_e].destroy()}function clearTextureCache(){let _e;for(_e in TextureCache)delete TextureCache[_e];for(_e in BaseTextureCache)delete BaseTextureCache[_e]}class CanvasRenderTarget{constructor(_,et,tt){this._canvas=settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=tt||settings.RESOLUTION,this.resize(_,et)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(_,et){this._checkDestroyed(),this._canvas.width=Math.round(_*this.resolution),this._canvas.height=Math.round(et*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(_){this._checkDestroyed(),this._canvas.width=Math.round(_)}get height(){return this._checkDestroyed(),this._canvas.height}set height(_){this._checkDestroyed(),this._canvas.height=Math.round(_)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function checkRow(_e,_,et){for(let tt=0,nt=4*et*_;tt<_;++tt,nt+=4)if(_e[nt+3]!==0)return!1;return!0}function checkColumn(_e,_,et,tt,nt){const it=4*_;for(let at=tt,ot=tt*it+4*et;at<=nt;++at,ot+=it)if(_e[ot+3]!==0)return!1;return!0}function getCanvasBoundingBox(_e){const{width:_,height:et}=_e,tt=_e.getContext("2d",{willReadFrequently:!0});if(tt===null)throw new TypeError("Failed to get canvas 2D context");const nt=tt.getImageData(0,0,_,et).data;let it=0,at=0,ot=_-1,st=et-1;for(;at<et&&checkRow(nt,_,at);)++at;if(at===et)return BoundingBox.EMPTY;for(;checkRow(nt,_,st);)--st;for(;checkColumn(nt,_,it,at,st);)++it;for(;checkColumn(nt,_,ot,at,st);)--ot;return++ot,++st,new BoundingBox(it,at,ot,st)}function trimCanvas(_e){const _=getCanvasBoundingBox(_e),{width:et,height:tt}=_;let nt=null;if(!_.isEmpty()){const it=_e.getContext("2d");if(it===null)throw new TypeError("Failed to get canvas 2D context");nt=it.getImageData(_.left,_.top,et,tt)}return{width:et,height:tt,data:nt}}function determineCrossOrigin(_e,_=globalThis.location){if(_e.startsWith("data:"))return"";_=_||globalThis.location;const et=new URL(_e,document.baseURI);return et.hostname!==_.hostname||et.port!==_.port||et.protocol!==_.protocol?"anonymous":""}function getResolutionOfUrl(_e,_=1){var tt;const et=(tt=settings.RETINA_PREFIX)==null?void 0:tt.exec(_e);return et?parseFloat(et[1]):_}var ExtensionType=(_e=>(_e.Renderer="renderer",_e.Application="application",_e.RendererSystem="renderer-webgl-system",_e.RendererPlugin="renderer-webgl-plugin",_e.CanvasRendererSystem="renderer-canvas-system",_e.CanvasRendererPlugin="renderer-canvas-plugin",_e.Asset="asset",_e.LoadParser="load-parser",_e.ResolveParser="resolve-parser",_e.CacheParser="cache-parser",_e.DetectionParser="detection-parser",_e))(ExtensionType||{});const normalizeExtension=_e=>{if(typeof _e=="function"||typeof _e=="object"&&_e.extension){if(!_e.extension)throw new Error("Extension class must have an extension object");_e={...typeof _e.extension!="object"?{type:_e.extension}:_e.extension,ref:_e}}if(typeof _e=="object")_e={..._e};else throw new Error("Invalid extension type");return typeof _e.type=="string"&&(_e.type=[_e.type]),_e},normalizePriority=(_e,_)=>normalizeExtension(_e).priority??_,extensions$2={_addHandlers:{},_removeHandlers:{},_queue:{},remove(..._e){return _e.map(normalizeExtension).forEach(_=>{_.type.forEach(et=>{var tt,nt;return(nt=(tt=this._removeHandlers)[et])==null?void 0:nt.call(tt,_)})}),this},add(..._e){return _e.map(normalizeExtension).forEach(_=>{_.type.forEach(et=>{var it,at;const tt=this._addHandlers,nt=this._queue;tt[et]?(it=tt[et])==null||it.call(tt,_):(nt[et]=nt[et]||[],(at=nt[et])==null||at.push(_))})}),this},handle(_e,_,et){var at;const tt=this._addHandlers,nt=this._removeHandlers;if(tt[_e]||nt[_e])throw new Error(`Extension type ${_e} already has a handler`);tt[_e]=_,nt[_e]=et;const it=this._queue;return it[_e]&&((at=it[_e])==null||at.forEach(ot=>_(ot)),delete it[_e]),this},handleByMap(_e,_){return this.handle(_e,et=>{et.name&&(_[et.name]=et.ref)},et=>{et.name&&delete _[et.name]})},handleByList(_e,_,et=-1){return this.handle(_e,tt=>{_.includes(tt.ref)||(_.push(tt.ref),_.sort((nt,it)=>normalizePriority(it,et)-normalizePriority(nt,et)))},tt=>{const nt=_.indexOf(tt.ref);nt!==-1&&_.splice(nt,1)})}};class ViewableBuffer{constructor(_){typeof _=="number"?this.rawBinaryData=new ArrayBuffer(_):_ instanceof Uint8Array?this.rawBinaryData=_.buffer:this.rawBinaryData=_,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(_){return this[`${_}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(_){switch(_){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${_} isn't a valid view type`)}}}const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(_e){let _="";for(let et=0;et<_e;++et)et>0&&(_+=`
else `),et<_e-1&&(_+=`if(test == ${et}.0){}`);return _}function checkMaxIfStatementsInShader(_e,_){if(_e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const et=_.createShader(_.FRAGMENT_SHADER);for(;;){const tt=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(_e));if(_.shaderSource(et,tt),_.compileShader(et),!_.getShaderParameter(et,_.COMPILE_STATUS))_e=_e/2|0;else break}return _e}const BLEND$1=0,OFFSET$2=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(_){!!(this.data&1<<BLEND$1)!==_&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$2)}set offsets(_){!!(this.data&1<<OFFSET$2)!==_&&(this.data^=1<<OFFSET$2)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(_){!!(this.data&1<<CULLING$1)!==_&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(_){!!(this.data&1<<DEPTH_TEST$1)!==_&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(_){!!(this.data&1<<DEPTH_MASK$1)!==_&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(_){!!(this.data&1<<WINDING$1)!==_&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(_){this.blend=_!==BLEND_MODES.NONE,this._blendMode=_}get polygonOffset(){return this._polygonOffset}set polygonOffset(_){this.offsets=!!_,this._polygonOffset=_}static for2d(){const _=new State;return _.depthTest=!1,_.blend=!0,_}}State.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const INSTALLED=[];function autoDetectResource(_e,_){if(!_e)return null;let et="";if(typeof _e=="string"){const tt=/\.(\w{3,4})(?:$|\?|#)/i.exec(_e);tt&&(et=tt[1].toLowerCase())}for(let tt=INSTALLED.length-1;tt>=0;--tt){const nt=INSTALLED[tt];if(nt.test&&nt.test(_e,et))return new nt(_e,_)}throw new Error("Unrecognized source type to auto-detect Resource")}class Runner{constructor(_){this.items=[],this._name=_,this._aliasCount=0}emit(_,et,tt,nt,it,at,ot,st){if(arguments.length>8)throw new Error("max arguments reached");const{name:dt,items:ht}=this;this._aliasCount++;for(let ct=0,ut=ht.length;ct<ut;ct++)ht[ct][dt](_,et,tt,nt,it,at,ot,st);return ht===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(_){return _[this._name]&&(this.ensureNonAliasedItems(),this.remove(_),this.items.push(_)),this}remove(_){const et=this.items.indexOf(_);return et!==-1&&(this.ensureNonAliasedItems(),this.items.splice(et,1)),this}contains(_){return this.items.includes(_)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});class Resource{constructor(_=0,et=0){this._width=_,this._height=et,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(_){this.onResize.add(_),this.onUpdate.add(_),this.onError.add(_),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(_){this.onResize.remove(_),this.onUpdate.remove(_),this.onError.remove(_)}resize(_,et){(_!==this._width||et!==this._height)&&(this._width=_,this._height=et,this.onResize.emit(_,et))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(_,et,tt){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(_,et){return!1}}class BufferResource extends Resource{constructor(_,et){const{width:tt,height:nt}=et||{};if(!tt||!nt)throw new Error("BufferResource width or height invalid");super(tt,nt),this.data=_,this.unpackAlignment=et.unpackAlignment??4}upload(_,et,tt){const nt=_.gl;nt.pixelStorei(nt.UNPACK_ALIGNMENT,this.unpackAlignment),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.alphaMode===ALPHA_MODES.UNPACK);const it=et.realWidth,at=et.realHeight;return tt.width===it&&tt.height===at?nt.texSubImage2D(et.target,0,0,0,it,at,et.format,tt.type,this.data):(tt.width=it,tt.height=at,nt.texImage2D(et.target,0,tt.internalFormat,it,at,0,et.format,tt.type,this.data)),!0}dispose(){this.data=null}static test(_){return _===null||_ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class ba extends EventEmitter{constructor(_=null,et=null){super(),et=Object.assign({},ba.defaultOptions,et);const{alphaMode:tt,mipmap:nt,anisotropicLevel:it,scaleMode:at,width:ot,height:st,wrapMode:dt,format:ht,type:ct,target:ut,resolution:ft,resourceOptions:gt}=et;_&&!(_ instanceof Resource)&&(_=autoDetectResource(_,gt),_.internal=!0),this.resolution=ft||settings.RESOLUTION,this.width=Math.round((ot||0)*this.resolution)/this.resolution,this.height=Math.round((st||0)*this.resolution)/this.resolution,this._mipmap=nt,this.anisotropicLevel=it,this._wrapMode=dt,this._scaleMode=at,this.format=ht,this.type=ct,this.target=ut,this.alphaMode=tt,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=ot>0&&st>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(_)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(_){this._mipmap!==_&&(this._mipmap=_,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(_){this._scaleMode!==_&&(this._scaleMode=_,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(_){this._wrapMode!==_&&(this._wrapMode=_,this.dirtyStyleId++)}setStyle(_,et){let tt;return _!==void 0&&_!==this.scaleMode&&(this.scaleMode=_,tt=!0),et!==void 0&&et!==this.mipmap&&(this.mipmap=et,tt=!0),tt&&this.dirtyStyleId++,this}setSize(_,et,tt){return tt=tt||this.resolution,this.setRealSize(_*tt,et*tt,tt)}setRealSize(_,et,tt){return this.resolution=tt||this.resolution,this.width=Math.round(_)/this.resolution,this.height=Math.round(et)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(_){const et=this.resolution;return et===_?this:(this.resolution=_,this.valid&&(this.width=Math.round(this.width*et)/_,this.height=Math.round(this.height*et)/_,this.emit("update",this)),this._refreshPOT(),this)}setResource(_){if(this.resource===_)return this;if(this.resource)throw new Error("Resource can be set only once");return _.bind(this),this.resource=_,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(_){this.emit("error",this,_)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),ba.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(_,et,tt=settings.STRICT_TEXTURE_CACHE){const nt=typeof _=="string";let it=null;if(nt)it=_;else{if(!_._pixiId){const ot=(et==null?void 0:et.pixiIdPrefix)||"pixiid";_._pixiId=`${ot}_${uid()}`}it=_._pixiId}let at=BaseTextureCache[it];if(nt&&tt&&!at)throw new Error(`The cacheId "${it}" does not exist in BaseTextureCache.`);return at||(at=new ba(_,et),at.cacheId=it,ba.addToCache(at,it)),at}static fromBuffer(_,et,tt,nt){_=_||new Float32Array(et*tt*4);const it=new BufferResource(_,{width:et,height:tt,...nt==null?void 0:nt.resourceOptions});let at,ot;return _ instanceof Float32Array?(at=FORMATS.RGBA,ot=TYPES.FLOAT):_ instanceof Int32Array?(at=FORMATS.RGBA_INTEGER,ot=TYPES.INT):_ instanceof Uint32Array?(at=FORMATS.RGBA_INTEGER,ot=TYPES.UNSIGNED_INT):_ instanceof Int16Array?(at=FORMATS.RGBA_INTEGER,ot=TYPES.SHORT):_ instanceof Uint16Array?(at=FORMATS.RGBA_INTEGER,ot=TYPES.UNSIGNED_SHORT):_ instanceof Int8Array?(at=FORMATS.RGBA,ot=TYPES.BYTE):(at=FORMATS.RGBA,ot=TYPES.UNSIGNED_BYTE),it.internal=!0,new ba(it,Object.assign({},defaultBufferOptions,{type:ot,format:at},nt))}static addToCache(_,et){et&&(_.textureCacheIds.includes(et)||_.textureCacheIds.push(et),BaseTextureCache[et]&&BaseTextureCache[et]!==_&&console.warn(`BaseTexture added to the cache with an id [${et}] that already had an entry`),BaseTextureCache[et]=_)}static removeFromCache(_){if(typeof _=="string"){const et=BaseTextureCache[_];if(et){const tt=et.textureCacheIds.indexOf(_);return tt>-1&&et.textureCacheIds.splice(tt,1),delete BaseTextureCache[_],et}}else if(_!=null&&_.textureCacheIds){for(let et=0;et<_.textureCacheIds.length;++et)delete BaseTextureCache[_.textureCacheIds[et]];return _.textureCacheIds.length=0,_}return null}};_BaseTexture.defaultOptions={mipmap:MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:SCALE_MODES.LINEAR,wrapMode:WRAP_MODES.CLAMP,alphaMode:ALPHA_MODES.UNPACK,target:TARGETS.TEXTURE_2D,format:FORMATS.RGBA,type:TYPES.UNSIGNED_BYTE},_BaseTexture._globalBatch=0;let BaseTexture=_BaseTexture;class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}let UID$4=0,Buffer$1=class Sl{constructor(_,et=!0,tt=!1){this.data=_||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=tt,this.static=et,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(_){_ instanceof Array&&(_=new Float32Array(_)),this.data=_||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(_){this.type=_?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(_){return _ instanceof Array&&(_=new Float32Array(_)),new Sl(_)}};class Attribute{constructor(_,et=0,tt=!1,nt=TYPES.FLOAT,it,at,ot,st=1){this.buffer=_,this.size=et,this.normalized=tt,this.type=nt,this.stride=it,this.start=at,this.instance=ot,this.divisor=st}destroy(){this.buffer=null}static from(_,et,tt,nt,it){return new Attribute(_,et,tt,nt,it)}}const map$3={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(_e,_){let et=0,tt=0;const nt={};for(let st=0;st<_e.length;st++)tt+=_[st],et+=_e[st].length;const it=new ArrayBuffer(et*4);let at=null,ot=0;for(let st=0;st<_e.length;st++){const dt=_[st],ht=_e[st],ct=getBufferType(ht);nt[ct]||(nt[ct]=new map$3[ct](it)),at=nt[ct];for(let ut=0;ut<ht.length;ut++){const ft=(ut/dt|0)*tt+ot,gt=ut%dt;at[ft+gt]=ht[ut]}ot+=dt}return new Float32Array(it)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map$2={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(_=[],et={}){this.buffers=_,this.indexBuffer=null,this.attributes=et,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(_,et,tt=0,nt=!1,it,at,ot,st=!1){if(!et)throw new Error("You must pass a buffer when creating an attribute");et instanceof Buffer$1||(et instanceof Array&&(et=new Float32Array(et)),et=new Buffer$1(et));const dt=_.split("|");if(dt.length>1){for(let ct=0;ct<dt.length;ct++)this.addAttribute(dt[ct],et,tt,nt,it);return this}let ht=this.buffers.indexOf(et);return ht===-1&&(this.buffers.push(et),ht=this.buffers.length-1),this.attributes[_]=new Attribute(ht,tt,nt,it,at,ot,st),this.instanced=this.instanced||st,this}getAttribute(_){return this.attributes[_]}getBuffer(_){return this.buffers[this.getAttribute(_).buffer]}addIndex(_){return _ instanceof Buffer$1||(_ instanceof Array&&(_=new Uint16Array(_)),_=new Buffer$1(_)),_.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=_,this.buffers.includes(_)||this.buffers.push(_),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const _=[],et=[],tt=new Buffer$1;let nt;for(nt in this.attributes){const it=this.attributes[nt],at=this.buffers[it.buffer];_.push(at.data),et.push(it.size*byteSizeMap$1[it.type]/4),it.buffer=0}for(tt.data=interleaveTypedArrays(_,et),nt=0;nt<this.buffers.length;nt++)this.buffers[nt]!==this.indexBuffer&&this.buffers[nt].destroy();return this.buffers=[tt],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const _ in this.attributes){const et=this.attributes[_];return this.buffers[et.buffer].data.length/(et.stride/4||et.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const _=new Geometry;for(let et=0;et<this.buffers.length;et++)_.buffers[et]=new Buffer$1(this.buffers[et].data.slice(0));for(const et in this.attributes){const tt=this.attributes[et];_.attributes[et]=new Attribute(tt.buffer,tt.size,tt.normalized,tt.type,tt.stride,tt.start,tt.instance)}return this.indexBuffer&&(_.indexBuffer=_.buffers[this.buffers.indexOf(this.indexBuffer)],_.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),_}static merge(_){const et=new Geometry,tt=[],nt=[],it=[];let at;for(let ot=0;ot<_.length;ot++){at=_[ot];for(let st=0;st<at.buffers.length;st++)nt[st]=nt[st]||0,nt[st]+=at.buffers[st].data.length,it[st]=0}for(let ot=0;ot<at.buffers.length;ot++)tt[ot]=new map$2[getBufferType(at.buffers[ot].data)](nt[ot]),et.buffers[ot]=new Buffer$1(tt[ot]);for(let ot=0;ot<_.length;ot++){at=_[ot];for(let st=0;st<at.buffers.length;st++)tt[st].set(at.buffers[st].data,it[st]),it[st]+=at.buffers[st].data.length}if(et.attributes=at.attributes,at.indexBuffer){et.indexBuffer=et.buffers[at.buffers.indexOf(at.indexBuffer)],et.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let ot=0,st=0,dt=0,ht=0;for(let ct=0;ct<at.buffers.length;ct++)if(at.buffers[ct]!==at.indexBuffer){ht=ct;break}for(const ct in at.attributes){const ut=at.attributes[ct];(ut.buffer|0)===ht&&(st+=ut.size*byteSizeMap$1[ut.type]/4)}for(let ct=0;ct<_.length;ct++){const ut=_[ct].indexBuffer.data;for(let ft=0;ft<ut.length;ft++)et.indexBuffer.data[ft+dt]+=ot;ot+=_[ct].buffers[ht].data.length/st,dt+=ut.length}}return et}}class BatchGeometry extends Geometry{constructor(_=!1){super(),this._buffer=new Buffer$1(null,_,!1),this._indexBuffer=new Buffer$1(null,_,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}const PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(_e=>(_e[_e.POLY=0]="POLY",_e[_e.RECT=1]="RECT",_e[_e.CIRC=2]="CIRC",_e[_e.ELIP=3]="ELIP",_e[_e.RREC=4]="RREC",_e))(SHAPES||{});let Point$1=class Tl{constructor(_=0,et=0){this.x=0,this.y=0,this.x=_,this.y=et}clone(){return new Tl(this.x,this.y)}copyFrom(_){return this.set(_.x,_.y),this}copyTo(_){return _.set(this.x,this.y),_}equals(_){return _.x===this.x&&_.y===this.y}set(_=0,et=_){return this.x=_,this.y=et,this}};Point$1.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const tempPoints$1=[new Point$1,new Point$1,new Point$1,new Point$1];class Rectangle{constructor(_=0,et=0,tt=0,nt=0){this.x=Number(_),this.y=Number(et),this.width=Number(tt),this.height=Number(nt),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(_){return this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height,this}copyTo(_){return _.x=this.x,_.y=this.y,_.width=this.width,_.height=this.height,_}contains(_,et){return this.width<=0||this.height<=0?!1:_>=this.x&&_<this.x+this.width&&et>=this.y&&et<this.y+this.height}intersects(_,et){if(!et){const Ct=this.x<_.x?_.x:this.x;if((this.right>_.right?_.right:this.right)<=Ct)return!1;const Et=this.y<_.y?_.y:this.y;return(this.bottom>_.bottom?_.bottom:this.bottom)>Et}const tt=this.left,nt=this.right,it=this.top,at=this.bottom;if(nt<=tt||at<=it)return!1;const ot=tempPoints$1[0].set(_.left,_.top),st=tempPoints$1[1].set(_.left,_.bottom),dt=tempPoints$1[2].set(_.right,_.top),ht=tempPoints$1[3].set(_.right,_.bottom);if(dt.x<=ot.x||st.y<=ot.y)return!1;const ct=Math.sign(et.a*et.d-et.b*et.c);if(ct===0||(et.apply(ot,ot),et.apply(st,st),et.apply(dt,dt),et.apply(ht,ht),Math.max(ot.x,st.x,dt.x,ht.x)<=tt||Math.min(ot.x,st.x,dt.x,ht.x)>=nt||Math.max(ot.y,st.y,dt.y,ht.y)<=it||Math.min(ot.y,st.y,dt.y,ht.y)>=at))return!1;const ut=ct*(st.y-ot.y),ft=ct*(ot.x-st.x),gt=ut*tt+ft*it,mt=ut*nt+ft*it,vt=ut*tt+ft*at,yt=ut*nt+ft*at;if(Math.max(gt,mt,vt,yt)<=ut*ot.x+ft*ot.y||Math.min(gt,mt,vt,yt)>=ut*ht.x+ft*ht.y)return!1;const bt=ct*(ot.y-dt.y),_t=ct*(dt.x-ot.x),xt=bt*tt+_t*it,St=bt*nt+_t*it,Tt=bt*tt+_t*at,wt=bt*nt+_t*at;return!(Math.max(xt,St,Tt,wt)<=bt*ot.x+_t*ot.y||Math.min(xt,St,Tt,wt)>=bt*ht.x+_t*ht.y)}pad(_=0,et=_){return this.x-=_,this.y-=et,this.width+=_*2,this.height+=et*2,this}fit(_){const et=Math.max(this.x,_.x),tt=Math.min(this.x+this.width,_.x+_.width),nt=Math.max(this.y,_.y),it=Math.min(this.y+this.height,_.y+_.height);return this.x=et,this.width=Math.max(tt-et,0),this.y=nt,this.height=Math.max(it-nt,0),this}ceil(_=1,et=.001){const tt=Math.ceil((this.x+this.width-et)*_)/_,nt=Math.ceil((this.y+this.height-et)*_)/_;return this.x=Math.floor((this.x+et)*_)/_,this.y=Math.floor((this.y+et)*_)/_,this.width=tt-this.x,this.height=nt-this.y,this}enlarge(_){const et=Math.min(this.x,_.x),tt=Math.max(this.x+this.width,_.x+_.width),nt=Math.min(this.y,_.y),it=Math.max(this.y+this.height,_.y+_.height);return this.x=et,this.width=tt-et,this.y=nt,this.height=it-nt,this}}Rectangle.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let Circle$1=class wl{constructor(_=0,et=0,tt=0){this.x=_,this.y=et,this.radius=tt,this.type=SHAPES.CIRC}clone(){return new wl(this.x,this.y,this.radius)}contains(_,et){if(this.radius<=0)return!1;const tt=this.radius*this.radius;let nt=this.x-_,it=this.y-et;return nt*=nt,it*=it,nt+it<=tt}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}};Circle$1.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};let Ellipse$1=class El{constructor(_=0,et=0,tt=0,nt=0){this.x=_,this.y=et,this.width=tt,this.height=nt,this.type=SHAPES.ELIP}clone(){return new El(this.x,this.y,this.width,this.height)}contains(_,et){if(this.width<=0||this.height<=0)return!1;let tt=(_-this.x)/this.width,nt=(et-this.y)/this.height;return tt*=tt,nt*=nt,tt+nt<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}};Ellipse$1.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let Polygon$1=class Cl{constructor(..._){let et=Array.isArray(_[0])?_[0]:_;if(typeof et[0]!="number"){const tt=[];for(let nt=0,it=et.length;nt<it;nt++)tt.push(et[nt].x,et[nt].y);et=tt}this.points=et,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const _=this.points.slice(),et=new Cl(_);return et.closeStroke=this.closeStroke,et}contains(_,et){let tt=!1;const nt=this.points.length/2;for(let it=0,at=nt-1;it<nt;at=it++){const ot=this.points[it*2],st=this.points[it*2+1],dt=this.points[at*2],ht=this.points[at*2+1];st>et!=ht>et&&_<(dt-ot)*((et-st)/(ht-st))+ot&&(tt=!tt)}return tt}};Polygon$1.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((_e,_)=>`${_e}, ${_}`,"")}]`};class RoundedRectangle{constructor(_=0,et=0,tt=0,nt=0,it=20){this.x=_,this.y=et,this.width=tt,this.height=nt,this.radius=it,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(_,et){if(this.width<=0||this.height<=0)return!1;if(_>=this.x&&_<=this.x+this.width&&et>=this.y&&et<=this.y+this.height){const tt=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(et>=this.y+tt&&et<=this.y+this.height-tt||_>=this.x+tt&&_<=this.x+this.width-tt)return!0;let nt=_-(this.x+tt),it=et-(this.y+tt);const at=tt*tt;if(nt*nt+it*it<=at||(nt=_-(this.x+this.width-tt),nt*nt+it*it<=at)||(it=et-(this.y+this.height-tt),nt*nt+it*it<=at)||(nt=_-(this.x+tt),nt*nt+it*it<=at))return!0}return!1}}RoundedRectangle.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Matrix{constructor(_=1,et=0,tt=0,nt=1,it=0,at=0){this.array=null,this.a=_,this.b=et,this.c=tt,this.d=nt,this.tx=it,this.ty=at}fromArray(_){this.a=_[0],this.b=_[1],this.c=_[3],this.d=_[4],this.tx=_[2],this.ty=_[5]}set(_,et,tt,nt,it,at){return this.a=_,this.b=et,this.c=tt,this.d=nt,this.tx=it,this.ty=at,this}toArray(_,et){this.array||(this.array=new Float32Array(9));const tt=et||this.array;return _?(tt[0]=this.a,tt[1]=this.b,tt[2]=0,tt[3]=this.c,tt[4]=this.d,tt[5]=0,tt[6]=this.tx,tt[7]=this.ty,tt[8]=1):(tt[0]=this.a,tt[1]=this.c,tt[2]=this.tx,tt[3]=this.b,tt[4]=this.d,tt[5]=this.ty,tt[6]=0,tt[7]=0,tt[8]=1),tt}apply(_,et){et=et||new Point$1;const tt=_.x,nt=_.y;return et.x=this.a*tt+this.c*nt+this.tx,et.y=this.b*tt+this.d*nt+this.ty,et}applyInverse(_,et){et=et||new Point$1;const tt=1/(this.a*this.d+this.c*-this.b),nt=_.x,it=_.y;return et.x=this.d*tt*nt+-this.c*tt*it+(this.ty*this.c-this.tx*this.d)*tt,et.y=this.a*tt*it+-this.b*tt*nt+(-this.ty*this.a+this.tx*this.b)*tt,et}translate(_,et){return this.tx+=_,this.ty+=et,this}scale(_,et){return this.a*=_,this.d*=et,this.c*=_,this.b*=et,this.tx*=_,this.ty*=et,this}rotate(_){const et=Math.cos(_),tt=Math.sin(_),nt=this.a,it=this.c,at=this.tx;return this.a=nt*et-this.b*tt,this.b=nt*tt+this.b*et,this.c=it*et-this.d*tt,this.d=it*tt+this.d*et,this.tx=at*et-this.ty*tt,this.ty=at*tt+this.ty*et,this}append(_){const et=this.a,tt=this.b,nt=this.c,it=this.d;return this.a=_.a*et+_.b*nt,this.b=_.a*tt+_.b*it,this.c=_.c*et+_.d*nt,this.d=_.c*tt+_.d*it,this.tx=_.tx*et+_.ty*nt+this.tx,this.ty=_.tx*tt+_.ty*it+this.ty,this}setTransform(_,et,tt,nt,it,at,ot,st,dt){return this.a=Math.cos(ot+dt)*it,this.b=Math.sin(ot+dt)*it,this.c=-Math.sin(ot-st)*at,this.d=Math.cos(ot-st)*at,this.tx=_-(tt*this.a+nt*this.c),this.ty=et-(tt*this.b+nt*this.d),this}prepend(_){const et=this.tx;if(_.a!==1||_.b!==0||_.c!==0||_.d!==1){const tt=this.a,nt=this.c;this.a=tt*_.a+this.b*_.c,this.b=tt*_.b+this.b*_.d,this.c=nt*_.a+this.d*_.c,this.d=nt*_.b+this.d*_.d}return this.tx=et*_.a+this.ty*_.c+_.tx,this.ty=et*_.b+this.ty*_.d+_.ty,this}decompose(_){const et=this.a,tt=this.b,nt=this.c,it=this.d,at=_.pivot,ot=-Math.atan2(-nt,it),st=Math.atan2(tt,et),dt=Math.abs(ot+st);return dt<1e-5||Math.abs(PI_2-dt)<1e-5?(_.rotation=st,_.skew.x=_.skew.y=0):(_.rotation=0,_.skew.x=ot,_.skew.y=st),_.scale.x=Math.sqrt(et*et+tt*tt),_.scale.y=Math.sqrt(nt*nt+it*it),_.position.x=this.tx+(at.x*et+at.y*nt),_.position.y=this.ty+(at.x*tt+at.y*it),_}invert(){const _=this.a,et=this.b,tt=this.c,nt=this.d,it=this.tx,at=_*nt-et*tt;return this.a=nt/at,this.b=-et/at,this.c=-tt/at,this.d=_/at,this.tx=(tt*this.ty-nt*it)/at,this.ty=-(_*this.ty-et*it)/at,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const _=new Matrix;return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyTo(_){return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyFrom(_){return this.a=_.a,this.b=_.b,this.c=_.c,this.d=_.d,this.tx=_.tx,this.ty=_.ty,this}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}Matrix.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init$3(){for(let _e=0;_e<16;_e++){const _=[];rotationCayley.push(_);for(let et=0;et<16;et++){const tt=signum(ux[_e]*ux[et]+vx[_e]*uy[et]),nt=signum(uy[_e]*ux[et]+vy[_e]*uy[et]),it=signum(ux[_e]*vx[et]+vx[_e]*vy[et]),at=signum(uy[_e]*vx[et]+vy[_e]*vy[et]);for(let ot=0;ot<16;ot++)if(ux[ot]===tt&&uy[ot]===nt&&vx[ot]===it&&vy[ot]===at){_.push(ot);break}}}for(let _e=0;_e<16;_e++){const _=new Matrix;_.set(ux[_e],uy[_e],vx[_e],vy[_e],0,0),rotationMatrices.push(_)}}init$3();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:_e=>ux[_e],uY:_e=>uy[_e],vX:_e=>vx[_e],vY:_e=>vy[_e],inv:_e=>_e&8?_e&15:-_e&7,add:(_e,_)=>rotationCayley[_e][_],sub:(_e,_)=>rotationCayley[_e][groupD8.inv(_)],rotate180:_e=>_e^4,isVertical:_e=>(_e&3)===2,byDirection:(_e,_)=>Math.abs(_e)*2<=Math.abs(_)?_>=0?groupD8.S:groupD8.N:Math.abs(_)*2<=Math.abs(_e)?_e>0?groupD8.E:groupD8.W:_>0?_e>0?groupD8.SE:groupD8.SW:_e>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(_e,_,et=0,tt=0)=>{const nt=rotationMatrices[groupD8.inv(_)];nt.tx=et,nt.ty=tt,_e.append(nt)}};class ObservablePoint{constructor(_,et,tt=0,nt=0){this._x=tt,this._y=nt,this.cb=_,this.scope=et}clone(_=this.cb,et=this.scope){return new ObservablePoint(_,et,this._x,this._y)}set(_=0,et=_){return(this._x!==_||this._y!==et)&&(this._x=_,this._y=et,this.cb.call(this.scope)),this}copyFrom(_){return(this._x!==_.x||this._y!==_.y)&&(this._x=_.x,this._y=_.y,this.cb.call(this.scope)),this}copyTo(_){return _.set(this._x,this._y),_}equals(_){return _.x===this._x&&_.y===this._y}get x(){return this._x}set x(_){this._x!==_&&(this._x=_,this.cb.call(this.scope))}get y(){return this._y}set y(_){this._y!==_&&(this._y=_,this.cb.call(this.scope))}}ObservablePoint.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const _Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const _e=this.localTransform;this._localID!==this._currentLocalID&&(_e.a=this._cx*this.scale.x,_e.b=this._sx*this.scale.x,_e.c=this._cy*this.scale.y,_e.d=this._sy*this.scale.y,_e.tx=this.position.x-(this.pivot.x*_e.a+this.pivot.y*_e.c),_e.ty=this.position.y-(this.pivot.x*_e.b+this.pivot.y*_e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(_e){const _=this.localTransform;if(this._localID!==this._currentLocalID&&(_.a=this._cx*this.scale.x,_.b=this._sx*this.scale.x,_.c=this._cy*this.scale.y,_.d=this._sy*this.scale.y,_.tx=this.position.x-(this.pivot.x*_.a+this.pivot.y*_.c),_.ty=this.position.y-(this.pivot.x*_.b+this.pivot.y*_.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==_e._worldID){const et=_e.worldTransform,tt=this.worldTransform;tt.a=_.a*et.a+_.b*et.c,tt.b=_.a*et.b+_.b*et.d,tt.c=_.c*et.a+_.d*et.c,tt.d=_.c*et.b+_.d*et.d,tt.tx=_.tx*et.a+_.ty*et.c+et.tx,tt.ty=_.tx*et.b+_.ty*et.d+et.ty,this._parentID=_e._worldID,this._worldID++}}setFromMatrix(_e){_e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(_e){this._rotation!==_e&&(this._rotation=_e,this.updateSkew())}};_Transform.IDENTITY=new _Transform;let Transform=_Transform;Transform.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function compileShader(_e,_,et){const tt=_e.createShader(_);return _e.shaderSource(tt,et),_e.compileShader(tt),tt}function booleanArray(_e){const _=new Array(_e);for(let et=0;et<_.length;et++)_[et]=!1;return _}function defaultValue(_e,_){switch(_e){case"float":return 0;case"vec2":return new Float32Array(2*_);case"vec3":return new Float32Array(3*_);case"vec4":return new Float32Array(4*_);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*_);case"ivec3":return new Int32Array(3*_);case"ivec4":return new Int32Array(4*_);case"uvec2":return new Uint32Array(2*_);case"uvec3":return new Uint32Array(3*_);case"uvec4":return new Uint32Array(4*_);case"bool":return!1;case"bvec2":return booleanArray(2*_);case"bvec3":return booleanArray(3*_);case"bvec4":return booleanArray(4*_);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const uniformParsers=[{test:_e=>_e.type==="float"&&_e.size===1&&!_e.isArray,code:_e=>`
            if(uv["${_e}"] !== ud["${_e}"].value)
            {
                ud["${_e}"].value = uv["${_e}"]
                gl.uniform1f(ud["${_e}"].location, uv["${_e}"])
            }
            `},{test:(_e,_)=>(_e.type==="sampler2D"||_e.type==="samplerCube"||_e.type==="sampler2DArray")&&_e.size===1&&!_e.isArray&&(_==null||_.castToBaseTexture!==void 0),code:_e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${_e}"], t);

            if(ud["${_e}"].value !== t)
            {
                ud["${_e}"].value = t;
                gl.uniform1i(ud["${_e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(_e,_)=>_e.type==="mat3"&&_e.size===1&&!_e.isArray&&_.a!==void 0,code:_e=>`
            gl.uniformMatrix3fv(ud["${_e}"].location, false, uv["${_e}"].toArray(true));
            `,codeUbo:_e=>`
                var ${_e}_matrix = uv.${_e}.toArray(true);

                data[offset] = ${_e}_matrix[0];
                data[offset+1] = ${_e}_matrix[1];
                data[offset+2] = ${_e}_matrix[2];
        
                data[offset + 4] = ${_e}_matrix[3];
                data[offset + 5] = ${_e}_matrix[4];
                data[offset + 6] = ${_e}_matrix[5];
        
                data[offset + 8] = ${_e}_matrix[6];
                data[offset + 9] = ${_e}_matrix[7];
                data[offset + 10] = ${_e}_matrix[8];
            `},{test:(_e,_)=>_e.type==="vec2"&&_e.size===1&&!_e.isArray&&_.x!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${_e}"].location, v.x, v.y);
                }`,codeUbo:_e=>`
                v = uv.${_e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:_e=>_e.type==="vec2"&&_e.size===1&&!_e.isArray,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${_e}"].location, v[0], v[1]);
                }
            `},{test:(_e,_)=>_e.type==="vec4"&&_e.size===1&&!_e.isArray&&_.width!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${_e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:_e=>`
                    v = uv.${_e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(_e,_)=>_e.type==="vec4"&&_e.size===1&&!_e.isArray&&_.red!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${_e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:_e=>`
                    v = uv.${_e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(_e,_)=>_e.type==="vec3"&&_e.size===1&&!_e.isArray&&_.red!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${_e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:_e=>`
                    v = uv.${_e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:_e=>_e.type==="vec4"&&_e.size===1&&!_e.isArray,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${_e}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(_e,_){var tt;const et=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const nt in _e.uniforms){const it=_[nt];if(!it){((tt=_e.uniforms[nt])==null?void 0:tt.group)===!0&&(_e.uniforms[nt].ubo?et.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${nt}, '${nt}');
                    `):et.push(`
                        renderer.shader.syncUniformGroup(uv.${nt}, syncData);
                    `));continue}const at=_e.uniforms[nt];let ot=!1;for(let st=0;st<uniformParsers.length;st++)if(uniformParsers[st].test(it,at)){et.push(uniformParsers[st].code(nt,at)),ot=!0;break}if(!ot){const st=(it.size===1&&!it.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[it.type].replace("location",`ud["${nt}"].location`);et.push(`
            cu = ud["${nt}"];
            cv = cu.value;
            v = uv["${nt}"];
            ${st};`)}}return new Function("ud","uv","renderer","syncData",et.join(`
`))}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||context!=null&&context.isContextLost()){const _e=settings.ADAPTER.createCanvas();let _;settings.PREFER_ENV>=ENV.WEBGL2&&(_=_e.getContext("webgl2",{})),_||(_=_e.getContext("webgl",{})||_e.getContext("experimental-webgl",{}),_?_.getExtension("WEBGL_draw_buffers"):_=null),context=_}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const _e=getTestContext();if(_e&&_e.getShaderPrecisionFormat){const _=_e.getShaderPrecisionFormat(_e.FRAGMENT_SHADER,_e.HIGH_FLOAT);_&&(maxFragmentPrecision=_.precision?PRECISION.HIGH:PRECISION.MEDIUM)}}return maxFragmentPrecision}function logPrettyShaderError(_e,_){const et=_e.getShaderSource(_).split(`
`).map((dt,ht)=>`${ht}: ${dt}`),tt=_e.getShaderInfoLog(_),nt=tt.split(`
`),it={},at=nt.map(dt=>parseFloat(dt.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(dt=>dt&&!it[dt]?(it[dt]=!0,!0):!1),ot=[""];at.forEach(dt=>{et[dt-1]=`%c${et[dt-1]}%c`,ot.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const st=et.join(`
`);ot[0]=st,console.error(tt),console.groupCollapsed("click to view full shader code"),console.warn(...ot),console.groupEnd()}function logProgramError(_e,_,et,tt){_e.getProgramParameter(_,_e.LINK_STATUS)||(_e.getShaderParameter(et,_e.COMPILE_STATUS)||logPrettyShaderError(_e,et),_e.getShaderParameter(tt,_e.COMPILE_STATUS)||logPrettyShaderError(_e,tt),console.error("PixiJS Error: Could not initialize shader."),_e.getProgramInfoLog(_)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",_e.getProgramInfoLog(_)))}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(_e){return GLSL_TO_SIZE[_e]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(_e,_){if(!GL_TABLE){const et=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let tt=0;tt<et.length;++tt){const nt=et[tt];GL_TABLE[_e[nt]]=GL_TO_GLSL_TYPES[nt]}}return GL_TABLE[_]}function setPrecision(_e,_,et){if(_e.substring(0,9)!=="precision"){let tt=_;return _===PRECISION.HIGH&&et!==PRECISION.HIGH&&(tt=PRECISION.MEDIUM),`precision ${tt} float;
${_e}`}else if(et!==PRECISION.HIGH&&_e.substring(0,15)==="precision highp")return _e.replace("precision highp","precision mediump");return _e}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}let UID$2=0;const nameCache={},_Program=class xa{constructor(_,et,tt="pixi-shader",nt={}){this.extra={},this.id=UID$2++,this.vertexSrc=_||xa.defaultVertexSrc,this.fragmentSrc=et||xa.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=nt,this.vertexSrc.substring(0,8)!=="#version"&&(tt=tt.replace(/\s+/g,"-"),nameCache[tt]?(nameCache[tt]++,tt+=`-${nameCache[tt]}`):nameCache[tt]=1,this.vertexSrc=`#define SHADER_NAME ${tt}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${tt}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,xa.defaultVertexPrecision,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,xa.defaultFragmentPrecision,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$3}static get defaultFragmentSrc(){return defaultFragment$2}static from(_,et,tt){const nt=_+et;let it=ProgramCache[nt];return it||(ProgramCache[nt]=it=new xa(_,et,tt)),it}};_Program.defaultVertexPrecision=PRECISION.HIGH,_Program.defaultFragmentPrecision=isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM;let Program=_Program,UID$1=0;class UniformGroup{constructor(_,et,tt){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$1++,this.static=!!et,this.ubo=!!tt,_ instanceof Buffer$1?(this.buffer=_,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=_,this.ubo&&(this.buffer=new Buffer$1(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(_,et,tt){if(!this.ubo)this.uniforms[_]=new UniformGroup(et,tt);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(_,et,tt){return new UniformGroup(_,et,tt)}static uboFrom(_,et){return new UniformGroup(_,et??!0,!0)}}class Shader{constructor(_,et){this.uniformBindCount=0,this.program=_,et?et instanceof UniformGroup?this.uniformGroup=et:this.uniformGroup=new UniformGroup(et):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(_,et){if(et.uniforms[_])return!0;for(const tt in et.uniforms){const nt=et.uniforms[tt];if(nt.group===!0&&this.checkUniformExists(_,nt))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(_,et,tt){const nt=Program.from(_,et);return new Shader(nt,tt)}}class BatchShaderGenerator{constructor(_,et){if(this.vertexSrc=_,this.fragTemplate=et,this.programCache={},this.defaultGroupCache={},!et.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!et.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(_){if(!this.programCache[_]){const tt=new Int32Array(_);for(let it=0;it<_;it++)tt[it]=it;this.defaultGroupCache[_]=UniformGroup.from({uSamplers:tt},!0);let nt=this.fragTemplate;nt=nt.replace(/%count%/gi,`${_}`),nt=nt.replace(/%forloop%/gi,this.generateSampleSrc(_)),this.programCache[_]=new Program(this.vertexSrc,nt)}const et={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[_]};return new Shader(this.programCache[_],et)}generateSampleSrc(_){let et="";et+=`
`,et+=`
`;for(let tt=0;tt<_;tt++)tt>0&&(et+=`
else `),tt<_-1&&(et+=`if(vTextureId < ${tt}.5)`),et+=`
{`,et+=`
	color = texture2D(uSamplers[${tt}], vTextureCoord);`,et+=`
}`;return et+=`
`,et+=`
`,et}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let _=0;_<this.count;_++)this.elements[_]=null;this.count=0}}function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(_e){let _=!0;const et=settings.ADAPTER.getNavigator();if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const tt=et.userAgent.match(/OS (\d+)_(\d+)?/);tt&&parseInt(tt[1],10)<11&&(_=!1)}if(isMobile.android.device){const tt=et.userAgent.match(/Android\s([0-9.]*)/);tt&&parseInt(tt[1],10)<7&&(_=!1)}}return _?_e:4}class ObjectRenderer{constructor(_){this.renderer=_}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(_){}}var defaultFragment$1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,defaultVertex$2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _BatchRenderer=class gn extends ObjectRenderer{constructor(_){super(_),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=gn.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),_.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(_){this._defaultMaxTextures=_}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(_){this._canUploadSameBuffer=_}get MAX_TEXTURES(){return deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentTemplate(){return defaultFragment$1}setShaderGenerator({vertex:_=gn.defaultVertexSrc,fragment:et=gn.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(_,et)}contextChange(){const _=this.renderer.gl;settings.PREFER_ENV===ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),gn.defaultMaxTextures),this.maxTextures=checkMaxIfStatementsInShader(this.maxTextures,_)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let et=0;et<this._packedGeometryPoolSize;et++)this._packedGeometries[et]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:_,_textureArrayPool:et}=gn,tt=this.size/4,nt=Math.floor(tt/this.maxTextures)+1;for(;_.length<tt;)_.push(new BatchDrawCall);for(;et.length<nt;)et.push(new BatchTextureArray);for(let it=0;it<this.maxTextures;it++)this._tempBoundTextures[it]=null}onPrerender(){this._flushId=0}render(_){_._texture.valid&&(this._vertexCount+_.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=_.vertexData.length/2,this._indexCount+=_.indices.length,this._bufferedTextures[this._bufferSize]=_._texture.baseTexture,this._bufferedElements[this._bufferSize++]=_)}buildTexturesAndDrawCalls(){const{_bufferedTextures:_,maxTextures:et}=this,tt=gn._textureArrayPool,nt=this.renderer.batch,it=this._tempBoundTextures,at=this.renderer.textureGC.count;let ot=++BaseTexture._globalBatch,st=0,dt=tt[0],ht=0;nt.copyBoundTextures(it,et);for(let ct=0;ct<this._bufferSize;++ct){const ut=_[ct];_[ct]=null,ut._batchEnabled!==ot&&(dt.count>=et&&(nt.boundArray(dt,it,ot,et),this.buildDrawCalls(dt,ht,ct),ht=ct,dt=tt[++st],++ot),ut._batchEnabled=ot,ut.touched=at,dt.elements[dt.count++]=ut)}dt.count>0&&(nt.boundArray(dt,it,ot,et),this.buildDrawCalls(dt,ht,this._bufferSize),++st,++ot);for(let ct=0;ct<it.length;ct++)it[ct]=null;BaseTexture._globalBatch=ot}buildDrawCalls(_,et,tt){const{_bufferedElements:nt,_attributeBuffer:it,_indexBuffer:at,vertexSize:ot}=this,st=gn._drawCallPool;let dt=this._dcIndex,ht=this._aIndex,ct=this._iIndex,ut=st[dt];ut.start=this._iIndex,ut.texArray=_;for(let ft=et;ft<tt;++ft){const gt=nt[ft],mt=gt._texture.baseTexture,vt=premultiplyBlendMode[mt.alphaMode?1:0][gt.blendMode];nt[ft]=null,et<ft&&ut.blend!==vt&&(ut.size=ct-ut.start,et=ft,ut=st[++dt],ut.texArray=_,ut.start=ct),this.packInterleavedGeometry(gt,it,at,ht,ct),ht+=gt.vertexData.length/2*ot,ct+=gt.indices.length,ut.blend=vt}et<tt&&(ut.size=ct-ut.start,++dt),this._dcIndex=dt,this._aIndex=ht,this._iIndex=ct}bindAndClearTexArray(_){const et=this.renderer.texture;for(let tt=0;tt<_.count;tt++)et.bind(_.elements[tt],_.ids[tt]),_.elements[tt]=null;_.count=0}updateGeometry(){const{_packedGeometries:_,_attributeBuffer:et,_indexBuffer:tt}=this;gn.canUploadSameBuffer?(_[this._flushId]._buffer.update(et.rawBinaryData),_[this._flushId]._indexBuffer.update(tt),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,_[this._flushId]=new this.geometryClass),_[this._flushId]._buffer.update(et.rawBinaryData),_[this._flushId]._indexBuffer.update(tt),this.renderer.geometry.bind(_[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const _=this._dcIndex,{gl:et,state:tt}=this.renderer,nt=gn._drawCallPool;let it=null;for(let at=0;at<_;at++){const{texArray:ot,type:st,size:dt,start:ht,blend:ct}=nt[at];it!==ot&&(it=ot,this.bindAndClearTexArray(ot)),this.state.blendMode=ct,tt.set(this.state),et.drawElements(st,dt,et.UNSIGNED_SHORT,ht*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),gn.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let _=0;_<this._packedGeometryPoolSize;_++)this._packedGeometries[_]&&this._packedGeometries[_].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(_){const et=nextPow2(Math.ceil(_/8)),tt=log2(et),nt=et*8;this._aBuffers.length<=tt&&(this._iBuffers.length=tt+1);let it=this._aBuffers[nt];return it||(this._aBuffers[nt]=it=new ViewableBuffer(nt*this.vertexSize*4)),it}getIndexBuffer(_){const et=nextPow2(Math.ceil(_/12)),tt=log2(et),nt=et*12;this._iBuffers.length<=tt&&(this._iBuffers.length=tt+1);let it=this._iBuffers[tt];return it||(this._iBuffers[tt]=it=new Uint16Array(nt)),it}packInterleavedGeometry(_,et,tt,nt,it){const{uint32View:at,float32View:ot}=et,st=nt/this.vertexSize,dt=_.uvs,ht=_.indices,ct=_.vertexData,ut=_._texture.baseTexture._batchLocation,ft=Math.min(_.worldAlpha,1),gt=Color.shared.setValue(_._tintRGB).toPremultiplied(ft,_._texture.baseTexture.alphaMode>0);for(let mt=0;mt<ct.length;mt+=2)ot[nt++]=ct[mt],ot[nt++]=ct[mt+1],ot[nt++]=dt[mt],ot[nt++]=dt[mt+1],at[nt++]=gt,ot[nt++]=ut;for(let mt=0;mt<ht.length;mt++)tt[it++]=st+ht[mt]}};_BatchRenderer.defaultBatchSize=4096,_BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin},_BatchRenderer._drawCallPool=[],_BatchRenderer._textureArrayPool=[];let BatchRenderer=_BatchRenderer;extensions$2.add(BatchRenderer);var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _Filter=class lo extends Shader{constructor(_,et,tt){const nt=Program.from(_||lo.defaultVertexSrc,et||lo.defaultFragmentSrc);super(nt,tt),this.padding=0,this.resolution=lo.defaultResolution,this.multisample=lo.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(_,et,tt,nt,it){_.applyFilter(this,et,tt,nt)}get blendMode(){return this.state.blendMode}set blendMode(_){this.state.blendMode=_}get resolution(){return this._resolution}set resolution(_){this._resolution=_}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentSrc(){return defaultFragment}};_Filter.defaultResolution=1,_Filter.defaultMultisample=MSAA_QUALITY.NONE;let Filter=_Filter;class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color(0),this.alpha=1}init(_){this.clearBeforeRender=_.clearBeforeRender;const{backgroundColor:et,background:tt,backgroundAlpha:nt}=_,it=tt??et;it!==void 0&&(this.color=it),this.alpha=nt}get color(){return this._backgroundColor.value}set color(_){this._backgroundColor.setValue(_)}get alpha(){return this._backgroundColor.alpha}set alpha(_){this._backgroundColor.setAlpha(_)}get backgroundColor(){return this._backgroundColor}destroy(){}}BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"};extensions$2.add(BackgroundSystem);class BatchSystem{constructor(_){this.renderer=_,this.emptyRenderer=new ObjectRenderer(_),this.currentRenderer=this.emptyRenderer}setObjectRenderer(_){this.currentRenderer!==_&&(this.currentRenderer.stop(),this.currentRenderer=_,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(_,et){const{boundTextures:tt}=this.renderer.texture;for(let nt=et-1;nt>=0;--nt)_[nt]=tt[nt]||null,_[nt]&&(_[nt]._batchLocation=nt)}boundArray(_,et,tt,nt){const{elements:it,ids:at,count:ot}=_;let st=0;for(let dt=0;dt<ot;dt++){const ht=it[dt],ct=ht._batchLocation;if(ct>=0&&ct<nt&&et[ct]===ht){at[dt]=ct;continue}for(;st<nt;){const ut=et[st];if(ut&&ut._batchEnabled===tt&&ut._batchLocation===st){st++;continue}at[dt]=st,ht._batchLocation=st,et[st]=ht;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"};extensions$2.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(_){this.renderer=_,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(_){this.gl=_,this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++}init(_){if(_.context)this.initFromContext(_.context);else{const et=this.renderer.background.alpha<1,tt=_.premultipliedAlpha;this.preserveDrawingBuffer=_.preserveDrawingBuffer,this.useContextAlpha=_.useContextAlpha,this.powerPreference=_.powerPreference,this.initFromOptions({alpha:et,premultipliedAlpha:tt,antialias:_.antialias,stencil:!0,preserveDrawingBuffer:_.preserveDrawingBuffer,powerPreference:_.powerPreference})}}initFromContext(_){this.gl=_,this.validateContext(_),this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(_);const et=this.renderer.view;et.addEventListener!==void 0&&(et.addEventListener("webglcontextlost",this.handleContextLost,!1),et.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(_){const et=this.createContext(this.renderer.view,_);this.initFromContext(et)}createContext(_,et){let tt;if(settings.PREFER_ENV>=ENV.WEBGL2&&(tt=_.getContext("webgl2",et)),tt)this.webGLVersion=2;else if(this.webGLVersion=1,tt=_.getContext("webgl",et)||_.getContext("experimental-webgl",et),!tt)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=tt,this.getExtensions(),this.gl}getExtensions(){const{gl:_}=this,et={loseContext:_.getExtension("WEBGL_lose_context"),anisotropicFiltering:_.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),s3tc:_.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:_.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:_.getExtension("WEBGL_compressed_texture_etc"),etc1:_.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:_.getExtension("WEBGL_compressed_texture_atc"),astc:_.getExtension("WEBGL_compressed_texture_astc"),bptc:_.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,et,{drawBuffers:_.getExtension("WEBGL_draw_buffers"),depthTexture:_.getExtension("WEBGL_depth_texture"),vertexArrayObject:_.getExtension("OES_vertex_array_object")||_.getExtension("MOZ_OES_vertex_array_object")||_.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:_.getExtension("OES_element_index_uint"),floatTexture:_.getExtension("OES_texture_float"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),textureHalfFloat:_.getExtension("OES_texture_half_float"),textureHalfFloatLinear:_.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,et,{colorBufferFloat:_.getExtension("EXT_color_buffer_float")})}handleContextLost(_){_.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const _=this.renderer.view;this.renderer=null,_.removeEventListener!==void 0&&(_.removeEventListener("webglcontextlost",this.handleContextLost),_.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(_){const et=_.getContextAttributes(),tt="WebGL2RenderingContext"in globalThis&&_ instanceof globalThis.WebGL2RenderingContext;tt&&(this.webGLVersion=2),et&&!et.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const nt=tt||!!_.getExtension("OES_element_index_uint");this.supports.uint32Indices=nt,nt||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"};extensions$2.add(ContextSystem);class Framebuffer{constructor(_,et){if(this.width=Math.round(_),this.height=Math.round(et),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(_=0,et){return this.colorTextures[_]=et||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(_){return this.depthTexture=_||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(_,et){if(_=Math.round(_),et=Math.round(et),!_||!et)throw new Error("Framebuffer width and height must not be zero");if(!(_===this.width&&et===this.height)){this.width=_,this.height=et,this.dirtyId++,this.dirtySize++;for(let tt=0;tt<this.colorTextures.length;tt++){const nt=this.colorTextures[tt],it=nt.resolution;nt.setSize(_/it,et/it)}if(this.depthTexture){const tt=this.depthTexture.resolution;this.depthTexture.setSize(_/tt,et/tt)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(_={}){if(typeof _=="number"){const et=arguments[0],tt=arguments[1],nt=arguments[2],it=arguments[3];_={width:et,height:tt,scaleMode:nt,resolution:it}}_.width=_.width??100,_.height=_.height??100,_.multisample??(_.multisample=MSAA_QUALITY.NONE),super(null,_),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this._clear=new Color([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=_.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(_){this._clear.setValue(_)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,et){this.framebuffer.resize(_*this.resolution,et*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class BaseImageResource extends Resource{constructor(_){const et=_,tt=et.naturalWidth||et.videoWidth||et.displayWidth||et.width,nt=et.naturalHeight||et.videoHeight||et.displayHeight||et.height;super(tt,nt),this.source=_,this.noSubImage=!1}static crossOrigin(_,et,tt){tt===void 0&&!et.startsWith("data:")?_.crossOrigin=determineCrossOrigin(et):tt!==!1&&(_.crossOrigin=typeof tt=="string"?tt:"anonymous")}upload(_,et,tt,nt){const it=_.gl,at=et.realWidth,ot=et.realHeight;if(nt=nt||this.source,typeof HTMLImageElement<"u"&&nt instanceof HTMLImageElement){if(!nt.complete||nt.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&nt instanceof HTMLVideoElement&&nt.readyState<=1)return!1;return it.pixelStorei(it.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&et.target===it.TEXTURE_2D&&tt.width===at&&tt.height===ot?it.texSubImage2D(it.TEXTURE_2D,0,0,0,et.format,tt.type,nt):(tt.width=at,tt.height=ot,it.texImage2D(et.target,0,tt.internalFormat,et.format,tt.type,nt)),!0}update(){if(this.destroyed)return;const _=this.source,et=_.naturalWidth||_.videoWidth||_.width,tt=_.naturalHeight||_.videoHeight||_.height;this.resize(et,tt),super.update()}dispose(){this.source=null}}class ImageResource extends BaseImageResource{constructor(_,et){if(et=et||{},typeof _=="string"){const tt=new Image;BaseImageResource.crossOrigin(tt,_,et.crossorigin),tt.src=_,_=tt}super(_),!_.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=_.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(et.createBitmap??settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof et.alphaMode=="number"?et.alphaMode:null,this.bitmap=null,this._load=null,et.autoLoad!==!1&&this.load()}load(_){return this._load?this._load:(_!==void 0&&(this.createBitmap=_),this._load=new Promise((et,tt)=>{const nt=this.source;this.url=nt.src;const it=()=>{this.destroyed||(nt.onload=null,nt.onerror=null,this.update(),this._load=null,this.createBitmap?et(this.process()):et(this))};nt.complete&&nt.src?it():(nt.onload=it,nt.onerror=at=>{tt(at),this.onError.emit(at)})}),this._load)}process(){const _=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const et=globalThis.createImageBitmap,tt=!_.crossOrigin||_.crossOrigin==="anonymous";return this._process=fetch(_.src,{mode:tt?"cors":"no-cors"}).then(nt=>nt.blob()).then(nt=>et(nt,0,0,_.width,_.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(nt=>this.destroyed?Promise.reject():(this.bitmap=nt,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(_,et,tt){if(typeof this.alphaMode=="number"&&(et.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(_,et,tt);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(_,et,tt,this.bitmap),!this.preserveBitmap){let nt=!0;const it=et._glTextures;for(const at in it){const ot=it[at];if(ot!==tt&&ot.dirtyId!==et.dirtyId){nt=!1;break}}nt&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(_){return typeof HTMLImageElement<"u"&&(typeof _=="string"||_ instanceof HTMLImageElement)}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(_,et,tt){const nt=et.width,it=et.height;if(tt){const at=_.width/2/nt,ot=_.height/2/it,st=_.x/nt+at,dt=_.y/it+ot;tt=groupD8.add(tt,groupD8.NW),this.x0=st+at*groupD8.uX(tt),this.y0=dt+ot*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x1=st+at*groupD8.uX(tt),this.y1=dt+ot*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x2=st+at*groupD8.uX(tt),this.y2=dt+ot*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x3=st+at*groupD8.uX(tt),this.y3=dt+ot*groupD8.uY(tt)}else this.x0=_.x/nt,this.y0=_.y/it,this.x1=(_.x+_.width)/nt,this.y1=_.y/it,this.x2=(_.x+_.width)/nt,this.y2=(_.y+_.height)/it,this.x3=_.x/nt,this.y3=(_.y+_.height)/it;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}TextureUvs.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(_e){_e.destroy=function(){},_e.on=function(){},_e.once=function(){},_e.emit=function(){}}class Texture extends EventEmitter{constructor(_,et,tt,nt,it,at,ot){if(super(),this.noFrame=!1,et||(this.noFrame=!0,et=new Rectangle(0,0,1,1)),_ instanceof Texture&&(_=_.baseTexture),this.baseTexture=_,this._frame=et,this.trim=nt,this.valid=!1,this.destroyed=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=tt||et,this._rotate=Number(it||0),it===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=at?new Point$1(at.x,at.y):new Point$1(0,0),this.defaultBorders=ot,this._updateID=0,this.textureCacheIds=[],_.valid?this.noFrame?_.valid&&this.onBaseTextureUpdated(_):this.frame=et:_.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&_.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(_){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=_.width,this._frame.height=_.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(_){if(this.baseTexture){if(_){const{resource:et}=this.baseTexture;et!=null&&et.url&&TextureCache[et.url]&&Texture.removeFromCache(et.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var nt;const _=this._frame.clone(),et=this._frame===this.orig?_:this.orig.clone(),tt=new Texture(this.baseTexture,!this.noFrame&&_,et,(nt=this.trim)==null?void 0:nt.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(tt._frame=_),tt}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(_,et={},tt=settings.STRICT_TEXTURE_CACHE){const nt=typeof _=="string";let it=null;if(nt)it=_;else if(_ instanceof BaseTexture){if(!_.cacheId){const ot=(et==null?void 0:et.pixiIdPrefix)||"pixiid";_.cacheId=`${ot}-${uid()}`,BaseTexture.addToCache(_,_.cacheId)}it=_.cacheId}else{if(!_._pixiId){const ot=(et==null?void 0:et.pixiIdPrefix)||"pixiid";_._pixiId=`${ot}_${uid()}`}it=_._pixiId}let at=TextureCache[it];if(nt&&tt&&!at)throw new Error(`The cacheId "${it}" does not exist in TextureCache.`);return!at&&!(_ instanceof BaseTexture)?(et.resolution||(et.resolution=getResolutionOfUrl(_)),at=new Texture(new BaseTexture(_,et)),at.baseTexture.cacheId=it,BaseTexture.addToCache(at.baseTexture,it),Texture.addToCache(at,it)):!at&&_ instanceof BaseTexture&&(at=new Texture(_),Texture.addToCache(at,it)),at}static fromURL(_,et){const tt=Object.assign({autoLoad:!1},et==null?void 0:et.resourceOptions),nt=Texture.from(_,Object.assign({resourceOptions:tt},et),!1),it=nt.baseTexture.resource;return nt.baseTexture.valid?Promise.resolve(nt):it.load().then(()=>Promise.resolve(nt))}static fromBuffer(_,et,tt,nt){return new Texture(BaseTexture.fromBuffer(_,et,tt,nt))}static fromLoader(_,et,tt,nt){const it=new BaseTexture(_,Object.assign({scaleMode:BaseTexture.defaultOptions.scaleMode,resolution:getResolutionOfUrl(et)},nt)),{resource:at}=it;at instanceof ImageResource&&(at.url=et);const ot=new Texture(it);return tt||(tt=et),BaseTexture.addToCache(ot.baseTexture,tt),Texture.addToCache(ot,tt),tt!==et&&(BaseTexture.addToCache(ot.baseTexture,et),Texture.addToCache(ot,et)),ot.baseTexture.valid?Promise.resolve(ot):new Promise(st=>{ot.baseTexture.once("loaded",()=>st(ot))})}static addToCache(_,et){et&&(_.textureCacheIds.includes(et)||_.textureCacheIds.push(et),TextureCache[et]&&TextureCache[et]!==_&&console.warn(`Texture added to the cache with an id [${et}] that already had an entry`),TextureCache[et]=_)}static removeFromCache(_){if(typeof _=="string"){const et=TextureCache[_];if(et){const tt=et.textureCacheIds.indexOf(_);return tt>-1&&et.textureCacheIds.splice(tt,1),delete TextureCache[_],et}}else if(_!=null&&_.textureCacheIds){for(let et=0;et<_.textureCacheIds.length;++et)TextureCache[_.textureCacheIds[et]]===_&&delete TextureCache[_.textureCacheIds[et]];return _.textureCacheIds.length=0,_}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(_){this._frame=_,this.noFrame=!1;const{x:et,y:tt,width:nt,height:it}=_,at=et+nt>this.baseTexture.width,ot=tt+it>this.baseTexture.height;if(at||ot){const st=at&&ot?"and":"or",dt=`X: ${et} + ${nt} = ${et+nt} > ${this.baseTexture.width}`,ht=`Y: ${tt} + ${it} = ${tt+it} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${dt} ${st} ${ht}`)}this.valid=nt&&it&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=_),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(_){this._rotate=_,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const _=settings.ADAPTER.createCanvas(16,16),et=_.getContext("2d");_.width=16,_.height=16,et.fillStyle="white",et.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(_)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(_,et){super(_,et),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,et,tt=!0){const nt=this.baseTexture.resolution,it=Math.round(_*nt)/nt,at=Math.round(et*nt)/nt;this.valid=it>0&&at>0,this._frame.width=this.orig.width=it,this._frame.height=this.orig.height=at,tt&&this.baseTexture.resize(it,at),this.updateUvs()}setResolution(_){const{baseTexture:et}=this;et.resolution!==_&&(et.setResolution(_),this.resize(et.width,et.height,!1))}static create(_){return new RenderTexture(new BaseRenderTexture(_))}}class RenderTexturePool{constructor(_){this.texturePool={},this.textureOptions=_||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(_,et,tt=MSAA_QUALITY.NONE){const nt=new BaseRenderTexture(Object.assign({width:_,height:et,resolution:1,multisample:tt},this.textureOptions));return new RenderTexture(nt)}getOptimalTexture(_,et,tt=1,nt=MSAA_QUALITY.NONE){let it;_=Math.max(Math.ceil(_*tt-1e-6),1),et=Math.max(Math.ceil(et*tt-1e-6),1),!this.enableFullScreen||_!==this._pixelsWidth||et!==this._pixelsHeight?(_=nextPow2(_),et=nextPow2(et),it=((_&65535)<<16|et&65535)>>>0,nt>1&&(it+=nt*4294967296)):it=nt>1?-nt:-1,this.texturePool[it]||(this.texturePool[it]=[]);let at=this.texturePool[it].pop();return at||(at=this.createTexture(_,et,nt)),at.filterPoolKey=it,at.setResolution(tt),at}getFilterTexture(_,et,tt){const nt=this.getOptimalTexture(_.width,_.height,et||_.resolution,tt||MSAA_QUALITY.NONE);return nt.filterFrame=_.filterFrame,nt}returnTexture(_){const et=_.filterPoolKey;_.filterFrame=null,this.texturePool[et].push(_)}returnFilterTexture(_){this.returnTexture(_)}clear(_){if(_=_!==!1,_)for(const et in this.texturePool){const tt=this.texturePool[et];if(tt)for(let nt=0;nt<tt.length;nt++)tt[nt].destroy(!0)}this.texturePool={}}setScreenSize(_){if(!(_.width===this._pixelsWidth&&_.height===this._pixelsHeight)){this.enableFullScreen=_.width>0&&_.height>0;for(const et in this.texturePool){if(!(Number(et)<0))continue;const tt=this.texturePool[et];if(tt)for(let nt=0;nt<tt.length;nt++)tt[nt].destroy(!0);this.texturePool[et]=[]}this._pixelsWidth=_.width,this._pixelsHeight=_.height}}}RenderTexturePool.SCREEN_KEY=-1;class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer$1(this.vertices),this.uvBuffer=new Buffer$1(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(_,et){let tt=0,nt=0;return this.uvs[0]=tt,this.uvs[1]=nt,this.uvs[2]=tt+et.width/_.width,this.uvs[3]=nt,this.uvs[4]=tt+et.width/_.width,this.uvs[5]=nt+et.height/_.height,this.uvs[6]=tt,this.uvs[7]=nt+et.height/_.height,tt=et.x,nt=et.y,this.vertices[0]=tt,this.vertices[1]=nt,this.vertices[2]=tt+et.width,this.vertices[3]=nt,this.vertices[4]=tt+et.width,this.vertices[5]=nt+et.height,this.vertices[6]=tt,this.vertices[7]=nt+et.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point$1,new Point$1,new Point$1,new Point$1],tempMatrix$4=new Matrix;class FilterSystem{constructor(_){this.renderer=_,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(_,et){const tt=this.renderer,nt=this.defaultFilterStack,it=this.statePool.pop()||new FilterState,at=tt.renderTexture;let ot,st;if(at.current){const vt=at.current;ot=vt.resolution,st=vt.multisample}else ot=tt.resolution,st=tt.multisample;let dt=et[0].resolution||ot,ht=et[0].multisample??st,ct=et[0].padding,ut=et[0].autoFit,ft=et[0].legacy??!0;for(let vt=1;vt<et.length;vt++){const yt=et[vt];dt=Math.min(dt,yt.resolution||ot),ht=Math.min(ht,yt.multisample??st),ct=this.useMaxPadding?Math.max(ct,yt.padding):ct+yt.padding,ut=ut&&yt.autoFit,ft=ft||(yt.legacy??!0)}nt.length===1&&(this.defaultFilterStack[0].renderTexture=at.current),nt.push(it),it.resolution=dt,it.multisample=ht,it.legacy=ft,it.target=_,it.sourceFrame.copyFrom(_.filterArea||_.getBounds(!0)),it.sourceFrame.pad(ct);const gt=this.tempRect.copyFrom(at.sourceFrame);tt.projection.transform&&this.transformAABB(tempMatrix$4.copyFrom(tt.projection.transform).invert(),gt),ut?(it.sourceFrame.fit(gt),(it.sourceFrame.width<=0||it.sourceFrame.height<=0)&&(it.sourceFrame.width=0,it.sourceFrame.height=0)):it.sourceFrame.intersects(gt)||(it.sourceFrame.width=0,it.sourceFrame.height=0),this.roundFrame(it.sourceFrame,at.current?at.current.resolution:tt.resolution,at.sourceFrame,at.destinationFrame,tt.projection.transform),it.renderTexture=this.getOptimalFilterTexture(it.sourceFrame.width,it.sourceFrame.height,dt,ht),it.filters=et,it.destinationFrame.width=it.renderTexture.width,it.destinationFrame.height=it.renderTexture.height;const mt=this.tempRect;mt.x=0,mt.y=0,mt.width=it.sourceFrame.width,mt.height=it.sourceFrame.height,it.renderTexture.filterFrame=it.sourceFrame,it.bindingSourceFrame.copyFrom(at.sourceFrame),it.bindingDestinationFrame.copyFrom(at.destinationFrame),it.transform=tt.projection.transform,tt.projection.transform=null,at.bind(it.renderTexture,it.sourceFrame,mt),tt.framebuffer.clear(0,0,0,0)}pop(){const _=this.defaultFilterStack,et=_.pop(),tt=et.filters;this.activeState=et;const nt=this.globalUniforms.uniforms;nt.outputFrame=et.sourceFrame,nt.resolution=et.resolution;const it=nt.inputSize,at=nt.inputPixel,ot=nt.inputClamp;if(it[0]=et.destinationFrame.width,it[1]=et.destinationFrame.height,it[2]=1/it[0],it[3]=1/it[1],at[0]=Math.round(it[0]*et.resolution),at[1]=Math.round(it[1]*et.resolution),at[2]=1/at[0],at[3]=1/at[1],ot[0]=.5*at[2],ot[1]=.5*at[3],ot[2]=et.sourceFrame.width*it[2]-.5*at[2],ot[3]=et.sourceFrame.height*it[3]-.5*at[3],et.legacy){const dt=nt.filterArea;dt[0]=et.destinationFrame.width,dt[1]=et.destinationFrame.height,dt[2]=et.sourceFrame.x,dt[3]=et.sourceFrame.y,nt.filterClamp=nt.inputClamp}this.globalUniforms.update();const st=_[_.length-1];if(this.renderer.framebuffer.blit(),tt.length===1)tt[0].apply(this,et.renderTexture,st.renderTexture,CLEAR_MODES.BLEND,et),this.returnFilterTexture(et.renderTexture);else{let dt=et.renderTexture,ht=this.getOptimalFilterTexture(dt.width,dt.height,et.resolution);ht.filterFrame=dt.filterFrame;let ct=0;for(ct=0;ct<tt.length-1;++ct){ct===1&&et.multisample>1&&(ht=this.getOptimalFilterTexture(dt.width,dt.height,et.resolution),ht.filterFrame=dt.filterFrame),tt[ct].apply(this,dt,ht,CLEAR_MODES.CLEAR,et);const ut=dt;dt=ht,ht=ut}tt[ct].apply(this,dt,st.renderTexture,CLEAR_MODES.BLEND,et),ct>1&&et.multisample>1&&this.returnFilterTexture(et.renderTexture),this.returnFilterTexture(dt),this.returnFilterTexture(ht)}et.clear(),this.statePool.push(et)}bindAndClear(_,et=CLEAR_MODES.CLEAR){const{renderTexture:tt,state:nt}=this.renderer;if(_===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,_==null?void 0:_.filterFrame){const at=this.tempRect;at.x=0,at.y=0,at.width=_.filterFrame.width,at.height=_.filterFrame.height,tt.bind(_,_.filterFrame,at)}else _!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?tt.bind(_):this.renderer.renderTexture.bind(_,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const it=nt.stateId&1||this.forceClear;(et===CLEAR_MODES.CLEAR||et===CLEAR_MODES.BLIT&&it)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(_,et,tt,nt){const it=this.renderer;it.state.set(_.state),this.bindAndClear(tt,nt),_.uniforms.uSampler=et,_.uniforms.filterGlobals=this.globalUniforms,it.shader.bind(_),_.legacy=!!_.program.attributeData.aTextureCoord,_.legacy?(this.quadUv.map(et._frame,et.filterFrame),it.geometry.bind(this.quadUv),it.geometry.draw(DRAW_MODES.TRIANGLES)):(it.geometry.bind(this.quad),it.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(_,et){const{sourceFrame:tt,destinationFrame:nt}=this.activeState,{orig:it}=et._texture,at=_.set(nt.width,0,0,nt.height,tt.x,tt.y),ot=et.worldTransform.copyTo(Matrix.TEMP_MATRIX);return ot.invert(),at.prepend(ot),at.scale(1/it.width,1/it.height),at.translate(et.anchor.x,et.anchor.y),at}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(_,et,tt=1,nt=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(_,et,tt,nt)}getFilterTexture(_,et,tt){if(typeof _=="number"){const it=_;_=et,et=it}_=_||this.activeState.renderTexture;const nt=this.texturePool.getOptimalTexture(_.width,_.height,et||_.resolution,tt||MSAA_QUALITY.NONE);return nt.filterFrame=_.filterFrame,nt}returnFilterTexture(_){this.texturePool.returnTexture(_)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(_,et){const tt=tempPoints[0],nt=tempPoints[1],it=tempPoints[2],at=tempPoints[3];tt.set(et.left,et.top),nt.set(et.left,et.bottom),it.set(et.right,et.top),at.set(et.right,et.bottom),_.apply(tt,tt),_.apply(nt,nt),_.apply(it,it),_.apply(at,at);const ot=Math.min(tt.x,nt.x,it.x,at.x),st=Math.min(tt.y,nt.y,it.y,at.y),dt=Math.max(tt.x,nt.x,it.x,at.x),ht=Math.max(tt.y,nt.y,it.y,at.y);et.x=ot,et.y=st,et.width=dt-ot,et.height=ht-st}roundFrame(_,et,tt,nt,it){if(!(_.width<=0||_.height<=0||tt.width<=0||tt.height<=0)){if(it){const{a:at,b:ot,c:st,d:dt}=it;if((Math.abs(ot)>1e-4||Math.abs(st)>1e-4)&&(Math.abs(at)>1e-4||Math.abs(dt)>1e-4))return}it=it?tempMatrix$4.copyFrom(it):tempMatrix$4.identity(),it.translate(-tt.x,-tt.y).scale(nt.width/tt.width,nt.height/tt.height).translate(nt.x,nt.y),this.transformAABB(it,_),_.ceil(et),this.transformAABB(it.invert(),_)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"};extensions$2.add(FilterSystem);class GLFramebuffer{constructor(_){this.framebuffer=_,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle;class FramebufferSystem{constructor(_){this.renderer=_,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let et=this.renderer.context.extensions.drawBuffers,tt=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(et=null,tt=null),et?_.drawBuffers=nt=>et.drawBuffersWEBGL(nt):(this.hasMRT=!1,_.drawBuffers=()=>{}),tt||(this.writeDepthTexture=!1)}else this.msaaSamples=_.getInternalformatParameter(_.RENDERBUFFER,_.RGBA8,_.SAMPLES)}bind(_,et,tt=0){const{gl:nt}=this;if(_){const it=_.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(_);this.current!==_&&(this.current=_,nt.bindFramebuffer(nt.FRAMEBUFFER,it.framebuffer)),it.mipLevel!==tt&&(_.dirtyId++,_.dirtyFormat++,it.mipLevel=tt),it.dirtyId!==_.dirtyId&&(it.dirtyId=_.dirtyId,it.dirtyFormat!==_.dirtyFormat?(it.dirtyFormat=_.dirtyFormat,it.dirtySize=_.dirtySize,this.updateFramebuffer(_,tt)):it.dirtySize!==_.dirtySize&&(it.dirtySize=_.dirtySize,this.resizeFramebuffer(_)));for(let at=0;at<_.colorTextures.length;at++){const ot=_.colorTextures[at];this.renderer.texture.unbind(ot.parentTextureArray||ot)}if(_.depthTexture&&this.renderer.texture.unbind(_.depthTexture),et){const at=et.width>>tt,ot=et.height>>tt,st=at/et.width;this.setViewport(et.x*st,et.y*st,at,ot)}else{const at=_.width>>tt,ot=_.height>>tt;this.setViewport(0,0,at,ot)}}else this.current&&(this.current=null,nt.bindFramebuffer(nt.FRAMEBUFFER,null)),et?this.setViewport(et.x,et.y,et.width,et.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(_,et,tt,nt){const it=this.viewport;_=Math.round(_),et=Math.round(et),tt=Math.round(tt),nt=Math.round(nt),(it.width!==tt||it.height!==nt||it.x!==_||it.y!==et)&&(it.x=_,it.y=et,it.width=tt,it.height=nt,this.gl.viewport(_,et,tt,nt))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(_,et,tt,nt,it=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:at}=this;at.clearColor(_,et,tt,nt),at.clear(it)}initFramebuffer(_){const{gl:et}=this,tt=new GLFramebuffer(et.createFramebuffer());return tt.multisample=this.detectSamples(_.multisample),_.glFramebuffers[this.CONTEXT_UID]=tt,this.managedFramebuffers.push(_),_.disposeRunner.add(this),tt}resizeFramebuffer(_){const{gl:et}=this,tt=_.glFramebuffers[this.CONTEXT_UID];if(tt.stencil){et.bindRenderbuffer(et.RENDERBUFFER,tt.stencil);let at;this.renderer.context.webGLVersion===1?at=et.DEPTH_STENCIL:_.depth&&_.stencil?at=et.DEPTH24_STENCIL8:_.depth?at=et.DEPTH_COMPONENT24:at=et.STENCIL_INDEX8,tt.msaaBuffer?et.renderbufferStorageMultisample(et.RENDERBUFFER,tt.multisample,at,_.width,_.height):et.renderbufferStorage(et.RENDERBUFFER,at,_.width,_.height)}const nt=_.colorTextures;let it=nt.length;et.drawBuffers||(it=Math.min(it,1));for(let at=0;at<it;at++){const ot=nt[at],st=ot.parentTextureArray||ot;this.renderer.texture.bind(st,0),at===0&&tt.msaaBuffer&&(et.bindRenderbuffer(et.RENDERBUFFER,tt.msaaBuffer),et.renderbufferStorageMultisample(et.RENDERBUFFER,tt.multisample,st._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height))}_.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(_.depthTexture,0)}updateFramebuffer(_,et){const{gl:tt}=this,nt=_.glFramebuffers[this.CONTEXT_UID],it=_.colorTextures;let at=it.length;tt.drawBuffers||(at=Math.min(at,1)),nt.multisample>1&&this.canMultisampleFramebuffer(_)?nt.msaaBuffer=nt.msaaBuffer||tt.createRenderbuffer():nt.msaaBuffer&&(tt.deleteRenderbuffer(nt.msaaBuffer),nt.msaaBuffer=null,nt.blitFramebuffer&&(nt.blitFramebuffer.dispose(),nt.blitFramebuffer=null));const ot=[];for(let st=0;st<at;st++){const dt=it[st],ht=dt.parentTextureArray||dt;this.renderer.texture.bind(ht,0),st===0&&nt.msaaBuffer?(tt.bindRenderbuffer(tt.RENDERBUFFER,nt.msaaBuffer),tt.renderbufferStorageMultisample(tt.RENDERBUFFER,nt.multisample,ht._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.RENDERBUFFER,nt.msaaBuffer)):(tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0+st,dt.target,ht._glTextures[this.CONTEXT_UID].texture,et),ot.push(tt.COLOR_ATTACHMENT0+st))}if(ot.length>1&&tt.drawBuffers(ot),_.depthTexture&&this.writeDepthTexture){const st=_.depthTexture;this.renderer.texture.bind(st,0),tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.DEPTH_ATTACHMENT,tt.TEXTURE_2D,st._glTextures[this.CONTEXT_UID].texture,et)}if((_.stencil||_.depth)&&!(_.depthTexture&&this.writeDepthTexture)){nt.stencil=nt.stencil||tt.createRenderbuffer();let st,dt;this.renderer.context.webGLVersion===1?(st=tt.DEPTH_STENCIL_ATTACHMENT,dt=tt.DEPTH_STENCIL):_.depth&&_.stencil?(st=tt.DEPTH_STENCIL_ATTACHMENT,dt=tt.DEPTH24_STENCIL8):_.depth?(st=tt.DEPTH_ATTACHMENT,dt=tt.DEPTH_COMPONENT24):(st=tt.STENCIL_ATTACHMENT,dt=tt.STENCIL_INDEX8),tt.bindRenderbuffer(tt.RENDERBUFFER,nt.stencil),nt.msaaBuffer?tt.renderbufferStorageMultisample(tt.RENDERBUFFER,nt.multisample,dt,_.width,_.height):tt.renderbufferStorage(tt.RENDERBUFFER,dt,_.width,_.height),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,st,tt.RENDERBUFFER,nt.stencil)}else nt.stencil&&(tt.deleteRenderbuffer(nt.stencil),nt.stencil=null)}canMultisampleFramebuffer(_){return this.renderer.context.webGLVersion!==1&&_.colorTextures.length<=1&&!_.depthTexture}detectSamples(_){const{msaaSamples:et}=this;let tt=MSAA_QUALITY.NONE;if(_<=1||et===null)return tt;for(let nt=0;nt<et.length;nt++)if(et[nt]<=_){tt=et[nt];break}return tt===1&&(tt=MSAA_QUALITY.NONE),tt}blit(_,et,tt){const{current:nt,renderer:it,gl:at,CONTEXT_UID:ot}=this;if(it.context.webGLVersion!==2||!nt)return;const st=nt.glFramebuffers[ot];if(!st)return;if(!_){if(!st.msaaBuffer)return;const ht=nt.colorTextures[0];if(!ht)return;st.blitFramebuffer||(st.blitFramebuffer=new Framebuffer(nt.width,nt.height),st.blitFramebuffer.addColorTexture(0,ht)),_=st.blitFramebuffer,_.colorTextures[0]!==ht&&(_.colorTextures[0]=ht,_.dirtyId++,_.dirtyFormat++),(_.width!==nt.width||_.height!==nt.height)&&(_.width=nt.width,_.height=nt.height,_.dirtyId++,_.dirtySize++)}et||(et=tempRectangle,et.width=nt.width,et.height=nt.height),tt||(tt=et);const dt=et.width===tt.width&&et.height===tt.height;this.bind(_),at.bindFramebuffer(at.READ_FRAMEBUFFER,st.framebuffer),at.blitFramebuffer(et.left,et.top,et.right,et.bottom,tt.left,tt.top,tt.right,tt.bottom,at.COLOR_BUFFER_BIT,dt?at.NEAREST:at.LINEAR),at.bindFramebuffer(at.READ_FRAMEBUFFER,_.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(_,et){const tt=_.glFramebuffers[this.CONTEXT_UID],nt=this.gl;if(!tt)return;delete _.glFramebuffers[this.CONTEXT_UID];const it=this.managedFramebuffers.indexOf(_);it>=0&&this.managedFramebuffers.splice(it,1),_.disposeRunner.remove(this),et||(nt.deleteFramebuffer(tt.framebuffer),tt.msaaBuffer&&nt.deleteRenderbuffer(tt.msaaBuffer),tt.stencil&&nt.deleteRenderbuffer(tt.stencil)),tt.blitFramebuffer&&this.disposeFramebuffer(tt.blitFramebuffer,et)}disposeAll(_){const et=this.managedFramebuffers;this.managedFramebuffers=[];for(let tt=0;tt<et.length;tt++)this.disposeFramebuffer(et[tt],_)}forceStencil(){const _=this.current;if(!_)return;const et=_.glFramebuffers[this.CONTEXT_UID];if(!et||et.stencil&&_.stencil)return;_.stencil=!0;const tt=_.width,nt=_.height,it=this.gl,at=et.stencil=it.createRenderbuffer();it.bindRenderbuffer(it.RENDERBUFFER,at);let ot,st;this.renderer.context.webGLVersion===1?(ot=it.DEPTH_STENCIL_ATTACHMENT,st=it.DEPTH_STENCIL):_.depth?(ot=it.DEPTH_STENCIL_ATTACHMENT,st=it.DEPTH24_STENCIL8):(ot=it.STENCIL_ATTACHMENT,st=it.STENCIL_INDEX8),et.msaaBuffer?it.renderbufferStorageMultisample(it.RENDERBUFFER,et.multisample,st,tt,nt):it.renderbufferStorage(it.RENDERBUFFER,st,tt,nt),it.framebufferRenderbuffer(it.FRAMEBUFFER,ot,it.RENDERBUFFER,at)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"};extensions$2.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(_){this.renderer=_,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl,et=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,et.webGLVersion!==2){let tt=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(tt=null),tt?(_.createVertexArray=()=>tt.createVertexArrayOES(),_.bindVertexArray=nt=>tt.bindVertexArrayOES(nt),_.deleteVertexArray=nt=>tt.deleteVertexArrayOES(nt)):(this.hasVao=!1,_.createVertexArray=()=>null,_.bindVertexArray=()=>null,_.deleteVertexArray=()=>null)}if(et.webGLVersion!==2){const tt=_.getExtension("ANGLE_instanced_arrays");tt?(_.vertexAttribDivisor=(nt,it)=>tt.vertexAttribDivisorANGLE(nt,it),_.drawElementsInstanced=(nt,it,at,ot,st)=>tt.drawElementsInstancedANGLE(nt,it,at,ot,st),_.drawArraysInstanced=(nt,it,at,ot)=>tt.drawArraysInstancedANGLE(nt,it,at,ot)):this.hasInstance=!1}this.canUseUInt32ElementIndex=et.webGLVersion===2||!!et.extensions.uint32ElementIndex}bind(_,et){et=et||this.renderer.shader.shader;const{gl:tt}=this;let nt=_.glVertexArrayObjects[this.CONTEXT_UID],it=!1;nt||(this.managedGeometries[_.id]=_,_.disposeRunner.add(this),_.glVertexArrayObjects[this.CONTEXT_UID]=nt={},it=!0);const at=nt[et.program.id]||this.initGeometryVao(_,et,it);this._activeGeometry=_,this._activeVao!==at&&(this._activeVao=at,this.hasVao?tt.bindVertexArray(at):this.activateVao(_,et.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const _=this._activeGeometry,et=this.renderer.buffer;for(let tt=0;tt<_.buffers.length;tt++){const nt=_.buffers[tt];et.update(nt)}}checkCompatibility(_,et){const tt=_.attributes,nt=et.attributeData;for(const it in nt)if(!tt[it])throw new Error(`shader and geometry incompatible, geometry missing the "${it}" attribute`)}getSignature(_,et){const tt=_.attributes,nt=et.attributeData,it=["g",_.id];for(const at in tt)nt[at]&&it.push(at,nt[at].location);return it.join("-")}initGeometryVao(_,et,tt=!0){const nt=this.gl,it=this.CONTEXT_UID,at=this.renderer.buffer,ot=et.program;ot.glPrograms[it]||this.renderer.shader.generateProgram(et),this.checkCompatibility(_,ot);const st=this.getSignature(_,ot),dt=_.glVertexArrayObjects[this.CONTEXT_UID];let ht=dt[st];if(ht)return dt[ot.id]=ht,ht;const ct=_.buffers,ut=_.attributes,ft={},gt={};for(const mt in ct)ft[mt]=0,gt[mt]=0;for(const mt in ut)!ut[mt].size&&ot.attributeData[mt]?ut[mt].size=ot.attributeData[mt].size:ut[mt].size||console.warn(`PIXI Geometry attribute '${mt}' size cannot be determined (likely the bound shader does not have the attribute)`),ft[ut[mt].buffer]+=ut[mt].size*byteSizeMap[ut[mt].type];for(const mt in ut){const vt=ut[mt],yt=vt.size;vt.stride===void 0&&(ft[vt.buffer]===yt*byteSizeMap[vt.type]?vt.stride=0:vt.stride=ft[vt.buffer]),vt.start===void 0&&(vt.start=gt[vt.buffer],gt[vt.buffer]+=yt*byteSizeMap[vt.type])}ht=nt.createVertexArray(),nt.bindVertexArray(ht);for(let mt=0;mt<ct.length;mt++){const vt=ct[mt];at.bind(vt),tt&&vt._glBuffers[it].refCount++}return this.activateVao(_,ot),dt[ot.id]=ht,dt[st]=ht,nt.bindVertexArray(null),at.unbind(BUFFER_TYPE.ARRAY_BUFFER),ht}disposeGeometry(_,et){var ot;if(!this.managedGeometries[_.id])return;delete this.managedGeometries[_.id];const tt=_.glVertexArrayObjects[this.CONTEXT_UID],nt=this.gl,it=_.buffers,at=(ot=this.renderer)==null?void 0:ot.buffer;if(_.disposeRunner.remove(this),!!tt){if(at)for(let st=0;st<it.length;st++){const dt=it[st]._glBuffers[this.CONTEXT_UID];dt&&(dt.refCount--,dt.refCount===0&&!et&&at.dispose(it[st],et))}if(!et){for(const st in tt)if(st[0]==="g"){const dt=tt[st];this._activeVao===dt&&this.unbind(),nt.deleteVertexArray(dt)}}delete _.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(_){const et=Object.keys(this.managedGeometries);for(let tt=0;tt<et.length;tt++)this.disposeGeometry(this.managedGeometries[et[tt]],_)}activateVao(_,et){const tt=this.gl,nt=this.CONTEXT_UID,it=this.renderer.buffer,at=_.buffers,ot=_.attributes;_.indexBuffer&&it.bind(_.indexBuffer);let st=null;for(const dt in ot){const ht=ot[dt],ct=at[ht.buffer],ut=ct._glBuffers[nt];if(et.attributeData[dt]){st!==ut&&(it.bind(ct),st=ut);const ft=et.attributeData[dt].location;if(tt.enableVertexAttribArray(ft),tt.vertexAttribPointer(ft,ht.size,ht.type||tt.FLOAT,ht.normalized,ht.stride,ht.start),ht.instance)if(this.hasInstance)tt.vertexAttribDivisor(ft,ht.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(_,et,tt,nt){const{gl:it}=this,at=this._activeGeometry;if(at.indexBuffer){const ot=at.indexBuffer.data.BYTES_PER_ELEMENT,st=ot===2?it.UNSIGNED_SHORT:it.UNSIGNED_INT;ot===2||ot===4&&this.canUseUInt32ElementIndex?at.instanced?it.drawElementsInstanced(_,et||at.indexBuffer.data.length,st,(tt||0)*ot,nt||1):it.drawElements(_,et||at.indexBuffer.data.length,st,(tt||0)*ot):console.warn("unsupported index buffer type: uint32")}else at.instanced?it.drawArraysInstanced(_,tt,et||at.getSize(),nt||1):it.drawArrays(_,tt,et||at.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"};extensions$2.add(GeometrySystem);const tempMat$1=new Matrix;class TextureMatrix{constructor(_,et){this._texture=_,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof et>"u"?.5:et,this.isSimple=!1}get texture(){return this._texture}set texture(_){this._texture=_,this._textureID=-1}multiplyUvs(_,et){et===void 0&&(et=_);const tt=this.mapCoord;for(let nt=0;nt<_.length;nt+=2){const it=_[nt],at=_[nt+1];et[nt]=it*tt.a+at*tt.c+tt.tx,et[nt+1]=it*tt.b+at*tt.d+tt.ty}return et}update(_){const et=this._texture;if(!et||!et.valid||!_&&this._textureID===et._updateID)return!1;this._textureID=et._updateID,this._updateID++;const tt=et._uvs;this.mapCoord.set(tt.x1-tt.x0,tt.y1-tt.y0,tt.x3-tt.x0,tt.y3-tt.y0,tt.x0,tt.y0);const nt=et.orig,it=et.trim;it&&(tempMat$1.set(nt.width/it.width,0,0,nt.height/it.height,-it.x/it.width,-it.y/it.height),this.mapCoord.append(tempMat$1));const at=et.baseTexture,ot=this.uClampFrame,st=this.clampMargin/at.resolution,dt=this.clampOffset;return ot[0]=(et._frame.x+st+dt)/at.width,ot[1]=(et._frame.y+st+dt)/at.height,ot[2]=(et._frame.x+et._frame.width-st+dt)/at.width,ot[3]=(et._frame.y+et._frame.height-st+dt)/at.height,this.uClampOffset[0]=dt/at.realWidth,this.uClampOffset[1]=dt/at.realHeight,this.isSimple=et._frame.width===at.width&&et._frame.height===at.height&&et.rotate===0,!0}}var fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SpriteMaskFilter extends Filter{constructor(_,et,tt){let nt=null;typeof _!="string"&&et===void 0&&tt===void 0&&(nt=_,_=void 0,et=void 0,tt=void 0),super(_||vertex$4,et||fragment$7,tt),this.maskSprite=nt,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(_){this._maskSprite=_,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(_,et,tt,nt){const it=this._maskSprite,at=it._texture;at.valid&&(at.uvMatrix||(at.uvMatrix=new TextureMatrix(at,0)),at.uvMatrix.update(),this.uniforms.npmAlpha=at.baseTexture.alphaMode?0:1,this.uniforms.mask=at,this.uniforms.otherMatrix=_.calculateSpriteMatrix(this.maskMatrix,it).prepend(at.uvMatrix.mapCoord),this.uniforms.alpha=it.worldAlpha,this.uniforms.maskClamp=at.uvMatrix.uClampFrame,_.applyFilter(this,et,tt,nt))}}class MaskData{constructor(_=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=_||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Filter.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(_){_?this._filters?this._filters[0]=_:this._filters=[_]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(_){_?(this._stencilCounter=_._stencilCounter,this._scissorCounter=_._scissorCounter,this._scissorRect=_._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MaskSystem{constructor(_){this.renderer=_,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(_){this.maskStack=_,this.renderer.scissor.setMaskStack(_),this.renderer.stencil.setMaskStack(_)}push(_,et){let tt=et;if(!tt.isMaskData){const it=this.maskDataPool.pop()||new MaskData;it.pooled=!0,it.maskObject=et,tt=it}const nt=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(tt.copyCountersOrReset(nt),tt._colorMask=nt?nt._colorMask:15,tt.autoDetect&&this.detect(tt),tt._target=_,tt.type!==MASK_TYPES.SPRITE&&this.maskStack.push(tt),tt.enabled)switch(tt.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(tt);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(tt);break;case MASK_TYPES.SPRITE:tt.copyCountersOrReset(null),this.pushSpriteMask(tt);break;case MASK_TYPES.COLOR:this.pushColorMask(tt);break}tt.type===MASK_TYPES.SPRITE&&this.maskStack.push(tt)}pop(_){const et=this.maskStack.pop();if(!(!et||et._target!==_)){if(et.enabled)switch(et.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(et);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(et.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(et);break;case MASK_TYPES.COLOR:this.popColorMask(et);break}if(et.reset(),et.pooled&&this.maskDataPool.push(et),this.maskStack.length!==0){const tt=this.maskStack[this.maskStack.length-1];tt.type===MASK_TYPES.SPRITE&&tt._filters&&(tt._filters[0].maskSprite=tt.maskObject)}}}detect(_){const et=_.maskObject;et?et.isSprite?_.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(_)?_.type=MASK_TYPES.SCISSOR:_.type=MASK_TYPES.STENCIL:_.type=MASK_TYPES.COLOR}pushSpriteMask(_){const{maskObject:et}=_,tt=_._target;let nt=_._filters;nt||(nt=this.alphaMaskPool[this.alphaMaskIndex],nt||(nt=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter])),nt[0].resolution=_.resolution,nt[0].multisample=_.multisample,nt[0].maskSprite=et;const it=tt.filterArea;tt.filterArea=et.getBounds(!0),this.renderer.filter.push(tt,nt),tt.filterArea=it,_._filters||this.alphaMaskIndex++}popSpriteMask(_){this.renderer.filter.pop(),_._filters?_._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(_){const et=_._colorMask,tt=_._colorMask=et&_.colorMask;tt!==et&&this.renderer.gl.colorMask((tt&1)!==0,(tt&2)!==0,(tt&4)!==0,(tt&8)!==0)}popColorMask(_){const et=_._colorMask,tt=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;tt!==et&&this.renderer.gl.colorMask((tt&1)!==0,(tt&2)!==0,(tt&4)!==0,(tt&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"};extensions$2.add(MaskSystem);class AbstractMaskSystem{constructor(_){this.renderer=_,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(_){const{gl:et}=this.renderer,tt=this.getStackLength();this.maskStack=_;const nt=this.getStackLength();nt!==tt&&(nt===0?et.disable(this.glConst):(et.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix$3=new Matrix,rectPool=[],_ScissorSystem=class Ao extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._scissorCounter:0}calcScissorRect(_){if(_._scissorRectLocal)return;const et=_._scissorRect,{maskObject:tt}=_,{renderer:nt}=this,it=nt.renderTexture,at=tt.getBounds(!0,rectPool.pop()??new Rectangle);this.roundFrameToPixels(at,it.current?it.current.resolution:nt.resolution,it.sourceFrame,it.destinationFrame,nt.projection.transform),et&&at.fit(et),_._scissorRectLocal=at}static isMatrixRotated(_){if(!_)return!1;const{a:et,b:tt,c:nt,d:it}=_;return(Math.abs(tt)>1e-4||Math.abs(nt)>1e-4)&&(Math.abs(et)>1e-4||Math.abs(it)>1e-4)}testScissor(_){const{maskObject:et}=_;if(!et.isFastRect||!et.isFastRect()||Ao.isMatrixRotated(et.worldTransform)||Ao.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(_);const tt=_._scissorRectLocal;return tt.width>0&&tt.height>0}roundFrameToPixels(_,et,tt,nt,it){Ao.isMatrixRotated(it)||(it=it?tempMatrix$3.copyFrom(it):tempMatrix$3.identity(),it.translate(-tt.x,-tt.y).scale(nt.width/tt.width,nt.height/tt.height).translate(nt.x,nt.y),this.renderer.filter.transformAABB(it,_),_.fit(nt),_.x=Math.round(_.x*et),_.y=Math.round(_.y*et),_.width=Math.round(_.width*et),_.height=Math.round(_.height*et))}push(_){_._scissorRectLocal||this.calcScissorRect(_);const{gl:et}=this.renderer;_._scissorRect||et.enable(et.SCISSOR_TEST),_._scissorCounter++,_._scissorRect=_._scissorRectLocal,this._useCurrent()}pop(_){const{gl:et}=this.renderer;_&&rectPool.push(_._scissorRectLocal),this.getStackLength()>0?this._useCurrent():et.disable(et.SCISSOR_TEST)}_useCurrent(){const _=this.maskStack[this.maskStack.length-1]._scissorRect;let et;this.renderer.renderTexture.current?et=_.y:et=this.renderer.height-_.height-_.y,this.renderer.gl.scissor(_.x,et,_.width,_.height)}};_ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"};let ScissorSystem=_ScissorSystem;extensions$2.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._stencilCounter:0}push(_){const et=_.maskObject,{gl:tt}=this.renderer,nt=_._stencilCounter;nt===0&&(this.renderer.framebuffer.forceStencil(),tt.clearStencil(0),tt.clear(tt.STENCIL_BUFFER_BIT),tt.enable(tt.STENCIL_TEST)),_._stencilCounter++;const it=_._colorMask;it!==0&&(_._colorMask=0,tt.colorMask(!1,!1,!1,!1)),tt.stencilFunc(tt.EQUAL,nt,4294967295),tt.stencilOp(tt.KEEP,tt.KEEP,tt.INCR),et.renderable=!0,et.render(this.renderer),this.renderer.batch.flush(),et.renderable=!1,it!==0&&(_._colorMask=it,tt.colorMask((it&1)!==0,(it&2)!==0,(it&4)!==0,(it&8)!==0)),this._useCurrent()}pop(_){const et=this.renderer.gl;if(this.getStackLength()===0)et.disable(et.STENCIL_TEST);else{const tt=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,nt=tt?tt._colorMask:15;nt!==0&&(tt._colorMask=0,et.colorMask(!1,!1,!1,!1)),et.stencilOp(et.KEEP,et.KEEP,et.DECR),_.renderable=!0,_.render(this.renderer),this.renderer.batch.flush(),_.renderable=!1,nt!==0&&(tt._colorMask=nt,et.colorMask((nt&1)!==0,(nt&2)!==0,(nt&4)!==0,(nt&8)!==0)),this._useCurrent()}}_useCurrent(){const _=this.renderer.gl;_.stencilFunc(_.EQUAL,this.getStackLength(),4294967295),_.stencilOp(_.KEEP,_.KEEP,_.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"};extensions$2.add(StencilSystem);class PluginSystem{constructor(_){this.renderer=_,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),_.extract}},prepare:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),_.prepare}},interaction:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),_.events}}})}init(){const _=this.rendererPlugins;for(const et in _)this.plugins[et]=new _[et](this.renderer)}destroy(){for(const _ in this.plugins)this.plugins[_].destroy(),this.plugins[_]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"};extensions$2.add(PluginSystem);class ProjectionSystem{constructor(_){this.renderer=_,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(_,et,tt,nt){this.destinationFrame=_||this.destinationFrame||this.defaultFrame,this.sourceFrame=et||this.sourceFrame||_,this.calculateProjection(this.destinationFrame,this.sourceFrame,tt,nt),this.transform&&this.projectionMatrix.append(this.transform);const it=this.renderer;it.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,it.globalUniforms.update(),it.shader.shader&&it.shader.syncUniformGroup(it.shader.shader.uniforms.globals)}calculateProjection(_,et,tt,nt){const it=this.projectionMatrix,at=nt?-1:1;it.identity(),it.a=1/et.width*2,it.d=at*(1/et.height*2),it.tx=-1-et.x*it.a,it.ty=-at-et.y*it.d}setTransform(_){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"};extensions$2.add(ProjectionSystem);const tempTransform=new Transform,tempRect$1=new Rectangle;class GenerateTextureSystem{constructor(_){this.renderer=_,this._tempMatrix=new Matrix}generateTexture(_,et){const{region:tt,...nt}=et||{},it=(tt==null?void 0:tt.copyTo(tempRect$1))||_.getLocalBounds(tempRect$1,!0),at=nt.resolution||this.renderer.resolution;it.width=Math.max(it.width,1/at),it.height=Math.max(it.height,1/at),nt.width=it.width,nt.height=it.height,nt.resolution=at,nt.multisample??(nt.multisample=this.renderer.multisample);const ot=RenderTexture.create(nt);this._tempMatrix.tx=-it.x,this._tempMatrix.ty=-it.y;const st=_.transform;return _.transform=tempTransform,this.renderer.render(_,{renderTexture:ot,transform:this._tempMatrix,skipUpdateTransform:!!_.parent,blit:!0}),_.transform=st,ot}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"};extensions$2.add(GenerateTextureSystem);const tempRect=new Rectangle,tempRect2=new Rectangle;class RenderTextureSystem{constructor(_){this.renderer=_,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}contextChange(){var et;const _=(et=this.renderer)==null?void 0:et.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}bind(_=null,et,tt){const nt=this.renderer;this.current=_;let it,at,ot;_?(it=_.baseTexture,ot=it.resolution,et||(tempRect.width=_.frame.width,tempRect.height=_.frame.height,et=tempRect),tt||(tempRect2.x=_.frame.x,tempRect2.y=_.frame.y,tempRect2.width=et.width,tempRect2.height=et.height,tt=tempRect2),at=it.framebuffer):(ot=nt.resolution,et||(tempRect.width=nt._view.screen.width,tempRect.height=nt._view.screen.height,et=tempRect),tt||(tt=tempRect,tt.width=et.width,tt.height=et.height));const st=this.viewportFrame;st.x=tt.x*ot,st.y=tt.y*ot,st.width=tt.width*ot,st.height=tt.height*ot,_||(st.y=nt.view.height-(st.y+st.height)),st.ceil(),this.renderer.framebuffer.bind(at,st),this.renderer.projection.update(tt,et,ot,!at),_?this.renderer.mask.setMaskStack(it.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(et),this.destinationFrame.copyFrom(tt)}clear(_,et){const tt=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,nt=Color.shared.setValue(_||tt);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&nt.premultiply(nt.alpha);const it=this.destinationFrame,at=this.current?this.current.baseTexture:this.renderer._view.screen,ot=it.width!==at.width||it.height!==at.height;if(ot){let{x:st,y:dt,width:ht,height:ct}=this.viewportFrame;st=Math.round(st),dt=Math.round(dt),ht=Math.round(ht),ct=Math.round(ct),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(st,dt,ht,ct)}this.renderer.framebuffer.clear(nt.red,nt.green,nt.blue,nt.alpha,et),ot&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"};extensions$2.add(RenderTextureSystem);class GLProgram{constructor(_,et){this.program=_,this.uniformData=et,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(_e,_){const et={},tt=_.getProgramParameter(_e,_.ACTIVE_ATTRIBUTES);for(let nt=0;nt<tt;nt++){const it=_.getActiveAttrib(_e,nt);if(it.name.startsWith("gl_"))continue;const at=mapType(_,it.type),ot={type:at,name:it.name,size:mapSize(at),location:_.getAttribLocation(_e,it.name)};et[it.name]=ot}return et}function getUniformData(_e,_){const et={},tt=_.getProgramParameter(_e,_.ACTIVE_UNIFORMS);for(let nt=0;nt<tt;nt++){const it=_.getActiveUniform(_e,nt),at=it.name.replace(/\[.*?\]$/,""),ot=!!it.name.match(/\[.*?\]$/),st=mapType(_,it.type);et[at]={name:at,index:nt,type:st,size:it.size,isArray:ot,value:defaultValue(st,it.size)}}return et}function generateProgram(_e,_){var ot;const et=compileShader(_e,_e.VERTEX_SHADER,_.vertexSrc),tt=compileShader(_e,_e.FRAGMENT_SHADER,_.fragmentSrc),nt=_e.createProgram();_e.attachShader(nt,et),_e.attachShader(nt,tt);const it=(ot=_.extra)==null?void 0:ot.transformFeedbackVaryings;if(it&&(typeof _e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):_e.transformFeedbackVaryings(nt,it.names,it.bufferMode==="separate"?_e.SEPARATE_ATTRIBS:_e.INTERLEAVED_ATTRIBS)),_e.linkProgram(nt),_e.getProgramParameter(nt,_e.LINK_STATUS)||logProgramError(_e,nt,et,tt),_.attributeData=getAttributeData(nt,_e),_.uniformData=getUniformData(nt,_e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(_.vertexSrc)){const st=Object.keys(_.attributeData);st.sort((dt,ht)=>dt>ht?1:-1);for(let dt=0;dt<st.length;dt++)_.attributeData[st[dt]].location=dt,_e.bindAttribLocation(nt,dt,st[dt]);_e.linkProgram(nt)}_e.deleteShader(et),_e.deleteShader(tt);const at={};for(const st in _.uniformData){const dt=_.uniformData[st];at[st]={location:_e.getUniformLocation(nt,st),value:defaultValue(dt.type,dt.size)}}return new GLProgram(nt,at)}function uboUpdate(_e,_,et,tt,nt){et.buffer.update(nt)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(_e){const _=_e.map(it=>({data:it,offset:0,dataLen:0,dirty:0}));let et=0,tt=0,nt=0;for(let it=0;it<_.length;it++){const at=_[it];if(et=GLSL_TO_STD40_SIZE[at.data.type],at.data.size>1&&(et=Math.max(et,16)*at.data.size),at.dataLen=et,tt%et!==0&&tt<16){const ot=tt%et%16;tt+=ot,nt+=ot}tt+et>16?(nt=Math.ceil(nt/16)*16,at.offset=nt,nt+=et,tt=et):(at.offset=nt,tt+=et,nt+=et)}return nt=Math.ceil(nt/16)*16,{uboElements:_,size:nt}}function getUBOData(_e,_){const et=[];for(const tt in _e)_[tt]&&et.push(_[tt]);return et.sort((tt,nt)=>tt.index-nt.index),et}function generateUniformBufferSync(_e,_){if(!_e.autoManage)return{size:0,syncFunc:uboUpdate};const et=getUBOData(_e.uniforms,_),{uboElements:tt,size:nt}=createUBOElements(et),it=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let at=0;at<tt.length;at++){const ot=tt[at],st=_e.uniforms[ot.data.name],dt=ot.data.name;let ht=!1;for(let ct=0;ct<uniformParsers.length;ct++){const ut=uniformParsers[ct];if(ut.codeUbo&&ut.test(ot.data,st)){it.push(`offset = ${ot.offset/4};`,uniformParsers[ct].codeUbo(ot.data.name,st)),ht=!0;break}}if(!ht)if(ot.data.size>1){const ct=mapSize(ot.data.type),ut=Math.max(GLSL_TO_STD40_SIZE[ot.data.type]/16,1),ft=ct/ut,gt=(4-ft%4)%4;it.push(`
                cv = ud.${dt}.value;
                v = uv.${dt};
                offset = ${ot.offset/4};

                t = 0;

                for(var i=0; i < ${ot.data.size*ut}; i++)
                {
                    for(var j = 0; j < ${ft}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${gt};
                }

                `)}else{const ct=UBO_TO_SINGLE_SETTERS[ot.data.type];it.push(`
                cv = ud.${dt}.value;
                v = uv.${dt};
                offset = ${ot.offset/4};
                ${ct};
                `)}}return it.push(`
       renderer.buffer.update(buffer);
    `),{size:nt,syncFunc:new Function("ud","uv","renderer","syncData","buffer",it.join(`
`))}}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(_){this.destroyed=!1,this.renderer=_,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(_){this.gl=_,this.reset()}bind(_,et){_.disposeRunner.add(this),_.uniforms.globals=this.renderer.globalUniforms;const tt=_.program,nt=tt.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(_);return this.shader=_,this.program!==tt&&(this.program=tt,this.gl.useProgram(nt.program)),et||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(_.uniformGroup,defaultSyncData)),nt}setUniforms(_){const et=this.shader.program,tt=et.glPrograms[this.renderer.CONTEXT_UID];et.syncUniforms(tt.uniformData,_,this.renderer)}syncUniformGroup(_,et){const tt=this.getGlProgram();(!_.static||_.dirtyId!==tt.uniformDirtyGroups[_.id])&&(tt.uniformDirtyGroups[_.id]=_.dirtyId,this.syncUniforms(_,tt,et))}syncUniforms(_,et,tt){(_.syncUniforms[this.shader.program.id]||this.createSyncGroups(_))(et.uniformData,_.uniforms,this.renderer,tt)}createSyncGroups(_){const et=this.getSignature(_,this.shader.program.uniformData,"u");return this.cache[et]||(this.cache[et]=generateUniformsSync(_,this.shader.program.uniformData)),_.syncUniforms[this.shader.program.id]=this.cache[et],_.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(_,et){const tt=this.getGlProgram();if(!_.static||_.dirtyId!==0||!tt.uniformGroups[_.id]){_.dirtyId=0;const nt=tt.uniformGroups[_.id]||this.createSyncBufferGroup(_,tt,et);_.buffer.update(),nt(tt.uniformData,_.uniforms,this.renderer,defaultSyncData,_.buffer)}this.renderer.buffer.bindBufferBase(_.buffer,tt.uniformBufferBindings[et])}createSyncBufferGroup(_,et,tt){const{gl:nt}=this.renderer;this.renderer.buffer.bind(_.buffer);const it=this.gl.getUniformBlockIndex(et.program,tt);et.uniformBufferBindings[tt]=this.shader.uniformBindCount,nt.uniformBlockBinding(et.program,it,this.shader.uniformBindCount),this.shader.uniformBindCount++;const at=this.getSignature(_,this.shader.program.uniformData,"ubo");let ot=this._uboCache[at];if(ot||(ot=this._uboCache[at]=generateUniformBufferSync(_,this.shader.program.uniformData)),_.autoManage){const st=new Float32Array(ot.size/4);_.buffer.update(st)}return et.uniformGroups[_.id]=ot.syncFunc,et.uniformGroups[_.id]}getSignature(_,et,tt){const nt=_.uniforms,it=[`${tt}-`];for(const at in nt)it.push(at),et[at]&&it.push(et[at].type);return it.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(_){const et=this.gl,tt=_.program,nt=generateProgram(et,tt);return tt.glPrograms[this.renderer.CONTEXT_UID]=nt,nt}reset(){this.program=null,this.shader=null}disposeShader(_){this.shader===_&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"};extensions$2.add(ShaderSystem);class StartupSystem{constructor(_){this.renderer=_}run(_){const{renderer:et}=this;et.runners.init.emit(et.options),_.hello&&console.log(`PixiJS 7.4.2 - ${et.rendererLogId} - https://pixijs.com`),et.resize(et.screen.width,et.screen.height)}destroy(){}}StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"};extensions$2.add(StartupSystem);function mapWebGLBlendModesToPixi(_e,_=[]){return _[BLEND_MODES.NORMAL]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD]=[_e.ONE,_e.ONE],_[BLEND_MODES.MULTIPLY]=[_e.DST_COLOR,_e.ONE_MINUS_SRC_ALPHA,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SCREEN]=[_e.ONE,_e.ONE_MINUS_SRC_COLOR,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.OVERLAY]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DARKEN]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LIGHTEN]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_DODGE]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_BURN]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HARD_LIGHT]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SOFT_LIGHT]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DIFFERENCE]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.EXCLUSION]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HUE]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SATURATION]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LUMINOSITY]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.NONE]=[0,0],_[BLEND_MODES.NORMAL_NPM]=[_e.SRC_ALPHA,_e.ONE_MINUS_SRC_ALPHA,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD_NPM]=[_e.SRC_ALPHA,_e.ONE,_e.ONE,_e.ONE],_[BLEND_MODES.SCREEN_NPM]=[_e.SRC_ALPHA,_e.ONE_MINUS_SRC_COLOR,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SRC_IN]=[_e.DST_ALPHA,_e.ZERO],_[BLEND_MODES.SRC_OUT]=[_e.ONE_MINUS_DST_ALPHA,_e.ZERO],_[BLEND_MODES.SRC_ATOP]=[_e.DST_ALPHA,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_OVER]=[_e.ONE_MINUS_DST_ALPHA,_e.ONE],_[BLEND_MODES.DST_IN]=[_e.ZERO,_e.SRC_ALPHA],_[BLEND_MODES.DST_OUT]=[_e.ZERO,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_ATOP]=[_e.ONE_MINUS_DST_ALPHA,_e.SRC_ALPHA],_[BLEND_MODES.XOR]=[_e.ONE_MINUS_DST_ALPHA,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SUBTRACT]=[_e.ONE,_e.ONE,_e.ONE,_e.ONE,_e.FUNC_REVERSE_SUBTRACT,_e.FUNC_ADD],_}const BLEND=0,OFFSET$1=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class No{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET$1]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(_){this.gl=_,this.blendModes=mapWebGLBlendModesToPixi(_),this.set(this.defaultState),this.reset()}set(_){if(_=_||this.defaultState,this.stateId!==_.data){let et=this.stateId^_.data,tt=0;for(;et;)et&1&&this.map[tt].call(this,!!(_.data&1<<tt)),et=et>>1,tt++;this.stateId=_.data}for(let et=0;et<this.checks.length;et++)this.checks[et](this,_)}forceState(_){_=_||this.defaultState;for(let et=0;et<this.map.length;et++)this.map[et].call(this,!!(_.data&1<<et));for(let et=0;et<this.checks.length;et++)this.checks[et](this,_);this.stateId=_.data}setBlend(_){this.updateCheck(No.checkBlendMode,_),this.gl[_?"enable":"disable"](this.gl.BLEND)}setOffset(_){this.updateCheck(No.checkPolygonOffset,_),this.gl[_?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(_){this.gl[_?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(_){this.gl.depthMask(_)}setCullFace(_){this.gl[_?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(_){this.gl.frontFace(this.gl[_?"CW":"CCW"])}setBlendMode(_){if(_===this.blendMode)return;this.blendMode=_;const et=this.blendModes[_],tt=this.gl;et.length===2?tt.blendFunc(et[0],et[1]):tt.blendFuncSeparate(et[0],et[1],et[2],et[3]),et.length===6?(this._blendEq=!0,tt.blendEquationSeparate(et[4],et[5])):this._blendEq&&(this._blendEq=!1,tt.blendEquationSeparate(tt.FUNC_ADD,tt.FUNC_ADD))}setPolygonOffset(_,et){this.gl.polygonOffset(_,et)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(_,et){const tt=this.checks.indexOf(_);et&&tt===-1?this.checks.push(_):!et&&tt!==-1&&this.checks.splice(tt,1)}static checkBlendMode(_,et){_.setBlendMode(et.blendMode)}static checkPolygonOffset(_,et){_.setPolygonOffset(1,et.polygonOffset)}destroy(){this.gl=null}};_StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"};let StateSystem=_StateSystem;extensions$2.add(StateSystem);class SystemManager extends EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(_){this.addRunners(..._.runners);const et=(_.priority??[]).filter(nt=>_.systems[nt]),tt=[...et,...Object.keys(_.systems).filter(nt=>!et.includes(nt))];for(const nt of tt)this.addSystem(_.systems[nt],nt)}addRunners(..._){_.forEach(et=>{this.runners[et]=new Runner(et)})}addSystem(_,et){const tt=new _(this);if(this[et])throw new Error(`Whoops! The name "${et}" is already in use`);this[et]=tt,this._systemsHash[et]=tt;for(const nt in this.runners)this.runners[nt].add(tt);return this}emitWithCustomOptions(_,et){const tt=Object.keys(this._systemsHash);_.items.forEach(nt=>{const it=tt.find(at=>this._systemsHash[at]===nt);nt[_.name](et[it])})}destroy(){Object.values(this.runners).forEach(_=>{_.destroy()}),this._systemsHash={}}}const _TextureGCSystem=class Po{constructor(_){this.renderer=_,this.count=0,this.checkCount=0,this.maxIdle=Po.defaultMaxIdle,this.checkCountMax=Po.defaultCheckCountMax,this.mode=Po.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const _=this.renderer.texture,et=_.managedTextures;let tt=!1;for(let nt=0;nt<et.length;nt++){const it=et[nt];it.resource&&this.count-it.touched>this.maxIdle&&(_.destroyTexture(it,!0),et[nt]=null,tt=!0)}if(tt){let nt=0;for(let it=0;it<et.length;it++)et[it]!==null&&(et[nt++]=et[it]);et.length=nt}}unload(_){const et=this.renderer.texture,tt=_._texture;tt&&!tt.framebuffer&&et.destroyTexture(tt);for(let nt=_.children.length-1;nt>=0;nt--)this.unload(_.children[nt])}destroy(){this.renderer=null}};_TextureGCSystem.defaultMode=GC_MODES.AUTO,_TextureGCSystem.defaultMaxIdle=60*60,_TextureGCSystem.defaultCheckCountMax=60*10,_TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"};let TextureGCSystem=_TextureGCSystem;extensions$2.add(TextureGCSystem);class GLTexture{constructor(_){this.texture=_,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}function mapInternalFormatToSamplerType(_e){let _;return"WebGL2RenderingContext"in globalThis&&_e instanceof globalThis.WebGL2RenderingContext?_={[_e.RGB]:SAMPLER_TYPES.FLOAT,[_e.RGBA]:SAMPLER_TYPES.FLOAT,[_e.ALPHA]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[_e.R8]:SAMPLER_TYPES.FLOAT,[_e.R8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RG8]:SAMPLER_TYPES.FLOAT,[_e.RG8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RGB8]:SAMPLER_TYPES.FLOAT,[_e.RGB8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RGB565]:SAMPLER_TYPES.FLOAT,[_e.RGBA4]:SAMPLER_TYPES.FLOAT,[_e.RGB5_A1]:SAMPLER_TYPES.FLOAT,[_e.RGBA8]:SAMPLER_TYPES.FLOAT,[_e.RGBA8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RGB10_A2]:SAMPLER_TYPES.FLOAT,[_e.RGB10_A2UI]:SAMPLER_TYPES.FLOAT,[_e.SRGB8]:SAMPLER_TYPES.FLOAT,[_e.SRGB8_ALPHA8]:SAMPLER_TYPES.FLOAT,[_e.R16F]:SAMPLER_TYPES.FLOAT,[_e.RG16F]:SAMPLER_TYPES.FLOAT,[_e.RGB16F]:SAMPLER_TYPES.FLOAT,[_e.RGBA16F]:SAMPLER_TYPES.FLOAT,[_e.R32F]:SAMPLER_TYPES.FLOAT,[_e.RG32F]:SAMPLER_TYPES.FLOAT,[_e.RGB32F]:SAMPLER_TYPES.FLOAT,[_e.RGBA32F]:SAMPLER_TYPES.FLOAT,[_e.R11F_G11F_B10F]:SAMPLER_TYPES.FLOAT,[_e.RGB9_E5]:SAMPLER_TYPES.FLOAT,[_e.R8I]:SAMPLER_TYPES.INT,[_e.R8UI]:SAMPLER_TYPES.UINT,[_e.R16I]:SAMPLER_TYPES.INT,[_e.R16UI]:SAMPLER_TYPES.UINT,[_e.R32I]:SAMPLER_TYPES.INT,[_e.R32UI]:SAMPLER_TYPES.UINT,[_e.RG8I]:SAMPLER_TYPES.INT,[_e.RG8UI]:SAMPLER_TYPES.UINT,[_e.RG16I]:SAMPLER_TYPES.INT,[_e.RG16UI]:SAMPLER_TYPES.UINT,[_e.RG32I]:SAMPLER_TYPES.INT,[_e.RG32UI]:SAMPLER_TYPES.UINT,[_e.RGB8I]:SAMPLER_TYPES.INT,[_e.RGB8UI]:SAMPLER_TYPES.UINT,[_e.RGB16I]:SAMPLER_TYPES.INT,[_e.RGB16UI]:SAMPLER_TYPES.UINT,[_e.RGB32I]:SAMPLER_TYPES.INT,[_e.RGB32UI]:SAMPLER_TYPES.UINT,[_e.RGBA8I]:SAMPLER_TYPES.INT,[_e.RGBA8UI]:SAMPLER_TYPES.UINT,[_e.RGBA16I]:SAMPLER_TYPES.INT,[_e.RGBA16UI]:SAMPLER_TYPES.UINT,[_e.RGBA32I]:SAMPLER_TYPES.INT,[_e.RGBA32UI]:SAMPLER_TYPES.UINT,[_e.DEPTH_COMPONENT16]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_COMPONENT24]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_COMPONENT32F]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT,[_e.DEPTH24_STENCIL8]:SAMPLER_TYPES.FLOAT,[_e.DEPTH32F_STENCIL8]:SAMPLER_TYPES.FLOAT}:_={[_e.RGB]:SAMPLER_TYPES.FLOAT,[_e.RGBA]:SAMPLER_TYPES.FLOAT,[_e.ALPHA]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT},_}function mapTypeAndFormatToInternalFormat(_e){let _;return"WebGL2RenderingContext"in globalThis&&_e instanceof globalThis.WebGL2RenderingContext?_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:_e.RGBA8,[FORMATS.RGB]:_e.RGB8,[FORMATS.RG]:_e.RG8,[FORMATS.RED]:_e.R8,[FORMATS.RGBA_INTEGER]:_e.RGBA8UI,[FORMATS.RGB_INTEGER]:_e.RGB8UI,[FORMATS.RG_INTEGER]:_e.RG8UI,[FORMATS.RED_INTEGER]:_e.R8UI,[FORMATS.ALPHA]:_e.ALPHA,[FORMATS.LUMINANCE]:_e.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:_e.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:_e.RGBA8_SNORM,[FORMATS.RGB]:_e.RGB8_SNORM,[FORMATS.RG]:_e.RG8_SNORM,[FORMATS.RED]:_e.R8_SNORM,[FORMATS.RGBA_INTEGER]:_e.RGBA8I,[FORMATS.RGB_INTEGER]:_e.RGB8I,[FORMATS.RG_INTEGER]:_e.RG8I,[FORMATS.RED_INTEGER]:_e.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA16UI,[FORMATS.RGB_INTEGER]:_e.RGB16UI,[FORMATS.RG_INTEGER]:_e.RG16UI,[FORMATS.RED_INTEGER]:_e.R16UI,[FORMATS.DEPTH_COMPONENT]:_e.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA16I,[FORMATS.RGB_INTEGER]:_e.RGB16I,[FORMATS.RG_INTEGER]:_e.RG16I,[FORMATS.RED_INTEGER]:_e.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA32UI,[FORMATS.RGB_INTEGER]:_e.RGB32UI,[FORMATS.RG_INTEGER]:_e.RG32UI,[FORMATS.RED_INTEGER]:_e.R32UI,[FORMATS.DEPTH_COMPONENT]:_e.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA32I,[FORMATS.RGB_INTEGER]:_e.RGB32I,[FORMATS.RG_INTEGER]:_e.RG32I,[FORMATS.RED_INTEGER]:_e.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:_e.RGBA32F,[FORMATS.RGB]:_e.RGB32F,[FORMATS.RG]:_e.RG32F,[FORMATS.RED]:_e.R32F,[FORMATS.DEPTH_COMPONENT]:_e.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:_e.RGBA16F,[FORMATS.RGB]:_e.RGB16F,[FORMATS.RG]:_e.RG16F,[FORMATS.RED]:_e.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:_e.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:_e.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:_e.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:_e.RGB10_A2,[FORMATS.RGBA_INTEGER]:_e.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:_e.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:_e.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:_e.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:_e.DEPTH32F_STENCIL8}}:_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:_e.RGBA,[FORMATS.RGB]:_e.RGB,[FORMATS.ALPHA]:_e.ALPHA,[FORMATS.LUMINANCE]:_e.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:_e.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:_e.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:_e.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:_e.RGBA}},_}class TextureSystem{constructor(_){this.renderer=_,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const _=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(_),this.samplerTypes=mapInternalFormatToSamplerType(_);const et=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=et;for(let nt=0;nt<et;nt++)this.boundTextures[nt]=null;this.emptyTextures={};const tt=new GLTexture(_.createTexture());_.bindTexture(_.TEXTURE_2D,tt.texture),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[_.TEXTURE_2D]=tt,this.emptyTextures[_.TEXTURE_CUBE_MAP]=new GLTexture(_.createTexture()),_.bindTexture(_.TEXTURE_CUBE_MAP,this.emptyTextures[_.TEXTURE_CUBE_MAP].texture);for(let nt=0;nt<6;nt++)_.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+nt,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,null);_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MIN_FILTER,_.LINEAR);for(let nt=0;nt<this.boundTextures.length;nt++)this.bind(null,nt)}bind(_,et=0){const{gl:tt}=this;if(_=_==null?void 0:_.castToBaseTexture(),(_==null?void 0:_.valid)&&!_.parentTextureArray){_.touched=this.renderer.textureGC.count;const nt=_._glTextures[this.CONTEXT_UID]||this.initTexture(_);this.boundTextures[et]!==_&&(this.currentLocation!==et&&(this.currentLocation=et,tt.activeTexture(tt.TEXTURE0+et)),tt.bindTexture(_.target,nt.texture)),nt.dirtyId!==_.dirtyId?(this.currentLocation!==et&&(this.currentLocation=et,tt.activeTexture(tt.TEXTURE0+et)),this.updateTexture(_)):nt.dirtyStyleId!==_.dirtyStyleId&&this.updateTextureStyle(_),this.boundTextures[et]=_}else this.currentLocation!==et&&(this.currentLocation=et,tt.activeTexture(tt.TEXTURE0+et)),tt.bindTexture(tt.TEXTURE_2D,this.emptyTextures[tt.TEXTURE_2D].texture),this.boundTextures[et]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let _=0;_<this.boundTextures.length;_++)this.boundTextures[_]=this.unknownTexture}unbind(_){const{gl:et,boundTextures:tt}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let nt=0;nt<tt.length;nt++)tt[nt]===this.unknownTexture&&this.bind(null,nt)}for(let nt=0;nt<tt.length;nt++)tt[nt]===_&&(this.currentLocation!==nt&&(et.activeTexture(et.TEXTURE0+nt),this.currentLocation=nt),et.bindTexture(_.target,this.emptyTextures[_.target].texture),tt[nt]=null)}ensureSamplerType(_){const{boundTextures:et,hasIntegerTextures:tt,CONTEXT_UID:nt}=this;if(tt)for(let it=_-1;it>=0;--it){const at=et[it];at&&at._glTextures[nt].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(at)}}initTexture(_){const et=new GLTexture(this.gl.createTexture());return et.dirtyId=-1,_._glTextures[this.CONTEXT_UID]=et,this.managedTextures.push(_),_.on("dispose",this.destroyTexture,this),et}initTextureType(_,et){var tt;et.internalFormat=((tt=this.internalFormats[_.type])==null?void 0:tt[_.format])??_.format,et.samplerType=this.samplerTypes[et.internalFormat]??SAMPLER_TYPES.FLOAT,this.webGLVersion===2&&_.type===TYPES.HALF_FLOAT?et.type=this.gl.HALF_FLOAT:et.type=_.type}updateTexture(_){var nt;const et=_._glTextures[this.CONTEXT_UID];if(!et)return;const tt=this.renderer;if(this.initTextureType(_,et),(nt=_.resource)==null?void 0:nt.upload(tt,_,et))et.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const it=_.realWidth,at=_.realHeight,ot=tt.gl;(et.width!==it||et.height!==at||et.dirtyId<0)&&(et.width=it,et.height=at,ot.texImage2D(_.target,0,et.internalFormat,it,at,0,_.format,et.type,null))}_.dirtyStyleId!==et.dirtyStyleId&&this.updateTextureStyle(_),et.dirtyId=_.dirtyId}destroyTexture(_,et){const{gl:tt}=this;if(_=_.castToBaseTexture(),_._glTextures[this.CONTEXT_UID]&&(this.unbind(_),tt.deleteTexture(_._glTextures[this.CONTEXT_UID].texture),_.off("dispose",this.destroyTexture,this),delete _._glTextures[this.CONTEXT_UID],!et)){const nt=this.managedTextures.indexOf(_);nt!==-1&&removeItems(this.managedTextures,nt,1)}}updateTextureStyle(_){var tt;const et=_._glTextures[this.CONTEXT_UID];et&&((_.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!_.isPowerOfTwo?et.mipmap=!1:et.mipmap=_.mipmap>=1,this.webGLVersion!==2&&!_.isPowerOfTwo?et.wrapMode=WRAP_MODES.CLAMP:et.wrapMode=_.wrapMode,(tt=_.resource)!=null&&tt.style(this.renderer,_,et)||this.setStyle(_,et),et.dirtyStyleId=_.dirtyStyleId)}setStyle(_,et){const tt=this.gl;if(et.mipmap&&_.mipmap!==MIPMAP_MODES.ON_MANUAL&&tt.generateMipmap(_.target),tt.texParameteri(_.target,tt.TEXTURE_WRAP_S,et.wrapMode),tt.texParameteri(_.target,tt.TEXTURE_WRAP_T,et.wrapMode),et.mipmap){tt.texParameteri(_.target,tt.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR_MIPMAP_LINEAR:tt.NEAREST_MIPMAP_NEAREST);const nt=this.renderer.context.extensions.anisotropicFiltering;if(nt&&_.anisotropicLevel>0&&_.scaleMode===SCALE_MODES.LINEAR){const it=Math.min(_.anisotropicLevel,tt.getParameter(nt.MAX_TEXTURE_MAX_ANISOTROPY_EXT));tt.texParameterf(_.target,nt.TEXTURE_MAX_ANISOTROPY_EXT,it)}}else tt.texParameteri(_.target,tt.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR:tt.NEAREST);tt.texParameteri(_.target,tt.TEXTURE_MAG_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR:tt.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"};extensions$2.add(TextureSystem);class TransformFeedbackSystem{constructor(_){this.renderer=_}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:et,CONTEXT_UID:tt}=this,nt=_._glTransformFeedbacks[tt]||this.createGLTransformFeedback(_);et.bindTransformFeedback(et.TRANSFORM_FEEDBACK,nt)}unbind(){const{gl:_}=this;_.bindTransformFeedback(_.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(_,et){const{gl:tt,renderer:nt}=this;et&&nt.shader.bind(et),tt.beginTransformFeedback(_)}endTransformFeedback(){const{gl:_}=this;_.endTransformFeedback()}createGLTransformFeedback(_){const{gl:et,renderer:tt,CONTEXT_UID:nt}=this,it=et.createTransformFeedback();_._glTransformFeedbacks[nt]=it,et.bindTransformFeedback(et.TRANSFORM_FEEDBACK,it);for(let at=0;at<_.buffers.length;at++){const ot=_.buffers[at];ot&&(tt.buffer.update(ot),ot._glBuffers[nt].refCount++,et.bindBufferBase(et.TRANSFORM_FEEDBACK_BUFFER,at,ot._glBuffers[nt].buffer||null))}return et.bindTransformFeedback(et.TRANSFORM_FEEDBACK,null),_.disposeRunner.add(this),it}disposeTransformFeedback(_,et){const tt=_._glTransformFeedbacks[this.CONTEXT_UID],nt=this.gl;_.disposeRunner.remove(this);const it=this.renderer.buffer;if(it)for(let at=0;at<_.buffers.length;at++){const ot=_.buffers[at];if(!ot)continue;const st=ot._glBuffers[this.CONTEXT_UID];st&&(st.refCount--,st.refCount===0&&!et&&it.dispose(ot,et))}tt&&(et||nt.deleteTransformFeedback(tt),delete _._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"};extensions$2.add(TransformFeedbackSystem);class ViewSystem{constructor(_){this.renderer=_}init(_){this.screen=new Rectangle(0,0,_.width,_.height),this.element=_.view||settings.ADAPTER.createCanvas(),this.resolution=_.resolution||settings.RESOLUTION,this.autoDensity=!!_.autoDensity}resizeView(_,et){this.element.width=Math.round(_*this.resolution),this.element.height=Math.round(et*this.resolution);const tt=this.element.width/this.resolution,nt=this.element.height/this.resolution;this.screen.width=tt,this.screen.height=nt,this.autoDensity&&(this.element.style.width=`${tt}px`,this.element.style.height=`${nt}px`),this.renderer.emit("resize",tt,nt),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(_){var et;_&&((et=this.element.parentNode)==null||et.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"};extensions$2.add(ViewSystem);settings.PREFER_ENV=ENV.WEBGL2;settings.STRICT_TEXTURE_CACHE=!1;settings.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions};Object.defineProperties(settings,{WRAP_MODE:{get(){return BaseTexture.defaultOptions.wrapMode},set(_e){deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),BaseTexture.defaultOptions.wrapMode=_e}},SCALE_MODE:{get(){return BaseTexture.defaultOptions.scaleMode},set(_e){deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),BaseTexture.defaultOptions.scaleMode=_e}},MIPMAP_TEXTURES:{get(){return BaseTexture.defaultOptions.mipmap},set(_e){deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),BaseTexture.defaultOptions.mipmap=_e}},ANISOTROPIC_LEVEL:{get(){return BaseTexture.defaultOptions.anisotropicLevel},set(_e){deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),BaseTexture.defaultOptions.anisotropicLevel=_e}},FILTER_RESOLUTION:{get(){return deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Filter.defaultResolution},set(_e){Filter.defaultResolution=_e}},FILTER_MULTISAMPLE:{get(){return deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Filter.defaultMultisample},set(_e){Filter.defaultMultisample=_e}},SPRITE_MAX_TEXTURES:{get(){return BatchRenderer.defaultMaxTextures},set(_e){deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),BatchRenderer.defaultMaxTextures=_e}},SPRITE_BATCH_SIZE:{get(){return BatchRenderer.defaultBatchSize},set(_e){deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),BatchRenderer.defaultBatchSize=_e}},CAN_UPLOAD_SAME_BUFFER:{get(){return BatchRenderer.canUploadSameBuffer},set(_e){deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),BatchRenderer.canUploadSameBuffer=_e}},GC_MODE:{get(){return TextureGCSystem.defaultMode},set(_e){deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TextureGCSystem.defaultMode=_e}},GC_MAX_IDLE:{get(){return TextureGCSystem.defaultMaxIdle},set(_e){deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TextureGCSystem.defaultMaxIdle=_e}},GC_MAX_CHECK_COUNT:{get(){return TextureGCSystem.defaultCheckCountMax},set(_e){deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TextureGCSystem.defaultCheckCountMax=_e}},PRECISION_VERTEX:{get(){return Program.defaultVertexPrecision},set(_e){deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Program.defaultVertexPrecision=_e}},PRECISION_FRAGMENT:{get(){return Program.defaultFragmentPrecision},set(_e){deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Program.defaultFragmentPrecision=_e}}});var UPDATE_PRIORITY=(_e=>(_e[_e.INTERACTION=50]="INTERACTION",_e[_e.HIGH=25]="HIGH",_e[_e.NORMAL=0]="NORMAL",_e[_e.LOW=-25]="LOW",_e[_e.UTILITY=-50]="UTILITY",_e))(UPDATE_PRIORITY||{});class TickerListener{constructor(_,et=null,tt=0,nt=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=_,this.context=et,this.priority=tt,this.once=nt}match(_,et=null){return this.fn===_&&this.context===et}emit(_){this.fn&&(this.context?this.fn.call(this.context,_):this.fn(_));const et=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),et}connect(_){this.previous=_,_.next&&(_.next.previous=this),this.next=_.next,_.next=this}destroy(_=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const et=this.next;return this.next=_?null:et,this.previous=null,et}}const _Ticker=class sn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/sn.targetFPMS,this.elapsedMS=1/sn.targetFPMS,this._tick=_=>{this._requestId=null,this.started&&(this.update(_),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(_,et,tt=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,et,tt))}addOnce(_,et,tt=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,et,tt,!0))}_addListener(_){let et=this._head.next,tt=this._head;if(!et)_.connect(tt);else{for(;et;){if(_.priority>et.priority){_.connect(tt);break}tt=et,et=et.next}_.previous||_.connect(tt)}return this._startIfPossible(),this}remove(_,et){let tt=this._head.next;for(;tt;)tt.match(_,et)?tt=tt.destroy():tt=tt.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let _=0,et=this._head;for(;et=et.next;)_++;return _}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let _=this._head.next;for(;_;)_=_.destroy(!0);this._head.destroy(),this._head=null}}update(_=performance.now()){let et;if(_>this.lastTime){if(et=this.elapsedMS=_-this.lastTime,et>this._maxElapsedMS&&(et=this._maxElapsedMS),et*=this.speed,this._minElapsedMS){const it=_-this._lastFrame|0;if(it<this._minElapsedMS)return;this._lastFrame=_-it%this._minElapsedMS}this.deltaMS=et,this.deltaTime=this.deltaMS*sn.targetFPMS;const tt=this._head;let nt=tt.next;for(;nt;)nt=nt.emit(this.deltaTime);tt.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=_}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(_){const et=Math.min(this.maxFPS,_),tt=Math.min(Math.max(0,et)/1e3,sn.targetFPMS);this._maxElapsedMS=1/tt}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(_){if(_===0)this._minElapsedMS=0;else{const et=Math.max(this.minFPS,_);this._minElapsedMS=1/(et/1e3)}}static get shared(){if(!sn._shared){const _=sn._shared=new sn;_.autoStart=!0,_._protected=!0}return sn._shared}static get system(){if(!sn._system){const _=sn._system=new sn;_.autoStart=!0,_._protected=!0}return sn._system}};_Ticker.targetFPMS=.06;let Ticker=_Ticker;Object.defineProperties(settings,{TARGET_FPMS:{get(){return Ticker.targetFPMS},set(_e){deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ticker.targetFPMS=_e}}});class TickerPlugin{static init(_){_=Object.assign({autoStart:!0,sharedTicker:!1},_),Object.defineProperty(this,"ticker",{set(et){this._ticker&&this._ticker.remove(this.render,this),this._ticker=et,et&&et.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=_.sharedTicker?Ticker.shared:new Ticker,_.autoStart&&this.start()}static destroy(){if(this._ticker){const _=this._ticker;this.ticker=null,_.destroy()}}}TickerPlugin.extension=ExtensionType.Application;extensions$2.add(TickerPlugin);const renderers=[];extensions$2.handleByList(ExtensionType.Renderer,renderers);function autoDetectRenderer(_e){for(const _ of renderers)if(_.test(_e))return new _(_e);throw new Error("Unable to auto-detect a suitable renderer.")}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const defaultVertex=$defaultVertex,defaultFilterVertex=$defaultFilterVertex;class MultisampleSystem{constructor(_){this.renderer=_}contextChange(_){let et;if(this.renderer.context.webGLVersion===1){const tt=_.getParameter(_.FRAMEBUFFER_BINDING);_.bindFramebuffer(_.FRAMEBUFFER,null),et=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.FRAMEBUFFER,tt)}else{const tt=_.getParameter(_.DRAW_FRAMEBUFFER_BINDING);_.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),et=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.DRAW_FRAMEBUFFER,tt)}et>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:et>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:et>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"};extensions$2.add(MultisampleSystem);class GLBuffer{constructor(_){this.buffer=_||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(_){this.renderer=_,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:et,CONTEXT_UID:tt}=this,nt=_._glBuffers[tt]||this.createGLBuffer(_);et.bindBuffer(_.type,nt.buffer)}unbind(_){const{gl:et}=this;et.bindBuffer(_,null)}bindBufferBase(_,et){const{gl:tt,CONTEXT_UID:nt}=this;if(this.boundBufferBases[et]!==_){const it=_._glBuffers[nt]||this.createGLBuffer(_);this.boundBufferBases[et]=_,tt.bindBufferBase(tt.UNIFORM_BUFFER,et,it.buffer)}}bindBufferRange(_,et,tt){const{gl:nt,CONTEXT_UID:it}=this;tt=tt||0;const at=_._glBuffers[it]||this.createGLBuffer(_);nt.bindBufferRange(nt.UNIFORM_BUFFER,et||0,at.buffer,tt*256,256)}update(_){const{gl:et,CONTEXT_UID:tt}=this,nt=_._glBuffers[tt]||this.createGLBuffer(_);if(_._updateID!==nt.updateID)if(nt.updateID=_._updateID,et.bindBuffer(_.type,nt.buffer),nt.byteLength>=_.data.byteLength)et.bufferSubData(_.type,0,_.data);else{const it=_.static?et.STATIC_DRAW:et.DYNAMIC_DRAW;nt.byteLength=_.data.byteLength,et.bufferData(_.type,_.data,it)}}dispose(_,et){if(!this.managedBuffers[_.id])return;delete this.managedBuffers[_.id];const tt=_._glBuffers[this.CONTEXT_UID],nt=this.gl;_.disposeRunner.remove(this),tt&&(et||nt.deleteBuffer(tt.buffer),delete _._glBuffers[this.CONTEXT_UID])}disposeAll(_){const et=Object.keys(this.managedBuffers);for(let tt=0;tt<et.length;tt++)this.dispose(this.managedBuffers[et[tt]],_)}createGLBuffer(_){const{CONTEXT_UID:et,gl:tt}=this;return _._glBuffers[et]=new GLBuffer(tt.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this),_._glBuffers[et]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"};extensions$2.add(BufferSystem);class ObjectRendererSystem{constructor(_){this.renderer=_}render(_,et){const tt=this.renderer;let nt,it,at,ot;if(et&&(nt=et.renderTexture,it=et.clear,at=et.transform,ot=et.skipUpdateTransform),this.renderingToScreen=!nt,tt.runners.prerender.emit(),tt.emit("prerender"),tt.projection.transform=at,!tt.context.isLost){if(nt||(this.lastObjectRendered=_),!ot){const st=_.enableTempParent();_.updateTransform(),_.disableTempParent(st)}tt.renderTexture.bind(nt),tt.batch.currentRenderer.start(),(it??tt.background.clearBeforeRender)&&tt.renderTexture.clear(),_.render(tt),tt.batch.currentRenderer.flush(),nt&&(et.blit&&tt.framebuffer.blit(),nt.baseTexture.update()),tt.runners.postrender.emit(),tt.projection.transform=null,tt.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"};extensions$2.add(ObjectRendererSystem);const _Renderer=class Fo extends SystemManager{constructor(_){super(),this.type=RENDERER_TYPE.WEBGL,_=Object.assign({},settings.RENDER_OPTIONS,_),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const et={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Fo.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(et),"useContextAlpha"in _&&(deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),_.premultipliedAlpha=_.useContextAlpha&&_.useContextAlpha!=="notMultiplied",_.backgroundAlpha=_.useContextAlpha===!1?1:_.backgroundAlpha),this._plugin.rendererPlugins=Fo.__plugins,this.options=_,this.startup.run(this.options)}static test(_){return _!=null&&_.forceCanvas?!1:isWebGLSupported()}render(_,et){this.objectRenderer.render(_,et)}resize(_,et){this._view.resizeView(_,et)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(_=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:_}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(_){this._view.resolution=_,this.runners.resolutionChange.emit(_)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(_){deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=_}get backgroundAlpha(){return deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(_){deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=_}get powerPreference(){return deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(_,et){return this.textureGenerator.generateTexture(_,et)}};_Renderer.extension={type:ExtensionType.Renderer,priority:1},_Renderer.__plugins={},_Renderer.__systems={};let Renderer=_Renderer;extensions$2.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins);extensions$2.handleByMap(ExtensionType.RendererSystem,Renderer.__systems);extensions$2.add(Renderer);class AbstractMultiResource extends Resource{constructor(_,et){const{width:tt,height:nt}=et||{};super(tt,nt),this.items=[],this.itemDirtyIds=[];for(let it=0;it<_;it++){const at=new BaseTexture;this.items.push(at),this.itemDirtyIds.push(-2)}this.length=_,this._load=null,this.baseTexture=null}initFromArray(_,et){for(let tt=0;tt<this.length;tt++)_[tt]&&(_[tt].castToBaseTexture?this.addBaseTextureAt(_[tt].castToBaseTexture(),tt):_[tt]instanceof Resource?this.addResourceAt(_[tt],tt):this.addResourceAt(autoDetectResource(_[tt],et),tt))}dispose(){for(let _=0,et=this.length;_<et;_++)this.items[_].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(_,et){if(!this.items[et])throw new Error(`Index ${et} is out of bounds`);return _.valid&&!this.valid&&this.resize(_.width,_.height),this.items[et].setResource(_),this}bind(_){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(_);for(let et=0;et<this.length;et++)this.items[et].parentTextureArray=_,this.items[et].on("update",_.update,_)}unbind(_){super.unbind(_);for(let et=0;et<this.length;et++)this.items[et].parentTextureArray=null,this.items[et].off("update",_.update,_)}load(){if(this._load)return this._load;const _=this.items.map(et=>et.resource).filter(et=>et).map(et=>et.load());return this._load=Promise.all(_).then(()=>{const{realWidth:et,realHeight:tt}=this.items[0];return this.resize(et,tt),this.update(),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(_,et){const{width:tt,height:nt}=et||{};let it,at;Array.isArray(_)?(it=_,at=_.length):at=_,super(at,{width:tt,height:nt}),it&&this.initFromArray(it,et)}addBaseTextureAt(_,et){if(_.resource)this.addResourceAt(_.resource,et);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_2D_ARRAY}upload(_,et,tt){const{length:nt,itemDirtyIds:it,items:at}=this,{gl:ot}=_;tt.dirtyId<0&&ot.texImage3D(ot.TEXTURE_2D_ARRAY,0,tt.internalFormat,this._width,this._height,nt,0,et.format,tt.type,null);for(let st=0;st<nt;st++){const dt=at[st];it[st]<dt.dirtyId&&(it[st]=dt.dirtyId,dt.valid&&ot.texSubImage3D(ot.TEXTURE_2D_ARRAY,0,0,0,st,dt.resource.width,dt.resource.height,1,et.format,tt.type,dt.resource.source))}return!0}}class CanvasResource extends BaseImageResource{constructor(_){super(_)}static test(_){const{OffscreenCanvas:et}=globalThis;return et&&_ instanceof et?!0:globalThis.HTMLCanvasElement&&_ instanceof HTMLCanvasElement}}const _CubeResource=class uo extends AbstractMultiResource{constructor(_,et){const{width:tt,height:nt,autoLoad:it,linkBaseTexture:at}=et||{};if(_&&_.length!==uo.SIDES)throw new Error(`Invalid length. Got ${_.length}, expected 6`);super(6,{width:tt,height:nt});for(let ot=0;ot<uo.SIDES;ot++)this.items[ot].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+ot;this.linkBaseTexture=at!==!1,_&&this.initFromArray(_,et),it!==!1&&this.load()}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(_,et,tt){if(tt===void 0&&(tt=this.linkBaseTexture),!this.items[et])throw new Error(`Index ${et} is out of bounds`);if(!this.linkBaseTexture||_.parentTextureArray||Object.keys(_._glTextures).length>0)if(_.resource)this.addResourceAt(_.resource,et);else throw new Error("CubeResource does not support copying of renderTexture.");else _.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+et,_.parentTextureArray=this.baseTexture,this.items[et]=_;return _.valid&&!this.valid&&this.resize(_.realWidth,_.realHeight),this.items[et]=_,this}upload(_,et,tt){const nt=this.itemDirtyIds;for(let it=0;it<uo.SIDES;it++){const at=this.items[it];(nt[it]<at.dirtyId||tt.dirtyId<et.dirtyId)&&(at.valid&&at.resource?(at.resource.upload(_,at,tt),nt[it]=at.dirtyId):nt[it]<-1&&(_.gl.texImage2D(at.target,0,tt.internalFormat,et.realWidth,et.realHeight,0,et.format,tt.type,null),nt[it]=-1))}return!0}static test(_){return Array.isArray(_)&&_.length===uo.SIDES}};_CubeResource.SIDES=6;let CubeResource=_CubeResource;class ImageBitmapResource extends BaseImageResource{constructor(_,et){et=et||{};let tt,nt,it;typeof _=="string"?(tt=ImageBitmapResource.EMPTY,nt=_,it=!0):(tt=_,nt=null,it=!1),super(tt),this.url=nt,this.crossOrigin=et.crossOrigin??!0,this.alphaMode=typeof et.alphaMode=="number"?et.alphaMode:null,this.ownsImageBitmap=et.ownsImageBitmap??it,this._load=null,et.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(_,et)=>{if(this.url===null){_(this);return}try{const tt=await settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const nt=await tt.blob();if(this.destroyed)return;const it=await createImageBitmap(nt,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed){it.close();return}this.source=it,this.update(),_(this)}catch(tt){if(this.destroyed)return;et(tt),this.onError.emit(tt)}}),this._load)}upload(_,et,tt){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(et.alphaMode=this.alphaMode),super.upload(_,et,tt)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(_){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof _=="string"||_ instanceof ImageBitmap)}static get EMPTY(){return ImageBitmapResource._EMPTY=ImageBitmapResource._EMPTY??settings.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}const _SVGResource=class Io extends BaseImageResource{constructor(_,et){et=et||{},super(settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=_,this.scale=et.scale||1,this._overrideWidth=et.width,this._overrideHeight=et.height,this._resolve=null,this._crossorigin=et.crossorigin,this._load=null,et.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(_=>{if(this._resolve=()=>{this.update(),_(this)},Io.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const _=new Image;BaseImageResource.crossOrigin(_,this.svg,this._crossorigin),_.src=this.svg,_.onerror=et=>{this._resolve&&(_.onerror=null,this.onError.emit(et))},_.onload=()=>{if(!this._resolve)return;const et=_.width,tt=_.height;if(!et||!tt)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let nt=et*this.scale,it=tt*this.scale;(this._overrideWidth||this._overrideHeight)&&(nt=this._overrideWidth||this._overrideHeight/tt*et,it=this._overrideHeight||this._overrideWidth/et*tt),nt=Math.round(nt),it=Math.round(it);const at=this.source;at.width=nt,at.height=it,at._pixiId=`canvas_${uid()}`,at.getContext("2d").drawImage(_,0,0,et,tt,0,0,nt,it),this._resolve(),this._resolve=null}}static getSize(_){const et=Io.SVG_SIZE.exec(_),tt={};return et&&(tt[et[1]]=Math.round(parseFloat(et[3])),tt[et[5]]=Math.round(parseFloat(et[7]))),tt}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(_,et){return et==="svg"||typeof _=="string"&&_.startsWith("data:image/svg+xml")||typeof _=="string"&&Io.SVG_XML.test(_)}};_SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let SVGResource=_SVGResource;class VideoFrameResource extends BaseImageResource{constructor(_){super(_)}static test(_){return!!globalThis.VideoFrame&&_ instanceof globalThis.VideoFrame}}const _VideoResource=class Bo extends BaseImageResource{constructor(_,et){if(et=et||{},!(_ instanceof HTMLVideoElement)){const tt=document.createElement("video");et.autoLoad!==!1&&tt.setAttribute("preload","auto"),et.playsinline!==!1&&(tt.setAttribute("webkit-playsinline",""),tt.setAttribute("playsinline","")),et.muted===!0&&(tt.setAttribute("muted",""),tt.muted=!0),et.loop===!0&&tt.setAttribute("loop",""),et.autoPlay!==!1&&tt.setAttribute("autoplay",""),typeof _=="string"&&(_=[_]);const nt=_[0].src||_[0];BaseImageResource.crossOrigin(tt,nt,et.crossorigin);for(let it=0;it<_.length;++it){const at=document.createElement("source");let{src:ot,mime:st}=_[it];if(ot=ot||_[it],ot.startsWith("data:"))st=ot.slice(5,ot.indexOf(";"));else if(!ot.startsWith("blob:")){const dt=ot.split("?").shift().toLowerCase(),ht=dt.slice(dt.lastIndexOf(".")+1);st=st||Bo.MIME_TYPES[ht]||`video/${ht}`}at.src=ot,st&&(at.type=st),tt.appendChild(at)}_=tt}super(_),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=et.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=et.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),et.autoLoad!==!1&&this.load()}update(_=0){if(!this.destroyed){if(this._updateFPS){const et=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-et)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const _=this.source;return(_.readyState===_.HAVE_ENOUGH_DATA||_.readyState===_.HAVE_FUTURE_DATA)&&_.width&&_.height&&(_.complete=!0),_.addEventListener("play",this._onPlayStart),_.addEventListener("pause",this._onPlayStop),_.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(_.addEventListener("canplay",this._onCanPlay),_.addEventListener("canplaythrough",this._onCanPlay),_.addEventListener("error",this._onError,!0)),this._load=new Promise((et,tt)=>{this.valid?et(this):(this._resolve=et,this._reject=tt,_.load())}),this._load}_onError(_){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(_),this._reject&&(this._reject(_),this._reject=null,this._resolve=null)}_isSourcePlaying(){const _=this.source;return!_.paused&&!_.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const _=this.source;_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay);const et=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!et&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&_.play()}dispose(){this._configureAutoUpdate();const _=this.source;_&&(_.removeEventListener("play",this._onPlayStart),_.removeEventListener("pause",this._onPlayStop),_.removeEventListener("seeked",this._onSeeked),_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay),_.removeEventListener("error",this._onError,!0),_.pause(),_.src="",_.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){_!==this._autoUpdate&&(this._autoUpdate=_,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(_){_!==this._updateFPS&&(this._updateFPS=_,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(_,et){return globalThis.HTMLVideoElement&&_ instanceof HTMLVideoElement||Bo.TYPES.includes(et)}};_VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoResource=_VideoResource;INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,VideoFrameResource,SVGResource,BufferResource,CubeResource,ArrayResource);class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(_){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(_=_||new Rectangle(0,0,1,1),_.x=this.minX,_.y=this.minY,_.width=this.maxX-this.minX,_.height=this.maxY-this.minY,_)}addPoint(_){this.minX=Math.min(this.minX,_.x),this.maxX=Math.max(this.maxX,_.x),this.minY=Math.min(this.minY,_.y),this.maxY=Math.max(this.maxY,_.y)}addPointMatrix(_,et){const{a:tt,b:nt,c:it,d:at,tx:ot,ty:st}=_,dt=tt*et.x+it*et.y+ot,ht=nt*et.x+at*et.y+st;this.minX=Math.min(this.minX,dt),this.maxX=Math.max(this.maxX,dt),this.minY=Math.min(this.minY,ht),this.maxY=Math.max(this.maxY,ht)}addQuad(_){let et=this.minX,tt=this.minY,nt=this.maxX,it=this.maxY,at=_[0],ot=_[1];et=at<et?at:et,tt=ot<tt?ot:tt,nt=at>nt?at:nt,it=ot>it?ot:it,at=_[2],ot=_[3],et=at<et?at:et,tt=ot<tt?ot:tt,nt=at>nt?at:nt,it=ot>it?ot:it,at=_[4],ot=_[5],et=at<et?at:et,tt=ot<tt?ot:tt,nt=at>nt?at:nt,it=ot>it?ot:it,at=_[6],ot=_[7],et=at<et?at:et,tt=ot<tt?ot:tt,nt=at>nt?at:nt,it=ot>it?ot:it,this.minX=et,this.minY=tt,this.maxX=nt,this.maxY=it}addFrame(_,et,tt,nt,it){this.addFrameMatrix(_.worldTransform,et,tt,nt,it)}addFrameMatrix(_,et,tt,nt,it){const at=_.a,ot=_.b,st=_.c,dt=_.d,ht=_.tx,ct=_.ty;let ut=this.minX,ft=this.minY,gt=this.maxX,mt=this.maxY,vt=at*et+st*tt+ht,yt=ot*et+dt*tt+ct;ut=vt<ut?vt:ut,ft=yt<ft?yt:ft,gt=vt>gt?vt:gt,mt=yt>mt?yt:mt,vt=at*nt+st*tt+ht,yt=ot*nt+dt*tt+ct,ut=vt<ut?vt:ut,ft=yt<ft?yt:ft,gt=vt>gt?vt:gt,mt=yt>mt?yt:mt,vt=at*et+st*it+ht,yt=ot*et+dt*it+ct,ut=vt<ut?vt:ut,ft=yt<ft?yt:ft,gt=vt>gt?vt:gt,mt=yt>mt?yt:mt,vt=at*nt+st*it+ht,yt=ot*nt+dt*it+ct,ut=vt<ut?vt:ut,ft=yt<ft?yt:ft,gt=vt>gt?vt:gt,mt=yt>mt?yt:mt,this.minX=ut,this.minY=ft,this.maxX=gt,this.maxY=mt}addVertexData(_,et,tt){let nt=this.minX,it=this.minY,at=this.maxX,ot=this.maxY;for(let st=et;st<tt;st+=2){const dt=_[st],ht=_[st+1];nt=dt<nt?dt:nt,it=ht<it?ht:it,at=dt>at?dt:at,ot=ht>ot?ht:ot}this.minX=nt,this.minY=it,this.maxX=at,this.maxY=ot}addVertices(_,et,tt,nt){this.addVerticesMatrix(_.worldTransform,et,tt,nt)}addVerticesMatrix(_,et,tt,nt,it=0,at=it){const ot=_.a,st=_.b,dt=_.c,ht=_.d,ct=_.tx,ut=_.ty;let ft=this.minX,gt=this.minY,mt=this.maxX,vt=this.maxY;for(let yt=tt;yt<nt;yt+=2){const bt=et[yt],_t=et[yt+1],xt=ot*bt+dt*_t+ct,St=ht*_t+st*bt+ut;ft=Math.min(ft,xt-it),mt=Math.max(mt,xt+it),gt=Math.min(gt,St-at),vt=Math.max(vt,St+at)}this.minX=ft,this.minY=gt,this.maxX=mt,this.maxY=vt}addBounds(_){const et=this.minX,tt=this.minY,nt=this.maxX,it=this.maxY;this.minX=_.minX<et?_.minX:et,this.minY=_.minY<tt?_.minY:tt,this.maxX=_.maxX>nt?_.maxX:nt,this.maxY=_.maxY>it?_.maxY:it}addBoundsMask(_,et){const tt=_.minX>et.minX?_.minX:et.minX,nt=_.minY>et.minY?_.minY:et.minY,it=_.maxX<et.maxX?_.maxX:et.maxX,at=_.maxY<et.maxY?_.maxY:et.maxY;if(tt<=it&&nt<=at){const ot=this.minX,st=this.minY,dt=this.maxX,ht=this.maxY;this.minX=tt<ot?tt:ot,this.minY=nt<st?nt:st,this.maxX=it>dt?it:dt,this.maxY=at>ht?at:ht}}addBoundsMatrix(_,et){this.addFrameMatrix(et,_.minX,_.minY,_.maxX,_.maxY)}addBoundsArea(_,et){const tt=_.minX>et.x?_.minX:et.x,nt=_.minY>et.y?_.minY:et.y,it=_.maxX<et.x+et.width?_.maxX:et.x+et.width,at=_.maxY<et.y+et.height?_.maxY:et.y+et.height;if(tt<=it&&nt<=at){const ot=this.minX,st=this.minY,dt=this.maxX,ht=this.maxY;this.minX=tt<ot?tt:ot,this.minY=nt<st?nt:st,this.maxX=it>dt?it:dt,this.maxY=at>ht?at:ht}}pad(_=0,et=_){this.isEmpty()||(this.minX-=_,this.maxX+=_,this.minY-=et,this.maxY+=et)}addFramePad(_,et,tt,nt,it,at){_-=it,et-=at,tt+=it,nt+=at,this.minX=this.minX<_?this.minX:_,this.maxX=this.maxX>tt?this.maxX:tt,this.minY=this.minY<et?this.minY:et,this.maxY=this.maxY>nt?this.maxY:nt}}class DisplayObject extends EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(_){const et=Object.keys(_);for(let tt=0;tt<et.length;++tt){const nt=et[tt];Object.defineProperty(DisplayObject.prototype,nt,Object.getOwnPropertyDescriptor(_,nt))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(_,et){return _||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),et||(this._boundsRect||(this._boundsRect=new Rectangle),et=this._boundsRect),this._bounds.getRectangle(et)}getLocalBounds(_){_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);const et=this.transform,tt=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(tt==null?void 0:tt.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const nt=this._bounds,it=this._boundsID;this._bounds=this._localBounds;const at=this.getBounds(!1,_);return this.parent=tt,this.transform=et,this._bounds=nt,this._bounds.updateID+=this._boundsID-it,at}toGlobal(_,et,tt=!1){return tt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(_,et)}toLocal(_,et,tt,nt){return et&&(_=et.toGlobal(_,tt,nt)),nt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(_,tt)}setParent(_){if(!_||!_.addChild)throw new Error("setParent: Argument must be a Container");return _.addChild(this),_}removeFromParent(){var _;(_=this.parent)==null||_.removeChild(this)}setTransform(_=0,et=0,tt=1,nt=1,it=0,at=0,ot=0,st=0,dt=0){return this.position.x=_,this.position.y=et,this.scale.x=tt||1,this.scale.y=nt||1,this.rotation=it,this.skew.x=at,this.skew.y=ot,this.pivot.x=st,this.pivot.y=dt,this}destroy(_){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const _=this.parent;return this.parent=this._tempDisplayObjectParent,_}disableTempParent(_){this.parent=_}get x(){return this.position.x}set x(_){this.transform.position.x=_}get y(){return this.position.y}set y(_){this.transform.position.y=_}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(_){this.transform.position.copyFrom(_)}get scale(){return this.transform.scale}set scale(_){this.transform.scale.copyFrom(_)}get pivot(){return this.transform.pivot}set pivot(_){this.transform.pivot.copyFrom(_)}get skew(){return this.transform.skew}set skew(_){this.transform.skew.copyFrom(_)}get rotation(){return this.transform.rotation}set rotation(_){this.transform.rotation=_}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(_){this.transform.rotation=_*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(_){this._zIndex!==_&&(this._zIndex=_,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let _=this;do{if(!_.visible)return!1;_=_.parent}while(_);return!0}get mask(){return this._mask}set mask(_){if(this._mask!==_){if(this._mask){const et=this._mask.isMaskData?this._mask.maskObject:this._mask;et&&(et._maskRefCount--,et._maskRefCount===0&&(et.renderable=!0,et.isMask=!1))}if(this._mask=_,this._mask){const et=this._mask.isMaskData?this._mask.maskObject:this._mask;et&&(et._maskRefCount===0&&(et.renderable=!1,et.isMask=!0),et._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;const tempMatrix$2=new Matrix;function sortChildren(_e,_){return _e.zIndex===_.zIndex?_e._lastSortedIndex-_._lastSortedIndex:_e.zIndex-_.zIndex}const _Container=class Vo extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=Vo.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(_){}addChild(..._){if(_.length>1)for(let et=0;et<_.length;et++)this.addChild(_[et]);else{const et=_[0];et.parent&&et.parent.removeChild(et),et.parent=this,this.sortDirty=!0,et.transform._parentID=-1,this.children.push(et),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",et,this,this.children.length-1),et.emit("added",this)}return _[0]}addChildAt(_,et){if(et<0||et>this.children.length)throw new Error(`${_}addChildAt: The index ${et} supplied is out of bounds ${this.children.length}`);return _.parent&&_.parent.removeChild(_),_.parent=this,this.sortDirty=!0,_.transform._parentID=-1,this.children.splice(et,0,_),this._boundsID++,this.onChildrenChange(et),_.emit("added",this),this.emit("childAdded",_,this,et),_}swapChildren(_,et){if(_===et)return;const tt=this.getChildIndex(_),nt=this.getChildIndex(et);this.children[tt]=et,this.children[nt]=_,this.onChildrenChange(tt<nt?tt:nt)}getChildIndex(_){const et=this.children.indexOf(_);if(et===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return et}setChildIndex(_,et){if(et<0||et>=this.children.length)throw new Error(`The index ${et} supplied is out of bounds ${this.children.length}`);const tt=this.getChildIndex(_);removeItems(this.children,tt,1),this.children.splice(et,0,_),this.onChildrenChange(et)}getChildAt(_){if(_<0||_>=this.children.length)throw new Error(`getChildAt: Index (${_}) does not exist.`);return this.children[_]}removeChild(..._){if(_.length>1)for(let et=0;et<_.length;et++)this.removeChild(_[et]);else{const et=_[0],tt=this.children.indexOf(et);if(tt===-1)return null;et.parent=null,et.transform._parentID=-1,removeItems(this.children,tt,1),this._boundsID++,this.onChildrenChange(tt),et.emit("removed",this),this.emit("childRemoved",et,this,tt)}return _[0]}removeChildAt(_){const et=this.getChildAt(_);return et.parent=null,et.transform._parentID=-1,removeItems(this.children,_,1),this._boundsID++,this.onChildrenChange(_),et.emit("removed",this),this.emit("childRemoved",et,this,_),et}removeChildren(_=0,et=this.children.length){const tt=_,nt=et,it=nt-tt;let at;if(it>0&&it<=nt){at=this.children.splice(tt,it);for(let ot=0;ot<at.length;++ot)at[ot].parent=null,at[ot].transform&&(at[ot].transform._parentID=-1);this._boundsID++,this.onChildrenChange(_);for(let ot=0;ot<at.length;++ot)at[ot].emit("removed",this),this.emit("childRemoved",at[ot],this,ot);return at}else if(it===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let _=!1;for(let et=0,tt=this.children.length;et<tt;++et){const nt=this.children[et];nt._lastSortedIndex=et,!_&&nt.zIndex!==0&&(_=!0)}_&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let _=0,et=this.children.length;_<et;++_){const tt=this.children[_];tt.visible&&tt.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let _=0;_<this.children.length;_++){const et=this.children[_];if(!(!et.visible||!et.renderable))if(et.calculateBounds(),et._mask){const tt=et._mask.isMaskData?et._mask.maskObject:et._mask;tt?(tt.calculateBounds(),this._bounds.addBoundsMask(et._bounds,tt._bounds)):this._bounds.addBounds(et._bounds)}else et.filterArea?this._bounds.addBoundsArea(et._bounds,et.filterArea):this._bounds.addBounds(et._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(_,et=!1){const tt=super.getLocalBounds(_);if(!et)for(let nt=0,it=this.children.length;nt<it;++nt){const at=this.children[nt];at.visible&&at.updateTransform()}return tt}_calculateBounds(){}_renderWithCulling(_){const et=_.renderTexture.sourceFrame;if(!(et.width>0&&et.height>0))return;let tt,nt;this.cullArea?(tt=this.cullArea,nt=this.worldTransform):this._render!==Vo.prototype._render&&(tt=this.getBounds(!0));const it=_.projection.transform;if(it&&(nt?(nt=tempMatrix$2.copyFrom(nt),nt.prepend(it)):nt=it),tt&&et.intersects(tt,nt))this._render(_);else if(this.cullArea)return;for(let at=0,ot=this.children.length;at<ot;++at){const st=this.children[at],dt=st.cullable;st.cullable=dt||!this.cullArea,st.render(_),st.cullable=dt}}render(_){var et;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(et=this.filters)!=null&&et.length)this.renderAdvanced(_);else if(this.cullable)this._renderWithCulling(_);else{this._render(_);for(let tt=0,nt=this.children.length;tt<nt;++tt)this.children[tt].render(_)}}renderAdvanced(_){var it,at,ot;const et=this.filters,tt=this._mask;if(et){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let st=0;st<et.length;st++)et[st].enabled&&this._enabledFilters.push(et[st])}const nt=et&&((it=this._enabledFilters)==null?void 0:it.length)||tt&&(!tt.isMaskData||tt.enabled&&(tt.autoDetect||tt.type!==MASK_TYPES.NONE));if(nt&&_.batch.flush(),et&&((at=this._enabledFilters)!=null&&at.length)&&_.filter.push(this,this._enabledFilters),tt&&_.mask.push(this,this._mask),this.cullable)this._renderWithCulling(_);else{this._render(_);for(let st=0,dt=this.children.length;st<dt;++st)this.children[st].render(_)}nt&&_.batch.flush(),tt&&_.mask.pop(this),et&&((ot=this._enabledFilters)!=null&&ot.length)&&_.filter.pop()}_render(_){}destroy(_){super.destroy(),this.sortDirty=!1;const et=typeof _=="boolean"?_:_==null?void 0:_.children,tt=this.removeChildren(0,this.children.length);if(et)for(let nt=0;nt<tt.length;++nt)tt[nt].destroy(_)}get width(){return this.scale.x*this.getLocalBounds().width}set width(_){const et=this.getLocalBounds().width;et!==0?this.scale.x=_/et:this.scale.x=1,this._width=_}get height(){return this.scale.y*this.getLocalBounds().height}set height(_){const et=this.getLocalBounds().height;et!==0?this.scale.y=_/et:this.scale.y=1,this._height=_}};_Container.defaultSortableChildren=!1;let Container=_Container;Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;Object.defineProperties(settings,{SORTABLE_CHILDREN:{get(){return Container.defaultSortableChildren},set(_e){deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Container.defaultSortableChildren=_e}}});const tempPoint$2=new Point$1,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(_){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,_?_.defaultAnchor.x:0,_?_.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Color(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=_||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const _=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===_._updateID)return;this._textureID!==_._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=_._updateID;const et=this.transform.worldTransform,tt=et.a,nt=et.b,it=et.c,at=et.d,ot=et.tx,st=et.ty,dt=this.vertexData,ht=_.trim,ct=_.orig,ut=this._anchor;let ft=0,gt=0,mt=0,vt=0;if(ht?(gt=ht.x-ut._x*ct.width,ft=gt+ht.width,vt=ht.y-ut._y*ct.height,mt=vt+ht.height):(gt=-ut._x*ct.width,ft=gt+ct.width,vt=-ut._y*ct.height,mt=vt+ct.height),dt[0]=tt*gt+it*vt+ot,dt[1]=at*vt+nt*gt+st,dt[2]=tt*ft+it*vt+ot,dt[3]=at*vt+nt*ft+st,dt[4]=tt*ft+it*mt+ot,dt[5]=at*mt+nt*ft+st,dt[6]=tt*gt+it*mt+ot,dt[7]=at*mt+nt*gt+st,this._roundPixels){const yt=settings.RESOLUTION;for(let bt=0;bt<dt.length;++bt)dt[bt]=Math.round(dt[bt]*yt)/yt}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const _=this._texture,et=this.vertexTrimmedData,tt=_.orig,nt=this._anchor,it=this.transform.worldTransform,at=it.a,ot=it.b,st=it.c,dt=it.d,ht=it.tx,ct=it.ty,ut=-nt._x*tt.width,ft=ut+tt.width,gt=-nt._y*tt.height,mt=gt+tt.height;if(et[0]=at*ut+st*gt+ht,et[1]=dt*gt+ot*ut+ct,et[2]=at*ft+st*gt+ht,et[3]=dt*gt+ot*ft+ct,et[4]=at*ft+st*mt+ht,et[5]=dt*mt+ot*ft+ct,et[6]=at*ut+st*mt+ht,et[7]=dt*mt+ot*ut+ct,this._roundPixels){const vt=settings.RESOLUTION;for(let yt=0;yt<et.length;++yt)et[yt]=Math.round(et[yt]*vt)/vt}}_render(_){this.calculateVertices(),_.batch.setObjectRenderer(_.plugins[this.pluginName]),_.plugins[this.pluginName].render(this)}_calculateBounds(){const _=this._texture.trim,et=this._texture.orig;!_||_.width===et.width&&_.height===et.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(_){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds.getRectangle(_)):super.getLocalBounds.call(this,_)}containsPoint(_){this.worldTransform.applyInverse(_,tempPoint$2);const et=this._texture.orig.width,tt=this._texture.orig.height,nt=-et*this.anchor.x;let it=0;return tempPoint$2.x>=nt&&tempPoint$2.x<nt+et&&(it=-tt*this.anchor.y,tempPoint$2.y>=it&&tempPoint$2.y<it+tt)}destroy(_){if(super.destroy(_),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof _=="boolean"?_:_==null?void 0:_.texture){const et=typeof _=="boolean"?_:_==null?void 0:_.baseTexture;this._texture.destroy(!!et)}this._texture=null}static from(_,et){const tt=_ instanceof Texture?_:Texture.from(_,et);return new Sprite(tt)}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(_){const et=sign(this.scale.x)||1;this.scale.x=et*_/this._texture.orig.width,this._width=_}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(_){const et=sign(this.scale.y)||1;this.scale.y=et*_/this._texture.orig.height,this._height=_}get anchor(){return this._anchor}set anchor(_){this._anchor.copyFrom(_)}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(_){this._texture!==_&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=_||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,_&&(_.baseTexture.valid?this._onTextureUpdate():_.once("update",this._onTextureUpdate,this)))}}const _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=null;class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(_e){_e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=_e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(_e){_e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=_e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(_e){if(this._cacheAsBitmap===_e)return;this._cacheAsBitmap=_e;let _;_e?(this._cacheData||(this._cacheData=new CacheData),_=this._cacheData,_.originalRender=this.render,_.originalRenderCanvas=this.renderCanvas,_.originalUpdateTransform=this.updateTransform,_.originalCalculateBounds=this.calculateBounds,_.originalGetLocalBounds=this.getLocalBounds,_.originalDestroy=this.destroy,_.originalContainsPoint=this.containsPoint,_.originalMask=this._mask,_.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(_=this._cacheData,_.sprite&&this._destroyCachedDisplayObject(),this.render=_.originalRender,this.renderCanvas=_.originalRenderCanvas,this.calculateBounds=_.originalCalculateBounds,this.getLocalBounds=_.originalGetLocalBounds,this.destroy=_.originalDestroy,this.updateTransform=_.originalUpdateTransform,this.containsPoint=_.originalContainsPoint,this._mask=_.originalMask,this.filterArea=_.originalFilterArea)}}});DisplayObject.prototype._renderCached=function(_e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(_e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(_e))};DisplayObject.prototype._initCachedDisplayObject=function(_e){var ut,ft;if((ut=this._cacheData)!=null&&ut.sprite)return;const _=this.alpha;this.alpha=1,_e.batch.flush();const et=this.getLocalBounds(new Rectangle,!0);if((ft=this.filters)!=null&&ft.length){const gt=this.filters[0].padding;et.pad(gt)}const tt=this.cacheAsBitmapResolution||_e.resolution;et.ceil(tt),et.width=Math.max(et.width,1/tt),et.height=Math.max(et.height,1/tt);const nt=_e.renderTexture.current,it=_e.renderTexture.sourceFrame.clone(),at=_e.renderTexture.destinationFrame.clone(),ot=_e.projection.transform,st=RenderTexture.create({width:et.width,height:et.height,resolution:tt,multisample:this.cacheAsBitmapMultisample??_e.multisample}),dt=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=dt,BaseTexture.addToCache(st.baseTexture,dt),Texture.addToCache(st,dt);const ht=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-et.x,-et.y);this.render=this._cacheData.originalRender,_e.render(this,{renderTexture:st,clear:!0,transform:ht,skipUpdateTransform:!1}),_e.framebuffer.blit(),_e.projection.transform=ot,_e.renderTexture.bind(nt,it,at),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=_;const ct=new Sprite(st);ct.transform.worldTransform=this.transform.worldTransform,ct.anchor.x=-(et.x/et.width),ct.anchor.y=-(et.y/et.height),ct.alpha=_,ct._bounds=this._bounds,this._cacheData.sprite=ct,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=ct.containsPoint.bind(ct)};DisplayObject.prototype._renderCachedCanvas=function(_e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(_e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(_e))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(_e){var ht;if((ht=this._cacheData)!=null&&ht.sprite)return;const _=this.getLocalBounds(new Rectangle,!0),et=this.alpha;this.alpha=1;const tt=_e.canvasContext.activeContext,nt=_e._projTransform,it=this.cacheAsBitmapResolution||_e.resolution;_.ceil(it),_.width=Math.max(_.width,1/it),_.height=Math.max(_.height,1/it);const at=RenderTexture.create({width:_.width,height:_.height,resolution:it}),ot=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=ot,BaseTexture.addToCache(at.baseTexture,ot),Texture.addToCache(at,ot);const st=_tempMatrix;this.transform.localTransform.copyTo(st),st.invert(),st.tx-=_.x,st.ty-=_.y,this.renderCanvas=this._cacheData.originalRenderCanvas,_e.render(this,{renderTexture:at,clear:!0,transform:st,skipUpdateTransform:!1}),_e.canvasContext.activeContext=tt,_e._projTransform=nt,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=et;const dt=new Sprite(at);dt.transform.worldTransform=this.transform.worldTransform,dt.anchor.x=-(_.x/_.width),dt.anchor.y=-(_.y/_.height),dt.alpha=et,dt._bounds=this._bounds,this._cacheData.sprite=dt,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=_e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=dt.containsPoint.bind(dt)};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(_e){this.cacheAsBitmap=!1,this.destroy(_e)};DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(_e,_){for(let et=0,tt=this.children.length;et<tt;et++)if(this.children[et].name===_e)return this.children[et];if(_)for(let et=0,tt=this.children.length;et<tt;et++){const nt=this.children[et];if(!nt.getChildByName)continue;const it=nt.getChildByName(_e,!0);if(it)return it}return null};DisplayObject.prototype.getGlobalPosition=function(_e=new Point$1,_=!1){return this.parent?this.parent.toGlobal(this.position,_e,_):(_e.x=this.position.x,_e.y=this.position.y),_e};var fragment$6=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class AlphaFilter extends Filter{constructor(_=1){super(defaultVertex,fragment$6,{uAlpha:1}),this.alpha=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}const GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(_e){const _=GAUSSIAN_VALUES[_e],et=_.length;let tt=fragTemplate,nt="";const it="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let at;for(let ot=0;ot<_e;ot++){let st=it.replace("%index%",ot.toString());at=ot,ot>=et&&(at=_e-ot-1),st=st.replace("%value%",_[at].toString()),nt+=st,nt+=`
`}return tt=tt.replace("%blur%",nt),tt=tt.replace("%size%",_e.toString()),tt}const vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(_e,_){const et=Math.ceil(_e/2);let tt=vertTemplate,nt="",it;_?it="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":it="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let at=0;at<_e;at++){let ot=it.replace("%index%",at.toString());ot=ot.replace("%sampleIndex%",`${at-(et-1)}.0`),nt+=ot,nt+=`
`}return tt=tt.replace("%blur%",nt),tt=tt.replace("%size%",_e.toString()),tt}class BlurFilterPass extends Filter{constructor(_,et=8,tt=4,nt=Filter.defaultResolution,it=5){const at=generateBlurVertSource(it,_),ot=generateBlurFragSource(it);super(at,ot),this.horizontal=_,this.resolution=nt,this._quality=0,this.quality=tt,this.blur=et}apply(_,et,tt,nt){if(tt?this.horizontal?this.uniforms.strength=1/tt.width*(tt.width/et.width):this.uniforms.strength=1/tt.height*(tt.height/et.height):this.horizontal?this.uniforms.strength=1/_.renderer.width*(_.renderer.width/et.width):this.uniforms.strength=1/_.renderer.height*(_.renderer.height/et.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)_.applyFilter(this,et,tt,nt);else{const it=_.getFilterTexture(),at=_.renderer;let ot=et,st=it;this.state.blend=!1,_.applyFilter(this,ot,st,CLEAR_MODES.CLEAR);for(let dt=1;dt<this.passes-1;dt++){_.bindAndClear(ot,CLEAR_MODES.BLIT),this.uniforms.uSampler=st;const ht=st;st=ot,ot=ht,at.shader.bind(this),at.geometry.draw(5)}this.state.blend=!0,_.applyFilter(this,st,tt,nt),_.returnFilterTexture(it)}}get blur(){return this.strength}set blur(_){this.padding=1+Math.abs(_)*2,this.strength=_}get quality(){return this._quality}set quality(_){this._quality=_,this.passes=_}}class BlurFilter extends Filter{constructor(_=8,et=4,tt=Filter.defaultResolution,nt=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass(!0,_,et,tt,nt),this.blurYFilter=new BlurFilterPass(!1,_,et,tt,nt),this.resolution=tt,this.quality=et,this.blur=_,this.repeatEdgePixels=!1}apply(_,et,tt,nt){const it=Math.abs(this.blurXFilter.strength),at=Math.abs(this.blurYFilter.strength);if(it&&at){const ot=_.getFilterTexture();this.blurXFilter.apply(_,et,ot,CLEAR_MODES.CLEAR),this.blurYFilter.apply(_,ot,tt,nt),_.returnFilterTexture(ot)}else at?this.blurYFilter.apply(_,et,tt,nt):this.blurXFilter.apply(_,et,tt,nt)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(_){this.blurXFilter.blur=this.blurYFilter.blur=_,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(_){this.blurXFilter.quality=this.blurYFilter.quality=_}get blurX(){return this.blurXFilter.blur}set blurX(_){this.blurXFilter.blur=_,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(_){this.blurYFilter.blur=_,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(_){this.blurYFilter.blendMode=_}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(_){this._repeatEdgePixels=_,this.updatePadding()}}var fragment$5=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ColorMatrixFilter extends Filter{constructor(){const _={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(defaultFilterVertex,fragment$5,_),this.alpha=1}_loadMatrix(_,et=!1){let tt=_;et&&(this._multiply(tt,this.uniforms.m,_),tt=this._colorMatrix(tt)),this.uniforms.m=tt}_multiply(_,et,tt){return _[0]=et[0]*tt[0]+et[1]*tt[5]+et[2]*tt[10]+et[3]*tt[15],_[1]=et[0]*tt[1]+et[1]*tt[6]+et[2]*tt[11]+et[3]*tt[16],_[2]=et[0]*tt[2]+et[1]*tt[7]+et[2]*tt[12]+et[3]*tt[17],_[3]=et[0]*tt[3]+et[1]*tt[8]+et[2]*tt[13]+et[3]*tt[18],_[4]=et[0]*tt[4]+et[1]*tt[9]+et[2]*tt[14]+et[3]*tt[19]+et[4],_[5]=et[5]*tt[0]+et[6]*tt[5]+et[7]*tt[10]+et[8]*tt[15],_[6]=et[5]*tt[1]+et[6]*tt[6]+et[7]*tt[11]+et[8]*tt[16],_[7]=et[5]*tt[2]+et[6]*tt[7]+et[7]*tt[12]+et[8]*tt[17],_[8]=et[5]*tt[3]+et[6]*tt[8]+et[7]*tt[13]+et[8]*tt[18],_[9]=et[5]*tt[4]+et[6]*tt[9]+et[7]*tt[14]+et[8]*tt[19]+et[9],_[10]=et[10]*tt[0]+et[11]*tt[5]+et[12]*tt[10]+et[13]*tt[15],_[11]=et[10]*tt[1]+et[11]*tt[6]+et[12]*tt[11]+et[13]*tt[16],_[12]=et[10]*tt[2]+et[11]*tt[7]+et[12]*tt[12]+et[13]*tt[17],_[13]=et[10]*tt[3]+et[11]*tt[8]+et[12]*tt[13]+et[13]*tt[18],_[14]=et[10]*tt[4]+et[11]*tt[9]+et[12]*tt[14]+et[13]*tt[19]+et[14],_[15]=et[15]*tt[0]+et[16]*tt[5]+et[17]*tt[10]+et[18]*tt[15],_[16]=et[15]*tt[1]+et[16]*tt[6]+et[17]*tt[11]+et[18]*tt[16],_[17]=et[15]*tt[2]+et[16]*tt[7]+et[17]*tt[12]+et[18]*tt[17],_[18]=et[15]*tt[3]+et[16]*tt[8]+et[17]*tt[13]+et[18]*tt[18],_[19]=et[15]*tt[4]+et[16]*tt[9]+et[17]*tt[14]+et[18]*tt[19]+et[19],_}_colorMatrix(_){const et=new Float32Array(_);return et[4]/=255,et[9]/=255,et[14]/=255,et[19]/=255,et}brightness(_,et){const tt=[_,0,0,0,0,0,_,0,0,0,0,0,_,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}tint(_,et){const[tt,nt,it]=Color.shared.setValue(_).toArray(),at=[tt,0,0,0,0,0,nt,0,0,0,0,0,it,0,0,0,0,0,1,0];this._loadMatrix(at,et)}greyscale(_,et){const tt=[_,_,_,0,0,_,_,_,0,0,_,_,_,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}blackAndWhite(_){const et=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(et,_)}hue(_,et){_=(_||0)/180*Math.PI;const tt=Math.cos(_),nt=Math.sin(_),it=Math.sqrt,at=1/3,ot=it(at),st=tt+(1-tt)*at,dt=at*(1-tt)-ot*nt,ht=at*(1-tt)+ot*nt,ct=at*(1-tt)+ot*nt,ut=tt+at*(1-tt),ft=at*(1-tt)-ot*nt,gt=at*(1-tt)-ot*nt,mt=at*(1-tt)+ot*nt,vt=tt+at*(1-tt),yt=[st,dt,ht,0,0,ct,ut,ft,0,0,gt,mt,vt,0,0,0,0,0,1,0];this._loadMatrix(yt,et)}contrast(_,et){const tt=(_||0)+1,nt=-.5*(tt-1),it=[tt,0,0,0,nt,0,tt,0,0,nt,0,0,tt,0,nt,0,0,0,1,0];this._loadMatrix(it,et)}saturate(_=0,et){const tt=_*2/3+1,nt=(tt-1)*-.5,it=[tt,nt,nt,0,0,nt,tt,nt,0,0,nt,nt,tt,0,0,0,0,0,1,0];this._loadMatrix(it,et)}desaturate(){this.saturate(-1)}negative(_){const et=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(et,_)}sepia(_){const et=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(et,_)}technicolor(_){const et=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(et,_)}polaroid(_){const et=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(et,_)}toBGR(_){const et=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(et,_)}kodachrome(_){const et=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(et,_)}browni(_){const et=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(et,_)}vintage(_){const et=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(et,_)}colorTone(_,et,tt,nt,it){_=_||.2,et=et||.15,tt=tt||16770432,nt=nt||3375104;const at=Color.shared,[ot,st,dt]=at.setValue(tt).toArray(),[ht,ct,ut]=at.setValue(nt).toArray(),ft=[.3,.59,.11,0,0,ot,st,dt,_,0,ht,ct,ut,et,0,ot-ht,st-ct,dt-ut,0,0];this._loadMatrix(ft,it)}night(_,et){_=_||.1;const tt=[_*-2,-_,0,0,0,-_,0,_,0,0,0,_,_*2,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}predator(_,et){const tt=[11.224130630493164*_,-4.794486999511719*_,-2.8746118545532227*_,0*_,.40342438220977783*_,-3.6330697536468506*_,9.193157196044922*_,-2.951810836791992*_,0*_,-1.316135048866272*_,-3.2184197902679443*_,-4.2375030517578125*_,7.476448059082031*_,0*_,.8044459223747253*_,0,0,0,1,0];this._loadMatrix(tt,et)}lsd(_){const et=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(et,_)}reset(){const _=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(_,!1)}get matrix(){return this.uniforms.m}set matrix(_){this.uniforms.m=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;var fragment$4=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class DisplacementFilter extends Filter{constructor(_,et){const tt=new Matrix;_.renderable=!1,super(vertex$3,fragment$4,{mapSampler:_._texture,filterMatrix:tt,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=_,this.maskMatrix=tt,et==null&&(et=20),this.scale=new Point$1(et,et)}apply(_,et,tt,nt){this.uniforms.filterMatrix=_.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const it=this.maskSprite.worldTransform,at=Math.sqrt(it.a*it.a+it.b*it.b),ot=Math.sqrt(it.c*it.c+it.d*it.d);at!==0&&ot!==0&&(this.uniforms.rotation[0]=it.a/at,this.uniforms.rotation[1]=it.b/at,this.uniforms.rotation[2]=it.c/ot,this.uniforms.rotation[3]=it.d/ot),_.applyFilter(this,et,tt,nt)}get map(){return this.uniforms.mapSampler}set map(_){this.uniforms.mapSampler=_}}var fragment$3=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vertex$2=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class FXAAFilter extends Filter{constructor(){super(vertex$2,fragment$3)}}var fragment$2=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class NoiseFilter extends Filter{constructor(_=.5,et=Math.random()){super(defaultFilterVertex,fragment$2,{uNoise:0,uSeed:0}),this.noise=_,this.seed=et}get noise(){return this.uniforms.uNoise}set noise(_){this.uniforms.uNoise=_}get seed(){return this.uniforms.uSeed}set seed(_){this.uniforms.uSeed=_}}const filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter};Object.entries(filters).forEach(([_e,_])=>{Object.defineProperty(filters,_e,{get(){return deprecation("7.1.0",`filters.${_e} has moved to ${_e}`),_}})});class EventsTickerClass{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(_){this.removeTickerListener(),this.events=_,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(_){this._pauseUpdate=_}addTickerListener(){this.tickerAdded||!this.domElement||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const _=this.events.rootPointerEvent;this.events.supportsTouchEvents&&_.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:_.clientX,clientY:_.clientY}))}tickerUpdate(_){this._deltaTime+=_,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const EventsTicker=new EventsTickerClass;class FederatedEvent{constructor(_){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point$1,this.page=new Point$1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=_}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(_,et,tt){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(_,et,tt,nt,it){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point$1,this.movement=new Point$1,this.offset=new Point$1,this.global=new Point$1,this.screen=new Point$1}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(_,et,tt){return _.worldTransform.applyInverse(tt||this.global,et)}getModifierState(_){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(_)}initMouseEvent(_,et,tt,nt,it,at,ot,st,dt,ht,ct,ut,ft,gt,mt){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2;const PROPAGATION_LIMIT=2048,tempHitLocation=new Point$1,tempLocalMapping=new Point$1;class EventBoundary{constructor(_){this.dispatch=new EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=_,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(_,et){this.mappingTable[_]||(this.mappingTable[_]=[]),this.mappingTable[_].push({fn:et,priority:0}),this.mappingTable[_].sort((tt,nt)=>tt.priority-nt.priority)}dispatchEvent(_,et){_.propagationStopped=!1,_.propagationImmediatelyStopped=!1,this.propagate(_,et),this.dispatch.emit(et||_.type,_)}mapEvent(_){if(!this.rootTarget)return;const et=this.mappingTable[_.type];if(et)for(let tt=0,nt=et.length;tt<nt;tt++)et[tt].fn(_);else console.warn(`[EventBoundary]: Event mapping not defined for ${_.type}`)}hitTest(_,et){EventsTicker.pauseUpdate=!0;const tt=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",nt=this[tt](this.rootTarget,this.rootTarget.eventMode,tempHitLocation.set(_,et),this.hitTestFn,this.hitPruneFn);return nt&&nt[0]}propagate(_,et){if(!_.target)return;const tt=_.composedPath();_.eventPhase=_.CAPTURING_PHASE;for(let nt=0,it=tt.length-1;nt<it;nt++)if(_.currentTarget=tt[nt],this.notifyTarget(_,et),_.propagationStopped||_.propagationImmediatelyStopped)return;if(_.eventPhase=_.AT_TARGET,_.currentTarget=_.target,this.notifyTarget(_,et),!(_.propagationStopped||_.propagationImmediatelyStopped)){_.eventPhase=_.BUBBLING_PHASE;for(let nt=tt.length-2;nt>=0;nt--)if(_.currentTarget=tt[nt],this.notifyTarget(_,et),_.propagationStopped||_.propagationImmediatelyStopped)return}}all(_,et,tt=this._allInteractiveElements){if(tt.length===0)return;_.eventPhase=_.BUBBLING_PHASE;const nt=Array.isArray(et)?et:[et];for(let it=tt.length-1;it>=0;it--)nt.forEach(at=>{_.currentTarget=tt[it],this.notifyTarget(_,at)})}propagationPath(_){const et=[_];for(let tt=0;tt<PROPAGATION_LIMIT&&_!==this.rootTarget;tt++){if(!_.parent)throw new Error("Cannot find propagation path to disconnected target");et.push(_.parent),_=_.parent}return et.reverse(),et}hitTestMoveRecursive(_,et,tt,nt,it,at=!1){let ot=!1;if(this._interactivePrune(_))return null;if((_.eventMode==="dynamic"||et==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const ht=_.children;for(let ct=ht.length-1;ct>=0;ct--){const ut=ht[ct],ft=this.hitTestMoveRecursive(ut,this._isInteractive(et)?et:ut.eventMode,tt,nt,it,at||it(_,tt));if(ft){if(ft.length>0&&!ft[ft.length-1].parent)continue;const gt=_.isInteractive();(ft.length>0||gt)&&(gt&&this._allInteractiveElements.push(_),ft.push(_)),this._hitElements.length===0&&(this._hitElements=ft),ot=!0}}}const st=this._isInteractive(et),dt=_.isInteractive();return st&&dt&&this._allInteractiveElements.push(_),at||this._hitElements.length>0?null:ot?this._hitElements:st&&!it(_,tt)&&nt(_,tt)?dt?[_]:[]:null}hitTestRecursive(_,et,tt,nt,it){if(this._interactivePrune(_)||it(_,tt))return null;if((_.eventMode==="dynamic"||et==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const st=_.children;for(let dt=st.length-1;dt>=0;dt--){const ht=st[dt],ct=this.hitTestRecursive(ht,this._isInteractive(et)?et:ht.eventMode,tt,nt,it);if(ct){if(ct.length>0&&!ct[ct.length-1].parent)continue;const ut=_.isInteractive();return(ct.length>0||ut)&&ct.push(_),ct}}}const at=this._isInteractive(et),ot=_.isInteractive();return at&&nt(_,tt)?ot?[_]:[]:null}_isInteractive(_){return _==="static"||_==="dynamic"}_interactivePrune(_){return!!(!_||_.isMask||!_.visible||!_.renderable||_.eventMode==="none"||_.eventMode==="passive"&&!_.interactiveChildren||_.isMask)}hitPruneFn(_,et){var tt;if(_.hitArea&&(_.worldTransform.applyInverse(et,tempLocalMapping),!_.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(_._mask){const nt=_._mask.isMaskData?_._mask.maskObject:_._mask;if(nt&&!((tt=nt.containsPoint)!=null&&tt.call(nt,et)))return!0}return!1}hitTestFn(_,et){return _.eventMode==="passive"?!1:_.hitArea?!0:_.containsPoint?_.containsPoint(et):!1}notifyTarget(_,et){var it,at;et=et??_.type;const tt=`on${et}`;(at=(it=_.currentTarget)[tt])==null||at.call(it,_);const nt=_.eventPhase===_.CAPTURING_PHASE||_.eventPhase===_.AT_TARGET?`${et}capture`:et;this.notifyListeners(_,nt),_.eventPhase===_.AT_TARGET&&this.notifyListeners(_,et)}mapPointerDown(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.createPointerEvent(_);if(this.dispatchEvent(et,"pointerdown"),et.pointerType==="touch")this.dispatchEvent(et,"touchstart");else if(et.pointerType==="mouse"||et.pointerType==="pen"){const nt=et.button===2;this.dispatchEvent(et,nt?"rightdown":"mousedown")}const tt=this.trackingData(_.pointerId);tt.pressTargetsByButton[_.button]=et.composedPath(),this.freeEvent(et)}mapPointerMove(_){var st,dt;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const et=this.createPointerEvent(_);this._isPointerMoveEvent=!1;const tt=et.pointerType==="mouse"||et.pointerType==="pen",nt=this.trackingData(_.pointerId),it=this.findMountedTarget(nt.overTargets);if(((st=nt.overTargets)==null?void 0:st.length)>0&&it!==et.target){const ht=_.type==="mousemove"?"mouseout":"pointerout",ct=this.createPointerEvent(_,ht,it);if(this.dispatchEvent(ct,"pointerout"),tt&&this.dispatchEvent(ct,"mouseout"),!et.composedPath().includes(it)){const ut=this.createPointerEvent(_,"pointerleave",it);for(ut.eventPhase=ut.AT_TARGET;ut.target&&!et.composedPath().includes(ut.target);)ut.currentTarget=ut.target,this.notifyTarget(ut),tt&&this.notifyTarget(ut,"mouseleave"),ut.target=ut.target.parent;this.freeEvent(ut)}this.freeEvent(ct)}if(it!==et.target){const ht=_.type==="mousemove"?"mouseover":"pointerover",ct=this.clonePointerEvent(et,ht);this.dispatchEvent(ct,"pointerover"),tt&&this.dispatchEvent(ct,"mouseover");let ut=it==null?void 0:it.parent;for(;ut&&ut!==this.rootTarget.parent&&ut!==et.target;)ut=ut.parent;if(!ut||ut===this.rootTarget.parent){const ft=this.clonePointerEvent(et,"pointerenter");for(ft.eventPhase=ft.AT_TARGET;ft.target&&ft.target!==it&&ft.target!==this.rootTarget.parent;)ft.currentTarget=ft.target,this.notifyTarget(ft),tt&&this.notifyTarget(ft,"mouseenter"),ft.target=ft.target.parent;this.freeEvent(ft)}this.freeEvent(ct)}const at=[],ot=this.enableGlobalMoveEvents??!0;this.moveOnAll?at.push("pointermove"):this.dispatchEvent(et,"pointermove"),ot&&at.push("globalpointermove"),et.pointerType==="touch"&&(this.moveOnAll?at.splice(1,0,"touchmove"):this.dispatchEvent(et,"touchmove"),ot&&at.push("globaltouchmove")),tt&&(this.moveOnAll?at.splice(1,0,"mousemove"):this.dispatchEvent(et,"mousemove"),ot&&at.push("globalmousemove"),this.cursor=(dt=et.target)==null?void 0:dt.cursor),at.length>0&&this.all(et,at),this._allInteractiveElements.length=0,this._hitElements.length=0,nt.overTargets=et.composedPath(),this.freeEvent(et)}mapPointerOver(_){var at;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.trackingData(_.pointerId),tt=this.createPointerEvent(_),nt=tt.pointerType==="mouse"||tt.pointerType==="pen";this.dispatchEvent(tt,"pointerover"),nt&&this.dispatchEvent(tt,"mouseover"),tt.pointerType==="mouse"&&(this.cursor=(at=tt.target)==null?void 0:at.cursor);const it=this.clonePointerEvent(tt,"pointerenter");for(it.eventPhase=it.AT_TARGET;it.target&&it.target!==this.rootTarget.parent;)it.currentTarget=it.target,this.notifyTarget(it),nt&&this.notifyTarget(it,"mouseenter"),it.target=it.target.parent;et.overTargets=tt.composedPath(),this.freeEvent(tt),this.freeEvent(it)}mapPointerOut(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.trackingData(_.pointerId);if(et.overTargets){const tt=_.pointerType==="mouse"||_.pointerType==="pen",nt=this.findMountedTarget(et.overTargets),it=this.createPointerEvent(_,"pointerout",nt);this.dispatchEvent(it),tt&&this.dispatchEvent(it,"mouseout");const at=this.createPointerEvent(_,"pointerleave",nt);for(at.eventPhase=at.AT_TARGET;at.target&&at.target!==this.rootTarget.parent;)at.currentTarget=at.target,this.notifyTarget(at),tt&&this.notifyTarget(at,"mouseleave"),at.target=at.target.parent;et.overTargets=null,this.freeEvent(it),this.freeEvent(at)}this.cursor=null}mapPointerUp(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=performance.now(),tt=this.createPointerEvent(_);if(this.dispatchEvent(tt,"pointerup"),tt.pointerType==="touch")this.dispatchEvent(tt,"touchend");else if(tt.pointerType==="mouse"||tt.pointerType==="pen"){const ot=tt.button===2;this.dispatchEvent(tt,ot?"rightup":"mouseup")}const nt=this.trackingData(_.pointerId),it=this.findMountedTarget(nt.pressTargetsByButton[_.button]);let at=it;if(it&&!tt.composedPath().includes(it)){let ot=it;for(;ot&&!tt.composedPath().includes(ot);){if(tt.currentTarget=ot,this.notifyTarget(tt,"pointerupoutside"),tt.pointerType==="touch")this.notifyTarget(tt,"touchendoutside");else if(tt.pointerType==="mouse"||tt.pointerType==="pen"){const st=tt.button===2;this.notifyTarget(tt,st?"rightupoutside":"mouseupoutside")}ot=ot.parent}delete nt.pressTargetsByButton[_.button],at=ot}if(at){const ot=this.clonePointerEvent(tt,"click");ot.target=at,ot.path=null,nt.clicksByButton[_.button]||(nt.clicksByButton[_.button]={clickCount:0,target:ot.target,timeStamp:et});const st=nt.clicksByButton[_.button];if(st.target===ot.target&&et-st.timeStamp<200?++st.clickCount:st.clickCount=1,st.target=ot.target,st.timeStamp=et,ot.detail=st.clickCount,ot.pointerType==="mouse"){const dt=ot.button===2;this.dispatchEvent(ot,dt?"rightclick":"click")}else ot.pointerType==="touch"&&this.dispatchEvent(ot,"tap");this.dispatchEvent(ot,"pointertap"),this.freeEvent(ot)}this.freeEvent(tt)}mapPointerUpOutside(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.trackingData(_.pointerId),tt=this.findMountedTarget(et.pressTargetsByButton[_.button]),nt=this.createPointerEvent(_);if(tt){let it=tt;for(;it;)nt.currentTarget=it,this.notifyTarget(nt,"pointerupoutside"),nt.pointerType==="touch"?this.notifyTarget(nt,"touchendoutside"):(nt.pointerType==="mouse"||nt.pointerType==="pen")&&this.notifyTarget(nt,nt.button===2?"rightupoutside":"mouseupoutside"),it=it.parent;delete et.pressTargetsByButton[_.button]}this.freeEvent(nt)}mapWheel(_){if(!(_ instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const et=this.createWheelEvent(_);this.dispatchEvent(et),this.freeEvent(et)}findMountedTarget(_){if(!_)return null;let et=_[0];for(let tt=1;tt<_.length&&_[tt].parent===et;tt++)et=_[tt];return et}createPointerEvent(_,et,tt){const nt=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(_,nt),this.copyMouseData(_,nt),this.copyData(_,nt),nt.nativeEvent=_.nativeEvent,nt.originalEvent=_,nt.target=tt??this.hitTest(nt.global.x,nt.global.y)??this._hitElements[0],typeof et=="string"&&(nt.type=et),nt}createWheelEvent(_){const et=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(_,et),this.copyMouseData(_,et),this.copyData(_,et),et.nativeEvent=_.nativeEvent,et.originalEvent=_,et.target=this.hitTest(et.global.x,et.global.y),et}clonePointerEvent(_,et){const tt=this.allocateEvent(FederatedPointerEvent);return tt.nativeEvent=_.nativeEvent,tt.originalEvent=_.originalEvent,this.copyPointerData(_,tt),this.copyMouseData(_,tt),this.copyData(_,tt),tt.target=_.target,tt.path=_.composedPath().slice(),tt.type=et??tt.type,tt}copyWheelData(_,et){et.deltaMode=_.deltaMode,et.deltaX=_.deltaX,et.deltaY=_.deltaY,et.deltaZ=_.deltaZ}copyPointerData(_,et){_ instanceof FederatedPointerEvent&&et instanceof FederatedPointerEvent&&(et.pointerId=_.pointerId,et.width=_.width,et.height=_.height,et.isPrimary=_.isPrimary,et.pointerType=_.pointerType,et.pressure=_.pressure,et.tangentialPressure=_.tangentialPressure,et.tiltX=_.tiltX,et.tiltY=_.tiltY,et.twist=_.twist)}copyMouseData(_,et){_ instanceof FederatedMouseEvent&&et instanceof FederatedMouseEvent&&(et.altKey=_.altKey,et.button=_.button,et.buttons=_.buttons,et.client.copyFrom(_.client),et.ctrlKey=_.ctrlKey,et.metaKey=_.metaKey,et.movement.copyFrom(_.movement),et.screen.copyFrom(_.screen),et.shiftKey=_.shiftKey,et.global.copyFrom(_.global))}copyData(_,et){et.isTrusted=_.isTrusted,et.srcElement=_.srcElement,et.timeStamp=performance.now(),et.type=_.type,et.detail=_.detail,et.view=_.view,et.which=_.which,et.layer.copyFrom(_.layer),et.page.copyFrom(_.page)}trackingData(_){return this.mappingState.trackingData[_]||(this.mappingState.trackingData[_]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[_]}allocateEvent(_){this.eventPool.has(_)||this.eventPool.set(_,[]);const et=this.eventPool.get(_).pop()||new _(this);return et.eventPhase=et.NONE,et.currentTarget=null,et.path=null,et.target=null,et}freeEvent(_){if(_.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const et=_.constructor;this.eventPool.has(et)||this.eventPool.set(et,[]),this.eventPool.get(et).push(_)}notifyListeners(_,et){const tt=_.currentTarget._events[et];if(tt&&_.currentTarget.isInteractive())if("fn"in tt)tt.once&&_.currentTarget.removeListener(et,tt.fn,void 0,!0),tt.fn.call(tt.context,_);else for(let nt=0,it=tt.length;nt<it&&!_.propagationImmediatelyStopped;nt++)tt[nt].once&&_.currentTarget.removeListener(et,tt[nt].fn,void 0,!0),tt[nt].fn.call(tt[nt].context,_)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_EventSystem=class jo{constructor(_){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=_,this.rootBoundary=new EventBoundary(null),EventsTicker.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...jo.defaultEventFeatures},{set:(et,tt,nt)=>(tt==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=nt),et[tt]=nt,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(_){const{view:et,resolution:tt}=this.renderer;this.setTargetElement(et),this.resolution=tt,jo._defaultEventMode=_.eventMode??"auto",Object.assign(this.features,_.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(_){this.resolution=_}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(_){_=_||"default";let et=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(et=!1),this.currentCursor===_)return;this.currentCursor=_;const tt=this.cursorStyles[_];if(tt)switch(typeof tt){case"string":et&&(this.domElement.style.cursor=tt);break;case"function":tt(_);break;case"object":et&&Object.assign(this.domElement.style,tt);break}else et&&typeof _=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,_)&&(this.domElement.style.cursor=_)}get pointer(){return this.rootPointerEvent}onPointerDown(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const et=this.normalizeToPointerData(_);this.autoPreventDefault&&et[0].isNormalized&&(_.cancelable||!("cancelable"in _))&&_.preventDefault();for(let tt=0,nt=et.length;tt<nt;tt++){const it=et[tt],at=this.bootstrapEvent(this.rootPointerEvent,it);this.rootBoundary.mapEvent(at)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(_){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,EventsTicker.pointerMoved();const et=this.normalizeToPointerData(_);for(let tt=0,nt=et.length;tt<nt;tt++){const it=this.bootstrapEvent(this.rootPointerEvent,et[tt]);this.rootBoundary.mapEvent(it)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let et=_.target;_.composedPath&&_.composedPath().length>0&&(et=_.composedPath()[0]);const tt=et!==this.domElement?"outside":"",nt=this.normalizeToPointerData(_);for(let it=0,at=nt.length;it<at;it++){const ot=this.bootstrapEvent(this.rootPointerEvent,nt[it]);ot.type+=tt,this.rootBoundary.mapEvent(ot)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const et=this.normalizeToPointerData(_);for(let tt=0,nt=et.length;tt<nt;tt++){const it=this.bootstrapEvent(this.rootPointerEvent,et[tt]);this.rootBoundary.mapEvent(it)}this.setCursor(this.rootBoundary.cursor)}onWheel(_){if(!this.features.wheel)return;const et=this.normalizeWheelEvent(_);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(et)}setTargetElement(_){this.removeEvents(),this.domElement=_,EventsTicker.domElement=_,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;EventsTicker.addTickerListener();const _=this.domElement.style;_&&(globalThis.navigator.msPointerEnabled?(_.msContentZooming="none",_.msTouchAction="none"):this.supportsPointerEvents&&(_.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;EventsTicker.removeTickerListener();const _=this.domElement.style;globalThis.navigator.msPointerEnabled?(_.msContentZooming="",_.msTouchAction=""):this.supportsPointerEvents&&(_.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(_,et,tt){const nt=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},it=1/this.resolution;_.x=(et-nt.left)*(this.domElement.width/nt.width)*it,_.y=(tt-nt.top)*(this.domElement.height/nt.height)*it}normalizeToPointerData(_){const et=[];if(this.supportsTouchEvents&&_ instanceof TouchEvent)for(let tt=0,nt=_.changedTouches.length;tt<nt;tt++){const it=_.changedTouches[tt];typeof it.button>"u"&&(it.button=0),typeof it.buttons>"u"&&(it.buttons=1),typeof it.isPrimary>"u"&&(it.isPrimary=_.touches.length===1&&_.type==="touchstart"),typeof it.width>"u"&&(it.width=it.radiusX||1),typeof it.height>"u"&&(it.height=it.radiusY||1),typeof it.tiltX>"u"&&(it.tiltX=0),typeof it.tiltY>"u"&&(it.tiltY=0),typeof it.pointerType>"u"&&(it.pointerType="touch"),typeof it.pointerId>"u"&&(it.pointerId=it.identifier||0),typeof it.pressure>"u"&&(it.pressure=it.force||.5),typeof it.twist>"u"&&(it.twist=0),typeof it.tangentialPressure>"u"&&(it.tangentialPressure=0),typeof it.layerX>"u"&&(it.layerX=it.offsetX=it.clientX),typeof it.layerY>"u"&&(it.layerY=it.offsetY=it.clientY),it.isNormalized=!0,it.type=_.type,et.push(it)}else if(!globalThis.MouseEvent||_ instanceof MouseEvent&&(!this.supportsPointerEvents||!(_ instanceof globalThis.PointerEvent))){const tt=_;typeof tt.isPrimary>"u"&&(tt.isPrimary=!0),typeof tt.width>"u"&&(tt.width=1),typeof tt.height>"u"&&(tt.height=1),typeof tt.tiltX>"u"&&(tt.tiltX=0),typeof tt.tiltY>"u"&&(tt.tiltY=0),typeof tt.pointerType>"u"&&(tt.pointerType="mouse"),typeof tt.pointerId>"u"&&(tt.pointerId=MOUSE_POINTER_ID),typeof tt.pressure>"u"&&(tt.pressure=.5),typeof tt.twist>"u"&&(tt.twist=0),typeof tt.tangentialPressure>"u"&&(tt.tangentialPressure=0),tt.isNormalized=!0,et.push(tt)}else et.push(_);return et}normalizeWheelEvent(_){const et=this.rootWheelEvent;return this.transferMouseData(et,_),et.deltaX=_.deltaX,et.deltaY=_.deltaY,et.deltaZ=_.deltaZ,et.deltaMode=_.deltaMode,this.mapPositionToPoint(et.screen,_.clientX,_.clientY),et.global.copyFrom(et.screen),et.offset.copyFrom(et.screen),et.nativeEvent=_,et.type=_.type,et}bootstrapEvent(_,et){return _.originalEvent=null,_.nativeEvent=et,_.pointerId=et.pointerId,_.width=et.width,_.height=et.height,_.isPrimary=et.isPrimary,_.pointerType=et.pointerType,_.pressure=et.pressure,_.tangentialPressure=et.tangentialPressure,_.tiltX=et.tiltX,_.tiltY=et.tiltY,_.twist=et.twist,this.transferMouseData(_,et),this.mapPositionToPoint(_.screen,et.clientX,et.clientY),_.global.copyFrom(_.screen),_.offset.copyFrom(_.screen),_.isTrusted=et.isTrusted,_.type==="pointerleave"&&(_.type="pointerout"),_.type.startsWith("mouse")&&(_.type=_.type.replace("mouse","pointer")),_.type.startsWith("touch")&&(_.type=TOUCH_TO_POINTER[_.type]||_.type),_}transferMouseData(_,et){_.isTrusted=et.isTrusted,_.srcElement=et.srcElement,_.timeStamp=performance.now(),_.type=et.type,_.altKey=et.altKey,_.button=et.button,_.buttons=et.buttons,_.client.x=et.clientX,_.client.y=et.clientY,_.ctrlKey=et.ctrlKey,_.metaKey=et.metaKey,_.movement.x=et.movementX,_.movement.y=et.movementY,_.page.x=et.pageX,_.page.y=et.pageY,_.relatedTarget=null,_.shiftKey=et.shiftKey}};_EventSystem.extension={name:"events",type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem]},_EventSystem.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let EventSystem=_EventSystem;extensions$2.add(EventSystem);function convertEventModeToInteractiveMode(_e){return _e==="dynamic"||_e==="static"}const FederatedDisplayObject={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??convertEventModeToInteractiveMode(EventSystem.defaultEventMode)},set interactive(_e){deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=_e,this.eventMode=_e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??EventSystem.defaultEventMode},set eventMode(_e){this._internalInteractive=convertEventModeToInteractiveMode(_e),this._internalEventMode=_e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(_e,_,et){const tt=typeof et=="boolean"&&et||typeof et=="object"&&et.capture,nt=typeof et=="object"?et.signal:void 0,it=typeof et=="object"?et.once===!0:!1,at=typeof _=="function"?void 0:_;_e=tt?`${_e}capture`:_e;const ot=typeof _=="function"?_:_.handleEvent,st=this;nt&&nt.addEventListener("abort",()=>{st.off(_e,ot,at)}),it?st.once(_e,ot,at):st.on(_e,ot,at)},removeEventListener(_e,_,et){const tt=typeof et=="boolean"&&et||typeof et=="object"&&et.capture,nt=typeof _=="function"?void 0:_;_e=tt?`${_e}capture`:_e,_=typeof _=="function"?_:_.handleEvent,this.off(_e,_,nt)},dispatchEvent(_e){if(!(_e instanceof FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return _e.defaultPrevented=!1,_e.path=null,_e.target=this,_e.manager.dispatchEvent(_e),!_e.defaultPrevented}};DisplayObject.mixin(FederatedDisplayObject);const accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);const KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2;class AccessibilityManager{constructor(_){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();const et=document.createElement("div");et.style.width=`${DIV_TOUCH_SIZE}px`,et.style.height=`${DIV_TOUCH_SIZE}px`,et.style.position="absolute",et.style.top=`${DIV_TOUCH_POS_X}px`,et.style.left=`${DIV_TOUCH_POS_Y}px`,et.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=et,this.renderer=_,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const _=document.createElement("button");_.style.width=`${DIV_HOOK_SIZE}px`,_.style.height=`${DIV_HOOK_SIZE}px`,_.style.position="absolute",_.style.top=`${DIV_HOOK_POS_X}px`,_.style.left=`${DIV_HOOK_POS_Y}px`,_.style.zIndex=DIV_HOOK_ZINDEX.toString(),_.style.backgroundColor="#FF0000",_.title="select to enable accessibility for this content",_.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(_),this._hookDiv=_}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var _;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(_=this.renderer.view.parentNode)==null||_.appendChild(this.div))}deactivate(){var _;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(_=this.div.parentNode)==null||_.removeChild(this.div))}updateAccessibleObjects(_){if(!_.visible||!_.accessibleChildren)return;_.accessible&&_.isInteractive()&&(_._accessibleActive||this.addChild(_),_.renderId=this.renderId);const et=_.children;if(et)for(let tt=0;tt<et.length;tt++)this.updateAccessibleObjects(et[tt])}update(){const _=performance.now();if(isMobile.android.device&&_<this.androidUpdateCount||(this.androidUpdateCount=_+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:et,y:tt,width:nt,height:it}=this.renderer.view.getBoundingClientRect(),{width:at,height:ot,resolution:st}=this.renderer,dt=nt/at*st,ht=it/ot*st;let ct=this.div;ct.style.left=`${et}px`,ct.style.top=`${tt}px`,ct.style.width=`${at}px`,ct.style.height=`${ot}px`;for(let ut=0;ut<this.children.length;ut++){const ft=this.children[ut];if(ft.renderId!==this.renderId)ft._accessibleActive=!1,removeItems(this.children,ut,1),this.div.removeChild(ft._accessibleDiv),this.pool.push(ft._accessibleDiv),ft._accessibleDiv=null,ut--;else{ct=ft._accessibleDiv;let gt=ft.hitArea;const mt=ft.worldTransform;ft.hitArea?(ct.style.left=`${(mt.tx+gt.x*mt.a)*dt}px`,ct.style.top=`${(mt.ty+gt.y*mt.d)*ht}px`,ct.style.width=`${gt.width*mt.a*dt}px`,ct.style.height=`${gt.height*mt.d*ht}px`):(gt=ft.getBounds(),this.capHitArea(gt),ct.style.left=`${gt.x*dt}px`,ct.style.top=`${gt.y*ht}px`,ct.style.width=`${gt.width*dt}px`,ct.style.height=`${gt.height*ht}px`,ct.title!==ft.accessibleTitle&&ft.accessibleTitle!==null&&(ct.title=ft.accessibleTitle),ct.getAttribute("aria-label")!==ft.accessibleHint&&ft.accessibleHint!==null&&ct.setAttribute("aria-label",ft.accessibleHint)),(ft.accessibleTitle!==ct.title||ft.tabIndex!==ct.tabIndex)&&(ct.title=ft.accessibleTitle,ct.tabIndex=ft.tabIndex,this.debug&&this.updateDebugHTML(ct))}}this.renderId++}updateDebugHTML(_){_.innerHTML=`type: ${_.type}</br> title : ${_.title}</br> tabIndex: ${_.tabIndex}`}capHitArea(_){_.x<0&&(_.width+=_.x,_.x=0),_.y<0&&(_.height+=_.y,_.y=0);const{width:et,height:tt}=this.renderer;_.x+_.width>et&&(_.width=et-_.x),_.y+_.height>tt&&(_.height=tt-_.y)}addChild(_){let et=this.pool.pop();et||(et=document.createElement("button"),et.style.width=`${DIV_TOUCH_SIZE}px`,et.style.height=`${DIV_TOUCH_SIZE}px`,et.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",et.style.position="absolute",et.style.zIndex=DIV_TOUCH_ZINDEX.toString(),et.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?et.setAttribute("aria-live","off"):et.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?et.setAttribute("aria-relevant","additions"):et.setAttribute("aria-relevant","text"),et.addEventListener("click",this._onClick.bind(this)),et.addEventListener("focus",this._onFocus.bind(this)),et.addEventListener("focusout",this._onFocusOut.bind(this))),et.style.pointerEvents=_.accessiblePointerEvents,et.type=_.accessibleType,_.accessibleTitle&&_.accessibleTitle!==null?et.title=_.accessibleTitle:(!_.accessibleHint||_.accessibleHint===null)&&(et.title=`displayObject ${_.tabIndex}`),_.accessibleHint&&_.accessibleHint!==null&&et.setAttribute("aria-label",_.accessibleHint),this.debug&&this.updateDebugHTML(et),_._accessibleActive=!0,_._accessibleDiv=et,et.displayObject=_,this.children.push(_),this.div.appendChild(_._accessibleDiv),_._accessibleDiv.tabIndex=_.tabIndex}_dispatchEvent(_,et){const{displayObject:tt}=_.target,nt=this.renderer.events.rootBoundary,it=Object.assign(new FederatedEvent(nt),{target:tt});nt.rootTarget=this.renderer.lastObjectRendered,et.forEach(at=>nt.dispatchEvent(it,at))}_onClick(_){this._dispatchEvent(_,["click","pointertap","tap"])}_onFocus(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","assertive"),this._dispatchEvent(_,["mouseover"])}_onFocusOut(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","polite"),this._dispatchEvent(_,["mouseout"])}_onKeyDown(_){_.keyCode===KEY_CODE_TAB&&this.activate()}_onMouseMove(_){_.movementX===0&&_.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}AccessibilityManager.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]};extensions$2.add(AccessibilityManager);const _Application=class zo{constructor(_){this.stage=new Container,_=Object.assign({forceCanvas:!1},_),this.renderer=autoDetectRenderer(_),zo._plugins.forEach(et=>{et.init.call(this,_)})}render(){this.renderer.render(this.stage)}get view(){var _;return(_=this.renderer)==null?void 0:_.view}get screen(){var _;return(_=this.renderer)==null?void 0:_.screen}destroy(_,et){const tt=zo._plugins.slice(0);tt.reverse(),tt.forEach(nt=>{nt.destroy.call(this)}),this.stage.destroy(et),this.stage=null,this.renderer.destroy(_),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions$2.handleByList(ExtensionType.Application,Application._plugins);class ResizePlugin{static init(_){Object.defineProperty(this,"resizeTo",{set(et){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=et,et&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let et,tt;if(this._resizeTo===globalThis.window)et=globalThis.innerWidth,tt=globalThis.innerHeight;else{const{clientWidth:nt,clientHeight:it}=this._resizeTo;et=nt,tt=it}this.renderer.resize(et,tt),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=_.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application;extensions$2.add(ResizePlugin);const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions$2.handle(ExtensionType.Asset,_e=>{const _=_e.ref;Object.entries(assetKeyMap).filter(([et])=>!!_[et]).forEach(([et,tt])=>extensions$2.add(Object.assign(_[et],{extension:_[et].extension??tt})))},_e=>{const _=_e.ref;Object.keys(assetKeyMap).filter(et=>!!_[et]).forEach(et=>extensions$2.remove(_[et]))});class BackgroundLoader{constructor(_,et=!1){this._loader=_,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=et}add(_){_.forEach(et=>{this._assetList.push(et)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const _=[],et=Math.min(this._assetList.length,this._maxConcurrent);for(let tt=0;tt<et;tt++)_.push(this._assetList.pop());await this._loader.load(_),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(_){this._isActive!==_&&(this._isActive=_,_&&!this._isLoading&&this._next())}}function checkDataUrl(_e,_){if(Array.isArray(_)){for(const et of _)if(_e.startsWith(`data:${et}`))return!0;return!1}return _e.startsWith(`data:${_}`)}function checkExtension(_e,_){const et=_e.split("?")[0],tt=path.extname(et).toLowerCase();return Array.isArray(_)?_.includes(tt):tt===_}const convertToList=(_e,_,et=!1)=>(Array.isArray(_e)||(_e=[_e]),_?_e.map(tt=>typeof tt=="string"||et?_(tt):tt):_e),copySearchParams=(_e,_)=>{const et=_.split("?")[1];return et&&(_e+=`?${et}`),_e};function processX(_e,_,et,tt,nt){const it=_[et];for(let at=0;at<it.length;at++){const ot=it[at];et<_.length-1?processX(_e.replace(tt[et],ot),_,et+1,tt,nt):nt.push(_e.replace(tt[et],ot))}}function createStringVariations(_e){const _=/\{(.*?)\}/g,et=_e.match(_),tt=[];if(et){const nt=[];et.forEach(it=>{const at=it.substring(1,it.length-1).split(",");nt.push(at)}),processX(_e,nt,0,et,tt)}else tt.push(_e);return tt}const isSingleItem=_e=>!Array.isArray(_e);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(_){return this._cache.has(_)}get(_){const et=this._cache.get(_);return et||console.warn(`[Assets] Asset id ${_} was not found in the Cache`),et}set(_,et){const tt=convertToList(_);let nt;for(let ot=0;ot<this.parsers.length;ot++){const st=this.parsers[ot];if(st.test(et)){nt=st.getCacheableAssets(tt,et);break}}nt||(nt={},tt.forEach(ot=>{nt[ot]=et}));const it=Object.keys(nt),at={cacheKeys:it,keys:tt};if(tt.forEach(ot=>{this._cacheMap.set(ot,at)}),it.forEach(ot=>{this._cache.has(ot)&&this._cache.get(ot)!==et&&console.warn("[Cache] already has key:",ot),this._cache.set(ot,nt[ot])}),et instanceof Texture){const ot=et;tt.forEach(st=>{ot.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(ot.baseTexture,st),Texture.addToCache(ot,st)})}}remove(_){if(!this._cacheMap.has(_)){console.warn(`[Assets] Asset id ${_} was not found in the Cache`);return}const et=this._cacheMap.get(_);et.cacheKeys.forEach(tt=>{this._cache.delete(tt)}),et.keys.forEach(tt=>{this._cacheMap.delete(tt)})}get parsers(){return this._parsers}}const Cache=new CacheClass;let Loader$1=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(_,et,tt)=>(this._parsersValidated=!1,_[et]=tt,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(_,et){const tt={promise:null,parser:null};return tt.promise=(async()=>{var at,ot;let nt=null,it=null;if(et.loadParser&&(it=this._parserHash[et.loadParser],it||console.warn(`[Assets] specified load parser "${et.loadParser}" not found while loading ${_}`)),!it){for(let st=0;st<this.parsers.length;st++){const dt=this.parsers[st];if(dt.load&&((at=dt.test)!=null&&at.call(dt,_,et,this))){it=dt;break}}if(!it)return console.warn(`[Assets] ${_} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}nt=await it.load(_,et,this),tt.parser=it;for(let st=0;st<this.parsers.length;st++){const dt=this.parsers[st];dt.parse&&dt.parse&&await((ot=dt.testParse)==null?void 0:ot.call(dt,nt,et,this))&&(nt=await dt.parse(nt,et,this)||nt,tt.parser=dt)}return nt})(),tt}async load(_,et){this._parsersValidated||this._validateParsers();let tt=0;const nt={},it=isSingleItem(_),at=convertToList(_,dt=>({alias:[dt],src:dt})),ot=at.length,st=at.map(async dt=>{const ht=path.toAbsolute(dt.src);if(!nt[dt.src])try{this.promiseCache[ht]||(this.promiseCache[ht]=this._getLoadPromiseAndParser(ht,dt)),nt[dt.src]=await this.promiseCache[ht].promise,et&&et(++tt/ot)}catch(ct){throw delete this.promiseCache[ht],delete nt[dt.src],new Error(`[Loader.load] Failed to load ${ht}.
${ct}`)}});return await Promise.all(st),it?nt[at[0].src]:nt}async unload(_){const et=convertToList(_,tt=>({alias:[tt],src:tt})).map(async tt=>{var at,ot;const nt=path.toAbsolute(tt.src),it=this.promiseCache[nt];if(it){const st=await it.promise;delete this.promiseCache[nt],(ot=(at=it.parser)==null?void 0:at.unload)==null||ot.call(at,st,tt,this)}});await Promise.all(et)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(_=>_.name).reduce((_,et)=>(_[et.name]&&console.warn(`[Assets] loadParser name conflict "${et.name}"`),{..._,[et.name]:et}),{})}};var LoaderParserPriority=(_e=>(_e[_e.Low=0]="Low",_e[_e.Normal=1]="Normal",_e[_e.High=2]="High",_e))(LoaderParserPriority||{});const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",test(_e){return checkDataUrl(_e,validJSONMIME)||checkExtension(_e,validJSONExtension)},async load(_e){return await(await settings.ADAPTER.fetch(_e)).json()}};extensions$2.add(loadJson);const validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(_e){return checkDataUrl(_e,validTXTMIME)||checkExtension(_e,validTXTExtension)},async load(_e){return await(await settings.ADAPTER.fetch(_e)).text()}};extensions$2.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(_e){const _=path.extname(_e),et=path.basename(_e,_).replace(/(-|_)/g," ").toLowerCase().split(" ").map(it=>it.charAt(0).toUpperCase()+it.slice(1));let tt=et.length>0;for(const it of et)if(!it.match(CSS_IDENT_TOKEN_REGEX)){tt=!1;break}let nt=et.join(" ");return tt||(nt=`"${nt.replace(/[\\"]/g,"\\$&")}"`),nt}const validURICharactersRegex=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded(_e){return validURICharactersRegex.test(_e)?_e:encodeURI(_e)}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",test(_e){return checkDataUrl(_e,validFontMIMEs)||checkExtension(_e,validFontExtensions)},async load(_e,_){var tt,nt,it;const et=settings.ADAPTER.getFontFaceSet();if(et){const at=[],ot=((tt=_.data)==null?void 0:tt.family)??getFontFamilyName(_e),st=((it=(nt=_.data)==null?void 0:nt.weights)==null?void 0:it.filter(ht=>validWeights.includes(ht)))??["normal"],dt=_.data??{};for(let ht=0;ht<st.length;ht++){const ct=st[ht],ut=new FontFace(ot,`url(${encodeURIWhenNeeded(_e)})`,{...dt,weight:ct});await ut.load(),et.add(ut),at.push(ut)}return at.length===1?at[0]:at}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(_e){(Array.isArray(_e)?_e:[_e]).forEach(_=>settings.ADAPTER.getFontFaceSet().delete(_))}};extensions$2.add(loadWebFont);const WORKER_CODE$1=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let WORKER_URL$1=null,WorkerInstance$1=class{constructor(){WORKER_URL$1||(WORKER_URL$1=URL.createObjectURL(new Blob([WORKER_CODE$1],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$1)}};WorkerInstance$1.revokeObjectURL=function(){WORKER_URL$1&&(URL.revokeObjectURL(WORKER_URL$1),WORKER_URL$1=null)};const WORKER_CODE=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let WORKER_URL=null;class WorkerInstance{constructor(){WORKER_URL||(WORKER_URL=URL.createObjectURL(new Blob([WORKER_CODE],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL)}}WorkerInstance.revokeObjectURL=function(){WORKER_URL&&(URL.revokeObjectURL(WORKER_URL),WORKER_URL=null)};let UUID=0,MAX_WORKERS;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(_=>{const{worker:et}=new WorkerInstance$1;et.addEventListener("message",tt=>{et.terminate(),WorkerInstance$1.revokeObjectURL(),_(tt.data)})}),this._isImageBitmapSupported)}loadImageBitmap(_){return this._run("loadImageBitmap",[_])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let _=this.workerPool.pop();return!_&&this._createdWorkers<MAX_WORKERS&&(this._createdWorkers++,_=new WorkerInstance().worker,_.addEventListener("message",et=>{this.complete(et.data),this.returnWorker(et.target),this.next()})),_}returnWorker(_){this.workerPool.push(_)}complete(_){_.error!==void 0?this.resolveHash[_.uuid].reject(_.error):this.resolveHash[_.uuid].resolve(_.data),this.resolveHash[_.uuid]=null}async _run(_,et){await this._initWorkers();const tt=new Promise((nt,it)=>{this.queue.push({id:_,arguments:et,resolve:nt,reject:it})});return this.next(),tt}next(){if(!this.queue.length)return;const _=this.getWorker();if(!_)return;const et=this.queue.pop(),tt=et.id;this.resolveHash[UUID]={resolve:et.resolve,reject:et.reject},_.postMessage({data:et.arguments,uuid:UUID++,id:tt})}}const WorkerManager=new WorkerManagerClass;function createTexture$1(_e,_,et){_e.resource.internal=!0;const tt=new Texture(_e),nt=()=>{delete _.promiseCache[et],Cache.has(et)&&Cache.remove(et)};return tt.baseTexture.once("destroyed",()=>{et in _.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),nt())}),tt.once("destroyed",()=>{_e.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),nt())}),tt}const validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(_e){const _=await settings.ADAPTER.fetch(_e);if(!_.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${_e}: ${_.status} ${_.statusText}`);const et=await _.blob();return await createImageBitmap(et)}const loadTextures={name:"loadTextures",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(_e){return checkDataUrl(_e,validImageMIMEs)||checkExtension(_e,validImageExtensions)},async load(_e,_,et){var ot;const tt=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let nt;tt?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?nt=await WorkerManager.loadImageBitmap(_e):nt=await loadImageBitmap(_e):nt=await new Promise((st,dt)=>{const ht=new Image;ht.crossOrigin=this.config.crossOrigin,ht.src=_e,ht.complete?st(ht):(ht.onload=()=>st(ht),ht.onerror=ct=>dt(ct))});const it={..._.data};it.resolution??(it.resolution=getResolutionOfUrl(_e)),tt&&((ot=it.resourceOptions)==null?void 0:ot.ownsImageBitmap)===void 0&&(it.resourceOptions={...it.resourceOptions},it.resourceOptions.ownsImageBitmap=!0);const at=new BaseTexture(nt,it);return at.resource.src=_e,createTexture$1(at,et,_e)},unload(_e){_e.destroy(!0)}};extensions$2.add(loadTextures);const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSVG={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadSVG",test(_e){return checkDataUrl(_e,validSVGMIME)||checkExtension(_e,validSVGExtension)},async testParse(_e){return SVGResource.test(_e)},async parse(_e,_,et){var it;const tt=new SVGResource(_e,(it=_==null?void 0:_.data)==null?void 0:it.resourceOptions);await tt.load();const nt=new BaseTexture(tt,{resolution:getResolutionOfUrl(_e),..._==null?void 0:_.data});return nt.resource.src=_.src,createTexture$1(nt,et,_.src)},async load(_e,_){return(await settings.ADAPTER.fetch(_e)).text()},unload:loadTextures.unload};extensions$2.add(loadSVG);const validVideoExtensions=[".mp4",".m4v",".webm",".ogv"],validVideoMIMEs=["video/mp4","video/webm","video/ogg"],loadVideo={name:"loadVideo",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(_e){return checkDataUrl(_e,validVideoMIMEs)||checkExtension(_e,validVideoExtensions)},async load(_e,_,et){var at;let tt;const nt=await(await settings.ADAPTER.fetch(_e)).blob(),it=URL.createObjectURL(nt);try{const ot={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(at=_==null?void 0:_.data)==null?void 0:at.resourceOptions,autoLoad:!0},st=new VideoResource(it,ot);await st.load();const dt=new BaseTexture(st,{alphaMode:await detectVideoAlphaMode(),resolution:getResolutionOfUrl(_e),..._==null?void 0:_.data});dt.resource.src=_e,tt=createTexture$1(dt,et,_e),tt.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(it)})}catch(ot){throw URL.revokeObjectURL(it),ot}return tt},unload(_e){_e.destroy(!0)}};extensions$2.add(loadVideo);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(_,et)=>`${_}${this._bundleIdConnector}${et}`,extractAssetIdFromBundle:(_,et)=>et.replace(`${_}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(_){if(this._bundleIdConnector=_.connector??this._bundleIdConnector,this._createBundleAssetId=_.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=_.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(..._){_.forEach(et=>{this._preferredOrder.push(et),et.priority||(et.priority=Object.keys(et.params))}),this._resolverHash={}}set basePath(_){this._basePath=_}get basePath(){return this._basePath}set rootPath(_){this._rootPath=_}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(_){if(typeof _=="string")this._defaultSearchParams=_;else{const et=_;this._defaultSearchParams=Object.keys(et).map(tt=>`${encodeURIComponent(tt)}=${encodeURIComponent(et[tt])}`).join("&")}}getAlias(_){const{alias:et,name:tt,src:nt,srcs:it}=_;return convertToList(et||tt||nt||it,at=>typeof at=="string"?at:Array.isArray(at)?at.map(ot=>(ot==null?void 0:ot.src)??(ot==null?void 0:ot.srcs)??ot):at!=null&&at.src||at!=null&&at.srcs?at.src??at.srcs:at,!0)}addManifest(_){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=_,_.bundles.forEach(et=>{this.addBundle(et.name,et.assets)})}addBundle(_,et){const tt=[];Array.isArray(et)?et.forEach(nt=>{const it=nt.src??nt.srcs,at=nt.alias??nt.name;let ot;if(typeof at=="string"){const st=this._createBundleAssetId(_,at);tt.push(st),ot=[at,st]}else{const st=at.map(dt=>this._createBundleAssetId(_,dt));tt.push(...st),ot=[...at,...st]}this.add({...nt,alias:ot,src:it})}):Object.keys(et).forEach(nt=>{const it=[nt,this._createBundleAssetId(_,nt)];if(typeof et[nt]=="string")this.add({alias:it,src:et[nt]});else if(Array.isArray(et[nt]))this.add({alias:it,src:et[nt]});else{const at=et[nt],ot=at.src??at.srcs;this.add({...at,alias:it,src:Array.isArray(ot)?ot:[ot]})}tt.push(...it)}),this._bundles[_]=tt}add(_,et,tt,nt,it){const at=[];typeof _=="string"||Array.isArray(_)&&typeof _[0]=="string"?(deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),at.push({alias:_,src:et,data:tt,format:nt,loadParser:it})):Array.isArray(_)?at.push(..._):at.push(_);let ot;ot=st=>{this.hasKey(st)&&console.warn(`[Resolver] already has key: ${st} overwriting`)},convertToList(at).forEach(st=>{const{src:dt,srcs:ht}=st;let{data:ct,format:ut,loadParser:ft}=st;const gt=convertToList(dt||ht).map(yt=>typeof yt=="string"?createStringVariations(yt):Array.isArray(yt)?yt:[yt]),mt=this.getAlias(st);Array.isArray(mt)?mt.forEach(ot):ot(mt);const vt=[];gt.forEach(yt=>{yt.forEach(bt=>{let _t={};if(typeof bt!="object"){_t.src=bt;for(let xt=0;xt<this._parsers.length;xt++){const St=this._parsers[xt];if(St.test(bt)){_t=St.parse(bt);break}}}else ct=bt.data??ct,ut=bt.format??ut,ft=bt.loadParser??ft,_t={..._t,...bt};if(!mt)throw new Error(`[Resolver] alias is undefined for this asset: ${_t.src}`);_t=this.buildResolvedAsset(_t,{aliases:mt,data:ct,format:ut,loadParser:ft}),vt.push(_t)})}),mt.forEach(yt=>{this._assetMap[yt]=vt})})}resolveBundle(_){const et=isSingleItem(_);_=convertToList(_);const tt={};return _.forEach(nt=>{const it=this._bundles[nt];if(it){const at=this.resolve(it),ot={};for(const st in at){const dt=at[st];ot[this._extractAssetIdFromBundle(nt,st)]=dt}tt[nt]=ot}}),et?tt[_[0]]:tt}resolveUrl(_){const et=this.resolve(_);if(typeof _!="string"){const tt={};for(const nt in et)tt[nt]=et[nt].src;return tt}return et.src}resolve(_){const et=isSingleItem(_);_=convertToList(_);const tt={};return _.forEach(nt=>{if(!this._resolverHash[nt])if(this._assetMap[nt]){let it=this._assetMap[nt];const at=it[0],ot=this._getPreferredOrder(it);ot==null||ot.priority.forEach(st=>{ot.params[st].forEach(dt=>{const ht=it.filter(ct=>ct[st]?ct[st]===dt:!1);ht.length&&(it=ht)})}),this._resolverHash[nt]=it[0]??at}else this._resolverHash[nt]=this.buildResolvedAsset({alias:[nt],src:nt},{});tt[nt]=this._resolverHash[nt]}),et?tt[_[0]]:tt}hasKey(_){return!!this._assetMap[_]}hasBundle(_){return!!this._bundles[_]}_getPreferredOrder(_){for(let et=0;et<_.length;et++){const tt=_[0],nt=this._preferredOrder.find(it=>it.params.format.includes(tt.format));if(nt)return nt}return this._preferredOrder[0]}_appendDefaultSearchParams(_){if(!this._defaultSearchParams)return _;const et=/\?/.test(_)?"&":"?";return`${_}${et}${this._defaultSearchParams}`}buildResolvedAsset(_,et){const{aliases:tt,data:nt,loadParser:it,format:at}=et;return(this._basePath||this._rootPath)&&(_.src=path.toAbsolute(_.src,this._basePath,this._rootPath)),_.alias=tt??_.alias??[_.src],_.src=this._appendDefaultSearchParams(_.src),_.data={...nt||{},..._.data},_.loadParser=it??_.loadParser,_.format=at??_.format??path.extname(_.src).slice(1),_.srcs=_.src,_.name=_.alias,_}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader$1,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(_={}){var it,at;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,_.defaultSearchParams&&this.resolver.setDefaultSearchParams(_.defaultSearchParams),_.basePath&&(this.resolver.basePath=_.basePath),_.bundleIdentifier&&this.resolver.setBundleIdentifier(_.bundleIdentifier),_.manifest){let ot=_.manifest;typeof ot=="string"&&(ot=await this.load(ot)),this.resolver.addManifest(ot)}const et=((it=_.texturePreference)==null?void 0:it.resolution)??1,tt=typeof et=="number"?[et]:et,nt=await this._detectFormats({preferredFormats:(at=_.texturePreference)==null?void 0:at.format,skipDetections:_.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:nt,resolution:tt}}),_.preferences&&this.setPreferences(_.preferences)}add(_,et,tt,nt,it){this.resolver.add(_,et,tt,nt,it)}async load(_,et){this._initialized||await this.init();const tt=isSingleItem(_),nt=convertToList(_).map(ot=>{if(typeof ot!="string"){const st=this.resolver.getAlias(ot);return st.some(dt=>!this.resolver.hasKey(dt))&&this.add(ot),Array.isArray(st)?st[0]:st}return this.resolver.hasKey(ot)||this.add({alias:ot,src:ot}),ot}),it=this.resolver.resolve(nt),at=await this._mapLoadToResolve(it,et);return tt?at[nt[0]]:at}addBundle(_,et){this.resolver.addBundle(_,et)}async loadBundle(_,et){this._initialized||await this.init();let tt=!1;typeof _=="string"&&(tt=!0,_=[_]);const nt=this.resolver.resolveBundle(_),it={},at=Object.keys(nt);let ot=0,st=0;const dt=()=>{et==null||et(++ot/st)},ht=at.map(ct=>{const ut=nt[ct];return st+=Object.keys(ut).length,this._mapLoadToResolve(ut,dt).then(ft=>{it[ct]=ft})});return await Promise.all(ht),tt?it[_[0]]:it}async backgroundLoad(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const et=this.resolver.resolve(_);this._backgroundLoader.add(Object.values(et))}async backgroundLoadBundle(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const et=this.resolver.resolveBundle(_);Object.values(et).forEach(tt=>{this._backgroundLoader.add(Object.values(tt))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(_){if(typeof _=="string")return Cache.get(_);const et={};for(let tt=0;tt<_.length;tt++)et[tt]=Cache.get(_[tt]);return et}async _mapLoadToResolve(_,et){const tt=Object.values(_),nt=Object.keys(_);this._backgroundLoader.active=!1;const it=await this.loader.load(tt,et);this._backgroundLoader.active=!0;const at={};return tt.forEach((ot,st)=>{const dt=it[ot.src],ht=[ot.src];ot.alias&&ht.push(...ot.alias),at[nt[st]]=dt,Cache.set(ht,dt)}),at}async unload(_){this._initialized||await this.init();const et=convertToList(_).map(nt=>typeof nt!="string"?nt.src:nt),tt=this.resolver.resolve(et);await this._unloadFromResolved(tt)}async unloadBundle(_){this._initialized||await this.init(),_=convertToList(_);const et=this.resolver.resolveBundle(_),tt=Object.keys(et).map(nt=>this._unloadFromResolved(et[nt]));await Promise.all(tt)}async _unloadFromResolved(_){const et=Object.values(_);et.forEach(tt=>{Cache.remove(tt.src)}),await this.loader.unload(et)}async _detectFormats(_){let et=[];_.preferredFormats&&(et=Array.isArray(_.preferredFormats)?_.preferredFormats:[_.preferredFormats]);for(const tt of _.detections)_.skipDetections||await tt.test()?et=await tt.add(et):_.skipDetections||(et=await tt.remove(et));return et=et.filter((tt,nt)=>et.indexOf(tt)===nt),et}get detections(){return this._detections}get preferWorkers(){return loadTextures.config.preferWorkers}set preferWorkers(_){deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:_})}setPreferences(_){this.loader.parsers.forEach(et=>{et.config&&Object.keys(et.config).filter(tt=>tt in _).forEach(tt=>{et.config[tt]=_[tt]})})}}const Assets=new AssetsClass;extensions$2.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const cacheTextureArray={extension:ExtensionType.CacheParser,test:_e=>Array.isArray(_e)&&_e.every(_=>_ instanceof Texture),getCacheableAssets:(_e,_)=>{const et={};return _e.forEach(tt=>{_.forEach((nt,it)=>{et[tt+(it===0?"":it+1)]=nt})}),et}};extensions$2.add(cacheTextureArray);async function testImageFormat(_e){if("Image"in globalThis)return new Promise(_=>{const et=new Image;et.onload=()=>{_(!0)},et.onerror=()=>{_(!1)},et.src=_e});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const _=await(await fetch(_e)).blob();await createImageBitmap(_)}catch{return!1}return!0}return!1}const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async _e=>[..._e,"avif"],remove:async _e=>_e.filter(_=>_!=="avif")};extensions$2.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async _e=>[..._e,"webp"],remove:async _e=>_e.filter(_=>_!=="webp")};extensions$2.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async _e=>[..._e,...imageFormats],remove:async _e=>_e.filter(_=>!imageFormats.includes(_))};extensions$2.add(detectDefaults);const inWorker="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat(_e){return inWorker?!1:document.createElement("video").canPlayType(_e)!==""}const detectWebm={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/webm"),add:async _e=>[..._e,"webm"],remove:async _e=>_e.filter(_=>_!=="webm")};extensions$2.add(detectWebm);const detectMp4={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/mp4"),add:async _e=>[..._e,"mp4","m4v"],remove:async _e=>_e.filter(_=>_!=="mp4"&&_!=="m4v")};extensions$2.add(detectMp4);const detectOgv={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/ogg"),add:async _e=>[..._e,"ogv"],remove:async _e=>_e.filter(_=>_!=="ogv")};extensions$2.add(detectOgv);const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:_e=>{var _;return{resolution:parseFloat(((_=settings.RETINA_PREFIX.exec(_e))==null?void 0:_[1])??"1"),format:path.extname(_e).slice(1),src:_e}}};extensions$2.add(resolveTextureUrl);var INTERNAL_FORMATS=(_e=>(_e[_e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",_e[_e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",_e[_e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",_e[_e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",_e[_e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",_e[_e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",_e[_e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",_e[_e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",_e[_e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",_e[_e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",_e[_e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",_e[_e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",_e[_e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",_e[_e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",_e[_e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",_e[_e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",_e[_e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",_e[_e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",_e[_e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",_e[_e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",_e[_e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",_e[_e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",_e[_e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",_e[_e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",_e[_e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",_e[_e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",_e[_e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",_e))(INTERNAL_FORMATS||{});const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let storedGl,extensions$1;function getCompressedTextureExtensions(){extensions$1={bptc:storedGl.getExtension("EXT_texture_compression_bptc"),astc:storedGl.getExtension("WEBGL_compressed_texture_astc"),etc:storedGl.getExtension("WEBGL_compressed_texture_etc"),s3tc:storedGl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:storedGl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:storedGl.getExtension("WEBGL_compressed_texture_pvrtc")||storedGl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:storedGl.getExtension("WEBGL_compressed_texture_etc1"),atc:storedGl.getExtension("WEBGL_compressed_texture_atc")}}const detectCompressedTextures={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>{const _e=settings.ADAPTER.createCanvas().getContext("webgl");return _e?(storedGl=_e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async _e=>{extensions$1||getCompressedTextureExtensions();const _=[];for(const et in extensions$1)extensions$1[et]&&_.push(et);return[..._,..._e]},remove:async _e=>(extensions$1||getCompressedTextureExtensions(),_e.filter(_=>!(_ in extensions$1)))};extensions$2.add(detectCompressedTextures);class BlobResource extends BufferResource{constructor(_,et={width:1,height:1,autoLoad:!0}){let tt,nt;typeof _=="string"?(tt=_,nt=new Uint8Array):(tt=null,nt=_),super(nt,et),this.origin=tt,this.buffer=nt?new ViewableBuffer(nt):null,this._load=null,this.loaded=!1,this.origin!==null&&et.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(_){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(_=>_.blob()).then(_=>_.arrayBuffer()).then(_=>(this.data=new Uint32Array(_),this.buffer=new ViewableBuffer(_),this.loaded=!0,this.onBlobLoaded(_),this.update(),this)),this._load)}}class CompressedTextureResource extends BlobResource{constructor(_,et){super(_,et),this.format=et.format,this.levels=et.levels||1,this._width=et.width,this._height=et.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(et.levelBuffers||this.buffer)&&(this._levelBuffers=et.levelBuffers||CompressedTextureResource._createLevelBuffers(_ instanceof Uint8Array?_:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(_,et,tt){const nt=_.gl;if(!_.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;nt.pixelStorei(nt.UNPACK_ALIGNMENT,4);for(let it=0,at=this.levels;it<at;it++){const{levelID:ot,levelWidth:st,levelHeight:dt,levelBuffer:ht}=this._levelBuffers[it];nt.compressedTexImage2D(nt.TEXTURE_2D,ot,this.format,st,dt,0,ht)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(_){if(_>=33776&&_<=33779)return"s3tc";if(_>=35916&&_<=35919)return"s3tc_sRGB";if(_>=37488&&_<=37497)return"etc";if(_>=35840&&_<=35843)return"pvrtc";if(_===36196)return"etc1";if(_===35986||_===35987||_===34798)return"atc";if(_>=36492&&_<=36495)return"bptc";if(_===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${_}`)}static _createLevelBuffers(_,et,tt,nt,it,at,ot){const st=new Array(tt);let dt=_.byteOffset,ht=at,ct=ot,ut=ht+nt-1&~(nt-1),ft=ct+it-1&~(it-1),gt=ut*ft*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[et];for(let mt=0;mt<tt;mt++)st[mt]={levelID:mt,levelWidth:tt>1?ht:ut,levelHeight:tt>1?ct:ft,levelBuffer:new Uint8Array(_.buffer,dt,gt)},dt+=gt,ht=ht>>1||1,ct=ct>>1||1,ut=ht+nt-1&~(nt-1),ft=ct+it-1&~(it-1),gt=ut*ft*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[et];return st}}const DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT={[FOURCC_DXT1]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[FOURCC_DXT3]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[FOURCC_DXT5]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},DXGI_TO_FORMAT={70:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:INTERNAL_FORMATS.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:INTERNAL_FORMATS.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:INTERNAL_FORMATS.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function parseDDS(_e){const _=new Uint32Array(_e);if(_[0]!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");const et=new Uint32Array(_e,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),tt=et[DDS_FIELDS.HEIGHT],nt=et[DDS_FIELDS.WIDTH],it=et[DDS_FIELDS.MIPMAP_COUNT],at=new Uint32Array(_e,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),ot=at[PF_FLAGS];if(ot&DDPF_FOURCC){const st=at[DDS_PF_FIELDS.FOURCC];if(st!==FOURCC_DX10){const bt=FOURCC_TO_FORMAT[st],_t=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,xt=new Uint8Array(_e,_t);return[new CompressedTextureResource(xt,{format:bt,width:nt,height:tt,levels:it})]}const dt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,ht=new Uint32Array(_.buffer,dt,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),ct=ht[DDS_DX10_FIELDS.DXGI_FORMAT],ut=ht[DDS_DX10_FIELDS.RESOURCE_DIMENSION],ft=ht[DDS_DX10_FIELDS.MISC_FLAG],gt=ht[DDS_DX10_FIELDS.ARRAY_SIZE],mt=DXGI_TO_FORMAT[ct];if(mt===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${ct}`);if(ft===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(ut===6)throw new Error("DDSParser does not supported 3D texture data");const vt=new Array,yt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(gt===1)vt.push(new Uint8Array(_e,yt));else{const bt=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[mt];let _t=0,xt=nt,St=tt;for(let wt=0;wt<it;wt++){const Ct=Math.max(1,xt+3&-4),Et=Math.max(1,St+3&-4),At=Ct*Et*bt;_t+=At,xt=xt>>>1,St=St>>>1}let Tt=yt;for(let wt=0;wt<gt;wt++)vt.push(new Uint8Array(_e,Tt,_t)),Tt+=_t}return vt.map(bt=>new CompressedTextureResource(bt,{format:mt,width:nt,height:tt,levels:it}))}throw ot&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):ot&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):ot&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):ot&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT={[TYPES.UNSIGNED_BYTE]:1,[TYPES.UNSIGNED_SHORT]:2,[TYPES.INT]:4,[TYPES.UNSIGNED_INT]:4,[TYPES.FLOAT]:4,[TYPES.HALF_FLOAT]:8},FORMATS_TO_COMPONENTS={[FORMATS.RGBA]:4,[FORMATS.RGB]:3,[FORMATS.RG]:2,[FORMATS.RED]:1,[FORMATS.LUMINANCE]:1,[FORMATS.LUMINANCE_ALPHA]:2,[FORMATS.ALPHA]:1},TYPES_TO_BYTES_PER_PIXEL={[TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[TYPES.UNSIGNED_SHORT_5_6_5]:2};function parseKTX(_e,_,et=!1){const tt=new DataView(_);if(!validate(_e,tt))return null;const nt=tt.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,it=tt.getUint32(KTX_FIELDS.GL_TYPE,nt),at=tt.getUint32(KTX_FIELDS.GL_FORMAT,nt),ot=tt.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,nt),st=tt.getUint32(KTX_FIELDS.PIXEL_WIDTH,nt),dt=tt.getUint32(KTX_FIELDS.PIXEL_HEIGHT,nt)||1,ht=tt.getUint32(KTX_FIELDS.PIXEL_DEPTH,nt)||1,ct=tt.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,nt)||1,ut=tt.getUint32(KTX_FIELDS.NUMBER_OF_FACES,nt),ft=tt.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,nt),gt=tt.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,nt);if(dt===0||ht!==1)throw new Error("Only 2D textures are supported");if(ut!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(ct!==1)throw new Error("WebGL does not support array textures");const mt=4,vt=4,yt=st+3&-4,bt=dt+3&-4,_t=new Array(ct);let xt=st*dt;it===0&&(xt=yt*bt);let St;if(it!==0?TYPES_TO_BYTES_PER_COMPONENT[it]?St=TYPES_TO_BYTES_PER_COMPONENT[it]*FORMATS_TO_COMPONENTS[at]:St=TYPES_TO_BYTES_PER_PIXEL[it]:St=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[ot],St===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const Tt=et?parseKvData(tt,gt,nt):null;let wt=xt*St,Ct=st,Et=dt,At=yt,Pt=bt,Rt=FILE_HEADER_SIZE+gt;for(let It=0;It<ft;It++){const Mt=tt.getUint32(Rt,nt);let Ot=Rt+4;for(let $t=0;$t<ct;$t++){let Lt=_t[$t];Lt||(Lt=_t[$t]=new Array(ft)),Lt[It]={levelID:It,levelWidth:ft>1||it!==0?Ct:At,levelHeight:ft>1||it!==0?Et:Pt,levelBuffer:new Uint8Array(_,Ot,wt)},Ot+=wt}Rt+=Mt+4,Rt=Rt%4!==0?Rt+4-Rt%4:Rt,Ct=Ct>>1||1,Et=Et>>1||1,At=Ct+mt-1&-4,Pt=Et+vt-1&-4,wt=At*Pt*St}return it!==0?{uncompressed:_t.map(It=>{let Mt=It[0].levelBuffer,Ot=!1;return it===TYPES.FLOAT?Mt=new Float32Array(It[0].levelBuffer.buffer,It[0].levelBuffer.byteOffset,It[0].levelBuffer.byteLength/4):it===TYPES.UNSIGNED_INT?(Ot=!0,Mt=new Uint32Array(It[0].levelBuffer.buffer,It[0].levelBuffer.byteOffset,It[0].levelBuffer.byteLength/4)):it===TYPES.INT&&(Ot=!0,Mt=new Int32Array(It[0].levelBuffer.buffer,It[0].levelBuffer.byteOffset,It[0].levelBuffer.byteLength/4)),{resource:new BufferResource(Mt,{width:It[0].levelWidth,height:It[0].levelHeight}),type:it,format:Ot?convertFormatToInteger(at):at}}),kvData:Tt}:{compressed:_t.map(It=>new CompressedTextureResource(null,{format:ot,width:st,height:dt,levels:ft,levelBuffers:It})),kvData:Tt}}function validate(_e,_){for(let et=0;et<FILE_IDENTIFIER.length;et++)if(_.getUint8(et)!==FILE_IDENTIFIER[et])return console.error(`${_e} is not a valid *.ktx file!`),!1;return!0}function convertFormatToInteger(_e){switch(_e){case FORMATS.RGBA:return FORMATS.RGBA_INTEGER;case FORMATS.RGB:return FORMATS.RGB_INTEGER;case FORMATS.RG:return FORMATS.RG_INTEGER;case FORMATS.RED:return FORMATS.RED_INTEGER;default:return _e}}function parseKvData(_e,_,et){const tt=new Map;let nt=0;for(;nt<_;){const it=_e.getUint32(FILE_HEADER_SIZE+nt,et),at=FILE_HEADER_SIZE+nt+4,ot=3-(it+3)%4;if(it===0||it>_-nt){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let st=0;for(;st<it&&_e.getUint8(at+st)!==0;st++);if(st===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const dt=new TextDecoder().decode(new Uint8Array(_e.buffer,at,st)),ht=new DataView(_e.buffer,at+st+1,it-st-1);tt.set(dt,ht),nt+=4+it+ot}return tt}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadDDS",test(_e){return checkExtension(_e,".dds")},async load(_e,_,et){const tt=await(await settings.ADAPTER.fetch(_e)).arrayBuffer(),nt=parseDDS(tt).map(it=>{const at=new BaseTexture(it,{mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(_e),..._.data});return createTexture$1(at,et,_e)});return nt.length===1?nt[0]:nt},unload(_e){Array.isArray(_e)?_e.forEach(_=>_.destroy(!0)):_e.destroy(!0)}};extensions$2.add(loadDDS);const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadKTX",test(_e){return checkExtension(_e,".ktx")},async load(_e,_,et){const tt=await(await settings.ADAPTER.fetch(_e)).arrayBuffer(),{compressed:nt,uncompressed:it,kvData:at}=parseKTX(_e,tt),ot=nt??it,st={mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(_e),..._.data},dt=ot.map(ht=>{ot===it&&Object.assign(st,{type:ht.type,format:ht.format});const ct=ht.resource??ht,ut=new BaseTexture(ct,st);return ut.ktxKeyValueData=at,createTexture$1(ut,et,_e)});return dt.length===1?dt[0]:dt},unload(_e){Array.isArray(_e)?_e.forEach(_=>_.destroy(!0)):_e.destroy(!0)}};extensions$2.add(loadKTX);const knownFormats=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:_e=>{const _=path.extname(_e).slice(1);return["basis","ktx","dds"].includes(_)},parse:_e=>{var tt,nt;const _=_e.split("."),et=_.pop();if(["ktx","dds"].includes(et)){const it=_.pop();if(knownFormats.includes(it))return{resolution:parseFloat(((tt=settings.RETINA_PREFIX.exec(_e))==null?void 0:tt[1])??"1"),format:it,src:_e}}return{resolution:parseFloat(((nt=settings.RETINA_PREFIX.exec(_e))==null?void 0:nt[1])??"1"),format:et,src:_e}}};extensions$2.add(resolveCompressedTextureUrl);const TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,_Extract=class co{constructor(_){this.renderer=_,this._rendererPremultipliedAlpha=!1}contextChange(){var et;const _=(et=this.renderer)==null?void 0:et.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}async image(_,et,tt,nt){const it=new Image;return it.src=await this.base64(_,et,tt,nt),it}async base64(_,et,tt,nt){const it=this.canvas(_,nt);if(it.toBlob!==void 0)return new Promise((at,ot)=>{it.toBlob(st=>{if(!st){ot(new Error("ICanvas.toBlob failed!"));return}const dt=new FileReader;dt.onload=()=>at(dt.result),dt.onerror=ot,dt.readAsDataURL(st)},et,tt)});if(it.toDataURL!==void 0)return it.toDataURL(et,tt);if(it.convertToBlob!==void 0){const at=await it.convertToBlob({type:et,quality:tt});return new Promise((ot,st)=>{const dt=new FileReader;dt.onload=()=>ot(dt.result),dt.onerror=st,dt.readAsDataURL(at)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(_,et){const{pixels:tt,width:nt,height:it,flipY:at,premultipliedAlpha:ot}=this._rawPixels(_,et);at&&co._flipY(tt,nt,it),ot&&co._unpremultiplyAlpha(tt);const st=new CanvasRenderTarget(nt,it,1),dt=new ImageData(new Uint8ClampedArray(tt.buffer),nt,it);return st.context.putImageData(dt,0,0),st.canvas}pixels(_,et){const{pixels:tt,width:nt,height:it,flipY:at,premultipliedAlpha:ot}=this._rawPixels(_,et);return at&&co._flipY(tt,nt,it),ot&&co._unpremultiplyAlpha(tt),tt}_rawPixels(_,et){const tt=this.renderer;if(!tt)throw new Error("The Extract has already been destroyed");let nt,it=!1,at=!1,ot,st=!1;_&&(_ instanceof RenderTexture?ot=_:(ot=tt.generateTexture(_,{region:et,resolution:tt.resolution,multisample:tt.multisample}),st=!0,et&&(TEMP_RECT.width=et.width,TEMP_RECT.height=et.height,et=TEMP_RECT)));const dt=tt.gl;if(ot){if(nt=ot.baseTexture.resolution,et=et??ot.frame,it=!1,at=ot.baseTexture.alphaMode>0&&ot.baseTexture.format===FORMATS.RGBA,!st){tt.renderTexture.bind(ot);const ft=ot.framebuffer.glFramebuffers[tt.CONTEXT_UID];ft.blitFramebuffer&&tt.framebuffer.bind(ft.blitFramebuffer)}}else nt=tt.resolution,et||(et=TEMP_RECT,et.width=tt.width/nt,et.height=tt.height/nt),it=!0,at=this._rendererPremultipliedAlpha,tt.renderTexture.bind();const ht=Math.max(Math.round(et.width*nt),1),ct=Math.max(Math.round(et.height*nt),1),ut=new Uint8Array(BYTES_PER_PIXEL*ht*ct);return dt.readPixels(Math.round(et.x*nt),Math.round(et.y*nt),ht,ct,dt.RGBA,dt.UNSIGNED_BYTE,ut),st&&(ot==null||ot.destroy(!0)),{pixels:ut,width:ht,height:ct,flipY:it,premultipliedAlpha:at}}destroy(){this.renderer=null}static _flipY(_,et,tt){const nt=et<<2,it=tt>>1,at=new Uint8Array(nt);for(let ot=0;ot<it;ot++){const st=ot*nt,dt=(tt-ot-1)*nt;at.set(_.subarray(st,st+nt)),_.copyWithin(st,dt,dt+nt),_.set(at,dt)}}static _unpremultiplyAlpha(_){_ instanceof Uint8ClampedArray&&(_=new Uint8Array(_.buffer));const et=_.length;for(let tt=0;tt<et;tt+=4){const nt=_[tt+3];if(nt!==0){const it=255.001/nt;_[tt]=_[tt]*it+.5,_[tt+1]=_[tt+1]*it+.5,_[tt+2]=_[tt+2]*it+.5}}}};_Extract.extension={name:"extract",type:ExtensionType.RendererSystem};let Extract=_Extract;extensions$2.add(Extract);const buildCircle={build(_e){const _=_e.points;let et,tt,nt,it,at,ot;if(_e.type===SHAPES.CIRC){const gt=_e.shape;et=gt.x,tt=gt.y,at=ot=gt.radius,nt=it=0}else if(_e.type===SHAPES.ELIP){const gt=_e.shape;et=gt.x,tt=gt.y,at=gt.width,ot=gt.height,nt=it=0}else{const gt=_e.shape,mt=gt.width/2,vt=gt.height/2;et=gt.x+mt,tt=gt.y+vt,at=ot=Math.max(0,Math.min(gt.radius,Math.min(mt,vt))),nt=mt-at,it=vt-ot}if(!(at>=0&&ot>=0&&nt>=0&&it>=0)){_.length=0;return}const st=Math.ceil(2.3*Math.sqrt(at+ot)),dt=st*8+(nt?4:0)+(it?4:0);if(_.length=dt,dt===0)return;if(st===0){_.length=8,_[0]=_[6]=et+nt,_[1]=_[3]=tt+it,_[2]=_[4]=et-nt,_[5]=_[7]=tt-it;return}let ht=0,ct=st*4+(nt?2:0)+2,ut=ct,ft=dt;{const gt=nt+at,mt=it,vt=et+gt,yt=et-gt,bt=tt+mt;if(_[ht++]=vt,_[ht++]=bt,_[--ct]=bt,_[--ct]=yt,it){const _t=tt-mt;_[ut++]=yt,_[ut++]=_t,_[--ft]=_t,_[--ft]=vt}}for(let gt=1;gt<st;gt++){const mt=Math.PI/2*(gt/st),vt=nt+Math.cos(mt)*at,yt=it+Math.sin(mt)*ot,bt=et+vt,_t=et-vt,xt=tt+yt,St=tt-yt;_[ht++]=bt,_[ht++]=xt,_[--ct]=xt,_[--ct]=_t,_[ut++]=_t,_[ut++]=St,_[--ft]=St,_[--ft]=bt}{const gt=nt,mt=it+ot,vt=et+gt,yt=et-gt,bt=tt+mt,_t=tt-mt;_[ht++]=vt,_[ht++]=bt,_[--ft]=_t,_[--ft]=vt,nt&&(_[ht++]=yt,_[ht++]=bt,_[--ft]=_t,_[--ft]=yt)}},triangulate(_e,_){const et=_e.points,tt=_.points,nt=_.indices;if(et.length===0)return;let it=tt.length/2;const at=it;let ot,st;if(_e.type!==SHAPES.RREC){const ht=_e.shape;ot=ht.x,st=ht.y}else{const ht=_e.shape;ot=ht.x+ht.width/2,st=ht.y+ht.height/2}const dt=_e.matrix;tt.push(_e.matrix?dt.a*ot+dt.c*st+dt.tx:ot,_e.matrix?dt.b*ot+dt.d*st+dt.ty:st),it++,tt.push(et[0],et[1]);for(let ht=2;ht<et.length;ht+=2)tt.push(et[ht],et[ht+1]),nt.push(it++,at,it);nt.push(at+1,at,it)}};function fixOrientation(_e,_=!1){const et=_e.length;if(et<6)return;let tt=0;for(let nt=0,it=_e[et-2],at=_e[et-1];nt<et;nt+=2){const ot=_e[nt],st=_e[nt+1];tt+=(ot-it)*(st+at),it=ot,at=st}if(!_&&tt>0||_&&tt<=0){const nt=et/2;for(let it=nt+nt%2;it<et;it+=2){const at=et-it-2,ot=et-it-1,st=it,dt=it+1;[_e[at],_e[st]]=[_e[st],_e[at]],[_e[ot],_e[dt]]=[_e[dt],_e[ot]]}}}const buildPoly={build(_e){_e.points=_e.shape.points.slice()},triangulate(_e,_){let et=_e.points;const tt=_e.holes,nt=_.points,it=_.indices;if(et.length>=6){fixOrientation(et,!1);const at=[];for(let dt=0;dt<tt.length;dt++){const ht=tt[dt];fixOrientation(ht.points,!0),at.push(et.length/2),et=et.concat(ht.points)}const ot=earcut$1(et,at,2);if(!ot)return;const st=nt.length/2;for(let dt=0;dt<ot.length;dt+=3)it.push(ot[dt]+st),it.push(ot[dt+1]+st),it.push(ot[dt+2]+st);for(let dt=0;dt<et.length;dt++)nt.push(et[dt])}}},buildRectangle={build(_e){const _=_e.shape,et=_.x,tt=_.y,nt=_.width,it=_.height,at=_e.points;at.length=0,nt>=0&&it>=0&&at.push(et,tt,et+nt,tt,et+nt,tt+it,et,tt+it)},triangulate(_e,_){const et=_e.points,tt=_.points;if(et.length===0)return;const nt=tt.length/2;tt.push(et[0],et[1],et[2],et[3],et[6],et[7],et[4],et[5]),_.indices.push(nt,nt+1,nt+2,nt+1,nt+2,nt+3)}},buildRoundedRectangle={build(_e){buildCircle.build(_e)},triangulate(_e,_){buildCircle.triangulate(_e,_)}};var LINE_JOIN=(_e=>(_e.MITER="miter",_e.BEVEL="bevel",_e.ROUND="round",_e))(LINE_JOIN||{}),LINE_CAP=(_e=>(_e.BUTT="butt",_e.ROUND="round",_e.SQUARE="square",_e))(LINE_CAP||{});const curves={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(_e,_=20){if(!this.adaptive||!_e||isNaN(_e))return _;let et=Math.ceil(_e/this.maxLength);return et<this.minSegments?et=this.minSegments:et>this.maxSegments&&(et=this.maxSegments),et}};class ArcUtils{static curveTo(_,et,tt,nt,it,at){const ot=at[at.length-2],st=at[at.length-1]-et,dt=ot-_,ht=nt-et,ct=tt-_,ut=Math.abs(st*ct-dt*ht);if(ut<1e-8||it===0)return(at[at.length-2]!==_||at[at.length-1]!==et)&&at.push(_,et),null;const ft=st*st+dt*dt,gt=ht*ht+ct*ct,mt=st*ht+dt*ct,vt=it*Math.sqrt(ft)/ut,yt=it*Math.sqrt(gt)/ut,bt=vt*mt/ft,_t=yt*mt/gt,xt=vt*ct+yt*dt,St=vt*ht+yt*st,Tt=dt*(yt+bt),wt=st*(yt+bt),Ct=ct*(vt+_t),Et=ht*(vt+_t),At=Math.atan2(wt-St,Tt-xt),Pt=Math.atan2(Et-St,Ct-xt);return{cx:xt+_,cy:St+et,radius:it,startAngle:At,endAngle:Pt,anticlockwise:dt*ht>ct*st}}static arc(_,et,tt,nt,it,at,ot,st,dt){const ht=ot-at,ct=curves._segmentsCount(Math.abs(ht)*it,Math.ceil(Math.abs(ht)/PI_2)*40),ut=ht/(ct*2),ft=ut*2,gt=Math.cos(ut),mt=Math.sin(ut),vt=ct-1,yt=vt%1/vt;for(let bt=0;bt<=vt;++bt){const _t=bt+yt*bt,xt=ut+at+ft*_t,St=Math.cos(xt),Tt=-Math.sin(xt);dt.push((gt*St+mt*Tt)*it+tt,(gt*-Tt+mt*St)*it+nt)}}}class BatchPart{constructor(){this.reset()}begin(_,et,tt){this.reset(),this.style=_,this.start=et,this.attribStart=tt}end(_,et){this.attribSize=et-this.attribStart,this.size=_-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class BezierUtils{static curveLength(_,et,tt,nt,it,at,ot,st){let dt=0,ht=0,ct=0,ut=0,ft=0,gt=0,mt=0,vt=0,yt=0,bt=0,_t=0,xt=_,St=et;for(let Tt=1;Tt<=10;++Tt)ht=Tt/10,ct=ht*ht,ut=ct*ht,ft=1-ht,gt=ft*ft,mt=gt*ft,vt=mt*_+3*gt*ht*tt+3*ft*ct*it+ut*ot,yt=mt*et+3*gt*ht*nt+3*ft*ct*at+ut*st,bt=xt-vt,_t=St-yt,xt=vt,St=yt,dt+=Math.sqrt(bt*bt+_t*_t);return dt}static curveTo(_,et,tt,nt,it,at,ot){const st=ot[ot.length-2],dt=ot[ot.length-1];ot.length-=2;const ht=curves._segmentsCount(BezierUtils.curveLength(st,dt,_,et,tt,nt,it,at));let ct=0,ut=0,ft=0,gt=0,mt=0;ot.push(st,dt);for(let vt=1,yt=0;vt<=ht;++vt)yt=vt/ht,ct=1-yt,ut=ct*ct,ft=ut*ct,gt=yt*yt,mt=gt*yt,ot.push(ft*st+3*ut*yt*_+3*ct*gt*tt+mt*it,ft*dt+3*ut*yt*et+3*ct*gt*nt+mt*at)}}function square(_e,_,et,tt,nt,it,at,ot){const st=_e-et*nt,dt=_-tt*nt,ht=_e+et*it,ct=_+tt*it;let ut,ft;at?(ut=tt,ft=-et):(ut=-tt,ft=et);const gt=st+ut,mt=dt+ft,vt=ht+ut,yt=ct+ft;return ot.push(gt,mt,vt,yt),2}function round$4(_e,_,et,tt,nt,it,at,ot){const st=et-_e,dt=tt-_;let ht=Math.atan2(st,dt),ct=Math.atan2(nt-_e,it-_);ot&&ht<ct?ht+=Math.PI*2:!ot&&ht>ct&&(ct+=Math.PI*2);let ut=ht;const ft=ct-ht,gt=Math.abs(ft),mt=Math.sqrt(st*st+dt*dt),vt=(15*gt*Math.sqrt(mt)/Math.PI>>0)+1,yt=ft/vt;if(ut+=yt,ot){at.push(_e,_,et,tt);for(let bt=1,_t=ut;bt<vt;bt++,_t+=yt)at.push(_e,_,_e+Math.sin(_t)*mt,_+Math.cos(_t)*mt);at.push(_e,_,nt,it)}else{at.push(et,tt,_e,_);for(let bt=1,_t=ut;bt<vt;bt++,_t+=yt)at.push(_e+Math.sin(_t)*mt,_+Math.cos(_t)*mt,_e,_);at.push(nt,it,_e,_)}return vt*2}function buildNonNativeLine(_e,_){const et=_e.shape;let tt=_e.points||et.points.slice();const nt=_.closePointEps;if(tt.length===0)return;const it=_e.lineStyle,at=new Point$1(tt[0],tt[1]),ot=new Point$1(tt[tt.length-2],tt[tt.length-1]),st=et.type!==SHAPES.POLY||et.closeStroke,dt=Math.abs(at.x-ot.x)<nt&&Math.abs(at.y-ot.y)<nt;if(st){tt=tt.slice(),dt&&(tt.pop(),tt.pop(),ot.set(tt[tt.length-2],tt[tt.length-1]));const Lt=(at.x+ot.x)*.5,kt=(ot.y+at.y)*.5;tt.unshift(Lt,kt),tt.push(Lt,kt)}const ht=_.points,ct=tt.length/2;let ut=tt.length;const ft=ht.length/2,gt=it.width/2,mt=gt*gt,vt=it.miterLimit*it.miterLimit;let yt=tt[0],bt=tt[1],_t=tt[2],xt=tt[3],St=0,Tt=0,wt=-(bt-xt),Ct=yt-_t,Et=0,At=0,Pt=Math.sqrt(wt*wt+Ct*Ct);wt/=Pt,Ct/=Pt,wt*=gt,Ct*=gt;const Rt=it.alignment,It=(1-Rt)*2,Mt=Rt*2;st||(it.cap===LINE_CAP.ROUND?ut+=round$4(yt-wt*(It-Mt)*.5,bt-Ct*(It-Mt)*.5,yt-wt*It,bt-Ct*It,yt+wt*Mt,bt+Ct*Mt,ht,!0)+2:it.cap===LINE_CAP.SQUARE&&(ut+=square(yt,bt,wt,Ct,It,Mt,!0,ht))),ht.push(yt-wt*It,bt-Ct*It,yt+wt*Mt,bt+Ct*Mt);for(let Lt=1;Lt<ct-1;++Lt){yt=tt[(Lt-1)*2],bt=tt[(Lt-1)*2+1],_t=tt[Lt*2],xt=tt[Lt*2+1],St=tt[(Lt+1)*2],Tt=tt[(Lt+1)*2+1],wt=-(bt-xt),Ct=yt-_t,Pt=Math.sqrt(wt*wt+Ct*Ct),wt/=Pt,Ct/=Pt,wt*=gt,Ct*=gt,Et=-(xt-Tt),At=_t-St,Pt=Math.sqrt(Et*Et+At*At),Et/=Pt,At/=Pt,Et*=gt,At*=gt;const kt=_t-yt,Nt=bt-xt,Vt=_t-St,zt=Tt-xt,Xt=kt*Vt+Nt*zt,Wt=Nt*Vt-zt*kt,nr=Wt<0;if(Math.abs(Wt)<.001*Math.abs(Xt)){ht.push(_t-wt*It,xt-Ct*It,_t+wt*Mt,xt+Ct*Mt),Xt>=0&&(it.join===LINE_JOIN.ROUND?ut+=round$4(_t,xt,_t-wt*It,xt-Ct*It,_t-Et*It,xt-At*It,ht,!1)+4:ut+=2,ht.push(_t-Et*Mt,xt-At*Mt,_t+Et*It,xt+At*It));continue}const Jt=(-wt+yt)*(-Ct+xt)-(-wt+_t)*(-Ct+bt),lr=(-Et+St)*(-At+xt)-(-Et+_t)*(-At+Tt),pr=(kt*lr-Vt*Jt)/Wt,Zt=(zt*Jt-Nt*lr)/Wt,Kt=(pr-_t)*(pr-_t)+(Zt-xt)*(Zt-xt),ur=_t+(pr-_t)*It,ir=xt+(Zt-xt)*It,hr=_t-(pr-_t)*Mt,fr=xt-(Zt-xt)*Mt,mr=Math.min(kt*kt+Nt*Nt,Vt*Vt+zt*zt),br=nr?It:Mt,Er=mr+br*br*mt,kr=Kt<=Er;let jr=it.join;if(jr===LINE_JOIN.MITER&&Kt/mt>vt&&(jr=LINE_JOIN.BEVEL),kr)switch(jr){case LINE_JOIN.MITER:{ht.push(ur,ir,hr,fr);break}case LINE_JOIN.BEVEL:{nr?ht.push(ur,ir,_t+wt*Mt,xt+Ct*Mt,ur,ir,_t+Et*Mt,xt+At*Mt):ht.push(_t-wt*It,xt-Ct*It,hr,fr,_t-Et*It,xt-At*It,hr,fr),ut+=2;break}case LINE_JOIN.ROUND:{nr?(ht.push(ur,ir,_t+wt*Mt,xt+Ct*Mt),ut+=round$4(_t,xt,_t+wt*Mt,xt+Ct*Mt,_t+Et*Mt,xt+At*Mt,ht,!0)+4,ht.push(ur,ir,_t+Et*Mt,xt+At*Mt)):(ht.push(_t-wt*It,xt-Ct*It,hr,fr),ut+=round$4(_t,xt,_t-wt*It,xt-Ct*It,_t-Et*It,xt-At*It,ht,!1)+4,ht.push(_t-Et*It,xt-At*It,hr,fr));break}}else{switch(ht.push(_t-wt*It,xt-Ct*It,_t+wt*Mt,xt+Ct*Mt),jr){case LINE_JOIN.MITER:{nr?ht.push(hr,fr,hr,fr):ht.push(ur,ir,ur,ir),ut+=2;break}case LINE_JOIN.ROUND:{nr?ut+=round$4(_t,xt,_t+wt*Mt,xt+Ct*Mt,_t+Et*Mt,xt+At*Mt,ht,!0)+2:ut+=round$4(_t,xt,_t-wt*It,xt-Ct*It,_t-Et*It,xt-At*It,ht,!1)+2;break}}ht.push(_t-Et*It,xt-At*It,_t+Et*Mt,xt+At*Mt),ut+=2}}yt=tt[(ct-2)*2],bt=tt[(ct-2)*2+1],_t=tt[(ct-1)*2],xt=tt[(ct-1)*2+1],wt=-(bt-xt),Ct=yt-_t,Pt=Math.sqrt(wt*wt+Ct*Ct),wt/=Pt,Ct/=Pt,wt*=gt,Ct*=gt,ht.push(_t-wt*It,xt-Ct*It,_t+wt*Mt,xt+Ct*Mt),st||(it.cap===LINE_CAP.ROUND?ut+=round$4(_t-wt*(It-Mt)*.5,xt-Ct*(It-Mt)*.5,_t-wt*It,xt-Ct*It,_t+wt*Mt,xt+Ct*Mt,ht,!1)+2:it.cap===LINE_CAP.SQUARE&&(ut+=square(_t,xt,wt,Ct,It,Mt,!1,ht)));const Ot=_.indices,$t=curves.epsilon*curves.epsilon;for(let Lt=ft;Lt<ut+ft-2;++Lt)yt=ht[Lt*2],bt=ht[Lt*2+1],_t=ht[(Lt+1)*2],xt=ht[(Lt+1)*2+1],St=ht[(Lt+2)*2],Tt=ht[(Lt+2)*2+1],!(Math.abs(yt*(xt-Tt)+_t*(Tt-bt)+St*(bt-xt))<$t)&&Ot.push(Lt,Lt+1,Lt+2)}function buildNativeLine(_e,_){let et=0;const tt=_e.shape,nt=_e.points||tt.points,it=tt.type!==SHAPES.POLY||tt.closeStroke;if(nt.length===0)return;const at=_.points,ot=_.indices,st=nt.length/2,dt=at.length/2;let ht=dt;for(at.push(nt[0],nt[1]),et=1;et<st;et++)at.push(nt[et*2],nt[et*2+1]),ot.push(ht,ht+1),ht++;it&&ot.push(ht,dt)}function buildLine(_e,_){_e.lineStyle.native?buildNativeLine(_e,_):buildNonNativeLine(_e,_)}class QuadraticUtils{static curveLength(_,et,tt,nt,it,at){const ot=_-2*tt+it,st=et-2*nt+at,dt=2*tt-2*_,ht=2*nt-2*et,ct=4*(ot*ot+st*st),ut=4*(ot*dt+st*ht),ft=dt*dt+ht*ht,gt=2*Math.sqrt(ct+ut+ft),mt=Math.sqrt(ct),vt=2*ct*mt,yt=2*Math.sqrt(ft),bt=ut/mt;return(vt*gt+mt*ut*(gt-yt)+(4*ft*ct-ut*ut)*Math.log((2*mt+bt+gt)/(bt+yt)))/(4*vt)}static curveTo(_,et,tt,nt,it){const at=it[it.length-2],ot=it[it.length-1],st=curves._segmentsCount(QuadraticUtils.curveLength(at,ot,_,et,tt,nt));let dt=0,ht=0;for(let ct=1;ct<=st;++ct){const ut=ct/st;dt=at+(_-at)*ut,ht=ot+(et-ot)*ut,it.push(dt+(_+(tt-_)*ut-dt)*ut,ht+(et+(nt-et)*ut-ht)*ut)}}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(_,et=null,tt=null,nt=null){this.points=[],this.holes=[],this.shape=_,this.lineStyle=tt,this.fillStyle=et,this.matrix=nt,this.type=_.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point$1,_GraphicsGeometry=class Al extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let _=0;_<this.drawCalls.length;_++)this.drawCalls[_].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[_]);this.drawCalls.length=0;for(let _=0;_<this.batches.length;_++){const et=this.batches[_];et.reset(),BATCH_POOL.push(et)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(_,et=null,tt=null,nt=null){const it=new GraphicsData(_,et,tt,nt);return this.graphicsData.push(it),this.dirty++,this}drawHole(_,et=null){if(!this.graphicsData.length)return null;const tt=new GraphicsData(_,null,null,et),nt=this.graphicsData[this.graphicsData.length-1];return tt.lineStyle=nt.lineStyle,nt.holes.push(tt),this.dirty++,this}destroy(){super.destroy();for(let _=0;_<this.graphicsData.length;++_)this.graphicsData[_].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(_){const et=this.graphicsData;for(let tt=0;tt<et.length;++tt){const nt=et[tt];if(nt.fillStyle.visible&&nt.shape&&(nt.matrix?nt.matrix.applyInverse(_,tmpPoint):tmpPoint.copyFrom(_),nt.shape.contains(tmpPoint.x,tmpPoint.y))){let it=!1;if(nt.holes){for(let at=0;at<nt.holes.length;at++)if(nt.holes[at].shape.contains(tmpPoint.x,tmpPoint.y)){it=!0;break}}if(!it)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const _=this.uvs,et=this.graphicsData;let tt=null,nt=null;this.batches.length>0&&(tt=this.batches[this.batches.length-1],nt=tt.style);for(let st=this.shapeIndex;st<et.length;st++){this.shapeIndex++;const dt=et[st],ht=dt.fillStyle,ct=dt.lineStyle;FILL_COMMANDS[dt.type].build(dt),dt.matrix&&this.transformPoints(dt.points,dt.matrix),(ht.visible||ct.visible)&&this.processHoles(dt.holes);for(let ut=0;ut<2;ut++){const ft=ut===0?ht:ct;if(!ft.visible)continue;const gt=ft.texture.baseTexture,mt=this.indices.length,vt=this.points.length/2;gt.wrapMode=WRAP_MODES.REPEAT,ut===0?this.processFill(dt):this.processLine(dt);const yt=this.points.length/2-vt;yt!==0&&(tt&&!this._compareStyles(nt,ft)&&(tt.end(mt,vt),tt=null),tt||(tt=BATCH_POOL.pop()||new BatchPart,tt.begin(ft,mt,vt),this.batches.push(tt),nt=ft),this.addUvs(this.points,_,ft.texture,vt,yt,ft.matrix))}}const it=this.indices.length,at=this.points.length/2;if(tt&&tt.end(it,at),this.batches.length===0){this.batchable=!0;return}const ot=at>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&ot===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=ot?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(_,et){return!(!_||!et||_.texture.baseTexture!==et.texture.baseTexture||_.color+_.alpha!==et.color+et.alpha||!!_.native!=!!et.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let _=0,et=this.graphicsData.length;_<et;_++){const tt=this.graphicsData[_],nt=tt.fillStyle,it=tt.lineStyle;if(nt&&!nt.texture.baseTexture.valid||it&&!it.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const _=this.batches;for(let et=0,tt=_.length;et<tt;et++){const nt=_[et];for(let it=0;it<nt.size;it++){const at=nt.start+it;this.indicesUint16[at]=this.indicesUint16[at]-nt.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const _=this.batches;for(let et=0;et<_.length;et++)if(_[et].style.native)return!1;return this.points.length<Al.BATCHABLE_SIZE*2}buildDrawCalls(){let _=++BaseTexture._globalBatch;for(let ct=0;ct<this.drawCalls.length;ct++)this.drawCalls[ct].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[ct]);this.drawCalls.length=0;const et=this.colors,tt=this.textureIds;let nt=DRAW_CALL_POOL.pop();nt||(nt=new BatchDrawCall,nt.texArray=new BatchTextureArray),nt.texArray.count=0,nt.start=0,nt.size=0,nt.type=DRAW_MODES.TRIANGLES;let it=0,at=null,ot=0,st=!1,dt=DRAW_MODES.TRIANGLES,ht=0;this.drawCalls.push(nt);for(let ct=0;ct<this.batches.length;ct++){const ut=this.batches[ct],ft=8,gt=ut.style,mt=gt.texture.baseTexture;st!==!!gt.native&&(st=!!gt.native,dt=st?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,at=null,it=ft,_++),at!==mt&&(at=mt,mt._batchEnabled!==_&&(it===ft&&(_++,it=0,nt.size>0&&(nt=DRAW_CALL_POOL.pop(),nt||(nt=new BatchDrawCall,nt.texArray=new BatchTextureArray),this.drawCalls.push(nt)),nt.start=ht,nt.size=0,nt.texArray.count=0,nt.type=dt),mt.touched=1,mt._batchEnabled=_,mt._batchLocation=it,mt.wrapMode=WRAP_MODES.REPEAT,nt.texArray.elements[nt.texArray.count++]=mt,it++)),nt.size+=ut.size,ht+=ut.size,ot=mt._batchLocation,this.addColors(et,gt.color,gt.alpha,ut.attribSize,ut.attribStart),this.addTextureIds(tt,ot,ut.attribSize,ut.attribStart)}BaseTexture._globalBatch=_,this.packAttributes()}packAttributes(){const _=this.points,et=this.uvs,tt=this.colors,nt=this.textureIds,it=new ArrayBuffer(_.length*3*4),at=new Float32Array(it),ot=new Uint32Array(it);let st=0;for(let dt=0;dt<_.length/2;dt++)at[st++]=_[dt*2],at[st++]=_[dt*2+1],at[st++]=et[dt*2],at[st++]=et[dt*2+1],ot[st++]=tt[dt],at[st++]=nt[dt];this._buffer.update(it),this._indexBuffer.update(this.indicesUint16)}processFill(_){_.holes.length?buildPoly.triangulate(_,this):FILL_COMMANDS[_.type].triangulate(_,this)}processLine(_){buildLine(_,this);for(let et=0;et<_.holes.length;et++)buildLine(_.holes[et],this)}processHoles(_){for(let et=0;et<_.length;et++){const tt=_[et];FILL_COMMANDS[tt.type].build(tt),tt.matrix&&this.transformPoints(tt.points,tt.matrix)}}calculateBounds(){const _=this._bounds;_.clear(),_.addVertexData(this.points,0,this.points.length),_.pad(this.boundsPadding,this.boundsPadding)}transformPoints(_,et){for(let tt=0;tt<_.length/2;tt++){const nt=_[tt*2],it=_[tt*2+1];_[tt*2]=et.a*nt+et.c*it+et.tx,_[tt*2+1]=et.b*nt+et.d*it+et.ty}}addColors(_,et,tt,nt,it=0){const at=Color.shared.setValue(et).toLittleEndianNumber(),ot=Color.shared.setValue(at).toPremultiplied(tt);_.length=Math.max(_.length,it+nt);for(let st=0;st<nt;st++)_[it+st]=ot}addTextureIds(_,et,tt,nt=0){_.length=Math.max(_.length,nt+tt);for(let it=0;it<tt;it++)_[nt+it]=et}addUvs(_,et,tt,nt,it,at=null){let ot=0;const st=et.length,dt=tt.frame;for(;ot<it;){let ct=_[(nt+ot)*2],ut=_[(nt+ot)*2+1];if(at){const ft=at.a*ct+at.c*ut+at.tx;ut=at.b*ct+at.d*ut+at.ty,ct=ft}ot++,et.push(ct/dt.width,ut/dt.height)}const ht=tt.baseTexture;(dt.width<ht.width||dt.height<ht.height)&&this.adjustUvs(et,tt,st,it)}adjustUvs(_,et,tt,nt){const it=et.baseTexture,at=1e-6,ot=tt+nt*2,st=et.frame,dt=st.width/it.width,ht=st.height/it.height;let ct=st.x/st.width,ut=st.y/st.height,ft=Math.floor(_[tt]+at),gt=Math.floor(_[tt+1]+at);for(let mt=tt+2;mt<ot;mt+=2)ft=Math.min(ft,Math.floor(_[mt]+at)),gt=Math.min(gt,Math.floor(_[mt+1]+at));ct-=ft,ut-=gt;for(let mt=tt;mt<ot;mt+=2)_[mt]=(_[mt]+ct)*dt,_[mt+1]=(_[mt+1]+ut)*ht}};_GraphicsGeometry.BATCHABLE_SIZE=100;let GraphicsGeometry=_GraphicsGeometry;class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const _=new FillStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const _=new LineStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_.width=this.width,_.alignment=this.alignment,_.native=this.native,_.cap=this.cap,_.join=this.join,_.miterLimit=this.miterLimit,_}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}}const DEFAULT_SHADERS={},_Graphics=class Ro extends Container{constructor(_=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State.for2d(),this._geometry=_||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Color(16777215),this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ro(this._geometry)}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(_=null,et=0,tt,nt=.5,it=!1){return typeof _=="number"&&(_={width:_,color:et,alpha:tt,alignment:nt,native:it}),this.lineTextureStyle(_)}lineTextureStyle(_){const et={width:0,texture:Texture.WHITE,color:_!=null&&_.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10};_=Object.assign(et,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const tt=_.width>0&&_.alpha>0;return tt?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._lineStyle,{visible:tt},_)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const _=this.currentPath.points,et=this.currentPath.points.length;et>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon$1,this.currentPath.closeStroke=!1,this.currentPath.points.push(_[et-2],_[et-1]))}else this.currentPath=new Polygon$1,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(_,et){return this.startPoly(),this.currentPath.points[0]=_,this.currentPath.points[1]=et,this}lineTo(_,et){this.currentPath||this.moveTo(0,0);const tt=this.currentPath.points,nt=tt[tt.length-2],it=tt[tt.length-1];return(nt!==_||it!==et)&&tt.push(_,et),this}_initCurve(_=0,et=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[_,et]):this.moveTo(_,et)}quadraticCurveTo(_,et,tt,nt){this._initCurve();const it=this.currentPath.points;return it.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(_,et,tt,nt,it),this}bezierCurveTo(_,et,tt,nt,it,at){return this._initCurve(),BezierUtils.curveTo(_,et,tt,nt,it,at,this.currentPath.points),this}arcTo(_,et,tt,nt,it){this._initCurve(_,et);const at=this.currentPath.points,ot=ArcUtils.curveTo(_,et,tt,nt,it,at);if(ot){const{cx:st,cy:dt,radius:ht,startAngle:ct,endAngle:ut,anticlockwise:ft}=ot;this.arc(st,dt,ht,ct,ut,ft)}return this}arc(_,et,tt,nt,it,at=!1){if(nt===it)return this;if(!at&&it<=nt?it+=PI_2:at&&nt<=it&&(nt+=PI_2),it-nt===0)return this;const ot=_+Math.cos(nt)*tt,st=et+Math.sin(nt)*tt,dt=this._geometry.closePointEps;let ht=this.currentPath?this.currentPath.points:null;if(ht){const ct=Math.abs(ht[ht.length-2]-ot),ut=Math.abs(ht[ht.length-1]-st);ct<dt&&ut<dt||ht.push(ot,st)}else this.moveTo(ot,st),ht=this.currentPath.points;return ArcUtils.arc(ot,st,_,et,tt,nt,it,at,ht),this}beginFill(_=0,et){return this.beginTextureFill({texture:Texture.WHITE,color:_,alpha:et})}normalizeColor(_){const et=Color.shared.setValue(_.color??0);_.color=et.toNumber(),_.alpha??(_.alpha=et.alpha)}beginTextureFill(_){const et={texture:Texture.WHITE,color:16777215,matrix:null};_=Object.assign(et,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const tt=_.alpha>0;return tt?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._fillStyle,{visible:tt},_)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(_,et,tt,nt){return this.drawShape(new Rectangle(_,et,tt,nt))}drawRoundedRect(_,et,tt,nt,it){return this.drawShape(new RoundedRectangle(_,et,tt,nt,it))}drawCircle(_,et,tt){return this.drawShape(new Circle$1(_,et,tt))}drawEllipse(_,et,tt,nt){return this.drawShape(new Ellipse$1(_,et,tt,nt))}drawPolygon(..._){let et,tt=!0;const nt=_[0];nt.points?(tt=nt.closeStroke,et=nt.points):Array.isArray(_[0])?et=_[0]:et=_;const it=new Polygon$1(et);return it.closeStroke=tt,this.drawShape(it),this}drawShape(_){return this._holeMode?this._geometry.drawHole(_,this._matrix):this._geometry.drawShape(_,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const _=this._geometry.graphicsData;return _.length===1&&_[0].shape.type===SHAPES.RECT&&!_[0].matrix&&!_[0].holes.length&&!(_[0].lineStyle.visible&&_[0].lineStyle.width)}_render(_){this.finishPoly();const et=this._geometry;et.updateBatches(),et.batchable?(this.batchDirty!==et.batchDirty&&this._populateBatches(),this._renderBatched(_)):(_.batch.flush(),this._renderDirect(_))}_populateBatches(){const _=this._geometry,et=this.blendMode,tt=_.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=_.batchDirty,this.batches.length=tt,this.vertexData=new Float32Array(_.points);for(let nt=0;nt<tt;nt++){const it=_.batches[nt],at=it.style.color,ot=new Float32Array(this.vertexData.buffer,it.attribStart*4*2,it.attribSize*2),st=new Float32Array(_.uvsFloat32.buffer,it.attribStart*4*2,it.attribSize*2),dt=new Uint16Array(_.indicesUint16.buffer,it.start*2,it.size),ht={vertexData:ot,blendMode:et,indices:dt,uvs:st,_batchRGB:Color.shared.setValue(at).toRgbArray(),_tintRGB:at,_texture:it.style.texture,alpha:it.style.alpha,worldAlpha:1};this.batches[nt]=ht}}_renderBatched(_){if(this.batches.length){_.batch.setObjectRenderer(_.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let et=0,tt=this.batches.length;et<tt;et++){const nt=this.batches[et];nt.worldAlpha=this.worldAlpha*nt.alpha,_.plugins[this.pluginName].render(nt)}}}_renderDirect(_){const et=this._resolveDirectShader(_),tt=this._geometry,nt=this.worldAlpha,it=et.uniforms,at=tt.drawCalls;it.translationMatrix=this.transform.worldTransform,Color.shared.setValue(this._tintColor).premultiply(nt).toArray(it.tint),_.shader.bind(et),_.geometry.bind(tt,et),_.state.set(this.state);for(let ot=0,st=at.length;ot<st;ot++)this._renderDrawCallDirect(_,tt.drawCalls[ot])}_renderDrawCallDirect(_,et){const{texArray:tt,type:nt,size:it,start:at}=et,ot=tt.count;for(let st=0;st<ot;st++)_.texture.bind(tt.elements[st],st);_.geometry.draw(nt,it,at)}_resolveDirectShader(_){let et=this.shader;const tt=this.pluginName;if(!et){if(!DEFAULT_SHADERS[tt]){const{maxTextures:nt}=_.plugins[tt],it=new Int32Array(nt);for(let st=0;st<nt;st++)it[st]=st;const at={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:it},!0)},ot=_.plugins[tt]._shader.program;DEFAULT_SHADERS[tt]=new Shader(ot,at)}et=DEFAULT_SHADERS[tt]}return et}_calculateBounds(){this.finishPoly();const _=this._geometry;if(!_.graphicsData.length)return;const{minX:et,minY:tt,maxX:nt,maxY:it}=_.bounds;this._bounds.addFrame(this.transform,et,tt,nt,it)}containsPoint(_){return this.worldTransform.applyInverse(_,Ro._TEMP_POINT),this._geometry.containsPoint(Ro._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let _=0;_<this.batches.length;_++){const et=this.batches[_];et._tintRGB=Color.shared.setValue(this._tintColor).multiply(et._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const _=this.transform._worldID;if(this._transformID===_)return;this._transformID=_;const et=this.transform.worldTransform,tt=et.a,nt=et.b,it=et.c,at=et.d,ot=et.tx,st=et.ty,dt=this._geometry.points,ht=this.vertexData;let ct=0;for(let ut=0;ut<dt.length;ut+=2){const ft=dt[ut],gt=dt[ut+1];ht[ct++]=tt*ft+it*gt+ot,ht[ct++]=at*gt+nt*ft+st}}closePath(){const _=this.currentPath;return _&&(_.closeStroke=!0,this.finishPoly()),this}setMatrix(_){return this._matrix=_,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(_){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(_)}};_Graphics.curves=curves,_Graphics._TEMP_POINT=new Point$1;let Graphics=_Graphics;class MeshBatchUvs{constructor(_,et){this.uvBuffer=_,this.uvMatrix=et,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(_){if(!_&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const et=this.uvBuffer.data;(!this.data||this.data.length!==et.length)&&(this.data=new Float32Array(et.length)),this.uvMatrix.multiplyUvs(et,this.data),this._updateID++}}const tempPoint$1=new Point$1,tempPolygon=new Polygon$1,_Mesh=class Pl extends Container{constructor(_,et,tt,nt=DRAW_MODES.TRIANGLES){super(),this.geometry=_,this.shader=et,this.state=tt||State.for2d(),this.drawMode=nt,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(_){this._geometry!==_&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=_,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(_){this.shader=_}get material(){return this.shader}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(_){this.shader.tint=_}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(_){this.shader.texture=_}_render(_){const et=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&et.length<Pl.BATCHABLE_SIZE*2?this._renderToBatch(_):this._renderDefault(_)}_renderDefault(_){const et=this.shader;et.alpha=this.worldAlpha,et.update&&et.update(),_.batch.flush(),et.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),_.shader.bind(et),_.state.set(this.state),_.geometry.bind(this.geometry,et),_.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(_){const et=this.geometry,tt=this.shader;tt.uvMatrix&&(tt.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=et.indexBuffer.data,this._tintRGB=tt._tintRGB,this._texture=tt.texture;const nt=this.material.pluginName;_.batch.setObjectRenderer(_.plugins[nt]),_.plugins[nt].render(this)}calculateVertices(){const _=this.geometry.buffers[0],et=_.data,tt=_._updateID;if(tt===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==et.length&&(this.vertexData=new Float32Array(et.length));const nt=this.transform.worldTransform,it=nt.a,at=nt.b,ot=nt.c,st=nt.d,dt=nt.tx,ht=nt.ty,ct=this.vertexData;for(let ut=0;ut<ct.length/2;ut++){const ft=et[ut*2],gt=et[ut*2+1];ct[ut*2]=it*ft+ot*gt+dt,ct[ut*2+1]=at*ft+st*gt+ht}if(this._roundPixels){const ut=settings.RESOLUTION;for(let ft=0;ft<ct.length;++ft)ct[ft]=Math.round(ct[ft]*ut)/ut}this.vertexDirty=tt}calculateUvs(){const _=this.geometry.buffers[1],et=this.shader;et.uvMatrix.isSimple?this.uvs=_.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(_,et.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(_){if(!this.getBounds().contains(_.x,_.y))return!1;this.worldTransform.applyInverse(_,tempPoint$1);const et=this.geometry.getBuffer("aVertexPosition").data,tt=tempPolygon.points,nt=this.geometry.getIndex().data,it=nt.length,at=this.drawMode===4?3:1;for(let ot=0;ot+2<it;ot+=at){const st=nt[ot]*2,dt=nt[ot+1]*2,ht=nt[ot+2]*2;if(tt[0]=et[st],tt[1]=et[st+1],tt[2]=et[dt],tt[3]=et[dt+1],tt[4]=et[ht],tt[5]=et[ht+1],tempPolygon.contains(tempPoint$1.x,tempPoint$1.y))return!0}return!1}destroy(_){super.destroy(_),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};_Mesh.BATCHABLE_SIZE=100;let Mesh=_Mesh;class MeshGeometry extends Geometry{constructor(_,et,tt){super();const nt=new Buffer$1(_),it=new Buffer$1(et,!0),at=new Buffer$1(tt,!0,!0);this.addAttribute("aVertexPosition",nt,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",it,2,!1,TYPES.FLOAT).addIndex(at),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var fragment$1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(_,et){const tt={uSampler:_,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};et=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},et),et.uniforms&&Object.assign(tt,et.uniforms),super(et.program||Program.from(vertex$1,fragment$1),tt),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(_),this.batchable=et.program===void 0,this.pluginName=et.pluginName,this._tintColor=new Color(et.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=et.alpha}get texture(){return this.uniforms.uSampler}set texture(_){this.uniforms.uSampler!==_&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!_.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=_,this.uvMatrix.texture=_)}set alpha(_){_!==this._alpha&&(this._alpha=_,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(_){_!==this.tint&&(this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const _=this.texture.baseTexture.alphaMode;Color.shared.setValue(this._tintColor).premultiply(this._alpha,_).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ParticleBuffer{constructor(_,et,tt){this.geometry=new Geometry,this.indexBuffer=null,this.size=tt,this.dynamicProperties=[],this.staticProperties=[];for(let nt=0;nt<_.length;++nt){let it=_[nt];it={attributeName:it.attributeName,size:it.size,uploadFunction:it.uploadFunction,type:it.type||TYPES.FLOAT,offset:it.offset},et[nt]?this.dynamicProperties.push(it):this.staticProperties.push(it)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const _=this.geometry;let et=0;this.indexBuffer=new Buffer$1(createIndicesForQuads(this.size),!0,!0),_.addIndex(this.indexBuffer),this.dynamicStride=0;for(let at=0;at<this.dynamicProperties.length;++at){const ot=this.dynamicProperties[at];ot.offset=et,et+=ot.size,this.dynamicStride+=ot.size}const tt=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(tt),this.dynamicDataUint32=new Uint32Array(tt),this.dynamicBuffer=new Buffer$1(this.dynamicData,!1,!1);let nt=0;this.staticStride=0;for(let at=0;at<this.staticProperties.length;++at){const ot=this.staticProperties[at];ot.offset=nt,nt+=ot.size,this.staticStride+=ot.size}const it=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(it),this.staticDataUint32=new Uint32Array(it),this.staticBuffer=new Buffer$1(this.staticData,!0,!1);for(let at=0;at<this.dynamicProperties.length;++at){const ot=this.dynamicProperties[at];_.addAttribute(ot.attributeName,this.dynamicBuffer,0,ot.type===TYPES.UNSIGNED_BYTE,ot.type,this.dynamicStride*4,ot.offset*4)}for(let at=0;at<this.staticProperties.length;++at){const ot=this.staticProperties[at];_.addAttribute(ot.attributeName,this.staticBuffer,0,ot.type===TYPES.UNSIGNED_BYTE,ot.type,this.staticStride*4,ot.offset*4)}}uploadDynamic(_,et,tt){for(let nt=0;nt<this.dynamicProperties.length;nt++){const it=this.dynamicProperties[nt];it.uploadFunction(_,et,tt,it.type===TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,it.offset)}this.dynamicBuffer._updateID++}uploadStatic(_,et,tt){for(let nt=0;nt<this.staticProperties.length;nt++){const it=this.staticProperties[nt];it.uploadFunction(_,et,tt,it.type===TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,it.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fragment=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ParticleRenderer extends ObjectRenderer{constructor(_){super(_),this.shader=null,this.properties=null,this.tempMatrix=new Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Shader.from(vertex,fragment,{}),this.state=State.for2d()}render(_){const et=_.children,tt=_._maxSize,nt=_._batchSize,it=this.renderer;let at=et.length;if(at===0)return;at>tt&&!_.autoResize&&(at=tt);let ot=_._buffers;ot||(ot=_._buffers=this.generateBuffers(_));const st=et[0]._texture.baseTexture,dt=st.alphaMode>0;this.state.blendMode=correctBlendMode(_.blendMode,dt),it.state.set(this.state);const ht=it.gl,ct=_.worldTransform.copyTo(this.tempMatrix);ct.prepend(it.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=ct.toArray(!0),this.shader.uniforms.uColor=Color.shared.setValue(_.tintRgb).premultiply(_.worldAlpha,dt).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=st,this.renderer.shader.bind(this.shader);let ut=!1;for(let ft=0,gt=0;ft<at;ft+=nt,gt+=1){let mt=at-ft;mt>nt&&(mt=nt),gt>=ot.length&&ot.push(this._generateOneMoreBuffer(_));const vt=ot[gt];vt.uploadDynamic(et,ft,mt);const yt=_._bufferUpdateIDs[gt]||0;ut=ut||vt._updateID<yt,ut&&(vt._updateID=_._updateID,vt.uploadStatic(et,ft,mt)),it.geometry.bind(vt.geometry),ht.drawElements(ht.TRIANGLES,mt*6,ht.UNSIGNED_SHORT,0)}}generateBuffers(_){const et=[],tt=_._maxSize,nt=_._batchSize,it=_._properties;for(let at=0;at<tt;at+=nt)et.push(new ParticleBuffer(this.properties,it,nt));return et}_generateOneMoreBuffer(_){const et=_._batchSize,tt=_._properties;return new ParticleBuffer(this.properties,tt,et)}uploadVertices(_,et,tt,nt,it,at){let ot=0,st=0,dt=0,ht=0;for(let ct=0;ct<tt;++ct){const ut=_[et+ct],ft=ut._texture,gt=ut.scale.x,mt=ut.scale.y,vt=ft.trim,yt=ft.orig;vt?(st=vt.x-ut.anchor.x*yt.width,ot=st+vt.width,ht=vt.y-ut.anchor.y*yt.height,dt=ht+vt.height):(ot=yt.width*(1-ut.anchor.x),st=yt.width*-ut.anchor.x,dt=yt.height*(1-ut.anchor.y),ht=yt.height*-ut.anchor.y),nt[at]=st*gt,nt[at+1]=ht*mt,nt[at+it]=ot*gt,nt[at+it+1]=ht*mt,nt[at+it*2]=ot*gt,nt[at+it*2+1]=dt*mt,nt[at+it*3]=st*gt,nt[at+it*3+1]=dt*mt,at+=it*4}}uploadPosition(_,et,tt,nt,it,at){for(let ot=0;ot<tt;ot++){const st=_[et+ot].position;nt[at]=st.x,nt[at+1]=st.y,nt[at+it]=st.x,nt[at+it+1]=st.y,nt[at+it*2]=st.x,nt[at+it*2+1]=st.y,nt[at+it*3]=st.x,nt[at+it*3+1]=st.y,at+=it*4}}uploadRotation(_,et,tt,nt,it,at){for(let ot=0;ot<tt;ot++){const st=_[et+ot].rotation;nt[at]=st,nt[at+it]=st,nt[at+it*2]=st,nt[at+it*3]=st,at+=it*4}}uploadUvs(_,et,tt,nt,it,at){for(let ot=0;ot<tt;++ot){const st=_[et+ot]._texture._uvs;st?(nt[at]=st.x0,nt[at+1]=st.y0,nt[at+it]=st.x1,nt[at+it+1]=st.y1,nt[at+it*2]=st.x2,nt[at+it*2+1]=st.y2,nt[at+it*3]=st.x3,nt[at+it*3+1]=st.y3,at+=it*4):(nt[at]=0,nt[at+1]=0,nt[at+it]=0,nt[at+it+1]=0,nt[at+it*2]=0,nt[at+it*2+1]=0,nt[at+it*3]=0,nt[at+it*3+1]=0,at+=it*4)}}uploadTint(_,et,tt,nt,it,at){for(let ot=0;ot<tt;++ot){const st=_[et+ot],dt=Color.shared.setValue(st._tintRGB).toPremultiplied(st.alpha,st.texture.baseTexture.alphaMode>0);nt[at]=dt,nt[at+it]=dt,nt[at+it*2]=dt,nt[at+it*3]=dt,at+=it*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ParticleRenderer.extension={name:"particle",type:ExtensionType.RendererPlugin};extensions$2.add(ParticleRenderer);var TEXT_GRADIENT=(_e=>(_e[_e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",_e[_e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",_e))(TEXT_GRADIENT||{});const contextSettings={willReadFrequently:!0},_TextMetrics=class xr{static get experimentalLetterSpacingSupported(){let _=xr._experimentalLetterSpacingSupported;if(_!==void 0){const et=settings.ADAPTER.getCanvasRenderingContext2D().prototype;_=xr._experimentalLetterSpacingSupported="letterSpacing"in et||"textLetterSpacing"in et}return _}constructor(_,et,tt,nt,it,at,ot,st,dt){this.text=_,this.style=et,this.width=tt,this.height=nt,this.lines=it,this.lineWidths=at,this.lineHeight=ot,this.maxLineWidth=st,this.fontProperties=dt}static measureText(_,et,tt,nt=xr._canvas){tt=tt??et.wordWrap;const it=et.toFontString(),at=xr.measureFont(it);at.fontSize===0&&(at.fontSize=et.fontSize,at.ascent=et.fontSize);const ot=nt.getContext("2d",contextSettings);ot.font=it;const st=(tt?xr.wordWrap(_,et,nt):_).split(/(?:\r\n|\r|\n)/),dt=new Array(st.length);let ht=0;for(let gt=0;gt<st.length;gt++){const mt=xr._measureText(st[gt],et.letterSpacing,ot);dt[gt]=mt,ht=Math.max(ht,mt)}let ct=ht+et.strokeThickness;et.dropShadow&&(ct+=et.dropShadowDistance);const ut=et.lineHeight||at.fontSize+et.strokeThickness;let ft=Math.max(ut,at.fontSize+et.strokeThickness*2)+et.leading+(st.length-1)*(ut+et.leading);return et.dropShadow&&(ft+=et.dropShadowDistance),new xr(_,et,ct,ft,st,dt,ut+et.leading,ht,at)}static _measureText(_,et,tt){let nt=!1;xr.experimentalLetterSpacingSupported&&(xr.experimentalLetterSpacing?(tt.letterSpacing=`${et}px`,tt.textLetterSpacing=`${et}px`,nt=!0):(tt.letterSpacing="0px",tt.textLetterSpacing="0px"));let it=tt.measureText(_).width;return it>0&&(nt?it-=et:it+=(xr.graphemeSegmenter(_).length-1)*et),it}static wordWrap(_,et,tt=xr._canvas){const nt=tt.getContext("2d",contextSettings);let it=0,at="",ot="";const st=Object.create(null),{letterSpacing:dt,whiteSpace:ht}=et,ct=xr.collapseSpaces(ht),ut=xr.collapseNewlines(ht);let ft=!ct;const gt=et.wordWrapWidth+dt,mt=xr.tokenize(_);for(let vt=0;vt<mt.length;vt++){let yt=mt[vt];if(xr.isNewline(yt)){if(!ut){ot+=xr.addLine(at),ft=!ct,at="",it=0;continue}yt=" "}if(ct){const _t=xr.isBreakingSpace(yt),xt=xr.isBreakingSpace(at[at.length-1]);if(_t&&xt)continue}const bt=xr.getFromCache(yt,dt,st,nt);if(bt>gt)if(at!==""&&(ot+=xr.addLine(at),at="",it=0),xr.canBreakWords(yt,et.breakWords)){const _t=xr.wordWrapSplit(yt);for(let xt=0;xt<_t.length;xt++){let St=_t[xt],Tt=St,wt=1;for(;_t[xt+wt];){const Et=_t[xt+wt];if(!xr.canBreakChars(Tt,Et,yt,xt,et.breakWords))St+=Et;else break;Tt=Et,wt++}xt+=wt-1;const Ct=xr.getFromCache(St,dt,st,nt);Ct+it>gt&&(ot+=xr.addLine(at),ft=!1,at="",it=0),at+=St,it+=Ct}}else{at.length>0&&(ot+=xr.addLine(at),at="",it=0);const _t=vt===mt.length-1;ot+=xr.addLine(yt,!_t),ft=!1,at="",it=0}else bt+it>gt&&(ft=!1,ot+=xr.addLine(at),at="",it=0),(at.length>0||!xr.isBreakingSpace(yt)||ft)&&(at+=yt,it+=bt)}return ot+=xr.addLine(at,!1),ot}static addLine(_,et=!0){return _=xr.trimRight(_),_=et?`${_}
`:_,_}static getFromCache(_,et,tt,nt){let it=tt[_];return typeof it!="number"&&(it=xr._measureText(_,et,nt)+et,tt[_]=it),it}static collapseSpaces(_){return _==="normal"||_==="pre-line"}static collapseNewlines(_){return _==="normal"}static trimRight(_){if(typeof _!="string")return"";for(let et=_.length-1;et>=0;et--){const tt=_[et];if(!xr.isBreakingSpace(tt))break;_=_.slice(0,-1)}return _}static isNewline(_){return typeof _!="string"?!1:xr._newlines.includes(_.charCodeAt(0))}static isBreakingSpace(_,et){return typeof _!="string"?!1:xr._breakingSpaces.includes(_.charCodeAt(0))}static tokenize(_){const et=[];let tt="";if(typeof _!="string")return et;for(let nt=0;nt<_.length;nt++){const it=_[nt],at=_[nt+1];if(xr.isBreakingSpace(it,at)||xr.isNewline(it)){tt!==""&&(et.push(tt),tt=""),et.push(it);continue}tt+=it}return tt!==""&&et.push(tt),et}static canBreakWords(_,et){return et}static canBreakChars(_,et,tt,nt,it){return!0}static wordWrapSplit(_){return xr.graphemeSegmenter(_)}static measureFont(_){if(xr._fonts[_])return xr._fonts[_];const et={ascent:0,descent:0,fontSize:0},tt=xr._canvas,nt=xr._context;nt.font=_;const it=xr.METRICS_STRING+xr.BASELINE_SYMBOL,at=Math.ceil(nt.measureText(it).width);let ot=Math.ceil(nt.measureText(xr.BASELINE_SYMBOL).width);const st=Math.ceil(xr.HEIGHT_MULTIPLIER*ot);if(ot=ot*xr.BASELINE_MULTIPLIER|0,at===0||st===0)return xr._fonts[_]=et,et;tt.width=at,tt.height=st,nt.fillStyle="#f00",nt.fillRect(0,0,at,st),nt.font=_,nt.textBaseline="alphabetic",nt.fillStyle="#000",nt.fillText(it,0,ot);const dt=nt.getImageData(0,0,at,st).data,ht=dt.length,ct=at*4;let ut=0,ft=0,gt=!1;for(ut=0;ut<ot;++ut){for(let mt=0;mt<ct;mt+=4)if(dt[ft+mt]!==255){gt=!0;break}if(!gt)ft+=ct;else break}for(et.ascent=ot-ut,ft=ht-ct,gt=!1,ut=st;ut>ot;--ut){for(let mt=0;mt<ct;mt+=4)if(dt[ft+mt]!==255){gt=!0;break}if(!gt)ft-=ct;else break}return et.descent=ut-ot,et.fontSize=et.ascent+et.descent,xr._fonts[_]=et,et}static clearMetrics(_=""){_?delete xr._fonts[_]:xr._fonts={}}static get _canvas(){var _;if(!xr.__canvas){let et;try{const tt=new OffscreenCanvas(0,0);if((_=tt.getContext("2d",contextSettings))!=null&&_.measureText)return xr.__canvas=tt,tt;et=settings.ADAPTER.createCanvas()}catch{et=settings.ADAPTER.createCanvas()}et.width=et.height=10,xr.__canvas=et}return xr.__canvas}static get _context(){return xr.__context||(xr.__context=xr._canvas.getContext("2d",contextSettings)),xr.__context}};_TextMetrics.METRICS_STRING="|q",_TextMetrics.BASELINE_SYMBOL="M",_TextMetrics.BASELINE_MULTIPLIER=1.4,_TextMetrics.HEIGHT_MULTIPLIER=2,_TextMetrics.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const _e=new Intl.Segmenter;return _=>[..._e.segment(_)].map(et=>et.segment)}return _e=>[..._e]})(),_TextMetrics.experimentalLetterSpacing=!1,_TextMetrics._fonts={},_TextMetrics._newlines=[10,13],_TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let TextMetrics=_TextMetrics;const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_TextStyle=class ho{constructor(_){this.styleID=0,this.reset(),deepCopyProperties(this,_,_)}clone(){const _={};return deepCopyProperties(_,this,ho.defaultStyle),new ho(_)}reset(){deepCopyProperties(this,ho.defaultStyle,ho.defaultStyle)}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(_){this._breakWords!==_&&(this._breakWords=_,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(_){this._dropShadow!==_&&(this._dropShadow=_,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(_){this._dropShadowAlpha!==_&&(this._dropShadowAlpha=_,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(_){this._dropShadowAngle!==_&&(this._dropShadowAngle=_,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(_){this._dropShadowBlur!==_&&(this._dropShadowBlur=_,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(_){const et=getColor$1(_);this._dropShadowColor!==et&&(this._dropShadowColor=et,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(_){this._dropShadowDistance!==_&&(this._dropShadowDistance=_,this.styleID++)}get fill(){return this._fill}set fill(_){const et=getColor$1(_);this._fill!==et&&(this._fill=et,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(_){this._fillGradientType!==_&&(this._fillGradientType=_,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(_){areArraysEqual(this._fillGradientStops,_)||(this._fillGradientStops=_,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(_){this.fontFamily!==_&&(this._fontFamily=_,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(_){this._fontStyle!==_&&(this._fontStyle=_,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(_){this._fontVariant!==_&&(this._fontVariant=_,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(_){this._fontWeight!==_&&(this._fontWeight=_,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(_){this._lineHeight!==_&&(this._lineHeight=_,this.styleID++)}get leading(){return this._leading}set leading(_){this._leading!==_&&(this._leading=_,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(_){this._lineJoin!==_&&(this._lineJoin=_,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(_){this._miterLimit!==_&&(this._miterLimit=_,this.styleID++)}get padding(){return this._padding}set padding(_){this._padding!==_&&(this._padding=_,this.styleID++)}get stroke(){return this._stroke}set stroke(_){const et=getColor$1(_);this._stroke!==et&&(this._stroke=et,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(_){this._strokeThickness!==_&&(this._strokeThickness=_,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(_){this._textBaseline!==_&&(this._textBaseline=_,this.styleID++)}get trim(){return this._trim}set trim(_){this._trim!==_&&(this._trim=_,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(_){this._whiteSpace!==_&&(this._whiteSpace=_,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(_){this._wordWrap!==_&&(this._wordWrap=_,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(_){this._wordWrapWidth!==_&&(this._wordWrapWidth=_,this.styleID++)}toFontString(){const _=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let et=this.fontFamily;Array.isArray(this.fontFamily)||(et=this.fontFamily.split(","));for(let tt=et.length-1;tt>=0;tt--){let nt=et[tt].trim();!/([\"\'])[^\'\"]+\1/.test(nt)&&!genericFontFamilies.includes(nt)&&(nt=`"${nt}"`),et[tt]=nt}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${_} ${et.join(",")}`}};_TextStyle.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function getColor$1(_e){const _=Color.shared,et=tt=>{const nt=_.setValue(tt);return nt.alpha===1?nt.toHex():nt.toRgbaString()};return Array.isArray(_e)?_e.map(et):et(_e)}function areArraysEqual(_e,_){if(!Array.isArray(_e)||!Array.isArray(_)||_e.length!==_.length)return!1;for(let et=0;et<_e.length;++et)if(_e[et]!==_[et])return!1;return!0}function deepCopyProperties(_e,_,et){for(const tt in et)Array.isArray(_[tt])?_e[tt]=_[tt].slice():_e[tt]=_[tt]}const defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_Text=class Uo extends Sprite{constructor(_,et,tt){let nt=!1;tt||(tt=settings.ADAPTER.createCanvas(),nt=!0),tt.width=3,tt.height=3;const it=Texture.from(tt);it.orig=new Rectangle,it.trim=new Rectangle,super(it),this._ownCanvas=nt,this.canvas=tt,this.context=tt.getContext("2d",{willReadFrequently:!0}),this._resolution=Uo.defaultResolution??settings.RESOLUTION,this._autoResolution=Uo.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=_,this.style=et,this.localStyleID=-1}static get experimentalLetterSpacing(){return TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(_){deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),TextMetrics.experimentalLetterSpacing=_}updateText(_){const et=this._style;if(this.localStyleID!==et.styleID&&(this.dirty=!0,this.localStyleID=et.styleID),!this.dirty&&_)return;this._font=this._style.toFontString();const tt=this.context,nt=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),it=nt.width,at=nt.height,ot=nt.lines,st=nt.lineHeight,dt=nt.lineWidths,ht=nt.maxLineWidth,ct=nt.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,it)+et.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,at)+et.padding*2)*this._resolution),tt.scale(this._resolution,this._resolution),tt.clearRect(0,0,this.canvas.width,this.canvas.height),tt.font=this._font,tt.lineWidth=et.strokeThickness,tt.textBaseline=et.textBaseline,tt.lineJoin=et.lineJoin,tt.miterLimit=et.miterLimit;let ut,ft;const gt=et.dropShadow?2:1;for(let mt=0;mt<gt;++mt){const vt=et.dropShadow&&mt===0,yt=vt?Math.ceil(Math.max(1,at)+et.padding*2):0,bt=yt*this._resolution;if(vt){tt.fillStyle="black",tt.strokeStyle="black";const xt=et.dropShadowColor,St=et.dropShadowBlur*this._resolution,Tt=et.dropShadowDistance*this._resolution;tt.shadowColor=Color.shared.setValue(xt).setAlpha(et.dropShadowAlpha).toRgbaString(),tt.shadowBlur=St,tt.shadowOffsetX=Math.cos(et.dropShadowAngle)*Tt,tt.shadowOffsetY=Math.sin(et.dropShadowAngle)*Tt+bt}else tt.fillStyle=this._generateFillStyle(et,ot,nt),tt.strokeStyle=et.stroke,tt.shadowColor="black",tt.shadowBlur=0,tt.shadowOffsetX=0,tt.shadowOffsetY=0;let _t=(st-ct.fontSize)/2;st-ct.fontSize<0&&(_t=0);for(let xt=0;xt<ot.length;xt++)ut=et.strokeThickness/2,ft=et.strokeThickness/2+xt*st+ct.ascent+_t,et.align==="right"?ut+=ht-dt[xt]:et.align==="center"&&(ut+=(ht-dt[xt])/2),et.stroke&&et.strokeThickness&&this.drawLetterSpacing(ot[xt],ut+et.padding,ft+et.padding-yt,!0),et.fill&&this.drawLetterSpacing(ot[xt],ut+et.padding,ft+et.padding-yt)}this.updateTexture()}drawLetterSpacing(_,et,tt,nt=!1){const it=this._style.letterSpacing;let at=!1;if(TextMetrics.experimentalLetterSpacingSupported&&(TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${it}px`,this.context.textLetterSpacing=`${it}px`,at=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),it===0||at){nt?this.context.strokeText(_,et,tt):this.context.fillText(_,et,tt);return}let ot=et;const st=TextMetrics.graphemeSegmenter(_);let dt=this.context.measureText(_).width,ht=0;for(let ct=0;ct<st.length;++ct){const ut=st[ct];nt?this.context.strokeText(ut,ot,tt):this.context.fillText(ut,ot,tt);let ft="";for(let gt=ct+1;gt<st.length;++gt)ft+=st[gt];ht=this.context.measureText(ft).width,ot+=dt-ht+it,dt=ht}}updateTexture(){const _=this.canvas;if(this._style.trim){const at=trimCanvas(_);at.data&&(_.width=at.width,_.height=at.height,this.context.putImageData(at.data,0,0))}const et=this._texture,tt=this._style,nt=tt.trim?0:tt.padding,it=et.baseTexture;et.trim.width=et._frame.width=_.width/this._resolution,et.trim.height=et._frame.height=_.height/this._resolution,et.trim.x=-nt,et.trim.y=-nt,et.orig.width=et._frame.width-nt*2,et.orig.height=et._frame.height-nt*2,this._onTextureUpdate(),it.setRealSize(_.width,_.height,this._resolution),et.updateUvs(),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(_,et){return this.updateText(!0),this._textureID===-1&&(_=!1),super.getBounds(_,et)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds.call(this,_)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(_,et,tt){const nt=_.fill;if(Array.isArray(nt)){if(nt.length===1)return nt[0]}else return nt;let it;const at=_.dropShadow?_.dropShadowDistance:0,ot=_.padding||0,st=this.canvas.width/this._resolution-at-ot*2,dt=this.canvas.height/this._resolution-at-ot*2,ht=nt.slice(),ct=_.fillGradientStops.slice();if(!ct.length){const ut=ht.length+1;for(let ft=1;ft<ut;++ft)ct.push(ft/ut)}if(ht.unshift(nt[0]),ct.unshift(0),ht.push(nt[nt.length-1]),ct.push(1),_.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){it=this.context.createLinearGradient(st/2,ot,st/2,dt+ot);const ut=tt.fontProperties.fontSize+_.strokeThickness;for(let ft=0;ft<et.length;ft++){const gt=tt.lineHeight*(ft-1)+ut,mt=tt.lineHeight*ft;let vt=mt;ft>0&&gt>mt&&(vt=(mt+gt)/2);const yt=mt+ut,bt=tt.lineHeight*(ft+1);let _t=yt;ft+1<et.length&&bt<yt&&(_t=(yt+bt)/2);const xt=(_t-vt)/dt;for(let St=0;St<ht.length;St++){let Tt=0;typeof ct[St]=="number"?Tt=ct[St]:Tt=St/ht.length;let wt=Math.min(1,Math.max(0,vt/dt+Tt*xt));wt=Number(wt.toFixed(5)),it.addColorStop(wt,ht[St])}}}else{it=this.context.createLinearGradient(ot,dt/2,st+ot,dt/2);const ut=ht.length+1;let ft=1;for(let gt=0;gt<ht.length;gt++){let mt;typeof ct[gt]=="number"?mt=ct[gt]:mt=ft/ut,it.addColorStop(mt,ht[gt]),ft++}}return it}destroy(_){typeof _=="boolean"&&(_={children:_}),_=Object.assign({},defaultDestroyOptions,_),super.destroy(_),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(_){this.updateText(!0);const et=sign(this.scale.x)||1;this.scale.x=et*_/this._texture.orig.width,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(_){this.updateText(!0);const et=sign(this.scale.y)||1;this.scale.y=et*_/this._texture.orig.height,this._height=_}get style(){return this._style}set style(_){_=_||{},_ instanceof TextStyle?this._style=_:this._style=new TextStyle(_),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}};_Text.defaultAutoResolution=!0;let Text=_Text;class CountLimiter{constructor(_){this.maxItemsPerFrame=_,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function findMultipleBaseTextures(_e,_){var tt;let et=!1;if((tt=_e==null?void 0:_e._textures)!=null&&tt.length){for(let nt=0;nt<_e._textures.length;nt++)if(_e._textures[nt]instanceof Texture){const it=_e._textures[nt].baseTexture;_.includes(it)||(_.push(it),et=!0)}}return et}function findBaseTexture(_e,_){if(_e.baseTexture instanceof BaseTexture){const et=_e.baseTexture;return _.includes(et)||_.push(et),!0}return!1}function findTexture(_e,_){if(_e._texture&&_e._texture instanceof Texture){const et=_e._texture.baseTexture;return _.includes(et)||_.push(et),!0}return!1}function drawText(_e,_){return _ instanceof Text?(_.updateText(!0),!0):!1}function calculateTextStyle(_e,_){if(_ instanceof TextStyle){const et=_.toFontString();return TextMetrics.measureFont(et),!0}return!1}function findText(_e,_){if(_e instanceof Text){_.includes(_e.style)||_.push(_e.style),_.includes(_e)||_.push(_e);const et=_e._texture.baseTexture;return _.includes(et)||_.push(et),!0}return!1}function findTextStyle(_e,_){return _e instanceof TextStyle?(_.includes(_e)||_.push(_e),!0):!1}const _BasePrepare=class Il{constructor(_){this.limiter=new CountLimiter(Il.uploadsPerFrame),this.renderer=_,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(_){return new Promise(et=>{_&&this.add(_),this.queue.length?(this.completes.push(et),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):et()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const _=this.queue[0];let et=!1;if(_&&!_._destroyed){for(let tt=0,nt=this.uploadHooks.length;tt<nt;tt++)if(this.uploadHooks[tt](this.uploadHookHelper,_)){this.queue.shift(),et=!0;break}}et||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const _=this.completes.slice(0);this.completes.length=0;for(let et=0,tt=_.length;et<tt;et++)_[et]()}}registerFindHook(_){return _&&this.addHooks.push(_),this}registerUploadHook(_){return _&&this.uploadHooks.push(_),this}add(_){for(let et=0,tt=this.addHooks.length;et<tt&&!this.addHooks[et](_,this.queue);et++);if(_ instanceof Container)for(let et=_.children.length-1;et>=0;et--)this.add(_.children[et]);return this}destroy(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};_BasePrepare.uploadsPerFrame=4;let BasePrepare=_BasePrepare;Object.defineProperties(settings,{UPLOADS_PER_FRAME:{get(){return BasePrepare.uploadsPerFrame},set(_e){deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),BasePrepare.uploadsPerFrame=_e}}});function uploadBaseTextures(_e,_){return _ instanceof BaseTexture?(_._glTextures[_e.CONTEXT_UID]||_e.texture.bind(_),!0):!1}function uploadGraphics(_e,_){if(!(_ instanceof Graphics))return!1;const{geometry:et}=_;_.finishPoly(),et.updateBatches();const{batches:tt}=et;for(let nt=0;nt<tt.length;nt++){const{texture:it}=tt[nt].style;it&&uploadBaseTextures(_e,it.baseTexture)}return et.batchable||_e.geometry.bind(et,_._resolveDirectShader(_e)),!0}function findGraphics(_e,_){return _e instanceof Graphics?(_.push(_e),!0):!1}class Prepare extends BasePrepare{constructor(_){super(_),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}}Prepare.extension={name:"prepare",type:ExtensionType.RendererSystem};extensions$2.add(Prepare);var gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const tempMat=new Matrix;class TilingSpriteRenderer extends ObjectRenderer{constructor(_){super(_),_.runners.contextChange.add(this),this.quad=new QuadUv,this.state=State.for2d()}contextChange(){const _=this.renderer,et={globals:_.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,et),this.shader=_.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,et):Shader.from(gl1VertexSrc,gl1FragmentSrc,et)}render(_){const et=this.renderer,tt=this.quad;let nt=tt.vertices;nt[0]=nt[6]=_._width*-_.anchor.x,nt[1]=nt[3]=_._height*-_.anchor.y,nt[2]=nt[4]=_._width*(1-_.anchor.x),nt[5]=nt[7]=_._height*(1-_.anchor.y);const it=_.uvRespectAnchor?_.anchor.x:0,at=_.uvRespectAnchor?_.anchor.y:0;nt=tt.uvs,nt[0]=nt[6]=-it,nt[1]=nt[3]=-at,nt[2]=nt[4]=1-it,nt[5]=nt[7]=1-at,tt.invalidate();const ot=_._texture,st=ot.baseTexture,dt=st.alphaMode>0,ht=_.tileTransform.localTransform,ct=_.uvMatrix;let ut=st.isPowerOfTwo&&ot.frame.width===st.width&&ot.frame.height===st.height;ut&&(st._glTextures[et.CONTEXT_UID]?ut=st.wrapMode!==WRAP_MODES.CLAMP:st.wrapMode===WRAP_MODES.CLAMP&&(st.wrapMode=WRAP_MODES.REPEAT));const ft=ut?this.simpleShader:this.shader,gt=ot.width,mt=ot.height,vt=_._width,yt=_._height;tempMat.set(ht.a*gt/vt,ht.b*gt/yt,ht.c*mt/vt,ht.d*mt/yt,ht.tx/vt,ht.ty/yt),tempMat.invert(),ut?tempMat.prepend(ct.mapCoord):(ft.uniforms.uMapCoord=ct.mapCoord.toArray(!0),ft.uniforms.uClampFrame=ct.uClampFrame,ft.uniforms.uClampOffset=ct.uClampOffset),ft.uniforms.uTransform=tempMat.toArray(!0),ft.uniforms.uColor=Color.shared.setValue(_.tint).premultiply(_.worldAlpha,dt).toArray(ft.uniforms.uColor),ft.uniforms.translationMatrix=_.transform.worldTransform.toArray(!0),ft.uniforms.uSampler=ot,et.shader.bind(ft),et.geometry.bind(tt),this.state.blendMode=correctBlendMode(_.blendMode,dt),et.state.set(this.state),et.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}TilingSpriteRenderer.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin};extensions$2.add(TilingSpriteRenderer);const _Spritesheet=class fo{constructor(_,et,tt){this.linkedSheets=[],(_ instanceof BaseTexture||_ instanceof Texture)&&(_={texture:_,data:et,resolutionFilename:tt});const{texture:nt,data:it,resolutionFilename:at=null,cachePrefix:ot=""}=_;this.cachePrefix=ot,this._texture=nt instanceof Texture?nt:null,this.baseTexture=nt instanceof BaseTexture?nt:this._texture.baseTexture,this.textures={},this.animations={},this.data=it;const st=this.baseTexture.resource;this.resolution=this._updateResolution(at||(st?st.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(_=null){const{scale:et}=this.data.meta;let tt=getResolutionOfUrl(_,null);return tt===null&&(tt=typeof et=="number"?et:parseFloat(et??"1")),tt!==1&&this.baseTexture.setResolution(tt),tt}parse(){return new Promise(_=>{this._callback=_,this._batchIndex=0,this._frameKeys.length<=fo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(_){let et=_;const tt=fo.BATCH_SIZE;for(;et-_<tt&&et<this._frameKeys.length;){const nt=this._frameKeys[et],it=this._frames[nt],at=it.frame;if(at){let ot=null,st=null;const dt=it.trimmed!==!1&&it.sourceSize?it.sourceSize:it.frame,ht=new Rectangle(0,0,Math.floor(dt.w)/this.resolution,Math.floor(dt.h)/this.resolution);it.rotated?ot=new Rectangle(Math.floor(at.x)/this.resolution,Math.floor(at.y)/this.resolution,Math.floor(at.h)/this.resolution,Math.floor(at.w)/this.resolution):ot=new Rectangle(Math.floor(at.x)/this.resolution,Math.floor(at.y)/this.resolution,Math.floor(at.w)/this.resolution,Math.floor(at.h)/this.resolution),it.trimmed!==!1&&it.spriteSourceSize&&(st=new Rectangle(Math.floor(it.spriteSourceSize.x)/this.resolution,Math.floor(it.spriteSourceSize.y)/this.resolution,Math.floor(at.w)/this.resolution,Math.floor(at.h)/this.resolution)),this.textures[nt]=new Texture(this.baseTexture,ot,ht,st,it.rotated?2:0,it.anchor,it.borders),Texture.addToCache(this.textures[nt],this.cachePrefix+nt.toString())}et++}}_processAnimations(){const _=this.data.animations||{};for(const et in _){this.animations[et]=[];for(let tt=0;tt<_[et].length;tt++){const nt=_[et][tt];this.animations[et].push(this.textures[nt])}}}_parseComplete(){const _=this._callback;this._callback=null,this._batchIndex=0,_.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*fo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*fo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(_=!1){var et;for(const tt in this.textures)this.textures[tt].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,_&&((et=this._texture)==null||et.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function getCacheableAssets(_e,_,et){const tt={};if(_e.forEach(nt=>{tt[nt]=_}),Object.keys(_.textures).forEach(nt=>{tt[`${_.cachePrefix}${nt}`]=_.textures[nt]}),!et){const nt=path.dirname(_e[0]);_.linkedSheets.forEach((it,at)=>{Object.assign(tt,getCacheableAssets([`${nt}/${_.data.meta.related_multi_packs[at]}`],it,!0))})}return tt}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:_e=>_e instanceof Spritesheet,getCacheableAssets:(_e,_)=>getCacheableAssets(_e,_,!1)},resolver:{test:_e=>{const _=_e.split("?")[0].split("."),et=_.pop(),tt=_.pop();return et==="json"&&validImages.includes(tt)},parse:_e=>{var et;const _=_e.split(".");return{resolution:parseFloat(((et=settings.RETINA_PREFIX.exec(_e))==null?void 0:et[1])??"1"),format:_[_.length-2],src:_e}}},loader:{name:"spritesheetLoader",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},async testParse(_e,_){return path.extname(_.src).toLowerCase()===".json"&&!!_e.frames},async parse(_e,_,et){var ht,ct;const{texture:tt,imageFilename:nt,cachePrefix:it}=(_==null?void 0:_.data)??{};let at=path.dirname(_.src);at&&at.lastIndexOf("/")!==at.length-1&&(at+="/");let ot;if(tt&&tt.baseTexture)ot=tt;else{const ut=copySearchParams(at+(nt??_e.meta.image),_.src);ot=(await et.load([ut]))[ut]}const st=new Spritesheet({texture:ot.baseTexture,data:_e,resolutionFilename:_.src,cachePrefix:it});await st.parse();const dt=(ht=_e==null?void 0:_e.meta)==null?void 0:ht.related_multi_packs;if(Array.isArray(dt)){const ut=[];for(const gt of dt){if(typeof gt!="string")continue;let mt=at+gt;(ct=_.data)!=null&&ct.ignoreMultiPack||(mt=copySearchParams(mt,_.src),ut.push(et.load({src:mt,data:{ignoreMultiPack:!0}})))}const ft=await Promise.all(ut);st.linkedSheets=ft,ft.forEach(gt=>{gt.linkedSheets=[st].concat(st.linkedSheets.filter(mt=>mt!==gt))})}return st},unload(_e){_e.destroy(!0)}}};extensions$2.add(spritesheetAsset);class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class TextFormat{static test(_){return typeof _=="string"&&_.startsWith("info face=")}static parse(_){const et=_.match(/^[a-z]+\s+.+$/gm),tt={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const it in et){const at=et[it].match(/^[a-z]+/gm)[0],ot=et[it].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),st={};for(const dt in ot){const ht=ot[dt].split("="),ct=ht[0],ut=ht[1].replace(/"/gm,""),ft=parseFloat(ut),gt=isNaN(ft)?ut:ft;st[ct]=gt}tt[at].push(st)}const nt=new BitmapFontData;return tt.info.forEach(it=>nt.info.push({face:it.face,size:parseInt(it.size,10)})),tt.common.forEach(it=>nt.common.push({lineHeight:parseInt(it.lineHeight,10)})),tt.page.forEach(it=>nt.page.push({id:parseInt(it.id,10),file:it.file})),tt.char.forEach(it=>nt.char.push({id:parseInt(it.id,10),page:parseInt(it.page,10),x:parseInt(it.x,10),y:parseInt(it.y,10),width:parseInt(it.width,10),height:parseInt(it.height,10),xoffset:parseInt(it.xoffset,10),yoffset:parseInt(it.yoffset,10),xadvance:parseInt(it.xadvance,10)})),tt.kerning.forEach(it=>nt.kerning.push({first:parseInt(it.first,10),second:parseInt(it.second,10),amount:parseInt(it.amount,10)})),tt.distanceField.forEach(it=>nt.distanceField.push({distanceRange:parseInt(it.distanceRange,10),fieldType:it.fieldType})),nt}}class XMLFormat{static test(_){const et=_;return typeof _!="string"&&"getElementsByTagName"in _&&et.getElementsByTagName("page").length&&et.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(_){const et=new BitmapFontData,tt=_.getElementsByTagName("info"),nt=_.getElementsByTagName("common"),it=_.getElementsByTagName("page"),at=_.getElementsByTagName("char"),ot=_.getElementsByTagName("kerning"),st=_.getElementsByTagName("distanceField");for(let dt=0;dt<tt.length;dt++)et.info.push({face:tt[dt].getAttribute("face"),size:parseInt(tt[dt].getAttribute("size"),10)});for(let dt=0;dt<nt.length;dt++)et.common.push({lineHeight:parseInt(nt[dt].getAttribute("lineHeight"),10)});for(let dt=0;dt<it.length;dt++)et.page.push({id:parseInt(it[dt].getAttribute("id"),10)||0,file:it[dt].getAttribute("file")});for(let dt=0;dt<at.length;dt++){const ht=at[dt];et.char.push({id:parseInt(ht.getAttribute("id"),10),page:parseInt(ht.getAttribute("page"),10)||0,x:parseInt(ht.getAttribute("x"),10),y:parseInt(ht.getAttribute("y"),10),width:parseInt(ht.getAttribute("width"),10),height:parseInt(ht.getAttribute("height"),10),xoffset:parseInt(ht.getAttribute("xoffset"),10),yoffset:parseInt(ht.getAttribute("yoffset"),10),xadvance:parseInt(ht.getAttribute("xadvance"),10)})}for(let dt=0;dt<ot.length;dt++)et.kerning.push({first:parseInt(ot[dt].getAttribute("first"),10),second:parseInt(ot[dt].getAttribute("second"),10),amount:parseInt(ot[dt].getAttribute("amount"),10)});for(let dt=0;dt<st.length;dt++)et.distanceField.push({fieldType:st[dt].getAttribute("fieldType"),distanceRange:parseInt(st[dt].getAttribute("distanceRange"),10)});return et}}class XMLStringFormat{static test(_){return typeof _=="string"&&_.includes("<font>")?XMLFormat.test(settings.ADAPTER.parseXML(_)):!1}static parse(_){return XMLFormat.parse(settings.ADAPTER.parseXML(_))}}const formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(_e){for(let _=0;_<formats.length;_++)if(formats[_].test(_e))return formats[_];return null}function generateFillStyle(_e,_,et,tt,nt,it){const at=et.fill;if(Array.isArray(at)){if(at.length===1)return at[0]}else return at;let ot;const st=et.dropShadow?et.dropShadowDistance:0,dt=et.padding||0,ht=_e.width/tt-st-dt*2,ct=_e.height/tt-st-dt*2,ut=at.slice(),ft=et.fillGradientStops.slice();if(!ft.length){const gt=ut.length+1;for(let mt=1;mt<gt;++mt)ft.push(mt/gt)}if(ut.unshift(at[0]),ft.unshift(0),ut.push(at[at.length-1]),ft.push(1),et.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){ot=_.createLinearGradient(ht/2,dt,ht/2,ct+dt);let gt=0;const mt=(it.fontProperties.fontSize+et.strokeThickness)/ct;for(let vt=0;vt<nt.length;vt++){const yt=it.lineHeight*vt;for(let bt=0;bt<ut.length;bt++){let _t=0;typeof ft[bt]=="number"?_t=ft[bt]:_t=bt/ut.length;const xt=yt/ct+_t*mt;let St=Math.max(gt,xt);St=Math.min(St,1),ot.addColorStop(St,ut[bt]),gt=St}}}else{ot=_.createLinearGradient(dt,ct/2,ht+dt,ct/2);const gt=ut.length+1;let mt=1;for(let vt=0;vt<ut.length;vt++){let yt;typeof ft[vt]=="number"?yt=ft[vt]:yt=mt/gt,ot.addColorStop(yt,ut[vt]),mt++}}return ot}function drawGlyph(_e,_,et,tt,nt,it,at){const ot=et.text,st=et.fontProperties;_.translate(tt,nt),_.scale(it,it);const dt=at.strokeThickness/2,ht=-(at.strokeThickness/2);if(_.font=at.toFontString(),_.lineWidth=at.strokeThickness,_.textBaseline=at.textBaseline,_.lineJoin=at.lineJoin,_.miterLimit=at.miterLimit,_.fillStyle=generateFillStyle(_e,_,at,it,[ot],et),_.strokeStyle=at.stroke,at.dropShadow){const ct=at.dropShadowColor,ut=at.dropShadowBlur*it,ft=at.dropShadowDistance*it;_.shadowColor=Color.shared.setValue(ct).setAlpha(at.dropShadowAlpha).toRgbaString(),_.shadowBlur=ut,_.shadowOffsetX=Math.cos(at.dropShadowAngle)*ft,_.shadowOffsetY=Math.sin(at.dropShadowAngle)*ft}else _.shadowColor="black",_.shadowBlur=0,_.shadowOffsetX=0,_.shadowOffsetY=0;at.stroke&&at.strokeThickness&&_.strokeText(ot,dt,ht+et.lineHeight-st.descent),at.fill&&_.fillText(ot,dt,ht+et.lineHeight-st.descent),_.setTransform(1,0,0,1,0,0),_.fillStyle="rgba(0, 0, 0, 0)"}function extractCharCode(_e){return _e.codePointAt?_e.codePointAt(0):_e.charCodeAt(0)}function splitTextToCharacters(_e){return Array.from?Array.from(_e):_e.split("")}function resolveCharacters(_e){typeof _e=="string"&&(_e=[_e]);const _=[];for(let et=0,tt=_e.length;et<tt;et++){const nt=_e[et];if(Array.isArray(nt)){if(nt.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${nt.length}.`);const it=nt[0].charCodeAt(0),at=nt[1].charCodeAt(0);if(at<it)throw new Error("[BitmapFont]: Invalid character range.");for(let ot=it,st=at;ot<=st;ot++)_.push(String.fromCharCode(ot))}else _.push(...splitTextToCharacters(nt))}if(_.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return _}const _BitmapFont=class bn{constructor(_,et,tt){var ht;const[nt]=_.info,[it]=_.common,[at]=_.page,[ot]=_.distanceField,st=getResolutionOfUrl(at.file),dt={};this._ownsTextures=tt,this.font=nt.face,this.size=nt.size,this.lineHeight=it.lineHeight/st,this.chars={},this.pageTextures=dt;for(let ct=0;ct<_.page.length;ct++){const{id:ut,file:ft}=_.page[ct];dt[ut]=et instanceof Array?et[ct]:et[ft],ot!=null&&ot.fieldType&&ot.fieldType!=="none"&&(dt[ut].baseTexture.alphaMode=ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,dt[ut].baseTexture.mipmap=MIPMAP_MODES.OFF)}for(let ct=0;ct<_.char.length;ct++){const{id:ut,page:ft}=_.char[ct];let{x:gt,y:mt,width:vt,height:yt,xoffset:bt,yoffset:_t,xadvance:xt}=_.char[ct];gt/=st,mt/=st,vt/=st,yt/=st,bt/=st,_t/=st,xt/=st;const St=new Rectangle(gt+dt[ft].frame.x/st,mt+dt[ft].frame.y/st,vt,yt);this.chars[ut]={xOffset:bt,yOffset:_t,xAdvance:xt,kerning:{},texture:new Texture(dt[ft].baseTexture,St),page:ft}}for(let ct=0;ct<_.kerning.length;ct++){let{first:ut,second:ft,amount:gt}=_.kerning[ct];ut/=st,ft/=st,gt/=st,this.chars[ft]&&(this.chars[ft].kerning[ut]=gt)}this.distanceFieldRange=ot==null?void 0:ot.distanceRange,this.distanceFieldType=((ht=ot==null?void 0:ot.fieldType)==null?void 0:ht.toLowerCase())??"none"}destroy(){for(const _ in this.chars)this.chars[_].texture.destroy(),this.chars[_].texture=null;for(const _ in this.pageTextures)this._ownsTextures&&this.pageTextures[_].destroy(!0),this.pageTextures[_]=null;this.chars=null,this.pageTextures=null}static install(_,et,tt){let nt;if(_ instanceof BitmapFontData)nt=_;else{const at=autoDetectFormat(_);if(!at)throw new Error("Unrecognized data format for font.");nt=at.parse(_)}et instanceof Texture&&(et=[et]);const it=new bn(nt,et,tt);return bn.available[it.font]=it,it}static uninstall(_){const et=bn.available[_];if(!et)throw new Error(`No font found named '${_}'`);et.destroy(),delete bn.available[_]}static from(_,et,tt){if(!_)throw new Error("[BitmapFont] Property `name` is required.");const{chars:nt,padding:it,resolution:at,textureWidth:ot,textureHeight:st,...dt}=Object.assign({},bn.defaultOptions,tt),ht=resolveCharacters(nt),ct=et instanceof TextStyle?et:new TextStyle(et),ut=ot,ft=new BitmapFontData;ft.info[0]={face:ct.fontFamily,size:ct.fontSize},ft.common[0]={lineHeight:ct.fontSize};let gt=0,mt=0,vt,yt,bt,_t=0;const xt=[];for(let Tt=0;Tt<ht.length;Tt++){vt||(vt=settings.ADAPTER.createCanvas(),vt.width=ot,vt.height=st,yt=vt.getContext("2d"),bt=new BaseTexture(vt,{resolution:at,...dt}),xt.push(new Texture(bt)),ft.page.push({id:xt.length-1,file:""}));const wt=ht[Tt],Ct=TextMetrics.measureText(wt,ct,!1,vt),Et=Ct.width,At=Math.ceil(Ct.height),Pt=Math.ceil((ct.fontStyle==="italic"?2:1)*Et);if(mt>=st-At*at){if(mt===0)throw new Error(`[BitmapFont] textureHeight ${st}px is too small (fontFamily: '${ct.fontFamily}', fontSize: ${ct.fontSize}px, char: '${wt}')`);--Tt,vt=null,yt=null,bt=null,mt=0,gt=0,_t=0;continue}if(_t=Math.max(At+Ct.fontProperties.descent,_t),Pt*at+gt>=ut){if(gt===0)throw new Error(`[BitmapFont] textureWidth ${ot}px is too small (fontFamily: '${ct.fontFamily}', fontSize: ${ct.fontSize}px, char: '${wt}')`);--Tt,mt+=_t*at,mt=Math.ceil(mt),gt=0,_t=0;continue}drawGlyph(vt,yt,Ct,gt,mt,at,ct);const Rt=extractCharCode(Ct.text);ft.char.push({id:Rt,page:xt.length-1,x:gt/at,y:mt/at,width:Pt,height:At,xoffset:0,yoffset:0,xadvance:Et-(ct.dropShadow?ct.dropShadowDistance:0)-(ct.stroke?ct.strokeThickness:0)}),gt+=(Pt+2*it)*at,gt=Math.ceil(gt)}if(!(tt!=null&&tt.skipKerning))for(let Tt=0,wt=ht.length;Tt<wt;Tt++){const Ct=ht[Tt];for(let Et=0;Et<wt;Et++){const At=ht[Et],Pt=yt.measureText(Ct).width,Rt=yt.measureText(At).width,It=yt.measureText(Ct+At).width-(Pt+Rt);It&&ft.kerning.push({first:extractCharCode(Ct),second:extractCharCode(At),amount:It})}}const St=new bn(ft,xt,!0);return bn.available[_]!==void 0&&bn.uninstall(_),bn.available[_]=St,St}};_BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],_BitmapFont.NUMERIC=[["0","9"]],_BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],_BitmapFont.ASCII=[[" ","~"]],_BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_BitmapFont.ALPHANUMERIC},_BitmapFont.available={};let BitmapFont=_BitmapFont;var msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],_BitmapText=class Rl extends Container{constructor(_,et={}){super();const{align:tt,tint:nt,maxWidth:it,letterSpacing:at,fontName:ot,fontSize:st}=Object.assign({},Rl.styleDefaults,et);if(!BitmapFont.available[ot])throw new Error(`Missing BitmapFont "${ot}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=tt,this._tintColor=new Color(nt),this._font=void 0,this._fontName=ot,this._fontSize=st,this.text=_,this._maxWidth=it,this._maxLineHeight=0,this._letterSpacing=at,this._anchor=new ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=settings.ROUND_PIXELS,this.dirty=!0,this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Pt;const _=BitmapFont.available[this._fontName],et=this.fontSize,tt=et/_.size,nt=new Point$1,it=[],at=[],ot=[],st=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",dt=splitTextToCharacters(st),ht=this._maxWidth*_.size/et,ct=_.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;let ut=null,ft=0,gt=0,mt=0,vt=-1,yt=0,bt=0,_t=0,xt=0;for(let Rt=0;Rt<dt.length;Rt++){const It=dt[Rt],Mt=extractCharCode(It);if(/(?:\s)/.test(It)&&(vt=Rt,yt=ft,xt++),It==="\r"||It===`
`){at.push(ft),ot.push(-1),gt=Math.max(gt,ft),++mt,++bt,nt.x=0,nt.y+=_.lineHeight,ut=null,xt=0;continue}const Ot=_.chars[Mt];if(!Ot)continue;ut&&Ot.kerning[ut]&&(nt.x+=Ot.kerning[ut]);const $t=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point$1};$t.texture=Ot.texture,$t.line=mt,$t.charCode=Mt,$t.position.x=Math.round(nt.x+Ot.xOffset+this._letterSpacing/2),$t.position.y=Math.round(nt.y+Ot.yOffset),$t.prevSpaces=xt,it.push($t),ft=$t.position.x+Math.max(Ot.xAdvance-Ot.xOffset,Ot.texture.orig.width),nt.x+=Ot.xAdvance+this._letterSpacing,_t=Math.max(_t,Ot.yOffset+Ot.texture.height),ut=Mt,vt!==-1&&ht>0&&nt.x>ht&&(++bt,removeItems(it,1+vt-bt,1+Rt-vt),Rt=vt,vt=-1,at.push(yt),ot.push(it.length>0?it[it.length-1].prevSpaces:0),gt=Math.max(gt,yt),mt++,nt.x=0,nt.y+=_.lineHeight,ut=null,xt=0)}const St=dt[dt.length-1];St!=="\r"&&St!==`
`&&(/(?:\s)/.test(St)&&(ft=yt),at.push(ft),gt=Math.max(gt,ft),ot.push(-1));const Tt=[];for(let Rt=0;Rt<=mt;Rt++){let It=0;this._align==="right"?It=gt-at[Rt]:this._align==="center"?It=(gt-at[Rt])/2:this._align==="justify"&&(It=ot[Rt]<0?0:(gt-at[Rt])/ot[Rt]),Tt.push(It)}const wt=it.length,Ct={},Et=[],At=this._activePagesMeshData;ct.push(...At);for(let Rt=0;Rt<wt;Rt++){const It=it[Rt].texture,Mt=It.baseTexture.uid;if(!Ct[Mt]){let Ot=ct.pop();if(!Ot){const Lt=new MeshGeometry;let kt,Nt;_.distanceFieldType==="none"?(kt=new MeshMaterial(Texture.EMPTY),Nt=BLEND_MODES.NORMAL):(kt=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),Nt=BLEND_MODES.NORMAL_NPM);const Vt=new Mesh(Lt,kt);Vt.blendMode=Nt,Ot={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Vt,vertices:null,uvs:null,indices:null}}Ot.index=0,Ot.indexCount=0,Ot.vertexCount=0,Ot.uvsCount=0,Ot.total=0;const{_textureCache:$t}=this;$t[Mt]=$t[Mt]||new Texture(It.baseTexture),Ot.mesh.texture=$t[Mt],Ot.mesh.tint=this._tintColor.value,Et.push(Ot),Ct[Mt]=Ot}Ct[Mt].total++}for(let Rt=0;Rt<At.length;Rt++)Et.includes(At[Rt])||this.removeChild(At[Rt].mesh);for(let Rt=0;Rt<Et.length;Rt++)Et[Rt].mesh.parent!==this&&this.addChild(Et[Rt].mesh);this._activePagesMeshData=Et;for(const Rt in Ct){const It=Ct[Rt],Mt=It.total;if(!(((Pt=It.indices)==null?void 0:Pt.length)>6*Mt)||It.vertices.length<Mesh.BATCHABLE_SIZE*2)It.vertices=new Float32Array(4*2*Mt),It.uvs=new Float32Array(4*2*Mt),It.indices=new Uint16Array(6*Mt);else{const Ot=It.total,$t=It.vertices;for(let Lt=Ot*4*2;Lt<$t.length;Lt++)$t[Lt]=0}It.mesh.size=6*Mt}for(let Rt=0;Rt<wt;Rt++){const It=it[Rt];let Mt=It.position.x+Tt[It.line]*(this._align==="justify"?It.prevSpaces:1);this._roundPixels&&(Mt=Math.round(Mt));const Ot=Mt*tt,$t=It.position.y*tt,Lt=It.texture,kt=Ct[Lt.baseTexture.uid],Nt=Lt.frame,Vt=Lt._uvs,zt=kt.index++;kt.indices[zt*6+0]=0+zt*4,kt.indices[zt*6+1]=1+zt*4,kt.indices[zt*6+2]=2+zt*4,kt.indices[zt*6+3]=0+zt*4,kt.indices[zt*6+4]=2+zt*4,kt.indices[zt*6+5]=3+zt*4,kt.vertices[zt*8+0]=Ot,kt.vertices[zt*8+1]=$t,kt.vertices[zt*8+2]=Ot+Nt.width*tt,kt.vertices[zt*8+3]=$t,kt.vertices[zt*8+4]=Ot+Nt.width*tt,kt.vertices[zt*8+5]=$t+Nt.height*tt,kt.vertices[zt*8+6]=Ot,kt.vertices[zt*8+7]=$t+Nt.height*tt,kt.uvs[zt*8+0]=Vt.x0,kt.uvs[zt*8+1]=Vt.y0,kt.uvs[zt*8+2]=Vt.x1,kt.uvs[zt*8+3]=Vt.y1,kt.uvs[zt*8+4]=Vt.x2,kt.uvs[zt*8+5]=Vt.y2,kt.uvs[zt*8+6]=Vt.x3,kt.uvs[zt*8+7]=Vt.y3}this._textWidth=gt*tt,this._textHeight=(nt.y+_.lineHeight)*tt;for(const Rt in Ct){const It=Ct[Rt];if(this.anchor.x!==0||this.anchor.y!==0){let Lt=0;const kt=this._textWidth*this.anchor.x,Nt=this._textHeight*this.anchor.y;for(let Vt=0;Vt<It.total;Vt++)It.vertices[Lt++]-=kt,It.vertices[Lt++]-=Nt,It.vertices[Lt++]-=kt,It.vertices[Lt++]-=Nt,It.vertices[Lt++]-=kt,It.vertices[Lt++]-=Nt,It.vertices[Lt++]-=kt,It.vertices[Lt++]-=Nt}this._maxLineHeight=_t*tt;const Mt=It.mesh.geometry.getBuffer("aVertexPosition"),Ot=It.mesh.geometry.getBuffer("aTextureCoord"),$t=It.mesh.geometry.getIndex();Mt.data=It.vertices,Ot.data=It.uvs,$t.data=It.indices,Mt.update(),Ot.update(),$t.update()}for(let Rt=0;Rt<it.length;Rt++)charRenderDataPool.push(it[Rt]);this._font=_,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0);const{distanceFieldRange:et,distanceFieldType:tt,size:nt}=BitmapFont.available[this._fontName];if(tt!=="none"){const{a:it,b:at,c:ot,d:st}=this.worldTransform,dt=Math.sqrt(it*it+at*at),ht=Math.sqrt(ot*ot+st*st),ct=(Math.abs(dt)+Math.abs(ht))/2,ut=this.fontSize/nt,ft=_._view.resolution;for(const gt of this._activePagesMeshData)gt.mesh.shader.uniforms.uFWidth=ct*et*ut*ft}super._render(_)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const _=BitmapFont.available[this._fontName];if(!_)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==_&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(_){if(this.tint!==_){this._tintColor.setValue(_);for(let et=0;et<this._activePagesMeshData.length;et++)this._activePagesMeshData[et].mesh.tint=_}}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.dirty=!0)}get fontName(){return this._fontName}set fontName(_){if(!BitmapFont.available[_])throw new Error(`Missing BitmapFont "${_}"`);this._fontName!==_&&(this._fontName=_,this.dirty=!0)}get fontSize(){return this._fontSize??BitmapFont.available[this._fontName].size}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.dirty=!0)}get anchor(){return this._anchor}set anchor(_){typeof _=="number"?this._anchor.set(_):this._anchor.copyFrom(_)}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(_){this._maxWidth!==_&&(this._maxWidth=_,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(_){_!==this._roundPixels&&(this._roundPixels=_,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}destroy(_){const{_textureCache:et}=this,tt=BitmapFont.available[this._fontName].distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;tt.push(...this._activePagesMeshData);for(const nt of this._activePagesMeshData)this.removeChild(nt.mesh);this._activePagesMeshData=[],tt.filter(nt=>et[nt.mesh.texture.baseTexture.uid]).forEach(nt=>{nt.mesh.texture=Texture.EMPTY});for(const nt in et)et[nt].destroy(),delete et[nt];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(_)}};_BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const validExtensions=[".xml",".fnt"],loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},name:"loadBitmapFont",test(_e){return validExtensions.includes(path.extname(_e).toLowerCase())},async testParse(_e){return TextFormat.test(_e)||XMLStringFormat.test(_e)},async parse(_e,_,et){const tt=TextFormat.test(_e)?TextFormat.parse(_e):XMLStringFormat.parse(_e),{src:nt}=_,{page:it}=tt,at=[];for(let dt=0;dt<it.length;++dt){const ht=it[dt].file;let ct=path.join(path.dirname(nt),ht);ct=copySearchParams(ct,nt),at.push(ct)}const ot=await et.load(at),st=at.map(dt=>ot[dt]);return BitmapFont.install(tt,st,!0)},async load(_e,_){return(await settings.ADAPTER.fetch(_e)).text()},unload(_e){_e.destroy()}};extensions$2.add(loadBitmapFont);const _HTMLTextStyle=class $a extends TextStyle{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(_){return new $a(Object.keys($a.defaultOptions).reduce((et,tt)=>({...et,[tt]:_[tt]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(_=>{URL.revokeObjectURL(_.src),_.refs--,_.refs===0&&(_.fontFace&&document.fonts.delete(_.fontFace),delete $a.availableFonts[_.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(_,et={}){const{availableFonts:tt}=$a;if(tt[_]){const nt=tt[_];return this._fonts.push(nt),nt.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return settings.ADAPTER.fetch(_).then(nt=>nt.blob()).then(async nt=>new Promise((it,at)=>{const ot=URL.createObjectURL(nt),st=new FileReader;st.onload=()=>it([ot,st.result]),st.onerror=at,st.readAsDataURL(nt)})).then(async([nt,it])=>{const at=Object.assign({family:path.basename(_,path.extname(_)),weight:"normal",style:"normal",display:"auto",src:nt,dataSrc:it,refs:1,originalUrl:_,fontFace:null},et);tt[_]=at,this._fonts.push(at),this.styleID++;const ot=new FontFace(at.family,`url(${at.src})`,{weight:at.weight,style:at.style,display:at.display});at.fontFace=ot,await ot.load(),document.fonts.add(ot),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(..._){const et=_.filter(tt=>!this._overrides.includes(tt));et.length>0&&(this._overrides.push(...et),this.styleID++)}removeOverride(..._){const et=_.filter(tt=>this._overrides.includes(tt));et.length>0&&(this._overrides=this._overrides.filter(tt=>!et.includes(tt)),this.styleID++)}toCSS(_){return[`transform: scale(${_})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((_,et)=>`${_}
            @font-face {
                font-family: "${et.family}";
                src: url('${et.dataSrc}');
                font-weight: ${et.weight};
                font-style: ${et.style};
                font-display: ${et.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(_){this._stylesheet!==_&&(this._stylesheet=_,this.styleID++)}normalizeColor(_){return Array.isArray(_)&&(_=rgb2hex(_)),typeof _=="number"?hex2string(_):_}dropShadowToCSS(){let _=this.normalizeColor(this.dropShadowColor);const et=this.dropShadowAlpha,tt=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),nt=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);_.startsWith("#")&&et<1&&(_+=(et*255|0).toString(16).padStart(2,"0"));const it=`${tt}px ${nt}px`;return this.dropShadowBlur>0?`text-shadow: ${it} ${this.dropShadowBlur}px ${_}`:`text-shadow: ${it} ${_}`}reset(){Object.assign(this,$a.defaultOptions)}onBeforeDraw(){const{fontsDirty:_}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&_?new Promise(et=>setTimeout(et,100)):Promise.resolve()}get isSafari(){const{userAgent:_}=settings.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(_)}set fillGradientStops(_){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(_){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(_){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(_){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(_){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(_){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(_){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};_HTMLTextStyle.availableFonts={},_HTMLTextStyle.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let HTMLTextStyle=_HTMLTextStyle;const _HTMLText=class eo extends Sprite{constructor(_="",et={}){super(Texture.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const tt=new Image,nt=Texture.from(tt,{scaleMode:settings.SCALE_MODE,resourceOptions:{autoLoad:!1}});nt.orig=new Rectangle,nt.trim=new Rectangle,this.texture=nt;const it="http://www.w3.org/2000/svg",at="http://www.w3.org/1999/xhtml",ot=document.createElementNS(it,"svg"),st=document.createElementNS(it,"foreignObject"),dt=document.createElementNS(at,"div"),ht=document.createElementNS(at,"style");st.setAttribute("width","10000"),st.setAttribute("height","10000"),st.style.overflow="hidden",ot.appendChild(st),this.maxWidth=eo.defaultMaxWidth,this.maxHeight=eo.defaultMaxHeight,this._domElement=dt,this._styleElement=ht,this._svgRoot=ot,this._foreignObject=st,this._foreignObject.appendChild(ht),this._foreignObject.appendChild(dt),this._image=tt,this._loadImage=new Image,this._autoResolution=eo.defaultAutoResolution,this._resolution=eo.defaultResolution??settings.RESOLUTION,this.text=_,this.style=et}measureText(_){var ht,ct;const{text:et,style:tt,resolution:nt}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},_);Object.assign(this._domElement,{innerHTML:et,style:tt.toCSS(nt)}),this._styleElement.textContent=tt.toGlobalCSS(),document.body.appendChild(this._svgRoot);const it=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:at,height:ot}=it;(at>this.maxWidth||ot>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const st=Math.min(this.maxWidth,Math.ceil(at)),dt=Math.min(this.maxHeight,Math.ceil(ot));return this._svgRoot.setAttribute("width",st.toString()),this._svgRoot.setAttribute("height",dt.toString()),et!==this._text&&(this._domElement.innerHTML=this._text),tt!==this._style&&(Object.assign(this._domElement,{style:(ht=this._style)==null?void 0:ht.toCSS(nt)}),this._styleElement.textContent=(ct=this._style)==null?void 0:ct.toGlobalCSS()),{width:st+tt.padding*2,height:dt+tt.padding*2}}async updateText(_=!0){const{style:et,_image:tt,_loadImage:nt}=this;if(this.localStyleID!==et.styleID&&(this.dirty=!0,this.localStyleID=et.styleID),!this.dirty&&_)return;const{width:it,height:at}=this.measureText();tt.width=nt.width=Math.ceil(Math.max(1,it)),tt.height=nt.height=Math.ceil(Math.max(1,at)),this._updateID++;const ot=this._updateID;await new Promise(st=>{nt.onload=async()=>{if(ot<this._updateID){st();return}await et.onBeforeDraw(),tt.src=nt.src,nt.onload=null,nt.src="",this.updateTexture(),st()};const dt=new XMLSerializer().serializeToString(this._svgRoot);nt.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(dt)}`})}get source(){return this._image}updateTexture(){const{style:_,texture:et,_image:tt,resolution:nt}=this,{padding:it}=_,{baseTexture:at}=et;et.trim.width=et._frame.width=tt.width/nt,et.trim.height=et._frame.height=tt.height/nt,et.trim.x=-it,et.trim.y=-it,et.orig.width=et._frame.width-it*2,et.orig.height=et._frame.height-it*2,this._onTextureUpdate(),at.setRealSize(tt.width,tt.height,nt),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}_renderCanvas(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(_)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds(_)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(_){var tt,nt,it,at,ot;typeof _=="boolean"&&(_={children:_}),_=Object.assign({},eo.defaultDestroyOptions,_),super.destroy(_);const et=null;this.ownsStyle&&((tt=this._style)==null||tt.cleanFonts()),this._style=et,(nt=this._svgRoot)==null||nt.remove(),this._svgRoot=et,(it=this._domElement)==null||it.remove(),this._domElement=et,(at=this._foreignObject)==null||at.remove(),this._foreignObject=et,(ot=this._styleElement)==null||ot.remove(),this._styleElement=et,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=et,this._image.src="",this._image=et}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(_){this.updateText(!0);const et=sign(this.scale.x)||1;this.scale.x=et*_/this._image.width/this.resolution,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(_){this.updateText(!0);const et=sign(this.scale.y)||1;this.scale.y=et*_/this._image.height/this.resolution,this._height=_}get style(){return this._style}set style(_){this._style!==_&&(_=_||{},_ instanceof HTMLTextStyle?(this.ownsStyle=!1,this._style=_):_ instanceof TextStyle?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=HTMLTextStyle.from(_)):(this.ownsStyle=!0,this._style=new HTMLTextStyle(_)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(_){_=String(_===""||_===null||_===void 0?" ":_),_=this.sanitiseText(_),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}sanitiseText(_){return _.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};_HTMLText.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_HTMLText.defaultMaxWidth=2024,_HTMLText.defaultMaxHeight=2024,_HTMLText.defaultAutoResolution=!0;var __defProp=Object.defineProperty,__pow=Math.pow,__defNormalProp=(_e,_,et)=>_ in _e?__defProp(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et,__publicField=(_e,_,et)=>(__defNormalProp(_e,typeof _!="symbol"?_+"":_,et),et),__async=(_e,_,et)=>new Promise((tt,nt)=>{var it=st=>{try{ot(et.next(st))}catch(dt){nt(dt)}},at=st=>{try{ot(et.throw(st))}catch(dt){nt(dt)}},ot=st=>st.done?tt(st.value):Promise.resolve(st.value).then(it,at);ot((et=et.apply(_e,_)).next())});const LOGICAL_WIDTH=2,LOGICAL_HEIGHT=2;var CubismConfig;(_e=>{_e.supportMoreMaskDivisions=!0,_e.setOpacityFromMotion=!1})(CubismConfig||(CubismConfig={}));const LOG_LEVEL_VERBOSE=0,LOG_LEVEL_WARNING=1,LOG_LEVEL_ERROR=2,LOG_LEVEL_NONE=999,config$1={LOG_LEVEL_VERBOSE,LOG_LEVEL_WARNING,LOG_LEVEL_ERROR,LOG_LEVEL_NONE,logLevel:LOG_LEVEL_WARNING,sound:!0,motionSync:!0,motionFadingDuration:500,idleMotionFadingDuration:2e3,expressionFadingDuration:500,preserveExpressionOnMotion:!0,cubism4:CubismConfig},logger={log(_e,..._){},warn(_e,..._){console.warn(`[${_e}]`,..._)},error(_e,..._){console.error(`[${_e}]`,..._)}};function clamp$1(_e,_,et){return _e<_?_:_e>et?et:_e}function rand(_e,_){return Math.random()*(_-_e)+_e}function copyProperty(_e,_,et,tt,nt){const it=_[tt];it!==null&&typeof it===_e&&(et[nt]=it)}function copyArray(_e,_,et,tt,nt){const it=_[tt];Array.isArray(it)&&(et[nt]=it.filter(at=>at!==null&&typeof at===_e))}function applyMixins(_e,_){_.forEach(et=>{Object.getOwnPropertyNames(et.prototype).forEach(tt=>{tt!=="constructor"&&Object.defineProperty(_e.prototype,tt,Object.getOwnPropertyDescriptor(et.prototype,tt))})})}function folderName(_e){let _=_e.lastIndexOf("/");return _!=-1&&(_e=_e.slice(0,_)),_=_e.lastIndexOf("/"),_!==-1&&(_e=_e.slice(_+1)),_e}function remove$1(_e,_){const et=_e.indexOf(_);et!==-1&&_e.splice(et,1)}class ExpressionManager extends EventEmitter{constructor(_,et){super(),__publicField(this,"tag"),__publicField(this,"settings"),__publicField(this,"expressions",[]),__publicField(this,"defaultExpression"),__publicField(this,"currentExpression"),__publicField(this,"reserveExpressionIndex",-1),__publicField(this,"destroyed",!1),this.settings=_,this.tag=`ExpressionManager(${_.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(_){return __async(this,null,function*(){if(!this.definitions[_]){logger.warn(this.tag,`Undefined expression at [${_}]`);return}if(this.expressions[_]===null){logger.warn(this.tag,`Cannot set expression at [${_}] because it's already failed in loading.`);return}if(this.expressions[_])return this.expressions[_];const et=yield this._loadExpression(_);return this.expressions[_]=et,et})}_loadExpression(_){throw new Error("Not implemented.")}setRandomExpression(){return __async(this,null,function*(){if(this.definitions.length){const _=[];for(let et=0;et<this.definitions.length;et++)this.expressions[et]!==null&&this.expressions[et]!==this.currentExpression&&et!==this.reserveExpressionIndex&&_.push(et);if(_.length){const et=Math.floor(Math.random()*_.length);return this.setExpression(et)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(_){return __async(this,null,function*(){if(typeof _!="number"&&(_=this.getExpressionIndex(_)),!(_>-1&&_<this.definitions.length)||_===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=_;const et=yield this.loadExpression(_);return!et||this.reserveExpressionIndex!==_?!1:(this.reserveExpressionIndex=-1,this.currentExpression=et,this._setExpression(et),!0)})}update(_,et){return this.isFinished()?!1:this.updateParameters(_,et)}destroy(){this.destroyed=!0,this.emit("destroy");const _=this;_.definitions=void 0,_.expressions=void 0}}const EPSILON$5=.01,MAX_SPEED=40/7.5,ACCELERATION_TIME=1/(.15*1e3);class FocusController{constructor(){__publicField(this,"targetX",0),__publicField(this,"targetY",0),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"vx",0),__publicField(this,"vy",0)}focus(_,et,tt=!1){this.targetX=clamp$1(_,-1,1),this.targetY=clamp$1(et,-1,1),tt&&(this.x=this.targetX,this.y=this.targetY)}update(_){const et=this.targetX-this.x,tt=this.targetY-this.y;if(Math.abs(et)<EPSILON$5&&Math.abs(tt)<EPSILON$5)return;const nt=Math.sqrt(__pow(et,2)+__pow(tt,2)),it=MAX_SPEED/(1e3/_);let at=it*(et/nt)-this.vx,ot=it*(tt/nt)-this.vy;const st=Math.sqrt(__pow(at,2)+__pow(ot,2)),dt=it*ACCELERATION_TIME*_;st>dt&&(at*=dt/st,ot*=dt/st),this.vx+=at,this.vy+=ot;const ht=Math.sqrt(__pow(this.vx,2)+__pow(this.vy,2)),ct=.5*(Math.sqrt(__pow(dt,2)+8*dt*nt)-dt);ht>ct&&(this.vx*=ct/ht,this.vy*=ct/ht),this.x+=this.vx,this.y+=this.vy}}class ModelSettings{constructor(_){__publicField(this,"json"),__publicField(this,"name"),__publicField(this,"url"),__publicField(this,"pose"),__publicField(this,"physics"),this.json=_;const et=_.url;if(typeof et!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=et,this.name=folderName(this.url)}resolveURL(_){return url.resolve(this.url,_)}replaceFiles(_){this.moc=_(this.moc,"moc"),this.pose!==void 0&&(this.pose=_(this.pose,"pose")),this.physics!==void 0&&(this.physics=_(this.physics,"physics"));for(let et=0;et<this.textures.length;et++)this.textures[et]=_(this.textures[et],`textures[${et}]`)}getDefinedFiles(){const _=[];return this.replaceFiles(et=>(_.push(et),et)),_}validateFiles(_){const et=(it,at)=>{const ot=this.resolveURL(it);if(!_.includes(ot)){if(at)throw new Error(`File "${it}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(it=>et(it,!0)),this.getDefinedFiles().filter(it=>et(it,!1))}}var MotionPriority=(_e=>(_e[_e.NONE=0]="NONE",_e[_e.IDLE=1]="IDLE",_e[_e.NORMAL=2]="NORMAL",_e[_e.FORCE=3]="FORCE",_e))(MotionPriority||{});class MotionState{constructor(){__publicField(this,"tag"),__publicField(this,"debug",!1),__publicField(this,"currentPriority",0),__publicField(this,"reservePriority",0),__publicField(this,"currentGroup"),__publicField(this,"currentIndex"),__publicField(this,"reservedGroup"),__publicField(this,"reservedIndex"),__publicField(this,"reservedIdleGroup"),__publicField(this,"reservedIdleIndex")}reserve(_,et,tt){if(tt<=0)return logger.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(_===this.currentGroup&&et===this.currentIndex)return logger.log(this.tag,"Motion is already playing.",this.dump(_,et)),!1;if(_===this.reservedGroup&&et===this.reservedIndex||_===this.reservedIdleGroup&&et===this.reservedIdleIndex)return logger.log(this.tag,"Motion is already reserved.",this.dump(_,et)),!1;if(tt===1){if(this.currentPriority!==0)return logger.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(_,et)),!1;if(this.reservedIdleGroup!==void 0)return logger.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(_,et)),!1;this.setReservedIdle(_,et)}else{if(tt<3){if(tt<=this.currentPriority)return logger.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(_,et)),!1;if(tt<=this.reservePriority)return logger.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(_,et)),!1}this.setReserved(_,et,tt)}return!0}start(_,et,tt,nt){if(nt===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return logger.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(et,tt)),!1}else{if(et!==this.reservedGroup||tt!==this.reservedIndex)return logger.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(et,tt)),!1;this.setReserved(void 0,void 0,0)}return _?(this.setCurrent(et,tt,nt),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(_,et,tt){this.currentPriority=tt,this.currentGroup=_,this.currentIndex=et}setReserved(_,et,tt){this.reservePriority=tt,this.reservedGroup=_,this.reservedIndex=et}setReservedIdle(_,et){this.reservedIdleGroup=_,this.reservedIdleIndex=et}isActive(_,et){return _===this.currentGroup&&et===this.currentIndex||_===this.reservedGroup&&et===this.reservedIndex||_===this.reservedIdleGroup&&et===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!1}dump(_,et){if(this.debug){const tt=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${_}", index = ${et}
`+tt.map(nt=>"["+nt+"] "+this[nt]).join(`
`)}return""}}const TAG$2="SoundManager",VOLUME=.5;class SoundManager{static get volume(){return this._volume}static set volume(_){this._volume=(_>1?1:_<0?0:_)||0,this.audios.forEach(et=>et.volume=this._volume)}static add(_,et,tt,nt){const it=new Audio(_);return it.volume=this._volume,it.preload="auto",it.crossOrigin=nt,it.addEventListener("ended",()=>{this.dispose(it),et==null||et()}),it.addEventListener("error",at=>{this.dispose(it),logger.warn(TAG$2,`Error occurred on "${_}"`,at.error),tt==null||tt(at.error)}),this.audios.push(it),it}static play(_){return new Promise((et,tt)=>{var nt;(nt=_.play())==null||nt.catch(it=>{_.dispatchEvent(new ErrorEvent("error",{error:it})),tt(it)}),_.readyState===_.HAVE_ENOUGH_DATA?et():_.addEventListener("canplaythrough",et)})}static addContext(_){const et=new AudioContext;return this.contexts.push(et),et}static addAnalyzer(_,et){const tt=et.createMediaElementSource(_),nt=et.createAnalyser();return nt.fftSize=256,nt.minDecibels=-90,nt.maxDecibels=-10,nt.smoothingTimeConstant=.85,tt.connect(nt),nt.connect(et.destination),this.analysers.push(nt),nt}static analyze(_){if(_!=null){const et=new Float32Array(_.fftSize);let tt=0;_.getFloatTimeDomainData(et);for(const nt of et)tt+=nt*nt;return parseFloat(Math.sqrt(tt/et.length*20).toFixed(1))}else return parseFloat(Math.random().toFixed(1))}static dispose(_){_.pause(),_.removeAttribute("src"),remove$1(this.audios,_)}static destroy(){for(let _=this.contexts.length-1;_>=0;_--)this.contexts[_].close();for(let _=this.audios.length-1;_>=0;_--)this.dispose(this.audios[_])}}__publicField(SoundManager,"audios",[]);__publicField(SoundManager,"analysers",[]);__publicField(SoundManager,"contexts",[]);__publicField(SoundManager,"_volume",VOLUME);var MotionPreloadStrategy=(_e=>(_e.ALL="ALL",_e.IDLE="IDLE",_e.NONE="NONE",_e))(MotionPreloadStrategy||{});class MotionManager extends EventEmitter{constructor(_,et){super(),__publicField(this,"tag"),__publicField(this,"settings"),__publicField(this,"motionGroups",{}),__publicField(this,"state",new MotionState),__publicField(this,"currentAudio"),__publicField(this,"currentAnalyzer"),__publicField(this,"currentContext"),__publicField(this,"playing",!1),__publicField(this,"destroyed",!1),this.settings=_,this.tag=`MotionManager(${_.name})`,this.state.tag=this.tag}init(_){_!=null&&_.idleMotionGroup&&(this.groups.idle=_.idleMotionGroup),this.setupMotions(_),this.stopAllMotions()}setupMotions(_){for(const tt of Object.keys(this.definitions))this.motionGroups[tt]=[];let et;switch(_==null?void 0:_.motionPreload){case"NONE":return;case"ALL":et=Object.keys(this.definitions);break;case"IDLE":default:et=[this.groups.idle];break}for(const tt of et)if(this.definitions[tt])for(let nt=0;nt<this.definitions[tt].length;nt++)this.loadMotion(tt,nt).then()}loadMotion(_,et){return __async(this,null,function*(){var tt;if(!((tt=this.definitions[_])!=null&&tt[et])){logger.warn(this.tag,`Undefined motion at "${_}"[${et}]`);return}if(this.motionGroups[_][et]===null){logger.warn(this.tag,`Cannot start motion at "${_}"[${et}] because it's already failed in loading.`);return}if(this.motionGroups[_][et])return this.motionGroups[_][et];const nt=yield this._loadMotion(_,et);if(!this.destroyed)return this.motionGroups[_][et]=nt??null,nt})}_loadMotion(_,et){throw new Error("Not implemented.")}speak(_){return __async(this,arguments,function*(et,{volume:tt=VOLUME,expression:nt,resetExpression:it=!0,crossOrigin:at,onFinish:ot,onError:st}={}){let dt,ht,ct;if(this.currentAudio&&!this.currentAudio.ended)return!1;let ut;const ft=et&&et.startsWith("data:");if(console.log(ot),et&&!ft){const mt=document.createElement("a");mt.href=et,et=mt.href,ut=et}else ut="data:audio/";const gt=et;if(gt)try{dt=SoundManager.add(gt,(mt=this)=>{console.log("Audio finished playing"),ot==null||ot(),it&&nt&&mt.expressionManager&&mt.expressionManager.resetExpression(),mt.currentAudio=void 0},(mt,vt=this)=>{console.log("Error during audio playback:",mt),st==null||st(mt),it&&nt&&vt.expressionManager&&vt.expressionManager.resetExpression(),vt.currentAudio=void 0},at),this.currentAudio=dt,SoundManager.volume=tt,ct=SoundManager.addContext(this.currentAudio),this.currentContext=ct,ht=SoundManager.addAnalyzer(this.currentAudio,this.currentContext),this.currentAnalyzer=ht}catch(mt){return logger.warn(this.tag,"Failed to create audio",ut,mt),!1}if(dt){let mt=!0;if(yield SoundManager.play(dt).catch(yt=>{logger.warn(this.tag,"Failed to play audio",dt.src,yt),mt=!1}),!mt)return!1}return this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),nt&&this.expressionManager&&this.expressionManager.setExpression(nt),this.playing=!0,!0})}startMotion(_,et){return __async(this,arguments,function*(tt,nt,it=MotionPriority.NORMAL,{sound:at=void 0,volume:ot=VOLUME,expression:st=void 0,resetExpression:dt=!0,crossOrigin:ht,onFinish:ct,onError:ut}={}){var ft;if(!this.state.reserve(tt,nt,it)||this.currentAudio&&!this.currentAudio.ended&&it!=MotionPriority.FORCE)return!1;const gt=(ft=this.definitions[tt])==null?void 0:ft[nt];if(!gt)return!1;this.currentAudio&&SoundManager.dispose(this.currentAudio);let mt,vt,yt,bt;const _t=at&&at.startsWith("data:");if(at&&!_t){const Tt=document.createElement("a");Tt.href=at,at=Tt.href,bt=at}else bt=this.getSoundFile(gt),bt&&(bt=this.settings.resolveURL(bt));const xt=bt;if(xt)try{mt=SoundManager.add(xt,(Tt=this)=>{console.log("Audio finished playing"),ct==null||ct(),console.log(ct),dt&&st&&Tt.expressionManager&&Tt.expressionManager.resetExpression(),Tt.currentAudio=void 0},(Tt,wt=this)=>{console.log("Error during audio playback:",Tt),ut==null||ut(Tt),dt&&st&&wt.expressionManager&&wt.expressionManager.resetExpression(),wt.currentAudio=void 0},ht),this.currentAudio=mt,SoundManager.volume=ot,yt=SoundManager.addContext(this.currentAudio),this.currentContext=yt,vt=SoundManager.addAnalyzer(this.currentAudio,this.currentContext),this.currentAnalyzer=vt}catch(Tt){logger.warn(this.tag,"Failed to create audio",bt,Tt)}const St=yield this.loadMotion(tt,nt);return mt&&(yield SoundManager.play(mt).catch(wt=>logger.warn(this.tag,"Failed to play audio",mt.src,wt))),this.state.start(St,tt,nt,it)?(this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),logger.log(this.tag,"Start motion:",this.getMotionName(gt)),this.emit("motionStart",tt,nt,mt),st&&this.expressionManager&&this.state.shouldOverrideExpression()&&this.expressionManager.setExpression(st),this.playing=!0,this._startMotion(St),!0):(mt&&(SoundManager.dispose(mt),this.currentAudio=void 0),!1)})}startRandomMotion(_,et){return __async(this,arguments,function*(tt,nt,{sound:it,volume:at=VOLUME,expression:ot,resetExpression:st=!0,crossOrigin:dt,onFinish:ht,onError:ct}={}){const ut=this.definitions[tt];if(ut!=null&&ut.length){const ft=[];for(let gt=0;gt<ut.length;gt++)this.motionGroups[tt][gt]!==null&&!this.state.isActive(tt,gt)&&ft.push(gt);if(ft.length){const gt=ft[Math.floor(Math.random()*ft.length)];return this.startMotion(tt,gt,nt,{sound:it,volume:at,expression:ot,resetExpression:st,crossOrigin:dt,onFinish:ht,onError:ct})}}return!1})}stopSpeaking(){this.currentAudio&&(SoundManager.dispose(this.currentAudio),this.currentAudio=void 0)}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.stopSpeaking()}update(_,et){var tt;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((tt=this.expressionManager)==null||tt.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,MotionPriority.IDLE)),this.updateParameters(_,et)}mouthSync(){return this.currentAnalyzer?SoundManager.analyze(this.currentAnalyzer):0}destroy(){var _;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(_=this.expressionManager)==null||_.destroy();const et=this;et.definitions=void 0,et.motionGroups=void 0}}const tempBounds={x:0,y:0,width:0,height:0};class InternalModel extends EventEmitter{constructor(){super(...arguments),__publicField(this,"focusController",new FocusController),__publicField(this,"pose"),__publicField(this,"physics"),__publicField(this,"originalWidth",0),__publicField(this,"originalHeight",0),__publicField(this,"width",0),__publicField(this,"height",0),__publicField(this,"localTransform",new Matrix),__publicField(this,"drawingMatrix",new Matrix),__publicField(this,"hitAreas",{}),__publicField(this,"textureFlipY",!1),__publicField(this,"viewport",[0,0,0,0]),__publicField(this,"destroyed",!1)}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const _=this,et=this.getSize();_.originalWidth=et[0],_.originalHeight=et[1];const tt=Object.assign({width:LOGICAL_WIDTH,height:LOGICAL_HEIGHT},this.getLayout());this.localTransform.scale(tt.width/LOGICAL_WIDTH,tt.height/LOGICAL_HEIGHT),_.width=this.originalWidth*this.localTransform.a,_.height=this.originalHeight*this.localTransform.d;const nt=tt.x!==void 0&&tt.x-tt.width/2||tt.centerX!==void 0&&tt.centerX||tt.left!==void 0&&tt.left-tt.width/2||tt.right!==void 0&&tt.right+tt.width/2||0,it=tt.y!==void 0&&tt.y-tt.height/2||tt.centerY!==void 0&&tt.centerY||tt.top!==void 0&&tt.top-tt.height/2||tt.bottom!==void 0&&tt.bottom+tt.height/2||0;this.localTransform.translate(this.width*nt,-this.height*it)}setupHitAreas(){const _=this.getHitAreaDefs().filter(et=>et.index>=0);for(const et of _)this.hitAreas[et.name]=et}hitTest(_,et){return Object.keys(this.hitAreas).filter(tt=>this.isHit(tt,_,et))}isHit(_,et,tt){if(!this.hitAreas[_])return!1;const nt=this.hitAreas[_].index,it=this.getDrawableBounds(nt,tempBounds);return it.x<=et&&et<=it.x+it.width&&it.y<=tt&&tt<=it.y+it.height}getDrawableBounds(_,et){const tt=this.getDrawableVertices(_);let nt=tt[0],it=tt[0],at=tt[1],ot=tt[1];for(let st=0;st<tt.length;st+=2){const dt=tt[st],ht=tt[st+1];nt=Math.min(dt,nt),it=Math.max(dt,it),at=Math.min(ht,at),ot=Math.max(ht,ot)}return et??(et={}),et.x=nt,et.y=at,et.width=it-nt,et.height=ot-at,et}updateTransform(_){this.drawingMatrix.copyFrom(_).append(this.localTransform)}update(_,et){this.focusController.update(_)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const TAG$1="XHRLoader";class NetworkError extends Error{constructor(_,et,tt,nt=!1){super(_),this.url=et,this.status=tt,this.aborted=nt}}const _XHRLoader=class on{static createXHR(_,et,tt,nt,it){const at=new XMLHttpRequest;if(on.allXhrSet.add(at),_){let ot=on.xhrMap.get(_);ot?ot.add(at):(ot=new Set([at]),on.xhrMap.set(_,ot)),_.listeners("destroy").includes(on.cancelXHRs)||_.once("destroy",on.cancelXHRs)}return at.open("GET",et),at.responseType=tt,at.onload=()=>{(at.status===200||at.status===0)&&at.response?nt(at.response):at.onerror()},at.onerror=()=>{logger.warn(TAG$1,`Failed to load resource as ${at.responseType} (Status ${at.status}): ${et}`),it(new NetworkError("Network error.",et,at.status))},at.onabort=()=>it(new NetworkError("Aborted.",et,at.status,!0)),at.onloadend=()=>{var ot;on.allXhrSet.delete(at),_&&((ot=on.xhrMap.get(_))==null||ot.delete(at))},at}static cancelXHRs(){var _;(_=on.xhrMap.get(this))==null||_.forEach(et=>{et.abort(),on.allXhrSet.delete(et)}),on.xhrMap.delete(this)}static release(){on.allXhrSet.forEach(_=>_.abort()),on.allXhrSet.clear(),on.xhrMap=new WeakMap}};__publicField(_XHRLoader,"xhrMap",new WeakMap);__publicField(_XHRLoader,"allXhrSet",new Set);__publicField(_XHRLoader,"loader",(_e,_)=>new Promise((et,tt)=>{_XHRLoader.createXHR(_e.target,_e.settings?_e.settings.resolveURL(_e.url):_e.url,_e.type,it=>{_e.result=it,et()},tt).send()}));let XHRLoader=_XHRLoader;function runMiddlewares(_e,_){let et=-1;return tt(0);function tt(nt,it){if(it)return Promise.reject(it);if(nt<=et)return Promise.reject(new Error("next() called multiple times"));et=nt;const at=_e[nt];if(!at)return Promise.resolve();try{return Promise.resolve(at(_,tt.bind(null,nt+1)))}catch(ot){return Promise.reject(ot)}}}class Live2DLoader{static load(_){return runMiddlewares(this.middlewares,_).then(()=>_.result)}}__publicField(Live2DLoader,"middlewares",[XHRLoader.loader]);function createTexture(_e,_={}){var et;const tt={resourceOptions:{crossorigin:_.crossOrigin}};if(Texture.fromURL)return Texture.fromURL(_e,tt).catch(at=>{if(at instanceof Error)throw at;const ot=new Error("Texture loading error");throw ot.event=at,ot});tt.resourceOptions.autoLoad=!1;const nt=Texture.from(_e,tt);if(nt.baseTexture.valid)return Promise.resolve(nt);const it=nt.baseTexture.resource;return(et=it._live2d_load)!=null||(it._live2d_load=new Promise((at,ot)=>{const st=dt=>{it.source.removeEventListener("error",st);const ht=new Error("Texture loading error");ht.event=dt,ot(ht)};it.source.addEventListener("error",st),it.load().then(()=>at(nt)).catch(st)})),it._live2d_load}function noop$3(){}const TAG="Live2DFactory",urlToJSON=(_e,_)=>__async(void 0,null,function*(){if(typeof _e.source=="string"){const et=yield Live2DLoader.load({url:_e.source,type:"json",target:_e.live2dModel});et.url=_e.source,_e.source=et,_e.live2dModel.emit("settingsJSONLoaded",et)}return _()}),jsonToSettings=(_e,_)=>__async(void 0,null,function*(){if(_e.source instanceof ModelSettings)return _e.settings=_e.source,_();if(typeof _e.source=="object"){const et=Live2DFactory.findRuntime(_e.source);if(et){const tt=et.createModelSettings(_e.source);return _e.settings=tt,_e.live2dModel.emit("settingsLoaded",tt),_()}}throw new TypeError("Unknown settings format.")}),waitUntilReady=(_e,_)=>{if(_e.settings){const et=Live2DFactory.findRuntime(_e.settings);if(et)return et.ready().then(_)}return _()},setupOptionals=(_e,_)=>__async(void 0,null,function*(){yield _();const et=_e.internalModel;if(et){const tt=_e.settings,nt=Live2DFactory.findRuntime(tt);if(nt){const it=[];tt.pose&&it.push(Live2DLoader.load({settings:tt,url:tt.pose,type:"json",target:et}).then(at=>{et.pose=nt.createPose(et.coreModel,at),_e.live2dModel.emit("poseLoaded",et.pose)}).catch(at=>{_e.live2dModel.emit("poseLoadError",at),logger.warn(TAG,"Failed to load pose.",at)})),tt.physics&&it.push(Live2DLoader.load({settings:tt,url:tt.physics,type:"json",target:et}).then(at=>{et.physics=nt.createPhysics(et.coreModel,at),_e.live2dModel.emit("physicsLoaded",et.physics)}).catch(at=>{_e.live2dModel.emit("physicsLoadError",at),logger.warn(TAG,"Failed to load physics.",at)})),it.length&&(yield Promise.all(it))}}}),setupEssentials=(_e,_)=>__async(void 0,null,function*(){if(_e.settings){const et=_e.live2dModel,tt=Promise.all(_e.settings.textures.map(nt=>{const it=_e.settings.resolveURL(nt);return createTexture(it,{crossOrigin:_e.options.crossOrigin})}));if(tt.catch(noop$3),yield _(),_e.internalModel)et.internalModel=_e.internalModel,et.emit("modelLoaded",_e.internalModel);else throw new TypeError("Missing internal model.");et.textures=yield tt,et.emit("textureLoaded",et.textures)}else throw new TypeError("Missing settings.")}),createInternalModel=(_e,_)=>__async(void 0,null,function*(){const et=_e.settings;if(et instanceof ModelSettings){const tt=Live2DFactory.findRuntime(et);if(!tt)throw new TypeError("Unknown model settings.");const nt=yield Live2DLoader.load({settings:et,url:et.moc,type:"arraybuffer",target:_e.live2dModel});if(!tt.isValidMoc(nt))throw new Error("Invalid moc data");const it=tt.createCoreModel(nt);return _e.internalModel=tt.createInternalModel(it,et,_e.options),_()}throw new TypeError("Missing settings.")}),_ZipLoader=class to{static unzip(_,et){return __async(this,null,function*(){const tt=yield to.getFilePaths(_),nt=[];for(const at of et.getDefinedFiles()){const ot=decodeURI(url.resolve(et.url,at));tt.includes(ot)&&nt.push(ot)}const it=yield to.getFiles(_,nt);for(let at=0;at<it.length;at++){const ot=nt[at],st=it[at];Object.defineProperty(st,"webkitRelativePath",{value:ot})}return it})}static createSettings(_){return __async(this,null,function*(){const tt=(yield to.getFilePaths(_)).find(ot=>ot.endsWith("model.json")||ot.endsWith("model3.json"));if(!tt)throw new Error("Settings file not found");const nt=yield to.readText(_,tt);if(!nt)throw new Error("Empty settings file: "+tt);const it=JSON.parse(nt);it.url=tt;const at=to.live2dFactory.findRuntime(it);if(!at)throw new Error("Unknown settings JSON");return at.createModelSettings(it)})}static zipReader(_,et){return __async(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(_){return __async(this,null,function*(){throw new Error("Not implemented")})}static getFiles(_,et){return __async(this,null,function*(){throw new Error("Not implemented")})}static readText(_,et){return __async(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(_){}};__publicField(_ZipLoader,"live2dFactory");__publicField(_ZipLoader,"ZIP_PROTOCOL","zip://");__publicField(_ZipLoader,"uid",0);__publicField(_ZipLoader,"factory",(_e,_)=>__async(_ZipLoader,null,function*(){const et=_e.source;let tt,nt,it;if(typeof et=="string"&&(et.endsWith(".zip")||et.startsWith(_ZipLoader.ZIP_PROTOCOL))?(et.startsWith(_ZipLoader.ZIP_PROTOCOL)?tt=et.slice(_ZipLoader.ZIP_PROTOCOL.length):tt=et,nt=yield Live2DLoader.load({url:tt,type:"blob",target:_e.live2dModel})):Array.isArray(et)&&et.length===1&&et[0]instanceof File&&et[0].name.endsWith(".zip")&&(nt=et[0],tt=URL.createObjectURL(nt),it=et.settings),nt){if(!nt.size)throw new Error("Empty zip file");const at=yield _ZipLoader.zipReader(nt,tt);it||(it=yield _ZipLoader.createSettings(at)),it._objectURL=_ZipLoader.ZIP_PROTOCOL+_ZipLoader.uid+"/"+it.url;const ot=yield _ZipLoader.unzip(at,it);ot.settings=it,_e.source=ot,tt.startsWith("blob:")&&_e.live2dModel.once("modelLoaded",st=>{st.once("destroy",function(){URL.revokeObjectURL(tt)})}),_ZipLoader.releaseReader(at)}return _()}));let ZipLoader=_ZipLoader;const _FileLoader=class Mo{static resolveURL(_,et){var tt;const nt=(tt=Mo.filesMap[_])==null?void 0:tt[et];if(nt===void 0)throw new Error("Cannot find this file from uploaded files: "+et);return nt}static upload(_,et){return __async(this,null,function*(){const tt={};for(const nt of et.getDefinedFiles()){const it=decodeURI(url.resolve(et.url,nt)),at=_.find(ot=>ot.webkitRelativePath===it);at&&(tt[nt]=URL.createObjectURL(at))}Mo.filesMap[et._objectURL]=tt})}static createSettings(_){return __async(this,null,function*(){const et=_.find(ot=>ot.name.endsWith("model.json")||ot.name.endsWith("model3.json"));if(!et)throw new TypeError("Settings file not found");const tt=yield Mo.readText(et),nt=JSON.parse(tt);nt.url=et.webkitRelativePath;const it=Live2DFactory.findRuntime(nt);if(!it)throw new Error("Unknown settings JSON");const at=it.createModelSettings(nt);return at._objectURL=URL.createObjectURL(et),at})}static readText(_){return __async(this,null,function*(){return new Promise((et,tt)=>{const nt=new FileReader;nt.onload=()=>et(nt.result),nt.onerror=tt,nt.readAsText(_,"utf8")})})}};__publicField(_FileLoader,"live2dFactory");__publicField(_FileLoader,"filesMap",{});__publicField(_FileLoader,"factory",(_e,_)=>__async(_FileLoader,null,function*(){if(Array.isArray(_e.source)&&_e.source[0]instanceof File){const et=_e.source;let tt=et.settings;if(!tt)tt=yield _FileLoader.createSettings(et);else if(!tt._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');tt.validateFiles(et.map(nt=>encodeURI(nt.webkitRelativePath))),yield _FileLoader.upload(et,tt),tt.resolveURL=function(nt){return _FileLoader.resolveURL(this._objectURL,nt)},_e.source=tt,_e.live2dModel.once("modelLoaded",nt=>{nt.once("destroy",function(){const it=this.settings._objectURL;if(URL.revokeObjectURL(it),_FileLoader.filesMap[it])for(const at of Object.values(_FileLoader.filesMap[it]))URL.revokeObjectURL(at);delete _FileLoader.filesMap[it]})})}return _()}));let FileLoader=_FileLoader;const _Live2DFactory=class en{static registerRuntime(_){en.runtimes.push(_),en.runtimes.sort((et,tt)=>tt.version-et.version)}static findRuntime(_){for(const et of en.runtimes)if(et.test(_))return et}static setupLive2DModel(_,et,tt){return __async(this,null,function*(){const nt=new Promise(ot=>_.once("textureLoaded",ot)),it=new Promise(ot=>_.once("modelLoaded",ot)),at=Promise.all([nt,it]).then(()=>_.emit("ready"));yield runMiddlewares(en.live2DModelMiddlewares,{live2dModel:_,source:et,options:tt||{}}),yield at,_.emit("load")})}static loadMotion(_,et,tt){var nt,it;const at=ot=>_.emit("motionLoadError",et,tt,ot);try{const ot=(nt=_.definitions[et])==null?void 0:nt[tt];if(!ot)return Promise.resolve(void 0);_.listeners("destroy").includes(en.releaseTasks)||_.once("destroy",en.releaseTasks);let st=en.motionTasksMap.get(_);st||(st={},en.motionTasksMap.set(_,st));let dt=st[et];dt||(dt=[],st[et]=dt);const ht=_.getMotionFile(ot);return(it=dt[tt])!=null||(dt[tt]=Live2DLoader.load({url:ht,settings:_.settings,type:_.motionDataType,target:_}).then(ct=>{var ut;const ft=(ut=en.motionTasksMap.get(_))==null?void 0:ut[et];ft&&delete ft[tt];const gt=_.createMotion(ct,et,ot);return _.emit("motionLoaded",et,tt,gt),gt}).catch(ct=>{logger.warn(_.tag,`Failed to load motion: ${ht}
`,ct),at(ct)})),dt[tt]}catch(ot){logger.warn(_.tag,`Failed to load motion at "${et}"[${tt}]
`,ot),at(ot)}return Promise.resolve(void 0)}static loadExpression(_,et){var tt;const nt=it=>_.emit("expressionLoadError",et,it);try{const it=_.definitions[et];if(!it)return Promise.resolve(void 0);_.listeners("destroy").includes(en.releaseTasks)||_.once("destroy",en.releaseTasks);let at=en.expressionTasksMap.get(_);at||(at=[],en.expressionTasksMap.set(_,at));const ot=_.getExpressionFile(it);return(tt=at[et])!=null||(at[et]=Live2DLoader.load({url:ot,settings:_.settings,type:"json",target:_}).then(st=>{const dt=en.expressionTasksMap.get(_);dt&&delete dt[et];const ht=_.createExpression(st,it);return _.emit("expressionLoaded",et,ht),ht}).catch(st=>{logger.warn(_.tag,`Failed to load expression: ${ot}
`,st),nt(st)})),at[et]}catch(it){logger.warn(_.tag,`Failed to load expression at [${et}]
`,it),nt(it)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof MotionManager?en.motionTasksMap.delete(this):en.expressionTasksMap.delete(this)}};__publicField(_Live2DFactory,"runtimes",[]);__publicField(_Live2DFactory,"urlToJSON",urlToJSON);__publicField(_Live2DFactory,"jsonToSettings",jsonToSettings);__publicField(_Live2DFactory,"waitUntilReady",waitUntilReady);__publicField(_Live2DFactory,"setupOptionals",setupOptionals);__publicField(_Live2DFactory,"setupEssentials",setupEssentials);__publicField(_Live2DFactory,"createInternalModel",createInternalModel);__publicField(_Live2DFactory,"live2DModelMiddlewares",[ZipLoader.factory,FileLoader.factory,urlToJSON,jsonToSettings,waitUntilReady,setupOptionals,setupEssentials,createInternalModel]);__publicField(_Live2DFactory,"motionTasksMap",new WeakMap);__publicField(_Live2DFactory,"expressionTasksMap",new WeakMap);let Live2DFactory=_Live2DFactory;MotionManager.prototype._loadMotion=function(_e,_){return Live2DFactory.loadMotion(this,_e,_)};ExpressionManager.prototype._loadExpression=function(_e){return Live2DFactory.loadExpression(this,_e)};FileLoader.live2dFactory=Live2DFactory;ZipLoader.live2dFactory=Live2DFactory;const _Automator=class Go{constructor(_,{autoUpdate:et=!0,autoHitTest:tt=!0,autoFocus:nt=!0,autoInteract:it,ticker:at}={}){__publicField(this,"model"),__publicField(this,"destroyed",!1),__publicField(this,"_ticker"),__publicField(this,"_autoUpdate",!1),__publicField(this,"_autoHitTest",!1),__publicField(this,"_autoFocus",!1),at||(Go.defaultTicker?at=Go.defaultTicker:typeof PIXI<"u"&&(at=PIXI.Ticker.shared)),it!==void 0&&(tt=it,nt=it,logger.warn(_.tag,"options.autoInteract is deprecated since v0.5.0, use autoHitTest and autoFocus instead.")),this.model=_,this.ticker=at,this.autoUpdate=et,this.autoHitTest=tt,this.autoFocus=nt,(tt||nt)&&(this.model.eventMode="static")}get ticker(){return this._ticker}set ticker(_){var et;this._ticker&&this._ticker.remove(onTickerUpdate,this),this._ticker=_,this._autoUpdate&&((et=this._ticker)==null||et.add(onTickerUpdate,this))}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){var et;this.destroyed||(_?this._ticker?(this._ticker.add(onTickerUpdate,this),this._autoUpdate=!0):logger.warn(this.model.tag,"No Ticker to be used for automatic updates. Either set option.ticker when creating Live2DModel, or expose PIXI to global scope (window.PIXI = PIXI)."):((et=this._ticker)==null||et.remove(onTickerUpdate,this),this._autoUpdate=!1))}get autoHitTest(){return this._autoHitTest}set autoHitTest(_){_!==this.autoHitTest&&(_?this.model.on("pointertap",onTap,this):this.model.off("pointertap",onTap,this),this._autoHitTest=_)}get autoFocus(){return this._autoFocus}set autoFocus(_){_!==this.autoFocus&&(_?this.model.on("globalpointermove",onPointerMove,this):this.model.off("globalpointermove",onPointerMove,this),this._autoFocus=_)}get autoInteract(){return this._autoHitTest&&this._autoFocus}set autoInteract(_){this.autoHitTest=_,this.autoFocus=_}onTickerUpdate(){const _=this.ticker.deltaMS;this.model.update(_)}onTap(_){this.model.tap(_.global.x,_.global.y)}onPointerMove(_){this.model.focus(_.global.x,_.global.y)}destroy(){this.autoFocus=!1,this.autoHitTest=!1,this.autoUpdate=!1,this.ticker=void 0,this.destroyed=!0}};__publicField(_Automator,"defaultTicker");let Automator=_Automator;function onTickerUpdate(){this.onTickerUpdate()}function onTap(_e){this.onTap(_e)}function onPointerMove(_e){this.onPointerMove(_e)}class Live2DTransform extends Transform{}const tempPoint=new Point$1,tempMatrix$1=new Matrix;class Live2DModel extends Container{constructor(_){super(),__publicField(this,"tag","Live2DModel(uninitialized)"),__publicField(this,"internalModel"),__publicField(this,"textures",[]),__publicField(this,"transform",new Live2DTransform),__publicField(this,"anchor",new ObservablePoint(this.onAnchorChange,this,0,0)),__publicField(this,"glContextID",-1),__publicField(this,"elapsedTime",0),__publicField(this,"deltaTime",0),__publicField(this,"automator"),this.automator=new Automator(this,_),this.once("modelLoaded",()=>this.init(_))}static from(_,et){const tt=new this(et);return Live2DFactory.setupLive2DModel(tt,_,et).then(()=>tt)}static fromSync(_,et){const tt=new this(et);return Live2DFactory.setupLive2DModel(tt,_,et).then(et==null?void 0:et.onLoad).catch(et==null?void 0:et.onError),tt}static registerTicker(_){Automator.defaultTicker=_.shared}init(_){this.tag=`Live2DModel(${this.internalModel.settings.name})`}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(_,et,tt,{sound:nt=void 0,volume:it=VOLUME,expression:at=void 0,resetExpression:ot=!0,crossOrigin:st,onFinish:dt,onError:ht}={}){return et===void 0?this.internalModel.motionManager.startRandomMotion(_,tt,{sound:nt,volume:it,expression:at,resetExpression:ot,crossOrigin:st,onFinish:dt,onError:ht}):this.internalModel.motionManager.startMotion(_,et,tt,{sound:nt,volume:it,expression:at,resetExpression:ot,crossOrigin:st,onFinish:dt,onError:ht})}stopMotions(){return this.internalModel.motionManager.stopAllMotions()}speak(_,{volume:et=VOLUME,expression:tt,resetExpression:nt=!0,crossOrigin:it,onFinish:at,onError:ot}={}){return this.internalModel.motionManager.speak(_,{volume:et,expression:tt,resetExpression:nt,crossOrigin:it,onFinish:at,onError:ot})}stopSpeaking(){return this.internalModel.motionManager.stopSpeaking()}expression(_){return this.internalModel.motionManager.expressionManager?_===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(_):Promise.resolve(!1)}focus(_,et,tt=!1){tempPoint.x=_,tempPoint.y=et,this.toModelPosition(tempPoint,tempPoint,!0);const nt=tempPoint.x/this.internalModel.originalWidth*2-1,it=tempPoint.y/this.internalModel.originalHeight*2-1,at=Math.atan2(it,nt);this.internalModel.focusController.focus(Math.cos(at),-Math.sin(at),tt)}tap(_,et){const tt=this.hitTest(_,et);tt.length&&(logger.log(this.tag,"Hit",tt),this.emit("hit",tt))}hitTest(_,et){return tempPoint.x=_,tempPoint.y=et,this.toModelPosition(tempPoint,tempPoint),this.internalModel.hitTest(tempPoint.x,tempPoint.y)}toModelPosition(_,et=_.clone(),tt){return tt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(_,et),this.internalModel.localTransform.applyInverse(et,et),et}containsPoint(_){return this.getBounds(!0).contains(_.x,_.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}update(_){this.deltaTime+=_,this.elapsedTime+=_}_render(_){_.batch.reset(),_.geometry.reset(),_.shader.reset(),_.state.reset();let et=!1;this.glContextID!==_.CONTEXT_UID&&(this.glContextID=_.CONTEXT_UID,this.internalModel.updateWebGLContext(_.gl,this.glContextID),et=!0);for(let it=0;it<this.textures.length;it++){const at=this.textures[it];at.valid&&((et||!at.baseTexture._glTextures[this.glContextID])&&(_.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),_.texture.bind(at.baseTexture,0)),this.internalModel.bindTexture(it,at.baseTexture._glTextures[this.glContextID].texture),at.baseTexture.touched=_.textureGC.count)}const tt=_.framebuffer.viewport;this.internalModel.viewport=[tt.x,tt.y,tt.width,tt.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const nt=tempMatrix$1.copyFrom(_.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(nt),this.internalModel.draw(_.gl),_.state.reset(),_.texture.reset()}destroy(_){this.emit("destroy"),_!=null&&_.texture&&this.textures.forEach(et=>et.destroy(_.baseTexture)),this.automator.destroy(),this.internalModel.destroy(),super.destroy(_)}}if(!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const originalUpdateParam=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(_e,_){originalUpdateParam.call(this,_e,_),_.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class Live2DExpression extends AMotion{constructor(_){super(),__publicField(this,"params",[]),this.setFadeIn(_.fade_in>0?_.fade_in:config$1.expressionFadingDuration),this.setFadeOut(_.fade_out>0?_.fade_out:config$1.expressionFadingDuration),Array.isArray(_.params)&&_.params.forEach(et=>{const tt=et.calc||"add";if(tt==="add"){const nt=et.def||0;et.val-=nt}else if(tt==="mult"){const nt=et.def||1;et.val/=nt}this.params.push({calc:tt,val:et.val,id:et.id})})}updateParamExe(_,et,tt,nt){this.params.forEach(it=>{_.setParamFloat(it.id,it.val*tt)})}}class Cubism2ExpressionManager extends ExpressionManager{constructor(_,et){var tt;super(_,et),__publicField(this,"queueManager",new MotionQueueManager),__publicField(this,"definitions"),this.definitions=(tt=this.settings.expressions)!=null?tt:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(_){return this.definitions.findIndex(et=>et.name===_)}getExpressionFile(_){return _.file}createExpression(_,et){return new Live2DExpression(_)}_setExpression(_){return this.queueManager.startMotion(_)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(_,et){return this.queueManager.updateParam(_)}}class Cubism2MotionManager extends MotionManager{constructor(_,et){super(_,et),__publicField(this,"definitions"),__publicField(this,"groups",{idle:"idle"}),__publicField(this,"motionDataType","arraybuffer"),__publicField(this,"queueManager",new MotionQueueManager),__publicField(this,"lipSyncIds"),__publicField(this,"expressionManager"),this.definitions=this.settings.motions,this.init(et),this.lipSyncIds=["PARAM_MOUTH_OPEN_Y"]}init(_){super.init(_),this.settings.expressions&&(this.expressionManager=new Cubism2ExpressionManager(this.settings,_))}isFinished(){return this.queueManager.isFinished()}createMotion(_,et,tt){const nt=Live2DMotion.loadMotion(_),it=et===this.groups.idle?config$1.idleMotionFadingDuration:config$1.motionFadingDuration;return nt.setFadeIn(tt.fade_in>0?tt.fade_in:it),nt.setFadeOut(tt.fade_out>0?tt.fade_out:it),nt}getMotionFile(_){return _.file}getMotionName(_){return _.file}getSoundFile(_){return _.sound}_startMotion(_,et){return _.onFinishHandler=et,this.queueManager.stopAllMotions(),this.queueManager.startMotion(_)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(_,et){return this.queueManager.updateParam(_)}destroy(){super.destroy(),this.queueManager=void 0}}class Live2DEyeBlink{constructor(_){__publicField(this,"leftParam"),__publicField(this,"rightParam"),__publicField(this,"blinkInterval",4e3),__publicField(this,"closingDuration",100),__publicField(this,"closedDuration",50),__publicField(this,"openingDuration",150),__publicField(this,"eyeState",0),__publicField(this,"eyeParamValue",1),__publicField(this,"closedTimer",0),__publicField(this,"nextBlinkTimeLeft",this.blinkInterval),this.coreModel=_,this.leftParam=_.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=_.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(_){this.eyeParamValue=clamp$1(_,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(_){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=_,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+rand(0,2e3));break;case 1:this.setEyeParams(this.eyeParamValue+_/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=_,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+_/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}}const tempMatrixArray=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Cubism2InternalModel extends InternalModel{constructor(_,et,tt){super(),__publicField(this,"settings"),__publicField(this,"coreModel"),__publicField(this,"motionManager"),__publicField(this,"eyeBlink"),__publicField(this,"eyeballXParamIndex"),__publicField(this,"eyeballYParamIndex"),__publicField(this,"angleXParamIndex"),__publicField(this,"angleYParamIndex"),__publicField(this,"angleZParamIndex"),__publicField(this,"bodyAngleXParamIndex"),__publicField(this,"breathParamIndex"),__publicField(this,"textureFlipY",!0),__publicField(this,"lipSync",!0),__publicField(this,"drawDataCount",0),__publicField(this,"disableCulling",!1),__publicField(this,"hasDrawn",!1),this.coreModel=_,this.settings=et,this.motionManager=new Cubism2MotionManager(et,tt),this.eyeBlink=new Live2DEyeBlink(_),this.eyeballXParamIndex=_.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=_.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=_.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=_.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=_.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=_.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=_.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:it,value:at})=>this.coreModel.setParamFloat(it,at)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:it,value:at})=>this.coreModel.setPartsOpacity(it,at)),this.coreModel.saveParam();const _=this.coreModel.getModelContext()._$aS;_!=null&&_.length&&(this.drawDataCount=_.length);let et=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:it=>et=it,get:()=>this.disableCulling?!1:et});const tt=this.coreModel.getModelContext().clipManager,nt=tt.setupClip;tt.setupClip=(it,at)=>{nt.call(tt,it,at),at.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const _={};if(this.settings.layout)for(const[et,tt]of Object.entries(this.settings.layout)){let nt=et;et==="center_x"?nt="centerX":et==="center_y"&&(nt="centerY"),_[nt]=tt}return _}updateWebGLContext(_,et){const tt=this.coreModel.drawParamWebGL;tt.firstDraw=!0,tt.setGL(_),tt.glno=et;for(const[at,ot]of Object.entries(tt))ot instanceof WebGLBuffer&&(tt[at]=null);const nt=this.coreModel.getModelContext().clipManager;nt.curFrameNo=et;const it=_.getParameter(_.FRAMEBUFFER_BINDING);nt.getMaskRenderTexture(),_.bindFramebuffer(_.FRAMEBUFFER,it)}bindTexture(_,et){this.coreModel.setTexture(_,et)}getHitAreaDefs(){var _;return((_=this.settings.hitAreas)==null?void 0:_.map(et=>({id:et.id,name:et.name,index:this.coreModel.getDrawDataIndex(et.id)})))||[]}getDrawableIDs(){const _=this.coreModel.getModelContext(),et=[];for(let tt=0;tt<this.drawDataCount;tt++){const nt=_.getDrawData(tt);nt&&et.push(nt.getDrawDataID().id)}return et}getDrawableIndex(_){return this.coreModel.getDrawDataIndex(_)}getDrawableVertices(_){if(typeof _=="string"&&(_=this.coreModel.getDrawDataIndex(_),_===-1))throw new TypeError("Unable to find drawable ID: "+_);return this.coreModel.getTransformedPoints(_).slice()}hitTest(_,et){return this.hasDrawn||logger.warn("Trying to hit-test a Cubism 2 model that has not been rendered yet. The result will always be empty since the draw data is not ready."),super.hitTest(_,et)}update(_,et){var tt,nt,it,at;super.update(_,et);const ot=this.coreModel;this.emit("beforeMotionUpdate");const st=this.motionManager.update(this.coreModel,et);if(this.emit("afterMotionUpdate"),ot.saveParam(),(tt=this.motionManager.expressionManager)==null||tt.update(ot,et),st||(nt=this.eyeBlink)==null||nt.update(_),this.updateFocus(),this.updateNaturalMovements(_,et),this.lipSync&&this.motionManager.currentAudio){let dt=this.motionManager.mouthSync(),ht=0;const ct=1,ut=1.2,ft=.7;dt>0&&(ht=.4),dt=Math.pow(dt,ft),dt=clamp$1(dt*ut,ht,ct);for(let gt=0;gt<this.motionManager.lipSyncIds.length;++gt)this.coreModel.setParamFloat(this.coreModel.getParamIndex(this.motionManager.lipSyncIds[gt]),dt)}(it=this.physics)==null||it.update(et),(at=this.pose)==null||at.update(_),this.emit("beforeModelUpdate"),ot.update(),ot.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,this.focusController.x*30),this.coreModel.addToParamFloat(this.angleYParamIndex,this.focusController.y*30),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(_,et){const tt=et/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(tt/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(tt/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(tt/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(tt/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(tt/3.2345))}draw(_){const et=this.disableCulling;_.getParameter(_.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const tt=this.drawingMatrix;tempMatrixArray[0]=tt.a,tempMatrixArray[1]=tt.b,tempMatrixArray[4]=tt.c,tempMatrixArray[5]=tt.d,tempMatrixArray[12]=tt.tx,tempMatrixArray[13]=tt.ty,this.coreModel.setMatrix(tempMatrixArray),this.coreModel.draw(),this.hasDrawn=!0,this.disableCulling=et}destroy(){super.destroy(),this.coreModel=void 0}}class Cubism2ModelSettings extends ModelSettings{constructor(_){if(super(_),__publicField(this,"moc"),__publicField(this,"textures"),__publicField(this,"layout"),__publicField(this,"hitAreas"),__publicField(this,"initParams"),__publicField(this,"initOpacities"),__publicField(this,"expressions"),__publicField(this,"motions",{}),!Cubism2ModelSettings.isValidJSON(_))throw new TypeError("Invalid JSON.");this.moc=_.model,copyArray("string",_,this,"textures","textures"),this.copy(_)}static isValidJSON(_){var et;return!!_&&typeof _.model=="string"&&((et=_.textures)==null?void 0:et.length)>0&&_.textures.every(tt=>typeof tt=="string")}copy(_){copyProperty("string",_,this,"name","name"),copyProperty("string",_,this,"pose","pose"),copyProperty("string",_,this,"physics","physics"),copyProperty("object",_,this,"layout","layout"),copyProperty("object",_,this,"motions","motions"),copyArray("object",_,this,"hit_areas","hitAreas"),copyArray("object",_,this,"expressions","expressions"),copyArray("object",_,this,"init_params","initParams"),copyArray("object",_,this,"init_opacities","initOpacities")}replaceFiles(_){super.replaceFiles(_);for(const[et,tt]of Object.entries(this.motions))for(let nt=0;nt<tt.length;nt++)tt[nt].file=_(tt[nt].file,`motions.${et}[${nt}].file`),tt[nt].sound!==void 0&&(tt[nt].sound=_(tt[nt].sound,`motions.${et}[${nt}].sound`));if(this.expressions)for(let et=0;et<this.expressions.length;et++)this.expressions[et].file=_(this.expressions[et].file,`expressions[${et}].file`)}}const SRC_TYPE_MAP={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},TARGET_TYPE_MAP={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class Live2DPhysics{constructor(_,et){__publicField(this,"physicsHairs",[]),this.coreModel=_,et.physics_hair&&(this.physicsHairs=et.physics_hair.map(tt=>{const nt=new PhysicsHair;return nt.setup(tt.setup.length,tt.setup.regist,tt.setup.mass),tt.src.forEach(({id:it,ptype:at,scale:ot,weight:st})=>{const dt=SRC_TYPE_MAP[at];dt&&nt.addSrcParam(dt,it,ot,st)}),tt.targets.forEach(({id:it,ptype:at,scale:ot,weight:st})=>{const dt=TARGET_TYPE_MAP[at];dt&&nt.addTargetParam(dt,it,ot,st)}),nt}))}update(_){this.physicsHairs.forEach(et=>et.update(this.coreModel,_))}}class Live2DPartsParam{constructor(_){__publicField(this,"paramIndex",-1),__publicField(this,"partsIndex",-1),__publicField(this,"link",[]),this.id=_}initIndex(_){this.paramIndex=_.getParamIndex("VISIBLE:"+this.id),this.partsIndex=_.getPartsDataIndex(PartsDataID.getID(this.id)),_.setParamFloat(this.paramIndex,1)}}class Live2DPose{constructor(_,et){__publicField(this,"opacityAnimDuration",500),__publicField(this,"partsGroups",[]),this.coreModel=_,et.parts_visible&&(this.partsGroups=et.parts_visible.map(({group:tt})=>tt.map(({id:nt,link:it})=>{const at=new Live2DPartsParam(nt);return it&&(at.link=it.map(ot=>new Live2DPartsParam(ot))),at})),this.init())}init(){this.partsGroups.forEach(_=>{_.forEach(et=>{if(et.initIndex(this.coreModel),et.paramIndex>=0){const tt=this.coreModel.getParamFloat(et.paramIndex)!==0;this.coreModel.setPartsOpacity(et.partsIndex,tt?1:0),this.coreModel.setParamFloat(et.paramIndex,tt?1:0),et.link.length>0&&et.link.forEach(nt=>nt.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(_,et){const tt=this.coreModel,nt=.5,it=.15;let at=1,ot=_.findIndex(({paramIndex:st,partsIndex:dt})=>dt>=0&&tt.getParamFloat(st)!==0);if(ot>=0){const st=tt.getPartsOpacity(_[ot].partsIndex);at=clamp$1(st+et/this.opacityAnimDuration,0,1)}else ot=0,at=1;_.forEach(({partsIndex:st},dt)=>{if(st>=0)if(ot==dt)tt.setPartsOpacity(st,at);else{let ht=tt.getPartsOpacity(st),ct;at<nt?ct=at*(nt-1)/nt+1:ct=(1-at)*nt/(1-nt),(1-ct)*(1-at)>it&&(ct=1-it/(1-at)),ht>ct&&(ht=ct),tt.setPartsOpacity(st,ht)}})}copyOpacity(_){const et=this.coreModel;_.forEach(({partsIndex:tt,link:nt})=>{if(tt>=0&&nt){const it=et.getPartsOpacity(tt);nt.forEach(({partsIndex:at})=>{at>=0&&et.setPartsOpacity(at,it)})}})}update(_){this.partsGroups.forEach(et=>{this.normalizePartsOpacityGroup(et,_),this.copyOpacity(et)})}}Live2DFactory.registerRuntime({version:2,test(_e){return _e instanceof Cubism2ModelSettings||Cubism2ModelSettings.isValidJSON(_e)},ready(){return Promise.resolve()},isValidMoc(_e){if(_e.byteLength<3)return!1;const _=new Int8Array(_e,0,3);return String.fromCharCode(..._)==="moc"},createModelSettings(_e){return new Cubism2ModelSettings(_e)},createCoreModel(_e){const _=Live2DModelWebGL.loadModel(_e),et=Live2D.getError();if(et)throw et;return _},createInternalModel(_e,_,et){return new Cubism2InternalModel(_e,_,et)},createPose(_e,_){return new Live2DPose(_e,_)},createPhysics(_e,_){return new Live2DPhysics(_e,_)}});if(!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class CubismVector2{constructor(_,et){this.x=_||0,this.y=et||0}add(_){const et=new CubismVector2(0,0);return et.x=this.x+_.x,et.y=this.y+_.y,et}substract(_){const et=new CubismVector2(0,0);return et.x=this.x-_.x,et.y=this.y-_.y,et}multiply(_){const et=new CubismVector2(0,0);return et.x=this.x*_.x,et.y=this.y*_.y,et}multiplyByScaler(_){return this.multiply(new CubismVector2(_,_))}division(_){const et=new CubismVector2(0,0);return et.x=this.x/_.x,et.y=this.y/_.y,et}divisionByScalar(_){return this.division(new CubismVector2(_,_))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(_){return Math.sqrt((this.x-_.x)*(this.x-_.x)+(this.y-_.y)*(this.y-_.y))}dot(_){return this.x*_.x+this.y*_.y}normalize(){const _=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/_,this.y=this.y/_}isEqual(_){return this.x==_.x&&this.y==_.y}isNotEqual(_){return!this.isEqual(_)}}const _CubismMath=class $o{static range(_,et,tt){return _<et?_=et:_>tt&&(_=tt),_}static sin(_){return Math.sin(_)}static cos(_){return Math.cos(_)}static abs(_){return Math.abs(_)}static sqrt(_){return Math.sqrt(_)}static cbrt(_){if(_===0)return _;let et=_;const tt=et<0;tt&&(et=-et);let nt;return et===1/0?nt=1/0:(nt=Math.exp(Math.log(et)/3),nt=(et/(nt*nt)+2*nt)/3),tt?-nt:nt}static getEasingSine(_){return _<0?0:_>1?1:.5-.5*this.cos(_*Math.PI)}static max(_,et){return _>et?_:et}static min(_,et){return _>et?et:_}static degreesToRadian(_){return _/180*Math.PI}static radianToDegrees(_){return _*180/Math.PI}static directionToRadian(_,et){const tt=Math.atan2(et.y,et.x),nt=Math.atan2(_.y,_.x);let it=tt-nt;for(;it<-Math.PI;)it+=Math.PI*2;for(;it>Math.PI;)it-=Math.PI*2;return it}static directionToDegrees(_,et){const tt=this.directionToRadian(_,et);let nt=this.radianToDegrees(tt);return et.x-_.x>0&&(nt=-nt),nt}static radianToDirection(_){const et=new CubismVector2;return et.x=this.sin(_),et.y=this.cos(_),et}static quadraticEquation(_,et,tt){return this.abs(_)<$o.Epsilon?this.abs(et)<$o.Epsilon?-tt:-tt/et:-(et+this.sqrt(et*et-4*_*tt))/(2*_)}static cardanoAlgorithmForBezier(_,et,tt,nt){if(this.sqrt(_)<$o.Epsilon)return this.range(this.quadraticEquation(et,tt,nt),0,1);const it=et/_,at=tt/_,ot=nt/_,st=(3*at-it*it)/3,dt=st/3,ht=(2*it*it*it-9*it*at+27*ot)/27,ct=ht/2,ut=ct*ct+dt*dt*dt,ft=.5,gt=ft+.01;if(ut<0){const _t=-st/3,xt=_t*_t*_t,St=this.sqrt(xt),Tt=-ht/(2*St),wt=this.range(Tt,-1,1),Ct=Math.acos(wt),At=2*this.cbrt(St),Pt=At*this.cos(Ct/3)-it/3;if(this.abs(Pt-ft)<gt)return this.range(Pt,0,1);const Rt=At*this.cos((Ct+2*Math.PI)/3)-it/3;if(this.abs(Rt-ft)<gt)return this.range(Rt,0,1);const It=At*this.cos((Ct+4*Math.PI)/3)-it/3;return this.range(It,0,1)}if(ut==0){let _t;ct<0?_t=this.cbrt(-ct):_t=-this.cbrt(ct);const xt=2*_t-it/3;if(this.abs(xt-ft)<gt)return this.range(xt,0,1);const St=-_t-it/3;return this.range(St,0,1)}const mt=this.sqrt(ut),vt=this.cbrt(mt-ct),yt=this.cbrt(mt+ct),bt=vt-yt-it/3;return this.range(bt,0,1)}constructor(){}};_CubismMath.Epsilon=1e-5;let CubismMath=_CubismMath;class CubismMatrix44{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(_,et,tt){const nt=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),it=4;for(let at=0;at<it;++at)for(let ot=0;ot<it;++ot)for(let st=0;st<it;++st)nt[ot+at*4]+=_[st+at*4]*et[ot+st*4];for(let at=0;at<16;++at)tt[at]=nt[at]}loadIdentity(){const _=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(_)}setMatrix(_){for(let et=0;et<16;++et)this._tr[et]=_[et]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(_){return this._tr[0]*_+this._tr[12]}transformY(_){return this._tr[5]*_+this._tr[13]}invertTransformX(_){return(_-this._tr[12])/this._tr[0]}invertTransformY(_){return(_-this._tr[13])/this._tr[5]}translateRelative(_,et){const tt=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,_,et,0,1]);CubismMatrix44.multiply(tt,this._tr,this._tr)}translate(_,et){this._tr[12]=_,this._tr[13]=et}translateX(_){this._tr[12]=_}translateY(_){this._tr[13]=_}scaleRelative(_,et){const tt=new Float32Array([_,0,0,0,0,et,0,0,0,0,1,0,0,0,0,1]);CubismMatrix44.multiply(tt,this._tr,this._tr)}scale(_,et){this._tr[0]=_,this._tr[5]=et}multiplyByMatrix(_){CubismMatrix44.multiply(_.getArray(),this._tr,this._tr)}clone(){const _=new CubismMatrix44;for(let et=0;et<this._tr.length;et++)_._tr[et]=this._tr[et];return _}}class CubismRenderer{initialize(_){this._model=_}drawModel(){this.getModel()!=null&&(this.saveProfile(),this.doDrawModel(),this.restoreProfile())}setMvpMatrix(_){this._mvpMatrix4x4.setMatrix(_.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(_,et,tt,nt){_<0?_=0:_>1&&(_=1),et<0?et=0:et>1&&(et=1),tt<0?tt=0:tt>1&&(tt=1),nt<0?nt=0:nt>1&&(nt=1),this._modelColor.R=_,this._modelColor.G=et,this._modelColor.B=tt,this._modelColor.A=nt}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(_){this._isPremultipliedAlpha=_}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(_){this._isCulling=_}isCulling(){return this._isCulling}setAnisotropy(_){this._anisotropy=_}getAnisotropy(){return this._anisotropy}getModel(){return this._model}useHighPrecisionMask(_){this._useHighPrecisionMask=_}isUsingHighPrecisionMask(){return this._useHighPrecisionMask}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._modelColor=new CubismTextureColor,this._useHighPrecisionMask=!1,this._mvpMatrix4x4=new CubismMatrix44,this._mvpMatrix4x4.loadIdentity()}}var CubismBlendMode=(_e=>(_e[_e.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",_e[_e.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",_e[_e.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",_e))(CubismBlendMode||{});class CubismTextureColor{constructor(_=1,et=1,tt=1,nt=1){this.R=_,this.G=et,this.B=tt,this.A=nt}}let s_isStarted=!1,s_isInitialized=!1,s_option;const Constant={vertexOffset:0,vertexStep:2};class CubismFramework{static startUp(_){if(s_isStarted)return CubismLogInfo("CubismFramework.startUp() is already done."),s_isStarted;if(Live2DCubismCore._isStarted)return s_isStarted=!0,!0;if(Live2DCubismCore._isStarted=!0,s_option=_,s_option&&Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction),s_isStarted=!0,s_isStarted){const et=Live2DCubismCore.Version.csmGetVersion(),tt=(et&4278190080)>>24,nt=(et&16711680)>>16,it=et&65535,at=et;CubismLogInfo("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+tt).slice(-2),("00"+nt).slice(-2),("0000"+it).slice(-4),at)}return CubismLogInfo("CubismFramework.startUp() is complete."),s_isStarted}static cleanUp(){s_isStarted=!1,s_isInitialized=!1,s_option=void 0}static initialize(_=0){if(!s_isStarted){CubismLogWarning("CubismFramework is not started.");return}if(s_isInitialized){CubismLogWarning("CubismFramework.initialize() skipped, already initialized.");return}Live2DCubismCore.Memory.initializeAmountOfMemory(_),s_isInitialized=!0,CubismLogInfo("CubismFramework.initialize() is complete.")}static dispose(){if(!s_isStarted){CubismLogWarning("CubismFramework is not started.");return}if(!s_isInitialized){CubismLogWarning("CubismFramework.dispose() skipped, not initialized.");return}CubismRenderer.staticRelease(),s_isInitialized=!1,CubismLogInfo("CubismFramework.dispose() is complete.")}static isStarted(){return s_isStarted}static isInitialized(){return s_isInitialized}static coreLogFunction(_){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(_)}static getLoggingLevel(){return s_option!=null?s_option.loggingLevel:5}constructor(){}}var LogLevel=(_e=>(_e[_e.LogLevel_Verbose=0]="LogLevel_Verbose",_e[_e.LogLevel_Debug=1]="LogLevel_Debug",_e[_e.LogLevel_Info=2]="LogLevel_Info",_e[_e.LogLevel_Warning=3]="LogLevel_Warning",_e[_e.LogLevel_Error=4]="LogLevel_Error",_e[_e.LogLevel_Off=5]="LogLevel_Off",_e))(LogLevel||{});const CSM_ASSERT=typeof process<"u"?()=>{}:_e=>console.assert(_e);function CubismLogDebug(_e,..._){CubismDebug.print(LogLevel.LogLevel_Debug,"[CSM][D]"+_e+`
`,_)}function CubismLogInfo(_e,..._){CubismDebug.print(LogLevel.LogLevel_Info,"[CSM][I]"+_e+`
`,_)}function CubismLogWarning(_e,..._){CubismDebug.print(LogLevel.LogLevel_Warning,"[CSM][W]"+_e+`
`,_)}function CubismLogError(_e,..._){CubismDebug.print(LogLevel.LogLevel_Error,"[CSM][E]"+_e+`
`,_)}class CubismDebug{static print(_,et,tt){if(_<CubismFramework.getLoggingLevel())return;const nt=CubismFramework.coreLogFunction;if(!nt)return;const it=et.replace(/{(\d+)}/g,(at,ot)=>tt[ot]);nt(it)}static dumpBytes(_,et,tt){for(let nt=0;nt<tt;nt++)nt%16==0&&nt>0?this.print(_,`
`):nt%8==0&&nt>0&&this.print(_,"  "),this.print(_,"{0} ",[et[nt]&255]);this.print(_,`
`)}constructor(){}}class ACubismMotion{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(_,et,tt){if(!et.isAvailable()||et.isFinished())return;if(!et.isStarted()){et.setIsStarted(!0),et.setStartTime(tt-this._offsetSeconds),et.setFadeInStartTime(tt);const ot=this.getDuration();et.getEndTime()<0&&et.setEndTime(ot<=0?-1:et.getStartTime()+ot)}let nt=this._weight;const it=this._fadeInSeconds==0?1:CubismMath.getEasingSine((tt-et.getFadeInStartTime())/this._fadeInSeconds),at=this._fadeOutSeconds==0||et.getEndTime()<0?1:CubismMath.getEasingSine((et.getEndTime()-tt)/this._fadeOutSeconds);nt=nt*it*at,et.setState(tt,nt),CSM_ASSERT(0<=nt&&nt<=1),this.doUpdateParameters(_,tt,nt,et),et.getEndTime()>0&&et.getEndTime()<tt&&et.setIsFinished(!0)}setFadeInTime(_){this._fadeInSeconds=_}setFadeOutTime(_){this._fadeOutSeconds=_}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(_){this._weight=_}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(_){this._offsetSeconds=_}getFiredEvent(_,et){return this._firedEventValues}setFinishedMotionHandler(_){this._onFinishedMotion=_}getFinishedMotionHandler(){return this._onFinishedMotion}isExistModelOpacity(){return!1}getModelOpacityIndex(){return-1}getModelOpacityId(_){}getModelOpacityValue(){return 1}}const DefaultFadeTime=1;class CubismExpressionMotion extends ACubismMotion{static create(_){const et=new CubismExpressionMotion;return et.parse(_),et}doUpdateParameters(_,et,tt,nt){for(let it=0;it<this._parameters.length;++it){const at=this._parameters[it];switch(at.blendType){case 0:{_.addParameterValueById(at.parameterId,at.value,tt);break}case 1:{_.multiplyParameterValueById(at.parameterId,at.value,tt);break}case 2:{_.setParameterValueById(at.parameterId,at.value,tt);break}}}}parse(_){this.setFadeInTime(_.FadeInTime!=null?_.FadeInTime:DefaultFadeTime),this.setFadeOutTime(_.FadeOutTime!=null?_.FadeOutTime:DefaultFadeTime);const et=(_.Parameters||[]).length;for(let tt=0;tt<et;++tt){const nt=_.Parameters[tt],it=nt.Id,at=nt.Value;let ot;!nt.Blend||nt.Blend==="Add"?ot=0:nt.Blend==="Multiply"?ot=1:nt.Blend==="Overwrite"?ot=2:ot=0;const st={parameterId:it,blendType:ot,value:at};this._parameters.push(st)}}constructor(){super(),this._parameters=[]}}class CubismMotionQueueEntry{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(_){this._fadeOutSeconds=_,this._isTriggeredFadeOut=!0}startFadeOut(_,et){const tt=et+_;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||tt<this._endTimeSeconds)&&(this._endTimeSeconds=tt)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(_){this._startTimeSeconds=_}setFadeInStartTime(_){this._fadeInStartTimeSeconds=_}setEndTime(_){this._endTimeSeconds=_}setIsFinished(_){this._finished=_}setIsStarted(_){this._started=_}isAvailable(){return this._available}setIsAvailable(_){this._available=_}setState(_,et){this._stateTimeSeconds=_,this._stateWeight=et}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(_){this._lastEventCheckSeconds=_}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class CubismMotionQueueManager{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let _=0;_<this._motions.length;++_)this._motions[_]&&this._motions[_].release();this._motions=void 0}startMotion(_,et,tt){if(_==null)return InvalidMotionQueueEntryHandleValue;let nt;for(let it=0;it<this._motions.length;++it)nt=this._motions[it],nt!=null&&nt.setFadeOut(nt._motion.getFadeOutTime());return nt=new CubismMotionQueueEntry,nt._autoDelete=et,nt._motion=_,this._motions.push(nt),nt._motionQueueEntryHandle}isFinished(){let _=0;for(;_<this._motions.length;){const et=this._motions[_];if(et==null){this._motions.splice(_,1);continue}if(et._motion==null){et.release(),this._motions.splice(_,1);continue}if(!et.isFinished())return!1;_++}return!0}isFinishedByHandle(_){for(let et=0;et<this._motions.length;et++){const tt=this._motions[et];if(tt!=null&&tt._motionQueueEntryHandle==_&&!tt.isFinished())return!1}return!0}stopAllMotions(){for(let _=0;_<this._motions.length;_++){const et=this._motions[_];et!=null&&et.release()}this._motions=[]}getCubismMotionQueueEntry(_){return this._motions.find(et=>et!=null&&et._motionQueueEntryHandle==_)}setEventCallback(_,et=null){this._eventCallBack=_,this._eventCustomData=et}doUpdateMotion(_,et){let tt=!1,nt=0;for(;nt<this._motions.length;){const it=this._motions[nt];if(it==null){this._motions.splice(nt,1);continue}const at=it._motion;if(at==null){it.release(),this._motions.splice(nt,1);continue}at.updateParameters(_,it,et),tt=!0;const ot=at.getFiredEvent(it.getLastCheckEventSeconds()-it.getStartTime(),et-it.getStartTime());for(let st=0;st<ot.length;++st)this._eventCallBack(this,ot[st],this._eventCustomData);it.setLastCheckEventSeconds(et),it.isFinished()?(it.release(),this._motions.splice(nt,1)):(it.isTriggeredFadeOut()&&it.startFadeOut(it.getFadeOutSeconds(),et),nt++)}return tt}}const InvalidMotionQueueEntryHandleValue=-1;class Cubism4ExpressionManager extends ExpressionManager{constructor(_,et){var tt;super(_,et),__publicField(this,"queueManager",new CubismMotionQueueManager),__publicField(this,"definitions"),this.definitions=(tt=_.expressions)!=null?tt:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(_){return this.definitions.findIndex(et=>et.Name===_)}getExpressionFile(_){return _.File}createExpression(_,et){return CubismExpressionMotion.create(_)}_setExpression(_){return this.queueManager.startMotion(_,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(_,et){return this.queueManager.doUpdateMotion(_,et)}}var CubismMotionCurveTarget=(_e=>(_e[_e.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",_e[_e.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",_e[_e.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",_e))(CubismMotionCurveTarget||{}),CubismMotionSegmentType=(_e=>(_e[_e.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",_e[_e.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",_e[_e.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",_e[_e.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",_e))(CubismMotionSegmentType||{});class CubismMotionPoint{constructor(_=0,et=0){this.time=_,this.value=et}}class CubismMotionSegment{constructor(){this.basePointIndex=0,this.segmentType=0}}class CubismMotionCurve{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class CubismMotionEvent{constructor(){this.fireTime=0,this.value=""}}class CubismMotionData{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class CubismMotionJson{constructor(_){this._json=_}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(_){return _==0?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(_){return this._json.Curves[_].Target}getMotionCurveId(_){return this._json.Curves[_].Id}getMotionCurveFadeInTime(_){return this._json.Curves[_].FadeInTime}getMotionCurveFadeOutTime(_){return this._json.Curves[_].FadeOutTime}getMotionCurveSegmentCount(_){return this._json.Curves[_].Segments.length}getMotionCurveSegment(_,et){return this._json.Curves[_].Segments[et]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(_){return this._json.UserData[_].Time}getEventValue(_){return this._json.UserData[_].Value}}var EvaluationOptionFlag=(_e=>(_e[_e.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",_e))(EvaluationOptionFlag||{});const EffectNameEyeBlink="EyeBlink",EffectNameLipSync="LipSync",TargetNameModel="Model",TargetNameParameter="Parameter",TargetNamePartOpacity="PartOpacity",IdNameOpacity="Opacity",UseOldBeziersCurveMotion=!1;function lerpPoints(_e,_,et){const tt=new CubismMotionPoint;return tt.time=_e.time+(_.time-_e.time)*et,tt.value=_e.value+(_.value-_e.value)*et,tt}function linearEvaluate(_e,_){let et=(_-_e[0].time)/(_e[1].time-_e[0].time);return et<0&&(et=0),_e[0].value+(_e[1].value-_e[0].value)*et}function bezierEvaluate(_e,_){let et=(_-_e[0].time)/(_e[3].time-_e[0].time);et<0&&(et=0);const tt=lerpPoints(_e[0],_e[1],et),nt=lerpPoints(_e[1],_e[2],et),it=lerpPoints(_e[2],_e[3],et),at=lerpPoints(tt,nt,et),ot=lerpPoints(nt,it,et);return lerpPoints(at,ot,et).value}function bezierEvaluateCardanoInterpretation(_e,_){const et=_,tt=_e[0].time,nt=_e[3].time,it=_e[1].time,at=_e[2].time,ot=nt-3*at+3*it-tt,st=3*at-6*it+3*tt,dt=3*it-3*tt,ht=tt-et,ct=CubismMath.cardanoAlgorithmForBezier(ot,st,dt,ht),ut=lerpPoints(_e[0],_e[1],ct),ft=lerpPoints(_e[1],_e[2],ct),gt=lerpPoints(_e[2],_e[3],ct),mt=lerpPoints(ut,ft,ct),vt=lerpPoints(ft,gt,ct);return lerpPoints(mt,vt,ct).value}function steppedEvaluate(_e,_){return _e[0].value}function inverseSteppedEvaluate(_e,_){return _e[1].value}function evaluateCurve(_e,_,et){const tt=_e.curves[_];let nt=-1;const it=tt.baseSegmentIndex+tt.segmentCount;let at=0;for(let st=tt.baseSegmentIndex;st<it;++st)if(at=_e.segments[st].basePointIndex+(_e.segments[st].segmentType==CubismMotionSegmentType.CubismMotionSegmentType_Bezier?3:1),_e.points[at].time>et){nt=st;break}if(nt==-1)return _e.points[at].value;const ot=_e.segments[nt];return ot.evaluate(_e.points.slice(ot.basePointIndex),et)}class CubismMotion extends ACubismMotion{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._modelOpacity=1}static create(_,et){const tt=new CubismMotion;return tt.parse(_),tt._sourceFrameRate=tt._motionData.fps,tt._loopDurationSeconds=tt._motionData.duration,tt._onFinishedMotion=et,tt}doUpdateParameters(_,et,tt,nt){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=EffectNameEyeBlink),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=EffectNameLipSync),this._modelCurveIdOpacity==null&&(this._modelCurveIdOpacity=IdNameOpacity);let it=et-nt.getStartTime();it<0&&(it=0);let at=Number.MAX_VALUE,ot=Number.MAX_VALUE;const st=64;let dt=0,ht=0;this._eyeBlinkParameterIds.length>st&&CubismLogDebug("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>st&&CubismLogDebug("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const ct=this._fadeInSeconds<=0?1:CubismMath.getEasingSine((et-nt.getFadeInStartTime())/this._fadeInSeconds),ut=this._fadeOutSeconds<=0||nt.getEndTime()<0?1:CubismMath.getEasingSine((nt.getEndTime()-et)/this._fadeOutSeconds);let ft,gt,mt,vt=it;if(this._isLoop)for(;vt>this._motionData.duration;)vt-=this._motionData.duration;const yt=this._motionData.curves;for(gt=0;gt<this._motionData.curveCount&&yt[gt].type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model;++gt)ft=evaluateCurve(this._motionData,gt,vt),yt[gt].id==this._modelCurveIdEyeBlink?ot=ft:yt[gt].id==this._modelCurveIdLipSync?at=ft:yt[gt].id==this._modelCurveIdOpacity&&(this._modelOpacity=ft,_.setModelOapcity(this.getModelOpacityValue()));for(;gt<this._motionData.curveCount&&yt[gt].type==CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;++gt){if(mt=_.getParameterIndex(yt[gt].id),mt==-1)continue;const bt=_.getParameterValueByIndex(mt);if(ft=evaluateCurve(this._motionData,gt,vt),ot!=Number.MAX_VALUE){for(let xt=0;xt<this._eyeBlinkParameterIds.length&&xt<st;++xt)if(this._eyeBlinkParameterIds[xt]==yt[gt].id){ft*=ot,ht|=1<<xt;break}}if(at!=Number.MAX_VALUE){for(let xt=0;xt<this._lipSyncParameterIds.length&&xt<st;++xt)if(this._lipSyncParameterIds[xt]==yt[gt].id){ft+=at,dt|=1<<xt;break}}let _t;if(yt[gt].fadeInTime<0&&yt[gt].fadeOutTime<0)_t=bt+(ft-bt)*tt;else{let xt,St;yt[gt].fadeInTime<0?xt=ct:xt=yt[gt].fadeInTime==0?1:CubismMath.getEasingSine((et-nt.getFadeInStartTime())/yt[gt].fadeInTime),yt[gt].fadeOutTime<0?St=ut:St=yt[gt].fadeOutTime==0||nt.getEndTime()<0?1:CubismMath.getEasingSine((nt.getEndTime()-et)/yt[gt].fadeOutTime);const Tt=this._weight*xt*St;_t=bt+(ft-bt)*Tt}_.setParameterValueByIndex(mt,_t,1)}{if(ot!=Number.MAX_VALUE)for(let bt=0;bt<this._eyeBlinkParameterIds.length&&bt<st;++bt){const _t=_.getParameterValueById(this._eyeBlinkParameterIds[bt]);if(ht>>bt&1)continue;const xt=_t+(ot-_t)*tt;_.setParameterValueById(this._eyeBlinkParameterIds[bt],xt)}if(at!=Number.MAX_VALUE)for(let bt=0;bt<this._lipSyncParameterIds.length&&bt<st;++bt){const _t=_.getParameterValueById(this._lipSyncParameterIds[bt]);if(dt>>bt&1)continue;const xt=_t+(at-_t)*tt;_.setParameterValueById(this._lipSyncParameterIds[bt],xt)}}for(;gt<this._motionData.curveCount&&yt[gt].type==CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;++gt)if(ft=evaluateCurve(this._motionData,gt,vt),CubismConfig.setOpacityFromMotion)_.setPartOpacityById(yt[gt].id,ft);else{if(mt=_.getParameterIndex(yt[gt].id),mt==-1)continue;_.setParameterValueByIndex(mt,ft)}it>=this._motionData.duration&&(this._isLoop?(nt.setStartTime(et),this._isLoopFadeIn&&nt.setFadeInStartTime(et)):(this._onFinishedMotion&&this._onFinishedMotion(this),nt.setIsFinished(!0))),this._lastWeight=tt}setIsLoop(_){this._isLoop=_}isLoop(){return this._isLoop}setIsLoopFadeIn(_){this._isLoopFadeIn=_}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(_,et){const tt=this._motionData.curves;for(let nt=0;nt<this._motionData.curveCount;++nt)if(_==tt[nt].id){tt[nt].fadeInTime=et;return}}setParameterFadeOutTime(_,et){const tt=this._motionData.curves;for(let nt=0;nt<this._motionData.curveCount;++nt)if(_==tt[nt].id){tt[nt].fadeOutTime=et;return}}getParameterFadeInTime(_){const et=this._motionData.curves;for(let tt=0;tt<this._motionData.curveCount;++tt)if(_==et[tt].id)return et[tt].fadeInTime;return-1}getParameterFadeOutTime(_){const et=this._motionData.curves;for(let tt=0;tt<this._motionData.curveCount;++tt)if(_==et[tt].id)return et[tt].fadeOutTime;return-1}setEffectIds(_,et){this._eyeBlinkParameterIds=_,this._lipSyncParameterIds=et}release(){this._motionData=void 0}parse(_){this._motionData=new CubismMotionData;const et=new CubismMotionJson(_);this._motionData.duration=et.getMotionDuration(),this._motionData.loop=et.isMotionLoop(),this._motionData.curveCount=et.getMotionCurveCount(),this._motionData.fps=et.getMotionFps(),this._motionData.eventCount=et.getEventCount();const tt=et.getEvaluationOptionFlag(EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted),nt=et.getMotionFadeInTime(),it=et.getMotionFadeOutTime();nt!==void 0?this._fadeInSeconds=nt<0?1:nt:this._fadeInSeconds=1,it!==void 0?this._fadeOutSeconds=it<0?1:it:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new CubismMotionCurve),this._motionData.segments=Array.from({length:et.getMotionTotalSegmentCount()}).map(()=>new CubismMotionSegment),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new CubismMotionEvent),this._motionData.points=[];let at=0,ot=0;for(let st=0;st<this._motionData.curveCount;++st){const dt=this._motionData.curves[st];switch(et.getMotionCurveTarget(st)){case TargetNameModel:dt.type=CubismMotionCurveTarget.CubismMotionCurveTarget_Model;break;case TargetNameParameter:dt.type=CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;break;case TargetNamePartOpacity:dt.type=CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;break;default:CubismLogWarning('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}dt.id=et.getMotionCurveId(st),dt.baseSegmentIndex=ot;const ht=et.getMotionCurveFadeInTime(st),ct=et.getMotionCurveFadeOutTime(st);dt.fadeInTime=ht!==void 0?ht:-1,dt.fadeOutTime=ct!==void 0?ct:-1;for(let ut=0;ut<et.getMotionCurveSegmentCount(st);){switch(ut==0?(this._motionData.segments[ot].basePointIndex=at,this._motionData.points[at]=new CubismMotionPoint(et.getMotionCurveSegment(st,ut),et.getMotionCurveSegment(st,ut+1)),at+=1,ut+=2):this._motionData.segments[ot].basePointIndex=at-1,et.getMotionCurveSegment(st,ut)){case CubismMotionSegmentType.CubismMotionSegmentType_Linear:{this._motionData.segments[ot].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Linear,this._motionData.segments[ot].evaluate=linearEvaluate,this._motionData.points[at]=new CubismMotionPoint(et.getMotionCurveSegment(st,ut+1),et.getMotionCurveSegment(st,ut+2)),at+=1,ut+=3;break}case CubismMotionSegmentType.CubismMotionSegmentType_Bezier:{this._motionData.segments[ot].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Bezier,tt||UseOldBeziersCurveMotion?this._motionData.segments[ot].evaluate=bezierEvaluate:this._motionData.segments[ot].evaluate=bezierEvaluateCardanoInterpretation,this._motionData.points[at]=new CubismMotionPoint(et.getMotionCurveSegment(st,ut+1),et.getMotionCurveSegment(st,ut+2)),this._motionData.points[at+1]=new CubismMotionPoint(et.getMotionCurveSegment(st,ut+3),et.getMotionCurveSegment(st,ut+4)),this._motionData.points[at+2]=new CubismMotionPoint(et.getMotionCurveSegment(st,ut+5),et.getMotionCurveSegment(st,ut+6)),at+=3,ut+=7;break}case CubismMotionSegmentType.CubismMotionSegmentType_Stepped:{this._motionData.segments[ot].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Stepped,this._motionData.segments[ot].evaluate=steppedEvaluate,this._motionData.points[at]=new CubismMotionPoint(et.getMotionCurveSegment(st,ut+1),et.getMotionCurveSegment(st,ut+2)),at+=1,ut+=3;break}case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[ot].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped,this._motionData.segments[ot].evaluate=inverseSteppedEvaluate,this._motionData.points[at]=new CubismMotionPoint(et.getMotionCurveSegment(st,ut+1),et.getMotionCurveSegment(st,ut+2)),at+=1,ut+=3;break}default:{CSM_ASSERT(0);break}}++dt.segmentCount,++ot}this._motionData.curves.push(dt)}for(let st=0;st<et.getEventCount();++st)this._motionData.events[st].fireTime=et.getEventTime(st),this._motionData.events[st].value=et.getEventValue(st);et.release()}getFiredEvent(_,et){this._firedEventValues.length=0;for(let tt=0;tt<this._motionData.eventCount;++tt)this._motionData.events[tt].fireTime>_&&this._motionData.events[tt].fireTime<=et&&this._firedEventValues.push(this._motionData.events[tt].value);return this._firedEventValues}isExistModelOpacity(){for(let _=0;_<this._motionData.curveCount;_++){const et=this._motionData.curves[_];if(et.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&et.id===IdNameOpacity)return!0}return!1}getModelOpacityIndex(){if(this.isExistModelOpacity())for(let _=0;_<this._motionData.curveCount;_++){const et=this._motionData.curves[_];if(et.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&et.id===IdNameOpacity)return _}return-1}getModelOpacityId(_){if(_!=-1){const et=this._motionData.curves[_];if(et.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&et.id===IdNameOpacity)return et.id}}getModelOpacityValue(){return this._modelOpacity}}class Cubism4MotionManager extends MotionManager{constructor(_,et){var tt;super(_,et),__publicField(this,"definitions"),__publicField(this,"groups",{idle:"Idle"}),__publicField(this,"motionDataType","json"),__publicField(this,"queueManager",new CubismMotionQueueManager),__publicField(this,"expressionManager"),__publicField(this,"eyeBlinkIds"),__publicField(this,"lipSyncIds",["ParamMouthOpenY"]),this.definitions=(tt=_.motions)!=null?tt:{},this.eyeBlinkIds=_.getEyeBlinkParameters()||[];const nt=_.getLipSyncParameters();nt!=null&&nt.length&&(this.lipSyncIds=nt),this.init(et)}init(_){super.init(_),this.settings.expressions&&(this.expressionManager=new Cubism4ExpressionManager(this.settings,_)),this.queueManager.setEventCallback((et,tt,nt)=>{this.emit("motion:"+tt)})}isFinished(){return this.queueManager.isFinished()}_startMotion(_,et){return _.setFinishedMotionHandler(et),this.queueManager.stopAllMotions(),this.queueManager.startMotion(_,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(_,et,tt){const nt=CubismMotion.create(_),it=new CubismMotionJson(_),at=(et===this.groups.idle?config$1.idleMotionFadingDuration:config$1.motionFadingDuration)/1e3;return it.getMotionFadeInTime()===void 0&&nt.setFadeInTime(tt.FadeInTime>0?tt.FadeInTime:at),it.getMotionFadeOutTime()===void 0&&nt.setFadeOutTime(tt.FadeOutTime>0?tt.FadeOutTime:at),nt.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),nt}getMotionFile(_){return _.File}getMotionName(_){return _.File}getSoundFile(_){return _.Sound}updateParameters(_,et){return this.queueManager.doUpdateMotion(_,et)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const ParamAngleX="ParamAngleX",ParamAngleY="ParamAngleY",ParamAngleZ="ParamAngleZ",ParamEyeBallX="ParamEyeBallX",ParamEyeBallY="ParamEyeBallY",ParamMouthForm="ParamMouthForm",ParamBodyAngleX="ParamBodyAngleX",ParamBreath="ParamBreath";class CubismBreath{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new CubismBreath}setParameters(_){this._breathParameters=_}getParameters(){return this._breathParameters}updateParameters(_,et){this._currentTime+=et;const tt=this._currentTime*2*3.14159;for(let nt=0;nt<this._breathParameters.length;++nt){const it=this._breathParameters[nt];_.addParameterValueById(it.parameterId,it.offset+it.peak*Math.sin(tt/it.cycle),it.weight)}}}class BreathParameterData{constructor(_,et,tt,nt,it){this.parameterId=_??void 0,this.offset=et??0,this.peak=tt??0,this.cycle=nt??0,this.weight=it??0}}const _CubismEyeBlink=class Ho{static create(_){return new Ho(_)}setBlinkingInterval(_){this._blinkingIntervalSeconds=_}setBlinkingSetting(_,et,tt){this._closingSeconds=_,this._closedSeconds=et,this._openingSeconds=tt}setParameterIds(_){this._parameterIds=_}getParameterIds(){return this._parameterIds}updateParameters(_,et){this._userTimeSeconds+=et;let tt,nt=0;switch(this._blinkingState){case 2:nt=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,nt>=1&&(nt=1,this._blinkingState=3,this._stateStartTimeSeconds=this._userTimeSeconds),tt=1-nt;break;case 3:nt=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,nt>=1&&(this._blinkingState=4,this._stateStartTimeSeconds=this._userTimeSeconds),tt=0;break;case 4:nt=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,nt>=1&&(nt=1,this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming()),tt=nt;break;case 1:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=2,this._stateStartTimeSeconds=this._userTimeSeconds),tt=1;break;case 0:default:this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming(),tt=1;break}Ho.CloseIfZero||(tt=-tt);for(let it=0;it<this._parameterIds.length;++it)_.setParameterValueById(this._parameterIds[it],tt)}constructor(_){var et,tt;this._blinkingState=0,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],_!=null&&(this._parameterIds=(tt=(et=_.getEyeBlinkParameters())==null?void 0:et.slice())!=null?tt:this._parameterIds)}determinNextBlinkingTiming(){const _=Math.random();return this._userTimeSeconds+_*(2*this._blinkingIntervalSeconds-1)}};_CubismEyeBlink.CloseIfZero=!0;let CubismEyeBlink=_CubismEyeBlink;class csmRect{constructor(_=0,et=0,tt=0,nt=0){this.x=_,this.y=et,this.width=tt,this.height=nt}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(_){this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height}expand(_,et){this.x-=_,this.y-=et,this.width+=_*2,this.height+=et*2}}const ColorChannelCount=4,ClippingMaskMaxCountOnDefault=36,ClippingMaskMaxCountOnMultiRenderTexture=32,ShaderCount=10;let s_instance,s_viewport,s_fbo;class CubismClippingManager_WebGL{getChannelFlagAsColor(_){return this._channelColors[_]}getMaskRenderTexture(){if(this._maskTexture&&this._maskTexture.textures!=null)this._maskTexture.frameNo=this._currentFrameNo;else{this._maskRenderTextures=[],this._maskColorBuffers=[];const _=this._clippingMaskBufferSize;for(let et=0;et<this._renderTextureCount;et++)this._maskColorBuffers.push(this.gl.createTexture()),this.gl.bindTexture(this.gl.TEXTURE_2D,this._maskColorBuffers[et]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,_,_,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this._maskRenderTextures.push(this.gl.createFramebuffer()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTextures[et]),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._maskColorBuffers[et],0);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),this._maskTexture=new CubismRenderTextureResource(this._currentFrameNo,this._maskRenderTextures)}return this._maskTexture.textures}setGL(_){this.gl=_}calcClippedDrawTotalBounds(_,et){let tt=Number.MAX_VALUE,nt=Number.MAX_VALUE,it=Number.MIN_VALUE,at=Number.MIN_VALUE;const ot=et._clippedDrawableIndexList.length;for(let st=0;st<ot;st++){const dt=et._clippedDrawableIndexList[st],ht=_.getDrawableVertexCount(dt),ct=_.getDrawableVertices(dt);let ut=Number.MAX_VALUE,ft=Number.MAX_VALUE,gt=-Number.MAX_VALUE,mt=-Number.MAX_VALUE;const vt=ht*Constant.vertexStep;for(let yt=Constant.vertexOffset;yt<vt;yt+=Constant.vertexStep){const bt=ct[yt],_t=ct[yt+1];bt<ut&&(ut=bt),bt>gt&&(gt=bt),_t<ft&&(ft=_t),_t>mt&&(mt=_t)}if(ut!=Number.MAX_VALUE)if(ut<tt&&(tt=ut),ft<nt&&(nt=ft),gt>it&&(it=gt),mt>at&&(at=mt),tt==Number.MAX_VALUE)et._allClippedDrawRect.x=0,et._allClippedDrawRect.y=0,et._allClippedDrawRect.width=0,et._allClippedDrawRect.height=0,et._isUsing=!1;else{et._isUsing=!0;const yt=it-tt,bt=at-nt;et._allClippedDrawRect.x=tt,et._allClippedDrawRect.y=nt,et._allClippedDrawRect.width=yt,et._allClippedDrawRect.height=bt}}}constructor(){this._currentMaskRenderTexture=null,this._currentFrameNo=0,this._renderTextureCount=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new csmRect,this._tmpMatrix=new CubismMatrix44,this._tmpMatrixForMask=new CubismMatrix44,this._tmpMatrixForDraw=new CubismMatrix44;let _=new CubismTextureColor;_.R=1,_.G=0,_.B=0,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=1,_.B=0,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=0,_.B=1,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=0,_.B=0,_.A=1,this._channelColors.push(_)}release(){var _;const et=this;for(let tt=0;tt<this._clippingContextListForMask.length;tt++)this._clippingContextListForMask[tt]&&((_=this._clippingContextListForMask[tt])==null||_.release());if(et._clippingContextListForMask=void 0,et._clippingContextListForDraw=void 0,this._maskTexture){for(let tt=0;tt<this._maskTexture.textures.length;tt++)this.gl.deleteFramebuffer(this._maskTexture.textures[tt]);this._maskTexture=void 0}if(et._channelColors=void 0,this._maskColorBuffers)for(let tt=0;tt<this._maskColorBuffers.length;tt++)this.gl.deleteTexture(this._maskColorBuffers[tt]);this._maskColorBuffers=void 0,this._maskRenderTextures=void 0,this._clearedFrameBufferflags=void 0}initialize(_,et,tt,nt,it){it%1!=0&&(CubismLogWarning("The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer."),it=~~it),it<1&&CubismLogWarning("The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1."),this._renderTextureCount=it<1?1:it,this._clearedFrameBufferflags=[];for(let at=0;at<et;at++){if(nt[at]<=0){this._clippingContextListForDraw.push(null);continue}let ot=this.findSameClip(tt[at],nt[at]);ot==null&&(ot=new CubismClippingContext(this,tt[at],nt[at]),this._clippingContextListForMask.push(ot)),ot.addClippedDrawable(at),this._clippingContextListForDraw.push(ot)}}setupClippingContext(_,et){this._currentFrameNo++;let tt=0;for(let nt=0;nt<this._clippingContextListForMask.length;nt++){const it=this._clippingContextListForMask[nt];this.calcClippedDrawTotalBounds(_,it),it._isUsing&&tt++}if(tt>0){this.setupLayoutBounds(et.isUsingHighPrecisionMask()?0:tt),et.isUsingHighPrecisionMask()||(this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._currentMaskRenderTexture=this.getMaskRenderTexture()[0],et.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),this._clearedFrameBufferflags||(this._clearedFrameBufferflags=[]);for(let nt=0;nt<this._renderTextureCount;nt++)this._clearedFrameBufferflags[nt]=!1;for(let nt=0;nt<this._clippingContextListForMask.length;nt++){const it=this._clippingContextListForMask[nt],at=it._allClippedDrawRect,ot=it._layoutBounds,st=.05;let dt=0,ht=0;const ct=this.getMaskRenderTexture()[it._bufferIndex];if(this._currentMaskRenderTexture!=ct&&!et.isUsingHighPrecisionMask()&&(this._currentMaskRenderTexture=ct,et.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),et.isUsingHighPrecisionMask()){const ut=_.getPixelsPerUnit(),ft=it.getClippingManager()._clippingMaskBufferSize,gt=ot.width*ft,mt=ot.height*ft;this._tmpBoundsOnModel.setRect(at),this._tmpBoundsOnModel.width*ut>gt?(this._tmpBoundsOnModel.expand(at.width*st,0),dt=ot.width/this._tmpBoundsOnModel.width):dt=ut/gt,this._tmpBoundsOnModel.height*ut>mt?(this._tmpBoundsOnModel.expand(0,at.height*st),ht=ot.height/this._tmpBoundsOnModel.height):ht=ut/mt}else this._tmpBoundsOnModel.setRect(at),this._tmpBoundsOnModel.expand(at.width*st,at.height*st),dt=ot.width/this._tmpBoundsOnModel.width,ht=ot.height/this._tmpBoundsOnModel.height;if(this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(ot.x,ot.y),this._tmpMatrix.scaleRelative(dt,ht),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(ot.x,ot.y),this._tmpMatrix.scaleRelative(dt,ht),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),it._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),it._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray()),!et.isUsingHighPrecisionMask()){const ut=it._clippingIdCount;for(let ft=0;ft<ut;ft++){const gt=it._clippingIdList[ft];_.getDrawableDynamicFlagVertexPositionsDidChange(gt)&&(et.setIsCulling(_.getDrawableCulling(gt)!=!1),this._clearedFrameBufferflags[it._bufferIndex]||(this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this._clearedFrameBufferflags[it._bufferIndex]=!0),et.setClippingContextBufferForMask(it),et.drawMesh(_.getDrawableTextureIndex(gt),_.getDrawableVertexIndexCount(gt),_.getDrawableVertexCount(gt),_.getDrawableVertexIndices(gt),_.getDrawableVertices(gt),_.getDrawableVertexUvs(gt),_.getMultiplyColor(gt),_.getScreenColor(gt),_.getDrawableOpacity(gt),CubismBlendMode.CubismBlendMode_Normal,!1))}}}et.isUsingHighPrecisionMask()||(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),et.setClippingContextBufferForMask(null),this.gl.viewport(s_viewport[0],s_viewport[1],s_viewport[2],s_viewport[3]))}}findSameClip(_,et){for(let tt=0;tt<this._clippingContextListForMask.length;tt++){const nt=this._clippingContextListForMask[tt],it=nt._clippingIdCount;if(it!=et)continue;let at=0;for(let ot=0;ot<it;ot++){const st=nt._clippingIdList[ot];for(let dt=0;dt<it;dt++)if(_[dt]==st){at++;break}}if(at==it)return nt}return null}setupLayoutBounds(_){const et=this._renderTextureCount<=1?ClippingMaskMaxCountOnDefault:ClippingMaskMaxCountOnMultiRenderTexture*this._renderTextureCount;if(_<=0||_>et){_>et&&CubismLogError(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,_-et,this._renderTextureCount,_);for(let dt=0;dt<this._clippingContextListForMask.length;dt++){const ht=this._clippingContextListForMask[dt];ht._layoutChannelNo=0,ht._layoutBounds.x=0,ht._layoutBounds.y=0,ht._layoutBounds.width=1,ht._layoutBounds.height=1,ht._bufferIndex=0}return}const tt=this._renderTextureCount<=1?9:8;let nt=_/this._renderTextureCount,it=_%this._renderTextureCount;nt=~~nt,it=~~it;let at=nt/ColorChannelCount,ot=nt%ColorChannelCount;at=~~at,ot=~~ot;let st=0;for(let dt=0;dt<this._renderTextureCount;dt++)for(let ht=0;ht<ColorChannelCount;ht++){let ct=at+(ht<ot?1:0);const ut=ot+1>=ColorChannelCount?0:ot+1;if(ct<tt&&ht==ut&&(ct+=dt<it?1:0),ct!=0)if(ct==1){const ft=this._clippingContextListForMask[st++];ft._layoutChannelNo=ht,ft._layoutBounds.x=0,ft._layoutBounds.y=0,ft._layoutBounds.width=1,ft._layoutBounds.height=1,ft._bufferIndex=dt}else if(ct==2)for(let ft=0;ft<ct;ft++){let gt=ft%2;gt=~~gt;const mt=this._clippingContextListForMask[st++];mt._layoutChannelNo=ht,mt._layoutBounds.x=gt*.5,mt._layoutBounds.y=0,mt._layoutBounds.width=.5,mt._layoutBounds.height=1,mt._bufferIndex=dt}else if(ct<=4)for(let ft=0;ft<ct;ft++){let gt=ft%2,mt=ft/2;gt=~~gt,mt=~~mt;const vt=this._clippingContextListForMask[st++];vt._layoutChannelNo=ht,vt._layoutBounds.x=gt*.5,vt._layoutBounds.y=mt*.5,vt._layoutBounds.width=.5,vt._layoutBounds.height=.5,vt._bufferIndex=dt}else if(ct<=tt)for(let ft=0;ft<ct;ft++){let gt=ft%3,mt=ft/3;gt=~~gt,mt=~~mt;const vt=this._clippingContextListForMask[st++];vt._layoutChannelNo=ht,vt._layoutBounds.x=gt/3,vt._layoutBounds.y=mt/3,vt._layoutBounds.width=1/3,vt._layoutBounds.height=1/3,vt._bufferIndex=dt}else if(CubismConfig.supportMoreMaskDivisions&&ct<=16)for(let ft=0;ft<ct;ft++){let gt=ft%4,mt=ft/4;gt=~~gt,mt=~~mt;const vt=this._clippingContextListForMask[st++];vt._layoutChannelNo=ht,vt._layoutBounds.x=gt/4,vt._layoutBounds.y=mt/4,vt._layoutBounds.width=1/4,vt._layoutBounds.height=1/4,vt._bufferIndex=dt}else{CubismLogError(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,_-et,this._renderTextureCount,_);for(let ft=0;ft<ct;ft++){const gt=this._clippingContextListForMask[st++];gt._layoutChannelNo=0,gt._layoutBounds.x=0,gt._layoutBounds.y=0,gt._layoutBounds.width=1,gt._layoutBounds.height=1,gt._bufferIndex=0}}}}getColorBuffer(){return this._maskColorBuffers}getClippingContextListForDraw(){return this._clippingContextListForDraw}getClippingMaskCount(){return this._clippingContextListForMask.length}setClippingMaskBufferSize(_){this._clippingMaskBufferSize=_}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}getRenderTextureCount(){return this._renderTextureCount}}class CubismRenderTextureResource{constructor(_,et){this.frameNo=_,this.textures=et}}class CubismClippingContext{constructor(_,et,tt){this._isUsing=!1,this._owner=_,this._clippingIdList=et,this._clippingIdCount=tt,this._allClippedDrawRect=new csmRect,this._layoutBounds=new csmRect,this._clippedDrawableIndexList=[],this._matrixForMask=new CubismMatrix44,this._matrixForDraw=new CubismMatrix44,this._bufferIndex=0}release(){const _=this;_._layoutBounds=void 0,_._allClippedDrawRect=void 0,_._clippedDrawableIndexList=void 0}addClippedDrawable(_){this._clippedDrawableIndexList.push(_)}getClippingManager(){return this._owner}setGl(_){this._owner.setGL(_)}}class CubismRendererProfile_WebGL{setGlEnable(_,et){et?this.gl.enable(_):this.gl.disable(_)}setGlEnableVertexAttribArray(_,et){et?this.gl.enableVertexAttribArray(_):this.gl.disableVertexAttribArray(_)}save(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING),this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING),this._lastProgram=this.gl.getParameter(this.gl.CURRENT_PROGRAM),this._lastActiveTexture=this.gl.getParameter(this.gl.ACTIVE_TEXTURE),this.gl.activeTexture(this.gl.TEXTURE1),this._lastTexture1Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this.gl.activeTexture(this.gl.TEXTURE0),this._lastTexture0Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._lastVertexAttribArrayEnabled[0]=this.gl.getVertexAttrib(0,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[1]=this.gl.getVertexAttrib(1,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[2]=this.gl.getVertexAttrib(2,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[3]=this.gl.getVertexAttrib(3,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastScissorTest=this.gl.isEnabled(this.gl.SCISSOR_TEST),this._lastStencilTest=this.gl.isEnabled(this.gl.STENCIL_TEST),this._lastDepthTest=this.gl.isEnabled(this.gl.DEPTH_TEST),this._lastCullFace=this.gl.isEnabled(this.gl.CULL_FACE),this._lastBlend=this.gl.isEnabled(this.gl.BLEND),this._lastFrontFace=this.gl.getParameter(this.gl.FRONT_FACE),this._lastColorMask=this.gl.getParameter(this.gl.COLOR_WRITEMASK),this._lastBlending[0]=this.gl.getParameter(this.gl.BLEND_SRC_RGB),this._lastBlending[1]=this.gl.getParameter(this.gl.BLEND_DST_RGB),this._lastBlending[2]=this.gl.getParameter(this.gl.BLEND_SRC_ALPHA),this._lastBlending[3]=this.gl.getParameter(this.gl.BLEND_DST_ALPHA),this._lastFBO=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this._lastViewport=this.gl.getParameter(this.gl.VIEWPORT)}restore(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this.gl.useProgram(this._lastProgram),this.setGlEnableVertexAttribArray(0,this._lastVertexAttribArrayEnabled[0]),this.setGlEnableVertexAttribArray(1,this._lastVertexAttribArrayEnabled[1]),this.setGlEnableVertexAttribArray(2,this._lastVertexAttribArrayEnabled[2]),this.setGlEnableVertexAttribArray(3,this._lastVertexAttribArrayEnabled[3]),this.setGlEnable(this.gl.SCISSOR_TEST,this._lastScissorTest),this.setGlEnable(this.gl.STENCIL_TEST,this._lastStencilTest),this.setGlEnable(this.gl.DEPTH_TEST,this._lastDepthTest),this.setGlEnable(this.gl.CULL_FACE,this._lastCullFace),this.setGlEnable(this.gl.BLEND,this._lastBlend),this.gl.frontFace(this._lastFrontFace),this.gl.colorMask(this._lastColorMask[0],this._lastColorMask[1],this._lastColorMask[2],this._lastColorMask[3]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._lastArrayBufferBinding),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._lastElementArrayBufferBinding),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture1Binding2D),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture0Binding2D),this.gl.activeTexture(this._lastActiveTexture),this.gl.blendFuncSeparate(this._lastBlending[0],this._lastBlending[1],this._lastBlending[2],this._lastBlending[3])}setGl(_){this.gl=_}constructor(){this._lastVertexAttribArrayEnabled=new Array(4),this._lastColorMask=new Array(4),this._lastBlending=new Array(4),this._lastViewport=new Array(4)}}class CubismShader_WebGL{static getInstance(){return s_instance==null&&(s_instance=new CubismShader_WebGL),s_instance}static deleteInstance(){s_instance&&(s_instance.release(),s_instance=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(_,et,tt,nt,it,at,ot,st,dt,ht,ct,ut,ft,gt,mt){ft||CubismLogError("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let vt,yt,bt,_t;const xt=_.getClippingContextBufferForMask();if(xt!=null){const St=this._shaderSets[0];this.gl.useProgram(St.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,et),this.gl.uniform1i(St.samplerTexture0Location,0),ot.vertex==null&&(ot.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,ot.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,nt,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(St.attributePositionLocation),this.gl.vertexAttribPointer(St.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),ot.uv==null&&(ot.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,ot.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,at,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(St.attributeTexCoordLocation),this.gl.vertexAttribPointer(St.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const Tt=xt._layoutChannelNo,wt=xt.getClippingManager().getChannelFlagAsColor(Tt);this.gl.uniform4f(St.uniformChannelFlagLocation,wt.R,wt.G,wt.B,wt.A),this.gl.uniformMatrix4fv(St.uniformClipMatrixLocation,!1,xt._matrixForMask.getArray());const Ct=xt._layoutBounds;this.gl.uniform4f(St.uniformBaseColorLocation,Ct.x*2-1,Ct.y*2-1,Ct.getRight()*2-1,Ct.getBottom()*2-1),this.gl.uniform4f(St.uniformMultiplyColorLocation,ct.R,ct.G,ct.B,ct.A),this.gl.uniform4f(St.uniformScreenColorLocation,ut.R,ut.G,ut.B,ut.A),vt=this.gl.ZERO,yt=this.gl.ONE_MINUS_SRC_COLOR,bt=this.gl.ZERO,_t=this.gl.ONE_MINUS_SRC_ALPHA}else{const St=_.getClippingContextBufferForDraw(),wt=St!=null?mt?2:1:0;let Ct;switch(dt){case CubismBlendMode.CubismBlendMode_Normal:default:Ct=this._shaderSets[1+wt],vt=this.gl.ONE,yt=this.gl.ONE_MINUS_SRC_ALPHA,bt=this.gl.ONE,_t=this.gl.ONE_MINUS_SRC_ALPHA;break;case CubismBlendMode.CubismBlendMode_Additive:Ct=this._shaderSets[4+wt],vt=this.gl.ONE,yt=this.gl.ONE,bt=this.gl.ZERO,_t=this.gl.ONE;break;case CubismBlendMode.CubismBlendMode_Multiplicative:Ct=this._shaderSets[7+wt],vt=this.gl.DST_COLOR,yt=this.gl.ONE_MINUS_SRC_ALPHA,bt=this.gl.ZERO,_t=this.gl.ONE;break}if(this.gl.useProgram(Ct.shaderProgram),ot.vertex==null&&(ot.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,ot.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,nt,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Ct.attributePositionLocation),this.gl.vertexAttribPointer(Ct.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),ot.uv==null&&(ot.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,ot.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,at,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Ct.attributeTexCoordLocation),this.gl.vertexAttribPointer(Ct.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),St!=null){this.gl.activeTexture(this.gl.TEXTURE1);const Et=St.getClippingManager().getColorBuffer()[_.getClippingContextBufferForDraw()._bufferIndex];this.gl.bindTexture(this.gl.TEXTURE_2D,Et),this.gl.uniform1i(Ct.samplerTexture1Location,1),this.gl.uniformMatrix4fv(Ct.uniformClipMatrixLocation,!1,St._matrixForDraw.getArray());const At=St._layoutChannelNo,Pt=St.getClippingManager().getChannelFlagAsColor(At);this.gl.uniform4f(Ct.uniformChannelFlagLocation,Pt.R,Pt.G,Pt.B,Pt.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,et),this.gl.uniform1i(Ct.samplerTexture0Location,0),this.gl.uniformMatrix4fv(Ct.uniformMatrixLocation,!1,gt.getArray()),this.gl.uniform4f(Ct.uniformBaseColorLocation,ht.R,ht.G,ht.B,ht.A),this.gl.uniform4f(Ct.uniformMultiplyColorLocation,ct.R,ct.G,ct.B,ct.A),this.gl.uniform4f(Ct.uniformScreenColorLocation,ut.R,ut.G,ut.B,ut.A)}ot.index==null&&(ot.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,ot.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,it,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(vt,yt,bt,_t)}releaseShaderProgram(){for(let _=0;_<this._shaderSets.length;_++)this.gl.deleteProgram(this._shaderSets[_].shaderProgram),this._shaderSets[_].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let _=0;_<ShaderCount;_++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(vertexShaderSrcSetupMask,fragmentShaderSrcsetupMask),this._shaderSets[1].shaderProgram=this.loadShaderProgram(vertexShaderSrc,fragmentShaderSrcPremultipliedAlpha),this._shaderSets[2].shaderProgram=this.loadShaderProgram(vertexShaderSrcMasked,fragmentShaderSrcMaskPremultipliedAlpha),this._shaderSets[3].shaderProgram=this.loadShaderProgram(vertexShaderSrcMasked,fragmentShaderSrcMaskInvertedPremultipliedAlpha),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[0].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_multiplyColor"),this._shaderSets[0].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_screenColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[1].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_multiplyColor"),this._shaderSets[1].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_screenColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[2].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_multiplyColor"),this._shaderSets[2].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_screenColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[3].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_multiplyColor"),this._shaderSets[3].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_screenColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[4].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_multiplyColor"),this._shaderSets[4].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_screenColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[5].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_multiplyColor"),this._shaderSets[5].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_screenColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[6].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_multiplyColor"),this._shaderSets[6].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_screenColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[7].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_multiplyColor"),this._shaderSets[7].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_screenColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[8].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_multiplyColor"),this._shaderSets[8].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_screenColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor"),this._shaderSets[9].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_multiplyColor"),this._shaderSets[9].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_screenColor")}loadShaderProgram(_,et){const tt=this.gl.createProgram(),nt=this.compileShaderSource(this.gl.VERTEX_SHADER,_);if(!nt)return CubismLogError("Vertex shader compile error!"),0;const it=this.compileShaderSource(this.gl.FRAGMENT_SHADER,et);return it?(this.gl.attachShader(tt,nt),this.gl.attachShader(tt,it),this.gl.linkProgram(tt),this.gl.getProgramParameter(tt,this.gl.LINK_STATUS)?(this.gl.deleteShader(nt),this.gl.deleteShader(it),tt):(CubismLogError("Failed to link program: {0}",tt),this.gl.deleteShader(nt),this.gl.deleteShader(it),tt&&this.gl.deleteProgram(tt),0)):(CubismLogError("Vertex shader compile error!"),0)}compileShaderSource(_,et){const tt=et,nt=this.gl.createShader(_);if(this.gl.shaderSource(nt,tt),this.gl.compileShader(nt),!nt){const at=this.gl.getShaderInfoLog(nt);CubismLogError("Shader compile log: {0} ",at)}return this.gl.getShaderParameter(nt,this.gl.COMPILE_STATUS)?nt:(this.gl.deleteShader(nt),null)}setGl(_){this.gl=_}}const vertexShaderSrcSetupMask="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",fragmentShaderSrcsetupMask="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",vertexShaderSrc="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",vertexShaderSrcMasked="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",fragmentShaderSrcPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 color = texColor * u_baseColor;   gl_FragColor = vec4(color.rgb, color.a);}",fragmentShaderSrcMaskPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",fragmentShaderSrcMaskInvertedPremultipliedAlpha="precision mediump float;varying vec2      v_texCoord;varying vec4      v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4      u_channelFlag;uniform vec4      u_baseColor;uniform vec4      u_multiplyColor;uniform vec4      u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * (1.0 - maskVal);   gl_FragColor = col_formask;}";class CubismRenderer_WebGL extends CubismRenderer{initialize(_,et=1){_.isUsingMasking()&&(this._clippingManager=new CubismClippingManager_WebGL,this._clippingManager.initialize(_,_.getDrawableCount(),_.getDrawableMasks(),_.getDrawableMaskCounts(),et));for(let tt=_.getDrawableCount()-1;tt>=0;tt--)this._sortedDrawableIndexList[tt]=0;super.initialize(_)}bindTexture(_,et){this._textures[_]=et}getBindedTextures(){return this._textures}setClippingMaskBufferSize(_){if(!this._model.isUsingMasking())return;const et=this._clippingManager.getRenderTextureCount();this._clippingManager.release(),this._clippingManager=new CubismClippingManager_WebGL,this._clippingManager.setClippingMaskBufferSize(_),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts(),et)}getClippingMaskBufferSize(){return this._model.isUsingMasking()?this._clippingManager.getClippingMaskBufferSize():-1}getRenderTextureCount(){return this._model.isUsingMasking()?this._clippingManager.getRenderTextureCount():-1}constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._rendererProfile=new CubismRendererProfile_WebGL,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}release(){var _,et,tt;const nt=this;this._clippingManager.release(),nt._clippingManager=void 0,(_=this.gl)==null||_.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(et=this.gl)==null||et.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(tt=this.gl)==null||tt.deleteBuffer(this._bufferData.index),this._bufferData.index=null,nt._bufferData=void 0,nt._textures=void 0}doDrawModel(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._clippingManager!=null&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();const _=this.getModel().getDrawableCount(),et=this.getModel().getDrawableRenderOrders();for(let tt=0;tt<_;++tt){const nt=et[tt];this._sortedDrawableIndexList[nt]=tt}for(let tt=0;tt<_;++tt){const nt=this._sortedDrawableIndexList[tt];if(!this.getModel().getDrawableDynamicFlagIsVisible(nt))continue;const it=this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[nt]:null;if(it!=null&&this.isUsingHighPrecisionMask()){it._isUsing&&(this.gl.viewport(0,0,this._clippingManager.getClippingMaskBufferSize(),this._clippingManager.getClippingMaskBufferSize()),this.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,it.getClippingManager().getMaskRenderTexture()[it._bufferIndex]),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT));{const at=it._clippingIdCount;for(let ot=0;ot<at;ot++){const st=it._clippingIdList[ot];this._model.getDrawableDynamicFlagVertexPositionsDidChange(st)&&(this.setIsCulling(this._model.getDrawableCulling(st)!=!1),this.setClippingContextBufferForMask(it),this.drawMesh(this.getModel().getDrawableTextureIndex(st),this.getModel().getDrawableVertexIndexCount(st),this.getModel().getDrawableVertexCount(st),this.getModel().getDrawableVertexIndices(st),this.getModel().getDrawableVertices(st),this.getModel().getDrawableVertexUvs(st),this.getModel().getMultiplyColor(st),this.getModel().getScreenColor(st),this.getModel().getDrawableOpacity(st),CubismBlendMode.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),this.setClippingContextBufferForMask(null),this.gl.viewport(s_viewport[0],s_viewport[1],s_viewport[2],s_viewport[3]),this.preDraw()}this.setClippingContextBufferForDraw(it),this.setIsCulling(this.getModel().getDrawableCulling(nt)),this.drawMesh(this.getModel().getDrawableTextureIndex(nt),this.getModel().getDrawableVertexIndexCount(nt),this.getModel().getDrawableVertexCount(nt),this.getModel().getDrawableVertexIndices(nt),this.getModel().getDrawableVertices(nt),this.getModel().getDrawableVertexUvs(nt),this.getModel().getMultiplyColor(nt),this.getModel().getScreenColor(nt),this.getModel().getDrawableOpacity(nt),this.getModel().getDrawableBlendMode(nt),this.getModel().getDrawableInvertedMaskBit(nt))}}drawMesh(_,et,tt,nt,it,at,ot,st,dt,ht,ct){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const ut=this.getModelColor();this.getClippingContextBufferForMask()==null&&(ut.A*=dt,this.isPremultipliedAlpha()&&(ut.R*=ut.A,ut.G*=ut.A,ut.B*=ut.A));let ft=null;this._textures[_]!=null&&(ft=this._textures[_]),CubismShader_WebGL.getInstance().setupShaderProgram(this,ft,tt,it,nt,at,this._bufferData,dt,ht,ut,ot,st,this.isPremultipliedAlpha(),this.getMvpMatrix(),ct),this.gl.drawElements(this.gl.TRIANGLES,et,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}saveProfile(){this._rendererProfile.save()}restoreProfile(){this._rendererProfile.restore()}static doStaticRelease(){CubismShader_WebGL.deleteInstance()}setRenderState(_,et){s_fbo=_,s_viewport=et}preDraw(){if(this.firstDraw&&(this.firstDraw=!1),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.getAnisotropy()>0&&this._extension)for(const _ of Object.entries(this._textures))this.gl.bindTexture(this.gl.TEXTURE_2D,_),this.gl.texParameterf(this.gl.TEXTURE_2D,this._extension.TEXTURE_MAX_ANISOTROPY_EXT,this.getAnisotropy())}setClippingContextBufferForMask(_){this._clippingContextBufferForMask=_}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(_){this._clippingContextBufferForDraw=_}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(_){this.gl=_,this._clippingManager&&this._clippingManager.setGL(_),CubismShader_WebGL.getInstance().setGl(_),this._rendererProfile.setGl(_),this._extension=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}}CubismRenderer.staticRelease=()=>{CubismRenderer_WebGL.doStaticRelease()};const tempMatrix=new CubismMatrix44;class Cubism4InternalModel extends InternalModel{constructor(_,et,tt){super(),__publicField(this,"settings"),__publicField(this,"coreModel"),__publicField(this,"motionManager"),__publicField(this,"lipSync",!0),__publicField(this,"breath",CubismBreath.create()),__publicField(this,"eyeBlink"),__publicField(this,"userData"),__publicField(this,"renderer",new CubismRenderer_WebGL),__publicField(this,"idParamAngleX",ParamAngleX),__publicField(this,"idParamAngleY",ParamAngleY),__publicField(this,"idParamAngleZ",ParamAngleZ),__publicField(this,"idParamEyeBallX",ParamEyeBallX),__publicField(this,"idParamEyeBallY",ParamEyeBallY),__publicField(this,"idParamBodyAngleX",ParamBodyAngleX),__publicField(this,"idParamBreath",ParamBreath),__publicField(this,"idParamMouthForm",ParamMouthForm),__publicField(this,"pixelsPerUnit",1),__publicField(this,"centeringTransform",new Matrix),this.coreModel=_,this.settings=et,this.motionManager=new Cubism4MotionManager(et,tt),this.init()}init(){var _;super.init(),(_=this.settings.getEyeBlinkParameters())!=null&&_.length&&(this.eyeBlink=CubismEyeBlink.create(this.settings)),this.breath.setParameters([new BreathParameterData(this.idParamAngleX,0,15,6.5345,.5),new BreathParameterData(this.idParamAngleY,0,8,3.5345,.5),new BreathParameterData(this.idParamAngleZ,0,10,5.5345,.5),new BreathParameterData(this.idParamBodyAngleX,0,4,15.5345,.5),new BreathParameterData(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const _={};if(this.settings.layout)for(const[et,tt]of Object.entries(this.settings.layout)){const nt=et.charAt(0).toLowerCase()+et.slice(1);_[nt]=tt}return _}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(_,et){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(_),this.renderer._clippingManager._currentFrameNo=et,this.renderer._clippingManager._maskTexture=void 0,CubismShader_WebGL.getInstance()._shaderSets=[]}bindTexture(_,et){this.renderer.bindTexture(_,et)}getHitAreaDefs(){var _,et;return(et=(_=this.settings.hitAreas)==null?void 0:_.map(tt=>({id:tt.Id,name:tt.Name,index:this.coreModel.getDrawableIndex(tt.Id)})))!=null?et:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(_){return this.coreModel.getDrawableIndex(_)}getDrawableVertices(_){if(typeof _=="string"&&(_=this.coreModel.getDrawableIndex(_),_===-1))throw new TypeError("Unable to find drawable ID: "+_);const et=this.coreModel.getDrawableVertices(_).slice();for(let tt=0;tt<et.length;tt+=2)et[tt]=et[tt]*this.pixelsPerUnit+this.originalWidth/2,et[tt+1]=-et[tt+1]*this.pixelsPerUnit+this.originalHeight/2;return et}updateTransform(_){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(_)}update(_,et){var tt,nt,it,at;super.update(_,et),_/=1e3,et/=1e3;const ot=this.coreModel;this.emit("beforeMotionUpdate");const st=this.motionManager.update(this.coreModel,et);if(this.emit("afterMotionUpdate"),ot.saveParameters(),(tt=this.motionManager.expressionManager)==null||tt.update(ot,et),st||(nt=this.eyeBlink)==null||nt.updateParameters(ot,_),this.updateFocus(),this.updateNaturalMovements(_*1e3,et*1e3),this.lipSync&&this.motionManager.currentAudio){let dt=this.motionManager.mouthSync(),ht=0;const ct=1,ut=1.2;dt>0&&(ht=.4),dt=clamp$1(dt*ut,ht,ct);for(let ft=0;ft<this.motionManager.lipSyncIds.length;++ft)ot.addParameterValueById(this.motionManager.lipSyncIds[ft],dt,.8)}(it=this.physics)==null||it.evaluate(ot,_),(at=this.pose)==null||at.updateParameters(ot,_),this.emit("beforeModelUpdate"),ot.update(),ot.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateFacialEmotion(_){this.coreModel.addParameterValueById(this.idParamMouthForm,_)}updateNaturalMovements(_,et){var tt;(tt=this.breath)==null||tt.updateParameters(this.coreModel,_/1e3)}draw(_){const et=this.drawingMatrix,tt=tempMatrix.getArray();tt[0]=et.a,tt[1]=et.b,tt[4]=-et.c,tt[5]=-et.d,tt[12]=et.tx,tt[13]=et.ty,this.renderer.setMvpMatrix(tempMatrix),this.renderer.setRenderState(_.getParameter(_.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}class CubismModelSettingsJson{constructor(_){this.groups=_.Groups,this.hitAreas=_.HitAreas,this.layout=_.Layout,this.moc=_.FileReferences.Moc,this.expressions=_.FileReferences.Expressions,this.motions=_.FileReferences.Motions,this.textures=_.FileReferences.Textures,this.physics=_.FileReferences.Physics,this.pose=_.FileReferences.Pose}getEyeBlinkParameters(){var _,et;return(et=(_=this.groups)==null?void 0:_.find(tt=>tt.Name==="EyeBlink"))==null?void 0:et.Ids}getLipSyncParameters(){var _,et;return(et=(_=this.groups)==null?void 0:_.find(tt=>tt.Name==="LipSync"))==null?void 0:et.Ids}}class Cubism4ModelSettings extends ModelSettings{constructor(_){if(super(_),__publicField(this,"moc"),__publicField(this,"textures"),!Cubism4ModelSettings.isValidJSON(_))throw new TypeError("Invalid JSON.");Object.assign(this,new CubismModelSettingsJson(_))}static isValidJSON(_){var et;return!!(_!=null&&_.FileReferences)&&typeof _.FileReferences.Moc=="string"&&((et=_.FileReferences.Textures)==null?void 0:et.length)>0&&_.FileReferences.Textures.every(tt=>typeof tt=="string")}replaceFiles(_){if(super.replaceFiles(_),this.motions)for(const[et,tt]of Object.entries(this.motions))for(let nt=0;nt<tt.length;nt++)tt[nt].File=_(tt[nt].File,`motions.${et}[${nt}].File`),tt[nt].Sound!==void 0&&(tt[nt].Sound=_(tt[nt].Sound,`motions.${et}[${nt}].Sound`));if(this.expressions)for(let et=0;et<this.expressions.length;et++)this.expressions[et].File=_(this.expressions[et].File,`expressions[${et}].File`)}}applyMixins(Cubism4ModelSettings,[CubismModelSettingsJson]);let startupPromise,startupRetries=20;function cubism4Ready(){return CubismFramework.isStarted()?Promise.resolve():(startupPromise??(startupPromise=new Promise((_e,_)=>{function et(){try{startUpCubism4(),_e()}catch(tt){if(startupRetries--,startupRetries<0){const nt=new Error("Failed to start up Cubism 4 framework.");nt.cause=tt,_(nt);return}setTimeout(et,10)}}et()})),startupPromise)}function startUpCubism4(_e){_e=Object.assign({logFunction:console.log,loggingLevel:LogLevel.LogLevel_Verbose},_e),CubismFramework.startUp(_e),CubismFramework.initialize()}const Epsilon=.001,DefaultFadeInSeconds=.5;class CubismPose{static create(_){const et=new CubismPose;typeof _.FadeInTime=="number"&&(et._fadeTimeSeconds=_.FadeInTime,et._fadeTimeSeconds<=0&&(et._fadeTimeSeconds=DefaultFadeInSeconds));const tt=_.Groups,nt=tt.length;for(let it=0;it<nt;++it){const at=tt[it],ot=at.length;let st=0;for(let dt=0;dt<ot;++dt){const ht=at[dt],ct=new PartData;ct.partId=ht.Id;const ut=ht.Link;if(ut){const ft=ut.length;for(let gt=0;gt<ft;++gt){const mt=new PartData;mt.partId=ut[gt],ct.link.push(mt)}}et._partGroups.push(ct),++st}et._partGroupCounts.push(st)}return et}updateParameters(_,et){_!=this._lastModel&&this.reset(_),this._lastModel=_,et<0&&(et=0);let tt=0;for(let nt=0;nt<this._partGroupCounts.length;nt++){const it=this._partGroupCounts[nt];this.doFade(_,et,tt,it),tt+=it}this.copyPartOpacities(_)}reset(_){let et=0;for(let tt=0;tt<this._partGroupCounts.length;++tt){const nt=this._partGroupCounts[tt];for(let it=et;it<et+nt;++it){this._partGroups[it].initialize(_);const at=this._partGroups[it].partIndex,ot=this._partGroups[it].parameterIndex;if(!(at<0)){_.setPartOpacityByIndex(at,it==et?1:0),_.setParameterValueByIndex(ot,it==et?1:0);for(let st=0;st<this._partGroups[it].link.length;++st)this._partGroups[it].link[st].initialize(_)}}et+=nt}}copyPartOpacities(_){for(let et=0;et<this._partGroups.length;++et){const tt=this._partGroups[et];if(tt.link.length==0)continue;const nt=this._partGroups[et].partIndex,it=_.getPartOpacityByIndex(nt);for(let at=0;at<tt.link.length;++at){const st=tt.link[at].partIndex;st<0||_.setPartOpacityByIndex(st,it)}}}doFade(_,et,tt,nt){let it=-1,at=1;const ot=.5,st=.15;for(let dt=tt;dt<tt+nt;++dt){const ht=this._partGroups[dt].partIndex,ct=this._partGroups[dt].parameterIndex;if(_.getParameterValueByIndex(ct)>Epsilon){if(it>=0)break;it=dt,at=_.getPartOpacityByIndex(ht),at+=et/this._fadeTimeSeconds,at>1&&(at=1)}}it<0&&(it=0,at=1);for(let dt=tt;dt<tt+nt;++dt){const ht=this._partGroups[dt].partIndex;if(it==dt)_.setPartOpacityByIndex(ht,at);else{let ct=_.getPartOpacityByIndex(ht),ut;at<ot?ut=at*(ot-1)/ot+1:ut=(1-at)*ot/(1-ot),(1-ut)*(1-at)>st&&(ut=1-st/(1-at)),ct>ut&&(ct=ut),_.setPartOpacityByIndex(ht,ct)}}}constructor(){this._fadeTimeSeconds=DefaultFadeInSeconds,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class PartData{constructor(_){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],_!=null&&this.assignment(_)}assignment(_){return this.partId=_.partId,this.link=_.link.map(et=>et.clone()),this}initialize(_){this.parameterIndex=_.getParameterIndex(this.partId),this.partIndex=_.getPartIndex(this.partId),_.setParameterValueByIndex(this.parameterIndex,1)}clone(){const _=new PartData;return _.partId=this.partId,_.parameterIndex=this.parameterIndex,_.partIndex=this.partIndex,_.link=this.link.map(et=>et.clone()),_}}class DrawableColorData{constructor(_=!1,et=new CubismTextureColor){this.isOverwritten=_,this.Color=et}}class PartColorData{constructor(_=!1,et=new CubismTextureColor){this.isOverwritten=_,this.Color=et}}class DrawableCullingData{constructor(_=!1,et=!1){this.isOverwritten=_,this.isCulling=et}}class CubismModel{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getPixelsPerUnit(){return this._model==null?0:this._model.canvasinfo.PixelsPerUnit}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const _=this._model.parameters.count,et=this._savedParameters.length;for(let tt=0;tt<_;++tt)tt<et?this._savedParameters[tt]=this._parameterValues[tt]:this._savedParameters.push(this._parameterValues[tt])}getMultiplyColor(_){return this.getOverwriteFlagForModelMultiplyColors()||this.getOverwriteFlagForDrawableMultiplyColors(_)?this._userMultiplyColors[_].Color:this.getDrawableMultiplyColor(_)}getScreenColor(_){return this.getOverwriteFlagForModelScreenColors()||this.getOverwriteFlagForDrawableScreenColors(_)?this._userScreenColors[_].Color:this.getDrawableScreenColor(_)}setMultiplyColorByTextureColor(_,et){this.setMultiplyColorByRGBA(_,et.R,et.G,et.B,et.A)}setMultiplyColorByRGBA(_,et,tt,nt,it=1){this._userMultiplyColors[_].Color.R=et,this._userMultiplyColors[_].Color.G=tt,this._userMultiplyColors[_].Color.B=nt,this._userMultiplyColors[_].Color.A=it}setScreenColorByTextureColor(_,et){this.setScreenColorByRGBA(_,et.R,et.G,et.B,et.A)}setScreenColorByRGBA(_,et,tt,nt,it=1){this._userScreenColors[_].Color.R=et,this._userScreenColors[_].Color.G=tt,this._userScreenColors[_].Color.B=nt,this._userScreenColors[_].Color.A=it}getPartMultiplyColor(_){return this._userPartMultiplyColors[_].Color}getPartScreenColor(_){return this._userPartScreenColors[_].Color}setPartColor(_,et,tt,nt,it,at,ot){if(at[_].Color.R=et,at[_].Color.G=tt,at[_].Color.B=nt,at[_].Color.A=it,at[_].isOverwritten)for(let st=0;st<this._partChildDrawables[_].length;++st){const dt=this._partChildDrawables[_][st];ot[dt].Color.R=et,ot[dt].Color.G=tt,ot[dt].Color.B=nt,ot[dt].Color.A=it}}setPartMultiplyColorByTextureColor(_,et){this.setPartMultiplyColorByRGBA(_,et.R,et.G,et.B,et.A)}setPartMultiplyColorByRGBA(_,et,tt,nt,it){this.setPartColor(_,et,tt,nt,it,this._userPartMultiplyColors,this._userMultiplyColors)}setPartScreenColorByTextureColor(_,et){this.setPartScreenColorByRGBA(_,et.R,et.G,et.B,et.A)}setPartScreenColorByRGBA(_,et,tt,nt,it){this.setPartColor(_,et,tt,nt,it,this._userPartScreenColors,this._userScreenColors)}getOverwriteFlagForModelMultiplyColors(){return this._isOverwrittenModelMultiplyColors}getOverwriteFlagForModelScreenColors(){return this._isOverwrittenModelScreenColors}setOverwriteFlagForModelMultiplyColors(_){this._isOverwrittenModelMultiplyColors=_}setOverwriteFlagForModelScreenColors(_){this._isOverwrittenModelScreenColors=_}getOverwriteFlagForDrawableMultiplyColors(_){return this._userMultiplyColors[_].isOverwritten}getOverwriteFlagForDrawableScreenColors(_){return this._userScreenColors[_].isOverwritten}setOverwriteFlagForDrawableMultiplyColors(_,et){this._userMultiplyColors[_].isOverwritten=et}setOverwriteFlagForDrawableScreenColors(_,et){this._userScreenColors[_].isOverwritten=et}getOverwriteColorForPartMultiplyColors(_){return this._userPartMultiplyColors[_].isOverwritten}getOverwriteColorForPartScreenColors(_){return this._userPartScreenColors[_].isOverwritten}setOverwriteColorForPartColors(_,et,tt,nt){tt[_].isOverwritten=et;for(let it=0;it<this._partChildDrawables[_].length;++it){const at=this._partChildDrawables[_][it];nt[at].isOverwritten=et,et&&(nt[at].Color.R=tt[_].Color.R,nt[at].Color.G=tt[_].Color.G,nt[at].Color.B=tt[_].Color.B,nt[at].Color.A=tt[_].Color.A)}}setOverwriteColorForPartMultiplyColors(_,et){this._userPartMultiplyColors[_].isOverwritten=et,this.setOverwriteColorForPartColors(_,et,this._userPartMultiplyColors,this._userMultiplyColors)}setOverwriteColorForPartScreenColors(_,et){this._userPartScreenColors[_].isOverwritten=et,this.setOverwriteColorForPartColors(_,et,this._userPartScreenColors,this._userScreenColors)}getDrawableCulling(_){if(this.getOverwriteFlagForModelCullings()||this.getOverwriteFlagForDrawableCullings(_))return this._userCullings[_].isCulling;const et=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(et[_])}setDrawableCulling(_,et){this._userCullings[_].isCulling=et}getOverwriteFlagForModelCullings(){return this._isOverwrittenCullings}setOverwriteFlagForModelCullings(_){this._isOverwrittenCullings=_}getOverwriteFlagForDrawableCullings(_){return this._userCullings[_].isOverwritten}setOverwriteFlagForDrawableCullings(_,et){this._userCullings[_].isOverwritten=et}getModelOapcity(){return this._modelOpacity}setModelOapcity(_){this._modelOpacity=_}getModel(){return this._model}getPartIndex(_){let et;const tt=this._model.parts.count;for(et=0;et<tt;++et)if(_==this._partIds[et])return et;return _ in this._notExistPartId?this._notExistPartId[_]:(et=tt+this._notExistPartId.length,this._notExistPartId[_]=et,this._notExistPartOpacities[et]=0,et)}getPartId(_){return this._model.parts.ids[_]}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(_,et){if(_ in this._notExistPartOpacities){this._notExistPartOpacities[_]=et;return}CSM_ASSERT(0<=_&&_<this.getPartCount()),this._partOpacities[_]=et}setPartOpacityById(_,et){const tt=this.getPartIndex(_);tt<0||this.setPartOpacityByIndex(tt,et)}getPartOpacityByIndex(_){return _ in this._notExistPartOpacities?this._notExistPartOpacities[_]:(CSM_ASSERT(0<=_&&_<this.getPartCount()),this._partOpacities[_])}getPartOpacityById(_){const et=this.getPartIndex(_);return et<0?0:this.getPartOpacityByIndex(et)}getParameterIndex(_){let et;const tt=this._model.parameters.count;for(et=0;et<tt;++et)if(_==this._parameterIds[et])return et;return _ in this._notExistParameterId?this._notExistParameterId[_]:(et=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[_]=et,this._notExistParameterValues[et]=0,et)}getParameterCount(){return this._model.parameters.count}getParameterType(_){return this._model.parameters.types[_]}getParameterMaximumValue(_){return this._model.parameters.maximumValues[_]}getParameterMinimumValue(_){return this._model.parameters.minimumValues[_]}getParameterDefaultValue(_){return this._model.parameters.defaultValues[_]}getParameterValueByIndex(_){return _ in this._notExistParameterValues?this._notExistParameterValues[_]:(CSM_ASSERT(0<=_&&_<this.getParameterCount()),this._parameterValues[_])}getParameterValueById(_){const et=this.getParameterIndex(_);return this.getParameterValueByIndex(et)}setParameterValueByIndex(_,et,tt=1){if(_ in this._notExistParameterValues){this._notExistParameterValues[_]=tt==1?et:this._notExistParameterValues[_]*(1-tt)+et*tt;return}CSM_ASSERT(0<=_&&_<this.getParameterCount()),this._model.parameters.maximumValues[_]<et&&(et=this._model.parameters.maximumValues[_]),this._model.parameters.minimumValues[_]>et&&(et=this._model.parameters.minimumValues[_]),this._parameterValues[_]=tt==1?et:this._parameterValues[_]=this._parameterValues[_]*(1-tt)+et*tt}setParameterValueById(_,et,tt=1){const nt=this.getParameterIndex(_);this.setParameterValueByIndex(nt,et,tt)}addParameterValueByIndex(_,et,tt=1){this.setParameterValueByIndex(_,this.getParameterValueByIndex(_)+et*tt)}addParameterValueById(_,et,tt=1){const nt=this.getParameterIndex(_);this.addParameterValueByIndex(nt,et,tt)}multiplyParameterValueById(_,et,tt=1){const nt=this.getParameterIndex(_);this.multiplyParameterValueByIndex(nt,et,tt)}multiplyParameterValueByIndex(_,et,tt=1){this.setParameterValueByIndex(_,this.getParameterValueByIndex(_)*(1+(et-1)*tt))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(_){const et=this._model.drawables.count;for(let tt=0;tt<et;++tt)if(this._drawableIds[tt]==_)return tt;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(_){return this._model.drawables.ids[_]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(_){return this.getDrawableTextureIndex(_)}getDrawableTextureIndex(_){return this._model.drawables.textureIndices[_]}getDrawableDynamicFlagVertexPositionsDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(et[_])}getDrawableVertexIndexCount(_){return this._model.drawables.indexCounts[_]}getDrawableVertexCount(_){return this._model.drawables.vertexCounts[_]}getDrawableVertices(_){return this.getDrawableVertexPositions(_)}getDrawableVertexIndices(_){return this._model.drawables.indices[_]}getDrawableVertexPositions(_){return this._model.drawables.vertexPositions[_]}getDrawableVertexUvs(_){return this._model.drawables.vertexUvs[_]}getDrawableOpacity(_){return this._model.drawables.opacities[_]}getDrawableMultiplyColor(_){const et=this._model.drawables.multiplyColors,tt=_*4,nt=new CubismTextureColor;return nt.R=et[tt],nt.G=et[tt+1],nt.B=et[tt+2],nt.A=et[tt+3],nt}getDrawableScreenColor(_){const et=this._model.drawables.screenColors,tt=_*4,nt=new CubismTextureColor;return nt.R=et[tt],nt.G=et[tt+1],nt.B=et[tt+2],nt.A=et[tt+3],nt}getDrawableParentPartIndex(_){return this._model.drawables.parentPartIndices[_]}getDrawableBlendMode(_){const et=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(et[_])?CubismBlendMode.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(et[_])?CubismBlendMode.CubismBlendMode_Multiplicative:CubismBlendMode.CubismBlendMode_Normal}getDrawableInvertedMaskBit(_){const et=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(et[_])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let _=0;_<this._model.drawables.count;++_)if(!(this._model.drawables.maskCounts[_]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(et[_])}getDrawableDynamicFlagVisibilityDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(et[_])}getDrawableDynamicFlagOpacityDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(et[_])}getDrawableDynamicFlagRenderOrderDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(et[_])}getDrawableDynamicFlagBlendColorDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(et[_])}loadParameters(){let _=this._model.parameters.count;const et=this._savedParameters.length;_>et&&(_=et);for(let tt=0;tt<_;++tt)this._parameterValues[tt]=this._savedParameters[tt]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const et=this._model.parameters.ids,tt=this._model.parameters.count;for(let nt=0;nt<tt;++nt)this._parameterIds.push(et[nt])}const _=this._model.parts.count;{const et=this._model.parts.ids;for(let tt=0;tt<_;++tt)this._partIds.push(et[tt])}{const et=this._model.drawables.ids,tt=this._model.drawables.count,nt=new DrawableCullingData(!1,!1);for(let it=0;it<_;++it){const at=new CubismTextureColor(1,1,1,1),ot=new CubismTextureColor(0,0,0,1),st=new PartColorData(!1,at),dt=new PartColorData(!1,ot);this._userPartMultiplyColors.push(st),this._userPartScreenColors.push(dt),this._partChildDrawables.push([])}for(let it=0;it<tt;++it){const at=new CubismTextureColor(1,1,1,1),ot=new CubismTextureColor(0,0,0,1),st=new DrawableColorData(!1,at),dt=new DrawableColorData(!1,ot);this._drawableIds.push(et[it]),this._userMultiplyColors.push(st),this._userScreenColors.push(dt),this._userCullings.push(nt);const ht=this.getDrawableParentPartIndex(it);ht>=0&&this._partChildDrawables[ht].push(it)}}}constructor(_){this._model=_,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._isOverwrittenModelMultiplyColors=!1,this._isOverwrittenModelScreenColors=!1,this._isOverwrittenCullings=!1,this._modelOpacity=1,this._userMultiplyColors=[],this._userScreenColors=[],this._userCullings=[],this._userPartMultiplyColors=[],this._userPartScreenColors=[],this._partChildDrawables=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class CubismMoc{static create(_,et){if(et&&!this.hasMocConsistency(_))throw new Error("Inconsistent MOC3.");const tt=Live2DCubismCore.Moc.fromArrayBuffer(_);if(tt){const nt=new CubismMoc(tt);return nt._mocVersion=Live2DCubismCore.Version.csmGetMocVersion(tt,_),nt}throw new Error("Failed to CubismMoc.create().")}createModel(){let _;const et=Live2DCubismCore.Model.fromMoc(this._moc);if(et)return _=new CubismModel(et),++this._modelCount,_;throw new Error("Unknown error")}deleteModel(_){_!=null&&--this._modelCount}constructor(_){this._moc=_,this._modelCount=0,this._mocVersion=0}release(){this._moc._release(),this._moc=void 0}getLatestMocVersion(){return Live2DCubismCore.Version.csmGetLatestMocVersion()}getMocVersion(){return this._mocVersion}static hasMocConsistency(_){return Live2DCubismCore.Moc.prototype.hasMocConsistency(_)===1}}var CubismPhysicsTargetType=(_e=>(_e[_e.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",_e))(CubismPhysicsTargetType||{}),CubismPhysicsSource=(_e=>(_e[_e.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",_e[_e.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",_e[_e.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",_e))(CubismPhysicsSource||{});class CubismPhysicsParticle{constructor(){this.initialPosition=new CubismVector2(0,0),this.position=new CubismVector2(0,0),this.lastPosition=new CubismVector2(0,0),this.lastGravity=new CubismVector2(0,0),this.force=new CubismVector2(0,0),this.velocity=new CubismVector2(0,0)}}class CubismPhysicsSubRig{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class CubismPhysicsInput{constructor(){this.source={}}}class CubismPhysicsOutput{constructor(){this.destination={},this.translationScale=new CubismVector2(0,0)}}class CubismPhysicsRig{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new CubismVector2(0,0),this.wind=new CubismVector2(0,0),this.fps=0}}class CubismPhysicsJson{constructor(_){this._json=_}release(){this._json=void 0}getGravity(){const _=new CubismVector2(0,0);return _.x=this._json.Meta.EffectiveForces.Gravity.X,_.y=this._json.Meta.EffectiveForces.Gravity.Y,_}getWind(){const _=new CubismVector2(0,0);return _.x=this._json.Meta.EffectiveForces.Wind.X,_.y=this._json.Meta.EffectiveForces.Wind.Y,_}getFps(){return this._json.Meta.Fps||0}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Default}getNormalizationAngleMinimumValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Default}getInputCount(_){return this._json.PhysicsSettings[_].Input.length}getInputWeight(_,et){return this._json.PhysicsSettings[_].Input[et].Weight}getInputReflect(_,et){return this._json.PhysicsSettings[_].Input[et].Reflect}getInputType(_,et){return this._json.PhysicsSettings[_].Input[et].Type}getInputSourceId(_,et){return this._json.PhysicsSettings[_].Input[et].Source.Id}getOutputCount(_){return this._json.PhysicsSettings[_].Output.length}getOutputVertexIndex(_,et){return this._json.PhysicsSettings[_].Output[et].VertexIndex}getOutputAngleScale(_,et){return this._json.PhysicsSettings[_].Output[et].Scale}getOutputWeight(_,et){return this._json.PhysicsSettings[_].Output[et].Weight}getOutputDestinationId(_,et){return this._json.PhysicsSettings[_].Output[et].Destination.Id}getOutputType(_,et){return this._json.PhysicsSettings[_].Output[et].Type}getOutputReflect(_,et){return this._json.PhysicsSettings[_].Output[et].Reflect}getParticleCount(_){return this._json.PhysicsSettings[_].Vertices.length}getParticleMobility(_,et){return this._json.PhysicsSettings[_].Vertices[et].Mobility}getParticleDelay(_,et){return this._json.PhysicsSettings[_].Vertices[et].Delay}getParticleAcceleration(_,et){return this._json.PhysicsSettings[_].Vertices[et].Acceleration}getParticleRadius(_,et){return this._json.PhysicsSettings[_].Vertices[et].Radius}getParticlePosition(_,et){const tt=new CubismVector2(0,0);return tt.x=this._json.PhysicsSettings[_].Vertices[et].Position.X,tt.y=this._json.PhysicsSettings[_].Vertices[et].Position.Y,tt}}const PhysicsTypeTagX="X",PhysicsTypeTagY="Y",PhysicsTypeTagAngle="Angle",AirResistance=5,MaximumWeight=100,MovementThreshold=.001,MaxDeltaTime=5;class CubismPhysics{static create(_){const et=new CubismPhysics;return et.parse(_),et._physicsRig.gravity.y=0,et}static delete(_){_!=null&&_.release()}parse(_){this._physicsRig=new CubismPhysicsRig;const et=new CubismPhysicsJson(_);this._physicsRig.gravity=et.getGravity(),this._physicsRig.wind=et.getWind(),this._physicsRig.subRigCount=et.getSubRigCount(),this._physicsRig.fps=et.getFps(),this._currentRigOutputs=[],this._previousRigOutputs=[];let tt=0,nt=0,it=0;for(let at=0;at<this._physicsRig.subRigCount;++at){const ot=new CubismPhysicsSubRig;ot.normalizationPosition.minimum=et.getNormalizationPositionMinimumValue(at),ot.normalizationPosition.maximum=et.getNormalizationPositionMaximumValue(at),ot.normalizationPosition.defalut=et.getNormalizationPositionDefaultValue(at),ot.normalizationAngle.minimum=et.getNormalizationAngleMinimumValue(at),ot.normalizationAngle.maximum=et.getNormalizationAngleMaximumValue(at),ot.normalizationAngle.defalut=et.getNormalizationAngleDefaultValue(at),ot.inputCount=et.getInputCount(at),ot.baseInputIndex=tt,tt+=ot.inputCount;for(let ht=0;ht<ot.inputCount;++ht){const ct=new CubismPhysicsInput;switch(ct.sourceParameterIndex=-1,ct.weight=et.getInputWeight(at,ht),ct.reflect=et.getInputReflect(at,ht),et.getInputType(at,ht)){case PhysicsTypeTagX:ct.type=CubismPhysicsSource.CubismPhysicsSource_X,ct.getNormalizedParameterValue=getInputTranslationXFromNormalizedParameterValue;break;case PhysicsTypeTagY:ct.type=CubismPhysicsSource.CubismPhysicsSource_Y,ct.getNormalizedParameterValue=getInputTranslationYFromNormalizedParamterValue;break;case PhysicsTypeTagAngle:ct.type=CubismPhysicsSource.CubismPhysicsSource_Angle,ct.getNormalizedParameterValue=getInputAngleFromNormalizedParameterValue;break}ct.source.targetType=CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter,ct.source.id=et.getInputSourceId(at,ht),this._physicsRig.inputs.push(ct)}ot.outputCount=et.getOutputCount(at),ot.baseOutputIndex=nt;const st=new PhysicsOutput,dt=new PhysicsOutput;for(let ht=0;ht<ot.outputCount;++ht){st.outputs[ht]=0,dt.outputs[ht]=0;let ct=this._physicsRig.outputs[nt+ht];switch(ct||(ct=new CubismPhysicsOutput,this._physicsRig.outputs[nt+ht]=ct),ct.destinationParameterIndex=-1,ct.vertexIndex=et.getOutputVertexIndex(at,ht),ct.angleScale=et.getOutputAngleScale(at,ht),ct.weight=et.getOutputWeight(at,ht),ct.destination.targetType=CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter,ct.destination.id=et.getOutputDestinationId(at,ht),et.getOutputType(at,ht)){case PhysicsTypeTagX:ct.type=CubismPhysicsSource.CubismPhysicsSource_X,ct.getValue=getOutputTranslationX,ct.getScale=getOutputScaleTranslationX;break;case PhysicsTypeTagY:ct.type=CubismPhysicsSource.CubismPhysicsSource_Y,ct.getValue=getOutputTranslationY,ct.getScale=getOutputScaleTranslationY;break;case PhysicsTypeTagAngle:ct.type=CubismPhysicsSource.CubismPhysicsSource_Angle,ct.getValue=getOutputAngle,ct.getScale=getOutputScaleAngle;break}ct.reflect=et.getOutputReflect(at,ht)}this._currentRigOutputs.push(st),this._previousRigOutputs.push(dt),nt+=ot.outputCount,ot.particleCount=et.getParticleCount(at),ot.baseParticleIndex=it,it+=ot.particleCount;for(let ht=0;ht<ot.particleCount;++ht){const ct=new CubismPhysicsParticle;ct.mobility=et.getParticleMobility(at,ht),ct.delay=et.getParticleDelay(at,ht),ct.acceleration=et.getParticleAcceleration(at,ht),ct.radius=et.getParticleRadius(at,ht),ct.position=et.getParticlePosition(at,ht),this._physicsRig.particles.push(ct)}this._physicsRig.settings.push(ot)}this.initialize(),et.release()}stabilization(_){var et,tt,nt,it;let at,ot,st,dt;const ht=new CubismVector2;let ct,ut,ft,gt,mt,vt,yt,bt;mt=_.getModel().parameters.values,vt=_.getModel().parameters.maximumValues,yt=_.getModel().parameters.minimumValues,bt=_.getModel().parameters.defaultValues,((tt=(et=this._parameterCaches)==null?void 0:et.length)!=null?tt:0)<_.getParameterCount()&&(this._parameterCaches=new Float32Array(_.getParameterCount())),((it=(nt=this._parameterInputCaches)==null?void 0:nt.length)!=null?it:0)<_.getParameterCount()&&(this._parameterInputCaches=new Float32Array(_.getParameterCount()));for(let _t=0;_t<_.getParameterCount();++_t)this._parameterCaches[_t]=mt[_t],this._parameterInputCaches[_t]=mt[_t];for(let _t=0;_t<this._physicsRig.subRigCount;++_t){at={angle:0},ht.x=0,ht.y=0,ct=this._physicsRig.settings[_t],ut=this._physicsRig.inputs.slice(ct.baseInputIndex),ft=this._physicsRig.outputs.slice(ct.baseOutputIndex),gt=this._physicsRig.particles.slice(ct.baseParticleIndex);for(let xt=0;xt<ct.inputCount;++xt)ot=ut[xt].weight/MaximumWeight,ut[xt].sourceParameterIndex==-1&&(ut[xt].sourceParameterIndex=_.getParameterIndex(ut[xt].source.id)),ut[xt].getNormalizedParameterValue(ht,at,mt[ut[xt].sourceParameterIndex],yt[ut[xt].sourceParameterIndex],vt[ut[xt].sourceParameterIndex],bt[ut[xt].sourceParameterIndex],ct.normalizationPosition,ct.normalizationAngle,ut[xt].reflect,ot),this._parameterCaches[ut[xt].sourceParameterIndex]=mt[ut[xt].sourceParameterIndex];st=CubismMath.degreesToRadian(-at.angle),ht.x=ht.x*CubismMath.cos(st)-ht.y*CubismMath.sin(st),ht.y=ht.x*CubismMath.sin(st)+ht.y*CubismMath.cos(st),updateParticlesForStabilization(gt,ct.particleCount,ht,at.angle,this._options.wind,MovementThreshold*ct.normalizationPosition.maximum);for(let xt=0;xt<ct.outputCount;++xt){const St=ft[xt].vertexIndex;if(ft[xt].destinationParameterIndex==-1&&(ft[xt].destinationParameterIndex=_.getParameterIndex(ft[xt].destination.id)),St<1||St>=ct.particleCount)continue;let Tt=new CubismVector2;Tt=gt[St].position.substract(gt[St-1].position),dt=ft[xt].getValue(Tt,gt,St,ft[xt].reflect,this._options.gravity),this._currentRigOutputs[_t].outputs[xt]=dt,this._previousRigOutputs[_t].outputs[xt]=dt;const wt=ft[xt].destinationParameterIndex,Ct=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(mt.subarray(wt))):mt.slice(wt);updateOutputParameterValue(Ct,yt[wt],vt[wt],dt,ft[xt]);for(let Et=wt,At=0;Et<this._parameterCaches.length;Et++,At++)mt[Et]=this._parameterCaches[Et]=Ct[At]}}}evaluate(_,et){var tt,nt,it,at;let ot,st,dt,ht;const ct=new CubismVector2;let ut,ft,gt,mt;if(0>=et)return;let vt,yt,bt,_t,xt;if(this._currentRemainTime+=et,this._currentRemainTime>MaxDeltaTime&&(this._currentRemainTime=0),vt=_.getModel().parameters.values,yt=_.getModel().parameters.maximumValues,bt=_.getModel().parameters.minimumValues,_t=_.getModel().parameters.defaultValues,((nt=(tt=this._parameterCaches)==null?void 0:tt.length)!=null?nt:0)<_.getParameterCount()&&(this._parameterCaches=new Float32Array(_.getParameterCount())),((at=(it=this._parameterInputCaches)==null?void 0:it.length)!=null?at:0)<_.getParameterCount()){this._parameterInputCaches=new Float32Array(_.getParameterCount());for(let Tt=0;Tt<_.getParameterCount();++Tt)this._parameterInputCaches[Tt]=vt[Tt]}for(this._physicsRig.fps>0?xt=1/this._physicsRig.fps:xt=et;this._currentRemainTime>=xt;){for(let wt=0;wt<this._physicsRig.subRigCount;++wt){ut=this._physicsRig.settings[wt],gt=this._physicsRig.outputs.slice(ut.baseOutputIndex);for(let Ct=0;Ct<ut.outputCount;++Ct)this._previousRigOutputs[wt].outputs[Ct]=this._currentRigOutputs[wt].outputs[Ct]}const Tt=xt/this._currentRemainTime;for(let wt=0;wt<_.getParameterCount();++wt)this._parameterCaches[wt]=this._parameterInputCaches[wt]*(1-Tt)+vt[wt]*Tt,this._parameterInputCaches[wt]=this._parameterCaches[wt];for(let wt=0;wt<this._physicsRig.subRigCount;++wt){ot={angle:0},ct.x=0,ct.y=0,ut=this._physicsRig.settings[wt],ft=this._physicsRig.inputs.slice(ut.baseInputIndex),gt=this._physicsRig.outputs.slice(ut.baseOutputIndex),mt=this._physicsRig.particles.slice(ut.baseParticleIndex);for(let Ct=0;Ct<ut.inputCount;++Ct)st=ft[Ct].weight/MaximumWeight,ft[Ct].sourceParameterIndex==-1&&(ft[Ct].sourceParameterIndex=_.getParameterIndex(ft[Ct].source.id)),ft[Ct].getNormalizedParameterValue(ct,ot,this._parameterCaches[ft[Ct].sourceParameterIndex],bt[ft[Ct].sourceParameterIndex],yt[ft[Ct].sourceParameterIndex],_t[ft[Ct].sourceParameterIndex],ut.normalizationPosition,ut.normalizationAngle,ft[Ct].reflect,st);dt=CubismMath.degreesToRadian(-ot.angle),ct.x=ct.x*CubismMath.cos(dt)-ct.y*CubismMath.sin(dt),ct.y=ct.x*CubismMath.sin(dt)+ct.y*CubismMath.cos(dt),updateParticles(mt,ut.particleCount,ct,ot.angle,this._options.wind,MovementThreshold*ut.normalizationPosition.maximum,xt,AirResistance);for(let Ct=0;Ct<ut.outputCount;++Ct){const Et=gt[Ct].vertexIndex;if(gt[Ct].destinationParameterIndex==-1&&(gt[Ct].destinationParameterIndex=_.getParameterIndex(gt[Ct].destination.id)),Et<1||Et>=ut.particleCount)continue;const At=new CubismVector2;At.x=mt[Et].position.x-mt[Et-1].position.x,At.y=mt[Et].position.y-mt[Et-1].position.y,ht=gt[Ct].getValue(At,mt,Et,gt[Ct].reflect,this._options.gravity),this._currentRigOutputs[wt].outputs[Ct]=ht;const Pt=gt[Ct].destinationParameterIndex,Rt=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(this._parameterCaches.subarray(Pt))):this._parameterCaches.slice(Pt);updateOutputParameterValue(Rt,bt[Pt],yt[Pt],ht,gt[Ct]);for(let It=Pt,Mt=0;It<this._parameterCaches.length;It++,Mt++)this._parameterCaches[It]=Rt[Mt]}}this._currentRemainTime-=xt}const St=this._currentRemainTime/xt;this.interpolate(_,St)}interpolate(_,et){let tt,nt,it,at,ot;it=_.getModel().parameters.values,at=_.getModel().parameters.maximumValues,ot=_.getModel().parameters.minimumValues;for(let st=0;st<this._physicsRig.subRigCount;++st){nt=this._physicsRig.settings[st],tt=this._physicsRig.outputs.slice(nt.baseOutputIndex);for(let dt=0;dt<nt.outputCount;++dt){if(tt[dt].destinationParameterIndex==-1)continue;const ht=tt[dt].destinationParameterIndex,ct=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(it.subarray(ht))):it.slice(ht);updateOutputParameterValue(ct,ot[ht],at[ht],this._previousRigOutputs[st].outputs[dt]*(1-et)+this._currentRigOutputs[st].outputs[dt]*et,tt[dt]);for(let ut=ht,ft=0;ut<it.length;ut++,ft++)it[ut]=ct[ft]}}}setOptions(_){this._options=_}getOption(){return this._options}constructor(){this._options=new Options,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0,this._currentRigOutputs=[],this._previousRigOutputs=[],this._currentRemainTime=0}release(){this._physicsRig=void 0}initialize(){let _,et,tt;for(let nt=0;nt<this._physicsRig.subRigCount;++nt){et=this._physicsRig.settings[nt],_=this._physicsRig.particles.slice(et.baseParticleIndex),_[0].initialPosition=new CubismVector2(0,0),_[0].lastPosition=new CubismVector2(_[0].initialPosition.x,_[0].initialPosition.y),_[0].lastGravity=new CubismVector2(0,-1),_[0].lastGravity.y*=-1,_[0].velocity=new CubismVector2(0,0),_[0].force=new CubismVector2(0,0);for(let it=1;it<et.particleCount;++it)tt=new CubismVector2(0,0),tt.y=_[it].radius,_[it].initialPosition=new CubismVector2(_[it-1].initialPosition.x+tt.x,_[it-1].initialPosition.y+tt.y),_[it].position=new CubismVector2(_[it].initialPosition.x,_[it].initialPosition.y),_[it].lastPosition=new CubismVector2(_[it].initialPosition.x,_[it].initialPosition.y),_[it].lastGravity=new CubismVector2(0,-1),_[it].lastGravity.y*=-1,_[it].velocity=new CubismVector2(0,0),_[it].force=new CubismVector2(0,0)}}}class Options{constructor(){this.gravity=new CubismVector2(0,0),this.wind=new CubismVector2(0,0)}}class PhysicsOutput{constructor(){this.outputs=[]}}function getInputTranslationXFromNormalizedParameterValue(_e,_,et,tt,nt,it,at,ot,st,dt){_e.x+=normalizeParameterValue(et,tt,nt,it,at.minimum,at.maximum,at.defalut,st)*dt}function getInputTranslationYFromNormalizedParamterValue(_e,_,et,tt,nt,it,at,ot,st,dt){_e.y+=normalizeParameterValue(et,tt,nt,it,at.minimum,at.maximum,at.defalut,st)*dt}function getInputAngleFromNormalizedParameterValue(_e,_,et,tt,nt,it,at,ot,st,dt){_.angle+=normalizeParameterValue(et,tt,nt,it,ot.minimum,ot.maximum,ot.defalut,st)*dt}function getOutputTranslationX(_e,_,et,tt,nt){let it=_e.x;return tt&&(it*=-1),it}function getOutputTranslationY(_e,_,et,tt,nt){let it=_e.y;return tt&&(it*=-1),it}function getOutputAngle(_e,_,et,tt,nt){let it;return et>=2?nt=_[et-1].position.substract(_[et-2].position):nt=nt.multiplyByScaler(-1),it=CubismMath.directionToRadian(nt,_e),tt&&(it*=-1),it}function getRangeValue(_e,_){return Math.abs(Math.max(_e,_)-Math.min(_e,_))}function getDefaultValue(_e,_){return Math.min(_e,_)+getRangeValue(_e,_)/2}function getOutputScaleTranslationX(_e,_){return _e.x}function getOutputScaleTranslationY(_e,_){return _e.y}function getOutputScaleAngle(_e,_){return _}function updateParticles(_e,_,et,tt,nt,it,at,ot){let st,dt,ht,ct,ut=new CubismVector2(0,0),ft=new CubismVector2(0,0),gt=new CubismVector2(0,0),mt=new CubismVector2(0,0);_e[0].position=new CubismVector2(et.x,et.y),st=CubismMath.degreesToRadian(tt),ct=CubismMath.radianToDirection(st),ct.normalize();for(let vt=1;vt<_;++vt)_e[vt].force=ct.multiplyByScaler(_e[vt].acceleration).add(nt),_e[vt].lastPosition=new CubismVector2(_e[vt].position.x,_e[vt].position.y),dt=_e[vt].delay*at*30,ut=_e[vt].position.substract(_e[vt-1].position),ht=CubismMath.directionToRadian(_e[vt].lastGravity,ct)/ot,ut.x=CubismMath.cos(ht)*ut.x-ut.y*CubismMath.sin(ht),ut.y=CubismMath.sin(ht)*ut.x+ut.y*CubismMath.cos(ht),_e[vt].position=_e[vt-1].position.add(ut),ft=_e[vt].velocity.multiplyByScaler(dt),gt=_e[vt].force.multiplyByScaler(dt).multiplyByScaler(dt),_e[vt].position=_e[vt].position.add(ft).add(gt),mt=_e[vt].position.substract(_e[vt-1].position),mt.normalize(),_e[vt].position=_e[vt-1].position.add(mt.multiplyByScaler(_e[vt].radius)),CubismMath.abs(_e[vt].position.x)<it&&(_e[vt].position.x=0),dt!=0&&(_e[vt].velocity=_e[vt].position.substract(_e[vt].lastPosition),_e[vt].velocity=_e[vt].velocity.divisionByScalar(dt),_e[vt].velocity=_e[vt].velocity.multiplyByScaler(_e[vt].mobility)),_e[vt].force=new CubismVector2(0,0),_e[vt].lastGravity=new CubismVector2(ct.x,ct.y)}function updateParticlesForStabilization(_e,_,et,tt,nt,it){let at,ot,st=new CubismVector2(0,0);_e[0].position=new CubismVector2(et.x,et.y),at=CubismMath.degreesToRadian(tt),ot=CubismMath.radianToDirection(at),ot.normalize();for(let dt=1;dt<_;++dt)_e[dt].force=ot.multiplyByScaler(_e[dt].acceleration).add(nt),_e[dt].lastPosition=new CubismVector2(_e[dt].position.x,_e[dt].position.y),_e[dt].velocity=new CubismVector2(0,0),st=_e[dt].force,st.normalize(),st=st.multiplyByScaler(_e[dt].radius),_e[dt].position=_e[dt-1].position.add(st),CubismMath.abs(_e[dt].position.x)<it&&(_e[dt].position.x=0),_e[dt].force=new CubismVector2(0,0),_e[dt].lastGravity=new CubismVector2(ot.x,ot.y)}function updateOutputParameterValue(_e,_,et,tt,nt){let it,at,ot;it=nt.getScale(nt.translationScale,nt.angleScale),at=tt*it,at<_?(at<nt.valueBelowMinimum&&(nt.valueBelowMinimum=at),at=_):at>et&&(at>nt.valueExceededMaximum&&(nt.valueExceededMaximum=at),at=et),ot=nt.weight/MaximumWeight,ot>=1||(at=_e[0]*(1-ot)+at*ot),_e[0]=at}function normalizeParameterValue(_e,_,et,tt,nt,it,at,ot){let st=0;const dt=CubismMath.max(et,_);dt<_e&&(_e=dt);const ht=CubismMath.min(et,_);ht>_e&&(_e=ht);const ct=CubismMath.min(nt,it),ut=CubismMath.max(nt,it),ft=at,gt=getDefaultValue(ht,dt),mt=_e-gt;switch(Math.sign(mt)){case 1:{const vt=ut-ft,yt=dt-gt;yt!=0&&(st=mt*(vt/yt),st+=ft);break}case-1:{const vt=ct-ft,yt=ht-gt;yt!=0&&(st=mt*(vt/yt),st+=ft);break}case 0:{st=ft;break}}return ot?st:st*-1}Live2DFactory.registerRuntime({version:4,ready:cubism4Ready,test(_e){return _e instanceof Cubism4ModelSettings||Cubism4ModelSettings.isValidJSON(_e)},isValidMoc(_e){if(_e.byteLength<4)return!1;const _=new Int8Array(_e,0,4);return String.fromCharCode(..._)==="MOC3"},createModelSettings(_e){return new Cubism4ModelSettings(_e)},createCoreModel(_e,_){const et=CubismMoc.create(_e,!!(_!=null&&_.checkMocConsistency));try{const tt=et.createModel();return tt.__moc=et,tt}catch(tt){try{et.release()}catch{}throw tt}},createInternalModel(_e,_,et){const tt=new Cubism4InternalModel(_e,_,et),nt=_e;return nt.__moc&&(tt.__moc=nt.__moc,delete nt.__moc,tt.once("destroy",releaseMoc)),tt},createPhysics(_e,_){return CubismPhysics.create(_)},createPose(_e,_){return CubismPose.create(_)}});function releaseMoc(){var _e;(_e=this.__moc)==null||_e.release()}const DEFAULT_MODEL_STATE={currentModel:null},Live2DModelContext=reactExports.createContext(null),Live2DModelProvider=reactExports.memo(({children:_e})=>{const[_,et]=reactExports.useState(DEFAULT_MODEL_STATE.currentModel),tt=reactExports.useCallback(it=>{et(at=>at?Object.assign(at,it):null)},[]),nt=reactExports.useMemo(()=>({currentModel:_,setCurrentModel:et,updateModelState:tt}),[_,tt]);return jsxRuntimeExports.jsx(Live2DModelContext.Provider,{value:nt,children:_e})});function useLive2DModel$1(){const _e=reactExports.useContext(Live2DModelContext);if(!_e)throw new Error("useLive2DModel must be used within a Live2DModelProvider");return _e}const SCALE_SPEED=.01,resetModelPosition=(_e,_,et,tt,nt)=>{if(!_e)return;const it=Number(tt||0),at=Number(nt||0),ot=(_-_e.width)/2+it,st=(et-_e.height)/2+at;_e.position.set(ot,st)},handleModelScale=(_e,_)=>{const et=_>0?-.01:SCALE_SPEED,tt=_e.scale.x,nt=tt+et,at=tt+(nt-tt)*.3;return _e.scale.set(at),at},setModelSize=(_e,_)=>{if(!_e||!_)return;const et=Number(window.devicePixelRatio||1);_e.scale.set(Number(_)),_e.filters&&_e.filters.forEach(tt=>{"resolution"in tt&&Object.defineProperty(tt,"resolution",{value:et})})},useLive2DResize=(_e,_,et,tt,nt)=>{const{updateModelScale:it}=useLive2DConfig(),at=reactExports.useRef(null),ot=reactExports.useRef(null),st=reactExports.useCallback(dt=>{if(!et.current||!(tt!=null&&tt.scrollToResize))return;dt.preventDefault();const ht=handleModelScale(et.current,dt.deltaY);(!ot.current||Math.abs(ht-ot.current)>1e-4)&&(at.current&&clearTimeout(at.current),at.current=setTimeout(()=>{it(ht),ot.current=ht},500))},[et,tt==null?void 0:tt.scrollToResize,it]);reactExports.useEffect(()=>{var ht;const dt=(ht=_e.current)==null?void 0:ht.querySelector("canvas");if(dt)return dt.addEventListener("wheel",st,{passive:!1}),()=>dt.removeEventListener("wheel",st)},[st,_e]),reactExports.useEffect(()=>{const dt=new ResizeObserver(()=>{var ht;if(et.current&&_.current){const{width:ct,height:ut}=nt?{width:window.innerWidth,height:window.innerHeight}:((ht=_e.current)==null?void 0:ht.getBoundingClientRect())||{width:0,height:0};_.current.renderer.resize(ct,ut),_.current.renderer.clear(),resetModelPosition(et.current,ct,ut,tt==null?void 0:tt.initialXshift,tt==null?void 0:tt.initialYshift)}});return _e.current&&dt.observe(_e.current),()=>{dt.disconnect()}},[et,_e,nt,_]),reactExports.useEffect(()=>()=>{at.current&&clearTimeout(at.current)},[])},useLive2DModel=({isPet:_e,modelInfo:_})=>{const et=reactExports.useRef(null),tt=reactExports.useRef(null),nt=reactExports.useRef(null),it=reactExports.useRef(null),at=reactExports.useRef(void 0),{setCurrentModel:ot}=useLive2DModel$1(),{setIsLoading:st}=useLive2DConfig(),dt=reactExports.useRef(!1),{setAiState:ht,aiState:ct}=useAiState(),[ut,ft]=reactExports.useState(!1),{forceIgnoreMouse:gt}=useForceIgnoreMouse(),mt=reactExports.useCallback(()=>{nt.current&&(nt.current.removeAllListeners(),ot(null),tt.current&&(tt.current.stage.removeChild(nt.current),nt.current.destroy({children:!0,texture:!0,baseTexture:!0}),clearTextureCache(),nt.current=null)),ft(!1)},[ot]),vt=reactExports.useCallback(()=>{tt.current&&(nt.current&&mt(),tt.current.stage.removeChildren(),clearTextureCache(),tt.current.renderer.clear(),tt.current.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),destroyTextureCache(),tt.current=null)},[mt]);reactExports.useEffect(()=>{if(!tt.current&&et.current){const Tt=new Application({view:et.current,autoStart:!0,width:window.innerWidth,height:window.innerHeight,backgroundAlpha:0,antialias:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,powerPreference:"high-performance",resolution:window.devicePixelRatio||1,autoDensity:!0});Tt.ticker.add(()=>{Tt.renderer&&Tt.renderer.render(Tt.stage)}),tt.current=Tt}return()=>{vt()}},[vt]);const yt=reactExports.useCallback(async Tt=>{!tt.current||!_||(nt.current&&(nt.current.removeAllListeners(),tt.current.stage.removeChild(nt.current),nt.current.destroy({children:!0,texture:!0,baseTexture:!0}),clearTextureCache()),nt.current=Tt,ot(Tt),tt.current.stage.addChild(Tt),Tt.interactive=!0,Tt.cursor="pointer",ft(!0))},[ot]),bt=reactExports.useCallback(()=>{var Ct;if(!nt.current)return;setModelSize(nt.current,at.current);const{width:Tt,height:wt}=_e?{width:window.innerWidth,height:window.innerHeight}:((Ct=it.current)==null?void 0:Ct.getBoundingClientRect())||{width:0,height:0};resetModelPosition(nt.current,Tt,wt,_==null?void 0:_.initialXshift,_==null?void 0:_.initialYshift)},[_==null?void 0:_.initialXshift,_==null?void 0:_.initialYshift]),_t=reactExports.useCallback(async()=>{if(!(!(_!=null&&_.url)||!tt.current)&&!dt.current){console.log("Loading model:",_.url);try{dt.current=!0,st(!0),ht(AiStateEnum.LOADING);const Tt=await Live2DModel.from(_.url,{autoHitTest:!0,autoFocus:_.pointerInteractive??!1,autoUpdate:!0,ticker:Ticker.shared,motionPreload:MotionPreloadStrategy.IDLE,idleMotionGroup:_.idleMotionGroupName});await yt(Tt)}catch(Tt){console.error("Failed to load Live2D model:",Tt),toaster.create({title:`Failed to load Live2D model: ${Tt}`,type:"error",duration:2e3})}finally{dt.current=!1,st(!1),ht(AiStateEnum.IDLE)}}},[_==null?void 0:_.url,_==null?void 0:_.pointerInteractive,st,yt]),xt=reactExports.useCallback(Tt=>{if(!Tt)return;if(Tt.removeAllListeners("pointerenter"),Tt.removeAllListeners("pointerleave"),Tt.removeAllListeners("rightdown"),Tt.removeAllListeners("pointerdown"),Tt.removeAllListeners("pointermove"),Tt.removeAllListeners("pointerup"),Tt.removeAllListeners("pointerupoutside"),gt&&_e){Tt.interactive=!1,Tt.cursor="default";return}Tt.interactive=!0,Tt.cursor="pointer";let wt=!1,Ct=0,Et=0,At=!1;const Pt=5;_e&&(Tt.on("pointerenter",()=>{var Rt;(Rt=window.api)==null||Rt.updateComponentHover("live2d-model",!0)}),Tt.on("pointerleave",()=>{var Rt;wt||(Rt=window.api)==null||Rt.updateComponentHover("live2d-model",!1)}),Tt.on("rightdown",Rt=>{Rt.data.originalEvent.preventDefault(),window.api.showContextMenu()})),Tt.on("pointerdown",Rt=>{Rt.button===0&&(wt=!0,At=!0,Ct=Rt.global.x-Tt.x,Et=Rt.global.y-Tt.y)}),Tt.on("pointermove",Rt=>{if(wt){const It=Rt.global.x-Ct,Mt=Rt.global.y-Et,Ot=It-Tt.x,$t=Mt-Tt.y;Math.hypot(Ot,$t)>Pt&&(At=!1),Tt.position.x=It,Tt.position.y=Mt}}),Tt.on("pointerup",Rt=>{wt&&(wt=!1,At&&St(Tt,Rt.global.x,Rt.global.y))}),Tt.on("pointerupoutside",()=>{wt=!1})},[_e,gt]),St=reactExports.useCallback((Tt,wt,Ct)=>{if(!(_!=null&&_.tapMotions))return;console.log("handleTapMotion",_==null?void 0:_.tapMotions);const Et=Tt.toLocal(new Point$1(wt,Ct));if(!Tt.hitTest(Et.x,Et.y).find(Rt=>{var Mt;const It=(Mt=_==null?void 0:_.tapMotions)==null?void 0:Mt[Rt];return It?(console.log(`Found motion group for area ${Rt}:`,It),playRandomMotion(Tt,It),!0):!1})&&Object.keys(_.tapMotions).length>0){const Rt=getMergedMotionGroup(_.tapMotions);playRandomMotion(Tt,Rt)}},[_==null?void 0:_.tapMotions]);return reactExports.useEffect(()=>{var Tt,wt,Ct,Et;ct===AiStateEnum.IDLE&&(console.log("defaultEmotion: ",_==null?void 0:_.defaultEmotion),_!=null&&_.defaultEmotion?(wt=(Tt=nt.current)==null?void 0:Tt.internalModel.motionManager.expressionManager)==null||wt.setExpression(_.defaultEmotion):(Et=(Ct=nt.current)==null?void 0:Ct.internalModel.motionManager.expressionManager)==null||Et.resetExpression())},[nt.current,ct,_==null?void 0:_.defaultEmotion]),reactExports.useEffect(()=>(_!=null&&_.url&&_t(),()=>{mt()}),[_==null?void 0:_.url,_==null?void 0:_.pointerInteractive,_t,mt]),reactExports.useEffect(()=>{at.current=_==null?void 0:_.kScale},[_==null?void 0:_.kScale]),reactExports.useEffect(()=>{bt()},[ut,bt]),reactExports.useEffect(()=>{nt.current&&ut&&xt(nt.current)},[ut,xt,gt]),{canvasRef:et,appRef:tt,modelRef:nt,containerRef:it}},playRandomMotion=(_e,_)=>{if(!_||Object.keys(_).length===0)return;const et=Object.values(_).reduce((nt,it)=>nt+it,0);let tt=Math.random()*et;Object.entries(_).find(([nt,it])=>{if(tt-=it,tt<=0){const at=audioTaskQueue.hasTask()?MotionPriority.NORMAL:MotionPriority.FORCE;return console.log(`Playing weighted motion: ${nt} (weight: ${it}/${et}, priority: ${at})`),_e.motion(nt,void 0,at),!0}return!1})},getMergedMotionGroup=_e=>{const _={};return Object.values(_e).flatMap(et=>Object.entries(et)).reduce((et,[tt,nt])=>(et[tt]||(et[tt]={total:0,count:0}),et[tt].total+=nt,et[tt].count+=1,et),_),Object.entries(_).reduce((et,[tt,{total:nt,count:it}])=>({...et,[tt]:nt/it}),{})},DEFAULT_HISTORY={messages:[],historyList:[],currentHistoryUid:null,fullResponse:""},ChatHistoryContext=reactExports.createContext(null);function ChatHistoryProvider({children:_e}){const[_,et]=reactExports.useState(DEFAULT_HISTORY.messages),[tt,nt]=reactExports.useState(DEFAULT_HISTORY.historyList),[it,at]=reactExports.useState(DEFAULT_HISTORY.currentHistoryUid),[ot,st]=reactExports.useState(DEFAULT_HISTORY.fullResponse),[dt,ht]=reactExports.useState(!1),ct=reactExports.useCallback(bt=>{const _t={id:Date.now().toString(),content:bt,role:"human",timestamp:new Date().toISOString()};et(xt=>[...xt,_t])},[]),ut=reactExports.useCallback((bt,_t,xt)=>{et(St=>{const Tt=St[St.length-1];return console.log("appendAIMessage:",bt,_t),dt||!Tt||Tt.role!=="ai"?(ht(!1),[...St,{id:Date.now().toString(),content:bt,role:"ai",timestamp:new Date().toISOString(),name:_t,avatar:xt}]):[...St.slice(0,-1),{...Tt,content:Tt.content+bt,timestamp:new Date().toISOString()}]})},[dt,ht]),ft=reactExports.useCallback((bt,_t,xt,St)=>{et(Tt=>(ht(!1),console.log("appendAIVisualMessage:",bt,_t),[...Tt,{id:Date.now().toString(),content:"",role:"ai",timestamp:new Date().toISOString(),name:xt,avatar:St,visual_type:bt,visual_data:_t}]))},[]),gt=reactExports.useCallback((bt,_t)=>{bt||console.error("updateHistoryList: uid is null"),it||console.error("updateHistoryList: currentHistoryUid is null"),nt(xt=>xt.map(St=>St.uid===bt?{...St,latest_message:_t?{content:_t.content,role:_t.role,timestamp:_t.timestamp}:null,timestamp:(_t==null?void 0:_t.timestamp)||St.timestamp}:St))},[it]),mt=reactExports.useCallback(bt=>{st(_t=>_t+(bt||""))},[]),vt=reactExports.useCallback(()=>{st(DEFAULT_HISTORY.fullResponse)},[]),yt=reactExports.useMemo(()=>({messages:_,historyList:tt,currentHistoryUid:it,appendHumanMessage:ct,appendAIMessage:ut,appendAIVisualMessage:ft,setMessages:et,setHistoryList:nt,setCurrentHistoryUid:at,updateHistoryList:gt,fullResponse:ot,setFullResponse:st,appendResponse:mt,clearResponse:vt,setForceNewMessage:ht}),[_,tt,it,ct,ut,ft,gt,ot,mt,vt,ht]);return jsxRuntimeExports.jsx(ChatHistoryContext.Provider,{value:yt,children:_e})}function useChatHistory(){const _e=reactExports.useContext(ChatHistoryContext);if(!_e)throw new Error("useChatHistory must be used within a ChatHistoryProvider");return _e}const useInterrupt=()=>{const{aiState:_e,setAiState:_}=useAiState(),{sendMessage:et}=useWebSocket(),{fullResponse:tt,clearResponse:nt}=useChatHistory(),{currentModel:it}=useLive2DModel$1(),{subtitleText:at,setSubtitleText:ot}=useSubtitle();return{interrupt:(dt=!0)=>{_e==="thinking-speaking"&&(console.log("Interrupting conversation chain"),dt&&et({type:"interrupt-signal",text:tt}),_("interrupted"),audioTaskQueue.clearQueue(),it?it.stopSpeaking():console.error("Live2D model is not initialized"),nt(),at==="Thinking..."&&ot(""),console.log("Interrupted!"))}}},useAudioTask=()=>{const{aiState:_e,backendSynthComplete:_,setBackendSynthComplete:et}=useAiState(),{setSubtitleText:tt}=useSubtitle(),{appendResponse:nt,appendAIMessage:it}=useChatHistory(),{currentModel:at}=useLive2DModel$1(),{sendMessage:ot}=useWebSocket(),st=reactExports.useRef({aiState:_e,currentModel:at,setSubtitleText:tt,appendResponse:nt,appendAIMessage:it});st.current={aiState:_e,currentModel:at,setSubtitleText:tt,appendResponse:nt,appendAIMessage:it};const dt=ct=>new Promise(ut=>{const{aiState:ft,currentModel:gt,setSubtitleText:mt,appendResponse:vt,appendAIMessage:yt}=st.current;if(ft==="interrupted"){console.error("Audio playback blocked. State:",ft),ut();return}const{audioBase64:bt,displayText:_t,expressions:xt,forwarded:St}=ct;if(_t&&(vt(_t.text),yt(_t.text,_t.name,_t.avatar),bt&&mt(_t.text),St||ot({type:"audio-play-start",display_text:_t,forwarded:!0})),!gt){console.error("Model not initialized"),ut();return}try{(xt==null?void 0:xt[0])!==void 0&&gt.expression(xt[0]);let Tt=!1;bt?gt.speak(`data:audio/wav;base64,${bt}`,{onFinish:()=>{console.log("Voiceline is over"),Tt=!0,ut()},onError:Ct=>{console.error("Audio playback error:",Ct),Tt=!0,ut()}}):ut();const wt=()=>{Tt||setTimeout(wt,100)};wt()}catch(Tt){console.error("Speak function error:",Tt),toaster.create({title:`Speak function error: ${Tt}`,type:"error",duration:2e3}),ut()}});return reactExports.useEffect(()=>{let ct=!0;return(async()=>{await audioTaskQueue.waitForCompletion(),ct&&_&&(ot({type:"frontend-playback-complete"}),et(!1))})(),()=>{ct=!1}},[_,ot,et]),{addAudioTask:async ct=>{var ft;const{aiState:ut}=st.current;if(ut==="interrupted"){console.log("Skipping audio task due to interrupted state");return}console.log(`Adding audio task ${(ft=ct.displayText)==null?void 0:ft.text} to queue`),audioTaskQueue.addTask(()=>dt(ct))},appendResponse:nt}},Live2D$1=reactExports.memo(({isPet:_e})=>{const{modelInfo:_,isLoading:et}=useLive2DConfig(),{forceIgnoreMouse:tt}=useForceIgnoreMouse();useIpcHandlers({isPet:_e});const{canvasRef:nt,appRef:it,modelRef:at,containerRef:ot}=useLive2DModel({isPet:_e,modelInfo:_});return useLive2DResize(ot,it,at,_,_e),useInterrupt(),useAudioTask(),reactExports.useEffect(()=>(at.current&&(window.live2d={expression:st=>{var dt;return(dt=at.current)==null?void 0:dt.expression(st)},setExpression:st=>{var dt,ht;st!==void 0&&((ht=(dt=at.current)==null?void 0:dt.internalModel.motionManager.expressionManager)==null||ht.setExpression(st))},setRandomExpression:()=>{var st,dt;return(dt=(st=at.current)==null?void 0:st.internalModel.motionManager.expressionManager)==null?void 0:dt.setRandomExpression()},getExpressions:()=>{var st,dt;return(dt=(st=at.current)==null?void 0:st.internalModel.motionManager.expressionManager)==null?void 0:dt.definitions.map(ht=>ht.name)}}),()=>{delete window.live2d}),[at.current]),jsxRuntimeExports.jsx("div",{ref:ot,style:{width:_e?"100vw":"100%",height:_e?"100vh":"100%",pointerEvents:_e&&tt?"none":"auto",overflow:"hidden",opacity:et?0:1,transition:"opacity 0.3s ease-in-out"},children:jsxRuntimeExports.jsx("canvas",{id:"canvas",ref:nt,style:{width:"100%",height:"100%",pointerEvents:_e&&tt?"none":"auto",display:"block"}})})});Live2D$1.displayName="Live2D";function Canvas(){return jsxRuntimeExports.jsx(Background,{children:jsxRuntimeExports.jsxs(Box,{...canvasStyles.canvas.container,children:[jsxRuntimeExports.jsx(Live2D$1,{isPet:!1}),jsxRuntimeExports.jsx(WebSocketStatus,{}),jsxRuntimeExports.jsx(Subtitle,{})]})})}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded$x=["attr","size","title"];function _objectWithoutProperties$x(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$x(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$x(_e,_){if(_e==null)return{};var et={};for(var tt in _e)if(Object.prototype.hasOwnProperty.call(_e,tt)){if(_.indexOf(tt)>=0)continue;et[tt]=_e[tt]}return et}function _extends$w(){return _extends$w=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$w.apply(this,arguments)}function ownKeys$2(_e,_){var et=Object.keys(_e);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_e);_&&(tt=tt.filter(function(nt){return Object.getOwnPropertyDescriptor(_e,nt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$2(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$2(Object(et),!0).forEach(function(tt){_defineProperty$g(_e,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(et)):ownKeys$2(Object(et)).forEach(function(tt){Object.defineProperty(_e,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _e}function _defineProperty$g(_e,_,et){return _=_toPropertyKey$f(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$f(_e){var _=_toPrimitive$f(_e,"string");return typeof _=="symbol"?_:_+""}function _toPrimitive$f(_e,_){if(typeof _e!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(typeof tt!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function Tree2Element(_e){return _e&&_e.map((_,et)=>React.createElement(_.tag,_objectSpread$2({key:et},_.attr),Tree2Element(_.child)))}function GenIcon(_e){return _=>React.createElement(IconBase,_extends$w({attr:_objectSpread$2({},_e.attr)},_),Tree2Element(_e.child))}function IconBase(_e){var _=et=>{var{attr:tt,size:nt,title:it}=_e,at=_objectWithoutProperties$x(_e,_excluded$x),ot=nt||et.size||"1em",st;return et.className&&(st=et.className),_e.className&&(st=(st?st+" ":"")+_e.className),React.createElement("svg",_extends$w({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},et.attr,tt,at,{className:st,style:_objectSpread$2(_objectSpread$2({color:_e.color||et.color},et.style),_e.style),height:ot,width:ot,xmlns:"http://www.w3.org/2000/svg"}),it&&React.createElement("title",null,it),_e.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,et=>_(et)):_(DefaultContext)}function FiChevronDown(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(_e)}function FiChevronLeft(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(_e)}function FiChevronsDown(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"7 13 12 18 17 13"},child:[]},{tag:"polyline",attr:{points:"7 6 12 11 17 6"},child:[]}]})(_e)}function FiClock(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(_e)}function FiMaximize2(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"polyline",attr:{points:"9 21 3 21 3 15"},child:[]},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(_e)}function FiMinimize2(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 14 10 14 10 20"},child:[]},{tag:"polyline",attr:{points:"20 10 14 10 14 4"},child:[]},{tag:"line",attr:{x1:"14",y1:"10",x2:"21",y2:"3"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(_e)}function FiMinus(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(_e)}function FiPlus(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(_e)}function FiSettings(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(_e)}function FiTrash2(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(_e)}function FiUsers(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(_e)}function FiX(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(_e)}const isElectron$2=window.api!==void 0,commonStyles={scrollbar:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{bg:"whiteAlpha.100",borderRadius:"full"},"&::-webkit-scrollbar-thumb":{bg:"whiteAlpha.300",borderRadius:"full"}},panel:{border:"1px solid",borderColor:"whiteAlpha.200",borderRadius:"lg",bg:"blackAlpha.400"},title:{fontSize:"lg",fontWeight:"semibold",color:"white",mb:4}},sidebarStyles={sidebar:{container:_e=>({position:"absolute",left:0,top:0,height:"100%",width:"100%",bg:"gray.900",transform:_e?"translateX(calc(-100% + 24px))":"translateX(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"column",gap:4,overflow:_e?"visible":"hidden",pb:"4"}),toggleButton:{position:"absolute",right:0,top:0,width:"24px",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"whiteAlpha.700",_hover:{color:"white"},bg:"transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:1},content:{flex:1,width:"100%",display:"flex",flexDirection:"column",gap:4,overflow:"hidden"},header:{width:"100%",display:"flex",alignItems:"center",gap:1,p:2}},chatHistoryPanel:{container:{flex:1,overflow:"hidden",px:4,display:"flex",flexDirection:"column"},title:commonStyles.title,messageList:{...commonStyles.panel,p:4,width:"97%",flex:1,overflowY:"auto",css:{...commonStyles.scrollbar,scrollPaddingBottom:"1rem"},display:"flex",flexDirection:"column",gap:2}},systemLogPanel:{container:{width:"100%",overflow:"hidden",px:4,minH:"200px",marginTop:"auto"},title:commonStyles.title,logList:{...commonStyles.panel,p:4,height:"200px",overflowY:"auto",fontFamily:"mono",css:commonStyles.scrollbar},entry:{p:2,borderRadius:"md",_hover:{bg:"whiteAlpha.50"}}},chatBubble:{container:{display:"flex",position:"relative",_hover:{bg:"whiteAlpha.50"},py:1,px:2,borderRadius:"md"},message:{maxW:"90%",bg:"transparent",p:2},text:{fontSize:"xs",color:"whiteAlpha.900"},dot:{position:"absolute",w:"2",h:"2",borderRadius:"full",bg:"white",top:"2"}},historyDrawer:{listContainer:{flex:1,overflowY:"auto",px:4,py:2,css:commonStyles.scrollbar},historyItem:{mb:4,p:3,borderRadius:"md",bg:"whiteAlpha.50",cursor:"pointer",transition:"all 0.2s",_hover:{bg:"whiteAlpha.100"}},historyItemSelected:{bg:"whiteAlpha.200",borderLeft:"3px solid",borderColor:"blue.500"},historyHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},timestamp:{fontSize:"sm",color:"whiteAlpha.700",fontFamily:"mono"},deleteButton:{variant:"ghost",colorScheme:"red",size:"sm",color:"red.300",opacity:.8,_hover:{opacity:1,bg:"whiteAlpha.200"}},messagePreview:{fontSize:"sm",color:"whiteAlpha.900",noOfLines:2,overflow:"hidden",textOverflow:"ellipsis"},drawer:{content:{background:"var(--chakra-colors-gray-900)",maxWidth:"440px",marginTop:isElectron$2?"30px":"0",height:isElectron$2?"calc(100vh - 30px)":"100vh"},title:{color:"white"},closeButton:{color:"white"},actionButton:{color:"white",borderColor:"white",variant:"outline"}}},cameraPanel:{container:{width:"97%",overflow:"hidden",px:4,minH:"240px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},title:commonStyles.title,videoContainer:{...commonStyles.panel,width:"100%",height:"240px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",transition:"all 0.2s"},video:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)",borderRadius:"8px",display:"block"}},screenPanel:{container:{width:"97%",overflow:"hidden",px:4,minH:"240px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},title:commonStyles.title,screenContainer:{...commonStyles.panel,width:"100%",height:"240px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",transition:"all 0.2s"},video:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",display:"block"}},bottomTab:{container:{width:"97%",px:4,position:"relative",zIndex:0},tabs:{width:"100%",bg:"whiteAlpha.50",borderRadius:"lg",p:"1"},list:{borderBottom:"none",gap:"2"},trigger:{color:"whiteAlpha.700",display:"flex",alignItems:"center",gap:2,px:3,py:2,borderRadius:"md",_hover:{color:"white",bg:"whiteAlpha.50"},_selected:{color:"white",bg:"whiteAlpha.200"}}},groupDrawer:{section:{mb:6},sectionTitle:{fontSize:"lg",fontWeight:"semibold",color:"white",mb:3},inviteBox:{display:"flex",gap:2},input:{bg:"whiteAlpha.100",border:"none",color:"white",_placeholder:{color:"whiteAlpha.400"}},memberList:{display:"flex",flexDirection:"column",gap:2},memberItem:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderRadius:"md",bg:"whiteAlpha.100"},memberText:{color:"white",fontSize:"sm"},removeButton:{size:"sm",color:"red.300",bg:"transparent",_hover:{bg:"whiteAlpha.200"}},button:{color:"white",bg:"whiteAlpha.100",_hover:{bg:"whiteAlpha.200"}},clipboardButton:{color:"white",bg:"transparent",_hover:{bg:"whiteAlpha.200"},size:"sm"}}},chatPanelStyles=css$3`
  .cs-message-list {
    background: var(--chakra-colors-gray-900) !important;
    padding: var(--chakra-space-4);
  }
  
  .cs-message {
    margin: 12px 0;
    padding-top: 20px !important;
  }

  .cs-message__content {
    background-color: var(--chakra-colors-gray-700) !important;
    border-radius: var(--chakra-radii-md);
    padding: 8px !important;
    color: var(--chakra-colors-white) !important;
    font-size: 0.95rem !important;
    line-height: 1.5 !important;
    margin-top: 4px !important;
  }

  .cs-message__text {
    padding: 8px 0 !important;
  }

  .cs-message--outgoing .cs-message__content {
    background-color: var(--chakra-colors-gray-600) !important;
  }

  .cs-chat-container {
    background: transparent !important;
    border: 1px solid var(--chakra-colors-whiteAlpha-200);
    border-radius: var(--chakra-radii-lg);
    padding: var(--chakra-space-2);
  }

  .cs-main-container {
    border: none !important;
    background: transparent !important;
    width: calc(100% - 24px) !important;
    margin-left: 0 !important;
  }

  .cs-message__sender {
    position: absolute !important;
    top: 0 !important;
    left: 36px !important;
    font-size: 0.875rem !important;
    font-weight: 600 !important;
    color: var(--chakra-colors-whiteAlpha-900) !important;
  }

  .cs-message__content-wrapper {
    max-width: 80%;
    margin: 0 8px;
  }

  .cs-avatar {
    background-color: var(--chakra-colors-blue-500) !important;
    color: white !important;
    width: 28px !important;
    height: 28px !important;
    font-size: 14px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: 50% !important;
  }

  .cs-message--outgoing .cs-avatar {
    background-color: var(--chakra-colors-green-500) !important;
  }

  .cs-message__header {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
`;function LuBell(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"},child:[]},{tag:"path",attr:{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"},child:[]}]})(_e)}function LuCheck(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 6 9 17l-5-5"},child:[]}]})(_e)}function LuClipboard(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"},child:[]},{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]}]})(_e)}function LuHand(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2"},child:[]},{tag:"path",attr:{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2"},child:[]},{tag:"path",attr:{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8"},child:[]},{tag:"path",attr:{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"},child:[]}]})(_e)}function LuLink(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(_e)}function LuMicOff(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"2",x2:"22",y1:"2",y2:"22"},child:[]},{tag:"path",attr:{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"},child:[]},{tag:"path",attr:{d:"M5 10v2a7 7 0 0 0 12 5"},child:[]},{tag:"path",attr:{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33"},child:[]},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"19",y2:"22"},child:[]}]})(_e)}function LuMic(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"},child:[]},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"19",y2:"22"},child:[]}]})(_e)}function LuSend(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},child:[]},{tag:"path",attr:{d:"m21.854 2.147-10.94 10.939"},child:[]}]})(_e)}function LuX(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(_e)}const CloseButton=reactExports.forwardRef((_e,_)=>jsxRuntimeExports.jsx(IconButton,{variant:"ghost","aria-label":"Close",ref:_,..._e,children:_e.children??jsxRuntimeExports.jsx(LuX,{})})),isElectron$1=window.api!==void 0,settingStyles={settingUI:{container:{width:"100%",height:"100%",p:4,gap:4,position:"relative",overflowY:"auto",css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{bg:"whiteAlpha.100",borderRadius:"full"},"&::-webkit-scrollbar-thumb":{bg:"whiteAlpha.300",borderRadius:"full"}}},header:{width:"100%",display:"flex",alignItems:"center",gap:1},title:{ml:4,fontSize:"lg",fontWeight:"bold"},tabs:{root:{width:"100%",variant:"plain",colorPalette:"gray"},content:{},trigger:{color:"whiteAlpha.600",_selected:{color:"white"},_hover:{color:"white"}},list:{display:"flex",justifyContent:"flex-start",width:"100%",borderBottom:"1px solid",borderColor:"whiteAlpha.200",mb:4,pl:0}},footer:{width:"100%",display:"flex",justifyContent:"flex-end",gap:2,mt:"auto",pt:4,borderTop:"1px solid",borderColor:"whiteAlpha.200"},drawerContent:{bg:"gray.900",maxWidth:"440px",height:isElectron$1?"calc(100vh - 30px)":"100vh",borderLeft:"1px solid",borderColor:"whiteAlpha.200"},drawerHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",position:"relative",px:6,py:4},drawerTitle:{color:"white",fontSize:"lg",fontWeight:"semibold"},closeButton:{position:"absolute",right:1,top:1,color:"white"}},general:{container:{align:"stretch",gap:6,p:4},field:{label:{color:"whiteAlpha.800"}},select:{root:{colorPalette:"gray",bg:"gray.800"},trigger:{bg:"gray.800"}},input:{bg:"gray.800"},buttonGroup:{gap:4,width:"100%"},button:{width:"50%",variant:"outline",bg:"blue",color:"white",_hover:{bg:"whiteAlpha.300"}},fieldLabel:{fontSize:"14px",color:"gray.600"}},common:{field:{orientation:"horizontal"},fieldLabel:{fontSize:"sm",color:"whiteAlpha.800",whiteSpace:"nowrap"},switch:{size:"md",colorPalette:"blue",variant:"solid"},numberInput:{root:{pattern:"[0-9]*\\.?[0-9]*",inputMode:"decimal"},input:{bg:"whiteAlpha.100",borderColor:"whiteAlpha.200",_hover:{bg:"whiteAlpha.200"}}},container:{gap:8,maxW:"sm",css:{"--field-label-width":"120px"}},input:{bg:"whiteAlpha.100",borderColor:"whiteAlpha.200",_hover:{bg:"whiteAlpha.200"}}},live2d:{container:{gap:8,maxW:"sm",css:{"--field-label-width":"120px"}},emotionMap:{title:{fontWeight:"bold",mb:4},entry:{mb:2},button:{colorPalette:"blue",mt:2},deleteButton:{colorPalette:"red"}}}},useGeneralSettings=({bgUrlContext:_e,confName:_,setConfName:et,baseUrl:tt,wsUrl:nt,onWsUrlChange:it,onBaseUrlChange:at,onSave:ot,onCancel:st})=>{var It;const{showSubtitle:dt,setShowSubtitle:ht}=useSubtitle(),{setUseCameraBackground:ct}=_e||{},{startBackgroundCamera:ut,stopBackgroundCamera:ft}=useCamera(),{configFiles:gt,getFilenameByName:mt}=useConfig(),{switchCharacter:vt}=useSwitchCharacter(),yt=()=>{if(!(_e!=null&&_e.backgroundUrl))return[];const Ot=_e.backgroundUrl.replace(tt,"");return Ot.startsWith("/bg/")?[Ot]:[]},bt={language:["en"],customBgUrl:(It=_e==null?void 0:_e.backgroundUrl)!=null&&It.includes("/bg/")?"":(_e==null?void 0:_e.backgroundUrl)||"",selectedBgUrl:yt(),backgroundUrl:(_e==null?void 0:_e.backgroundUrl)||"",selectedCharacterPreset:[],useCameraBackground:(_e==null?void 0:_e.useCameraBackground)||!1,wsUrl:nt||defaultWsUrl,baseUrl:tt||defaultBaseUrl,showSubtitle:dt},[_t,xt]=reactExports.useState(bt),[St,Tt]=reactExports.useState(bt),wt=_;reactExports.useEffect(()=>{ht(_t.showSubtitle);const Mt=_t.customBgUrl||_t.selectedBgUrl[0];if(Mt&&_e){const Ot=Mt.startsWith("http")?Mt:`${tt}${Mt}`;_e.setBackgroundUrl(Ot)}it(_t.wsUrl),at(_t.baseUrl)},[_t]),reactExports.useEffect(()=>{if(_){const Mt={..._t,selectedCharacterPreset:[_]};xt(Mt),Tt(Mt)}},[_]),reactExports.useEffect(()=>{if(!ot||!st)return;const Mt=ot(()=>{Et()}),Ot=st(()=>{At()});return()=>{Mt==null||Mt(),Ot==null||Ot()}},[ot,st]);const Ct=(Mt,Ot)=>{xt($t=>({...$t,[Mt]:Ot})),Mt==="wsUrl"&&it(Ot),Mt==="baseUrl"&&at(Ot)},Et=()=>{Tt(_t)},At=()=>{xt(St),ht(St.showSubtitle),_e&&(_e.setBackgroundUrl(St.backgroundUrl),_e.setUseCameraBackground(St.useCameraBackground)),it(St.wsUrl),at(St.baseUrl),wt&&et(wt),St.useCameraBackground?ut():ft()};return{settings:_t,handleSettingChange:Ct,handleSave:Et,handleCancel:At,handleCameraToggle:async Mt=>{if(ct)if(Mt)try{await ut(),Ct("useCameraBackground",!0),ct(!0)}catch(Ot){console.error("Failed to start camera:",Ot),Ct("useCameraBackground",!1),ct(!1)}else ft(),Ct("useCameraBackground",!1),ct(!1)},handleCharacterPresetChange:Mt=>{const Ot=Mt[0],$t=gt.find(kt=>kt.filename===Ot),Lt=_?mt(_):"";Ct("selectedCharacterPreset",Mt),Lt!==Ot&&$t&&vt(Ot)},showSubtitle:dt,setShowSubtitle:ht}},Field=reactExports.forwardRef((_e,_)=>{const{label:et,children:tt,helperText:nt,errorText:it,optionalText:at,...ot}=_e;return jsxRuntimeExports.jsxs(FieldRoot,{ref:_,...ot,children:[et&&jsxRuntimeExports.jsxs(FieldLabel,{children:[et,jsxRuntimeExports.jsx(FieldRequiredIndicator,{fallback:at})]}),tt,nt&&jsxRuntimeExports.jsx(FieldHelperText,{children:nt}),it&&jsxRuntimeExports.jsx(FieldErrorText,{children:it})]})}),Switch=reactExports.forwardRef((_e,_)=>{const{inputProps:et,children:tt,rootRef:nt,trackLabel:it,thumbLabel:at,...ot}=_e;return jsxRuntimeExports.jsxs(SwitchRoot,{ref:nt,...ot,children:[jsxRuntimeExports.jsx(SwitchHiddenInput,{ref:_,...et}),jsxRuntimeExports.jsxs(SwitchControl,{children:[jsxRuntimeExports.jsx(SwitchThumb,{children:at&&jsxRuntimeExports.jsx(SwitchThumbIndicator,{fallback:at==null?void 0:at.off,children:at==null?void 0:at.on})}),it&&jsxRuntimeExports.jsx(SwitchIndicator,{fallback:it.off,children:it.on})]}),tt!=null&&jsxRuntimeExports.jsx(SwitchLabel,{children:tt})]})}),SelectTrigger=reactExports.forwardRef((_e,_)=>{const{children:et,clearable:tt,...nt}=_e;return jsxRuntimeExports.jsxs(SelectControl,{...nt,children:[jsxRuntimeExports.jsx(SelectTrigger$1,{ref:_,children:et}),jsxRuntimeExports.jsxs(SelectIndicatorGroup,{children:[tt&&jsxRuntimeExports.jsx(SelectClearTrigger,{}),jsxRuntimeExports.jsx(SelectIndicator,{})]})]})}),SelectClearTrigger=reactExports.forwardRef((_e,_)=>jsxRuntimeExports.jsx(SelectClearTrigger$1,{asChild:!0,..._e,ref:_,children:jsxRuntimeExports.jsx(CloseButton,{size:"xs",variant:"plain",focusVisibleRing:"inside",focusRingWidth:"2px",pointerEvents:"auto"})})),SelectContent=reactExports.forwardRef((_e,_)=>{const{portalled:et=!0,portalRef:tt,...nt}=_e;return jsxRuntimeExports.jsx(Portal,{disabled:!et,container:tt,children:jsxRuntimeExports.jsx(SelectPositioner,{children:jsxRuntimeExports.jsx(SelectContent$1,{...nt,ref:_})})})}),SelectItem=reactExports.forwardRef((_e,_)=>{const{item:et,children:tt,...nt}=_e;return jsxRuntimeExports.jsxs(SelectItem$1,{item:et,...nt,ref:_,children:[tt,jsxRuntimeExports.jsx(SelectItemIndicator,{})]},et.value)}),SelectValueText=reactExports.forwardRef((_e,_)=>{const{children:et,...tt}=_e;return jsxRuntimeExports.jsx(SelectValueText$1,{...tt,ref:_,children:jsxRuntimeExports.jsx(SelectContext,{children:nt=>{const it=nt.selectedItems;return it.length===0?_e.placeholder:et?et(it):it.length===1?nt.collection.stringifyItem(it[0]):`${it.length} selected`}})})}),SelectRoot=reactExports.forwardRef((_e,_)=>jsxRuntimeExports.jsx(SelectRoot$1,{..._e,ref:_,positioning:{sameWidth:!0,..._e.positioning},children:_e.asChild?_e.children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectHiddenSelect,{}),_e.children]})}));reactExports.forwardRef((_e,_)=>{const{children:et,label:tt,...nt}=_e;return jsxRuntimeExports.jsxs(SelectItemGroup,{...nt,ref:_,children:[jsxRuntimeExports.jsx(SelectItemGroupLabel,{children:tt}),et]})});function SelectField({label:_e,value:_,onChange:et,collection:tt,placeholder:nt}){return jsxRuntimeExports.jsx(Field,{...settingStyles.general.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.general.field.label,children:_e}),children:jsxRuntimeExports.jsxs(SelectRoot,{...settingStyles.general.select.root,collection:tt,value:_,onValueChange:it=>et(it.value),children:[jsxRuntimeExports.jsx(SelectTrigger,{...settingStyles.general.select.trigger,children:jsxRuntimeExports.jsx(SelectValueText,{placeholder:nt})}),jsxRuntimeExports.jsx(SelectContent,{children:tt.items.map(it=>jsxRuntimeExports.jsx(SelectItem,{item:it,children:it.label},it.value))})]})})}function NumberField({label:_e,value:_,onChange:et,min:tt,max:nt,step:it,allowMouseWheel:at}){return jsxRuntimeExports.jsx(Field,{...settingStyles.common.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.common.fieldLabel,children:_e}),children:jsxRuntimeExports.jsxs(NumberInputRoot,{...settingStyles.common.numberInput.root,value:_.toString(),onValueChange:ot=>et(ot.value),min:tt,max:nt,step:it,allowMouseWheel:at,children:[jsxRuntimeExports.jsx(NumberInputInput,{...settingStyles.common.numberInput.input}),jsxRuntimeExports.jsxs(NumberInputControl,{children:[jsxRuntimeExports.jsx(NumberInputIncrementTrigger,{}),jsxRuntimeExports.jsx(NumberInputDecrementTrigger,{})]})]})})}function SwitchField({label:_e,checked:_,onChange:et}){return jsxRuntimeExports.jsx(Field,{...settingStyles.common.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.common.fieldLabel,children:_e}),children:jsxRuntimeExports.jsx(Switch,{...settingStyles.common.switch,checked:_,onCheckedChange:tt=>et(tt.checked)})})}function InputField({label:_e,value:_,onChange:et,placeholder:tt}){return jsxRuntimeExports.jsx(Field,{...settingStyles.general.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.general.field.label,children:_e}),children:jsxRuntimeExports.jsx(Input,{...settingStyles.general.input,placeholder:tt,value:_,onChange:nt=>et(nt.target.value)})})}const useCollections=()=>{const{backgroundFiles:_e}=useBgUrl()||{},{configFiles:_}=useConfig(),et=createListCollection({items:[{label:"English",value:"en"},{label:"",value:"zh"}]}),tt=createListCollection({items:(_e==null?void 0:_e.map(it=>({label:String(it),value:`/bg/${it}`})))||[]}),nt=createListCollection({items:_.map(it=>({label:it.name,value:it.filename}))});return{languages:et,backgrounds:tt,characterPresets:nt}};function General({onSave:_e,onCancel:_}){const et=useBgUrl(),{confName:tt,setConfName:nt}=useConfig(),{wsUrl:it,setWsUrl:at,baseUrl:ot,setBaseUrl:st}=useWebSocket(),dt=useCollections(),{settings:ht,handleSettingChange:ct,handleCameraToggle:ut,handleCharacterPresetChange:ft,showSubtitle:gt,setShowSubtitle:mt}=useGeneralSettings({bgUrlContext:et,confName:tt,setConfName:nt,baseUrl:ot,wsUrl:it,onWsUrlChange:at,onBaseUrlChange:st,onSave:_e,onCancel:_});return jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SelectField,{label:"Language",value:ht.language,onChange:vt=>ct("language",vt),collection:dt.languages,placeholder:"Select language"}),jsxRuntimeExports.jsx(SwitchField,{label:"Use Camera Background",checked:ht.useCameraBackground,onChange:ut}),jsxRuntimeExports.jsx(SwitchField,{label:"Show Subtitle",checked:gt,onChange:mt}),!ht.useCameraBackground&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectField,{label:"Background Image",value:ht.selectedBgUrl,onChange:vt=>ct("selectedBgUrl",vt),collection:dt.backgrounds,placeholder:"Select from available backgrounds"}),jsxRuntimeExports.jsx(InputField,{label:"Or enter a custom background URL",value:ht.customBgUrl,onChange:vt=>ct("customBgUrl",vt),placeholder:"Enter image URL"})]}),jsxRuntimeExports.jsx(SelectField,{label:"Character Preset",value:ht.selectedCharacterPreset,onChange:ft,collection:dt.characterPresets,placeholder:tt||"Select character preset"}),jsxRuntimeExports.jsx(InputField,{label:"WebSocket URL",value:ht.wsUrl,onChange:vt=>ct("wsUrl",vt),placeholder:"Enter WebSocket URL"}),jsxRuntimeExports.jsx(InputField,{label:"Base URL",value:ht.baseUrl,onChange:vt=>ct("baseUrl",vt),placeholder:"Enter Base URL"})]})}const useLive2dSettings=()=>{const _e=useLive2DConfig(),_={url:"",kScale:.5,initialXshift:0,initialYshift:0,emotionMap:{},scrollToResize:!0},[et,tt]=reactExports.useState((_e==null?void 0:_e.modelInfo)||_),[nt,it]=reactExports.useState((_e==null?void 0:_e.modelInfo)||_);return reactExports.useEffect(()=>{_e!=null&&_e.modelInfo&&JSON.stringify(_e.modelInfo)!==JSON.stringify(nt)&&(it(_e.modelInfo),tt(_e.modelInfo))},[_e==null?void 0:_e.modelInfo]),reactExports.useEffect(()=>{_e&&et&&_e.setModelInfo(et)},[et.pointerInteractive,et.scrollToResize]),{modelInfo:et,handleInputChange:(dt,ht)=>{tt(ct=>({...ct,[dt]:ht}))},handleSave:()=>{_e&&et&&it(et)},handleCancel:()=>{tt(nt),_e&&nt&&_e.setModelInfo(nt)}}};function live2D({onSave:_e,onCancel:_}){const{modelInfo:et,handleInputChange:tt,handleSave:nt,handleCancel:it}=useLive2dSettings();return reactExports.useEffect(()=>{if(!_e||!_)return;const at=_e(nt),ot=_(it);return()=>{at==null||at(),ot==null||ot()}},[_e,_]),jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SwitchField,{label:"Pointer Interactive",checked:et.pointerInteractive??!1,onChange:at=>tt("pointerInteractive",at)}),jsxRuntimeExports.jsx(SwitchField,{label:"Enable Scroll to Resize",checked:et.scrollToResize??!0,onChange:at=>tt("scrollToResize",at)})]})}const useASRSettings=()=>{const{settings:_e,updateSettings:_,autoStopMic:et,setAutoStopMic:tt,autoStartMicOn:nt,setAutoStartMicOn:it,autoStartMicOnConvEnd:at,setAutoStartMicOnConvEnd:ot}=useVAD(),st=reactExports.useRef(_e),dt=reactExports.useRef(_e),ht=reactExports.useRef(et),ct=reactExports.useRef(nt),ut=reactExports.useRef(at),[ft,gt]=reactExports.useState(et),[mt,vt]=reactExports.useState(nt),[yt,bt]=reactExports.useState(at),[,_t]=React.useReducer(At=>At+1,0);reactExports.useEffect(()=>{gt(et),vt(nt),bt(at)},[et,nt,at]);const xt=(At,Pt)=>{if(Pt===""||Pt==="-")st.current={...st.current,[At]:Pt};else{const Rt=Number(Pt);isNaN(Rt)||(st.current={...st.current,[At]:Rt})}_t()},St=At=>{gt(At),tt(At)},Tt=At=>{vt(At),it(At)},wt=At=>{bt(At),ot(At)},Ct=()=>{_(st.current),dt.current=st.current,ht.current=ft,ct.current=mt,ut.current=yt},Et=()=>{st.current=dt.current,gt(ht.current),vt(ct.current),tt(ht.current),it(ct.current),bt(ut.current),ot(ut.current),_t()};return{localSettings:st.current,autoStopMic:ft,autoStartMicOn:mt,autoStartMicOnConvEnd:yt,setAutoStopMic:St,setAutoStartMicOn:Tt,setAutoStartMicOnConvEnd:wt,handleInputChange:xt,handleSave:Ct,handleCancel:Et}};function ASR({onSave:_e,onCancel:_}){const{localSettings:et,autoStopMic:tt,autoStartMicOn:nt,autoStartMicOnConvEnd:it,setAutoStopMic:at,setAutoStartMicOn:ot,setAutoStartMicOnConvEnd:st,handleInputChange:dt,handleSave:ht,handleCancel:ct}=useASRSettings();return reactExports.useEffect(()=>{if(!_e||!_)return;const ut=_e(ht),ft=_(ct);return()=>{ut==null||ut(),ft==null||ft()}},[_e,_,ht,ct]),jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SwitchField,{label:"Auto Stop Mic When AI Start Speaking",checked:tt,onChange:at}),jsxRuntimeExports.jsx(SwitchField,{label:"Auto Start Mic When Conversation End",checked:it,onChange:st}),jsxRuntimeExports.jsx(SwitchField,{label:"Auto Start Mic When AI Interrupted",checked:nt,onChange:ot}),jsxRuntimeExports.jsx(NumberField,{label:"Speech Prob Threshold",value:et.positiveSpeechThreshold,onChange:ut=>dt("positiveSpeechThreshold",ut),min:1,max:100}),jsxRuntimeExports.jsx(NumberField,{label:"Negative Speech Threshold",value:et.negativeSpeechThreshold,onChange:ut=>dt("negativeSpeechThreshold",ut),min:0,max:100}),jsxRuntimeExports.jsx(NumberField,{label:"Redemption Frames",value:et.redemptionFrames,onChange:ut=>dt("redemptionFrames",ut),min:1,max:100})]})}function TTS(){return jsxRuntimeExports.jsx(Box,{children:"TTS Settings Content"})}function useTriggerSpeak(){const{sendMessage:_e}=useWebSocket(),{captureAllMedia:_}=useMediaCapture();return{sendTriggerSignal:reactExports.useCallback(async tt=>{const nt=await _();_e({type:"ai-speak-signal",idle_time:tt,images:nt})},[_e,_])}}const defaultSettings$1={allowProactiveSpeak:!1,idleSecondsToSpeak:5,allowButtonTrigger:!1},ProactiveSpeakContext=reactExports.createContext(null);function ProactiveSpeakProvider({children:_e}){const[_,et]=useLocalStorage("proactiveSpeakSettings",defaultSettings$1),{aiState:tt}=useAiState(),{sendTriggerSignal:nt}=useTriggerSpeak(),it=reactExports.useRef(null),at=reactExports.useRef(null),ot=reactExports.useCallback(()=>{it.current&&(clearTimeout(it.current),it.current=null),at.current=null},[]),st=reactExports.useCallback(()=>{ot(),_.allowProactiveSpeak&&(at.current=Date.now(),it.current=setTimeout(()=>{const ct=(Date.now()-at.current)/1e3;nt(ct)},_.idleSecondsToSpeak*1e3))},[_.allowProactiveSpeak,_.idleSecondsToSpeak,nt,ot]);reactExports.useEffect(()=>{tt===AiStateEnum.IDLE?st():ot()},[tt,st,ot]),reactExports.useEffect(()=>()=>{ot()},[ot]);const dt=reactExports.useCallback(ct=>{et(ct)},[et]),ht=reactExports.useMemo(()=>({settings:_,updateSettings:dt}),[_,dt]);return jsxRuntimeExports.jsx(ProactiveSpeakContext.Provider,{value:ht,children:_e})}function useProactiveSpeak(){const _e=reactExports.useContext(ProactiveSpeakContext);if(!_e)throw new Error("useProactiveSpeak must be used within a ProactiveSpeakProvider");return _e}function useAgentSettings({onSave:_e,onCancel:_}={}){const{settings:et,updateSettings:tt}=useProactiveSpeak(),[nt,it]=reactExports.useState({allowProactiveSpeak:et.allowProactiveSpeak,idleSecondsToSpeak:et.idleSecondsToSpeak,allowButtonTrigger:et.allowButtonTrigger}),[at,ot]=reactExports.useState({...et});reactExports.useEffect(()=>{et&&(ot(et),it(et))},[et]);const st=reactExports.useCallback(ft=>{it(gt=>({...gt,allowProactiveSpeak:ft}))},[]),dt=reactExports.useCallback(ft=>{it(gt=>({...gt,idleSecondsToSpeak:ft}))},[]),ht=reactExports.useCallback(ft=>{it(gt=>({...gt,allowButtonTrigger:ft}))},[]),ct=reactExports.useCallback(()=>{tt(nt),ot(nt)},[tt,nt]),ut=reactExports.useCallback(()=>{it(at),tt(at)},[at,tt]);return reactExports.useEffect(()=>{if(!_e||!_)return;const ft=_e(ct),gt=_(ut);return()=>{ft==null||ft(),gt==null||gt()}},[_e,_,ct,ut]),{settings:nt,handleAllowProactiveSpeakChange:st,handleIdleSecondsChange:dt,handleAllowButtonTriggerChange:ht}}function Agent({onSave:_e,onCancel:_}){const{settings:et,handleAllowProactiveSpeakChange:tt,handleIdleSecondsChange:nt,handleAllowButtonTriggerChange:it}=useAgentSettings({onSave:_e,onCancel:_});return jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SwitchField,{label:"Allow AI to Speak Proactively",checked:et.allowProactiveSpeak,onChange:tt}),et.allowProactiveSpeak&&jsxRuntimeExports.jsx(NumberField,{label:"Idle seconds allow AI to speak",value:et.idleSecondsToSpeak,onChange:at=>nt(Number(at)),min:0,step:.1,allowMouseWheel:!0}),jsxRuntimeExports.jsx(SwitchField,{label:"Prompt AI to Speak via Raise Hand Button",checked:et.allowButtonTrigger,onChange:it})]})}function About(){return jsxRuntimeExports.jsx(Box,{children:"About Settings Content"})}function SettingUI({open:_e,onClose:_}){const[et,tt]=reactExports.useState([]),[nt,it]=reactExports.useState([]),[at,ot]=reactExports.useState("general"),st=reactExports.useCallback(ft=>(tt(gt=>[...gt,ft]),()=>{tt(gt=>gt.filter(mt=>mt!==ft))}),[]),dt=reactExports.useCallback(ft=>(it(gt=>[...gt,ft]),()=>{it(gt=>gt.filter(mt=>mt!==ft))}),[]),ht=reactExports.useCallback(()=>{et.forEach(ft=>ft()),_()},[et,_]),ct=reactExports.useCallback(()=>{nt.forEach(ft=>ft()),_()},[nt,_]),ut=reactExports.useMemo(()=>jsxRuntimeExports.jsxs(TabsContentGroup,{children:[jsxRuntimeExports.jsx(TabsContent,{value:"general",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(General,{onSave:st,onCancel:dt})}),jsxRuntimeExports.jsx(TabsContent,{value:"live2d",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(live2D,{onSave:st,onCancel:dt})}),jsxRuntimeExports.jsx(TabsContent,{value:"asr",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(ASR,{onSave:st,onCancel:dt})}),jsxRuntimeExports.jsx(TabsContent,{value:"tts",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(TTS,{})}),jsxRuntimeExports.jsx(TabsContent,{value:"agent",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(Agent,{onSave:st,onCancel:dt})}),jsxRuntimeExports.jsx(TabsContent,{value:"about",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(About,{})})]}),[st,dt]);return jsxRuntimeExports.jsxs(DrawerRoot$1,{open:_e,onOpenChange:ft=>ft.open?null:_(),placement:"start",children:[jsxRuntimeExports.jsx(DrawerBackdrop$1,{}),jsxRuntimeExports.jsxs(DrawerContent$1,{...settingStyles.settingUI.drawerContent,children:[jsxRuntimeExports.jsxs(DrawerHeader$1,{...settingStyles.settingUI.drawerHeader,children:[jsxRuntimeExports.jsx(DrawerTitle$1,{...settingStyles.settingUI.drawerTitle,children:"Settings"}),jsxRuntimeExports.jsx("div",{...settingStyles.settingUI.closeButton,children:jsxRuntimeExports.jsx(DrawerCloseTrigger$1,{asChild:!0,onClick:ct,children:jsxRuntimeExports.jsx(CloseButton,{size:"sm",color:"white"})})})]}),jsxRuntimeExports.jsx(DrawerBody$1,{children:jsxRuntimeExports.jsxs(TabsRoot,{defaultValue:"general",value:at,onValueChange:ft=>ot(ft.value),...settingStyles.settingUI.tabs.root,children:[jsxRuntimeExports.jsxs(TabsList,{...settingStyles.settingUI.tabs.list,children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"general",...settingStyles.settingUI.tabs.trigger,children:"General"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"live2d",...settingStyles.settingUI.tabs.trigger,children:"Live2D"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"asr",...settingStyles.settingUI.tabs.trigger,children:"ASR"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"tts",...settingStyles.settingUI.tabs.trigger,children:"TTS"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"agent",...settingStyles.settingUI.tabs.trigger,children:"Agent"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"about",...settingStyles.settingUI.tabs.trigger,children:"About"})]}),ut]})}),jsxRuntimeExports.jsxs(DrawerFooter$1,{children:[jsxRuntimeExports.jsx(Button$1,{colorPalette:"red",onClick:ct,children:"Cancel"}),jsxRuntimeExports.jsx(Button$1,{colorPalette:"blue",onClick:ht,children:"Save"})]})]})]})}const Avatar$1=reactExports.forwardRef((_e,_)=>{const{name:et,src:tt,srcSet:nt,loading:it,icon:at,fallback:ot,children:st,...dt}=_e;return jsxRuntimeExports.jsxs(AvatarRoot,{ref:_,...dt,children:[jsxRuntimeExports.jsx(AvatarFallback,{name:et,icon:at,children:ot}),jsxRuntimeExports.jsx(AvatarImage,{src:tt,srcSet:nt,loading:it}),st]})}),AvatarFallback=reactExports.forwardRef((_e,_)=>{const{name:et,icon:tt,children:nt,...it}=_e;return jsxRuntimeExports.jsxs(AvatarFallback$1,{ref:_,...it,children:[nt,et!=null&&nt==null&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:getInitials(et)}),et==null&&nt==null&&jsxRuntimeExports.jsx(AvatarIcon,{asChild:!!tt,children:tt})]})});function getInitials(_e){const _=_e.trim().split(" "),et=_[0]!=null?_[0]:"",tt=_.length>1?_[_.length-1]:"";return et&&tt?`${et.charAt(0)}${tt.charAt(0)}`:et.charAt(0)}const AvatarGroup$1=reactExports.forwardRef((_e,_)=>{const{size:et,variant:tt,borderless:nt,...it}=_e;return jsxRuntimeExports.jsx(AvatarPropsProvider,{value:{size:et,variant:tt,borderless:nt},children:jsxRuntimeExports.jsx(Group$4,{gap:"0",spaceX:"-3",ref:_,...it})})});function ChatBubble({message:_e,isSelected:_,onClick:et}){const tt=_e.role==="ai";return jsxRuntimeExports.jsx(Box,{onClick:et,cursor:"pointer",bg:_?"gray.100":"transparent",_hover:{bg:"gray.50"},p:2,borderRadius:"md",transition:"background-color 0.2s",children:jsxRuntimeExports.jsxs(Flex,{gap:3,children:[jsxRuntimeExports.jsx(AvatarGroup$1,{children:jsxRuntimeExports.jsx(Avatar$1,{size:"sm",name:_e.name||(tt?"AI":"Me"),bg:tt?"blue.500":"green.500",color:"white"})}),jsxRuntimeExports.jsxs(Box,{flex:1,children:[jsxRuntimeExports.jsx(Text$1,{fontSize:"sm",fontWeight:"bold",color:"gray.700",children:_e.name||(tt?"AI":"Me")}),jsxRuntimeExports.jsx(Text$1,{fontSize:"sm",color:"gray.600",truncate:!0,children:_e.content}),jsxRuntimeExports.jsx(Text$1,{fontSize:"xs",color:"gray.400",mt:1,children:new Date(_e.timestamp).toLocaleTimeString()})]})]})})}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function _e(tt,nt,it,at,ot,st){if(st!==ReactPropTypesSecret){var dt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw dt.name="Invariant Violation",dt}}_e.isRequired=_e;function _(){return _e}var et={array:_e,bigint:_e,bool:_e,func:_e,number:_e,object:_e,string:_e,symbol:_e,any:_e,arrayOf:_,element:_e,elementType:_e,instanceOf:_,node:_e,objectOf:_,oneOf:_,oneOfType:_,shape:_,exact:_,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return et.PropTypes=et,et};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var prefix="cs",classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(_e){(function(){var _={}.hasOwnProperty;function et(){for(var it="",at=0;at<arguments.length;at++){var ot=arguments[at];ot&&(it=nt(it,tt(ot)))}return it}function tt(it){if(typeof it=="string"||typeof it=="number")return it;if(typeof it!="object")return"";if(Array.isArray(it))return et.apply(null,it);if(it.toString!==Object.prototype.toString&&!it.toString.toString().includes("[native code]"))return it.toString();var at="";for(var ot in it)_.call(it,ot)&&it[ot]&&(at=nt(at,ot));return at}function nt(it,at){return at?it?it+" "+at:it+at:it}_e.exports?(et.default=et,_e.exports=et):window.classNames=et})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);var StatusEnum=["available","unavailable","away","dnd","invisible","eager"],SizeEnum=["xs","sm","md","lg","fluid"];function _typeof$h(_e){"@babel/helpers - typeof";return _typeof$h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$h(_e)}var _excluded$w=["status","size","className","name","selected","children"];function _extends$v(){return _extends$v=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$v.apply(this,arguments)}function _defineProperty$f(_e,_,et){return _=_toPropertyKey$e(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$e(_e){var _=_toPrimitive$e(_e,"string");return _typeof$h(_)=="symbol"?_:String(_)}function _toPrimitive$e(_e,_){if(_typeof$h(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$h(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _objectWithoutProperties$w(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$w(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$w(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var Status=function _e(_){var et=_.status,tt=_.size,nt=tt===void 0?"md":tt,it=_.className,at=_.name,ot=_.selected,st=_.children,dt=_objectWithoutProperties$w(_,_excluded$w),ht="".concat(prefix,"-status"),ct=React.createElement("div",{className:"".concat(ht,"__bullet")}),ut=at||st;return React.createElement("div",_extends$v({},dt,{"aria-selected":ot===!0?"":null,className:classNames(ht,"".concat(ht,"--").concat(nt),"".concat(ht,"--").concat(et),_defineProperty$f({},"".concat(ht,"--selected"),ot),_defineProperty$f({},"".concat(ht,"--named"),ut),it)}),ct,ut&&React.createElement("div",{className:"".concat(ht,"__name")},at||st))};function _typeof$g(_e){"@babel/helpers - typeof";return _typeof$g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$g(_e)}var _excluded$v=["name","src","size","status","className","active","children"];function _extends$u(){return _extends$u=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$u.apply(this,arguments)}function _defineProperty$e(_e,_,et){return _=_toPropertyKey$d(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$d(_e){var _=_toPrimitive$d(_e,"string");return _typeof$g(_)=="symbol"?_:String(_)}function _toPrimitive$d(_e,_){if(_typeof$g(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$g(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _objectWithoutProperties$v(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$v(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$v(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}function AvatarInner(_e,_){var et=_e.name,tt=et===void 0?"":et,nt=_e.src,it=nt===void 0?"":nt,at=_e.size,ot=at===void 0?"md":at,st=_e.status,dt=_e.className,ht=_e.active,ct=ht===void 0?!1:ht,ut=_e.children,ft=_objectWithoutProperties$v(_e,_excluded$v),gt="".concat(prefix,"-avatar"),mt=typeof ot<"u"?" ".concat(gt,"--").concat(ot):"",vt=reactExports.useRef();return reactExports.useImperativeHandle(_,function(){return{focus:function(){return vt.current.focus()}}}),React.createElement("div",_extends$u({ref:vt},ft,{className:classNames("".concat(gt).concat(mt),_defineProperty$e({},"".concat(gt,"--active"),ct),dt)}),ut||React.createElement(React.Fragment,null,React.createElement("img",{src:it,alt:tt}),typeof st=="string"&&React.createElement(Status,{status:st,size:ot})," "))}var Avatar=reactExports.forwardRef(AvatarInner);Avatar.displayName="Avatar";Avatar.propTypes={children:PropTypes.node,name:PropTypes.string,src:PropTypes.string,size:PropTypes.oneOf(SizeEnum),status:PropTypes.oneOf(StatusEnum),active:PropTypes.bool,className:PropTypes.string};function ownKeys$1(_e,_){var et=Object.keys(_e);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_e);_&&(tt=tt.filter(function(nt){return Object.getOwnPropertyDescriptor(_e,nt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread$1(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$1(Object(et),!0).forEach(function(tt){_defineProperty$d(_e,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(et)):ownKeys$1(Object(et)).forEach(function(tt){Object.defineProperty(_e,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _e}function _defineProperty$d(_e,_,et){return _=_toPropertyKey$c(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$c(_e){var _=_toPrimitive$c(_e,"string");return _typeof$f(_)=="symbol"?_:String(_)}function _toPrimitive$c(_e,_){if(_typeof$f(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$f(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _typeof$f(_e){"@babel/helpers - typeof";return _typeof$f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$f(_e)}var noop$2=function _e(){},isChildrenNil=function _e(_){return _==null||Array.isArray(_)&&_.length===0},getChildren=function _e(_,et){var tt=[],nt=et.map(function(it){return it.displayName||it.name});return React.Children.toArray(_).forEach(function(it){var at=et.indexOf(it.type);if(at!==-1)tt[at]=it;else{var ot,st,dt,ht=(ot=it==null||(st=it.props)===null||st===void 0?void 0:st.as)!==null&&ot!==void 0?ot:it==null||(dt=it.props)===null||dt===void 0?void 0:dt.is,ct=_typeof$f(ht);if(ct==="function"){var ut=et.indexOf(ht);ut!==-1&&(tt[ut]=React.cloneElement(it,_objectSpread$1(_objectSpread$1({},it.props),{},{as:null})))}else if(ct==="object"){var ft=ht.name||ht.displayName,gt=nt.indexOf(ft);gt!==-1&&(tt[gt]=React.cloneElement(it,_objectSpread$1(_objectSpread$1({},it.props),{},{as:null})))}else if(ct==="string"){var mt=nt.indexOf(ht);mt!==-1&&(tt[mt]=it)}}}),tt},getComponentName=function _e(_){if(typeof _=="string")return _;if("type"in _){var et=_typeof$f(_.type);if(et==="function"||et==="object"){if("displayName"in _.type)return _.type.displayName;if("name"in _.type)return _.type.name}else if(et==="string")return _.type;return"undefined"}return"undefined"},allowedChildren=function _e(_){return function(et,tt,nt){var it=_.map(function(ht){return ht.name||ht.displayName}),at=React.Children.toArray(et[tt]).find(function(ht){if(typeof ht=="string"&&ht.trim().length===0)return!1;if(_.indexOf(ht.type)===-1){var ct,ut,ft=(ht==null||(ct=ht.props)===null||ct===void 0?void 0:ct.as)||(ht==null||(ut=ht.props)===null||ut===void 0?void 0:ut.is),gt=_typeof$f(ft);if(gt==="function")return _.indexOf(ft)===-1;if(gt==="object"){var mt=ft.name||ft.displayName;return it.indexOf(mt)===-1}else return gt==="string"?it.indexOf(ft)===-1:!0}});if(typeof at<"u"){var ot=getComponentName(at),st=_.map(function(ht){return ht.name||ht.displayName}).join(", "),dt='"'.concat(ot,'" is not a valid child for ').concat(nt,". Allowed types: ").concat(st);return new Error(dt)}}},_excluded$u=["children","size","className","max","activeIndex","hoverToFront"];function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$t.apply(this,arguments)}function _objectWithoutProperties$u(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$u(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$u(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var AvatarGroup=function _e(_){var et=_.children,tt=_.size,nt=tt===void 0?"md":tt,it=_.className,at=_.max,ot=_.activeIndex,st=_.hoverToFront,dt=_objectWithoutProperties$u(_,_excluded$u),ht="".concat(prefix,"-avatar-group"),ct=typeof at=="number"&&React.Children.count(et)>at?React.Children.toArray(et).reverse().slice(0,at):React.Children.toArray(et).reverse(),ut=typeof ot=="number"?ct.length-ot-1:void 0;return React.createElement("div",_extends$t({},dt,{className:classNames(ht,"".concat(ht,"--").concat(nt),it)}),ct.map(function(ft,gt){var mt=typeof ut=="number"?{active:ut===gt}:{};return st===!0&&(mt.className=classNames("".concat(prefix,"-avatar--active-on-hover"),ft.props.className)),React.cloneElement(ft,mt)}))};AvatarGroup.displayName="AvatarGroup";var _excluded$t=["children","className","icon","border","labelPosition"];function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$s.apply(this,arguments)}function _objectWithoutProperties$t(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$t(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$t(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var Button=function _e(_){var et=_.children,tt=et===void 0?void 0:et,nt=_.className,it=nt===void 0?"":nt,at=_.icon,ot=at===void 0?void 0:at,st=_.border,dt=st===void 0?!1:st,ht=_.labelPosition,ct=ht===void 0?void 0:ht,ut=_objectWithoutProperties$t(_,_excluded$t),ft="".concat(prefix,"-button"),gt=typeof ct<"u"?ct:"right",mt=React.Children.count(tt)>0?"".concat(ft,"--").concat(gt):"",vt=dt===!0?"".concat(ft,"--border"):"";return React.createElement("button",_extends$s({},ut,{className:classNames(ft,mt,vt,it)}),gt==="left"&&tt,ot,gt==="right"&&tt)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function _typeof$e(_e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$e=function(_){return typeof _}:_typeof$e=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$e(_e)}function _classCallCheck$4(_e,_){if(!(_e instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(_e,_){for(var et=0;et<_.length;et++){var tt=_[et];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty(_e,tt.key,tt)}}function _createClass$4(_e,_,et){return _defineProperties$4(_e.prototype,_),_e}function _defineProperty$c(_e,_,et){return _ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _objectSpread(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_]!=null?arguments[_]:{},tt=Object.keys(et);typeof Object.getOwnPropertySymbols=="function"&&(tt=tt.concat(Object.getOwnPropertySymbols(et).filter(function(nt){return Object.getOwnPropertyDescriptor(et,nt).enumerable}))),tt.forEach(function(nt){_defineProperty$c(_e,nt,et[nt])})}return _e}function _slicedToArray$7(_e,_){return _arrayWithHoles$7(_e)||_iterableToArrayLimit$7(_e,_)}function _arrayWithHoles$7(_e){if(Array.isArray(_e))return _e}function _iterableToArrayLimit$7(_e,_){var et=[],tt=!0,nt=!1,it=void 0;try{for(var at=_e[Symbol.iterator](),ot;!(tt=(ot=at.next()).done)&&(et.push(ot.value),!(_&&et.length===_));tt=!0);}catch(st){nt=!0,it=st}finally{try{!tt&&at.return!=null&&at.return()}finally{if(nt)throw it}}return et}var noop$1=function _e(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop$1,measure:noop$1};try{typeof window<"u"&&(_WINDOW=window),typeof document<"u"&&(_DOCUMENT=document),typeof MutationObserver<"u"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance<"u"&&(_PERFORMANCE=performance)}catch(_e){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function";~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/");var NAMESPACE_IDENTIFIER="___FONT_AWESOME___",DEFAULT_FAMILY_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg";(function(){try{return!0}catch{return!1}})();var DUOTONE_CLASSES={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(_e){var _=DOCUMENT.querySelector("script["+_e+"]");if(_)return _.getAttribute(_e)}function coerce(_e){return _e===""?!0:_e==="false"?!1:_e==="true"?!0:_e}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(_e){var _=_slicedToArray$7(_e,2),et=_[0],tt=_[1],nt=coerce(getAttrConfig(et));nt!=null&&(initial[tt]=nt)})}var _default={familyPrefix:DEFAULT_FAMILY_PREFIX,replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},_config=_objectSpread({},_default,initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config=_objectSpread({},_config);WINDOW.FontAwesomeConfig=config;var w=WINDOW||{};w[NAMESPACE_IDENTIFIER]||(w[NAMESPACE_IDENTIFIER]={});w[NAMESPACE_IDENTIFIER].styles||(w[NAMESPACE_IDENTIFIER].styles={});w[NAMESPACE_IDENTIFIER].hooks||(w[NAMESPACE_IDENTIFIER].hooks={});w[NAMESPACE_IDENTIFIER].shims||(w[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w[NAMESPACE_IDENTIFIER],functions=[],listener=function _e(){DOCUMENT.removeEventListener("DOMContentLoaded",_e),loaded=1,functions.map(function(_){return _()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));var PENDING="pending",SETTLED="settled",FULFILLED="fulfilled",REJECTED="rejected",NOOP=function _e(){},isNode=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",asyncSetTimer=typeof setImmediate>"u"?setTimeout:setImmediate,asyncQueue=[],asyncTimer;function asyncFlush(){for(var _e=0;_e<asyncQueue.length;_e++)asyncQueue[_e][0](asyncQueue[_e][1]);asyncQueue=[],asyncTimer=!1}function asyncCall(_e,_){asyncQueue.push([_e,_]),asyncTimer||(asyncTimer=!0,asyncSetTimer(asyncFlush,0))}function invokeResolver(_e,_){function et(nt){resolve(_,nt)}function tt(nt){reject(_,nt)}try{_e(et,tt)}catch(nt){tt(nt)}}function invokeCallback(_e){var _=_e.owner,et=_._state,tt=_._data,nt=_e[et],it=_e.then;if(typeof nt=="function"){et=FULFILLED;try{tt=nt(tt)}catch(at){reject(it,at)}}handleThenable(it,tt)||(et===FULFILLED&&resolve(it,tt),et===REJECTED&&reject(it,tt))}function handleThenable(_e,_){var et;try{if(_e===_)throw new TypeError("A promises callback cannot return that same promise.");if(_&&(typeof _=="function"||_typeof$e(_)==="object")){var tt=_.then;if(typeof tt=="function")return tt.call(_,function(nt){et||(et=!0,_===nt?fulfill(_e,nt):resolve(_e,nt))},function(nt){et||(et=!0,reject(_e,nt))}),!0}}catch(nt){return et||reject(_e,nt),!0}return!1}function resolve(_e,_){(_e===_||!handleThenable(_e,_))&&fulfill(_e,_)}function fulfill(_e,_){_e._state===PENDING&&(_e._state=SETTLED,_e._data=_,asyncCall(publishFulfillment,_e))}function reject(_e,_){_e._state===PENDING&&(_e._state=SETTLED,_e._data=_,asyncCall(publishRejection,_e))}function publish(_e){_e._then=_e._then.forEach(invokeCallback)}function publishFulfillment(_e){_e._state=FULFILLED,publish(_e)}function publishRejection(_e){_e._state=REJECTED,publish(_e),!_e._handled&&isNode&&global.process.emit("unhandledRejection",_e._data,_e)}function notifyRejectionHandled(_e){global.process.emit("rejectionHandled",_e)}function P(_e){if(typeof _e!="function")throw new TypeError("Promise resolver "+_e+" is not a function");if(!(this instanceof P))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],invokeResolver(_e,this)}P.prototype={constructor:P,_state:PENDING,_then:null,_data:void 0,_handled:!1,then:function _e(_,et){var tt={owner:this,then:new this.constructor(NOOP),fulfilled:_,rejected:et};return(et||_)&&!this._handled&&(this._handled=!0,this._state===REJECTED&&isNode&&asyncCall(notifyRejectionHandled,this)),this._state===FULFILLED||this._state===REJECTED?asyncCall(invokeCallback,tt):this._then.push(tt),tt.then},catch:function _e(_){return this.then(null,_)}};P.all=function(_e){if(!Array.isArray(_e))throw new TypeError("You must pass an array to Promise.all().");return new P(function(_,et){var tt=[],nt=0;function it(st){return nt++,function(dt){tt[st]=dt,--nt||_(tt)}}for(var at=0,ot;at<_e.length;at++)ot=_e[at],ot&&typeof ot.then=="function"?ot.then(it(at),et):tt[at]=ot;nt||_(tt)})};P.race=function(_e){if(!Array.isArray(_e))throw new TypeError("You must pass an array to Promise.race().");return new P(function(_,et){for(var tt=0,nt;tt<_e.length;tt++)nt=_e[tt],nt&&typeof nt.then=="function"?nt.then(_,et):_(nt)})};P.resolve=function(_e){return _e&&_typeof$e(_e)==="object"&&_e.constructor===P?_e:new P(function(_){_(_e)})};P.reject=function(_e){return new P(function(_,et){et(_e)})};var meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(_e){if(!(!_e||!IS_DOM)){var _=DOCUMENT.createElement("style");_.setAttribute("type","text/css"),_.innerHTML=_e;for(var et=DOCUMENT.head.childNodes,tt=null,nt=et.length-1;nt>-1;nt--){var it=et[nt],at=(it.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(at)>-1&&(tt=it)}return DOCUMENT.head.insertBefore(_,tt),_e}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var _e=12,_="";_e-- >0;)_+=idPool[Math.random()*62|0];return _}function htmlEscape(_e){return"".concat(_e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(_e){return Object.keys(_e||{}).reduce(function(_,et){return _+"".concat(et,'="').concat(htmlEscape(_e[et]),'" ')},"").trim()}function joinStyles(_e){return Object.keys(_e||{}).reduce(function(_,et){return _+"".concat(et,": ").concat(_e[et],";")},"")}function transformIsMeaningful(_e){return _e.size!==meaninglessTransform.size||_e.x!==meaninglessTransform.x||_e.y!==meaninglessTransform.y||_e.rotate!==meaninglessTransform.rotate||_e.flipX||_e.flipY}function transformForSvg(_e){var _=_e.transform,et=_e.containerWidth,tt=_e.iconWidth,nt={transform:"translate(".concat(et/2," 256)")},it="translate(".concat(_.x*32,", ").concat(_.y*32,") "),at="scale(".concat(_.size/16*(_.flipX?-1:1),", ").concat(_.size/16*(_.flipY?-1:1),") "),ot="rotate(".concat(_.rotate," 0 0)"),st={transform:"".concat(it," ").concat(at," ").concat(ot)},dt={transform:"translate(".concat(tt/2*-1," -256)")};return{outer:nt,inner:st,path:dt}}var ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(_e){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return _e.attributes&&(_e.attributes.fill||_)&&(_e.attributes.fill="black"),_e}function deGroup(_e){return _e.tag==="g"?_e.children:[_e]}function makeIconMasking(_e){var _=_e.children,et=_e.attributes,tt=_e.main,nt=_e.mask,it=_e.maskId,at=_e.transform,ot=tt.width,st=tt.icon,dt=nt.width,ht=nt.icon,ct=transformForSvg({transform:at,containerWidth:dt,iconWidth:ot}),ut={tag:"rect",attributes:_objectSpread({},ALL_SPACE,{fill:"white"})},ft=st.children?{children:st.children.map(fillBlack)}:{},gt={tag:"g",attributes:_objectSpread({},ct.inner),children:[fillBlack(_objectSpread({tag:st.tag,attributes:_objectSpread({},st.attributes,ct.path)},ft))]},mt={tag:"g",attributes:_objectSpread({},ct.outer),children:[gt]},vt="mask-".concat(it||nextUniqueId()),yt="clip-".concat(it||nextUniqueId()),bt={tag:"mask",attributes:_objectSpread({},ALL_SPACE,{id:vt,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[ut,mt]},_t={tag:"defs",children:[{tag:"clipPath",attributes:{id:yt},children:deGroup(ht)},bt]};return _.push(_t,{tag:"rect",attributes:_objectSpread({fill:"currentColor","clip-path":"url(#".concat(yt,")"),mask:"url(#".concat(vt,")")},ALL_SPACE)}),{children:_,attributes:et}}function makeIconStandard(_e){var _=_e.children,et=_e.attributes,tt=_e.main,nt=_e.transform,it=_e.styles,at=joinStyles(it);if(at.length>0&&(et.style=at),transformIsMeaningful(nt)){var ot=transformForSvg({transform:nt,containerWidth:tt.width,iconWidth:tt.width});_.push({tag:"g",attributes:_objectSpread({},ot.outer),children:[{tag:"g",attributes:_objectSpread({},ot.inner),children:[{tag:tt.icon.tag,children:tt.icon.children,attributes:_objectSpread({},tt.icon.attributes,ot.path)}]}]})}else _.push(tt.icon);return{children:_,attributes:et}}function asIcon(_e){var _=_e.children,et=_e.main,tt=_e.mask,nt=_e.attributes,it=_e.styles,at=_e.transform;if(transformIsMeaningful(at)&&et.found&&!tt.found){var ot=et.width,st=et.height,dt={x:ot/st/2,y:.5};nt.style=joinStyles(_objectSpread({},it,{"transform-origin":"".concat(dt.x+at.x/16,"em ").concat(dt.y+at.y/16,"em")}))}return[{tag:"svg",attributes:nt,children:_}]}function asSymbol(_e){var _=_e.prefix,et=_e.iconName,tt=_e.children,nt=_e.attributes,it=_e.symbol,at=it===!0?"".concat(_,"-").concat(config.familyPrefix,"-").concat(et):it;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread({},nt,{id:at}),children:tt}]}]}function makeInlineSvgAbstract(_e){var _=_e.icons,et=_.main,tt=_.mask,nt=_e.prefix,it=_e.iconName,at=_e.transform,ot=_e.symbol,st=_e.title,dt=_e.maskId,ht=_e.titleId,ct=_e.extra,ut=_e.watchable,ft=ut===void 0?!1:ut,gt=tt.found?tt:et,mt=gt.width,vt=gt.height,yt=nt==="fak",bt=yt?"":"fa-w-".concat(Math.ceil(mt/vt*16)),_t=[config.replacementClass,it?"".concat(config.familyPrefix,"-").concat(it):"",bt].filter(function(At){return ct.classes.indexOf(At)===-1}).filter(function(At){return At!==""||!!At}).concat(ct.classes).join(" "),xt={children:[],attributes:_objectSpread({},ct.attributes,{"data-prefix":nt,"data-icon":it,class:_t,role:ct.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(mt," ").concat(vt)})},St=yt&&!~ct.classes.indexOf("fa-fw")?{width:"".concat(mt/vt*16*.0625,"em")}:{};ft&&(xt.attributes[DATA_FA_I2SVG]=""),st&&xt.children.push({tag:"title",attributes:{id:xt.attributes["aria-labelledby"]||"title-".concat(ht||nextUniqueId())},children:[st]});var Tt=_objectSpread({},xt,{prefix:nt,iconName:it,main:et,mask:tt,maskId:dt,transform:at,symbol:ot,styles:_objectSpread({},St,ct.styles)}),wt=tt.found&&et.found?makeIconMasking(Tt):makeIconStandard(Tt),Ct=wt.children,Et=wt.attributes;return Tt.children=Ct,Tt.attributes=Et,ot?asSymbol(Tt):asIcon(Tt)}var noop$1$1=function _e(){};config.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure;var reduce$1=function _e(_,et,tt,nt){var it=Object.keys(_),at=it.length,ot=et,st,dt,ht;for(tt===void 0?(st=1,ht=_[it[0]]):(st=0,ht=tt);st<at;st++)dt=it[st],ht=ot(ht,_[dt],dt,_);return ht};function defineIcons(_e,_){var et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},tt=et.skipHooks,nt=tt===void 0?!1:tt,it=Object.keys(_).reduce(function(at,ot){var st=_[ot],dt=!!st.icon;return dt?at[st.iconName]=st.icon:at[ot]=st,at},{});typeof namespace.hooks.addPack=="function"&&!nt?namespace.hooks.addPack(_e,it):namespace.styles[_e]=_objectSpread({},namespace.styles[_e]||{},it),_e==="fas"&&defineIcons("fa",_)}var styles=namespace.styles,shims=namespace.shims,build=function _e(){var _=function(nt){return reduce$1(styles,function(it,at,ot){return it[ot]=reduce$1(at,nt,{}),it},{})};_(function(tt,nt,it){return nt[3]&&(tt[nt[3]]=it),tt}),_(function(tt,nt,it){var at=nt[2];return tt[it]=it,at.forEach(function(ot){tt[ot]=it}),tt});var et="far"in styles;reduce$1(shims,function(tt,nt){var it=nt[0],at=nt[1],ot=nt[2];return at==="far"&&!et&&(at="fas"),tt[it]={prefix:at,iconName:ot},tt},{})};build();namespace.styles;function iconFromMapping(_e,_,et){if(_e&&_e[_]&&_e[_][et])return{prefix:_,iconName:et,icon:_e[_][et]}}function toHtml(_e){var _=_e.tag,et=_e.attributes,tt=et===void 0?{}:et,nt=_e.children,it=nt===void 0?[]:nt;return typeof _e=="string"?htmlEscape(_e):"<".concat(_," ").concat(joinAttributes(tt),">").concat(it.map(toHtml).join(""),"</").concat(_,">")}var parseTransformString=function _e(_){var et={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return _?_.toLowerCase().split(" ").reduce(function(tt,nt){var it=nt.toLowerCase().split("-"),at=it[0],ot=it.slice(1).join("-");if(at&&ot==="h")return tt.flipX=!0,tt;if(at&&ot==="v")return tt.flipY=!0,tt;if(ot=parseFloat(ot),isNaN(ot))return tt;switch(at){case"grow":tt.size=tt.size+ot;break;case"shrink":tt.size=tt.size-ot;break;case"left":tt.x=tt.x-ot;break;case"right":tt.x=tt.x+ot;break;case"up":tt.y=tt.y-ot;break;case"down":tt.y=tt.y+ot;break;case"rotate":tt.rotate=tt.rotate+ot;break}return tt},et):et};function MissingIcon(_e){this.name="MissingIcon",this.message=_e||"Icon unavailable",this.stack=new Error().stack}MissingIcon.prototype=Object.create(Error.prototype);MissingIcon.prototype.constructor=MissingIcon;var FILL={fill:"currentColor"},ANIMATION_BASE={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};_objectSpread({},FILL,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var OPACITY_ANIMATE=_objectSpread({},ANIMATION_BASE,{attributeName:"opacity"});_objectSpread({},FILL,{cx:"256",cy:"364",r:"28"}),_objectSpread({},ANIMATION_BASE,{attributeName:"r",values:"28;14;28;28;14;28;"}),_objectSpread({},OPACITY_ANIMATE,{values:"1;0;1;1;0;1;"});_objectSpread({},FILL,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),_objectSpread({},OPACITY_ANIMATE,{values:"1;0;0;0;0;1;"});_objectSpread({},FILL,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),_objectSpread({},OPACITY_ANIMATE,{values:"0;0;1;1;0;0;"});namespace.styles;function asFoundIcon(_e){var _=_e[0],et=_e[1],tt=_e.slice(4),nt=_slicedToArray$7(tt,1),it=nt[0],at=null;return Array.isArray(it)?at={tag:"g",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:it[0]}},{tag:"path",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:it[1]}}]}:at={tag:"path",attributes:{fill:"currentColor",d:it}},{found:!0,width:_,height:et,icon:at}}namespace.styles;var baseStyles=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function css$1(){var _e=DEFAULT_FAMILY_PREFIX,_=DEFAULT_REPLACEMENT_CLASS,et=config.familyPrefix,tt=config.replacementClass,nt=baseStyles;if(et!==_e||tt!==_){var it=new RegExp("\\.".concat(_e,"\\-"),"g"),at=new RegExp("\\--".concat(_e,"\\-"),"g"),ot=new RegExp("\\.".concat(_),"g");nt=nt.replace(it,".".concat(et,"-")).replace(at,"--".concat(et,"-")).replace(ot,".".concat(tt))}return nt}var Library=function(){function _e(){_classCallCheck$4(this,_e),this.definitions={}}return _createClass$4(_e,[{key:"add",value:function(){for(var et=this,tt=arguments.length,nt=new Array(tt),it=0;it<tt;it++)nt[it]=arguments[it];var at=nt.reduce(this._pullDefinitions,{});Object.keys(at).forEach(function(ot){et.definitions[ot]=_objectSpread({},et.definitions[ot]||{},at[ot]),defineIcons(ot,at[ot]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(et,tt){var nt=tt.prefix&&tt.iconName&&tt.icon?{0:tt}:tt;return Object.keys(nt).map(function(it){var at=nt[it],ot=at.prefix,st=at.iconName,dt=at.icon;et[ot]||(et[ot]={}),et[ot][st]=dt}),et}}]),_e}();function ensureCss(){config.autoAddCss&&!_cssInserted&&(insertCss(css$1()),_cssInserted=!0)}function apiObject(_e,_){return Object.defineProperty(_e,"abstract",{get:_}),Object.defineProperty(_e,"html",{get:function(){return _e.abstract.map(function(tt){return toHtml(tt)})}}),Object.defineProperty(_e,"node",{get:function(){if(IS_DOM){var tt=DOCUMENT.createElement("div");return tt.innerHTML=_e.html,tt.children}}}),_e}function findIconDefinition(_e){var _=_e.prefix,et=_===void 0?"fa":_,tt=_e.iconName;if(tt)return iconFromMapping(library.definitions,et,tt)||iconFromMapping(namespace.styles,et,tt)}function resolveIcons(_e){return function(_){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},tt=(_||{}).icon?_:findIconDefinition(_||{}),nt=et.mask;return nt&&(nt=(nt||{}).icon?nt:findIconDefinition(nt||{})),_e(tt,_objectSpread({},et,{mask:nt}))}}var library=new Library,_cssInserted=!1,parse$1={transform:function _e(_){return parseTransformString(_)}},icon=resolveIcons(function(_e){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et=_.transform,tt=et===void 0?meaninglessTransform:et,nt=_.symbol,it=nt===void 0?!1:nt,at=_.mask,ot=at===void 0?null:at,st=_.maskId,dt=st===void 0?null:st,ht=_.title,ct=ht===void 0?null:ht,ut=_.titleId,ft=ut===void 0?null:ut,gt=_.classes,mt=gt===void 0?[]:gt,vt=_.attributes,yt=vt===void 0?{}:vt,bt=_.styles,_t=bt===void 0?{}:bt;if(_e){var xt=_e.prefix,St=_e.iconName,Tt=_e.icon;return apiObject(_objectSpread({type:"icon"},_e),function(){return ensureCss(),config.autoA11y&&(ct?yt["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(ft||nextUniqueId()):(yt["aria-hidden"]="true",yt.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(Tt),mask:ot?asFoundIcon(ot.icon):{found:!1,width:null,height:null,icon:{}}},prefix:xt,iconName:St,transform:_objectSpread({},meaninglessTransform,tt),symbol:it,title:ct,maskId:dt,titleId:ft,extra:{attributes:yt,styles:_t,classes:mt}})})}});function ownKeys(_e,_){var et=Object.keys(_e);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_e);_&&(tt=tt.filter(function(nt){return Object.getOwnPropertyDescriptor(_e,nt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread2(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_]!=null?arguments[_]:{};_%2?ownKeys(Object(et),!0).forEach(function(tt){_defineProperty$b(_e,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(et)):ownKeys(Object(et)).forEach(function(tt){Object.defineProperty(_e,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _e}function _typeof$d(_e){"@babel/helpers - typeof";return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$d(_e)}function _defineProperty$b(_e,_,et){return _ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _objectWithoutPropertiesLoose$s(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}function _objectWithoutProperties$s(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$s(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _toConsumableArray(_e){return _arrayWithoutHoles(_e)||_iterableToArray(_e)||_unsupportedIterableToArray$7(_e)||_nonIterableSpread()}function _arrayWithoutHoles(_e){if(Array.isArray(_e))return _arrayLikeToArray$7(_e)}function _iterableToArray(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _unsupportedIterableToArray$7(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray$7(_e,_);var et=Object.prototype.toString.call(_e).slice(8,-1);if(et==="Object"&&_e.constructor&&(et=_e.constructor.name),et==="Map"||et==="Set")return Array.from(_e);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray$7(_e,_)}}function _arrayLikeToArray$7(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var et=0,tt=new Array(_);et<_;et++)tt[et]=_e[et];return tt}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function classList(_e){var _,et=_e.beat,tt=_e.fade,nt=_e.beatFade,it=_e.bounce,at=_e.shake,ot=_e.flash,st=_e.spin,dt=_e.spinPulse,ht=_e.spinReverse,ct=_e.pulse,ut=_e.fixedWidth,ft=_e.inverse,gt=_e.border,mt=_e.listItem,vt=_e.flip,yt=_e.size,bt=_e.rotation,_t=_e.pull,xt=(_={"fa-beat":et,"fa-fade":tt,"fa-beat-fade":nt,"fa-bounce":it,"fa-shake":at,"fa-flash":ot,"fa-spin":st,"fa-spin-reverse":ht,"fa-spin-pulse":dt,"fa-pulse":ct,"fa-fw":ut,"fa-inverse":ft,"fa-border":gt,"fa-li":mt,"fa-flip":vt===!0,"fa-flip-horizontal":vt==="horizontal"||vt==="both","fa-flip-vertical":vt==="vertical"||vt==="both"},_defineProperty$b(_,"fa-".concat(yt),typeof yt<"u"&&yt!==null),_defineProperty$b(_,"fa-rotate-".concat(bt),typeof bt<"u"&&bt!==null&&bt!==0),_defineProperty$b(_,"fa-pull-".concat(_t),typeof _t<"u"&&_t!==null),_defineProperty$b(_,"fa-swap-opacity",_e.swapOpacity),_);return Object.keys(xt).map(function(St){return xt[St]?St:null}).filter(function(St){return St})}function _isNumerical(_e){return _e=_e-0,_e===_e}function camelize(_e){return _isNumerical(_e)?_e:(_e=_e.replace(/[\-_\s]+(.)?/g,function(_,et){return et?et.toUpperCase():""}),_e.substr(0,1).toLowerCase()+_e.substr(1))}var _excluded$1$1=["style"];function capitalize(_e){return _e.charAt(0).toUpperCase()+_e.slice(1)}function styleToObject(_e){return _e.split(";").map(function(_){return _.trim()}).filter(function(_){return _}).reduce(function(_,et){var tt=et.indexOf(":"),nt=camelize(et.slice(0,tt)),it=et.slice(tt+1).trim();return nt.startsWith("webkit")?_[capitalize(nt)]=it:_[nt]=it,_},{})}function convert(_e,_){var et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof _=="string")return _;var tt=(_.children||[]).map(function(st){return convert(_e,st)}),nt=Object.keys(_.attributes||{}).reduce(function(st,dt){var ht=_.attributes[dt];switch(dt){case"class":st.attrs.className=ht,delete _.attributes.class;break;case"style":st.attrs.style=styleToObject(ht);break;default:dt.indexOf("aria-")===0||dt.indexOf("data-")===0?st.attrs[dt.toLowerCase()]=ht:st.attrs[camelize(dt)]=ht}return st},{attrs:{}}),it=et.style,at=it===void 0?{}:it,ot=_objectWithoutProperties$s(et,_excluded$1$1);return nt.attrs.style=_objectSpread2(_objectSpread2({},nt.attrs.style),at),_e.apply(void 0,[_.tag,_objectSpread2(_objectSpread2({},nt.attrs),ot)].concat(_toConsumableArray(tt)))}var PRODUCTION=!1;try{PRODUCTION=!0}catch(_e){}function log(){if(!PRODUCTION&&console&&typeof console.error=="function"){var _e;(_e=console).error.apply(_e,arguments)}}function normalizeIconArgs(_e){if(_e&&_typeof$d(_e)==="object"&&_e.prefix&&_e.iconName&&_e.icon)return _e;if(parse$1.icon)return parse$1.icon(_e);if(_e===null)return null;if(_e&&_typeof$d(_e)==="object"&&_e.prefix&&_e.iconName)return _e;if(Array.isArray(_e)&&_e.length===2)return{prefix:_e[0],iconName:_e[1]};if(typeof _e=="string")return{prefix:"fas",iconName:_e}}function objectWithKey(_e,_){return Array.isArray(_)&&_.length>0||!Array.isArray(_)&&_?_defineProperty$b({},_e,_):{}}var _excluded$s=["forwardedRef"];function FontAwesomeIcon(_e){var _=_e.forwardedRef,et=_objectWithoutProperties$s(_e,_excluded$s),tt=et.icon,nt=et.mask,it=et.symbol,at=et.className,ot=et.title,st=et.titleId,dt=et.maskId,ht=normalizeIconArgs(tt),ct=objectWithKey("classes",[].concat(_toConsumableArray(classList(et)),_toConsumableArray(at.split(" ")))),ut=objectWithKey("transform",typeof et.transform=="string"?parse$1.transform(et.transform):et.transform),ft=objectWithKey("mask",normalizeIconArgs(nt)),gt=icon(ht,_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},ct),ut),ft),{},{symbol:it,title:ot,titleId:st,maskId:dt}));if(!gt)return log("Could not find icon",ht),null;var mt=gt.abstract,vt={ref:_};return Object.keys(et).forEach(function(yt){FontAwesomeIcon.defaultProps.hasOwnProperty(yt)||(vt[yt]=et[yt])}),convertCurry(mt[0],vt)}FontAwesomeIcon.displayName="FontAwesomeIcon";FontAwesomeIcon.propTypes={beat:PropTypes.bool,border:PropTypes.bool,beatFade:PropTypes.bool,bounce:PropTypes.bool,className:PropTypes.string,fade:PropTypes.bool,flash:PropTypes.bool,mask:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),maskId:PropTypes.string,fixedWidth:PropTypes.bool,inverse:PropTypes.bool,flip:PropTypes.oneOf([!0,!1,"horizontal","vertical","both"]),icon:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),listItem:PropTypes.bool,pull:PropTypes.oneOf(["right","left"]),pulse:PropTypes.bool,rotation:PropTypes.oneOf([0,90,180,270]),shake:PropTypes.bool,size:PropTypes.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:PropTypes.bool,spinPulse:PropTypes.bool,spinReverse:PropTypes.bool,symbol:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),title:PropTypes.string,titleId:PropTypes.string,transform:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),swapOpacity:PropTypes.bool};FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var convertCurry=convert.bind(null,React.createElement),faArrowUp={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0});var _="fas",et="arrow-up",tt=448,nt=512,it=[],at="f062",ot="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z";_e.definition={prefix:_,iconName:et,icon:[tt,nt,it,at,ot]},_e.faArrowUp=_e.definition,_e.prefix=_,_e.iconName=et,_e.width=tt,_e.height=nt,_e.ligatures=it,_e.unicode=at,_e.svgPathData=ot})(faArrowUp);var faArrowRight={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0});var _="fas",et="arrow-right",tt=448,nt=512,it=[],at="f061",ot="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z";_e.definition={prefix:_,iconName:et,icon:[tt,nt,it,at,ot]},_e.faArrowRight=_e.definition,_e.prefix=_,_e.iconName=et,_e.width=tt,_e.height=nt,_e.ligatures=it,_e.unicode=at,_e.svgPathData=ot})(faArrowRight);var faArrowDown={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0});var _="fas",et="arrow-down",tt=448,nt=512,it=[],at="f063",ot="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z";_e.definition={prefix:_,iconName:et,icon:[tt,nt,it,at,ot]},_e.faArrowDown=_e.definition,_e.prefix=_,_e.iconName=et,_e.width=tt,_e.height=nt,_e.ligatures=it,_e.unicode=at,_e.svgPathData=ot})(faArrowDown);var faArrowLeft={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0});var _="fas",et="arrow-left",tt=448,nt=512,it=[],at="f060",ot="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z";_e.definition={prefix:_,iconName:et,icon:[tt,nt,it,at,ot]},_e.faArrowLeft=_e.definition,_e.prefix=_,_e.iconName=et,_e.width=tt,_e.height=nt,_e.ligatures=it,_e.unicode=at,_e.svgPathData=ot})(faArrowLeft);var _excluded$r=["className","direction","children"];function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$r.apply(this,arguments)}function _objectWithoutProperties$r(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$r(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$r(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var ArrowButton=function _e(_){var et=_.className,tt=et===void 0?"":et,nt=_.direction,it=nt===void 0?"right":nt,at=_.children,ot=_objectWithoutProperties$r(_,_excluded$r),st="".concat(prefix,"-button--arrow"),dt=function(){if(it==="up")return faArrowUp.faArrowUp;if(it==="right")return faArrowRight.faArrowRight;if(it==="down")return faArrowDown.faArrowDown;if(it==="left")return faArrowLeft.faArrowLeft}();return React.createElement(Button,_extends$r({},ot,{className:classNames(st,tt),icon:React.createElement(FontAwesomeIcon,{icon:dt})}),at)},faEllipsisV={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0});var _="fas",et="ellipsis-v",tt=192,nt=512,it=[],at="f142",ot="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z";_e.definition={prefix:_,iconName:et,icon:[tt,nt,it,at,ot]},_e.faEllipsisV=_e.definition,_e.prefix=_,_e.iconName=et,_e.width=tt,_e.height=nt,_e.ligatures=it,_e.unicode=at,_e.svgPathData=ot})(faEllipsisV);var faPaperPlane={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0});var _="fas",et="paper-plane",tt=512,nt=512,it=[],at="f1d8",ot="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z";_e.definition={prefix:_,iconName:et,icon:[tt,nt,it,at,ot]},_e.faPaperPlane=_e.definition,_e.prefix=_,_e.iconName=et,_e.width=tt,_e.height=nt,_e.ligatures=it,_e.unicode=at,_e.svgPathData=ot})(faPaperPlane);var _excluded$q=["className","children"];function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$q.apply(this,arguments)}function _objectWithoutProperties$q(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$q(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$q(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var SendButton=function _e(_){var et=_.className,tt=et===void 0?"":et,nt=_.children,it=_objectWithoutProperties$q(_,_excluded$q),at="".concat(prefix,"-button--send");return React.createElement(Button,_extends$q({},it,{className:classNames(at,tt),icon:React.createElement(FontAwesomeIcon,{icon:faPaperPlane.faPaperPlane})}),nt)},faPaperclip={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0});var _="fas",et="paperclip",tt=448,nt=512,it=[],at="f0c6",ot="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z";_e.definition={prefix:_,iconName:et,icon:[tt,nt,it,at,ot]},_e.faPaperclip=_e.definition,_e.prefix=_,_e.iconName=et,_e.width=tt,_e.height=nt,_e.ligatures=it,_e.unicode=at,_e.svgPathData=ot})(faPaperclip);var _excluded$p=["className","children"];function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$p.apply(this,arguments)}function _objectWithoutProperties$p(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$p(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$p(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var AttachmentButton=function _e(_){var et=_.className,tt=et===void 0?"":et,nt=_.children,it=_objectWithoutProperties$p(_,_excluded$p),at="".concat(prefix,"-button--attachment");return React.createElement(Button,_extends$p({},it,{className:classNames(at,tt),icon:React.createElement(FontAwesomeIcon,{icon:faPaperclip.faPaperclip})}),nt)},_excluded$o=["onClick","children","className"];function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$o.apply(this,arguments)}function _objectWithoutProperties$o(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$o(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$o(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var ConversationHeaderBack=function _e(_){var et=_.onClick,tt=et===void 0?function(){}:et,nt=_.children,it=nt===void 0?void 0:nt,at=_.className,ot=_objectWithoutProperties$o(_,_excluded$o),st="".concat(prefix,"-conversation-header__back");return React.createElement("div",_extends$o({},ot,{className:classNames(st,at)}),typeof it<"u"?it:React.createElement(ArrowButton,{direction:"left",onClick:tt}))};ConversationHeaderBack.displayName="ConversationHeader.Back";var _excluded$n=["children","className"];function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$n.apply(this,arguments)}function _objectWithoutProperties$n(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$n(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$n(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var ConversationHeaderActions=function _e(_){var et=_.children,tt=et===void 0?void 0:et,nt=_.className,it=_objectWithoutProperties$n(_,_excluded$n),at="".concat(prefix,"-conversation-header__actions");return React.createElement("section",_extends$n({},it,{className:classNames(at,nt)}),tt)};ConversationHeaderActions.displayName="ConversationHeader.Actions";var _excluded$m=["userName","info","children","className"];function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$m.apply(this,arguments)}function _objectWithoutProperties$m(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$m(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$m(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var ConversationHeaderContent=function _e(_){var et=_.userName,tt=et===void 0?"":et,nt=_.info,it=nt===void 0?"":nt,at=_.children,ot=at===void 0?void 0:at,st=_.className,dt=_objectWithoutProperties$m(_,_excluded$m),ht="".concat(prefix,"-conversation-header__content");return React.createElement("div",_extends$m({},dt,{className:classNames(ht,st)}),typeof ot<"u"?ot:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(prefix,"-conversation-header__user-name")},tt),React.createElement("div",{className:"".concat(prefix,"-conversation-header__info")},it)))};ConversationHeaderContent.displayName="ConversationHeader.Content";var _excluded$l=["children","className"];function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$l.apply(this,arguments)}function _slicedToArray$6(_e,_){return _arrayWithHoles$6(_e)||_iterableToArrayLimit$6(_e,_)||_unsupportedIterableToArray$6(_e,_)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray$6(_e,_);var et=Object.prototype.toString.call(_e).slice(8,-1);if(et==="Object"&&_e.constructor&&(et=_e.constructor.name),et==="Map"||et==="Set")return Array.from(_e);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray$6(_e,_)}}function _arrayLikeToArray$6(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var et=0,tt=new Array(_);et<_;et++)tt[et]=_e[et];return tt}function _iterableToArrayLimit$6(_e,_){var et=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(et!=null){var tt,nt,it,at,ot=[],st=!0,dt=!1;try{if(it=(et=et.call(_e)).next,_!==0)for(;!(st=(tt=it.call(et)).done)&&(ot.push(tt.value),ot.length!==_);st=!0);}catch(ht){dt=!0,nt=ht}finally{try{if(!st&&et.return!=null&&(at=et.return(),Object(at)!==at))return}finally{if(dt)throw nt}}return ot}}function _arrayWithHoles$6(_e){if(Array.isArray(_e))return _e}function _objectWithoutProperties$l(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$l(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$l(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var ConversationHeader=function _e(_){var et=_.children,tt=et===void 0?void 0:et,nt=_.className,it=_objectWithoutProperties$l(_,_excluded$l),at="".concat(prefix,"-conversation-header"),ot=getChildren(tt,[ConversationHeaderBack,Avatar,AvatarGroup,ConversationHeaderContent,ConversationHeaderActions]),st=_slicedToArray$6(ot,5),dt=st[0],ht=st[1],ct=st[2],ut=st[3],ft=st[4];return React.createElement("div",_extends$l({},it,{className:classNames(at,nt)}),dt,ht&&React.createElement("div",{className:"".concat(at,"__avatar")},ht),!ht&&ct&&React.createElement("div",{className:"".concat(at,"__avatar")},ct),ut,ft)};ConversationHeader.displayName="ConversationHeader";ConversationHeader.Back=ConversationHeaderBack;ConversationHeader.Actions=ConversationHeaderActions;ConversationHeader.Content=ConversationHeaderContent;/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function get$3(_e){return getComputedStyle(_e)}function set$2(_e,_){for(var et in _){var tt=_[et];typeof tt=="number"&&(tt=tt+"px"),_e.style[et]=tt}return _e}function div$1(_e){var _=document.createElement("div");return _.className=_e,_}var elMatches=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function matches(_e,_){if(!elMatches)throw new Error("No element matching method supported");return elMatches.call(_e,_)}function remove(_e){_e.remove?_e.remove():_e.parentNode&&_e.parentNode.removeChild(_e)}function queryChildren(_e,_){return Array.prototype.filter.call(_e.children,function(et){return matches(et,_)})}var cls={main:"ps",rtl:"ps__rtl",element:{thumb:function _e(_){return"ps__thumb-"+_},rail:function _e(_){return"ps__rail-"+_},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function _e(_){return"ps--active-"+_},scrolling:function _e(_){return"ps--scrolling-"+_}}},scrollingClassTimeout={x:null,y:null};function addScrollingClass(_e,_){var et=_e.element.classList,tt=cls.state.scrolling(_);et.contains(tt)?clearTimeout(scrollingClassTimeout[_]):et.add(tt)}function removeScrollingClass(_e,_){scrollingClassTimeout[_]=setTimeout(function(){return _e.isAlive&&_e.element.classList.remove(cls.state.scrolling(_))},_e.settings.scrollingThreshold)}function setScrollingClassInstantly(_e,_){addScrollingClass(_e,_),removeScrollingClass(_e,_)}var EventElement=function _e(_){this.element=_,this.handlers={}},prototypeAccessors={isEmpty:{configurable:!0}};EventElement.prototype.bind=function _e(_,et){typeof this.handlers[_]>"u"&&(this.handlers[_]=[]),this.handlers[_].push(et);var tt=["touchstart","wheel","touchmove"];tt.indexOf(_)!==-1?this.element.addEventListener(_,et,{passive:!1}):this.element.addEventListener(_,et,!1)};EventElement.prototype.unbind=function _e(_,et){var tt=this;this.handlers[_]=this.handlers[_].filter(function(nt){return et&&nt!==et?!0:(tt.element.removeEventListener(_,nt,!1),!1)})};EventElement.prototype.unbindAll=function _e(){for(var _ in this.handlers)this.unbind(_)};prototypeAccessors.isEmpty.get=function(){var _e=this;return Object.keys(this.handlers).every(function(_){return _e.handlers[_].length===0})};Object.defineProperties(EventElement.prototype,prototypeAccessors);var EventManager=function _e(){this.eventElements=[]};EventManager.prototype.eventElement=function _e(_){var et=this.eventElements.filter(function(tt){return tt.element===_})[0];return et||(et=new EventElement(_),this.eventElements.push(et)),et};EventManager.prototype.bind=function _e(_,et,tt){this.eventElement(_).bind(et,tt)};EventManager.prototype.unbind=function _e(_,et,tt){var nt=this.eventElement(_);nt.unbind(et,tt),nt.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(nt),1)};EventManager.prototype.unbindAll=function _e(){this.eventElements.forEach(function(_){return _.unbindAll()}),this.eventElements=[]};EventManager.prototype.once=function _e(_,et,tt){var nt=this.eventElement(_),it=function at(ot){nt.unbind(et,at),tt(ot)};nt.bind(et,it)};function createEvent(_e){if(typeof window.CustomEvent=="function")return new CustomEvent(_e);var _=document.createEvent("CustomEvent");return _.initCustomEvent(_e,!1,!1,void 0),_}function processScrollDiff(_e,_,et,tt,nt,it){tt===void 0&&(tt=!0),nt===void 0&&(nt=!1);var at;if(_==="top")at=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(_==="left")at=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");processScrollDiff$1(_e,et,at,tt,nt,it)}function processScrollDiff$1(_e,_,et,tt,nt,it){var at=et[0],ot=et[1],st=et[2],dt=et[3],ht=et[4],ct=et[5];tt===void 0&&(tt=!0),nt===void 0&&(nt=!1);var ut=_e.element;_e.reach[dt]=null;var ft=it===!0?_e[at]!==_e[ot]:!0;ft&&ut[st]<1&&(_e.reach[dt]="start"),ft&&ut[st]>_e[at]-_e[ot]-1&&(_e.reach[dt]="end"),_&&(ut.dispatchEvent(createEvent("ps-scroll-"+dt)),_<0?ut.dispatchEvent(createEvent("ps-scroll-"+ht)):_>0&&ut.dispatchEvent(createEvent("ps-scroll-"+ct)),tt&&setScrollingClassInstantly(_e,dt)),_e.reach[dt]&&(_||nt)&&ut.dispatchEvent(createEvent("ps-"+dt+"-reach-"+_e.reach[dt]))}function toInt(_e){return parseInt(_e,10)||0}function isEditable(_e){return matches(_e,"input,[contenteditable]")||matches(_e,"select,[contenteditable]")||matches(_e,"textarea,[contenteditable]")||matches(_e,"button,[contenteditable]")}function outerWidth(_e){var _=get$3(_e);return toInt(_.width)+toInt(_.paddingLeft)+toInt(_.paddingRight)+toInt(_.borderLeftWidth)+toInt(_.borderRightWidth)}var env$1={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function updateGeometry(_e){var _=_e.element,et=Math.floor(_.scrollTop),tt=_.getBoundingClientRect();_e.containerWidth=Math.round(tt.width),_e.containerHeight=Math.round(tt.height),_e.contentWidth=_.scrollWidth,_e.contentHeight=_.scrollHeight,_.contains(_e.scrollbarXRail)||(queryChildren(_,cls.element.rail("x")).forEach(function(nt){return remove(nt)}),_.appendChild(_e.scrollbarXRail)),_.contains(_e.scrollbarYRail)||(queryChildren(_,cls.element.rail("y")).forEach(function(nt){return remove(nt)}),_.appendChild(_e.scrollbarYRail)),!_e.settings.suppressScrollX&&_e.containerWidth+_e.settings.scrollXMarginOffset<_e.contentWidth?(_e.scrollbarXActive=!0,_e.railXWidth=_e.containerWidth-_e.railXMarginWidth,_e.railXRatio=_e.containerWidth/_e.railXWidth,_e.scrollbarXWidth=getThumbSize(_e,toInt(_e.railXWidth*_e.containerWidth/_e.contentWidth)),_e.scrollbarXLeft=toInt((_e.negativeScrollAdjustment+_.scrollLeft)*(_e.railXWidth-_e.scrollbarXWidth)/(_e.contentWidth-_e.containerWidth))):_e.scrollbarXActive=!1,!_e.settings.suppressScrollY&&_e.containerHeight+_e.settings.scrollYMarginOffset<_e.contentHeight?(_e.scrollbarYActive=!0,_e.railYHeight=_e.containerHeight-_e.railYMarginHeight,_e.railYRatio=_e.containerHeight/_e.railYHeight,_e.scrollbarYHeight=getThumbSize(_e,toInt(_e.railYHeight*_e.containerHeight/_e.contentHeight)),_e.scrollbarYTop=toInt(et*(_e.railYHeight-_e.scrollbarYHeight)/(_e.contentHeight-_e.containerHeight))):_e.scrollbarYActive=!1,_e.scrollbarXLeft>=_e.railXWidth-_e.scrollbarXWidth&&(_e.scrollbarXLeft=_e.railXWidth-_e.scrollbarXWidth),_e.scrollbarYTop>=_e.railYHeight-_e.scrollbarYHeight&&(_e.scrollbarYTop=_e.railYHeight-_e.scrollbarYHeight),updateCss(_,_e),_e.scrollbarXActive?_.classList.add(cls.state.active("x")):(_.classList.remove(cls.state.active("x")),_e.scrollbarXWidth=0,_e.scrollbarXLeft=0,_.scrollLeft=_e.isRtl===!0?_e.contentWidth:0),_e.scrollbarYActive?_.classList.add(cls.state.active("y")):(_.classList.remove(cls.state.active("y")),_e.scrollbarYHeight=0,_e.scrollbarYTop=0,_.scrollTop=0)}function getThumbSize(_e,_){return _e.settings.minScrollbarLength&&(_=Math.max(_,_e.settings.minScrollbarLength)),_e.settings.maxScrollbarLength&&(_=Math.min(_,_e.settings.maxScrollbarLength)),_}function updateCss(_e,_){var et={width:_.railXWidth},tt=Math.floor(_e.scrollTop);_.isRtl?et.left=_.negativeScrollAdjustment+_e.scrollLeft+_.containerWidth-_.contentWidth:et.left=_e.scrollLeft,_.isScrollbarXUsingBottom?et.bottom=_.scrollbarXBottom-tt:et.top=_.scrollbarXTop+tt,set$2(_.scrollbarXRail,et);var nt={top:tt,height:_.railYHeight};_.isScrollbarYUsingRight?_.isRtl?nt.right=_.contentWidth-(_.negativeScrollAdjustment+_e.scrollLeft)-_.scrollbarYRight-_.scrollbarYOuterWidth-9:nt.right=_.scrollbarYRight-_e.scrollLeft:_.isRtl?nt.left=_.negativeScrollAdjustment+_e.scrollLeft+_.containerWidth*2-_.contentWidth-_.scrollbarYLeft-_.scrollbarYOuterWidth:nt.left=_.scrollbarYLeft+_e.scrollLeft,set$2(_.scrollbarYRail,nt),set$2(_.scrollbarX,{left:_.scrollbarXLeft,width:_.scrollbarXWidth-_.railBorderXWidth}),set$2(_.scrollbarY,{top:_.scrollbarYTop,height:_.scrollbarYHeight-_.railBorderYWidth})}function clickRail(_e){_e.element,_e.event.bind(_e.scrollbarY,"mousedown",function(_){return _.stopPropagation()}),_e.event.bind(_e.scrollbarYRail,"mousedown",function(_){var et=_.pageY-window.pageYOffset-_e.scrollbarYRail.getBoundingClientRect().top,tt=et>_e.scrollbarYTop?1:-1;_e.element.scrollTop+=tt*_e.containerHeight,updateGeometry(_e),_.stopPropagation()}),_e.event.bind(_e.scrollbarX,"mousedown",function(_){return _.stopPropagation()}),_e.event.bind(_e.scrollbarXRail,"mousedown",function(_){var et=_.pageX-window.pageXOffset-_e.scrollbarXRail.getBoundingClientRect().left,tt=et>_e.scrollbarXLeft?1:-1;_e.element.scrollLeft+=tt*_e.containerWidth,updateGeometry(_e),_.stopPropagation()})}function dragThumb(_e){bindMouseScrollHandler(_e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),bindMouseScrollHandler(_e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function bindMouseScrollHandler(_e,_){var et=_[0],tt=_[1],nt=_[2],it=_[3],at=_[4],ot=_[5],st=_[6],dt=_[7],ht=_[8],ct=_e.element,ut=null,ft=null,gt=null;function mt(bt){bt.touches&&bt.touches[0]&&(bt[nt]=bt.touches[0].pageY),ct[st]=ut+gt*(bt[nt]-ft),addScrollingClass(_e,dt),updateGeometry(_e),bt.stopPropagation(),bt.preventDefault()}function vt(){removeScrollingClass(_e,dt),_e[ht].classList.remove(cls.state.clicking),_e.event.unbind(_e.ownerDocument,"mousemove",mt)}function yt(bt,_t){ut=ct[st],_t&&bt.touches&&(bt[nt]=bt.touches[0].pageY),ft=bt[nt],gt=(_e[tt]-_e[et])/(_e[it]-_e[ot]),_t?_e.event.bind(_e.ownerDocument,"touchmove",mt):(_e.event.bind(_e.ownerDocument,"mousemove",mt),_e.event.once(_e.ownerDocument,"mouseup",vt),bt.preventDefault()),_e[ht].classList.add(cls.state.clicking),bt.stopPropagation()}_e.event.bind(_e[at],"mousedown",function(bt){yt(bt)}),_e.event.bind(_e[at],"touchstart",function(bt){yt(bt,!0)})}function keyboard(_e){var _=_e.element,et=function(){return matches(_,":hover")},tt=function(){return matches(_e.scrollbarX,":focus")||matches(_e.scrollbarY,":focus")};function nt(it,at){var ot=Math.floor(_.scrollTop);if(it===0){if(!_e.scrollbarYActive)return!1;if(ot===0&&at>0||ot>=_e.contentHeight-_e.containerHeight&&at<0)return!_e.settings.wheelPropagation}var st=_.scrollLeft;if(at===0){if(!_e.scrollbarXActive)return!1;if(st===0&&it<0||st>=_e.contentWidth-_e.containerWidth&&it>0)return!_e.settings.wheelPropagation}return!0}_e.event.bind(_e.ownerDocument,"keydown",function(it){if(!(it.isDefaultPrevented&&it.isDefaultPrevented()||it.defaultPrevented)&&!(!et()&&!tt())){var at=document.activeElement?document.activeElement:_e.ownerDocument.activeElement;if(at){if(at.tagName==="IFRAME")at=at.contentDocument.activeElement;else for(;at.shadowRoot;)at=at.shadowRoot.activeElement;if(isEditable(at))return}var ot=0,st=0;switch(it.which){case 37:it.metaKey?ot=-_e.contentWidth:it.altKey?ot=-_e.containerWidth:ot=-30;break;case 38:it.metaKey?st=_e.contentHeight:it.altKey?st=_e.containerHeight:st=30;break;case 39:it.metaKey?ot=_e.contentWidth:it.altKey?ot=_e.containerWidth:ot=30;break;case 40:it.metaKey?st=-_e.contentHeight:it.altKey?st=-_e.containerHeight:st=-30;break;case 32:it.shiftKey?st=_e.containerHeight:st=-_e.containerHeight;break;case 33:st=_e.containerHeight;break;case 34:st=-_e.containerHeight;break;case 36:st=_e.contentHeight;break;case 35:st=-_e.contentHeight;break;default:return}_e.settings.suppressScrollX&&ot!==0||_e.settings.suppressScrollY&&st!==0||(_.scrollTop-=st,_.scrollLeft+=ot,updateGeometry(_e),nt(ot,st)&&it.preventDefault())}})}function wheel(_e){var _=_e.element;function et(at,ot){var st=Math.floor(_.scrollTop),dt=_.scrollTop===0,ht=st+_.offsetHeight===_.scrollHeight,ct=_.scrollLeft===0,ut=_.scrollLeft+_.offsetWidth===_.scrollWidth,ft;return Math.abs(ot)>Math.abs(at)?ft=dt||ht:ft=ct||ut,ft?!_e.settings.wheelPropagation:!0}function tt(at){var ot=at.deltaX,st=-1*at.deltaY;return(typeof ot>"u"||typeof st>"u")&&(ot=-1*at.wheelDeltaX/6,st=at.wheelDeltaY/6),at.deltaMode&&at.deltaMode===1&&(ot*=10,st*=10),ot!==ot&&st!==st&&(ot=0,st=at.wheelDelta),at.shiftKey?[-st,-ot]:[ot,st]}function nt(at,ot,st){if(!env$1.isWebKit&&_.querySelector("select:focus"))return!0;if(!_.contains(at))return!1;for(var dt=at;dt&&dt!==_;){if(dt.classList.contains(cls.element.consuming))return!0;var ht=get$3(dt);if(st&&ht.overflowY.match(/(scroll|auto)/)){var ct=dt.scrollHeight-dt.clientHeight;if(ct>0&&(dt.scrollTop>0&&st<0||dt.scrollTop<ct&&st>0))return!0}if(ot&&ht.overflowX.match(/(scroll|auto)/)){var ut=dt.scrollWidth-dt.clientWidth;if(ut>0&&(dt.scrollLeft>0&&ot<0||dt.scrollLeft<ut&&ot>0))return!0}dt=dt.parentNode}return!1}function it(at){var ot=tt(at),st=ot[0],dt=ot[1];if(!nt(at.target,st,dt)){var ht=!1;_e.settings.useBothWheelAxes?_e.scrollbarYActive&&!_e.scrollbarXActive?(dt?_.scrollTop-=dt*_e.settings.wheelSpeed:_.scrollTop+=st*_e.settings.wheelSpeed,ht=!0):_e.scrollbarXActive&&!_e.scrollbarYActive&&(st?_.scrollLeft+=st*_e.settings.wheelSpeed:_.scrollLeft-=dt*_e.settings.wheelSpeed,ht=!0):(_.scrollTop-=dt*_e.settings.wheelSpeed,_.scrollLeft+=st*_e.settings.wheelSpeed),updateGeometry(_e),ht=ht||et(st,dt),ht&&!at.ctrlKey&&(at.stopPropagation(),at.preventDefault())}}typeof window.onwheel<"u"?_e.event.bind(_,"wheel",it):typeof window.onmousewheel<"u"&&_e.event.bind(_,"mousewheel",it)}function touch(_e){if(!env$1.supportsTouch&&!env$1.supportsIePointer)return;var _=_e.element;function et(gt,mt){var vt=Math.floor(_.scrollTop),yt=Math.ceil(_.scrollLeft),bt=Math.abs(gt),_t=Math.abs(mt);if(!_e.settings.wheelPropagation)return!0;if(_t>bt){if(_e.settings.suppressScrollY)return!1;if(mt>0)return vt!==0;if(mt<0)return vt<_e.contentHeight-_e.containerHeight}else if(bt>_t){if(_e.settings.suppressScrollX)return!1;if(gt>0)return yt!==0;if(mt<0)return yt<_e.contentWidth-_e.containerWidth}return!0}function tt(gt,mt){_.scrollTop-=mt,_.scrollLeft-=gt,updateGeometry(_e)}var nt={},it=0,at={},ot=null;function st(gt){return gt.targetTouches?gt.targetTouches[0]:gt}function dt(gt){return gt.pointerType&&gt.pointerType==="pen"&&gt.buttons===0?!1:!!(gt.targetTouches&&gt.targetTouches.length===1||gt.pointerType&&gt.pointerType!=="mouse"&&gt.pointerType!==gt.MSPOINTER_TYPE_MOUSE)}function ht(gt){if(dt(gt)){var mt=st(gt);nt.pageX=mt.pageX,nt.pageY=mt.pageY,it=new Date().getTime(),ot!==null&&clearInterval(ot)}}function ct(gt,mt,vt){if(!_.contains(gt))return!1;for(var yt=gt;yt&&yt!==_;){if(yt.classList.contains(cls.element.consuming))return!0;var bt=get$3(yt);if(vt&&bt.overflowY.match(/(scroll|auto)/)){var _t=yt.scrollHeight-yt.clientHeight;if(_t>0&&(yt.scrollTop>0&&vt<0||yt.scrollTop<_t&&vt>0))return!0}if(mt&&bt.overflowX.match(/(scroll|auto)/)){var xt=yt.scrollWidth-yt.clientWidth;if(xt>0&&(yt.scrollLeft>0&&mt<0||yt.scrollLeft<xt&&mt>0))return!0}yt=yt.parentNode}return!1}function ut(gt){if(dt(gt)){var mt=st(gt),vt={pageX:mt.pageX,pageY:mt.pageY},yt=vt.pageX-nt.pageX,bt=vt.pageY-nt.pageY;if(ct(gt.target,yt,bt))return;tt(yt,bt),nt=vt;var _t=new Date().getTime(),xt=_t-it;xt>0&&(at.x=yt/xt,at.y=bt/xt,it=_t),gt.cancelable&&et(yt,bt)&&gt.preventDefault()}}function ft(){_e.settings.swipeEasing&&(clearInterval(ot),ot=setInterval(function(){if(_e.isInitialized){clearInterval(ot);return}if(!at.x&&!at.y){clearInterval(ot);return}if(Math.abs(at.x)<.01&&Math.abs(at.y)<.01){clearInterval(ot);return}tt(at.x*30,at.y*30),at.x*=.8,at.y*=.8},10))}env$1.supportsTouch?(_e.event.bind(_,"touchstart",ht),_e.event.bind(_,"touchmove",ut),_e.event.bind(_,"touchend",ft)):env$1.supportsIePointer&&(window.PointerEvent?(_e.event.bind(_,"pointerdown",ht),_e.event.bind(_,"pointermove",ut),_e.event.bind(_,"pointerup",ft)):window.MSPointerEvent&&(_e.event.bind(_,"MSPointerDown",ht),_e.event.bind(_,"MSPointerMove",ut),_e.event.bind(_,"MSPointerUp",ft)))}var defaultSettings=function _e(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},handlers$2={"click-rail":clickRail,"drag-thumb":dragThumb,keyboard,wheel,touch},PerfectScrollbar=function _e(_,et){var tt=this;if(et===void 0&&(et={}),typeof _=="string"&&(_=document.querySelector(_)),!_||!_.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=_,_.classList.add(cls.main),this.settings=defaultSettings();for(var nt in et)this.settings[nt]=et[nt];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var it=function(){return _.classList.add(cls.state.focus)},at=function(){return _.classList.remove(cls.state.focus)};this.isRtl=get$3(_).direction==="rtl",this.isRtl===!0&&_.classList.add(cls.rtl),this.isNegativeScroll=function(){var dt=_.scrollLeft,ht=null;return _.scrollLeft=-1,ht=_.scrollLeft<0,_.scrollLeft=dt,ht}(),this.negativeScrollAdjustment=this.isNegativeScroll?_.scrollWidth-_.clientWidth:0,this.event=new EventManager,this.ownerDocument=_.ownerDocument||document,this.scrollbarXRail=div$1(cls.element.rail("x")),_.appendChild(this.scrollbarXRail),this.scrollbarX=div$1(cls.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",it),this.event.bind(this.scrollbarX,"blur",at),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var ot=get$3(this.scrollbarXRail);this.scrollbarXBottom=parseInt(ot.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=toInt(ot.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=toInt(ot.borderLeftWidth)+toInt(ot.borderRightWidth),set$2(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=toInt(ot.marginLeft)+toInt(ot.marginRight),set$2(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=div$1(cls.element.rail("y")),_.appendChild(this.scrollbarYRail),this.scrollbarY=div$1(cls.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",it),this.event.bind(this.scrollbarY,"blur",at),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var st=get$3(this.scrollbarYRail);this.scrollbarYRight=parseInt(st.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=toInt(st.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?outerWidth(this.scrollbarY):null,this.railBorderYWidth=toInt(st.borderTopWidth)+toInt(st.borderBottomWidth),set$2(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=toInt(st.marginTop)+toInt(st.marginBottom),set$2(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:_.scrollLeft<=0?"start":_.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:_.scrollTop<=0?"start":_.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(dt){return handlers$2[dt](tt)}),this.lastScrollTop=Math.floor(_.scrollTop),this.lastScrollLeft=_.scrollLeft,this.event.bind(this.element,"scroll",function(dt){return tt.onScroll(dt)}),updateGeometry(this)};PerfectScrollbar.prototype.update=function _e(_){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,set$2(this.scrollbarXRail,{display:"block"}),set$2(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=toInt(get$3(this.scrollbarXRail).marginLeft)+toInt(get$3(this.scrollbarXRail).marginRight),this.railYMarginHeight=toInt(get$3(this.scrollbarYRail).marginTop)+toInt(get$3(this.scrollbarYRail).marginBottom),set$2(this.scrollbarXRail,{display:"none"}),set$2(this.scrollbarYRail,{display:"none"}),updateGeometry(this),processScrollDiff(this,"top",0,!1,!0,_),processScrollDiff(this,"left",0,!1,!0,_),set$2(this.scrollbarXRail,{display:""}),set$2(this.scrollbarYRail,{display:""}))};PerfectScrollbar.prototype.onScroll=function _e(_){this.isAlive&&(updateGeometry(this),processScrollDiff(this,"top",this.element.scrollTop-this.lastScrollTop),processScrollDiff(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};PerfectScrollbar.prototype.destroy=function _e(){this.isAlive&&(this.event.unbindAll(),remove(this.scrollbarX),remove(this.scrollbarY),remove(this.scrollbarXRail),remove(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};PerfectScrollbar.prototype.removePsClasses=function _e(){this.element.className=this.element.className.split(" ").filter(function(_){return!_.match(/^ps([-_].+|)$/)}).join(" ")};function _typeof$c(_e){"@babel/helpers - typeof";return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$c(_e)}var _excluded$k=["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"];function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$k.apply(this,arguments)}function _objectWithoutProperties$k(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$k(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$k(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}function _classCallCheck$3(_e,_){if(!(_e instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(_e,_){for(var et=0;et<_.length;et++){var tt=_[et];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty(_e,_toPropertyKey$b(tt.key),tt)}}function _createClass$3(_e,_,et){return _defineProperties$3(_e.prototype,_),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _toPropertyKey$b(_e){var _=_toPrimitive$b(_e,"string");return _typeof$c(_)=="symbol"?_:String(_)}function _toPrimitive$b(_e,_){if(_typeof$c(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_);if(_typeof$c(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_e)}function _callSuper$3(_e,_,et){return _=_getPrototypeOf$3(_),_possibleConstructorReturn$3(_e,_isNativeReflectConstruct$3()?Reflect.construct(_,et,_getPrototypeOf$3(_e).constructor):_.apply(_e,et))}function _possibleConstructorReturn$3(_e,_){if(_&&(_typeof$c(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(_e)}function _isNativeReflectConstruct$3(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$3=function(){return!!_e})()}function _getPrototypeOf$3(_e){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(et){return et.__proto__||Object.getPrototypeOf(et)},_getPrototypeOf$3(_e)}function _assertThisInitialized$3(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$3(_e,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(_&&_.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),_&&_setPrototypeOf$3(_e,_)}function _setPrototypeOf$3(_e,_){return _setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,nt){return tt.__proto__=nt,tt},_setPrototypeOf$3(_e,_)}var handlerNameByEvent={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(handlerNameByEvent);var ScrollBar=function(_e){_inherits$3(_,_e);function _(et){var tt;return _classCallCheck$3(this,_),tt=_callSuper$3(this,_,[et]),tt.handleRef=tt.handleRef.bind(_assertThisInitialized$3(tt)),tt._handlerByEvent={},tt}return _createClass$3(_,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new PerfectScrollbar(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(tt){this._updateEventHook(tt),this.updateScroll(),tt.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var tt=this;Object.keys(this._handlerByEvent).forEach(function(nt){var it=tt._handlerByEvent[nt];it&&tt._container.removeEventListener(nt,it,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var tt=this,nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(handlerNameByEvent).forEach(function(it){var at=tt.props[handlerNameByEvent[it]],ot=nt[handlerNameByEvent[it]];if(at!==ot){if(ot){var st=tt._handlerByEvent[it];tt._container.removeEventListener(it,st,!1),tt._handlerByEvent[it]=null}if(at){var dt=function(){return at(tt._container)};tt._container.addEventListener(it,dt,!1),tt._handlerByEvent[it]=dt}}})}},{key:"_updateClassName",value:function(){var tt=this.props.className,nt=this._container.className.split(" ").filter(function(it){return it.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container".concat(tt?" ".concat(tt):"").concat(nt?" ".concat(nt):""))}},{key:"updateScroll",value:function(){var tt=this.props.onSync;typeof tt=="function"?tt(this._ps):this._ps.update()}},{key:"handleRef",value:function(tt){var nt,it;this._container=tt,(nt=(it=this.props).containerRef)===null||nt===void 0||nt.call(it,tt)}},{key:"render",value:function(){var tt=this.props;tt.className;var nt=tt.style;tt.option,tt.options,tt.containerRef,tt.onScrollY,tt.onScrollX,tt.onScrollUp,tt.onScrollDown,tt.onScrollLeft,tt.onScrollRight,tt.onYReachStart,tt.onYReachEnd,tt.onXReachStart,tt.onXReachEnd;var it=tt.component;tt.onSync;var at=tt.children,ot=_objectWithoutProperties$k(tt,_excluded$k),st=typeof it>"u"?"div":it;return React.createElement(st,_extends$k({style:nt,ref:this.handleRef},ot),at)}}]),_}(reactExports.Component);function _typeof$b(_e){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$b(_e)}var _excluded$j=["className","variant","children"];function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$j.apply(this,arguments)}function _defineProperty$a(_e,_,et){return _=_toPropertyKey$a(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$a(_e){var _=_toPrimitive$a(_e,"string");return _typeof$b(_)=="symbol"?_:String(_)}function _toPrimitive$a(_e,_){if(_typeof$b(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$b(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _objectWithoutProperties$j(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$j(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$j(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var Loader=function _e(_){var et=_.className,tt=et===void 0?void 0:et,nt=_.variant,it=nt===void 0?"default":nt,at=_.children,ot=_objectWithoutProperties$j(_,_excluded$j),st="".concat(prefix,"-loader"),dt=React.Children.count(at)>0?"".concat(st,"--content"):"";return React.createElement("div",_extends$j({},ot,{className:classNames(st,dt,_defineProperty$a({},"".concat(st,"--variant-").concat(it),it!=="default"),tt),role:"status"}),at)};function _typeof$a(_e){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$a(_e)}var _excluded$i=["className","children","blur","grayscale"];function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$i.apply(this,arguments)}function _defineProperty$9(_e,_,et){return _=_toPropertyKey$9(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$9(_e){var _=_toPrimitive$9(_e,"string");return _typeof$a(_)=="symbol"?_:String(_)}function _toPrimitive$9(_e,_){if(_typeof$a(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$a(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _objectWithoutProperties$i(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$i(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$i(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var Overlay=function _e(_){var et=_.className,tt=et===void 0?"":et,nt=_.children,it=nt===void 0?void 0:nt,at=_.blur,ot=at===void 0?!1:at,st=_.grayscale,dt=st===void 0?!1:st,ht=_objectWithoutProperties$i(_,_excluded$i),ct="".concat(prefix,"-overlay"),ut="".concat(ct,"--blur"),ft="".concat(ct,"--grayscale");return React.createElement("div",_extends$i({},ht,{className:classNames(ct,_defineProperty$9({},ut,ot),_defineProperty$9({},ft,dt),tt)}),React.createElement("div",{className:"".concat(ct,"__content")},it))},_excluded$h=["sender","sentTime","children","className"];function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$h.apply(this,arguments)}function _objectWithoutProperties$h(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$h(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$h(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var MessageHeader=function _e(_){var et=_.sender,tt=et===void 0?"":et,nt=_.sentTime,it=nt===void 0?"":nt,at=_.children,ot=at===void 0?void 0:at,st=_.className,dt=_objectWithoutProperties$h(_,_excluded$h),ht="".concat(prefix,"-message__header");return React.createElement("div",_extends$h({},dt,{className:classNames(ht,st)}),typeof ot<"u"?ot:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(prefix,"-message__sender-name")},tt),React.createElement("div",{className:"".concat(prefix,"-message__sent-time")},it)))};MessageHeader.displayName="Message.Header";var _excluded$g=["sender","sentTime","children","className"];function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$g.apply(this,arguments)}function _objectWithoutProperties$g(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$g(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$g(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var MessageFooter=function _e(_){var et=_.sender,tt=et===void 0?"":et,nt=_.sentTime,it=nt===void 0?"":nt,at=_.children,ot=at===void 0?void 0:at,st=_.className,dt=_objectWithoutProperties$g(_,_excluded$g),ht="".concat(prefix,"-message__footer");return React.createElement("div",_extends$g({},dt,{className:classNames(ht,st)}),typeof ot<"u"?ot:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(prefix,"-message__sender-name")},tt),React.createElement("div",{className:"".concat(prefix,"-message__sent-time")},it)))};MessageFooter.displayName="Message.Footer";var MessageCustomContent=function _e(_){var et=_.children,tt=_.className,nt="".concat(prefix,"-message__custom-content");return React.createElement("div",{className:classNames(nt,tt)},et)};MessageCustomContent.displayName="Message.CustomContent";var MessageImageContent=function _e(_){var et=_.src,tt=_.width,nt=_.height,it=_.alt,at=_.className,ot="".concat(prefix,"-message__image-content"),st={width:typeof tt=="number"?"".concat(tt,"px"):typeof tt=="string"?tt:void 0,height:typeof nt=="number"?"".concat(nt,"px"):typeof nt=="string"?nt:void 0};return React.createElement("div",{className:classNames(ot,at)},React.createElement("img",{src:et,style:st,alt:it}))};MessageImageContent.displayName="Message.ImageContent";var MessageHtmlContent=function _e(_){var et=_.html,tt=_.className,nt="".concat(prefix,"-message__html-content"),it=function(){return{__html:et}};return React.createElement("div",{className:classNames(nt,tt),dangerouslySetInnerHTML:it()})};MessageHtmlContent.displayName="Message.HtmlContent";var MessageTextContent=function _e(_){var et=_.text,tt=_.className,nt=_.children,it="".concat(prefix,"-message__text-content"),at=nt??et;return React.createElement("div",{className:classNames(it,tt)},at)};MessageTextContent.displayName="Message.TextContent";var _excluded$f=["model","avatarSpacer","avatarPosition","type","payload","children","className"];function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$f.apply(this,arguments)}function _defineProperty$8(_e,_,et){return _=_toPropertyKey$8(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$8(_e){var _=_toPrimitive$8(_e,"string");return _typeof$9(_)=="symbol"?_:String(_)}function _toPrimitive$8(_e,_){if(_typeof$9(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$9(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _typeof$9(_e){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$9(_e)}function _slicedToArray$5(_e,_){return _arrayWithHoles$5(_e)||_iterableToArrayLimit$5(_e,_)||_unsupportedIterableToArray$5(_e,_)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray$5(_e,_);var et=Object.prototype.toString.call(_e).slice(8,-1);if(et==="Object"&&_e.constructor&&(et=_e.constructor.name),et==="Map"||et==="Set")return Array.from(_e);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray$5(_e,_)}}function _arrayLikeToArray$5(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var et=0,tt=new Array(_);et<_;et++)tt[et]=_e[et];return tt}function _iterableToArrayLimit$5(_e,_){var et=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(et!=null){var tt,nt,it,at,ot=[],st=!0,dt=!1;try{if(it=(et=et.call(_e)).next,_!==0)for(;!(st=(tt=it.call(et)).done)&&(ot.push(tt.value),ot.length!==_);st=!0);}catch(ht){dt=!0,nt=ht}finally{try{if(!st&&et.return!=null&&(at=et.return(),Object(at)!==at))return}finally{if(dt)throw nt}}return ot}}function _arrayWithHoles$5(_e){if(Array.isArray(_e))return _e}function _objectWithoutProperties$f(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$f(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$f(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var Message=function _e(_){var et,tt,nt=_.model,it=nt.message,at=it===void 0?"":it,ot=nt.sentTime,st=ot===void 0?"":ot,dt=nt.sender,ht=dt===void 0?"":dt,ct=nt.direction,ut=ct===void 0?1:ct,ft=nt.position,gt=nt.type,mt=nt.payload,vt=_.avatarSpacer,yt=vt===void 0?!1:vt,bt=_.avatarPosition,_t=bt===void 0?void 0:bt,xt=_.type,St=xt===void 0?"html":xt,Tt=_.payload,wt=_.children,Ct=_.className,Et=_objectWithoutProperties$f(_,_excluded$f),At="".concat(prefix,"-message"),Pt=getChildren(wt,[Avatar,MessageHeader,MessageFooter,MessageHtmlContent,MessageTextContent,MessageImageContent,MessageCustomContent]),Rt=_slicedToArray$5(Pt,7),It=Rt[0],Mt=Rt[1],Ot=Rt[2],$t=Rt[3],Lt=Rt[4],kt=Rt[5],Nt=Rt[6],Vt=function(){if(ut===0||ut==="incoming")return"".concat(At,"--incoming");if(ut===1||ut==="outgoing")return"".concat(At,"--outgoing")}(),zt=function(lr){var pr="".concat(At,"--avatar-");if(lr===0||lr==="top-left"||lr==="tl")return"".concat(pr,"tl");if(lr===1||lr==="top-right"||lr==="tr")return"".concat(pr,"tr");if(lr===2||lr==="bottom-right"||lr==="br")return"".concat(pr,"br");if(lr===3||lr==="bottom-left"||lr==="bl")return"".concat(pr,"bl");if(lr===4||lr==="center-left"||lr==="cl")return"".concat(pr,"cl");if(lr===5||lr==="center-right"||lr==="cr")return"".concat(pr,"cr")}(_t),Xt=function(lr){var pr="".concat(prefix,"-message--");if(lr==="single"||lr===0)return"".concat(pr,"single");if(lr==="first"||lr===1)return"".concat(pr,"first");if(lr==="normal"||lr===2)return"";if(lr==="last"||lr===3)return"".concat(pr,"last")}(ft),Wt=function(){return(ht==null?void 0:ht.length)>0&&(st==null?void 0:st.length)>0?"".concat(ht,": ").concat(st):(ht==null?void 0:ht.length)>0&&(typeof st>"u"||(st==null?void 0:st.length)===0)?ht:null}(),nr=(et=(tt=$t??Lt)!==null&&tt!==void 0?tt:kt)!==null&&et!==void 0?et:Nt,Jt=nr??function(){var lr=gt??St,pr=mt??at,Zt=pr??Tt,Kt=_typeof$9(Zt)==="object"?getComponentName(Zt):"";if(lr==="html"&&Kt!=="Message.CustomContent")return React.createElement(MessageHtmlContent,{html:Zt});if(lr==="text")return React.createElement(MessageTextContent,{text:Zt});if(lr==="image")return React.createElement(MessageImageContent,Zt);if(lr==="custom"||Kt==="Message.CustomContent")return Zt}();return React.createElement("section",_extends$f({},Et,{"aria-label":Wt,className:classNames(At,Vt,_defineProperty$8({},"".concat(At,"--avatar-spacer"),yt),Xt,zt,Ct)},_defineProperty$8({},"data-".concat(prefix,"-message"),"")),typeof It<"u"&&React.createElement("div",{className:"".concat(At,"__avatar")},It),React.createElement("div",{className:"".concat(At,"__content-wrapper")},Mt,React.createElement("div",{className:"".concat(At,"__content")},Jt),Ot))};Message.Header=MessageHeader;Message.HtmlContent=MessageHtmlContent;Message.TextContent=MessageTextContent;Message.ImageContent=MessageImageContent;Message.CustomContent=MessageCustomContent;Message.Footer=MessageFooter;var _excluded$e=["children","className"];function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$e.apply(this,arguments)}function _objectWithoutProperties$e(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$e(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$e(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var MessageGroupHeader=function _e(_){var et=_.children,tt=et===void 0?void 0:et,nt=_.className,it=_objectWithoutProperties$e(_,_excluded$e),at="".concat(prefix,"-message-group__header");return React.createElement("div",_extends$e({},it,{className:classNames(at,nt)}),tt)};MessageGroupHeader.displayName="MessageGroup.Header";var _excluded$d=["children","className"];function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$d.apply(this,arguments)}function _objectWithoutProperties$d(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$d(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$d(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var MessageGroupFooter=function _e(_){var et=_.children,tt=et===void 0?void 0:et,nt=_.className,it=_objectWithoutProperties$d(_,_excluded$d),at="".concat(prefix,"-message-group__footer");return React.createElement("div",_extends$d({},it,{className:classNames(at,nt)}),tt)};MessageGroupFooter.displayName="MessageGroup.Footer";var _excluded$c=["children","className"];function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$c.apply(this,arguments)}function _objectWithoutProperties$c(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$c(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$c(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var MessageGroupMessages=function _e(_){var et=_.children,tt=et===void 0?void 0:et,nt=_.className,it=_objectWithoutProperties$c(_,_excluded$c),at="".concat(prefix,"-message-group");return React.createElement("div",_extends$c({},it,{className:classNames("".concat(at,"__messages"),nt)}),tt)};MessageGroupMessages.displayName="MessageGroup.Messages";function _typeof$8(_e){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$8(_e)}var _excluded$b=["direction","avatarPosition","sender","sentTime","children","className"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$b.apply(this,arguments)}function _defineProperty$7(_e,_,et){return _=_toPropertyKey$7(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$7(_e){var _=_toPrimitive$7(_e,"string");return _typeof$8(_)=="symbol"?_:String(_)}function _toPrimitive$7(_e,_){if(_typeof$8(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$8(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _slicedToArray$4(_e,_){return _arrayWithHoles$4(_e)||_iterableToArrayLimit$4(_e,_)||_unsupportedIterableToArray$4(_e,_)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray$4(_e,_);var et=Object.prototype.toString.call(_e).slice(8,-1);if(et==="Object"&&_e.constructor&&(et=_e.constructor.name),et==="Map"||et==="Set")return Array.from(_e);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray$4(_e,_)}}function _arrayLikeToArray$4(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var et=0,tt=new Array(_);et<_;et++)tt[et]=_e[et];return tt}function _iterableToArrayLimit$4(_e,_){var et=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(et!=null){var tt,nt,it,at,ot=[],st=!0,dt=!1;try{if(it=(et=et.call(_e)).next,_!==0)for(;!(st=(tt=it.call(et)).done)&&(ot.push(tt.value),ot.length!==_);st=!0);}catch(ht){dt=!0,nt=ht}finally{try{if(!st&&et.return!=null&&(at=et.return(),Object(at)!==at))return}finally{if(dt)throw nt}}return ot}}function _arrayWithHoles$4(_e){if(Array.isArray(_e))return _e}function _objectWithoutProperties$b(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$b(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$b(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var MessageGroup=function _e(_){var et=_.direction,tt=et===void 0?"incoming":et,nt=_.avatarPosition,it=nt===void 0?void 0:nt,at=_.sender,ot=at===void 0?"":at,st=_.sentTime,dt=st===void 0?"":st,ht=_.children,ct=_.className,ut=_objectWithoutProperties$b(_,_excluded$b),ft="".concat(prefix,"-message-group"),gt=function(){if(tt===0||tt==="incoming")return"".concat(ft,"--incoming");if(tt===1||tt==="outgoing")return"".concat(ft,"--outgoing")}(),mt=function(){var wt="".concat(ft,"--avatar-");if(typeof it=="string"&&(it==="tl"||it==="top-left"||it==="tr"||it==="top-right"||it==="bl"||it==="bottom-right"||it==="br"||it==="bottom-right"||it==="cl"||it==="center-left"||it==="cr"||it==="center-right"))return"".concat(wt).concat(it)}(),vt=getChildren(ht,[Avatar,MessageGroupHeader,MessageGroupFooter,MessageGroupMessages]),yt=_slicedToArray$4(vt,4),bt=yt[0],_t=yt[1],xt=yt[2],St=yt[3],Tt=function(){return ot.length>0&&dt.length>0?"".concat(ot,": ").concat(dt):ot.length>0&&dt.length===0?ot:null}();return React.createElement("section",_extends$b({"aria-label":Tt},ut,{className:classNames(ft,gt,mt,ct)},_defineProperty$7({},"data-".concat(prefix,"-message-group"),"")),typeof bt<"u"&&React.createElement("div",{className:"".concat(ft,"__avatar")},bt),React.createElement("div",{className:"".concat(ft,"__content")},_t,St,xt))};MessageGroup.Header=MessageGroupHeader;MessageGroup.Footer=MessageGroupFooter;MessageGroup.Messages=MessageGroupMessages;var _excluded$a=["content","as","children","className"];function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$a.apply(this,arguments)}function _objectWithoutProperties$a(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$a(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$a(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var MessageSeparator=function _e(_){var et=_.content,tt=et===void 0?void 0:et,nt=_.as,it=nt===void 0?"div":nt,at=_.children,ot=at===void 0?void 0:at,st=_.className,dt=_objectWithoutProperties$a(_,_excluded$a),ht="".concat(prefix,"-message-separator"),ct=function(){return typeof it=="string"&&it.length>0?it:"div"}();return React.createElement(ct,_extends$a({},dt,{className:classNames(ht,st)}),isChildrenNil(ot)===!0?tt:ot)},_excluded$9=["className","children"];function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$9.apply(this,arguments)}function _objectWithoutProperties$9(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$9(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$9(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var MessageListContent=function _e(_){var et=_.className,tt=_.children,nt=_objectWithoutProperties$9(_,_excluded$9);return React.createElement("div",_extends$9({},nt,{className:et}),tt)};MessageListContent.displayName="MessageList.Content";var _excluded$8=["children","typingIndicator","loading","loadingMore","loadingMorePosition","onYReachStart","onYReachEnd","className","disableOnYReachWhenNoScroll","scrollBehavior","autoScrollToBottom","autoScrollToBottomOnMount"];function _typeof$7(_e){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$7(_e)}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$8.apply(this,arguments)}function _slicedToArray$3(_e,_){return _arrayWithHoles$3(_e)||_iterableToArrayLimit$3(_e,_)||_unsupportedIterableToArray$3(_e,_)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray$3(_e,_);var et=Object.prototype.toString.call(_e).slice(8,-1);if(et==="Object"&&_e.constructor&&(et=_e.constructor.name),et==="Map"||et==="Set")return Array.from(_e);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray$3(_e,_)}}function _arrayLikeToArray$3(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var et=0,tt=new Array(_);et<_;et++)tt[et]=_e[et];return tt}function _iterableToArrayLimit$3(_e,_){var et=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(et!=null){var tt,nt,it,at,ot=[],st=!0,dt=!1;try{if(it=(et=et.call(_e)).next,_!==0)for(;!(st=(tt=it.call(et)).done)&&(ot.push(tt.value),ot.length!==_);st=!0);}catch(ht){dt=!0,nt=ht}finally{try{if(!st&&et.return!=null&&(at=et.return(),Object(at)!==at))return}finally{if(dt)throw nt}}return ot}}function _arrayWithHoles$3(_e){if(Array.isArray(_e))return _e}function _objectWithoutProperties$8(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$8(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$8(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}function _classCallCheck$2(_e,_){if(!(_e instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(_e,_){for(var et=0;et<_.length;et++){var tt=_[et];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty(_e,_toPropertyKey$6(tt.key),tt)}}function _createClass$2(_e,_,et){return _defineProperties$2(_e.prototype,_),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$2(_e,_,et){return _=_getPrototypeOf$2(_),_possibleConstructorReturn$2(_e,_isNativeReflectConstruct$2()?Reflect.construct(_,et,_getPrototypeOf$2(_e).constructor):_.apply(_e,et))}function _possibleConstructorReturn$2(_e,_){if(_&&(_typeof$7(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(_e)}function _isNativeReflectConstruct$2(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$2=function(){return!!_e})()}function _getPrototypeOf$2(_e){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(et){return et.__proto__||Object.getPrototypeOf(et)},_getPrototypeOf$2(_e)}function _assertThisInitialized$2(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$2(_e,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(_&&_.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),_&&_setPrototypeOf$2(_e,_)}function _setPrototypeOf$2(_e,_){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,nt){return tt.__proto__=nt,tt},_setPrototypeOf$2(_e,_)}function _defineProperty$6(_e,_,et){return _=_toPropertyKey$6(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$6(_e){var _=_toPrimitive$6(_e,"string");return _typeof$7(_)=="symbol"?_:String(_)}function _toPrimitive$6(_e,_){if(_typeof$7(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$7(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}var MessageListInner=function(_e){_inherits$2(_,_e);function _(et){var tt;return _classCallCheck$2(this,_),tt=_callSuper$2(this,_,[et]),_defineProperty$6(_assertThisInitialized$2(tt),"handleResize",function(){tt.containerRef.current.clientHeight<tt.lastClientHeight&&tt.scrollToEnd(tt.props.scrollBehavior),tt.scrollRef.current.updateScroll()}),_defineProperty$6(_assertThisInitialized$2(tt),"handleContainerResize",function(){tt.resizeTicking===!1&&(window.requestAnimationFrame(function(){var nt=tt.containerRef.current;if(nt){var it=nt.clientHeight,at=it-tt.lastClientHeight;at>=1?tt.preventScrollTop===!1&&(nt.scrollTop=Math.round(nt.scrollTop)-at):nt.scrollTop=nt.scrollTop-at,tt.lastClientHeight=nt.clientHeight,tt.scrollRef.current.updateScroll()}tt.resizeTicking=!1}),tt.resizeTicking=!0)}),_defineProperty$6(_assertThisInitialized$2(tt),"isSticked",function(){var nt=tt.containerRef.current;return nt.scrollHeight===Math.round(nt.scrollTop+nt.clientHeight)}),_defineProperty$6(_assertThisInitialized$2(tt),"handleScroll",function(){tt.scrollTicking===!1&&(window.requestAnimationFrame(function(){tt.noScroll===!1?tt.preventScrollTop=tt.isSticked():tt.noScroll=!1,tt.scrollTicking=!1}),tt.scrollTicking=!0)}),_defineProperty$6(_assertThisInitialized$2(tt),"getLastMessageOrGroup",function(){var nt=tt.containerRef.current.querySelector("[data-".concat(prefix,"-message-list]>[data-").concat(prefix,"-message]:last-of-type,[data-").concat(prefix,"-message-list]>[data-").concat(prefix,"-message-group]:last-of-type")),it=nt==null?void 0:nt.querySelector("[data-".concat(prefix,"-message]:last-of-type"));return{lastElement:nt,lastMessageInGroup:it}}),tt.scrollPointRef=React.createRef(),tt.containerRef=React.createRef(),tt.scrollRef=React.createRef(),tt.lastClientHeight=0,tt.preventScrollTop=!1,tt.resizeObserver=void 0,tt.scrollTicking=!1,tt.resizeTicking=!1,tt.noScroll=void 0,tt}return _createClass$2(_,[{key:"getSnapshotBeforeUpdate",value:function(){var tt=this.containerRef.current,nt=Math.round(tt.scrollTop+tt.clientHeight),it=tt.scrollHeight===nt||tt.scrollHeight+1===nt||tt.scrollHeight-1===nt;return{sticky:it,clientHeight:tt.clientHeight,scrollHeight:tt.scrollHeight,lastMessageOrGroup:this.getLastMessageOrGroup(),diff:tt.scrollHeight-tt.scrollTop}}},{key:"componentDidMount",value:function(){this.props.autoScrollToBottomOnMount===!0&&this.scrollToEnd(this.props.scrollBehavior),this.lastClientHeight=this.containerRef.current.clientHeight,window.addEventListener("resize",this.handleResize),typeof window.ResizeObserver=="function"&&(this.resizeObserver=new ResizeObserver(this.handleContainerResize),this.resizeObserver.observe(this.containerRef.current)),this.containerRef.current.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(tt,nt,it){var at=this.props.autoScrollToBottom;if(typeof it<"u"){var ot=this.containerRef.current,st=this.getLastMessageOrGroup(),dt=st.lastElement,ht=st.lastMessageInGroup;if(dt===it.lastMessageOrGroup.lastElement&&(typeof ht>"u"||ht===it.lastMessageOrGroup.lastMessageInGroup)&&(ot.scrollTop=ot.scrollHeight-it.diff+(this.lastClientHeight-ot.clientHeight)),it.sticky===!0)at===!0&&this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0;else if(it.clientHeight<this.lastClientHeight){var ct=ot.scrollTop+this.lastClientHeight;ot.scrollHeight===ct||ot.scrollHeight+1===ct||ot.scrollHeight-1===ct?at===!0&&(this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0):this.preventScrollTop=!1}else this.preventScrollTop=!1,dt===it.lastMessageOrGroup.lastElement&&(typeof ht>"u"||ht===it.lastMessageOrGroup.lastMessageInGroup)&&ot.scrollTop===0&&ot.scrollHeight>it.scrollHeight&&(ot.scrollTop=ot.scrollHeight-it.scrollHeight);this.lastClientHeight=it.clientHeight}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),typeof this.resizeObserver<"u"&&this.resizeObserver.disconnect(),this.containerRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollToEnd",value:function(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollBehavior,nt=this.containerRef.current,it=this.scrollPointRef.current,at=nt.getBoundingClientRect(),ot=it.getBoundingClientRect(),st=ot.top+nt.scrollTop-at.top;nt.scrollBy?nt.scrollBy({top:st,behavior:tt}):nt.scrollTop=st,this.lastClientHeight=nt.clientHeight,this.noScroll=!0}},{key:"render",value:function(){var tt=this,nt=this.props,it=nt.children,at=nt.typingIndicator,ot=nt.loading,st=nt.loadingMore,dt=nt.loadingMorePosition,ht=nt.onYReachStart,ct=nt.onYReachEnd,ut=nt.className,ft=nt.disableOnYReachWhenNoScroll;nt.scrollBehavior,nt.autoScrollToBottom,nt.autoScrollToBottomOnMount;var gt=_objectWithoutProperties$8(nt,_excluded$8),mt="".concat(prefix,"-message-list"),vt=getChildren(it,[MessageListContent]),yt=_slicedToArray$3(vt,1),bt=yt[0];return React.createElement("div",_extends$8({},gt,{className:classNames(mt,ut)}),st&&React.createElement("div",{className:classNames("".concat(mt,"__loading-more"),_defineProperty$6({},"".concat(mt,"__loading-more--bottom"),dt==="bottom"))},React.createElement(Loader,null)),ot&&React.createElement(Overlay,null,React.createElement(Loader,null)),React.createElement(ScrollBar,_extends$8({onYReachStart:ht,onYReachEnd:ct,onSync:function(xt){return xt.update(ft)},className:"".concat(mt,"__scroll-wrapper"),ref:this.scrollRef,containerRef:function(xt){return tt.containerRef.current=xt},options:{suppressScrollX:!0}},_defineProperty$6({},"data-".concat(prefix,"-message-list"),""),{style:{overscrollBehaviorY:"none",overflowAnchor:"auto",touchAction:"none"}}),bt||it,React.createElement("div",{className:"".concat(mt,"__scroll-to"),ref:this.scrollPointRef})),typeof at<"u"&&React.createElement("div",{className:"".concat(mt,"__typing-indicator-container")},at))}}]),_}(React.Component);MessageListInner.displayName="MessageList";function MessageListFunc(_e,_){var et=reactExports.useRef(),tt=function(it){return et.current.scrollToEnd(it)};return reactExports.useImperativeHandle(_,function(){return{scrollToBottom:tt}}),React.createElement(MessageListInner,_extends$8({ref:et},_e))}var MessageList$1=reactExports.forwardRef(MessageListFunc);MessageList$1.propTypes={children:allowedChildren([Message,MessageGroup,MessageSeparator,MessageListContent]),typingIndicator:PropTypes.node,loading:PropTypes.bool,loadingMore:PropTypes.bool,loadingMorePosition:PropTypes.oneOf(["top","bottom"]),onYReachStart:PropTypes.func,onYReachEnd:PropTypes.func,disableOnYReachWhenNoScroll:PropTypes.bool,autoScrollToBottom:PropTypes.bool,autoScrollToBottomOnMount:PropTypes.bool,scrollBehavior:PropTypes.oneOf(["auto","smooth"]),className:PropTypes.string};MessageList$1.defaultProps={typingIndicator:void 0,loading:!1,loadingMore:!1,loadingMorePosition:"top",disableOnYReachWhenNoScroll:!1,autoScrollToBottom:!0,autoScrollToBottomOnMount:!0,scrollBehavior:"auto"};MessageListInner.defaultProps=MessageList$1.defaultProps;MessageList$1.Content=MessageListContent;function _typeof$6(_e){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$6(_e)}function _classCallCheck$1(_e,_){if(!(_e instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(_e,_){for(var et=0;et<_.length;et++){var tt=_[et];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty(_e,_toPropertyKey$5(tt.key),tt)}}function _createClass$1(_e,_,et){return _defineProperties$1(_e.prototype,_),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$1(_e,_,et){return _=_getPrototypeOf$1(_),_possibleConstructorReturn$1(_e,_isNativeReflectConstruct$1()?Reflect.construct(_,et,_getPrototypeOf$1(_e).constructor):_.apply(_e,et))}function _possibleConstructorReturn$1(_e,_){if(_&&(_typeof$6(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(_e)}function _isNativeReflectConstruct$1(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$1=function(){return!!_e})()}function _getPrototypeOf$1(_e){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(et){return et.__proto__||Object.getPrototypeOf(et)},_getPrototypeOf$1(_e)}function _assertThisInitialized$1(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$1(_e,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(_&&_.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),_&&_setPrototypeOf$1(_e,_)}function _setPrototypeOf$1(_e,_){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,nt){return tt.__proto__=nt,tt},_setPrototypeOf$1(_e,_)}function _defineProperty$5(_e,_,et){return _=_toPropertyKey$5(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$5(_e){var _=_toPrimitive$5(_e,"string");return _typeof$6(_)=="symbol"?_:String(_)}function _toPrimitive$5(_e,_){if(_typeof$6(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$6(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}var replaceCaret=function _e(_,et){var tt=document.activeElement===_,nt=document.createTextNode("");if(_.appendChild(nt),nt!==null&&nt.nodeValue!==null&&(tt||et)){var it=window.getSelection();if(it!==null){var at=document.createRange();at.setStart(nt,nt.nodeValue.length),at.collapse(!0),it.removeAllRanges(),it.addRange(at)}}},ContentEditable=function(_e){_inherits$1(_,_e);function _(et){var tt;return _classCallCheck$1(this,_),tt=_callSuper$1(this,_,[et]),_defineProperty$5(_assertThisInitialized$1(tt),"innerHTML",function(){var nt=_assertThisInitialized$1(tt),it=nt.props.value;return{__html:typeof it<"u"?it:""}}),_defineProperty$5(_assertThisInitialized$1(tt),"handleKeyPress",function(nt){var it=_assertThisInitialized$1(tt),at=it.props.onKeyPress;at==null||at(nt)}),_defineProperty$5(_assertThisInitialized$1(tt),"handleInput",function(nt){var it=_assertThisInitialized$1(tt),at=it.props.onChange,ot=nt.target;at==null||at(ot.innerHTML,ot.textContent,ot.innerText)}),tt.msgRef=React.createRef(),tt}return _createClass$1(_,[{key:"focus",value:function(){typeof this.msgRef.current<"u"&&this.msgRef.current.focus()}},{key:"componentDidMount",value:function(){this.props.autoFocus===!0&&this.msgRef.current.focus()}},{key:"shouldComponentUpdate",value:function(tt){var nt=this.msgRef,it=this.props,at=it.placeholder,ot=it.disabled,st=it.activateAfterChange;return typeof nt.current>"u"||tt.value!==nt.current.innerHTML?!0:at!==tt.placeholder||ot!==tt.disabled||st!==tt.activateAfterChange}},{key:"componentDidUpdate",value:function(){var tt=this.msgRef,nt=this.props,it=nt.value,at=nt.activateAfterChange;it!==tt.current.innerHTML&&(tt.current.innerHTML=typeof it=="string"?it:""),replaceCaret(tt.current,at)}},{key:"render",value:function(){var tt=this.msgRef,nt=this.handleInput,it=this.handleKeyPress,at=this.innerHTML,ot=this.props,st=ot.placeholder,dt=ot.disabled,ht=ot.className,ct=typeof st=="string"?st:"";return React.createElement("div",{ref:tt,className:ht,contentEditable:dt===!1,disabled:dt,"data-placeholder":ct,onInput:nt,onKeyPress:it,dangerouslySetInnerHTML:at()})}}]),_}(reactExports.Component);function _typeof$5(_e){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$5(_e)}var _excluded$7=["fancyScroll","children","forwardedRef"],_excluded2=["value","onSend","onChange","autoFocus","placeholder","fancyScroll","className","activateAfterChange","disabled","sendDisabled","sendOnReturnDisabled","attachDisabled","sendButton","attachButton","onAttachClick"];function _defineProperty$4(_e,_,et){return _=_toPropertyKey$4(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _slicedToArray$2(_e,_){return _arrayWithHoles$2(_e)||_iterableToArrayLimit$2(_e,_)||_unsupportedIterableToArray$2(_e,_)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray$2(_e,_);var et=Object.prototype.toString.call(_e).slice(8,-1);if(et==="Object"&&_e.constructor&&(et=_e.constructor.name),et==="Map"||et==="Set")return Array.from(_e);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray$2(_e,_)}}function _arrayLikeToArray$2(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var et=0,tt=new Array(_);et<_;et++)tt[et]=_e[et];return tt}function _iterableToArrayLimit$2(_e,_){var et=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(et!=null){var tt,nt,it,at,ot=[],st=!0,dt=!1;try{if(it=(et=et.call(_e)).next,_!==0)for(;!(st=(tt=it.call(et)).done)&&(ot.push(tt.value),ot.length!==_);st=!0);}catch(ht){dt=!0,nt=ht}finally{try{if(!st&&et.return!=null&&(at=et.return(),Object(at)!==at))return}finally{if(dt)throw nt}}return ot}}function _arrayWithHoles$2(_e){if(Array.isArray(_e))return _e}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$7.apply(this,arguments)}function _objectWithoutProperties$7(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$7(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$7(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}function _classCallCheck(_e,_){if(!(_e instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_e,_){for(var et=0;et<_.length;et++){var tt=_[et];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty(_e,_toPropertyKey$4(tt.key),tt)}}function _createClass(_e,_,et){return _defineProperties(_e.prototype,_),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _toPropertyKey$4(_e){var _=_toPrimitive$4(_e,"string");return _typeof$5(_)=="symbol"?_:String(_)}function _toPrimitive$4(_e,_){if(_typeof$5(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$5(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _callSuper(_e,_,et){return _=_getPrototypeOf(_),_possibleConstructorReturn(_e,_isNativeReflectConstruct()?Reflect.construct(_,et||[],_getPrototypeOf(_e).constructor):_.apply(_e,et))}function _possibleConstructorReturn(_e,_){if(_&&(_typeof$5(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(_e)}function _assertThisInitialized(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!_e})()}function _getPrototypeOf(_e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(et){return et.__proto__||Object.getPrototypeOf(et)},_getPrototypeOf(_e)}function _inherits(_e,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(_&&_.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),_&&_setPrototypeOf(_e,_)}function _setPrototypeOf(_e,_){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,nt){return tt.__proto__=nt,tt},_setPrototypeOf(_e,_)}function editorContainer(){var _e=function(_){_inherits(et,_);function et(){return _classCallCheck(this,et),_callSuper(this,et,arguments)}return _createClass(et,[{key:"render",value:function(){var nt=this.props,it=nt.fancyScroll,at=nt.children,ot=nt.forwardedRef,st=_objectWithoutProperties$7(nt,_excluded$7);return React.createElement(React.Fragment,null,it===!0&&React.createElement(ScrollBar,_extends$7({ref:function(ht){return ot.current=ht}},st,{options:{suppressScrollX:!0}}),at),it===!1&&React.createElement("div",_extends$7({ref:ot},st),at))}}]),et}(reactExports.Component);return React.forwardRef(function(_,et){return React.createElement(_e,_extends$7({forwardedRef:et},_))})}var EditorContainer=editorContainer(),useControllableState=function _e(_,et){var tt=typeof _<"u"?_:et,nt=reactExports.useState(tt),it=_slicedToArray$2(nt,2),at=it[0],ot=it[1],st=typeof _<"u"?_:at;return[st,function(dt){ot(dt)}]};function MessageInputInner(_e,_){var et=_e.value,tt=et===void 0?void 0:et,nt=_e.onSend,it=nt===void 0?noop$2:nt,at=_e.onChange,ot=at===void 0?noop$2:at,st=_e.autoFocus,dt=st===void 0?!1:st,ht=_e.placeholder,ct=ht===void 0?"":ht,ut=_e.fancyScroll,ft=ut===void 0?!0:ut,gt=_e.className,mt=_e.activateAfterChange,vt=mt===void 0?!1:mt,yt=_e.disabled,bt=yt===void 0?!1:yt,_t=_e.sendDisabled,xt=_e.sendOnReturnDisabled,St=xt===void 0?!1:xt,Tt=_e.attachDisabled,wt=Tt===void 0?!1:Tt,Ct=_e.sendButton,Et=Ct===void 0?!0:Ct,At=_e.attachButton,Pt=At===void 0?!0:At,Rt=_e.onAttachClick,It=Rt===void 0?noop$2:Rt,Mt=_objectWithoutProperties$7(_e,_excluded2),Ot=reactExports.useRef(),$t=reactExports.useRef(),Lt=useControllableState(tt,""),kt=_slicedToArray$2(Lt,2),Nt=kt[0],Vt=kt[1],zt=useControllableState(_t,!0),Xt=_slicedToArray$2(zt,2),Wt=Xt[0],nr=Xt[1],Jt=function(){typeof $t.current<"u"&&$t.current.focus()};reactExports.useImperativeHandle(_,function(){return{focus:Jt}}),reactExports.useEffect(function(){dt===!0&&Jt()},[]),reactExports.useEffect(function(){typeof Ot.current.updateScroll=="function"&&Ot.current.updateScroll()});var lr=function(){var fr=$t.current.msgRef.current;return[fr.textContent,fr.innerText,fr.cloneNode(!0).childNodes]},pr=function(){if(Nt.length>0){tt===void 0&&Vt(""),typeof _t>"u"&&nr(!0);var fr=lr();it(Nt,fr[0],fr[1],fr[2])}},Zt=function(fr){fr.key==="Enter"&&fr.shiftKey===!1&&St===!1&&(fr.preventDefault(),pr())},Kt=function(fr,mr,br){Vt(fr),typeof _t>"u"&&nr(mr.length===0),typeof Ot.current.updateScroll=="function"&&Ot.current.updateScroll();var Er=lr();ot(fr,mr,br,Er[2])},ur="".concat(prefix,"-message-input"),ir=typeof ct=="string"?ct:"";return React.createElement("div",_extends$7({},Mt,{className:classNames(ur,_defineProperty$4({},"".concat(ur,"--disabled"),bt),gt)}),Pt===!0&&React.createElement("div",{className:"".concat(ur,"__tools")},React.createElement(AttachmentButton,{onClick:It,disabled:bt===!0||wt===!0})),React.createElement("div",{className:"".concat(ur,"__content-editor-wrapper")},React.createElement(EditorContainer,{fancyScroll:ft,ref:Ot,className:"".concat(ur,"__content-editor-container")},React.createElement(ContentEditable,{ref:$t,className:"".concat(ur,"__content-editor"),disabled:bt,placeholder:ir,onKeyPress:Zt,onChange:Kt,activateAfterChange:vt,value:Nt}))),Et===!0&&React.createElement("div",{className:"".concat(ur,"__tools")},React.createElement(SendButton,{onClick:pr,disabled:bt===!0||Wt===!0})))}var MessageInput$1=reactExports.forwardRef(MessageInputInner);MessageInput$1.displayName="MessageInput";MessageInput$1.propTypes={value:PropTypes.string,placeholder:PropTypes.string,disabled:PropTypes.bool,sendOnReturnDisabled:PropTypes.bool,sendDisabled:PropTypes.bool,fancyScroll:PropTypes.bool,activateAfterChange:PropTypes.bool,autoFocus:PropTypes.bool,onChange:PropTypes.func,onSend:PropTypes.func,className:PropTypes.string,sendButton:PropTypes.bool,attachButton:PropTypes.bool,attachDisabled:PropTypes.bool,onAttachClick:PropTypes.func};var _excluded$6=["className","children"];function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$6.apply(this,arguments)}function _objectWithoutProperties$6(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$6(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$6(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var InputToolbox=function _e(_){var et=_.className,tt=_.children,nt=_objectWithoutProperties$6(_,_excluded$6),it="".concat(prefix,"-input-toolbox");return React.createElement("div",_extends$6({},nt,{className:classNames(it,et)}),tt)};InputToolbox.displayName="InputToolbox";var _excluded$5=["children","className"];function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$5.apply(this,arguments)}function _slicedToArray$1(_e,_){return _arrayWithHoles$1(_e)||_iterableToArrayLimit$1(_e,_)||_unsupportedIterableToArray$1(_e,_)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray$1(_e,_);var et=Object.prototype.toString.call(_e).slice(8,-1);if(et==="Object"&&_e.constructor&&(et=_e.constructor.name),et==="Map"||et==="Set")return Array.from(_e);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray$1(_e,_)}}function _arrayLikeToArray$1(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var et=0,tt=new Array(_);et<_;et++)tt[et]=_e[et];return tt}function _iterableToArrayLimit$1(_e,_){var et=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(et!=null){var tt,nt,it,at,ot=[],st=!0,dt=!1;try{if(it=(et=et.call(_e)).next,_!==0)for(;!(st=(tt=it.call(et)).done)&&(ot.push(tt.value),ot.length!==_);st=!0);}catch(ht){dt=!0,nt=ht}finally{try{if(!st&&et.return!=null&&(at=et.return(),Object(at)!==at))return}finally{if(dt)throw nt}}return ot}}function _arrayWithHoles$1(_e){if(Array.isArray(_e))return _e}function _objectWithoutProperties$5(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$5(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$5(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var ChatContainer=function _e(_){var et=_.children,tt=et===void 0?void 0:et,nt=_.className,it=_objectWithoutProperties$5(_,_excluded$5),at="".concat(prefix,"-chat-container"),ot=getChildren(tt,[ConversationHeader,MessageList$1,MessageInput$1,InputToolbox]),st=_slicedToArray$1(ot,4),dt=st[0],ht=st[1],ct=st[2],ut=st[3];return React.createElement("div",_extends$5({},it,{className:classNames(at,nt)}),dt,ht,ct,ut)},cName="".concat(prefix,"-conversation");function _typeof$4(_e){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$4(_e)}var _excluded$4=["children","className","visible"];function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$4.apply(this,arguments)}function _defineProperty$3(_e,_,et){return _=_toPropertyKey$3(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$3(_e){var _=_toPrimitive$3(_e,"string");return _typeof$4(_)=="symbol"?_:String(_)}function _toPrimitive$3(_e,_){if(_typeof$4(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$4(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _objectWithoutProperties$4(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$4(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$4(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var ConversationOperations=function _e(_){var et=_.children,tt=_.className,nt=_.visible,it=_objectWithoutProperties$4(_,_excluded$4);return React.createElement("div",_extends$4({},it,{className:classNames("".concat(cName,"__operations"),_defineProperty$3({},"".concat(cName,"__operations--visible"),nt),tt)}),React.Children.count(et)>0?et:React.createElement(FontAwesomeIcon,{icon:faEllipsisV.faEllipsisV}))};ConversationOperations.displayName="Conversation.Operations";var _excluded$3=["lastSenderName","info","name","children","className"];function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$3.apply(this,arguments)}function _typeof$3(_e){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$3(_e)}function _objectWithoutProperties$3(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$3(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$3(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var LastSenderName=function _e(_){var et=_.name;return React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(cName,"__last-sender")},et),":")},InfoContent=function _e(_){var et=_.info;return React.createElement("div",{className:"".concat(cName,"__info-content")},et)},ConversationContent=function _e(_){var et=_.lastSenderName,tt=_.info,nt=_.name,it=_.children,at=_.className,ot=_objectWithoutProperties$3(_,_excluded$3),st=_typeof$3(et);return React.createElement("div",_extends$3({},ot,{className:classNames("".concat(cName,"__content"),at)}),React.Children.count(it)>0?it:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(cName,"__name")},nt),React.createElement("div",{className:"".concat(cName,"__info")},st!=="undefined"?React.createElement(React.Fragment,null,st==="string"?React.createElement(LastSenderName,{name:et}):et," "):null,typeof tt<"u"&&React.createElement(InfoContent,{info:tt}))))};ConversationContent.displayName="Conversation.Content";function _typeof$2(_e){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$2(_e)}var _excluded$2=["responsive","children","className"];function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$2.apply(this,arguments)}function _defineProperty$2(_e,_,et){return _=_toPropertyKey$2(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$2(_e){var _=_toPrimitive$2(_e,"string");return _typeof$2(_)=="symbol"?_:String(_)}function _toPrimitive$2(_e,_){if(_typeof$2(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$2(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _objectWithoutProperties$2(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$2(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$2(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var MainContainer=function _e(_){var et=_.responsive,tt=et===void 0?!1:et,nt=_.children,it=nt===void 0?void 0:nt,at=_.className,ot=_objectWithoutProperties$2(_,_excluded$2),st="".concat(prefix,"-main-container");return React.createElement("div",_extends$2({},ot,{className:classNames(st,_defineProperty$2({},"".concat(st,"--responsive"),tt),at)}),it)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var faSearch={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},faTimes={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]};function _typeof$1(_e){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof$1(_e)}var _excluded$1=["placeholder","value","onChange","onClearClick","className","disabled"];function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends$1.apply(this,arguments)}function _defineProperty$1(_e,_,et){return _=_toPropertyKey$1(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey$1(_e){var _=_toPrimitive$1(_e,"string");return _typeof$1(_)=="symbol"?_:String(_)}function _toPrimitive$1(_e,_){if(_typeof$1(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof$1(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _slicedToArray(_e,_){return _arrayWithHoles(_e)||_iterableToArrayLimit(_e,_)||_unsupportedIterableToArray(_e,_)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray(_e,_);var et=Object.prototype.toString.call(_e).slice(8,-1);if(et==="Object"&&_e.constructor&&(et=_e.constructor.name),et==="Map"||et==="Set")return Array.from(_e);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray(_e,_)}}function _arrayLikeToArray(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var et=0,tt=new Array(_);et<_;et++)tt[et]=_e[et];return tt}function _iterableToArrayLimit(_e,_){var et=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(et!=null){var tt,nt,it,at,ot=[],st=!0,dt=!1;try{if(it=(et=et.call(_e)).next,_!==0)for(;!(st=(tt=it.call(et)).done)&&(ot.push(tt.value),ot.length!==_);st=!0);}catch(ht){dt=!0,nt=ht}finally{try{if(!st&&et.return!=null&&(at=et.return(),Object(at)!==at))return}finally{if(dt)throw nt}}return ot}}function _arrayWithHoles(_e){if(Array.isArray(_e))return _e}function _objectWithoutProperties$1(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose$1(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose$1(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}var useControlledOrNot=function _e(_,et){return typeof et>"u"?reactExports.useState(_):[et,function(){}]};function SearchInner(_e,_){var et=_e.placeholder,tt=et===void 0?"":et,nt=_e.value,it=nt===void 0?void 0:nt,at=_e.onChange,ot=at===void 0?function(){}:at,st=_e.onClearClick,dt=st===void 0?function(){}:st,ht=_e.className,ct=_e.disabled,ut=ct===void 0?!1:ct,ft=_objectWithoutProperties$1(_e,_excluded$1),gt="".concat(prefix,"-search"),mt=reactExports.useMemo(function(){return typeof it<"u"},[]),vt=useControlledOrNot("",it),yt=_slicedToArray(vt,2),bt=yt[0],_t=yt[1],xt=reactExports.useState(mt?bt.length>0:!1),St=_slicedToArray(xt,2),Tt=St[0],wt=St[1];if(mt!==typeof it<"u")throw"Search: Changing from controlled to uncontrolled component and vice versa is not allowed";var Ct=reactExports.useRef(void 0),Et=function(){typeof Ct.current<"u"&&Ct.current.focus()};reactExports.useImperativeHandle(_,function(){return{focus:Et}});var At=function(It){var Mt=It.target.value;wt(Mt.length>0),mt===!1&&_t(Mt),ot(Mt)},Pt=function(){mt===!1&&_t(""),wt(!1),dt()};return React.createElement("div",_extends$1({},ft,{className:classNames(gt,_defineProperty$1({},"".concat(gt,"--disabled"),ut),ht)}),React.createElement(FontAwesomeIcon,{icon:faSearch,className:"".concat(gt,"__search-icon")}),React.createElement("input",{ref:Ct,type:"text",className:"".concat(gt,"__input"),placeholder:tt,onChange:At,disabled:ut,value:bt}),React.createElement(FontAwesomeIcon,{icon:faTimes,className:classNames("".concat(gt,"__clear-icon"),_defineProperty$1({},"".concat(gt,"__clear-icon--active"),Tt)),onClick:Pt}))}var Search=reactExports.forwardRef(SearchInner);Search.displayName="Search";Search.propTypes={placeholder:PropTypes.string,value:PropTypes.string,onChange:PropTypes.func,onClearClick:PropTypes.func,className:PropTypes.string,disabled:PropTypes.bool};function _typeof(_e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_typeof(_e)}var _excluded=["className","children","size","selected","onChange","itemsTabIndex"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends.apply(this,arguments)}function _defineProperty(_e,_,et){return _=_toPropertyKey(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey(_e){var _=_toPrimitive(_e,"string");return _typeof(_)=="symbol"?_:String(_)}function _toPrimitive(_e,_){if(_typeof(_e)!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(_typeof(tt)!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _objectWithoutProperties(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose(_e,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose(_e,_){if(_e==null)return{};var et={},tt=Object.keys(_e),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(et[nt]=_e[nt]);return et}function StatusListInner(_e,_){var et=_e.className,tt=_e.children,nt=_e.size,it=_e.selected,at=_e.onChange,ot=at===void 0?noop$2:at,st=_e.itemsTabIndex,dt=_objectWithoutProperties(_e,_excluded),ht="".concat(prefix,"-status-list"),ct=reactExports.useRef();reactExports.useImperativeHandle(_,function(){return{focus:function(gt){var mt=Array.from(ct.current.querySelectorAll("li")),vt=mt.filter(function(yt){return yt.parentNode===ct.current});typeof vt[gt]<"u"&&vt[gt].focus()}}});var ut=st;return React.createElement("ul",_extends({ref:ct},dt,{className:classNames(ht,et,_defineProperty({},"".concat(ht,"--").concat(nt),nt))}),React.Children.map(tt,function(ft){var gt={};it&&(gt.selected=ft.props.status===it),ot&&(gt.onClick=function(yt){ot(ft.props.status),ft.onClick&&ft.onClick(yt)});var mt=function(bt){ot&&bt.key==="Enter"&&bt.shiftKey===!1&&bt.altKey===!1&&ot(ft.props.status)},vt=function(){if(typeof ut=="number")return ut>0?ut++:ut}();return React.createElement("li",{tabIndex:vt,onKeyPress:mt},React.cloneElement(ft,gt))}))}var StatusList=reactExports.forwardRef(StatusListInner);StatusList.displayName="StatusList";StatusList.propTypes={children:allowedChildren([Status]),selected:PropTypes.oneOf(StatusEnum),size:PropTypes.oneOf(SizeEnum),itemsTabIndex:PropTypes.number,className:PropTypes.string,onChange:PropTypes.func};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(_e,_){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,tt){et.__proto__=tt}||function(et,tt){for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])},extendStatics$1(_e,_)};function __extends$1(_e,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");extendStatics$1(_e,_);function et(){this.constructor=_e}_e.prototype=_===null?Object.create(_):(et.prototype=_.prototype,new et)}var Browser=function(){function _e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return _e}(),Env=function(){function _e(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return _e}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(_e,_){var et=_.browser,tt=_e.match(/Firefox\/([\d.]+)/),nt=_e.match(/MSIE\s([\d.]+)/)||_e.match(/Trident\/.+?rv:(([\d.]+))/),it=_e.match(/Edge?\/([\d.]+)/),at=/micromessenger/i.test(_e);tt&&(et.firefox=!0,et.version=tt[1]),nt&&(et.ie=!0,et.version=nt[1]),it&&(et.edge=!0,et.version=it[1],et.newEdge=+it[1].split(".")[0]>18),at&&(et.weChat=!0),_.svgSupported=typeof SVGRect<"u",_.touchEventsSupported="ontouchstart"in window&&!et.ie&&!et.edge,_.pointerEventsSupported="onpointerdown"in window&&(et.edge||et.ie&&+et.version>=11),_.domSupported=typeof document<"u";var ot=document.documentElement.style;_.transform3dSupported=(et.ie&&"transition"in ot||et.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in ot)&&!("OTransition"in ot),_.transformSupported=_.transform3dSupported||et.ie&&+et.version>=9}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(_e){var _={};if(typeof JSON>"u")return _;for(var et=0;et<_e.length;et++){var tt=String.fromCharCode(et+32),nt=(_e.charCodeAt(et)-OFFSET)/SCALE;_[tt]=nt}return _}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var _e,_;return function(et,tt){if(!_e){var nt=platformApi.createCanvas();_e=nt&&nt.getContext("2d")}if(_e)return _!==tt&&(_=_e.font=tt||DEFAULT_FONT),_e.measureText(et);et=et||"",tt=tt||DEFAULT_FONT;var it=/((?:\d+)?\.?\d*)px/.exec(tt),at=it&&+it[1]||DEFAULT_FONT_SIZE,ot=0;if(tt.indexOf("mono")>=0)ot=at*et.length;else for(var st=0;st<et.length;st++){var dt=DEFAULT_TEXT_WIDTH_MAP[et[st]];ot+=dt==null?at:dt*at}return{width:ot}}}(),loadImage:function(_e,_,et){var tt=new Image;return tt.onload=_,tt.onerror=et,tt.src=_e,tt}};function setPlatformAPI(_e){for(var _ in platformApi)_e[_]&&(platformApi[_]=_e[_])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(_e,_){return _e["[object "+_+"]"]=!0,_e},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(_e,_){return _e["[object "+_+"Array]"]=!0,_e},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var _e=[],_=0;_<arguments.length;_++)_e[_]=arguments[_];typeof console<"u"&&console.error.apply(console,_e)}function clone$4(_e){if(_e==null||typeof _e!="object")return _e;var _=_e,et=objToString.call(_e);if(et==="[object Array]"){if(!isPrimitive(_e)){_=[];for(var tt=0,nt=_e.length;tt<nt;tt++)_[tt]=clone$4(_e[tt])}}else if(TYPED_ARRAY[et]){if(!isPrimitive(_e)){var it=_e.constructor;if(it.from)_=it.from(_e);else{_=new it(_e.length);for(var tt=0,nt=_e.length;tt<nt;tt++)_[tt]=_e[tt]}}}else if(!BUILTIN_OBJECT[et]&&!isPrimitive(_e)&&!isDom(_e)){_={};for(var at in _e)_e.hasOwnProperty(at)&&at!==protoKey&&(_[at]=clone$4(_e[at]))}return _}function merge$1(_e,_,et){if(!isObject$4(_)||!isObject$4(_e))return et?clone$4(_):_e;for(var tt in _)if(_.hasOwnProperty(tt)&&tt!==protoKey){var nt=_e[tt],it=_[tt];isObject$4(it)&&isObject$4(nt)&&!isArray$1(it)&&!isArray$1(nt)&&!isDom(it)&&!isDom(nt)&&!isBuiltInObject(it)&&!isBuiltInObject(nt)&&!isPrimitive(it)&&!isPrimitive(nt)?merge$1(nt,it,et):(et||!(tt in _e))&&(_e[tt]=clone$4(_[tt]))}return _e}function mergeAll(_e,_){for(var et=_e[0],tt=1,nt=_e.length;tt<nt;tt++)et=merge$1(et,_e[tt],_);return et}function extend(_e,_){if(Object.assign)Object.assign(_e,_);else for(var et in _)_.hasOwnProperty(et)&&et!==protoKey&&(_e[et]=_[et]);return _e}function defaults(_e,_,et){for(var tt=keys(_),nt=0,it=tt.length;nt<it;nt++){var at=tt[nt];(et?_[at]!=null:_e[at]==null)&&(_e[at]=_[at])}return _e}var createCanvas=platformApi.createCanvas;function indexOf(_e,_){if(_e){if(_e.indexOf)return _e.indexOf(_);for(var et=0,tt=_e.length;et<tt;et++)if(_e[et]===_)return et}return-1}function inherits(_e,_){var et=_e.prototype;function tt(){}tt.prototype=_.prototype,_e.prototype=new tt;for(var nt in et)et.hasOwnProperty(nt)&&(_e.prototype[nt]=et[nt]);_e.prototype.constructor=_e,_e.superClass=_}function mixin(_e,_,et){if(_e="prototype"in _e?_e.prototype:_e,_="prototype"in _?_.prototype:_,Object.getOwnPropertyNames)for(var tt=Object.getOwnPropertyNames(_),nt=0;nt<tt.length;nt++){var it=tt[nt];it!=="constructor"&&(et?_[it]!=null:_e[it]==null)&&(_e[it]=_[it])}else defaults(_e,_,et)}function isArrayLike(_e){return!_e||typeof _e=="string"?!1:typeof _e.length=="number"}function each$f(_e,_,et){if(_e&&_)if(_e.forEach&&_e.forEach===nativeForEach)_e.forEach(_,et);else if(_e.length===+_e.length)for(var tt=0,nt=_e.length;tt<nt;tt++)_.call(et,_e[tt],tt,_e);else for(var it in _e)_e.hasOwnProperty(it)&&_.call(et,_e[it],it,_e)}function map$1(_e,_,et){if(!_e)return[];if(!_)return slice(_e);if(_e.map&&_e.map===nativeMap)return _e.map(_,et);for(var tt=[],nt=0,it=_e.length;nt<it;nt++)tt.push(_.call(et,_e[nt],nt,_e));return tt}function reduce(_e,_,et,tt){if(_e&&_){for(var nt=0,it=_e.length;nt<it;nt++)et=_.call(tt,et,_e[nt],nt,_e);return et}}function filter$1(_e,_,et){if(!_e)return[];if(!_)return slice(_e);if(_e.filter&&_e.filter===nativeFilter)return _e.filter(_,et);for(var tt=[],nt=0,it=_e.length;nt<it;nt++)_.call(et,_e[nt],nt,_e)&&tt.push(_e[nt]);return tt}function find(_e,_,et){if(_e&&_){for(var tt=0,nt=_e.length;tt<nt;tt++)if(_.call(et,_e[tt],tt,_e))return _e[tt]}}function keys(_e){if(!_e)return[];if(Object.keys)return Object.keys(_e);var _=[];for(var et in _e)_e.hasOwnProperty(et)&&_.push(et);return _}function bindPolyfill(_e,_){for(var et=[],tt=2;tt<arguments.length;tt++)et[tt-2]=arguments[tt];return function(){return _e.apply(_,et.concat(nativeSlice.call(arguments)))}}var bind$2=protoFunction&&isFunction$3(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(_e){for(var _=[],et=1;et<arguments.length;et++)_[et-1]=arguments[et];return function(){return _e.apply(this,_.concat(nativeSlice.call(arguments)))}}function isArray$1(_e){return Array.isArray?Array.isArray(_e):objToString.call(_e)==="[object Array]"}function isFunction$3(_e){return typeof _e=="function"}function isString$1(_e){return typeof _e=="string"}function isStringSafe(_e){return objToString.call(_e)==="[object String]"}function isNumber(_e){return typeof _e=="number"}function isObject$4(_e){var _=typeof _e;return _==="function"||!!_e&&_==="object"}function isBuiltInObject(_e){return!!BUILTIN_OBJECT[objToString.call(_e)]}function isTypedArray(_e){return!!TYPED_ARRAY[objToString.call(_e)]}function isDom(_e){return typeof _e=="object"&&typeof _e.nodeType=="number"&&typeof _e.ownerDocument=="object"}function isGradientObject(_e){return _e.colorStops!=null}function isImagePatternObject(_e){return _e.image!=null}function isRegExp(_e){return objToString.call(_e)==="[object RegExp]"}function eqNaN(_e){return _e!==_e}function retrieve(){for(var _e=[],_=0;_<arguments.length;_++)_e[_]=arguments[_];for(var et=0,tt=_e.length;et<tt;et++)if(_e[et]!=null)return _e[et]}function retrieve2(_e,_){return _e??_}function retrieve3(_e,_,et){return _e??_??et}function slice(_e){for(var _=[],et=1;et<arguments.length;et++)_[et-1]=arguments[et];return nativeSlice.apply(_e,_)}function normalizeCssArray$1(_e){if(typeof _e=="number")return[_e,_e,_e,_e];var _=_e.length;return _===2?[_e[0],_e[1],_e[0],_e[1]]:_===3?[_e[0],_e[1],_e[2],_e[1]]:_e}function assert(_e,_){if(!_e)throw new Error(_)}function trim$1(_e){return _e==null?null:typeof _e.trim=="function"?_e.trim():_e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(_e){_e[primitiveKey]=!0}function isPrimitive(_e){return _e[primitiveKey]}var MapPolyfill=function(){function _e(){this.data={}}return _e.prototype.delete=function(_){var et=this.has(_);return et&&delete this.data[_],et},_e.prototype.has=function(_){return this.data.hasOwnProperty(_)},_e.prototype.get=function(_){return this.data[_]},_e.prototype.set=function(_,et){return this.data[_]=et,this},_e.prototype.keys=function(){return keys(this.data)},_e.prototype.forEach=function(_){var et=this.data;for(var tt in et)et.hasOwnProperty(tt)&&_(et[tt],tt)},_e}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function _e(_){var et=isArray$1(_);this.data=maybeNativeMap();var tt=this;_ instanceof _e?_.each(nt):_&&each$f(_,nt);function nt(it,at){et?tt.set(it,at):tt.set(at,it)}}return _e.prototype.hasKey=function(_){return this.data.has(_)},_e.prototype.get=function(_){return this.data.get(_)},_e.prototype.set=function(_,et){return this.data.set(_,et),et},_e.prototype.each=function(_,et){this.data.forEach(function(tt,nt){_.call(et,tt,nt)})},_e.prototype.keys=function(){var _=this.data.keys();return isNativeMapSupported?Array.from(_):_},_e.prototype.removeKey=function(_){this.data.delete(_)},_e}();function createHashMap(_e){return new HashMap(_e)}function concatArray(_e,_){for(var et=new _e.constructor(_e.length+_.length),tt=0;tt<_e.length;tt++)et[tt]=_e[tt];for(var nt=_e.length,tt=0;tt<_.length;tt++)et[tt+nt]=_[tt];return et}function createObject(_e,_){var et;if(Object.create)et=Object.create(_e);else{var tt=function(){};tt.prototype=_e,et=new tt}return _&&extend(et,_),et}function disableUserSelect(_e){var _=_e.style;_.webkitUserSelect="none",_.userSelect="none",_.webkitTapHighlightColor="rgba(0,0,0,0)",_["-webkit-touch-callout"]="none"}function hasOwn(_e,_){return _e.hasOwnProperty(_)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,HashMap,RADIAN_TO_DEGREE,assert,bind:bind$2,clone:clone$4,concatArray,createCanvas,createHashMap,createObject,curry:curry$1,defaults,disableUserSelect,each:each$f,eqNaN,extend,filter:filter$1,find,guid,hasOwn,indexOf,inherits,isArray:isArray$1,isArrayLike,isBuiltInObject,isDom,isFunction:isFunction$3,isGradientObject,isImagePatternObject,isNumber,isObject:isObject$4,isPrimitive,isRegExp,isString:isString$1,isStringSafe,isTypedArray,keys,logError,map:map$1,merge:merge$1,mergeAll,mixin,noop,normalizeCssArray:normalizeCssArray$1,reduce,retrieve,retrieve2,retrieve3,setAsPrimitive,slice,trim:trim$1},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(_e,_){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,tt){et.__proto__=tt}||function(et,tt){for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])},extendStatics(_e,_)};function __extends(_e,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");extendStatics(_e,_);function et(){this.constructor=_e}_e.prototype=_===null?Object.create(_):(et.prototype=_.prototype,new et)}function create$2(_e,_){return _e==null&&(_e=0),_==null&&(_=0),[_e,_]}function copy$1(_e,_){return _e[0]=_[0],_e[1]=_[1],_e}function clone$3(_e){return[_e[0],_e[1]]}function set$1(_e,_,et){return _e[0]=_,_e[1]=et,_e}function add$1(_e,_,et){return _e[0]=_[0]+et[0],_e[1]=_[1]+et[1],_e}function scaleAndAdd$1(_e,_,et,tt){return _e[0]=_[0]+et[0]*tt,_e[1]=_[1]+et[1]*tt,_e}function sub(_e,_,et){return _e[0]=_[0]-et[0],_e[1]=_[1]-et[1],_e}function len(_e){return Math.sqrt(lenSquare(_e))}var length=len;function lenSquare(_e){return _e[0]*_e[0]+_e[1]*_e[1]}var lengthSquare=lenSquare;function mul$1(_e,_,et){return _e[0]=_[0]*et[0],_e[1]=_[1]*et[1],_e}function div(_e,_,et){return _e[0]=_[0]/et[0],_e[1]=_[1]/et[1],_e}function dot(_e,_){return _e[0]*_[0]+_e[1]*_[1]}function scale$2(_e,_,et){return _e[0]=_[0]*et,_e[1]=_[1]*et,_e}function normalize$3(_e,_){var et=len(_);return et===0?(_e[0]=0,_e[1]=0):(_e[0]=_[0]/et,_e[1]=_[1]/et),_e}function distance(_e,_){return Math.sqrt((_e[0]-_[0])*(_e[0]-_[0])+(_e[1]-_[1])*(_e[1]-_[1]))}var dist$1=distance;function distanceSquare(_e,_){return(_e[0]-_[0])*(_e[0]-_[0])+(_e[1]-_[1])*(_e[1]-_[1])}var distSquare=distanceSquare;function negate$1(_e,_){return _e[0]=-_[0],_e[1]=-_[1],_e}function lerp$1(_e,_,et,tt){return _e[0]=_[0]+tt*(et[0]-_[0]),_e[1]=_[1]+tt*(et[1]-_[1]),_e}function applyTransform$1(_e,_,et){var tt=_[0],nt=_[1];return _e[0]=et[0]*tt+et[2]*nt+et[4],_e[1]=et[1]*tt+et[3]*nt+et[5],_e}function min$1(_e,_,et){return _e[0]=Math.min(_[0],et[0]),_e[1]=Math.min(_[1],et[1]),_e}function max$1(_e,_,et){return _e[0]=Math.max(_[0],et[0]),_e[1]=Math.max(_[1],et[1]),_e}const vector=Object.freeze(Object.defineProperty({__proto__:null,add:add$1,applyTransform:applyTransform$1,clone:clone$3,copy:copy$1,create:create$2,dist:dist$1,distSquare,distance,distanceSquare,div,dot,len,lenSquare,length,lengthSquare,lerp:lerp$1,max:max$1,min:min$1,mul:mul$1,negate:negate$1,normalize:normalize$3,scale:scale$2,scaleAndAdd:scaleAndAdd$1,set:set$1,sub},Symbol.toStringTag,{value:"Module"}));var Param=function(){function _e(_,et){this.target=_,this.topTarget=et&&et.topTarget}return _e}(),Draggable=function(){function _e(_){this.handler=_,_.on("mousedown",this._dragStart,this),_.on("mousemove",this._drag,this),_.on("mouseup",this._dragEnd,this)}return _e.prototype._dragStart=function(_){for(var et=_.target;et&&!et.draggable;)et=et.parent||et.__hostTarget;et&&(this._draggingTarget=et,et.dragging=!0,this._x=_.offsetX,this._y=_.offsetY,this.handler.dispatchToElement(new Param(et,_),"dragstart",_.event))},_e.prototype._drag=function(_){var et=this._draggingTarget;if(et){var tt=_.offsetX,nt=_.offsetY,it=tt-this._x,at=nt-this._y;this._x=tt,this._y=nt,et.drift(it,at,_),this.handler.dispatchToElement(new Param(et,_),"drag",_.event);var ot=this.handler.findHover(tt,nt,et).target,st=this._dropTarget;this._dropTarget=ot,et!==ot&&(st&&ot!==st&&this.handler.dispatchToElement(new Param(st,_),"dragleave",_.event),ot&&ot!==st&&this.handler.dispatchToElement(new Param(ot,_),"dragenter",_.event))}},_e.prototype._dragEnd=function(_){var et=this._draggingTarget;et&&(et.dragging=!1),this.handler.dispatchToElement(new Param(et,_),"dragend",_.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,_),"drop",_.event),this._draggingTarget=null,this._dropTarget=null},_e}(),Eventful=function(){function _e(_){_&&(this._$eventProcessor=_)}return _e.prototype.on=function(_,et,tt,nt){this._$handlers||(this._$handlers={});var it=this._$handlers;if(typeof et=="function"&&(nt=tt,tt=et,et=null),!tt||!_)return this;var at=this._$eventProcessor;et!=null&&at&&at.normalizeQuery&&(et=at.normalizeQuery(et)),it[_]||(it[_]=[]);for(var ot=0;ot<it[_].length;ot++)if(it[_][ot].h===tt)return this;var st={h:tt,query:et,ctx:nt||this,callAtLast:tt.zrEventfulCallAtLast},dt=it[_].length-1,ht=it[_][dt];return ht&&ht.callAtLast?it[_].splice(dt,0,st):it[_].push(st),this},_e.prototype.isSilent=function(_){var et=this._$handlers;return!et||!et[_]||!et[_].length},_e.prototype.off=function(_,et){var tt=this._$handlers;if(!tt)return this;if(!_)return this._$handlers={},this;if(et){if(tt[_]){for(var nt=[],it=0,at=tt[_].length;it<at;it++)tt[_][it].h!==et&&nt.push(tt[_][it]);tt[_]=nt}tt[_]&&tt[_].length===0&&delete tt[_]}else delete tt[_];return this},_e.prototype.trigger=function(_){for(var et=[],tt=1;tt<arguments.length;tt++)et[tt-1]=arguments[tt];if(!this._$handlers)return this;var nt=this._$handlers[_],it=this._$eventProcessor;if(nt)for(var at=et.length,ot=nt.length,st=0;st<ot;st++){var dt=nt[st];if(!(it&&it.filter&&dt.query!=null&&!it.filter(_,dt.query)))switch(at){case 0:dt.h.call(dt.ctx);break;case 1:dt.h.call(dt.ctx,et[0]);break;case 2:dt.h.call(dt.ctx,et[0],et[1]);break;default:dt.h.apply(dt.ctx,et);break}}return it&&it.afterTrigger&&it.afterTrigger(_),this},_e.prototype.triggerWithContext=function(_){for(var et=[],tt=1;tt<arguments.length;tt++)et[tt-1]=arguments[tt];if(!this._$handlers)return this;var nt=this._$handlers[_],it=this._$eventProcessor;if(nt)for(var at=et.length,ot=et[at-1],st=nt.length,dt=0;dt<st;dt++){var ht=nt[dt];if(!(it&&it.filter&&ht.query!=null&&!it.filter(_,ht.query)))switch(at){case 0:ht.h.call(ot);break;case 1:ht.h.call(ot,et[0]);break;case 2:ht.h.call(ot,et[0],et[1]);break;default:ht.h.apply(ot,et.slice(1,at-1));break}}return it&&it.afterTrigger&&it.afterTrigger(_),this},_e}(),LN2=Math.log(2);function determinant(_e,_,et,tt,nt,it){var at=tt+"-"+nt,ot=_e.length;if(it.hasOwnProperty(at))return it[at];if(_===1){var st=Math.round(Math.log((1<<ot)-1&~nt)/LN2);return _e[et][st]}for(var dt=tt|1<<et,ht=et+1;tt&1<<ht;)ht++;for(var ct=0,ut=0,ft=0;ut<ot;ut++){var gt=1<<ut;gt&nt||(ct+=(ft%2?-1:1)*_e[et][ut]*determinant(_e,_-1,ht,dt,nt|gt,it),ft++)}return it[at]=ct,ct}function buildTransformer(_e,_){var et=[[_e[0],_e[1],1,0,0,0,-_[0]*_e[0],-_[0]*_e[1]],[0,0,0,_e[0],_e[1],1,-_[1]*_e[0],-_[1]*_e[1]],[_e[2],_e[3],1,0,0,0,-_[2]*_e[2],-_[2]*_e[3]],[0,0,0,_e[2],_e[3],1,-_[3]*_e[2],-_[3]*_e[3]],[_e[4],_e[5],1,0,0,0,-_[4]*_e[4],-_[4]*_e[5]],[0,0,0,_e[4],_e[5],1,-_[5]*_e[4],-_[5]*_e[5]],[_e[6],_e[7],1,0,0,0,-_[6]*_e[6],-_[6]*_e[7]],[0,0,0,_e[6],_e[7],1,-_[7]*_e[6],-_[7]*_e[7]]],tt={},nt=determinant(et,8,0,0,0,tt);if(nt!==0){for(var it=[],at=0;at<8;at++)for(var ot=0;ot<8;ot++)it[ot]==null&&(it[ot]=0),it[ot]+=((at+ot)%2?-1:1)*determinant(et,7,at===0?1:0,1<<at,1<<ot,tt)/nt*_[at];return function(st,dt,ht){var ct=dt*it[6]+ht*it[7]+1;st[0]=(dt*it[0]+ht*it[1]+it[2])/ct,st[1]=(dt*it[3]+ht*it[4]+it[5])/ct}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(_e,_,et,tt,nt){return transformCoordWithViewport(_calcOut$1,_,tt,nt,!0)&&transformCoordWithViewport(_e,et,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(_e,_,et,tt,nt){if(_.getBoundingClientRect&&env.domSupported&&!isCanvasEl(_)){var it=_[EVENT_SAVED_PROP]||(_[EVENT_SAVED_PROP]={}),at=prepareCoordMarkers(_,it),ot=preparePointerTransformer(at,it,nt);if(ot)return ot(_e,et,tt),!0}return!1}function prepareCoordMarkers(_e,_){var et=_.markers;if(et)return et;et=_.markers=[];for(var tt=["left","right"],nt=["top","bottom"],it=0;it<4;it++){var at=document.createElement("div"),ot=at.style,st=it%2,dt=(it>>1)%2;ot.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",tt[st]+":0",nt[dt]+":0",tt[1-st]+":auto",nt[1-dt]+":auto",""].join("!important;"),_e.appendChild(at),et.push(at)}return et}function preparePointerTransformer(_e,_,et){for(var tt=et?"invTrans":"trans",nt=_[tt],it=_.srcCoords,at=[],ot=[],st=!0,dt=0;dt<4;dt++){var ht=_e[dt].getBoundingClientRect(),ct=2*dt,ut=ht.left,ft=ht.top;at.push(ut,ft),st=st&&it&&ut===it[ct]&&ft===it[ct+1],ot.push(_e[dt].offsetLeft,_e[dt].offsetTop)}return st&&nt?nt:(_.srcCoords=at,_[tt]=et?buildTransformer(ot,at):buildTransformer(at,ot))}function isCanvasEl(_e){return _e.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(_e){return _e==null?"":(_e+"").replace(replaceReg,function(_,et){return replaceMap[et]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(_e,_,et,tt){return et=et||{},tt?calculateZrXY(_e,_,et):firefoxNotSupportOffsetXY&&_.layerX!=null&&_.layerX!==_.offsetX?(et.zrX=_.layerX,et.zrY=_.layerY):_.offsetX!=null?(et.zrX=_.offsetX,et.zrY=_.offsetY):calculateZrXY(_e,_,et),et}function calculateZrXY(_e,_,et){if(env.domSupported&&_e.getBoundingClientRect){var tt=_.clientX,nt=_.clientY;if(isCanvasEl(_e)){var it=_e.getBoundingClientRect();et.zrX=tt-it.left,et.zrY=nt-it.top;return}else if(transformCoordWithViewport(_calcOut,_e,tt,nt)){et.zrX=_calcOut[0],et.zrY=_calcOut[1];return}}et.zrX=et.zrY=0}function getNativeEvent(_e){return _e||window.event}function normalizeEvent(_e,_,et){if(_=getNativeEvent(_),_.zrX!=null)return _;var tt=_.type,nt=tt&&tt.indexOf("touch")>=0;if(nt){var at=tt!=="touchend"?_.targetTouches[0]:_.changedTouches[0];at&&clientToLocal(_e,at,_,et)}else{clientToLocal(_e,_,_,et);var it=getWheelDeltaMayPolyfill(_);_.zrDelta=it?it/120:-(_.detail||0)/3}var ot=_.button;return _.which==null&&ot!==void 0&&MOUSE_EVENT_REG.test(_.type)&&(_.which=ot&1?1:ot&2?3:ot&4?2:0),_}function getWheelDeltaMayPolyfill(_e){var _=_e.wheelDelta;if(_)return _;var et=_e.deltaX,tt=_e.deltaY;if(et==null||tt==null)return _;var nt=Math.abs(tt!==0?tt:et),it=tt>0?-1:tt<0?1:et>0?-1:1;return 3*nt*it}function addEventListener(_e,_,et,tt){_e.addEventListener(_,et,tt)}function removeEventListener(_e,_,et,tt){_e.removeEventListener(_,et,tt)}var stop=function(_e){_e.preventDefault(),_e.stopPropagation(),_e.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(_e){return _e.which===2||_e.which===3}var GestureMgr=function(){function _e(){this._track=[]}return _e.prototype.recognize=function(_,et,tt){return this._doTrack(_,et,tt),this._recognize(_)},_e.prototype.clear=function(){return this._track.length=0,this},_e.prototype._doTrack=function(_,et,tt){var nt=_.touches;if(nt){for(var it={points:[],touches:[],target:et,event:_},at=0,ot=nt.length;at<ot;at++){var st=nt[at],dt=clientToLocal(tt,st,{});it.points.push([dt.zrX,dt.zrY]),it.touches.push(st)}this._track.push(it)}},_e.prototype._recognize=function(_){for(var et in recognizers)if(recognizers.hasOwnProperty(et)){var tt=recognizers[et](this._track,_);if(tt)return tt}},_e}();function dist(_e){var _=_e[1][0]-_e[0][0],et=_e[1][1]-_e[0][1];return Math.sqrt(_*_+et*et)}function center$1(_e){return[(_e[0][0]+_e[1][0])/2,(_e[0][1]+_e[1][1])/2]}var recognizers={pinch:function(_e,_){var et=_e.length;if(et){var tt=(_e[et-1]||{}).points,nt=(_e[et-2]||{}).points||tt;if(nt&&nt.length>1&&tt&&tt.length>1){var it=dist(tt)/dist(nt);!isFinite(it)&&(it=1),_.pinchScale=it;var at=center$1(tt);return _.pinchX=at[0],_.pinchY=at[1],{type:"pinch",target:_e[0].target,event:_}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(_e){return _e[0]=1,_e[1]=0,_e[2]=0,_e[3]=1,_e[4]=0,_e[5]=0,_e}function copy(_e,_){return _e[0]=_[0],_e[1]=_[1],_e[2]=_[2],_e[3]=_[3],_e[4]=_[4],_e[5]=_[5],_e}function mul(_e,_,et){var tt=_[0]*et[0]+_[2]*et[1],nt=_[1]*et[0]+_[3]*et[1],it=_[0]*et[2]+_[2]*et[3],at=_[1]*et[2]+_[3]*et[3],ot=_[0]*et[4]+_[2]*et[5]+_[4],st=_[1]*et[4]+_[3]*et[5]+_[5];return _e[0]=tt,_e[1]=nt,_e[2]=it,_e[3]=at,_e[4]=ot,_e[5]=st,_e}function translate(_e,_,et){return _e[0]=_[0],_e[1]=_[1],_e[2]=_[2],_e[3]=_[3],_e[4]=_[4]+et[0],_e[5]=_[5]+et[1],_e}function rotate(_e,_,et,tt){tt===void 0&&(tt=[0,0]);var nt=_[0],it=_[2],at=_[4],ot=_[1],st=_[3],dt=_[5],ht=Math.sin(et),ct=Math.cos(et);return _e[0]=nt*ct+ot*ht,_e[1]=-nt*ht+ot*ct,_e[2]=it*ct+st*ht,_e[3]=-it*ht+ct*st,_e[4]=ct*(at-tt[0])+ht*(dt-tt[1])+tt[0],_e[5]=ct*(dt-tt[1])-ht*(at-tt[0])+tt[1],_e}function scale$1(_e,_,et){var tt=et[0],nt=et[1];return _e[0]=_[0]*tt,_e[1]=_[1]*nt,_e[2]=_[2]*tt,_e[3]=_[3]*nt,_e[4]=_[4]*tt,_e[5]=_[5]*nt,_e}function invert(_e,_){var et=_[0],tt=_[2],nt=_[4],it=_[1],at=_[3],ot=_[5],st=et*at-it*tt;return st?(st=1/st,_e[0]=at*st,_e[1]=-it*st,_e[2]=-tt*st,_e[3]=et*st,_e[4]=(tt*ot-at*nt)*st,_e[5]=(it*nt-et*ot)*st,_e):null}function clone$2(_e){var _=create$1();return copy(_,_e),_}const matrix=Object.freeze(Object.defineProperty({__proto__:null,clone:clone$2,copy,create:create$1,identity,invert,mul,rotate,scale:scale$1,translate},Symbol.toStringTag,{value:"Module"}));var Point=function(){function _e(_,et){this.x=_||0,this.y=et||0}return _e.prototype.copy=function(_){return this.x=_.x,this.y=_.y,this},_e.prototype.clone=function(){return new _e(this.x,this.y)},_e.prototype.set=function(_,et){return this.x=_,this.y=et,this},_e.prototype.equal=function(_){return _.x===this.x&&_.y===this.y},_e.prototype.add=function(_){return this.x+=_.x,this.y+=_.y,this},_e.prototype.scale=function(_){this.x*=_,this.y*=_},_e.prototype.scaleAndAdd=function(_,et){this.x+=_.x*et,this.y+=_.y*et},_e.prototype.sub=function(_){return this.x-=_.x,this.y-=_.y,this},_e.prototype.dot=function(_){return this.x*_.x+this.y*_.y},_e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},_e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},_e.prototype.normalize=function(){var _=this.len();return this.x/=_,this.y/=_,this},_e.prototype.distance=function(_){var et=this.x-_.x,tt=this.y-_.y;return Math.sqrt(et*et+tt*tt)},_e.prototype.distanceSquare=function(_){var et=this.x-_.x,tt=this.y-_.y;return et*et+tt*tt},_e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},_e.prototype.transform=function(_){if(_){var et=this.x,tt=this.y;return this.x=_[0]*et+_[2]*tt+_[4],this.y=_[1]*et+_[3]*tt+_[5],this}},_e.prototype.toArray=function(_){return _[0]=this.x,_[1]=this.y,_},_e.prototype.fromArray=function(_){this.x=_[0],this.y=_[1]},_e.set=function(_,et,tt){_.x=et,_.y=tt},_e.copy=function(_,et){_.x=et.x,_.y=et.y},_e.len=function(_){return Math.sqrt(_.x*_.x+_.y*_.y)},_e.lenSquare=function(_){return _.x*_.x+_.y*_.y},_e.dot=function(_,et){return _.x*et.x+_.y*et.y},_e.add=function(_,et,tt){_.x=et.x+tt.x,_.y=et.y+tt.y},_e.sub=function(_,et,tt){_.x=et.x-tt.x,_.y=et.y-tt.y},_e.scale=function(_,et,tt){_.x=et.x*tt,_.y=et.y*tt},_e.scaleAndAdd=function(_,et,tt,nt){_.x=et.x+tt.x*nt,_.y=et.y+tt.y*nt},_e.lerp=function(_,et,tt,nt){var it=1-nt;_.x=it*et.x+nt*tt.x,_.y=it*et.y+nt*tt.y},_e}(),mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point,rb=new Point,lb=new Point,rt=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=function(){function _e(_,et,tt,nt){tt<0&&(_=_+tt,tt=-tt),nt<0&&(et=et+nt,nt=-nt),this.x=_,this.y=et,this.width=tt,this.height=nt}return _e.prototype.union=function(_){var et=mathMin$a(_.x,this.x),tt=mathMin$a(_.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(_.x+_.width,this.x+this.width)-et:this.width=_.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(_.y+_.height,this.y+this.height)-tt:this.height=_.height,this.x=et,this.y=tt},_e.prototype.applyTransform=function(_){_e.applyTransform(this,this,_)},_e.prototype.calculateTransform=function(_){var et=this,tt=_.width/et.width,nt=_.height/et.height,it=create$1();return translate(it,it,[-et.x,-et.y]),scale$1(it,it,[tt,nt]),translate(it,it,[_.x,_.y]),it},_e.prototype.intersect=function(_,et){if(!_)return!1;_ instanceof _e||(_=_e.create(_));var tt=this,nt=tt.x,it=tt.x+tt.width,at=tt.y,ot=tt.y+tt.height,st=_.x,dt=_.x+_.width,ht=_.y,ct=_.y+_.height,ut=!(it<st||dt<nt||ot<ht||ct<at);if(et){var ft=1/0,gt=0,mt=Math.abs(it-st),vt=Math.abs(dt-nt),yt=Math.abs(ot-ht),bt=Math.abs(ct-at),_t=Math.min(mt,vt),xt=Math.min(yt,bt);it<st||dt<nt?_t>gt&&(gt=_t,mt<vt?Point.set(maxTv$1,-mt,0):Point.set(maxTv$1,vt,0)):_t<ft&&(ft=_t,mt<vt?Point.set(minTv$1,mt,0):Point.set(minTv$1,-vt,0)),ot<ht||ct<at?xt>gt&&(gt=xt,yt<bt?Point.set(maxTv$1,0,-yt):Point.set(maxTv$1,0,bt)):_t<ft&&(ft=_t,yt<bt?Point.set(minTv$1,0,yt):Point.set(minTv$1,0,-bt))}return et&&Point.copy(et,ut?minTv$1:maxTv$1),ut},_e.prototype.contain=function(_,et){var tt=this;return _>=tt.x&&_<=tt.x+tt.width&&et>=tt.y&&et<=tt.y+tt.height},_e.prototype.clone=function(){return new _e(this.x,this.y,this.width,this.height)},_e.prototype.copy=function(_){_e.copy(this,_)},_e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},_e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},_e.prototype.isZero=function(){return this.width===0||this.height===0},_e.create=function(_){return new _e(_.x,_.y,_.width,_.height)},_e.copy=function(_,et){_.x=et.x,_.y=et.y,_.width=et.width,_.height=et.height},_e.applyTransform=function(_,et,tt){if(!tt){_!==et&&_e.copy(_,et);return}if(tt[1]<1e-5&&tt[1]>-1e-5&&tt[2]<1e-5&&tt[2]>-1e-5){var nt=tt[0],it=tt[3],at=tt[4],ot=tt[5];_.x=et.x*nt+at,_.y=et.y*it+ot,_.width=et.width*nt,_.height=et.height*it,_.width<0&&(_.x+=_.width,_.width=-_.width),_.height<0&&(_.y+=_.height,_.height=-_.height);return}lt.x=lb.x=et.x,lt.y=rt.y=et.y,rb.x=rt.x=et.x+et.width,rb.y=lb.y=et.y+et.height,lt.transform(tt),rt.transform(tt),rb.transform(tt),lb.transform(tt),_.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),_.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var st=mathMax$a(lt.x,rb.x,lb.x,rt.x),dt=mathMax$a(lt.y,rb.y,lb.y,rt.y);_.width=st-_.x,_.height=dt-_.y},_e}(),SILENT="silent";function makeEventPacket(_e,_,et){return{type:_e,event:et,target:_.target,topTarget:_.topTarget,cancelBubble:!1,offsetX:et.zrX,offsetY:et.zrY,gestureEvent:et.gestureEvent,pinchX:et.pinchX,pinchY:et.pinchY,pinchScale:et.pinchScale,wheelDelta:et.zrDelta,zrByTouch:et.zrByTouch,which:et.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(_e){__extends(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.handler=null,et}return _.prototype.dispose=function(){},_.prototype.setCursor=function(){},_}(Eventful),HoveredResult=function(){function _e(_,et){this.x=_,this.y=et}return _e}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(_e){__extends(_,_e);function _(et,tt,nt,it,at){var ot=_e.call(this)||this;return ot._hovered=new HoveredResult(0,0),ot.storage=et,ot.painter=tt,ot.painterRoot=it,ot._pointerSize=at,nt=nt||new EmptyProxy,ot.proxy=null,ot.setHandlerProxy(nt),ot._draggingMgr=new Draggable(ot),ot}return _.prototype.setHandlerProxy=function(et){this.proxy&&this.proxy.dispose(),et&&(each$f(handlerNames,function(tt){et.on&&et.on(tt,this[tt],this)},this),et.handler=this),this.proxy=et},_.prototype.mousemove=function(et){var tt=et.zrX,nt=et.zrY,it=isOutsideBoundary(this,tt,nt),at=this._hovered,ot=at.target;ot&&!ot.__zr&&(at=this.findHover(at.x,at.y),ot=at.target);var st=this._hovered=it?new HoveredResult(tt,nt):this.findHover(tt,nt),dt=st.target,ht=this.proxy;ht.setCursor&&ht.setCursor(dt?dt.cursor:"default"),ot&&dt!==ot&&this.dispatchToElement(at,"mouseout",et),this.dispatchToElement(st,"mousemove",et),dt&&dt!==ot&&this.dispatchToElement(st,"mouseover",et)},_.prototype.mouseout=function(et){var tt=et.zrEventControl;tt!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",et),tt!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:et})},_.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},_.prototype.dispatch=function(et,tt){var nt=this[et];nt&&nt.call(this,tt)},_.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},_.prototype.setCursorStyle=function(et){var tt=this.proxy;tt.setCursor&&tt.setCursor(et)},_.prototype.dispatchToElement=function(et,tt,nt){et=et||{};var it=et.target;if(!(it&&it.silent)){for(var at="on"+tt,ot=makeEventPacket(tt,et,nt);it&&(it[at]&&(ot.cancelBubble=!!it[at].call(it,ot)),it.trigger(tt,ot),it=it.__hostTarget?it.__hostTarget:it.parent,!ot.cancelBubble););ot.cancelBubble||(this.trigger(tt,ot),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(st){typeof st[at]=="function"&&st[at].call(st,ot),st.trigger&&st.trigger(tt,ot)}))}},_.prototype.findHover=function(et,tt,nt){var it=this.storage.getDisplayList(),at=new HoveredResult(et,tt);if(setHoverTarget(it,at,et,tt,nt),this._pointerSize&&!at.target){for(var ot=[],st=this._pointerSize,dt=st/2,ht=new BoundingRect(et-dt,tt-dt,st,st),ct=it.length-1;ct>=0;ct--){var ut=it[ct];ut!==nt&&!ut.ignore&&!ut.ignoreCoarsePointer&&(!ut.parent||!ut.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(ut.getBoundingRect()),ut.transform&&tmpRect$1.applyTransform(ut.transform),tmpRect$1.intersect(ht)&&ot.push(ut))}if(ot.length)for(var ft=4,gt=Math.PI/12,mt=Math.PI*2,vt=0;vt<dt;vt+=ft)for(var yt=0;yt<mt;yt+=gt){var bt=et+vt*Math.cos(yt),_t=tt+vt*Math.sin(yt);if(setHoverTarget(ot,at,bt,_t,nt),at.target)return at}}return at},_.prototype.processGesture=function(et,tt){this._gestureMgr||(this._gestureMgr=new GestureMgr);var nt=this._gestureMgr;tt==="start"&&nt.clear();var it=nt.recognize(et,this.findHover(et.zrX,et.zrY,null).target,this.proxy.dom);if(tt==="end"&&nt.clear(),it){var at=it.type;et.gestureEvent=at;var ot=new HoveredResult;ot.target=it.target,this.dispatchToElement(ot,at,it.event)}},_}(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(_e){Handler.prototype[_e]=function(_){var et=_.zrX,tt=_.zrY,nt=isOutsideBoundary(this,et,tt),it,at;if((_e!=="mouseup"||!nt)&&(it=this.findHover(et,tt),at=it.target),_e==="mousedown")this._downEl=at,this._downPoint=[_.zrX,_.zrY],this._upEl=at;else if(_e==="mouseup")this._upEl=at;else if(_e==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[_.zrX,_.zrY])>4)return;this._downPoint=null}this.dispatchToElement(it,_e,_)}});function isHover(_e,_,et){if(_e[_e.rectHover?"rectContain":"contain"](_,et)){for(var tt=_e,nt=void 0,it=!1;tt;){if(tt.ignoreClip&&(it=!0),!it){var at=tt.getClipPath();if(at&&!at.contain(_,et))return!1}tt.silent&&(nt=!0);var ot=tt.__hostTarget;tt=ot||tt.parent}return nt?SILENT:!0}return!1}function setHoverTarget(_e,_,et,tt,nt){for(var it=_e.length-1;it>=0;it--){var at=_e[it],ot=void 0;if(at!==nt&&!at.ignore&&(ot=isHover(at,et,tt))&&(!_.topTarget&&(_.topTarget=at),ot!==SILENT)){_.target=at;break}}}function isOutsideBoundary(_e,_,et){var tt=_e.painter;return _<0||_>tt.getWidth()||et<0||et>tt.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(_e){for(var _=0;_e>=DEFAULT_MIN_MERGE;)_|=_e&1,_e>>=1;return _e+_}function makeAscendingRun(_e,_,et,tt){var nt=_+1;if(nt===et)return 1;if(tt(_e[nt++],_e[_])<0){for(;nt<et&&tt(_e[nt],_e[nt-1])<0;)nt++;reverseRun(_e,_,nt)}else for(;nt<et&&tt(_e[nt],_e[nt-1])>=0;)nt++;return nt-_}function reverseRun(_e,_,et){for(et--;_<et;){var tt=_e[_];_e[_++]=_e[et],_e[et--]=tt}}function binaryInsertionSort(_e,_,et,tt,nt){for(tt===_&&tt++;tt<et;tt++){for(var it=_e[tt],at=_,ot=tt,st;at<ot;)st=at+ot>>>1,nt(it,_e[st])<0?ot=st:at=st+1;var dt=tt-at;switch(dt){case 3:_e[at+3]=_e[at+2];case 2:_e[at+2]=_e[at+1];case 1:_e[at+1]=_e[at];break;default:for(;dt>0;)_e[at+dt]=_e[at+dt-1],dt--}_e[at]=it}}function gallopLeft(_e,_,et,tt,nt,it){var at=0,ot=0,st=1;if(it(_e,_[et+nt])>0){for(ot=tt-nt;st<ot&&it(_e,_[et+nt+st])>0;)at=st,st=(st<<1)+1,st<=0&&(st=ot);st>ot&&(st=ot),at+=nt,st+=nt}else{for(ot=nt+1;st<ot&&it(_e,_[et+nt-st])<=0;)at=st,st=(st<<1)+1,st<=0&&(st=ot);st>ot&&(st=ot);var dt=at;at=nt-st,st=nt-dt}for(at++;at<st;){var ht=at+(st-at>>>1);it(_e,_[et+ht])>0?at=ht+1:st=ht}return st}function gallopRight(_e,_,et,tt,nt,it){var at=0,ot=0,st=1;if(it(_e,_[et+nt])<0){for(ot=nt+1;st<ot&&it(_e,_[et+nt-st])<0;)at=st,st=(st<<1)+1,st<=0&&(st=ot);st>ot&&(st=ot);var dt=at;at=nt-st,st=nt-dt}else{for(ot=tt-nt;st<ot&&it(_e,_[et+nt+st])>=0;)at=st,st=(st<<1)+1,st<=0&&(st=ot);st>ot&&(st=ot),at+=nt,st+=nt}for(at++;at<st;){var ht=at+(st-at>>>1);it(_e,_[et+ht])<0?st=ht:at=ht+1}return st}function TimSort(_e,_){var et=DEFAULT_MIN_GALLOPING,tt,nt,it=0,at=[];tt=[],nt=[];function ot(ft,gt){tt[it]=ft,nt[it]=gt,it+=1}function st(){for(;it>1;){var ft=it-2;if(ft>=1&&nt[ft-1]<=nt[ft]+nt[ft+1]||ft>=2&&nt[ft-2]<=nt[ft]+nt[ft-1])nt[ft-1]<nt[ft+1]&&ft--;else if(nt[ft]>nt[ft+1])break;ht(ft)}}function dt(){for(;it>1;){var ft=it-2;ft>0&&nt[ft-1]<nt[ft+1]&&ft--,ht(ft)}}function ht(ft){var gt=tt[ft],mt=nt[ft],vt=tt[ft+1],yt=nt[ft+1];nt[ft]=mt+yt,ft===it-3&&(tt[ft+1]=tt[ft+2],nt[ft+1]=nt[ft+2]),it--;var bt=gallopRight(_e[vt],_e,gt,mt,0,_);gt+=bt,mt-=bt,mt!==0&&(yt=gallopLeft(_e[gt+mt-1],_e,vt,yt,yt-1,_),yt!==0&&(mt<=yt?ct(gt,mt,vt,yt):ut(gt,mt,vt,yt)))}function ct(ft,gt,mt,vt){var yt=0;for(yt=0;yt<gt;yt++)at[yt]=_e[ft+yt];var bt=0,_t=mt,xt=ft;if(_e[xt++]=_e[_t++],--vt===0){for(yt=0;yt<gt;yt++)_e[xt+yt]=at[bt+yt];return}if(gt===1){for(yt=0;yt<vt;yt++)_e[xt+yt]=_e[_t+yt];_e[xt+vt]=at[bt];return}for(var St=et,Tt,wt,Ct;;){Tt=0,wt=0,Ct=!1;do if(_(_e[_t],at[bt])<0){if(_e[xt++]=_e[_t++],wt++,Tt=0,--vt===0){Ct=!0;break}}else if(_e[xt++]=at[bt++],Tt++,wt=0,--gt===1){Ct=!0;break}while((Tt|wt)<St);if(Ct)break;do{if(Tt=gallopRight(_e[_t],at,bt,gt,0,_),Tt!==0){for(yt=0;yt<Tt;yt++)_e[xt+yt]=at[bt+yt];if(xt+=Tt,bt+=Tt,gt-=Tt,gt<=1){Ct=!0;break}}if(_e[xt++]=_e[_t++],--vt===0){Ct=!0;break}if(wt=gallopLeft(at[bt],_e,_t,vt,0,_),wt!==0){for(yt=0;yt<wt;yt++)_e[xt+yt]=_e[_t+yt];if(xt+=wt,_t+=wt,vt-=wt,vt===0){Ct=!0;break}}if(_e[xt++]=at[bt++],--gt===1){Ct=!0;break}St--}while(Tt>=DEFAULT_MIN_GALLOPING||wt>=DEFAULT_MIN_GALLOPING);if(Ct)break;St<0&&(St=0),St+=2}if(et=St,et<1&&(et=1),gt===1){for(yt=0;yt<vt;yt++)_e[xt+yt]=_e[_t+yt];_e[xt+vt]=at[bt]}else{if(gt===0)throw new Error;for(yt=0;yt<gt;yt++)_e[xt+yt]=at[bt+yt]}}function ut(ft,gt,mt,vt){var yt=0;for(yt=0;yt<vt;yt++)at[yt]=_e[mt+yt];var bt=ft+gt-1,_t=vt-1,xt=mt+vt-1,St=0,Tt=0;if(_e[xt--]=_e[bt--],--gt===0){for(St=xt-(vt-1),yt=0;yt<vt;yt++)_e[St+yt]=at[yt];return}if(vt===1){for(xt-=gt,bt-=gt,Tt=xt+1,St=bt+1,yt=gt-1;yt>=0;yt--)_e[Tt+yt]=_e[St+yt];_e[xt]=at[_t];return}for(var wt=et;;){var Ct=0,Et=0,At=!1;do if(_(at[_t],_e[bt])<0){if(_e[xt--]=_e[bt--],Ct++,Et=0,--gt===0){At=!0;break}}else if(_e[xt--]=at[_t--],Et++,Ct=0,--vt===1){At=!0;break}while((Ct|Et)<wt);if(At)break;do{if(Ct=gt-gallopRight(at[_t],_e,ft,gt,gt-1,_),Ct!==0){for(xt-=Ct,bt-=Ct,gt-=Ct,Tt=xt+1,St=bt+1,yt=Ct-1;yt>=0;yt--)_e[Tt+yt]=_e[St+yt];if(gt===0){At=!0;break}}if(_e[xt--]=at[_t--],--vt===1){At=!0;break}if(Et=vt-gallopLeft(_e[bt],at,0,vt,vt-1,_),Et!==0){for(xt-=Et,_t-=Et,vt-=Et,Tt=xt+1,St=_t+1,yt=0;yt<Et;yt++)_e[Tt+yt]=at[St+yt];if(vt<=1){At=!0;break}}if(_e[xt--]=_e[bt--],--gt===0){At=!0;break}wt--}while(Ct>=DEFAULT_MIN_GALLOPING||Et>=DEFAULT_MIN_GALLOPING);if(At)break;wt<0&&(wt=0),wt+=2}if(et=wt,et<1&&(et=1),vt===1){for(xt-=gt,bt-=gt,Tt=xt+1,St=bt+1,yt=gt-1;yt>=0;yt--)_e[Tt+yt]=_e[St+yt];_e[xt]=at[_t]}else{if(vt===0)throw new Error;for(St=xt-(vt-1),yt=0;yt<vt;yt++)_e[St+yt]=at[yt]}}return{mergeRuns:st,forceMergeRuns:dt,pushRun:ot}}function sort$2(_e,_,et,tt){et||(et=0),tt||(tt=_e.length);var nt=tt-et;if(!(nt<2)){var it=0;if(nt<DEFAULT_MIN_MERGE){it=makeAscendingRun(_e,et,tt,_),binaryInsertionSort(_e,et,tt,et+it,_);return}var at=TimSort(_e,_),ot=minRunLength(nt);do{if(it=makeAscendingRun(_e,et,tt,_),it<ot){var st=nt;st>ot&&(st=ot),binaryInsertionSort(_e,et,et+st,et+it,_),it=st}at.pushRun(et,it),at.mergeRuns(),nt-=it,et+=it}while(nt!==0);at.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(_e,_){return _e.zlevel===_.zlevel?_e.z===_.z?_e.z2-_.z2:_e.z-_.z:_e.zlevel-_.zlevel}var Storage=function(){function _e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return _e.prototype.traverse=function(_,et){for(var tt=0;tt<this._roots.length;tt++)this._roots[tt].traverse(_,et)},_e.prototype.getDisplayList=function(_,et){et=et||!1;var tt=this._displayList;return(_||!tt.length)&&this.updateDisplayList(et),tt},_e.prototype.updateDisplayList=function(_){this._displayListLen=0;for(var et=this._roots,tt=this._displayList,nt=0,it=et.length;nt<it;nt++)this._updateAndAddDisplayable(et[nt],null,_);tt.length=this._displayListLen,sort$2(tt,shapeCompareFunc)},_e.prototype._updateAndAddDisplayable=function(_,et,tt){if(!(_.ignore&&!tt)){_.beforeUpdate(),_.update(),_.afterUpdate();var nt=_.getClipPath();if(_.ignoreClip)et=null;else if(nt){et?et=et.slice():et=[];for(var it=nt,at=_;it;)it.parent=at,it.updateTransform(),et.push(it),at=it,it=it.getClipPath()}if(_.childrenRef){for(var ot=_.childrenRef(),st=0;st<ot.length;st++){var dt=ot[st];_.__dirty&&(dt.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(dt,et,tt)}_.__dirty=0}else{var ht=_;et&&et.length?ht.__clipPaths=et:ht.__clipPaths&&ht.__clipPaths.length>0&&(ht.__clipPaths=[]),isNaN(ht.z)&&(logInvalidZError(),ht.z=0),isNaN(ht.z2)&&(logInvalidZError(),ht.z2=0),isNaN(ht.zlevel)&&(logInvalidZError(),ht.zlevel=0),this._displayList[this._displayListLen++]=ht}var ct=_.getDecalElement&&_.getDecalElement();ct&&this._updateAndAddDisplayable(ct,et,tt);var ut=_.getTextGuideLine();ut&&this._updateAndAddDisplayable(ut,et,tt);var ft=_.getTextContent();ft&&this._updateAndAddDisplayable(ft,et,tt)}},_e.prototype.addRoot=function(_){_.__zr&&_.__zr.storage===this||this._roots.push(_)},_e.prototype.delRoot=function(_){if(_ instanceof Array){for(var et=0,tt=_.length;et<tt;et++)this.delRoot(_[et]);return}var nt=indexOf(this._roots,_);nt>=0&&this._roots.splice(nt,1)},_e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},_e.prototype.getRoots=function(){return this._roots},_e.prototype.dispose=function(){this._displayList=null,this._roots=null},_e}(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(_e){return setTimeout(_e,16)};var easingFuncs={linear:function(_e){return _e},quadraticIn:function(_e){return _e*_e},quadraticOut:function(_e){return _e*(2-_e)},quadraticInOut:function(_e){return(_e*=2)<1?.5*_e*_e:-.5*(--_e*(_e-2)-1)},cubicIn:function(_e){return _e*_e*_e},cubicOut:function(_e){return--_e*_e*_e+1},cubicInOut:function(_e){return(_e*=2)<1?.5*_e*_e*_e:.5*((_e-=2)*_e*_e+2)},quarticIn:function(_e){return _e*_e*_e*_e},quarticOut:function(_e){return 1- --_e*_e*_e*_e},quarticInOut:function(_e){return(_e*=2)<1?.5*_e*_e*_e*_e:-.5*((_e-=2)*_e*_e*_e-2)},quinticIn:function(_e){return _e*_e*_e*_e*_e},quinticOut:function(_e){return--_e*_e*_e*_e*_e+1},quinticInOut:function(_e){return(_e*=2)<1?.5*_e*_e*_e*_e*_e:.5*((_e-=2)*_e*_e*_e*_e+2)},sinusoidalIn:function(_e){return 1-Math.cos(_e*Math.PI/2)},sinusoidalOut:function(_e){return Math.sin(_e*Math.PI/2)},sinusoidalInOut:function(_e){return .5*(1-Math.cos(Math.PI*_e))},exponentialIn:function(_e){return _e===0?0:Math.pow(1024,_e-1)},exponentialOut:function(_e){return _e===1?1:1-Math.pow(2,-10*_e)},exponentialInOut:function(_e){return _e===0?0:_e===1?1:(_e*=2)<1?.5*Math.pow(1024,_e-1):.5*(-Math.pow(2,-10*(_e-1))+2)},circularIn:function(_e){return 1-Math.sqrt(1-_e*_e)},circularOut:function(_e){return Math.sqrt(1- --_e*_e)},circularInOut:function(_e){return(_e*=2)<1?-.5*(Math.sqrt(1-_e*_e)-1):.5*(Math.sqrt(1-(_e-=2)*_e)+1)},elasticIn:function(_e){var _,et=.1,tt=.4;return _e===0?0:_e===1?1:(!et||et<1?(et=1,_=tt/4):_=tt*Math.asin(1/et)/(2*Math.PI),-(et*Math.pow(2,10*(_e-=1))*Math.sin((_e-_)*(2*Math.PI)/tt)))},elasticOut:function(_e){var _,et=.1,tt=.4;return _e===0?0:_e===1?1:(!et||et<1?(et=1,_=tt/4):_=tt*Math.asin(1/et)/(2*Math.PI),et*Math.pow(2,-10*_e)*Math.sin((_e-_)*(2*Math.PI)/tt)+1)},elasticInOut:function(_e){var _,et=.1,tt=.4;return _e===0?0:_e===1?1:(!et||et<1?(et=1,_=tt/4):_=tt*Math.asin(1/et)/(2*Math.PI),(_e*=2)<1?-.5*(et*Math.pow(2,10*(_e-=1))*Math.sin((_e-_)*(2*Math.PI)/tt)):et*Math.pow(2,-10*(_e-=1))*Math.sin((_e-_)*(2*Math.PI)/tt)*.5+1)},backIn:function(_e){var _=1.70158;return _e*_e*((_+1)*_e-_)},backOut:function(_e){var _=1.70158;return--_e*_e*((_+1)*_e+_)+1},backInOut:function(_e){var _=2.5949095;return(_e*=2)<1?.5*(_e*_e*((_+1)*_e-_)):.5*((_e-=2)*_e*((_+1)*_e+_)+2)},bounceIn:function(_e){return 1-easingFuncs.bounceOut(1-_e)},bounceOut:function(_e){return _e<1/2.75?7.5625*_e*_e:_e<2/2.75?7.5625*(_e-=1.5/2.75)*_e+.75:_e<2.5/2.75?7.5625*(_e-=2.25/2.75)*_e+.9375:7.5625*(_e-=2.625/2.75)*_e+.984375},bounceInOut:function(_e){return _e<.5?easingFuncs.bounceIn(_e*2)*.5:easingFuncs.bounceOut(_e*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(_e){return _e>-1e-8&&_e<EPSILON$4}function isNotAroundZero$1(_e){return _e>EPSILON$4||_e<-1e-8}function cubicAt(_e,_,et,tt,nt){var it=1-nt;return it*it*(it*_e+3*nt*_)+nt*nt*(nt*tt+3*it*et)}function cubicDerivativeAt(_e,_,et,tt,nt){var it=1-nt;return 3*(((_-_e)*it+2*(et-_)*nt)*it+(tt-et)*nt*nt)}function cubicRootAt(_e,_,et,tt,nt,it){var at=tt+3*(_-et)-_e,ot=3*(et-_*2+_e),st=3*(_-_e),dt=_e-nt,ht=ot*ot-3*at*st,ct=ot*st-9*at*dt,ut=st*st-3*ot*dt,ft=0;if(isAroundZero$1(ht)&&isAroundZero$1(ct))if(isAroundZero$1(ot))it[0]=0;else{var gt=-st/ot;gt>=0&&gt<=1&&(it[ft++]=gt)}else{var mt=ct*ct-4*ht*ut;if(isAroundZero$1(mt)){var vt=ct/ht,gt=-ot/at+vt,yt=-vt/2;gt>=0&&gt<=1&&(it[ft++]=gt),yt>=0&&yt<=1&&(it[ft++]=yt)}else if(mt>0){var bt=mathSqrt$3(mt),_t=ht*ot+1.5*at*(-ct+bt),xt=ht*ot+1.5*at*(-ct-bt);_t<0?_t=-mathPow$2(-_t,ONE_THIRD):_t=mathPow$2(_t,ONE_THIRD),xt<0?xt=-mathPow$2(-xt,ONE_THIRD):xt=mathPow$2(xt,ONE_THIRD);var gt=(-ot-(_t+xt))/(3*at);gt>=0&&gt<=1&&(it[ft++]=gt)}else{var St=(2*ht*ot-3*at*ct)/(2*mathSqrt$3(ht*ht*ht)),Tt=Math.acos(St)/3,wt=mathSqrt$3(ht),Ct=Math.cos(Tt),gt=(-ot-2*wt*Ct)/(3*at),yt=(-ot+wt*(Ct+THREE_SQRT*Math.sin(Tt)))/(3*at),Et=(-ot+wt*(Ct-THREE_SQRT*Math.sin(Tt)))/(3*at);gt>=0&&gt<=1&&(it[ft++]=gt),yt>=0&&yt<=1&&(it[ft++]=yt),Et>=0&&Et<=1&&(it[ft++]=Et)}}return ft}function cubicExtrema(_e,_,et,tt,nt){var it=6*et-12*_+6*_e,at=9*_+3*tt-3*_e-9*et,ot=3*_-3*_e,st=0;if(isAroundZero$1(at)){if(isNotAroundZero$1(it)){var dt=-ot/it;dt>=0&&dt<=1&&(nt[st++]=dt)}}else{var ht=it*it-4*at*ot;if(isAroundZero$1(ht))nt[0]=-it/(2*at);else if(ht>0){var ct=mathSqrt$3(ht),dt=(-it+ct)/(2*at),ut=(-it-ct)/(2*at);dt>=0&&dt<=1&&(nt[st++]=dt),ut>=0&&ut<=1&&(nt[st++]=ut)}}return st}function cubicSubdivide(_e,_,et,tt,nt,it){var at=(_-_e)*nt+_e,ot=(et-_)*nt+_,st=(tt-et)*nt+et,dt=(ot-at)*nt+at,ht=(st-ot)*nt+ot,ct=(ht-dt)*nt+dt;it[0]=_e,it[1]=at,it[2]=dt,it[3]=ct,it[4]=ct,it[5]=ht,it[6]=st,it[7]=tt}function cubicProjectPoint(_e,_,et,tt,nt,it,at,ot,st,dt,ht){var ct,ut=.005,ft=1/0,gt,mt,vt,yt;_v0[0]=st,_v0[1]=dt;for(var bt=0;bt<1;bt+=.05)_v1[0]=cubicAt(_e,et,nt,at,bt),_v1[1]=cubicAt(_,tt,it,ot,bt),vt=distSquare(_v0,_v1),vt<ft&&(ct=bt,ft=vt);ft=1/0;for(var _t=0;_t<32&&!(ut<EPSILON_NUMERIC);_t++)gt=ct-ut,mt=ct+ut,_v1[0]=cubicAt(_e,et,nt,at,gt),_v1[1]=cubicAt(_,tt,it,ot,gt),vt=distSquare(_v1,_v0),gt>=0&&vt<ft?(ct=gt,ft=vt):(_v2[0]=cubicAt(_e,et,nt,at,mt),_v2[1]=cubicAt(_,tt,it,ot,mt),yt=distSquare(_v2,_v0),mt<=1&&yt<ft?(ct=mt,ft=yt):ut*=.5);return ht&&(ht[0]=cubicAt(_e,et,nt,at,ct),ht[1]=cubicAt(_,tt,it,ot,ct)),mathSqrt$3(ft)}function cubicLength(_e,_,et,tt,nt,it,at,ot,st){for(var dt=_e,ht=_,ct=0,ut=1/st,ft=1;ft<=st;ft++){var gt=ft*ut,mt=cubicAt(_e,et,nt,at,gt),vt=cubicAt(_,tt,it,ot,gt),yt=mt-dt,bt=vt-ht;ct+=Math.sqrt(yt*yt+bt*bt),dt=mt,ht=vt}return ct}function quadraticAt$1(_e,_,et,tt){var nt=1-tt;return nt*(nt*_e+2*tt*_)+tt*tt*et}function quadraticDerivativeAt(_e,_,et,tt){return 2*((1-tt)*(_-_e)+tt*(et-_))}function quadraticRootAt(_e,_,et,tt,nt){var it=_e-2*_+et,at=2*(_-_e),ot=_e-tt,st=0;if(isAroundZero$1(it)){if(isNotAroundZero$1(at)){var dt=-ot/at;dt>=0&&dt<=1&&(nt[st++]=dt)}}else{var ht=at*at-4*it*ot;if(isAroundZero$1(ht)){var dt=-at/(2*it);dt>=0&&dt<=1&&(nt[st++]=dt)}else if(ht>0){var ct=mathSqrt$3(ht),dt=(-at+ct)/(2*it),ut=(-at-ct)/(2*it);dt>=0&&dt<=1&&(nt[st++]=dt),ut>=0&&ut<=1&&(nt[st++]=ut)}}return st}function quadraticExtremum(_e,_,et){var tt=_e+et-2*_;return tt===0?.5:(_e-_)/tt}function quadraticSubdivide(_e,_,et,tt,nt){var it=(_-_e)*tt+_e,at=(et-_)*tt+_,ot=(at-it)*tt+it;nt[0]=_e,nt[1]=it,nt[2]=ot,nt[3]=ot,nt[4]=at,nt[5]=et}function quadraticProjectPoint(_e,_,et,tt,nt,it,at,ot,st){var dt,ht=.005,ct=1/0;_v0[0]=at,_v0[1]=ot;for(var ut=0;ut<1;ut+=.05){_v1[0]=quadraticAt$1(_e,et,nt,ut),_v1[1]=quadraticAt$1(_,tt,it,ut);var ft=distSquare(_v0,_v1);ft<ct&&(dt=ut,ct=ft)}ct=1/0;for(var gt=0;gt<32&&!(ht<EPSILON_NUMERIC);gt++){var mt=dt-ht,vt=dt+ht;_v1[0]=quadraticAt$1(_e,et,nt,mt),_v1[1]=quadraticAt$1(_,tt,it,mt);var ft=distSquare(_v1,_v0);if(mt>=0&&ft<ct)dt=mt,ct=ft;else{_v2[0]=quadraticAt$1(_e,et,nt,vt),_v2[1]=quadraticAt$1(_,tt,it,vt);var yt=distSquare(_v2,_v0);vt<=1&&yt<ct?(dt=vt,ct=yt):ht*=.5}}return st&&(st[0]=quadraticAt$1(_e,et,nt,dt),st[1]=quadraticAt$1(_,tt,it,dt)),mathSqrt$3(ct)}function quadraticLength(_e,_,et,tt,nt,it,at){for(var ot=_e,st=_,dt=0,ht=1/at,ct=1;ct<=at;ct++){var ut=ct*ht,ft=quadraticAt$1(_e,et,nt,ut),gt=quadraticAt$1(_,tt,it,ut),mt=ft-ot,vt=gt-st;dt+=Math.sqrt(mt*mt+vt*vt),ot=ft,st=gt}return dt}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(_e){var _=_e&&regexp.exec(_e);if(_){var et=_[1].split(","),tt=+trim$1(et[0]),nt=+trim$1(et[1]),it=+trim$1(et[2]),at=+trim$1(et[3]);if(isNaN(tt+nt+it+at))return;var ot=[];return function(st){return st<=0?0:st>=1?1:cubicRootAt(0,tt,it,1,st,ot)&&cubicAt(0,nt,at,1,ot[0])}}}var Clip=function(){function _e(_){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=_.life||1e3,this._delay=_.delay||0,this.loop=_.loop||!1,this.onframe=_.onframe||noop,this.ondestroy=_.ondestroy||noop,this.onrestart=_.onrestart||noop,_.easing&&this.setEasing(_.easing)}return _e.prototype.step=function(_,et){if(this._inited||(this._startTime=_+this._delay,this._inited=!0),this._paused){this._pausedTime+=et;return}var tt=this._life,nt=_-this._startTime-this._pausedTime,it=nt/tt;it<0&&(it=0),it=Math.min(it,1);var at=this.easingFunc,ot=at?at(it):it;if(this.onframe(ot),it===1)if(this.loop){var st=nt%tt;this._startTime=_-st,this._pausedTime=0,this.onrestart()}else return!0;return!1},_e.prototype.pause=function(){this._paused=!0},_e.prototype.resume=function(){this._paused=!1},_e.prototype.setEasing=function(_){this.easing=_,this.easingFunc=isFunction$3(_)?_:easingFuncs[_]||createCubicEasingFunc(_)},_e}(),Entry=function(){function _e(_){this.value=_}return _e}(),LinkedList=function(){function _e(){this._len=0}return _e.prototype.insert=function(_){var et=new Entry(_);return this.insertEntry(et),et},_e.prototype.insertEntry=function(_){this.head?(this.tail.next=_,_.prev=this.tail,_.next=null,this.tail=_):this.head=this.tail=_,this._len++},_e.prototype.remove=function(_){var et=_.prev,tt=_.next;et?et.next=tt:this.head=tt,tt?tt.prev=et:this.tail=et,_.next=_.prev=null,this._len--},_e.prototype.len=function(){return this._len},_e.prototype.clear=function(){this.head=this.tail=null,this._len=0},_e}(),LRU=function(){function _e(_){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=_}return _e.prototype.put=function(_,et){var tt=this._list,nt=this._map,it=null;if(nt[_]==null){var at=tt.len(),ot=this._lastRemovedEntry;if(at>=this._maxSize&&at>0){var st=tt.head;tt.remove(st),delete nt[st.key],it=st.value,this._lastRemovedEntry=st}ot?ot.value=et:ot=new Entry(et),ot.key=_,tt.insertEntry(ot),nt[_]=ot}return it},_e.prototype.get=function(_){var et=this._map[_],tt=this._list;if(et!=null)return et!==tt.tail&&(tt.remove(et),tt.insertEntry(et)),et.value},_e.prototype.clear=function(){this._list.clear(),this._map={}},_e.prototype.len=function(){return this._list.len()},_e}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(_e){return _e=Math.round(_e),_e<0?0:_e>255?255:_e}function clampCssAngle(_e){return _e=Math.round(_e),_e<0?0:_e>360?360:_e}function clampCssFloat(_e){return _e<0?0:_e>1?1:_e}function parseCssInt(_e){var _=_e;return _.length&&_.charAt(_.length-1)==="%"?clampCssByte(parseFloat(_)/100*255):clampCssByte(parseInt(_,10))}function parseCssFloat(_e){var _=_e;return _.length&&_.charAt(_.length-1)==="%"?clampCssFloat(parseFloat(_)/100):clampCssFloat(parseFloat(_))}function cssHueToRgb(_e,_,et){return et<0?et+=1:et>1&&(et-=1),et*6<1?_e+(_-_e)*et*6:et*2<1?_:et*3<2?_e+(_-_e)*(2/3-et)*6:_e}function lerpNumber(_e,_,et){return _e+(_-_e)*et}function setRgba(_e,_,et,tt,nt){return _e[0]=_,_e[1]=et,_e[2]=tt,_e[3]=nt,_e}function copyRgba(_e,_){return _e[0]=_[0],_e[1]=_[1],_e[2]=_[2],_e[3]=_[3],_e}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(_e,_){lastRemovedArr&&copyRgba(lastRemovedArr,_),lastRemovedArr=colorCache.put(_e,lastRemovedArr||_.slice())}function parse(_e,_){if(_e){_=_||[];var et=colorCache.get(_e);if(et)return copyRgba(_,et);_e=_e+"";var tt=_e.replace(/ /g,"").toLowerCase();if(tt in kCSSColorTable)return copyRgba(_,kCSSColorTable[tt]),putToCache(_e,_),_;var nt=tt.length;if(tt.charAt(0)==="#"){if(nt===4||nt===5){var it=parseInt(tt.slice(1,4),16);if(!(it>=0&&it<=4095)){setRgba(_,0,0,0,1);return}return setRgba(_,(it&3840)>>4|(it&3840)>>8,it&240|(it&240)>>4,it&15|(it&15)<<4,nt===5?parseInt(tt.slice(4),16)/15:1),putToCache(_e,_),_}else if(nt===7||nt===9){var it=parseInt(tt.slice(1,7),16);if(!(it>=0&&it<=16777215)){setRgba(_,0,0,0,1);return}return setRgba(_,(it&16711680)>>16,(it&65280)>>8,it&255,nt===9?parseInt(tt.slice(7),16)/255:1),putToCache(_e,_),_}return}var at=tt.indexOf("("),ot=tt.indexOf(")");if(at!==-1&&ot+1===nt){var st=tt.substr(0,at),dt=tt.substr(at+1,ot-(at+1)).split(","),ht=1;switch(st){case"rgba":if(dt.length!==4)return dt.length===3?setRgba(_,+dt[0],+dt[1],+dt[2],1):setRgba(_,0,0,0,1);ht=parseCssFloat(dt.pop());case"rgb":if(dt.length>=3)return setRgba(_,parseCssInt(dt[0]),parseCssInt(dt[1]),parseCssInt(dt[2]),dt.length===3?ht:parseCssFloat(dt[3])),putToCache(_e,_),_;setRgba(_,0,0,0,1);return;case"hsla":if(dt.length!==4){setRgba(_,0,0,0,1);return}return dt[3]=parseCssFloat(dt[3]),hsla2rgba(dt,_),putToCache(_e,_),_;case"hsl":if(dt.length!==3){setRgba(_,0,0,0,1);return}return hsla2rgba(dt,_),putToCache(_e,_),_;default:return}}setRgba(_,0,0,0,1)}}function hsla2rgba(_e,_){var et=(parseFloat(_e[0])%360+360)%360/360,tt=parseCssFloat(_e[1]),nt=parseCssFloat(_e[2]),it=nt<=.5?nt*(tt+1):nt+tt-nt*tt,at=nt*2-it;return _=_||[],setRgba(_,clampCssByte(cssHueToRgb(at,it,et+1/3)*255),clampCssByte(cssHueToRgb(at,it,et)*255),clampCssByte(cssHueToRgb(at,it,et-1/3)*255),1),_e.length===4&&(_[3]=_e[3]),_}function rgba2hsla(_e){if(_e){var _=_e[0]/255,et=_e[1]/255,tt=_e[2]/255,nt=Math.min(_,et,tt),it=Math.max(_,et,tt),at=it-nt,ot=(it+nt)/2,st,dt;if(at===0)st=0,dt=0;else{ot<.5?dt=at/(it+nt):dt=at/(2-it-nt);var ht=((it-_)/6+at/2)/at,ct=((it-et)/6+at/2)/at,ut=((it-tt)/6+at/2)/at;_===it?st=ut-ct:et===it?st=1/3+ht-ut:tt===it&&(st=2/3+ct-ht),st<0&&(st+=1),st>1&&(st-=1)}var ft=[st*360,dt,ot];return _e[3]!=null&&ft.push(_e[3]),ft}}function lift(_e,_){var et=parse(_e);if(et){for(var tt=0;tt<3;tt++)_<0?et[tt]=et[tt]*(1-_)|0:et[tt]=(255-et[tt])*_+et[tt]|0,et[tt]>255?et[tt]=255:et[tt]<0&&(et[tt]=0);return stringify(et,et.length===4?"rgba":"rgb")}}function toHex(_e){var _=parse(_e);if(_)return((1<<24)+(_[0]<<16)+(_[1]<<8)+ +_[2]).toString(16).slice(1)}function fastLerp(_e,_,et){if(!(!(_&&_.length)||!(_e>=0&&_e<=1))){et=et||[];var tt=_e*(_.length-1),nt=Math.floor(tt),it=Math.ceil(tt),at=_[nt],ot=_[it],st=tt-nt;return et[0]=clampCssByte(lerpNumber(at[0],ot[0],st)),et[1]=clampCssByte(lerpNumber(at[1],ot[1],st)),et[2]=clampCssByte(lerpNumber(at[2],ot[2],st)),et[3]=clampCssFloat(lerpNumber(at[3],ot[3],st)),et}}var fastMapToColor=fastLerp;function lerp(_e,_,et){if(!(!(_&&_.length)||!(_e>=0&&_e<=1))){var tt=_e*(_.length-1),nt=Math.floor(tt),it=Math.ceil(tt),at=parse(_[nt]),ot=parse(_[it]),st=tt-nt,dt=stringify([clampCssByte(lerpNumber(at[0],ot[0],st)),clampCssByte(lerpNumber(at[1],ot[1],st)),clampCssByte(lerpNumber(at[2],ot[2],st)),clampCssFloat(lerpNumber(at[3],ot[3],st))],"rgba");return et?{color:dt,leftIndex:nt,rightIndex:it,value:tt}:dt}}var mapToColor=lerp;function modifyHSL(_e,_,et,tt){var nt=parse(_e);if(_e)return nt=rgba2hsla(nt),_!=null&&(nt[0]=clampCssAngle(_)),et!=null&&(nt[1]=parseCssFloat(et)),tt!=null&&(nt[2]=parseCssFloat(tt)),stringify(hsla2rgba(nt),"rgba")}function modifyAlpha(_e,_){var et=parse(_e);if(et&&_!=null)return et[3]=clampCssFloat(_),stringify(et,"rgba")}function stringify(_e,_){if(!(!_e||!_e.length)){var et=_e[0]+","+_e[1]+","+_e[2];return(_==="rgba"||_==="hsva"||_==="hsla")&&(et+=","+_e[3]),_+"("+et+")"}}function lum(_e,_){var et=parse(_e);return et?(.299*et[0]+.587*et[1]+.114*et[2])*et[3]/255+(1-et[3])*_:0}function random(){return stringify([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}var liftedColorCache=new LRU(100);function liftColor(_e){if(isString$1(_e)){var _=liftedColorCache.get(_e);return _||(_=lift(_e,-.1),liftedColorCache.put(_e,_)),_}else if(isGradientObject(_e)){var et=extend({},_e);return et.colorStops=map$1(_e.colorStops,function(tt){return{offset:tt.offset,color:lift(tt.color,-.1)}}),et}return _e}const color$1=Object.freeze(Object.defineProperty({__proto__:null,fastLerp,fastMapToColor,lerp,lift,liftColor,lum,mapToColor,modifyAlpha,modifyHSL,parse,random,stringify,toHex},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(_e){var _;if(!_e||_e==="transparent")_e="none";else if(typeof _e=="string"&&_e.indexOf("rgba")>-1){var et=parse(_e);et&&(_e="rgb("+et[0]+","+et[1]+","+et[2]+")",_=et[3])}return{color:_e,opacity:_??1}}var EPSILON$3=1e-4;function isAroundZero(_e){return _e<EPSILON$3&&_e>-1e-4}function round3(_e){return mathRound$1(_e*1e3)/1e3}function round4(_e){return mathRound$1(_e*1e4)/1e4}function getMatrixStr(_e){return"matrix("+round3(_e[0])+","+round3(_e[1])+","+round3(_e[2])+","+round3(_e[3])+","+round4(_e[4])+","+round4(_e[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(_e,_,et){return et==="top"?_e+=_/2:et==="bottom"&&(_e-=_/2),_e}function hasShadow(_e){return _e&&(_e.shadowBlur||_e.shadowOffsetX||_e.shadowOffsetY)}function getShadowKey(_e){var _=_e.style,et=_e.getGlobalScale();return[_.shadowColor,(_.shadowBlur||0).toFixed(2),(_.shadowOffsetX||0).toFixed(2),(_.shadowOffsetY||0).toFixed(2),et[0],et[1]].join(",")}function isImagePattern(_e){return _e&&!!_e.image}function isSVGPattern(_e){return _e&&!!_e.svgElement}function isPattern(_e){return isImagePattern(_e)||isSVGPattern(_e)}function isLinearGradient(_e){return _e.type==="linear"}function isRadialGradient(_e){return _e.type==="radial"}function isGradient(_e){return _e&&(_e.type==="linear"||_e.type==="radial")}function getIdURL(_e){return"url(#"+_e+")"}function getPathPrecision(_e){var _=_e.getGlobalScale(),et=Math.max(_[0],_[1]);return Math.max(Math.ceil(Math.log(et)/Math.log(10)),1)}function getSRTTransformString(_e){var _=_e.x||0,et=_e.y||0,tt=(_e.rotation||0)*RADIAN_TO_DEGREE,nt=retrieve2(_e.scaleX,1),it=retrieve2(_e.scaleY,1),at=_e.skewX||0,ot=_e.skewY||0,st=[];return(_||et)&&st.push("translate("+_+"px,"+et+"px)"),tt&&st.push("rotate("+tt+")"),(nt!==1||it!==1)&&st.push("scale("+nt+","+it+")"),(at||ot)&&st.push("skew("+mathRound$1(at*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(ot*RADIAN_TO_DEGREE)+"deg)"),st.join(" ")}var encodeBase64=function(){return env.hasGlobalWindow&&isFunction$3(window.btoa)?function(_e){return window.btoa(unescape(encodeURIComponent(_e)))}:typeof Buffer<"u"?function(_e){return Buffer.from(_e).toString("base64")}:function(_e){return null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(_e,_,et){return(_-_e)*et+_e}function interpolate1DArray(_e,_,et,tt){for(var nt=_.length,it=0;it<nt;it++)_e[it]=interpolateNumber$1(_[it],et[it],tt);return _e}function interpolate2DArray(_e,_,et,tt){for(var nt=_.length,it=nt&&_[0].length,at=0;at<nt;at++){_e[at]||(_e[at]=[]);for(var ot=0;ot<it;ot++)_e[at][ot]=interpolateNumber$1(_[at][ot],et[at][ot],tt)}return _e}function add1DArray(_e,_,et,tt){for(var nt=_.length,it=0;it<nt;it++)_e[it]=_[it]+et[it]*tt;return _e}function add2DArray(_e,_,et,tt){for(var nt=_.length,it=nt&&_[0].length,at=0;at<nt;at++){_e[at]||(_e[at]=[]);for(var ot=0;ot<it;ot++)_e[at][ot]=_[at][ot]+et[at][ot]*tt}return _e}function fillColorStops(_e,_){for(var et=_e.length,tt=_.length,nt=et>tt?_:_e,it=Math.min(et,tt),at=nt[it-1]||{color:[0,0,0,0],offset:0},ot=it;ot<Math.max(et,tt);ot++)nt.push({offset:at.offset,color:at.color.slice()})}function fillArray(_e,_,et){var tt=_e,nt=_;if(!(!tt.push||!nt.push)){var it=tt.length,at=nt.length;if(it!==at){var ot=it>at;if(ot)tt.length=at;else for(var st=it;st<at;st++)tt.push(et===1?nt[st]:arraySlice.call(nt[st]))}for(var dt=tt[0]&&tt[0].length,st=0;st<tt.length;st++)if(et===1)isNaN(tt[st])&&(tt[st]=nt[st]);else for(var ht=0;ht<dt;ht++)isNaN(tt[st][ht])&&(tt[st][ht]=nt[st][ht])}}function cloneValue(_e){if(isArrayLike(_e)){var _=_e.length;if(isArrayLike(_e[0])){for(var et=[],tt=0;tt<_;tt++)et.push(arraySlice.call(_e[tt]));return et}return arraySlice.call(_e)}return _e}function rgba2String(_e){return _e[0]=Math.floor(_e[0])||0,_e[1]=Math.floor(_e[1])||0,_e[2]=Math.floor(_e[2])||0,_e[3]=_e[3]==null?1:_e[3],"rgba("+_e.join(",")+")"}function guessArrayDim(_e){return isArrayLike(_e&&_e[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(_e){return _e===VALUE_TYPE_LINEAR_GRADIENT||_e===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(_e){return _e===VALUE_TYPE_1D_ARRAY||_e===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function _e(_){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=_}return _e.prototype.isFinished=function(){return this._finished},_e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},_e.prototype.needsAnimate=function(){return this.keyframes.length>=1},_e.prototype.getAdditiveTrack=function(){return this._additiveTrack},_e.prototype.addKeyframe=function(_,et,tt){this._needsSort=!0;var nt=this.keyframes,it=nt.length,at=!1,ot=VALUE_TYPE_UNKOWN,st=et;if(isArrayLike(et)){var dt=guessArrayDim(et);ot=dt,(dt===1&&!isNumber(et[0])||dt===2&&!isNumber(et[0][0]))&&(at=!0)}else if(isNumber(et)&&!eqNaN(et))ot=VALUE_TYPE_NUMBER;else if(isString$1(et))if(!isNaN(+et))ot=VALUE_TYPE_NUMBER;else{var ht=parse(et);ht&&(st=ht,ot=VALUE_TYPE_COLOR)}else if(isGradientObject(et)){var ct=extend({},st);ct.colorStops=map$1(et.colorStops,function(ft){return{offset:ft.offset,color:parse(ft.color)}}),isLinearGradient(et)?ot=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(et)&&(ot=VALUE_TYPE_RADIAL_GRADIENT),st=ct}it===0?this.valType=ot:(ot!==this.valType||ot===VALUE_TYPE_UNKOWN)&&(at=!0),this.discrete=this.discrete||at;var ut={time:_,value:st,rawValue:et,percent:0};return tt&&(ut.easing=tt,ut.easingFunc=isFunction$3(tt)?tt:easingFuncs[tt]||createCubicEasingFunc(tt)),nt.push(ut),ut},_e.prototype.prepare=function(_,et){var tt=this.keyframes;this._needsSort&&tt.sort(function(mt,vt){return mt.time-vt.time});for(var nt=this.valType,it=tt.length,at=tt[it-1],ot=this.discrete,st=isArrayValueType(nt),dt=isGradientValueType(nt),ht=0;ht<it;ht++){var ct=tt[ht],ut=ct.value,ft=at.value;ct.percent=ct.time/_,ot||(st&&ht!==it-1?fillArray(ut,ft,nt):dt&&fillColorStops(ut.colorStops,ft.colorStops))}if(!ot&&nt!==VALUE_TYPE_RADIAL_GRADIENT&&et&&this.needsAnimate()&&et.needsAnimate()&&nt===et.valType&&!et._finished){this._additiveTrack=et;for(var gt=tt[0].value,ht=0;ht<it;ht++)nt===VALUE_TYPE_NUMBER?tt[ht].additiveValue=tt[ht].value-gt:nt===VALUE_TYPE_COLOR?tt[ht].additiveValue=add1DArray([],tt[ht].value,gt,-1):isArrayValueType(nt)&&(tt[ht].additiveValue=nt===VALUE_TYPE_1D_ARRAY?add1DArray([],tt[ht].value,gt,-1):add2DArray([],tt[ht].value,gt,-1))}},_e.prototype.step=function(_,et){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var tt=this._additiveTrack!=null,nt=tt?"additiveValue":"value",it=this.valType,at=this.keyframes,ot=at.length,st=this.propName,dt=it===VALUE_TYPE_COLOR,ht,ct=this._lastFr,ut=Math.min,ft,gt;if(ot===1)ft=gt=at[0];else{if(et<0)ht=0;else if(et<this._lastFrP){var mt=ut(ct+1,ot-1);for(ht=mt;ht>=0&&!(at[ht].percent<=et);ht--);ht=ut(ht,ot-2)}else{for(ht=ct;ht<ot&&!(at[ht].percent>et);ht++);ht=ut(ht-1,ot-2)}gt=at[ht+1],ft=at[ht]}if(ft&&gt){this._lastFr=ht,this._lastFrP=et;var vt=gt.percent-ft.percent,yt=vt===0?1:ut((et-ft.percent)/vt,1);gt.easingFunc&&(yt=gt.easingFunc(yt));var bt=tt?this._additiveValue:dt?tmpRgba:_[st];if((isArrayValueType(it)||dt)&&!bt&&(bt=this._additiveValue=[]),this.discrete)_[st]=yt<1?ft.rawValue:gt.rawValue;else if(isArrayValueType(it))it===VALUE_TYPE_1D_ARRAY?interpolate1DArray(bt,ft[nt],gt[nt],yt):interpolate2DArray(bt,ft[nt],gt[nt],yt);else if(isGradientValueType(it)){var _t=ft[nt],xt=gt[nt],St=it===VALUE_TYPE_LINEAR_GRADIENT;_[st]={type:St?"linear":"radial",x:interpolateNumber$1(_t.x,xt.x,yt),y:interpolateNumber$1(_t.y,xt.y,yt),colorStops:map$1(_t.colorStops,function(wt,Ct){var Et=xt.colorStops[Ct];return{offset:interpolateNumber$1(wt.offset,Et.offset,yt),color:rgba2String(interpolate1DArray([],wt.color,Et.color,yt))}}),global:xt.global},St?(_[st].x2=interpolateNumber$1(_t.x2,xt.x2,yt),_[st].y2=interpolateNumber$1(_t.y2,xt.y2,yt)):_[st].r=interpolateNumber$1(_t.r,xt.r,yt)}else if(dt)interpolate1DArray(bt,ft[nt],gt[nt],yt),tt||(_[st]=rgba2String(bt));else{var Tt=interpolateNumber$1(ft[nt],gt[nt],yt);tt?this._additiveValue=Tt:_[st]=Tt}tt&&this._addToTarget(_)}}},_e.prototype._addToTarget=function(_){var et=this.valType,tt=this.propName,nt=this._additiveValue;et===VALUE_TYPE_NUMBER?_[tt]=_[tt]+nt:et===VALUE_TYPE_COLOR?(parse(_[tt],tmpRgba),add1DArray(tmpRgba,tmpRgba,nt,1),_[tt]=rgba2String(tmpRgba)):et===VALUE_TYPE_1D_ARRAY?add1DArray(_[tt],_[tt],nt,1):et===VALUE_TYPE_2D_ARRAY&&add2DArray(_[tt],_[tt],nt,1)},_e}(),Animator=function(){function _e(_,et,tt,nt){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=_,this._loop=et,et&&nt){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=nt,this._allowDiscrete=tt}return _e.prototype.getMaxTime=function(){return this._maxTime},_e.prototype.getDelay=function(){return this._delay},_e.prototype.getLoop=function(){return this._loop},_e.prototype.getTarget=function(){return this._target},_e.prototype.changeTarget=function(_){this._target=_},_e.prototype.when=function(_,et,tt){return this.whenWithKeys(_,et,keys(et),tt)},_e.prototype.whenWithKeys=function(_,et,tt,nt){for(var it=this._tracks,at=0;at<tt.length;at++){var ot=tt[at],st=it[ot];if(!st){st=it[ot]=new Track(ot);var dt=void 0,ht=this._getAdditiveTrack(ot);if(ht){var ct=ht.keyframes,ut=ct[ct.length-1];dt=ut&&ut.value,ht.valType===VALUE_TYPE_COLOR&&dt&&(dt=rgba2String(dt))}else dt=this._target[ot];if(dt==null)continue;_>0&&st.addKeyframe(0,cloneValue(dt),nt),this._trackKeys.push(ot)}st.addKeyframe(_,cloneValue(et[ot]),nt)}return this._maxTime=Math.max(this._maxTime,_),this},_e.prototype.pause=function(){this._clip.pause(),this._paused=!0},_e.prototype.resume=function(){this._clip.resume(),this._paused=!1},_e.prototype.isPaused=function(){return!!this._paused},_e.prototype.duration=function(_){return this._maxTime=_,this._force=!0,this},_e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var _=this._doneCbs;if(_)for(var et=_.length,tt=0;tt<et;tt++)_[tt].call(this)},_e.prototype._abortedCallback=function(){this._setTracksFinished();var _=this.animation,et=this._abortedCbs;if(_&&_.removeClip(this._clip),this._clip=null,et)for(var tt=0;tt<et.length;tt++)et[tt].call(this)},_e.prototype._setTracksFinished=function(){for(var _=this._tracks,et=this._trackKeys,tt=0;tt<et.length;tt++)_[et[tt]].setFinished()},_e.prototype._getAdditiveTrack=function(_){var et,tt=this._additiveAnimators;if(tt)for(var nt=0;nt<tt.length;nt++){var it=tt[nt].getTrack(_);it&&(et=it)}return et},_e.prototype.start=function(_){if(!(this._started>0)){this._started=1;for(var et=this,tt=[],nt=this._maxTime||0,it=0;it<this._trackKeys.length;it++){var at=this._trackKeys[it],ot=this._tracks[at],st=this._getAdditiveTrack(at),dt=ot.keyframes,ht=dt.length;if(ot.prepare(nt,st),ot.needsAnimate())if(!this._allowDiscrete&&ot.discrete){var ct=dt[ht-1];ct&&(et._target[ot.propName]=ct.rawValue),ot.setFinished()}else tt.push(ot)}if(tt.length||this._force){var ut=new Clip({life:nt,loop:this._loop,delay:this._delay||0,onframe:function(ft){et._started=2;var gt=et._additiveAnimators;if(gt){for(var mt=!1,vt=0;vt<gt.length;vt++)if(gt[vt]._clip){mt=!0;break}mt||(et._additiveAnimators=null)}for(var vt=0;vt<tt.length;vt++)tt[vt].step(et._target,ft);var yt=et._onframeCbs;if(yt)for(var vt=0;vt<yt.length;vt++)yt[vt](et._target,ft)},ondestroy:function(){et._doneCallback()}});this._clip=ut,this.animation&&this.animation.addClip(ut),_&&ut.setEasing(_)}else this._doneCallback();return this}},_e.prototype.stop=function(_){if(this._clip){var et=this._clip;_&&et.onframe(1),this._abortedCallback()}},_e.prototype.delay=function(_){return this._delay=_,this},_e.prototype.during=function(_){return _&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(_)),this},_e.prototype.done=function(_){return _&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(_)),this},_e.prototype.aborted=function(_){return _&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(_)),this},_e.prototype.getClip=function(){return this._clip},_e.prototype.getTrack=function(_){return this._tracks[_]},_e.prototype.getTracks=function(){var _=this;return map$1(this._trackKeys,function(et){return _._tracks[et]})},_e.prototype.stopTracks=function(_,et){if(!_.length||!this._clip)return!0;for(var tt=this._tracks,nt=this._trackKeys,it=0;it<_.length;it++){var at=tt[_[it]];at&&!at.isFinished()&&(et?at.step(this._target,1):this._started===1&&at.step(this._target,0),at.setFinished())}for(var ot=!0,it=0;it<nt.length;it++)if(!tt[nt[it]].isFinished()){ot=!1;break}return ot&&this._abortedCallback(),ot},_e.prototype.saveTo=function(_,et,tt){if(_){et=et||this._trackKeys;for(var nt=0;nt<et.length;nt++){var it=et[nt],at=this._tracks[it];if(!(!at||at.isFinished())){var ot=at.keyframes,st=ot[tt?0:ot.length-1];st&&(_[it]=cloneValue(st.rawValue))}}}},_e.prototype.__changeFinalValue=function(_,et){et=et||keys(_);for(var tt=0;tt<et.length;tt++){var nt=et[tt],it=this._tracks[nt];if(it){var at=it.keyframes;if(at.length>1){var ot=at.pop();it.addKeyframe(ot.time,_[nt]),it.prepare(this._maxTime,it.getAdditiveTrack())}}}},_e}();function getTime(){return new Date().getTime()}var Animation=function(_e){__extends(_,_e);function _(et){var tt=_e.call(this)||this;return tt._running=!1,tt._time=0,tt._pausedTime=0,tt._pauseStart=0,tt._paused=!1,et=et||{},tt.stage=et.stage||{},tt}return _.prototype.addClip=function(et){et.animation&&this.removeClip(et),this._head?(this._tail.next=et,et.prev=this._tail,et.next=null,this._tail=et):this._head=this._tail=et,et.animation=this},_.prototype.addAnimator=function(et){et.animation=this;var tt=et.getClip();tt&&this.addClip(tt)},_.prototype.removeClip=function(et){if(et.animation){var tt=et.prev,nt=et.next;tt?tt.next=nt:this._head=nt,nt?nt.prev=tt:this._tail=tt,et.next=et.prev=et.animation=null}},_.prototype.removeAnimator=function(et){var tt=et.getClip();tt&&this.removeClip(tt),et.animation=null},_.prototype.update=function(et){for(var tt=getTime()-this._pausedTime,nt=tt-this._time,it=this._head;it;){var at=it.next,ot=it.step(tt,nt);ot&&(it.ondestroy(),this.removeClip(it)),it=at}this._time=tt,et||(this.trigger("frame",nt),this.stage.update&&this.stage.update())},_.prototype._startLoop=function(){var et=this;this._running=!0;function tt(){et._running&&(requestAnimationFrame$1(tt),!et._paused&&et.update())}requestAnimationFrame$1(tt)},_.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},_.prototype.stop=function(){this._running=!1},_.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},_.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},_.prototype.clear=function(){for(var et=this._head;et;){var tt=et.next;et.prev=et.next=et.animation=null,et=tt}this._head=this._tail=null},_.prototype.isFinished=function(){return this._head==null},_.prototype.animate=function(et,tt){tt=tt||{},this.start();var nt=new Animator(et,tt.loop);return this.addAnimator(nt),nt},_}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var _e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],_=["touchstart","touchend","touchmove"],et={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},tt=map$1(_e,function(nt){var it=nt.replace("mouse","pointer");return et.hasOwnProperty(it)?it:nt});return{mouse:_e,touch:_,pointer:tt}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(_e){var _=_e.pointerType;return _==="pen"||_==="touch"}function setTouchTimer(_e){_e.touching=!0,_e.touchTimer!=null&&(clearTimeout(_e.touchTimer),_e.touchTimer=null),_e.touchTimer=setTimeout(function(){_e.touching=!1,_e.touchTimer=null},700)}function markTouch(_e){_e&&(_e.zrByTouch=!0)}function normalizeGlobalEvent(_e,_){return normalizeEvent(_e.dom,new FakeGlobalEvent(_e,_),!0)}function isLocalEl(_e,_){for(var et=_,tt=!1;et&&et.nodeType!==9&&!(tt=et.domBelongToZr||et!==_&&et===_e.painterRoot);)et=et.parentNode;return tt}var FakeGlobalEvent=function(){function _e(_,et){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=et.type,this.target=this.currentTarget=_.dom,this.pointerType=et.pointerType,this.clientX=et.clientX,this.clientY=et.clientY}return _e}(),localDOMHandlers={mousedown:function(_e){_e=normalizeEvent(this.dom,_e),this.__mayPointerCapture=[_e.zrX,_e.zrY],this.trigger("mousedown",_e)},mousemove:function(_e){_e=normalizeEvent(this.dom,_e);var _=this.__mayPointerCapture;_&&(_e.zrX!==_[0]||_e.zrY!==_[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",_e)},mouseup:function(_e){_e=normalizeEvent(this.dom,_e),this.__togglePointerCapture(!1),this.trigger("mouseup",_e)},mouseout:function(_e){_e=normalizeEvent(this.dom,_e);var _=_e.toElement||_e.relatedTarget;isLocalEl(this,_)||(this.__pointerCapturing&&(_e.zrEventControl="no_globalout"),this.trigger("mouseout",_e))},wheel:function(_e){wheelEventSupported=!0,_e=normalizeEvent(this.dom,_e),this.trigger("mousewheel",_e)},mousewheel:function(_e){wheelEventSupported||(_e=normalizeEvent(this.dom,_e),this.trigger("mousewheel",_e))},touchstart:function(_e){_e=normalizeEvent(this.dom,_e),markTouch(_e),this.__lastTouchMoment=new Date,this.handler.processGesture(_e,"start"),localDOMHandlers.mousemove.call(this,_e),localDOMHandlers.mousedown.call(this,_e)},touchmove:function(_e){_e=normalizeEvent(this.dom,_e),markTouch(_e),this.handler.processGesture(_e,"change"),localDOMHandlers.mousemove.call(this,_e)},touchend:function(_e){_e=normalizeEvent(this.dom,_e),markTouch(_e),this.handler.processGesture(_e,"end"),localDOMHandlers.mouseup.call(this,_e),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,_e)},pointerdown:function(_e){localDOMHandlers.mousedown.call(this,_e)},pointermove:function(_e){isPointerFromTouch(_e)||localDOMHandlers.mousemove.call(this,_e)},pointerup:function(_e){localDOMHandlers.mouseup.call(this,_e)},pointerout:function(_e){isPointerFromTouch(_e)||localDOMHandlers.mouseout.call(this,_e)}};each$f(["click","dblclick","contextmenu"],function(_e){localDOMHandlers[_e]=function(_){_=normalizeEvent(this.dom,_),this.trigger(_e,_)}});var globalDOMHandlers={pointermove:function(_e){isPointerFromTouch(_e)||globalDOMHandlers.mousemove.call(this,_e)},pointerup:function(_e){globalDOMHandlers.mouseup.call(this,_e)},mousemove:function(_e){this.trigger("mousemove",_e)},mouseup:function(_e){var _=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",_e),_&&(_e.zrEventControl="only_globalout",this.trigger("mouseout",_e))}};function mountLocalDOMEventListeners(_e,_){var et=_.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(tt){mountSingleDOMEventListener(_,tt,function(nt){et[tt].call(_e,nt)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(tt){mountSingleDOMEventListener(_,tt,function(nt){et[tt].call(_e,nt),setTouchTimer(_)})}),each$f(localNativeListenerNames.mouse,function(tt){mountSingleDOMEventListener(_,tt,function(nt){nt=getNativeEvent(nt),_.touching||et[tt].call(_e,nt)})}))}function mountGlobalDOMEventListeners(_e,_){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,et):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,et);function et(tt){function nt(it){it=getNativeEvent(it),isLocalEl(_e,it.target)||(it=normalizeGlobalEvent(_e,it),_.domHandlers[tt].call(_e,it))}mountSingleDOMEventListener(_,tt,nt,{capture:!0})}}function mountSingleDOMEventListener(_e,_,et,tt){_e.mounted[_]=et,_e.listenerOpts[_]=tt,addEventListener(_e.domTarget,_,et,tt)}function unmountDOMEventListeners(_e){var _=_e.mounted;for(var et in _)_.hasOwnProperty(et)&&removeEventListener(_e.domTarget,et,_[et],_e.listenerOpts[et]);_e.mounted={}}var DOMHandlerScope=function(){function _e(_,et){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=_,this.domHandlers=et}return _e}(),HandlerDomProxy=function(_e){__extends(_,_e);function _(et,tt){var nt=_e.call(this)||this;return nt.__pointerCapturing=!1,nt.dom=et,nt.painterRoot=tt,nt._localHandlerScope=new DOMHandlerScope(et,localDOMHandlers),globalEventSupported&&(nt._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(nt,nt._localHandlerScope),nt}return _.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},_.prototype.setCursor=function(et){this.dom.style&&(this.dom.style.cursor=et||"default")},_.prototype.__togglePointerCapture=function(et){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+et){this.__pointerCapturing=et;var tt=this._globalHandlerScope;et?mountGlobalDOMEventListeners(this,tt):unmountDOMEventListeners(tt)}},_}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(_e){return _e>EPSILON$2||_e<-5e-5}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function _e(){}return _e.prototype.getLocalTransform=function(_){return _e.getLocalTransform(this,_)},_e.prototype.setPosition=function(_){this.x=_[0],this.y=_[1]},_e.prototype.setScale=function(_){this.scaleX=_[0],this.scaleY=_[1]},_e.prototype.setSkew=function(_){this.skewX=_[0],this.skewY=_[1]},_e.prototype.setOrigin=function(_){this.originX=_[0],this.originY=_[1]},_e.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},_e.prototype.updateTransform=function(){var _=this.parent&&this.parent.transform,et=this.needLocalTransform(),tt=this.transform;if(!(et||_)){tt&&(mIdentity(tt),this.invTransform=null);return}tt=tt||create$1(),et?this.getLocalTransform(tt):mIdentity(tt),_&&(et?mul(tt,_,tt):copy(tt,_)),this.transform=tt,this._resolveGlobalScaleRatio(tt)},_e.prototype._resolveGlobalScaleRatio=function(_){var et=this.globalScaleRatio;if(et!=null&&et!==1){this.getGlobalScale(scaleTmp);var tt=scaleTmp[0]<0?-1:1,nt=scaleTmp[1]<0?-1:1,it=((scaleTmp[0]-tt)*et+tt)/scaleTmp[0]||0,at=((scaleTmp[1]-nt)*et+nt)/scaleTmp[1]||0;_[0]*=it,_[1]*=it,_[2]*=at,_[3]*=at}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,_)},_e.prototype.getComputedTransform=function(){for(var _=this,et=[];_;)et.push(_),_=_.parent;for(;_=et.pop();)_.updateTransform();return this.transform},_e.prototype.setLocalTransform=function(_){if(_){var et=_[0]*_[0]+_[1]*_[1],tt=_[2]*_[2]+_[3]*_[3],nt=Math.atan2(_[1],_[0]),it=Math.PI/2+nt-Math.atan2(_[3],_[2]);tt=Math.sqrt(tt)*Math.cos(it),et=Math.sqrt(et),this.skewX=it,this.skewY=0,this.rotation=-nt,this.x=+_[4],this.y=+_[5],this.scaleX=et,this.scaleY=tt,this.originX=0,this.originY=0}},_e.prototype.decomposeTransform=function(){if(this.transform){var _=this.parent,et=this.transform;_&&_.transform&&(_.invTransform=_.invTransform||create$1(),mul(tmpTransform,_.invTransform,et),et=tmpTransform);var tt=this.originX,nt=this.originY;(tt||nt)&&(originTransform[4]=tt,originTransform[5]=nt,mul(tmpTransform,et,originTransform),tmpTransform[4]-=tt,tmpTransform[5]-=nt,et=tmpTransform),this.setLocalTransform(et)}},_e.prototype.getGlobalScale=function(_){var et=this.transform;return _=_||[],et?(_[0]=Math.sqrt(et[0]*et[0]+et[1]*et[1]),_[1]=Math.sqrt(et[2]*et[2]+et[3]*et[3]),et[0]<0&&(_[0]=-_[0]),et[3]<0&&(_[1]=-_[1]),_):(_[0]=1,_[1]=1,_)},_e.prototype.transformCoordToLocal=function(_,et){var tt=[_,et],nt=this.invTransform;return nt&&applyTransform$1(tt,tt,nt),tt},_e.prototype.transformCoordToGlobal=function(_,et){var tt=[_,et],nt=this.transform;return nt&&applyTransform$1(tt,tt,nt),tt},_e.prototype.getLineScale=function(){var _=this.transform;return _&&abs(_[0]-1)>1e-10&&abs(_[3]-1)>1e-10?Math.sqrt(abs(_[0]*_[3]-_[2]*_[1])):1},_e.prototype.copyTransform=function(_){copyTransform(this,_)},_e.getLocalTransform=function(_,et){et=et||[];var tt=_.originX||0,nt=_.originY||0,it=_.scaleX,at=_.scaleY,ot=_.anchorX,st=_.anchorY,dt=_.rotation||0,ht=_.x,ct=_.y,ut=_.skewX?Math.tan(_.skewX):0,ft=_.skewY?Math.tan(-_.skewY):0;if(tt||nt||ot||st){var gt=tt+ot,mt=nt+st;et[4]=-gt*it-ut*mt*at,et[5]=-mt*at-ft*gt*it}else et[4]=et[5]=0;return et[0]=it,et[3]=at,et[1]=ft*it,et[2]=ut*at,dt&&rotate(et,et,dt),et[4]+=tt+ht,et[5]+=nt+ct,et},_e.initDefaultProps=function(){var _=_e.prototype;_.scaleX=_.scaleY=_.globalScaleRatio=1,_.x=_.y=_.originX=_.originY=_.skewX=_.skewY=_.rotation=_.anchorX=_.anchorY=0}(),_e}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(_e,_){for(var et=0;et<TRANSFORMABLE_PROPS.length;et++){var tt=TRANSFORMABLE_PROPS[et];_e[tt]=_[tt]}}var textWidthCache={};function getWidth(_e,_){_=_||DEFAULT_FONT;var et=textWidthCache[_];et||(et=textWidthCache[_]=new LRU(500));var tt=et.get(_e);return tt==null&&(tt=platformApi.measureText(_e,_).width,et.put(_e,tt)),tt}function innerGetBoundingRect(_e,_,et,tt){var nt=getWidth(_e,_),it=getLineHeight(_),at=adjustTextX(0,nt,et),ot=adjustTextY(0,it,tt),st=new BoundingRect(at,ot,nt,it);return st}function getBoundingRect(_e,_,et,tt){var nt=((_e||"")+"").split(`
`),it=nt.length;if(it===1)return innerGetBoundingRect(nt[0],_,et,tt);for(var at=new BoundingRect(0,0,0,0),ot=0;ot<nt.length;ot++){var st=innerGetBoundingRect(nt[ot],_,et,tt);ot===0?at.copy(st):at.union(st)}return at}function adjustTextX(_e,_,et){return et==="right"?_e-=_:et==="center"&&(_e-=_/2),_e}function adjustTextY(_e,_,et){return et==="middle"?_e-=_/2:et==="bottom"&&(_e-=_),_e}function getLineHeight(_e){return getWidth("",_e)}function parsePercent$1(_e,_){return typeof _e=="string"?_e.lastIndexOf("%")>=0?parseFloat(_e)/100*_:parseFloat(_e):_e}function calculateTextPosition(_e,_,et){var tt=_.position||"inside",nt=_.distance!=null?_.distance:5,it=et.height,at=et.width,ot=it/2,st=et.x,dt=et.y,ht="left",ct="top";if(tt instanceof Array)st+=parsePercent$1(tt[0],et.width),dt+=parsePercent$1(tt[1],et.height),ht=null,ct=null;else switch(tt){case"left":st-=nt,dt+=ot,ht="right",ct="middle";break;case"right":st+=nt+at,dt+=ot,ct="middle";break;case"top":st+=at/2,dt-=nt,ht="center",ct="bottom";break;case"bottom":st+=at/2,dt+=it+nt,ht="center";break;case"inside":st+=at/2,dt+=ot,ht="center",ct="middle";break;case"insideLeft":st+=nt,dt+=ot,ct="middle";break;case"insideRight":st+=at-nt,dt+=ot,ht="right",ct="middle";break;case"insideTop":st+=at/2,dt+=nt,ht="center";break;case"insideBottom":st+=at/2,dt+=it-nt,ht="center",ct="bottom";break;case"insideTopLeft":st+=nt,dt+=nt;break;case"insideTopRight":st+=at-nt,dt+=nt,ht="right";break;case"insideBottomLeft":st+=nt,dt+=it-nt,ct="bottom";break;case"insideBottomRight":st+=at-nt,dt+=it-nt,ht="right",ct="bottom";break}return _e=_e||{},_e.x=st,_e.y=dt,_e.align=ht,_e.verticalAlign=ct,_e}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(_e,_){return _e[_]=!0,_e},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element$1=function(){function _e(_){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(_)}return _e.prototype._init=function(_){this.attr(_)},_e.prototype.drift=function(_,et,tt){switch(this.draggable){case"horizontal":et=0;break;case"vertical":_=0;break}var nt=this.transform;nt||(nt=this.transform=[1,0,0,1,0,0]),nt[4]+=_,nt[5]+=et,this.decomposeTransform(),this.markRedraw()},_e.prototype.beforeUpdate=function(){},_e.prototype.afterUpdate=function(){},_e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},_e.prototype.updateInnerText=function(_){var et=this._textContent;if(et&&(!et.ignore||_)){this.textConfig||(this.textConfig={});var tt=this.textConfig,nt=tt.local,it=et.innerTransformable,at=void 0,ot=void 0,st=!1;it.parent=nt?this:null;var dt=!1;if(it.copyTransform(et),tt.position!=null){var ht=tmpBoundingRect;tt.layoutRect?ht.copy(tt.layoutRect):ht.copy(this.getBoundingRect()),nt||ht.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,tt,ht):calculateTextPosition(tmpTextPosCalcRes,tt,ht),it.x=tmpTextPosCalcRes.x,it.y=tmpTextPosCalcRes.y,at=tmpTextPosCalcRes.align,ot=tmpTextPosCalcRes.verticalAlign;var ct=tt.origin;if(ct&&tt.rotation!=null){var ut=void 0,ft=void 0;ct==="center"?(ut=ht.width*.5,ft=ht.height*.5):(ut=parsePercent$1(ct[0],ht.width),ft=parsePercent$1(ct[1],ht.height)),dt=!0,it.originX=-it.x+ut+(nt?0:ht.x),it.originY=-it.y+ft+(nt?0:ht.y)}}tt.rotation!=null&&(it.rotation=tt.rotation);var gt=tt.offset;gt&&(it.x+=gt[0],it.y+=gt[1],dt||(it.originX=-gt[0],it.originY=-gt[1]));var mt=tt.inside==null?typeof tt.position=="string"&&tt.position.indexOf("inside")>=0:tt.inside,vt=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),yt=void 0,bt=void 0,_t=void 0;mt&&this.canBeInsideText()?(yt=tt.insideFill,bt=tt.insideStroke,(yt==null||yt==="auto")&&(yt=this.getInsideTextFill()),(bt==null||bt==="auto")&&(bt=this.getInsideTextStroke(yt),_t=!0)):(yt=tt.outsideFill,bt=tt.outsideStroke,(yt==null||yt==="auto")&&(yt=this.getOutsideFill()),(bt==null||bt==="auto")&&(bt=this.getOutsideStroke(yt),_t=!0)),yt=yt||"#000",(yt!==vt.fill||bt!==vt.stroke||_t!==vt.autoStroke||at!==vt.align||ot!==vt.verticalAlign)&&(st=!0,vt.fill=yt,vt.stroke=bt,vt.autoStroke=_t,vt.align=at,vt.verticalAlign=ot,et.setDefaultTextStyle(vt)),et.__dirty|=REDRAW_BIT,st&&et.dirtyStyle(!0)}},_e.prototype.canBeInsideText=function(){return!0},_e.prototype.getInsideTextFill=function(){return"#fff"},_e.prototype.getInsideTextStroke=function(_){return"#000"},_e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},_e.prototype.getOutsideStroke=function(_){var et=this.__zr&&this.__zr.getBackgroundColor(),tt=typeof et=="string"&&parse(et);tt||(tt=[255,255,255,1]);for(var nt=tt[3],it=this.__zr.isDarkMode(),at=0;at<3;at++)tt[at]=tt[at]*nt+(it?0:255)*(1-nt);return tt[3]=1,stringify(tt,"rgba")},_e.prototype.traverse=function(_,et){},_e.prototype.attrKV=function(_,et){_==="textConfig"?this.setTextConfig(et):_==="textContent"?this.setTextContent(et):_==="clipPath"?this.setClipPath(et):_==="extra"?(this.extra=this.extra||{},extend(this.extra,et)):this[_]=et},_e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},_e.prototype.show=function(){this.ignore=!1,this.markRedraw()},_e.prototype.attr=function(_,et){if(typeof _=="string")this.attrKV(_,et);else if(isObject$4(_))for(var tt=_,nt=keys(tt),it=0;it<nt.length;it++){var at=nt[it];this.attrKV(at,_[at])}return this.markRedraw(),this},_e.prototype.saveCurrentToNormalState=function(_){this._innerSaveToNormal(_);for(var et=this._normalState,tt=0;tt<this.animators.length;tt++){var nt=this.animators[tt],it=nt.__fromStateTransition;if(!(nt.getLoop()||it&&it!==PRESERVED_NORMAL_STATE)){var at=nt.targetName,ot=at?et[at]:et;nt.saveTo(ot)}}},_e.prototype._innerSaveToNormal=function(_){var et=this._normalState;et||(et=this._normalState={}),_.textConfig&&!et.textConfig&&(et.textConfig=this.textConfig),this._savePrimaryToNormal(_,et,PRIMARY_STATES_KEYS$1)},_e.prototype._savePrimaryToNormal=function(_,et,tt){for(var nt=0;nt<tt.length;nt++){var it=tt[nt];_[it]!=null&&!(it in et)&&(et[it]=this[it])}},_e.prototype.hasState=function(){return this.currentStates.length>0},_e.prototype.getState=function(_){return this.states[_]},_e.prototype.ensureState=function(_){var et=this.states;return et[_]||(et[_]={}),et[_]},_e.prototype.clearStates=function(_){this.useState(PRESERVED_NORMAL_STATE,!1,_)},_e.prototype.useState=function(_,et,tt,nt){var it=_===PRESERVED_NORMAL_STATE,at=this.hasState();if(!(!at&&it)){var ot=this.currentStates,st=this.stateTransition;if(!(indexOf(ot,_)>=0&&(et||ot.length===1))){var dt;if(this.stateProxy&&!it&&(dt=this.stateProxy(_)),dt||(dt=this.states&&this.states[_]),!dt&&!it){logError("State "+_+" not exists.");return}it||this.saveCurrentToNormalState(dt);var ht=!!(dt&&dt.hoverLayer||nt);ht&&this._toggleHoverLayerFlag(!0),this._applyStateObj(_,dt,this._normalState,et,!tt&&!this.__inHover&&st&&st.duration>0,st);var ct=this._textContent,ut=this._textGuide;return ct&&ct.useState(_,et,tt,ht),ut&&ut.useState(_,et,tt,ht),it?(this.currentStates=[],this._normalState={}):et?this.currentStates.push(_):this.currentStates=[_],this._updateAnimationTargets(),this.markRedraw(),!ht&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),dt}}},_e.prototype.useStates=function(_,et,tt){if(!_.length)this.clearStates();else{var nt=[],it=this.currentStates,at=_.length,ot=at===it.length;if(ot){for(var st=0;st<at;st++)if(_[st]!==it[st]){ot=!1;break}}if(ot)return;for(var st=0;st<at;st++){var dt=_[st],ht=void 0;this.stateProxy&&(ht=this.stateProxy(dt,_)),ht||(ht=this.states[dt]),ht&&nt.push(ht)}var ct=nt[at-1],ut=!!(ct&&ct.hoverLayer||tt);ut&&this._toggleHoverLayerFlag(!0);var ft=this._mergeStates(nt),gt=this.stateTransition;this.saveCurrentToNormalState(ft),this._applyStateObj(_.join(","),ft,this._normalState,!1,!et&&!this.__inHover&&gt&&gt.duration>0,gt);var mt=this._textContent,vt=this._textGuide;mt&&mt.useStates(_,et,ut),vt&&vt.useStates(_,et,ut),this._updateAnimationTargets(),this.currentStates=_.slice(),this.markRedraw(),!ut&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}},_e.prototype.isSilent=function(){for(var _=this.silent,et=this.parent;!_&&et;){if(et.silent){_=!0;break}et=et.parent}return _},_e.prototype._updateAnimationTargets=function(){for(var _=0;_<this.animators.length;_++){var et=this.animators[_];et.targetName&&et.changeTarget(this[et.targetName])}},_e.prototype.removeState=function(_){var et=indexOf(this.currentStates,_);if(et>=0){var tt=this.currentStates.slice();tt.splice(et,1),this.useStates(tt)}},_e.prototype.replaceState=function(_,et,tt){var nt=this.currentStates.slice(),it=indexOf(nt,_),at=indexOf(nt,et)>=0;it>=0?at?nt.splice(it,1):nt[it]=et:tt&&!at&&nt.push(et),this.useStates(nt)},_e.prototype.toggleState=function(_,et){et?this.useState(_,!0):this.removeState(_)},_e.prototype._mergeStates=function(_){for(var et={},tt,nt=0;nt<_.length;nt++){var it=_[nt];extend(et,it),it.textConfig&&(tt=tt||{},extend(tt,it.textConfig))}return tt&&(et.textConfig=tt),et},_e.prototype._applyStateObj=function(_,et,tt,nt,it,at){var ot=!(et&&nt);et&&et.textConfig?(this.textConfig=extend({},nt?this.textConfig:tt.textConfig),extend(this.textConfig,et.textConfig)):ot&&tt.textConfig&&(this.textConfig=tt.textConfig);for(var st={},dt=!1,ht=0;ht<PRIMARY_STATES_KEYS$1.length;ht++){var ct=PRIMARY_STATES_KEYS$1[ht],ut=it&&DEFAULT_ANIMATABLE_MAP[ct];et&&et[ct]!=null?ut?(dt=!0,st[ct]=et[ct]):this[ct]=et[ct]:ot&&tt[ct]!=null&&(ut?(dt=!0,st[ct]=tt[ct]):this[ct]=tt[ct])}if(!it)for(var ht=0;ht<this.animators.length;ht++){var ft=this.animators[ht],gt=ft.targetName;ft.getLoop()||ft.__changeFinalValue(gt?(et||tt)[gt]:et||tt)}dt&&this._transitionState(_,st,at)},_e.prototype._attachComponent=function(_){if(!(_.__zr&&!_.__hostTarget)&&_!==this){var et=this.__zr;et&&_.addSelfToZr(et),_.__zr=et,_.__hostTarget=this}},_e.prototype._detachComponent=function(_){_.__zr&&_.removeSelfFromZr(_.__zr),_.__zr=null,_.__hostTarget=null},_e.prototype.getClipPath=function(){return this._clipPath},_e.prototype.setClipPath=function(_){this._clipPath&&this._clipPath!==_&&this.removeClipPath(),this._attachComponent(_),this._clipPath=_,this.markRedraw()},_e.prototype.removeClipPath=function(){var _=this._clipPath;_&&(this._detachComponent(_),this._clipPath=null,this.markRedraw())},_e.prototype.getTextContent=function(){return this._textContent},_e.prototype.setTextContent=function(_){var et=this._textContent;et!==_&&(et&&et!==_&&this.removeTextContent(),_.innerTransformable=new Transformable,this._attachComponent(_),this._textContent=_,this.markRedraw())},_e.prototype.setTextConfig=function(_){this.textConfig||(this.textConfig={}),extend(this.textConfig,_),this.markRedraw()},_e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},_e.prototype.removeTextContent=function(){var _=this._textContent;_&&(_.innerTransformable=null,this._detachComponent(_),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},_e.prototype.getTextGuideLine=function(){return this._textGuide},_e.prototype.setTextGuideLine=function(_){this._textGuide&&this._textGuide!==_&&this.removeTextGuideLine(),this._attachComponent(_),this._textGuide=_,this.markRedraw()},_e.prototype.removeTextGuideLine=function(){var _=this._textGuide;_&&(this._detachComponent(_),this._textGuide=null,this.markRedraw())},_e.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var _=this.__zr;_&&(this.__inHover?_.refreshHover():_.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},_e.prototype.dirty=function(){this.markRedraw()},_e.prototype._toggleHoverLayerFlag=function(_){this.__inHover=_;var et=this._textContent,tt=this._textGuide;et&&(et.__inHover=_),tt&&(tt.__inHover=_)},_e.prototype.addSelfToZr=function(_){if(this.__zr!==_){this.__zr=_;var et=this.animators;if(et)for(var tt=0;tt<et.length;tt++)_.animation.addAnimator(et[tt]);this._clipPath&&this._clipPath.addSelfToZr(_),this._textContent&&this._textContent.addSelfToZr(_),this._textGuide&&this._textGuide.addSelfToZr(_)}},_e.prototype.removeSelfFromZr=function(_){if(this.__zr){this.__zr=null;var et=this.animators;if(et)for(var tt=0;tt<et.length;tt++)_.animation.removeAnimator(et[tt]);this._clipPath&&this._clipPath.removeSelfFromZr(_),this._textContent&&this._textContent.removeSelfFromZr(_),this._textGuide&&this._textGuide.removeSelfFromZr(_)}},_e.prototype.animate=function(_,et,tt){var nt=_?this[_]:this,it=new Animator(nt,et,tt);return _&&(it.targetName=_),this.addAnimator(it,_),it},_e.prototype.addAnimator=function(_,et){var tt=this.__zr,nt=this;_.during(function(){nt.updateDuringAnimation(et)}).done(function(){var it=nt.animators,at=indexOf(it,_);at>=0&&it.splice(at,1)}),this.animators.push(_),tt&&tt.animation.addAnimator(_),tt&&tt.wakeUp()},_e.prototype.updateDuringAnimation=function(_){this.markRedraw()},_e.prototype.stopAnimation=function(_,et){for(var tt=this.animators,nt=tt.length,it=[],at=0;at<nt;at++){var ot=tt[at];!_||_===ot.scope?ot.stop(et):it.push(ot)}return this.animators=it,this},_e.prototype.animateTo=function(_,et,tt){animateTo(this,_,et,tt)},_e.prototype.animateFrom=function(_,et,tt){animateTo(this,_,et,tt,!0)},_e.prototype._transitionState=function(_,et,tt,nt){for(var it=animateTo(this,et,tt,nt),at=0;at<it.length;at++)it[at].__fromStateTransition=_},_e.prototype.getBoundingRect=function(){return null},_e.prototype.getPaintRect=function(){return null},_e.initDefaultProps=function(){var _=_e.prototype;_.type="element",_.name="",_.ignore=_.silent=_.isGroup=_.draggable=_.dragging=_.ignoreClip=_.__inHover=!1,_.__dirty=REDRAW_BIT;function et(tt,nt,it,at){Object.defineProperty(_,tt,{get:function(){if(!this[nt]){var st=this[nt]=[];ot(this,st)}return this[nt]},set:function(st){this[it]=st[0],this[at]=st[1],this[nt]=st,ot(this,st)}});function ot(st,dt){Object.defineProperty(dt,0,{get:function(){return st[it]},set:function(ht){st[it]=ht}}),Object.defineProperty(dt,1,{get:function(){return st[at]},set:function(ht){st[at]=ht}})}}Object.defineProperty&&(et("position","_legacyPos","x","y"),et("scale","_legacyScale","scaleX","scaleY"),et("origin","_legacyOrigin","originX","originY"))}(),_e}();mixin(Element$1,Eventful);mixin(Element$1,Transformable);function animateTo(_e,_,et,tt,nt){et=et||{};var it=[];animateToShallow(_e,"",_e,_,et,tt,it,nt);var at=it.length,ot=!1,st=et.done,dt=et.aborted,ht=function(){ot=!0,at--,at<=0&&(ot?st&&st():dt&&dt())},ct=function(){at--,at<=0&&(ot?st&&st():dt&&dt())};at||st&&st(),it.length>0&&et.during&&it[0].during(function(gt,mt){et.during(mt)});for(var ut=0;ut<it.length;ut++){var ft=it[ut];ft.done(ht),ft.aborted(ct),et.force&&ft.duration(et.duration),ft.start(et.easing)}return it}function copyArrShallow(_e,_,et){for(var tt=0;tt<et;tt++)_e[tt]=_[tt]}function is2DArray(_e){return isArrayLike(_e[0])}function copyValue(_e,_,et){if(isArrayLike(_[et]))if(isArrayLike(_e[et])||(_e[et]=[]),isTypedArray(_[et])){var tt=_[et].length;_e[et].length!==tt&&(_e[et]=new _[et].constructor(tt),copyArrShallow(_e[et],_[et],tt))}else{var nt=_[et],it=_e[et],at=nt.length;if(is2DArray(nt))for(var ot=nt[0].length,st=0;st<at;st++)it[st]?copyArrShallow(it[st],nt[st],ot):it[st]=Array.prototype.slice.call(nt[st]);else copyArrShallow(it,nt,at);it.length=nt.length}else _e[et]=_[et]}function isValueSame(_e,_){return _e===_||isArrayLike(_e)&&isArrayLike(_)&&is1DArraySame(_e,_)}function is1DArraySame(_e,_){var et=_e.length;if(et!==_.length)return!1;for(var tt=0;tt<et;tt++)if(_e[tt]!==_[tt])return!1;return!0}function animateToShallow(_e,_,et,tt,nt,it,at,ot){for(var st=keys(tt),dt=nt.duration,ht=nt.delay,ct=nt.additive,ut=nt.setToFinal,ft=!isObject$4(it),gt=_e.animators,mt=[],vt=0;vt<st.length;vt++){var yt=st[vt],bt=tt[yt];if(bt!=null&&et[yt]!=null&&(ft||it[yt]))if(isObject$4(bt)&&!isArrayLike(bt)&&!isGradientObject(bt)){if(_){ot||(et[yt]=bt,_e.updateDuringAnimation(_));continue}animateToShallow(_e,yt,et[yt],bt,nt,it&&it[yt],at,ot)}else mt.push(yt);else ot||(et[yt]=bt,_e.updateDuringAnimation(_),mt.push(yt))}var _t=mt.length;if(!ct&&_t)for(var xt=0;xt<gt.length;xt++){var St=gt[xt];if(St.targetName===_){var Tt=St.stopTracks(mt);if(Tt){var wt=indexOf(gt,St);gt.splice(wt,1)}}}if(nt.force||(mt=filter$1(mt,function(Pt){return!isValueSame(tt[Pt],et[Pt])}),_t=mt.length),_t>0||nt.force&&!at.length){var Ct=void 0,Et=void 0,At=void 0;if(ot){Et={},ut&&(Ct={});for(var xt=0;xt<_t;xt++){var yt=mt[xt];Et[yt]=et[yt],ut?Ct[yt]=tt[yt]:et[yt]=tt[yt]}}else if(ut){At={};for(var xt=0;xt<_t;xt++){var yt=mt[xt];At[yt]=cloneValue(et[yt]),copyValue(et,tt,yt)}}var St=new Animator(et,!1,!1,ct?filter$1(gt,function(Rt){return Rt.targetName===_}):null);St.targetName=_,nt.scope&&(St.scope=nt.scope),ut&&Ct&&St.whenWithKeys(0,Ct,mt),At&&St.whenWithKeys(0,At,mt),St.whenWithKeys(dt??500,ot?Et:tt,mt).delay(ht||0),_e.addAnimator(St,_),at.push(St)}}var Group$3=function(_e){__extends(_,_e);function _(et){var tt=_e.call(this)||this;return tt.isGroup=!0,tt._children=[],tt.attr(et),tt}return _.prototype.childrenRef=function(){return this._children},_.prototype.children=function(){return this._children.slice()},_.prototype.childAt=function(et){return this._children[et]},_.prototype.childOfName=function(et){for(var tt=this._children,nt=0;nt<tt.length;nt++)if(tt[nt].name===et)return tt[nt]},_.prototype.childCount=function(){return this._children.length},_.prototype.add=function(et){return et&&et!==this&&et.parent!==this&&(this._children.push(et),this._doAdd(et)),this},_.prototype.addBefore=function(et,tt){if(et&&et!==this&&et.parent!==this&&tt&&tt.parent===this){var nt=this._children,it=nt.indexOf(tt);it>=0&&(nt.splice(it,0,et),this._doAdd(et))}return this},_.prototype.replace=function(et,tt){var nt=indexOf(this._children,et);return nt>=0&&this.replaceAt(tt,nt),this},_.prototype.replaceAt=function(et,tt){var nt=this._children,it=nt[tt];if(et&&et!==this&&et.parent!==this&&et!==it){nt[tt]=et,it.parent=null;var at=this.__zr;at&&it.removeSelfFromZr(at),this._doAdd(et)}return this},_.prototype._doAdd=function(et){et.parent&&et.parent.remove(et),et.parent=this;var tt=this.__zr;tt&&tt!==et.__zr&&et.addSelfToZr(tt),tt&&tt.refresh()},_.prototype.remove=function(et){var tt=this.__zr,nt=this._children,it=indexOf(nt,et);return it<0?this:(nt.splice(it,1),et.parent=null,tt&&et.removeSelfFromZr(tt),tt&&tt.refresh(),this)},_.prototype.removeAll=function(){for(var et=this._children,tt=this.__zr,nt=0;nt<et.length;nt++){var it=et[nt];tt&&it.removeSelfFromZr(tt),it.parent=null}return et.length=0,this},_.prototype.eachChild=function(et,tt){for(var nt=this._children,it=0;it<nt.length;it++){var at=nt[it];et.call(tt,at,it)}return this},_.prototype.traverse=function(et,tt){for(var nt=0;nt<this._children.length;nt++){var it=this._children[nt],at=et.call(tt,it);it.isGroup&&!at&&it.traverse(et,tt)}return this},_.prototype.addSelfToZr=function(et){_e.prototype.addSelfToZr.call(this,et);for(var tt=0;tt<this._children.length;tt++){var nt=this._children[tt];nt.addSelfToZr(et)}},_.prototype.removeSelfFromZr=function(et){_e.prototype.removeSelfFromZr.call(this,et);for(var tt=0;tt<this._children.length;tt++){var nt=this._children[tt];nt.removeSelfFromZr(et)}},_.prototype.getBoundingRect=function(et){for(var tt=new BoundingRect(0,0,0,0),nt=et||this._children,it=[],at=null,ot=0;ot<nt.length;ot++){var st=nt[ot];if(!(st.ignore||st.invisible)){var dt=st.getBoundingRect(),ht=st.getLocalTransform(it);ht?(BoundingRect.applyTransform(tt,dt,ht),at=at||tt.clone(),at.union(tt)):(at=at||dt.clone(),at.union(dt))}}return at||tt},_}(Element$1);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(_e){delete instances$1[_e]}function isDarkMode(_e){if(!_e)return!1;if(typeof _e=="string")return lum(_e,1)<DARK_MODE_THRESHOLD;if(_e.colorStops){for(var _=_e.colorStops,et=0,tt=_.length,nt=0;nt<tt;nt++)et+=lum(_[nt].color,1);return et/=tt,et<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function _e(_,et,tt){var nt=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,tt=tt||{},this.dom=et,this.id=_;var it=new Storage,at=tt.renderer||"canvas";painterCtors[at]||(at=keys(painterCtors)[0]),tt.useDirtyRect=tt.useDirtyRect==null?!1:tt.useDirtyRect;var ot=new painterCtors[at](et,it,tt,_),st=tt.ssr||ot.ssrOnly;this.storage=it,this.painter=ot;var dt=!env.node&&!env.worker&&!st?new HandlerDomProxy(ot.getViewportRoot(),ot.root):null,ht=tt.useCoarsePointer,ct=ht==null||ht==="auto"?env.touchEventsSupported:!!ht,ut=44,ft;ct&&(ft=retrieve2(tt.pointerSize,ut)),this.handler=new Handler(it,ot,dt,ot.root,ft),this.animation=new Animation({stage:{update:st?null:function(){return nt._flush(!0)}}}),st||this.animation.start()}return _e.prototype.add=function(_){this._disposed||!_||(this.storage.addRoot(_),_.addSelfToZr(this),this.refresh())},_e.prototype.remove=function(_){this._disposed||!_||(this.storage.delRoot(_),_.removeSelfFromZr(this),this.refresh())},_e.prototype.configLayer=function(_,et){this._disposed||(this.painter.configLayer&&this.painter.configLayer(_,et),this.refresh())},_e.prototype.setBackgroundColor=function(_){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(_),this.refresh(),this._backgroundColor=_,this._darkMode=isDarkMode(_))},_e.prototype.getBackgroundColor=function(){return this._backgroundColor},_e.prototype.setDarkMode=function(_){this._darkMode=_},_e.prototype.isDarkMode=function(){return this._darkMode},_e.prototype.refreshImmediately=function(_){this._disposed||(_||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},_e.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},_e.prototype.flush=function(){this._disposed||this._flush(!1)},_e.prototype._flush=function(_){var et,tt=getTime();this._needsRefresh&&(et=!0,this.refreshImmediately(_)),this._needsRefreshHover&&(et=!0,this.refreshHoverImmediately());var nt=getTime();et?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:nt-tt})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},_e.prototype.setSleepAfterStill=function(_){this._sleepAfterStill=_},_e.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},_e.prototype.refreshHover=function(){this._needsRefreshHover=!0},_e.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},_e.prototype.resize=function(_){this._disposed||(_=_||{},this.painter.resize(_.width,_.height),this.handler.resize())},_e.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},_e.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},_e.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},_e.prototype.setCursorStyle=function(_){this._disposed||this.handler.setCursorStyle(_)},_e.prototype.findHover=function(_,et){if(!this._disposed)return this.handler.findHover(_,et)},_e.prototype.on=function(_,et,tt){return this._disposed||this.handler.on(_,et,tt),this},_e.prototype.off=function(_,et){this._disposed||this.handler.off(_,et)},_e.prototype.trigger=function(_,et){this._disposed||this.handler.trigger(_,et)},_e.prototype.clear=function(){if(!this._disposed){for(var _=this.storage.getRoots(),et=0;et<_.length;et++)_[et]instanceof Group$3&&_[et].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},_e.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},_e}();function init$2(_e,_){var et=new ZRender(guid(),_e,_);return instances$1[et.id]=et,et}function dispose$1(_e){_e.dispose()}function disposeAll(){for(var _e in instances$1)instances$1.hasOwnProperty(_e)&&instances$1[_e].dispose();instances$1={}}function getInstance(_e){return instances$1[_e]}function registerPainter(_e,_){painterCtors[_e]=_}var ssrDataGetter;function getElementSSRData(_e){if(typeof ssrDataGetter=="function")return ssrDataGetter(_e)}function registerSSRDataGetter(_e){ssrDataGetter=_e}var version$1="5.6.1";const zrender=Object.freeze(Object.defineProperty({__proto__:null,dispose:dispose$1,disposeAll,getElementSSRData,getInstance,init:init$2,registerPainter,registerSSRDataGetter,version:version$1},Symbol.toStringTag,{value:"Module"}));var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(_e){return _e.replace(/^\s+|\s+$/g,"")}function linearMap$2(_e,_,et,tt){var nt=_[0],it=_[1],at=et[0],ot=et[1],st=it-nt,dt=ot-at;if(st===0)return dt===0?at:(at+ot)/2;if(tt)if(st>0){if(_e<=nt)return at;if(_e>=it)return ot}else{if(_e>=nt)return at;if(_e<=it)return ot}else{if(_e===nt)return at;if(_e===it)return ot}return(_e-nt)/st*dt+at}function parsePercent(_e,_){switch(_e){case"center":case"middle":_e="50%";break;case"left":case"top":_e="0%";break;case"right":case"bottom":_e="100%";break}return isString$1(_e)?_trim(_e).match(/%$/)?parseFloat(_e)/100*_:parseFloat(_e):_e==null?NaN:+_e}function round$3(_e,_,et){return _==null&&(_=10),_=Math.min(Math.max(0,_),ROUND_SUPPORTED_PRECISION_MAX),_e=(+_e).toFixed(_),et?_e:+_e}function asc$2(_e){return _e.sort(function(_,et){return _-et}),_e}function getPrecision(_e){if(_e=+_e,isNaN(_e))return 0;if(_e>1e-14){for(var _=1,et=0;et<15;et++,_*=10)if(Math.round(_e*_)/_===_e)return et}return getPrecisionSafe(_e)}function getPrecisionSafe(_e){var _=_e.toString().toLowerCase(),et=_.indexOf("e"),tt=et>0?+_.slice(et+1):0,nt=et>0?et:_.length,it=_.indexOf("."),at=it<0?0:nt-1-it;return Math.max(0,at-tt)}function getPixelPrecision(_e,_){var et=Math.log,tt=Math.LN10,nt=Math.floor(et(_e[1]-_e[0])/tt),it=Math.round(et(Math.abs(_[1]-_[0]))/tt),at=Math.min(Math.max(-nt+it,0),20);return isFinite(at)?at:20}function getPercentWithPrecision(_e,_,et){if(!_e[_])return 0;var tt=getPercentSeats(_e,et);return tt[_]||0}function getPercentSeats(_e,_){var et=reduce(_e,function(ft,gt){return ft+(isNaN(gt)?0:gt)},0);if(et===0)return[];for(var tt=Math.pow(10,_),nt=map$1(_e,function(ft){return(isNaN(ft)?0:ft)/et*tt*100}),it=tt*100,at=map$1(nt,function(ft){return Math.floor(ft)}),ot=reduce(at,function(ft,gt){return ft+gt},0),st=map$1(nt,function(ft,gt){return ft-at[gt]});ot<it;){for(var dt=Number.NEGATIVE_INFINITY,ht=null,ct=0,ut=st.length;ct<ut;++ct)st[ct]>dt&&(dt=st[ct],ht=ct);++at[ht],st[ht]=0,++ot}return map$1(at,function(ft){return ft/tt})}function addSafe(_e,_){var et=Math.max(getPrecision(_e),getPrecision(_)),tt=_e+_;return et>ROUND_SUPPORTED_PRECISION_MAX?tt:round$3(tt,et)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(_e){var _=Math.PI*2;return(_e%_+_)%_}function isRadianAroundZero(_e){return _e>-1e-4&&_e<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(_e){if(_e instanceof Date)return _e;if(isString$1(_e)){var _=TIME_REG.exec(_e);if(!_)return new Date(NaN);if(_[8]){var et=+_[4]||0;return _[8].toUpperCase()!=="Z"&&(et-=+_[8].slice(0,3)),new Date(Date.UTC(+_[1],+(_[2]||1)-1,+_[3]||1,et,+(_[5]||0),+_[6]||0,_[7]?+_[7].substring(0,3):0))}else return new Date(+_[1],+(_[2]||1)-1,+_[3]||1,+_[4]||0,+(_[5]||0),+_[6]||0,_[7]?+_[7].substring(0,3):0)}else if(_e==null)return new Date(NaN);return new Date(Math.round(_e))}function quantity(_e){return Math.pow(10,quantityExponent(_e))}function quantityExponent(_e){if(_e===0)return 0;var _=Math.floor(Math.log(_e)/Math.LN10);return _e/Math.pow(10,_)>=10&&_++,_}function nice(_e,_){var et=quantityExponent(_e),tt=Math.pow(10,et),nt=_e/tt,it;return _?nt<1.5?it=1:nt<2.5?it=2:nt<4?it=3:nt<7?it=5:it=10:nt<1?it=1:nt<2?it=2:nt<3?it=3:nt<5?it=5:it=10,_e=it*tt,et>=-20?+_e.toFixed(et<0?-et:0):_e}function quantile(_e,_){var et=(_e.length-1)*_+1,tt=Math.floor(et),nt=+_e[tt-1],it=et-tt;return it?nt+it*(_e[tt]-nt):nt}function reformIntervals(_e){_e.sort(function(st,dt){return ot(st,dt,0)?-1:1});for(var _=-1/0,et=1,tt=0;tt<_e.length;){for(var nt=_e[tt].interval,it=_e[tt].close,at=0;at<2;at++)nt[at]<=_&&(nt[at]=_,it[at]=at?1:1-et),_=nt[at],et=it[at];nt[0]===nt[1]&&it[0]*it[1]!==1?_e.splice(tt,1):tt++}return _e;function ot(st,dt,ht){return st.interval[ht]<dt.interval[ht]||st.interval[ht]===dt.interval[ht]&&(st.close[ht]-dt.close[ht]===(ht?-1:1)||!ht&&ot(st,dt,1))}}function numericToNumber(_e){var _=parseFloat(_e);return _==_e&&(_!==0||!isString$1(_e)||_e.indexOf("x")<=0)?_:NaN}function isNumeric(_e){return!isNaN(numericToNumber(_e))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(_e,_){return _===0?_e:getGreatestCommonDividor(_,_e%_)}function getLeastCommonMultiple(_e,_){return _e==null?_:_==null?_e:_e*_/getGreatestCommonDividor(_e,_)}function throwError(_e){throw new Error(_e)}function interpolateNumber(_e,_,et){return(_-_e)*et+_e}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(_e){return _e instanceof Array?_e:_e==null?[]:[_e]}function defaultEmphasis(_e,_,et){if(_e){_e[_]=_e[_]||{},_e.emphasis=_e.emphasis||{},_e.emphasis[_]=_e.emphasis[_]||{};for(var tt=0,nt=et.length;tt<nt;tt++){var it=et[tt];!_e.emphasis[_].hasOwnProperty(it)&&_e[_].hasOwnProperty(it)&&(_e.emphasis[_][it]=_e[_][it])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(_e){return isObject$4(_e)&&!isArray$1(_e)&&!(_e instanceof Date)?_e.value:_e}function isDataItemOption(_e){return isObject$4(_e)&&!(_e instanceof Array)}function mappingToExists(_e,_,et){var tt=et==="normalMerge",nt=et==="replaceMerge",it=et==="replaceAll";_e=_e||[],_=(_||[]).slice();var at=createHashMap();each$f(_,function(st,dt){if(!isObject$4(st)){_[dt]=null;return}});var ot=prepareResult(_e,at,et);return(tt||nt)&&mappingById(ot,_e,at,_),tt&&mappingByName(ot,_),tt||nt?mappingByIndex(ot,_,nt):it&&mappingInReplaceAllMode(ot,_),makeIdAndName(ot),ot}function prepareResult(_e,_,et){var tt=[];if(et==="replaceAll")return tt;for(var nt=0;nt<_e.length;nt++){var it=_e[nt];it&&it.id!=null&&_.set(it.id,nt),tt.push({existing:et==="replaceMerge"||isComponentIdInternal(it)?null:it,newOption:null,keyInfo:null,brandNew:null})}return tt}function mappingById(_e,_,et,tt){each$f(tt,function(nt,it){if(!(!nt||nt.id==null)){var at=makeComparableKey(nt.id),ot=et.get(at);if(ot!=null){var st=_e[ot];assert(!st.newOption,'Duplicated option on id "'+at+'".'),st.newOption=nt,st.existing=_[ot],tt[it]=null}}})}function mappingByName(_e,_){each$f(_,function(et,tt){if(!(!et||et.name==null))for(var nt=0;nt<_e.length;nt++){var it=_e[nt].existing;if(!_e[nt].newOption&&it&&(it.id==null||et.id==null)&&!isComponentIdInternal(et)&&!isComponentIdInternal(it)&&keyExistAndEqual("name",it,et)){_e[nt].newOption=et,_[tt]=null;return}}})}function mappingByIndex(_e,_,et){each$f(_,function(tt){if(tt){for(var nt,it=0;(nt=_e[it])&&(nt.newOption||isComponentIdInternal(nt.existing)||nt.existing&&tt.id!=null&&!keyExistAndEqual("id",tt,nt.existing));)it++;nt?(nt.newOption=tt,nt.brandNew=et):_e.push({newOption:tt,brandNew:et,existing:null,keyInfo:null}),it++}})}function mappingInReplaceAllMode(_e,_){each$f(_,function(et){_e.push({newOption:et,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(_e){var _=createHashMap();each$f(_e,function(et){var tt=et.existing;tt&&_.set(tt.id,et)}),each$f(_e,function(et){var tt=et.newOption;assert(!tt||tt.id==null||!_.get(tt.id)||_.get(tt.id)===et,"id duplicates: "+(tt&&tt.id)),tt&&tt.id!=null&&_.set(tt.id,et),!et.keyInfo&&(et.keyInfo={})}),each$f(_e,function(et,tt){var nt=et.existing,it=et.newOption,at=et.keyInfo;if(isObject$4(it)){if(at.name=it.name!=null?makeComparableKey(it.name):nt?nt.name:DUMMY_COMPONENT_NAME_PREFIX+tt,nt)at.id=makeComparableKey(nt.id);else if(it.id!=null)at.id=makeComparableKey(it.id);else{var ot=0;do at.id="\0"+at.name+"\0"+ot++;while(_.get(at.id))}_.set(at.id,et)}})}function keyExistAndEqual(_e,_,et){var tt=convertOptionIdName(_[_e],null),nt=convertOptionIdName(et[_e],null);return tt!=null&&nt!=null&&tt===nt}function makeComparableKey(_e){return convertOptionIdName(_e,"")}function convertOptionIdName(_e,_){return _e==null?_:isString$1(_e)?_e:isNumber(_e)||isStringSafe(_e)?_e+"":_}function isNameSpecified(_e){var _=_e.name;return!!(_&&_.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(_e){return _e&&_e.id!=null&&makeComparableKey(_e.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(_e){return INTERNAL_COMPONENT_ID_PREFIX+_e}function setComponentTypeToKeyInfo(_e,_,et){each$f(_e,function(tt){var nt=tt.newOption;isObject$4(nt)&&(tt.keyInfo.mainType=_,tt.keyInfo.subType=determineSubType(_,nt,tt.existing,et))})}function determineSubType(_e,_,et,tt){var nt=_.type?_.type:et?et.subType:tt.determineSubType(_e,_);return nt}function compressBatches(_e,_){var et={},tt={};return nt(_e||[],et),nt(_||[],tt,et),[it(et),it(tt)];function nt(at,ot,st){for(var dt=0,ht=at.length;dt<ht;dt++){var ct=convertOptionIdName(at[dt].seriesId,null);if(ct==null)return;for(var ut=normalizeToArray(at[dt].dataIndex),ft=st&&st[ct],gt=0,mt=ut.length;gt<mt;gt++){var vt=ut[gt];ft&&ft[vt]?ft[vt]=null:(ot[ct]||(ot[ct]={}))[vt]=1}}}function it(at,ot){var st=[];for(var dt in at)if(at.hasOwnProperty(dt)&&at[dt]!=null)if(ot)st.push(+dt);else{var ht=it(at[dt],!0);ht.length&&st.push({seriesId:dt,dataIndex:ht})}return st}}function queryDataIndex(_e,_){if(_.dataIndexInside!=null)return _.dataIndexInside;if(_.dataIndex!=null)return isArray$1(_.dataIndex)?map$1(_.dataIndex,function(et){return _e.indexOfRawIndex(et)}):_e.indexOfRawIndex(_.dataIndex);if(_.name!=null)return isArray$1(_.name)?map$1(_.name,function(et){return _e.indexOfName(et)}):_e.indexOfName(_.name)}function makeInner(){var _e="__ec_inner_"+innerUniqueIndex++;return function(_){return _[_e]||(_[_e]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(_e,_,et){var tt=preParseFinder(_,et),nt=tt.mainTypeSpecified,it=tt.queryOptionMap,at=tt.others,ot=at,st=et?et.defaultMainType:null;return!nt&&st&&it.set(st,{}),it.each(function(dt,ht){var ct=queryReferringComponents(_e,ht,dt,{useDefault:st===ht,enableAll:et&&et.enableAll!=null?et.enableAll:!0,enableNone:et&&et.enableNone!=null?et.enableNone:!0});ot[ht+"Models"]=ct.models,ot[ht+"Model"]=ct.models[0]}),ot}function preParseFinder(_e,_){var et;if(isString$1(_e)){var tt={};tt[_e+"Index"]=0,et=tt}else et=_e;var nt=createHashMap(),it={},at=!1;return each$f(et,function(ot,st){if(st==="dataIndex"||st==="dataIndexInside"){it[st]=ot;return}var dt=st.match(/^(\w+)(Index|Id|Name)$/)||[],ht=dt[1],ct=(dt[2]||"").toLowerCase();if(!(!ht||!ct||_&&_.includeMainTypes&&indexOf(_.includeMainTypes,ht)<0)){at=at||!!ht;var ut=nt.get(ht)||nt.set(ht,{});ut[ct]=ot}}),{mainTypeSpecified:at,queryOptionMap:nt,others:it}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(_e,_,et,tt){tt=tt||SINGLE_REFERRING;var nt=et.index,it=et.id,at=et.name,ot={models:null,specified:nt!=null||it!=null||at!=null};if(!ot.specified){var st=void 0;return ot.models=tt.useDefault&&(st=_e.getComponent(_))?[st]:[],ot}return nt==="none"||nt===!1?(assert(tt.enableNone,'`"none"` or `false` is not a valid value on index option.'),ot.models=[],ot):(nt==="all"&&(assert(tt.enableAll,'`"all"` is not a valid value on index option.'),nt=it=at=null),ot.models=_e.queryComponents({mainType:_,index:nt,id:it,name:at}),ot)}function setAttribute(_e,_,et){_e.setAttribute?_e.setAttribute(_,et):_e[_]=et}function getAttribute(_e,_){return _e.getAttribute?_e.getAttribute(_):_e[_]}function getTooltipRenderMode(_e){return _e==="auto"?env.domSupported?"html":"richText":_e||"html"}function groupData(_e,_){var et=createHashMap(),tt=[];return each$f(_e,function(nt){var it=_(nt);(et.get(it)||(tt.push(it),et.set(it,[]))).push(nt)}),{keys:tt,buckets:et}}function interpolateRawValues(_e,_,et,tt,nt){var it=_==null||_==="auto";if(tt==null)return tt;if(isNumber(tt)){var at=interpolateNumber(et||0,tt,nt);return round$3(at,it?Math.max(getPrecision(et||0),getPrecision(tt)):_)}else{if(isString$1(tt))return nt<1?et:tt;for(var ot=[],st=et,dt=tt,ht=Math.max(st?st.length:0,dt.length),ct=0;ct<ht;++ct){var ut=_e.getDimensionInfo(ct);if(ut&&ut.type==="ordinal")ot[ct]=(nt<1&&st?st:dt)[ct];else{var ft=st&&st[ct]?st[ct]:0,gt=dt[ct],at=interpolateNumber(ft,gt,nt);ot[ct]=round$3(at,it?Math.max(getPrecision(ft),getPrecision(gt)):_)}}return ot}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(_e){var _={main:"",sub:""};if(_e){var et=_e.split(TYPE_DELIMITER);_.main=et[0]||"",_.sub=et[1]||""}return _}function checkClassType(_e){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(_e),'componentType "'+_e+'" illegal')}function isExtendedClass(_e){return!!(_e&&_e[IS_EXTENDED_CLASS])}function enableClassExtend(_e,_){_e.$constructor=_e,_e.extend=function(et){var tt=this,nt;return isESClass(tt)?nt=function(it){__extends$1(at,it);function at(){return it.apply(this,arguments)||this}return at}(tt):(nt=function(){(et.$constructor||tt).apply(this,arguments)},inherits(nt,this)),extend(nt.prototype,et),nt[IS_EXTENDED_CLASS]=!0,nt.extend=this.extend,nt.superCall=superCall,nt.superApply=superApply,nt.superClass=tt,nt}}function isESClass(_e){return isFunction$3(_e)&&/^class\s/.test(Function.prototype.toString.call(_e))}function mountExtend(_e,_){_e.extend=_.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(_e){var _=["__\0is_clz",classBase++].join("_");_e.prototype[_]=!0,_e.isInstance=function(et){return!!(et&&et[_])}}function superCall(_e,_){for(var et=[],tt=2;tt<arguments.length;tt++)et[tt-2]=arguments[tt];return this.superClass.prototype[_].apply(_e,et)}function superApply(_e,_,et){return this.superClass.prototype[_].apply(_e,et)}function enableClassManagement(_e){var _={};_e.registerClass=function(tt){var nt=tt.type||tt.prototype.type;if(nt){checkClassType(nt),tt.prototype.type=nt;var it=parseClassType(nt);if(!it.sub)_[it.main]=tt;else if(it.sub!==IS_CONTAINER){var at=et(it);at[it.sub]=tt}}return tt},_e.getClass=function(tt,nt,it){var at=_[tt];if(at&&at[IS_CONTAINER]&&(at=nt?at[nt]:null),it&&!at)throw new Error(nt?"Component "+tt+"."+(nt||"")+" is used but not imported.":tt+".type should be specified.");return at},_e.getClassesByMainType=function(tt){var nt=parseClassType(tt),it=[],at=_[nt.main];return at&&at[IS_CONTAINER]?each$f(at,function(ot,st){st!==IS_CONTAINER&&it.push(ot)}):it.push(at),it},_e.hasClass=function(tt){var nt=parseClassType(tt);return!!_[nt.main]},_e.getAllClassMainTypes=function(){var tt=[];return each$f(_,function(nt,it){tt.push(it)}),tt},_e.hasSubTypes=function(tt){var nt=parseClassType(tt),it=_[nt.main];return it&&it[IS_CONTAINER]};function et(tt){var nt=_[tt.main];return(!nt||!nt[IS_CONTAINER])&&(nt=_[tt.main]={},nt[IS_CONTAINER]=!0),nt}}function makeStyleMapper(_e,_){for(var et=0;et<_e.length;et++)_e[et][1]||(_e[et][1]=_e[et][0]);return _=_||!1,function(tt,nt,it){for(var at={},ot=0;ot<_e.length;ot++){var st=_e[ot][1];if(!(nt&&indexOf(nt,st)>=0||it&&indexOf(it,st)<0)){var dt=tt.getShallow(st,_);dt!=null&&(at[_e[ot][0]]=dt)}}return at}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function _e(){}return _e.prototype.getAreaStyle=function(_,et){return getAreaStyle(this,_,et)},_e}(),globalImageCache=new LRU(50);function findExistImage(_e){if(typeof _e=="string"){var _=globalImageCache.get(_e);return _&&_.image}else return _e}function createOrUpdateImage(_e,_,et,tt,nt){if(_e)if(typeof _e=="string"){if(_&&_.__zrImageSrc===_e||!et)return _;var it=globalImageCache.get(_e),at={hostEl:et,cb:tt,cbPayload:nt};return it?(_=it.image,!isImageReady(_)&&it.pending.push(at)):(_=platformApi.loadImage(_e,imageOnLoad,imageOnLoad),_.__zrImageSrc=_e,globalImageCache.put(_e,_.__cachedImgObj={image:_,pending:[at]})),_}else return _e;else return _}function imageOnLoad(){var _e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var _=0;_<_e.pending.length;_++){var et=_e.pending[_],tt=et.cb;tt&&tt(this,et.cbPayload),et.hostEl.dirty()}_e.pending.length=0}function isImageReady(_e){return _e&&_e.width&&_e.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(_e,_,et,tt,nt){var it={};return truncateText2(it,_e,_,et,tt,nt),it.text}function truncateText2(_e,_,et,tt,nt,it){if(!et){_e.text="",_e.isTruncated=!1;return}var at=(_+"").split(`
`);it=prepareTruncateOptions(et,tt,nt,it);for(var ot=!1,st={},dt=0,ht=at.length;dt<ht;dt++)truncateSingleLine(st,at[dt],it),at[dt]=st.textLine,ot=ot||st.isTruncated;_e.text=at.join(`
`),_e.isTruncated=ot}function prepareTruncateOptions(_e,_,et,tt){tt=tt||{};var nt=extend({},tt);nt.font=_,et=retrieve2(et,"..."),nt.maxIterations=retrieve2(tt.maxIterations,2);var it=nt.minChar=retrieve2(tt.minChar,0);nt.cnCharWidth=getWidth("",_);var at=nt.ascCharWidth=getWidth("a",_);nt.placeholder=retrieve2(tt.placeholder,"");for(var ot=_e=Math.max(0,_e-1),st=0;st<it&&ot>=at;st++)ot-=at;var dt=getWidth(et,_);return dt>ot&&(et="",dt=0),ot=_e-dt,nt.ellipsis=et,nt.ellipsisWidth=dt,nt.contentWidth=ot,nt.containerWidth=_e,nt}function truncateSingleLine(_e,_,et){var tt=et.containerWidth,nt=et.font,it=et.contentWidth;if(!tt){_e.textLine="",_e.isTruncated=!1;return}var at=getWidth(_,nt);if(at<=tt){_e.textLine=_,_e.isTruncated=!1;return}for(var ot=0;;ot++){if(at<=it||ot>=et.maxIterations){_+=et.ellipsis;break}var st=ot===0?estimateLength(_,it,et.ascCharWidth,et.cnCharWidth):at>0?Math.floor(_.length*it/at):0;_=_.substr(0,st),at=getWidth(_,nt)}_===""&&(_=et.placeholder),_e.textLine=_,_e.isTruncated=!0}function estimateLength(_e,_,et,tt){for(var nt=0,it=0,at=_e.length;it<at&&nt<_;it++){var ot=_e.charCodeAt(it);nt+=0<=ot&&ot<=127?et:tt}return it}function parsePlainText(_e,_){_e!=null&&(_e+="");var et=_.overflow,tt=_.padding,nt=_.font,it=et==="truncate",at=getLineHeight(nt),ot=retrieve2(_.lineHeight,at),st=!!_.backgroundColor,dt=_.lineOverflow==="truncate",ht=!1,ct=_.width,ut;ct!=null&&(et==="break"||et==="breakAll")?ut=_e?wrapText(_e,_.font,ct,et==="breakAll",0).lines:[]:ut=_e?_e.split(`
`):[];var ft=ut.length*ot,gt=retrieve2(_.height,ft);if(ft>gt&&dt){var mt=Math.floor(gt/ot);ht=ht||ut.length>mt,ut=ut.slice(0,mt)}if(_e&&it&&ct!=null)for(var vt=prepareTruncateOptions(ct,nt,_.ellipsis,{minChar:_.truncateMinChar,placeholder:_.placeholder}),yt={},bt=0;bt<ut.length;bt++)truncateSingleLine(yt,ut[bt],vt),ut[bt]=yt.textLine,ht=ht||yt.isTruncated;for(var _t=gt,xt=0,bt=0;bt<ut.length;bt++)xt=Math.max(getWidth(ut[bt],nt),xt);ct==null&&(ct=xt);var St=xt;return tt&&(_t+=tt[0]+tt[2],St+=tt[1]+tt[3],ct+=tt[1]+tt[3]),st&&(St=ct),{lines:ut,height:gt,outerWidth:St,outerHeight:_t,lineHeight:ot,calculatedLineHeight:at,contentWidth:xt,contentHeight:ft,width:ct,isTruncated:ht}}var RichTextToken=function(){function _e(){}return _e}(),RichTextLine=function(){function _e(_){this.tokens=[],_&&(this.tokens=_)}return _e}(),RichTextContentBlock=function(){function _e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return _e}();function parseRichText(_e,_){var et=new RichTextContentBlock;if(_e!=null&&(_e+=""),!_e)return et;for(var tt=_.width,nt=_.height,it=_.overflow,at=(it==="break"||it==="breakAll")&&tt!=null?{width:tt,accumWidth:0,breakAll:it==="breakAll"}:null,ot=STYLE_REG.lastIndex=0,st;(st=STYLE_REG.exec(_e))!=null;){var dt=st.index;dt>ot&&pushTokens(et,_e.substring(ot,dt),_,at),pushTokens(et,st[2],_,at,st[1]),ot=STYLE_REG.lastIndex}ot<_e.length&&pushTokens(et,_e.substring(ot,_e.length),_,at);var ht=[],ct=0,ut=0,ft=_.padding,gt=it==="truncate",mt=_.lineOverflow==="truncate",vt={};function yt(Vt,zt,Xt){Vt.width=zt,Vt.lineHeight=Xt,ct+=Xt,ut=Math.max(ut,zt)}e:for(var bt=0;bt<et.lines.length;bt++){for(var _t=et.lines[bt],xt=0,St=0,Tt=0;Tt<_t.tokens.length;Tt++){var wt=_t.tokens[Tt],Ct=wt.styleName&&_.rich[wt.styleName]||{},Et=wt.textPadding=Ct.padding,At=Et?Et[1]+Et[3]:0,Pt=wt.font=Ct.font||_.font;wt.contentHeight=getLineHeight(Pt);var Rt=retrieve2(Ct.height,wt.contentHeight);if(wt.innerHeight=Rt,Et&&(Rt+=Et[0]+Et[2]),wt.height=Rt,wt.lineHeight=retrieve3(Ct.lineHeight,_.lineHeight,Rt),wt.align=Ct&&Ct.align||_.align,wt.verticalAlign=Ct&&Ct.verticalAlign||"middle",mt&&nt!=null&&ct+wt.lineHeight>nt){var It=et.lines.length;Tt>0?(_t.tokens=_t.tokens.slice(0,Tt),yt(_t,St,xt),et.lines=et.lines.slice(0,bt+1)):et.lines=et.lines.slice(0,bt),et.isTruncated=et.isTruncated||et.lines.length<It;break e}var Mt=Ct.width,Ot=Mt==null||Mt==="auto";if(typeof Mt=="string"&&Mt.charAt(Mt.length-1)==="%")wt.percentWidth=Mt,ht.push(wt),wt.contentWidth=getWidth(wt.text,Pt);else{if(Ot){var $t=Ct.backgroundColor,Lt=$t&&$t.image;Lt&&(Lt=findExistImage(Lt),isImageReady(Lt)&&(wt.width=Math.max(wt.width,Lt.width*Rt/Lt.height)))}var kt=gt&&tt!=null?tt-St:null;kt!=null&&kt<wt.width?!Ot||kt<At?(wt.text="",wt.width=wt.contentWidth=0):(truncateText2(vt,wt.text,kt-At,Pt,_.ellipsis,{minChar:_.truncateMinChar}),wt.text=vt.text,et.isTruncated=et.isTruncated||vt.isTruncated,wt.width=wt.contentWidth=getWidth(wt.text,Pt)):wt.contentWidth=getWidth(wt.text,Pt)}wt.width+=At,St+=wt.width,Ct&&(xt=Math.max(xt,wt.lineHeight))}yt(_t,St,xt)}et.outerWidth=et.width=retrieve2(tt,ut),et.outerHeight=et.height=retrieve2(nt,ct),et.contentHeight=ct,et.contentWidth=ut,ft&&(et.outerWidth+=ft[1]+ft[3],et.outerHeight+=ft[0]+ft[2]);for(var bt=0;bt<ht.length;bt++){var wt=ht[bt],Nt=wt.percentWidth;wt.width=parseInt(Nt,10)/100*et.width}return et}function pushTokens(_e,_,et,tt,nt){var it=_==="",at=nt&&et.rich[nt]||{},ot=_e.lines,st=at.font||et.font,dt=!1,ht,ct;if(tt){var ut=at.padding,ft=ut?ut[1]+ut[3]:0;if(at.width!=null&&at.width!=="auto"){var gt=parsePercent$1(at.width,tt.width)+ft;ot.length>0&&gt+tt.accumWidth>tt.width&&(ht=_.split(`
`),dt=!0),tt.accumWidth=gt}else{var mt=wrapText(_,st,tt.width,tt.breakAll,tt.accumWidth);tt.accumWidth=mt.accumWidth+ft,ct=mt.linesWidths,ht=mt.lines}}else ht=_.split(`
`);for(var vt=0;vt<ht.length;vt++){var yt=ht[vt],bt=new RichTextToken;if(bt.styleName=nt,bt.text=yt,bt.isLineHolder=!yt&&!it,typeof at.width=="number"?bt.width=at.width:bt.width=ct?ct[vt]:getWidth(yt,st),!vt&&!dt){var _t=(ot[ot.length-1]||(ot[0]=new RichTextLine)).tokens,xt=_t.length;xt===1&&_t[0].isLineHolder?_t[0]=bt:(yt||!xt||it)&&_t.push(bt)}else ot.push(new RichTextLine([bt]))}}function isAlphabeticLetter(_e){var _=_e.charCodeAt(0);return _>=32&&_<=591||_>=880&&_<=4351||_>=4608&&_<=5119||_>=7680&&_<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(_e,_){return _e[_]=!0,_e},{});function isWordBreakChar(_e){return isAlphabeticLetter(_e)?!!breakCharMap[_e]:!0}function wrapText(_e,_,et,tt,nt){for(var it=[],at=[],ot="",st="",dt=0,ht=0,ct=0;ct<_e.length;ct++){var ut=_e.charAt(ct);if(ut===`
`){st&&(ot+=st,ht+=dt),it.push(ot),at.push(ht),ot="",st="",dt=0,ht=0;continue}var ft=getWidth(ut,_),gt=tt?!1:!isWordBreakChar(ut);if(it.length?ht+ft>et:nt+ht+ft>et){ht?(ot||st)&&(gt?(ot||(ot=st,st="",dt=0,ht=dt),it.push(ot),at.push(ht-dt),st+=ut,dt+=ft,ot="",ht=dt):(st&&(ot+=st,st="",dt=0),it.push(ot),at.push(ht),ot=ut,ht=ft)):gt?(it.push(st),at.push(dt),st=ut,dt=ft):(it.push(ut),at.push(ft));continue}ht+=ft,gt?(st+=ut,dt+=ft):(st&&(ot+=st,st="",dt=0),ot+=ut)}return!it.length&&!ot&&(ot=_e,st="",dt=0),st&&(ot+=st),ot&&(it.push(ot),at.push(ht)),it.length===1&&(ht+=nt),{accumWidth:ht,lines:it,linesWidths:at}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype._init=function(et){for(var tt=keys(et),nt=0;nt<tt.length;nt++){var it=tt[nt];it==="style"?this.useStyle(et[it]):_e.prototype.attrKV.call(this,it,et[it])}this.style||this.useStyle({})},_.prototype.beforeBrush=function(){},_.prototype.afterBrush=function(){},_.prototype.innerBeforeBrush=function(){},_.prototype.innerAfterBrush=function(){},_.prototype.shouldBePainted=function(et,tt,nt,it){var at=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,et,tt)||at&&!at[0]&&!at[3])return!1;if(nt&&this.__clipPaths){for(var ot=0;ot<this.__clipPaths.length;++ot)if(this.__clipPaths[ot].isZeroArea())return!1}if(it&&this.parent)for(var st=this.parent;st;){if(st.ignore)return!1;st=st.parent}return!0},_.prototype.contain=function(et,tt){return this.rectContain(et,tt)},_.prototype.traverse=function(et,tt){et.call(tt,this)},_.prototype.rectContain=function(et,tt){var nt=this.transformCoordToLocal(et,tt),it=this.getBoundingRect();return it.contain(nt[0],nt[1])},_.prototype.getPaintRect=function(){var et=this._paintRect;if(!this._paintRect||this.__dirty){var tt=this.transform,nt=this.getBoundingRect(),it=this.style,at=it.shadowBlur||0,ot=it.shadowOffsetX||0,st=it.shadowOffsetY||0;et=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),tt?BoundingRect.applyTransform(et,nt,tt):et.copy(nt),(at||ot||st)&&(et.width+=at*2+Math.abs(ot),et.height+=at*2+Math.abs(st),et.x=Math.min(et.x,et.x+ot-at),et.y=Math.min(et.y,et.y+st-at));var dt=this.dirtyRectTolerance;et.isZero()||(et.x=Math.floor(et.x-dt),et.y=Math.floor(et.y-dt),et.width=Math.ceil(et.width+1+dt*2),et.height=Math.ceil(et.height+1+dt*2))}return et},_.prototype.setPrevPaintRect=function(et){et?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(et)):this._prevPaintRect=null},_.prototype.getPrevPaintRect=function(){return this._prevPaintRect},_.prototype.animateStyle=function(et){return this.animate("style",et)},_.prototype.updateDuringAnimation=function(et){et==="style"?this.dirtyStyle():this.markRedraw()},_.prototype.attrKV=function(et,tt){et!=="style"?_e.prototype.attrKV.call(this,et,tt):this.style?this.setStyle(tt):this.useStyle(tt)},_.prototype.setStyle=function(et,tt){return typeof et=="string"?this.style[et]=tt:extend(this.style,et),this.dirtyStyle(),this},_.prototype.dirtyStyle=function(et){et||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},_.prototype.dirty=function(){this.dirtyStyle()},_.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},_.prototype.styleUpdated=function(){this.__dirty&=-3},_.prototype.createStyle=function(et){return createObject(DEFAULT_COMMON_STYLE,et)},_.prototype.useStyle=function(et){et[STYLE_MAGIC_KEY]||(et=this.createStyle(et)),this.__inHover?this.__hoverStyle=et:this.style=et,this.dirtyStyle()},_.prototype.isStyleObject=function(et){return et[STYLE_MAGIC_KEY]},_.prototype._innerSaveToNormal=function(et){_e.prototype._innerSaveToNormal.call(this,et);var tt=this._normalState;et.style&&!tt.style&&(tt.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(et,tt,PRIMARY_STATES_KEYS)},_.prototype._applyStateObj=function(et,tt,nt,it,at,ot){_e.prototype._applyStateObj.call(this,et,tt,nt,it,at,ot);var st=!(tt&&it),dt;if(tt&&tt.style?at?it?dt=tt.style:(dt=this._mergeStyle(this.createStyle(),nt.style),this._mergeStyle(dt,tt.style)):(dt=this._mergeStyle(this.createStyle(),it?this.style:nt.style),this._mergeStyle(dt,tt.style)):st&&(dt=nt.style),dt)if(at){var ht=this.style;if(this.style=this.createStyle(st?{}:ht),st)for(var ct=keys(ht),ut=0;ut<ct.length;ut++){var ft=ct[ut];ft in dt&&(dt[ft]=dt[ft],this.style[ft]=ht[ft])}for(var gt=keys(dt),ut=0;ut<gt.length;ut++){var ft=gt[ut];this.style[ft]=this.style[ft]}this._transitionState(et,{style:dt},ot,this.getAnimationStyleProps())}else this.useStyle(dt);for(var mt=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,ut=0;ut<mt.length;ut++){var ft=mt[ut];tt&&tt[ft]!=null?this[ft]=tt[ft]:st&&nt[ft]!=null&&(this[ft]=nt[ft])}},_.prototype._mergeStates=function(et){for(var tt=_e.prototype._mergeStates.call(this,et),nt,it=0;it<et.length;it++){var at=et[it];at.style&&(nt=nt||{},this._mergeStyle(nt,at.style))}return nt&&(tt.style=nt),tt},_.prototype._mergeStyle=function(et,tt){return extend(et,tt),et},_.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},_.initDefaultProps=function(){var et=_.prototype;et.type="displayable",et.invisible=!1,et.z=0,et.z2=0,et.zlevel=0,et.culling=!1,et.cursor="pointer",et.rectHover=!1,et.incremental=!1,et._rect=null,et.dirtyRectTolerance=0,et.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),_}(Element$1),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(_e,_,et){return tmpRect.copy(_e.getBoundingRect()),_e.transform&&tmpRect.applyTransform(_e.transform),viewRect.width=_,viewRect.height=et,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(_e,_,et){if(_e.length!==0){for(var tt=_e[0],nt=tt[0],it=tt[0],at=tt[1],ot=tt[1],st=1;st<_e.length;st++)tt=_e[st],nt=mathMin$9(nt,tt[0]),it=mathMax$9(it,tt[0]),at=mathMin$9(at,tt[1]),ot=mathMax$9(ot,tt[1]);_[0]=nt,_[1]=at,et[0]=it,et[1]=ot}}function fromLine(_e,_,et,tt,nt,it){nt[0]=mathMin$9(_e,et),nt[1]=mathMin$9(_,tt),it[0]=mathMax$9(_e,et),it[1]=mathMax$9(_,tt)}var xDim=[],yDim=[];function fromCubic(_e,_,et,tt,nt,it,at,ot,st,dt){var ht=cubicExtrema,ct=cubicAt,ut=ht(_e,et,nt,at,xDim);st[0]=1/0,st[1]=1/0,dt[0]=-1/0,dt[1]=-1/0;for(var ft=0;ft<ut;ft++){var gt=ct(_e,et,nt,at,xDim[ft]);st[0]=mathMin$9(gt,st[0]),dt[0]=mathMax$9(gt,dt[0])}ut=ht(_,tt,it,ot,yDim);for(var ft=0;ft<ut;ft++){var mt=ct(_,tt,it,ot,yDim[ft]);st[1]=mathMin$9(mt,st[1]),dt[1]=mathMax$9(mt,dt[1])}st[0]=mathMin$9(_e,st[0]),dt[0]=mathMax$9(_e,dt[0]),st[0]=mathMin$9(at,st[0]),dt[0]=mathMax$9(at,dt[0]),st[1]=mathMin$9(_,st[1]),dt[1]=mathMax$9(_,dt[1]),st[1]=mathMin$9(ot,st[1]),dt[1]=mathMax$9(ot,dt[1])}function fromQuadratic(_e,_,et,tt,nt,it,at,ot){var st=quadraticExtremum,dt=quadraticAt$1,ht=mathMax$9(mathMin$9(st(_e,et,nt),1),0),ct=mathMax$9(mathMin$9(st(_,tt,it),1),0),ut=dt(_e,et,nt,ht),ft=dt(_,tt,it,ct);at[0]=mathMin$9(_e,nt,ut),at[1]=mathMin$9(_,it,ft),ot[0]=mathMax$9(_e,nt,ut),ot[1]=mathMax$9(_,it,ft)}function fromArc(_e,_,et,tt,nt,it,at,ot,st){var dt=min$1,ht=max$1,ct=Math.abs(nt-it);if(ct%PI2$8<1e-4&&ct>1e-4){ot[0]=_e-et,ot[1]=_-tt,st[0]=_e+et,st[1]=_+tt;return}if(start[0]=mathCos$4(nt)*et+_e,start[1]=mathSin$4(nt)*tt+_,end[0]=mathCos$4(it)*et+_e,end[1]=mathSin$4(it)*tt+_,dt(ot,start,end),ht(st,start,end),nt=nt%PI2$8,nt<0&&(nt=nt+PI2$8),it=it%PI2$8,it<0&&(it=it+PI2$8),nt>it&&!at?it+=PI2$8:nt<it&&at&&(nt+=PI2$8),at){var ut=it;it=nt,nt=ut}for(var ft=0;ft<it;ft+=Math.PI/2)ft>nt&&(extremity[0]=mathCos$4(ft)*et+_e,extremity[1]=mathSin$4(ft)*tt+_,dt(ot,extremity,ot),ht(st,extremity,st))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(_e){var _=Math.round(_e/PI$8*1e8)/1e8;return _%2*PI$8}function normalizeArcAngles(_e,_){var et=modPI2(_e[0]);et<0&&(et+=PI2$7);var tt=et-_e[0],nt=_e[1];nt+=tt,!_&&nt-et>=PI2$7?nt=et+PI2$7:_&&et-nt>=PI2$7?nt=et-PI2$7:!_&&et>nt?nt=et+(PI2$7-modPI2(et-nt)):_&&et<nt&&(nt=et-(PI2$7-modPI2(nt-et))),_e[0]=et,_e[1]=nt}var PathProxy=function(){function _e(_){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,_&&(this._saveData=!1),this._saveData&&(this.data=[])}return _e.prototype.increaseVersion=function(){this._version++},_e.prototype.getVersion=function(){return this._version},_e.prototype.setScale=function(_,et,tt){tt=tt||0,tt>0&&(this._ux=mathAbs$2(tt/devicePixelRatio/_)||0,this._uy=mathAbs$2(tt/devicePixelRatio/et)||0)},_e.prototype.setDPR=function(_){this.dpr=_},_e.prototype.setContext=function(_){this._ctx=_},_e.prototype.getContext=function(){return this._ctx},_e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},_e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},_e.prototype.moveTo=function(_,et){return this._drawPendingPt(),this.addData(CMD$4.M,_,et),this._ctx&&this._ctx.moveTo(_,et),this._x0=_,this._y0=et,this._xi=_,this._yi=et,this},_e.prototype.lineTo=function(_,et){var tt=mathAbs$2(_-this._xi),nt=mathAbs$2(et-this._yi),it=tt>this._ux||nt>this._uy;if(this.addData(CMD$4.L,_,et),this._ctx&&it&&this._ctx.lineTo(_,et),it)this._xi=_,this._yi=et,this._pendingPtDist=0;else{var at=tt*tt+nt*nt;at>this._pendingPtDist&&(this._pendingPtX=_,this._pendingPtY=et,this._pendingPtDist=at)}return this},_e.prototype.bezierCurveTo=function(_,et,tt,nt,it,at){return this._drawPendingPt(),this.addData(CMD$4.C,_,et,tt,nt,it,at),this._ctx&&this._ctx.bezierCurveTo(_,et,tt,nt,it,at),this._xi=it,this._yi=at,this},_e.prototype.quadraticCurveTo=function(_,et,tt,nt){return this._drawPendingPt(),this.addData(CMD$4.Q,_,et,tt,nt),this._ctx&&this._ctx.quadraticCurveTo(_,et,tt,nt),this._xi=tt,this._yi=nt,this},_e.prototype.arc=function(_,et,tt,nt,it,at){this._drawPendingPt(),tmpAngles[0]=nt,tmpAngles[1]=it,normalizeArcAngles(tmpAngles,at),nt=tmpAngles[0],it=tmpAngles[1];var ot=it-nt;return this.addData(CMD$4.A,_,et,tt,tt,nt,ot,0,at?0:1),this._ctx&&this._ctx.arc(_,et,tt,nt,it,at),this._xi=mathCos$3(it)*tt+_,this._yi=mathSin$3(it)*tt+et,this},_e.prototype.arcTo=function(_,et,tt,nt,it){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(_,et,tt,nt,it),this},_e.prototype.rect=function(_,et,tt,nt){return this._drawPendingPt(),this._ctx&&this._ctx.rect(_,et,tt,nt),this.addData(CMD$4.R,_,et,tt,nt),this},_e.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var _=this._ctx,et=this._x0,tt=this._y0;return _&&_.closePath(),this._xi=et,this._yi=tt,this},_e.prototype.fill=function(_){_&&_.fill(),this.toStatic()},_e.prototype.stroke=function(_){_&&_.stroke(),this.toStatic()},_e.prototype.len=function(){return this._len},_e.prototype.setData=function(_){var et=_.length;!(this.data&&this.data.length===et)&&hasTypedArray&&(this.data=new Float32Array(et));for(var tt=0;tt<et;tt++)this.data[tt]=_[tt];this._len=et},_e.prototype.appendPath=function(_){_ instanceof Array||(_=[_]);for(var et=_.length,tt=0,nt=this._len,it=0;it<et;it++)tt+=_[it].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(nt+tt));for(var it=0;it<et;it++)for(var at=_[it].data,ot=0;ot<at.length;ot++)this.data[nt++]=at[ot];this._len=nt},_e.prototype.addData=function(_,et,tt,nt,it,at,ot,st,dt){if(this._saveData){var ht=this.data;this._len+arguments.length>ht.length&&(this._expandData(),ht=this.data);for(var ct=0;ct<arguments.length;ct++)ht[this._len++]=arguments[ct]}},_e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},_e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var _=[],et=0;et<this._len;et++)_[et]=this.data[et];this.data=_}},_e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var _=this.data;_ instanceof Array&&(_.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(_)))}},_e.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var _=this.data,et=0,tt=0,nt=0,it=0,at;for(at=0;at<this._len;){var ot=_[at++],st=at===1;switch(st&&(et=_[at],tt=_[at+1],nt=et,it=tt),ot){case CMD$4.M:et=nt=_[at++],tt=it=_[at++],min2[0]=nt,min2[1]=it,max2[0]=nt,max2[1]=it;break;case CMD$4.L:fromLine(et,tt,_[at],_[at+1],min2,max2),et=_[at++],tt=_[at++];break;case CMD$4.C:fromCubic(et,tt,_[at++],_[at++],_[at++],_[at++],_[at],_[at+1],min2,max2),et=_[at++],tt=_[at++];break;case CMD$4.Q:fromQuadratic(et,tt,_[at++],_[at++],_[at],_[at+1],min2,max2),et=_[at++],tt=_[at++];break;case CMD$4.A:var dt=_[at++],ht=_[at++],ct=_[at++],ut=_[at++],ft=_[at++],gt=_[at++]+ft;at+=1;var mt=!_[at++];st&&(nt=mathCos$3(ft)*ct+dt,it=mathSin$3(ft)*ut+ht),fromArc(dt,ht,ct,ut,ft,gt,mt,min2,max2),et=mathCos$3(gt)*ct+dt,tt=mathSin$3(gt)*ut+ht;break;case CMD$4.R:nt=et=_[at++],it=tt=_[at++];var vt=_[at++],yt=_[at++];fromLine(nt,it,nt+vt,it+yt,min2,max2);break;case CMD$4.Z:et=nt,tt=it;break}min$1(min,min,min2),max$1(max,max,max2)}return at===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},_e.prototype._calculateLength=function(){var _=this.data,et=this._len,tt=this._ux,nt=this._uy,it=0,at=0,ot=0,st=0;this._pathSegLen||(this._pathSegLen=[]);for(var dt=this._pathSegLen,ht=0,ct=0,ut=0;ut<et;){var ft=_[ut++],gt=ut===1;gt&&(it=_[ut],at=_[ut+1],ot=it,st=at);var mt=-1;switch(ft){case CMD$4.M:it=ot=_[ut++],at=st=_[ut++];break;case CMD$4.L:{var vt=_[ut++],yt=_[ut++],bt=vt-it,_t=yt-at;(mathAbs$2(bt)>tt||mathAbs$2(_t)>nt||ut===et-1)&&(mt=Math.sqrt(bt*bt+_t*_t),it=vt,at=yt);break}case CMD$4.C:{var xt=_[ut++],St=_[ut++],vt=_[ut++],yt=_[ut++],Tt=_[ut++],wt=_[ut++];mt=cubicLength(it,at,xt,St,vt,yt,Tt,wt,10),it=Tt,at=wt;break}case CMD$4.Q:{var xt=_[ut++],St=_[ut++],vt=_[ut++],yt=_[ut++];mt=quadraticLength(it,at,xt,St,vt,yt,10),it=vt,at=yt;break}case CMD$4.A:var Ct=_[ut++],Et=_[ut++],At=_[ut++],Pt=_[ut++],Rt=_[ut++],It=_[ut++],Mt=It+Rt;ut+=1,gt&&(ot=mathCos$3(Rt)*At+Ct,st=mathSin$3(Rt)*Pt+Et),mt=mathMax$8(At,Pt)*mathMin$8(PI2$7,Math.abs(It)),it=mathCos$3(Mt)*At+Ct,at=mathSin$3(Mt)*Pt+Et;break;case CMD$4.R:{ot=it=_[ut++],st=at=_[ut++];var Ot=_[ut++],$t=_[ut++];mt=Ot*2+$t*2;break}case CMD$4.Z:{var bt=ot-it,_t=st-at;mt=Math.sqrt(bt*bt+_t*_t),it=ot,at=st;break}}mt>=0&&(dt[ct++]=mt,ht+=mt)}return this._pathLen=ht,ht},_e.prototype.rebuildPath=function(_,et){var tt=this.data,nt=this._ux,it=this._uy,at=this._len,ot,st,dt,ht,ct,ut,ft=et<1,gt,mt,vt=0,yt=0,bt,_t=0,xt,St;if(!(ft&&(this._pathSegLen||this._calculateLength(),gt=this._pathSegLen,mt=this._pathLen,bt=et*mt,!bt)))e:for(var Tt=0;Tt<at;){var wt=tt[Tt++],Ct=Tt===1;switch(Ct&&(dt=tt[Tt],ht=tt[Tt+1],ot=dt,st=ht),wt!==CMD$4.L&&_t>0&&(_.lineTo(xt,St),_t=0),wt){case CMD$4.M:ot=dt=tt[Tt++],st=ht=tt[Tt++],_.moveTo(dt,ht);break;case CMD$4.L:{ct=tt[Tt++],ut=tt[Tt++];var Et=mathAbs$2(ct-dt),At=mathAbs$2(ut-ht);if(Et>nt||At>it){if(ft){var Pt=gt[yt++];if(vt+Pt>bt){var Rt=(bt-vt)/Pt;_.lineTo(dt*(1-Rt)+ct*Rt,ht*(1-Rt)+ut*Rt);break e}vt+=Pt}_.lineTo(ct,ut),dt=ct,ht=ut,_t=0}else{var It=Et*Et+At*At;It>_t&&(xt=ct,St=ut,_t=It)}break}case CMD$4.C:{var Mt=tt[Tt++],Ot=tt[Tt++],$t=tt[Tt++],Lt=tt[Tt++],kt=tt[Tt++],Nt=tt[Tt++];if(ft){var Pt=gt[yt++];if(vt+Pt>bt){var Rt=(bt-vt)/Pt;cubicSubdivide(dt,Mt,$t,kt,Rt,tmpOutX),cubicSubdivide(ht,Ot,Lt,Nt,Rt,tmpOutY),_.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}vt+=Pt}_.bezierCurveTo(Mt,Ot,$t,Lt,kt,Nt),dt=kt,ht=Nt;break}case CMD$4.Q:{var Mt=tt[Tt++],Ot=tt[Tt++],$t=tt[Tt++],Lt=tt[Tt++];if(ft){var Pt=gt[yt++];if(vt+Pt>bt){var Rt=(bt-vt)/Pt;quadraticSubdivide(dt,Mt,$t,Rt,tmpOutX),quadraticSubdivide(ht,Ot,Lt,Rt,tmpOutY),_.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}vt+=Pt}_.quadraticCurveTo(Mt,Ot,$t,Lt),dt=$t,ht=Lt;break}case CMD$4.A:var Vt=tt[Tt++],zt=tt[Tt++],Xt=tt[Tt++],Wt=tt[Tt++],nr=tt[Tt++],Jt=tt[Tt++],lr=tt[Tt++],pr=!tt[Tt++],Zt=Xt>Wt?Xt:Wt,Kt=mathAbs$2(Xt-Wt)>.001,ur=nr+Jt,ir=!1;if(ft){var Pt=gt[yt++];vt+Pt>bt&&(ur=nr+Jt*(bt-vt)/Pt,ir=!0),vt+=Pt}if(Kt&&_.ellipse?_.ellipse(Vt,zt,Xt,Wt,lr,nr,ur,pr):_.arc(Vt,zt,Zt,nr,ur,pr),ir)break e;Ct&&(ot=mathCos$3(nr)*Xt+Vt,st=mathSin$3(nr)*Wt+zt),dt=mathCos$3(ur)*Xt+Vt,ht=mathSin$3(ur)*Wt+zt;break;case CMD$4.R:ot=dt=tt[Tt],st=ht=tt[Tt+1],ct=tt[Tt++],ut=tt[Tt++];var hr=tt[Tt++],fr=tt[Tt++];if(ft){var Pt=gt[yt++];if(vt+Pt>bt){var mr=bt-vt;_.moveTo(ct,ut),_.lineTo(ct+mathMin$8(mr,hr),ut),mr-=hr,mr>0&&_.lineTo(ct+hr,ut+mathMin$8(mr,fr)),mr-=fr,mr>0&&_.lineTo(ct+mathMax$8(hr-mr,0),ut+fr),mr-=hr,mr>0&&_.lineTo(ct,ut+mathMax$8(fr-mr,0));break e}vt+=Pt}_.rect(ct,ut,hr,fr);break;case CMD$4.Z:if(ft){var Pt=gt[yt++];if(vt+Pt>bt){var Rt=(bt-vt)/Pt;_.lineTo(dt*(1-Rt)+ot*Rt,ht*(1-Rt)+st*Rt);break e}vt+=Pt}_.closePath(),dt=ot,ht=st}}},_e.prototype.clone=function(){var _=new _e,et=this.data;return _.data=et.slice?et.slice():Array.prototype.slice.call(et),_._len=this._len,_},_e.CMD=CMD$4,_e.initDefaultProps=function(){var _=_e.prototype;_._saveData=!0,_._ux=0,_._uy=0,_._pendingPtDist=0,_._version=0}(),_e}();function containStroke$4(_e,_,et,tt,nt,it,at){if(nt===0)return!1;var ot=nt,st=0,dt=_e;if(at>_+ot&&at>tt+ot||at<_-ot&&at<tt-ot||it>_e+ot&&it>et+ot||it<_e-ot&&it<et-ot)return!1;if(_e!==et)st=(_-tt)/(_e-et),dt=(_e*tt-et*_)/(_e-et);else return Math.abs(it-_e)<=ot/2;var ht=st*it-at+dt,ct=ht*ht/(st*st+1);return ct<=ot/2*ot/2}function containStroke$3(_e,_,et,tt,nt,it,at,ot,st,dt,ht){if(st===0)return!1;var ct=st;if(ht>_+ct&&ht>tt+ct&&ht>it+ct&&ht>ot+ct||ht<_-ct&&ht<tt-ct&&ht<it-ct&&ht<ot-ct||dt>_e+ct&&dt>et+ct&&dt>nt+ct&&dt>at+ct||dt<_e-ct&&dt<et-ct&&dt<nt-ct&&dt<at-ct)return!1;var ut=cubicProjectPoint(_e,_,et,tt,nt,it,at,ot,dt,ht,null);return ut<=ct/2}function containStroke$2(_e,_,et,tt,nt,it,at,ot,st){if(at===0)return!1;var dt=at;if(st>_+dt&&st>tt+dt&&st>it+dt||st<_-dt&&st<tt-dt&&st<it-dt||ot>_e+dt&&ot>et+dt&&ot>nt+dt||ot<_e-dt&&ot<et-dt&&ot<nt-dt)return!1;var ht=quadraticProjectPoint(_e,_,et,tt,nt,it,ot,st,null);return ht<=dt/2}var PI2$6=Math.PI*2;function normalizeRadian(_e){return _e%=PI2$6,_e<0&&(_e+=PI2$6),_e}var PI2$5=Math.PI*2;function containStroke$1(_e,_,et,tt,nt,it,at,ot,st){if(at===0)return!1;var dt=at;ot-=_e,st-=_;var ht=Math.sqrt(ot*ot+st*st);if(ht-dt>et||ht+dt<et)return!1;if(Math.abs(tt-nt)%PI2$5<1e-4)return!0;if(it){var ct=tt;tt=normalizeRadian(nt),nt=normalizeRadian(ct)}else tt=normalizeRadian(tt),nt=normalizeRadian(nt);tt>nt&&(nt+=PI2$5);var ut=Math.atan2(st,ot);return ut<0&&(ut+=PI2$5),ut>=tt&&ut<=nt||ut+PI2$5>=tt&&ut+PI2$5<=nt}function windingLine(_e,_,et,tt,nt,it){if(it>_&&it>tt||it<_&&it<tt||tt===_)return 0;var at=(it-_)/(tt-_),ot=tt<_?1:-1;(at===1||at===0)&&(ot=tt<_?.5:-.5);var st=at*(et-_e)+_e;return st===nt?1/0:st>nt?ot:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(_e,_){return Math.abs(_e-_)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var _e=extrema[0];extrema[0]=extrema[1],extrema[1]=_e}function windingCubic(_e,_,et,tt,nt,it,at,ot,st,dt){if(dt>_&&dt>tt&&dt>it&&dt>ot||dt<_&&dt<tt&&dt<it&&dt<ot)return 0;var ht=cubicRootAt(_,tt,it,ot,dt,roots);if(ht===0)return 0;for(var ct=0,ut=-1,ft=void 0,gt=void 0,mt=0;mt<ht;mt++){var vt=roots[mt],yt=vt===0||vt===1?.5:1,bt=cubicAt(_e,et,nt,at,vt);bt<st||(ut<0&&(ut=cubicExtrema(_,tt,it,ot,extrema),extrema[1]<extrema[0]&&ut>1&&swapExtrema(),ft=cubicAt(_,tt,it,ot,extrema[0]),ut>1&&(gt=cubicAt(_,tt,it,ot,extrema[1]))),ut===2?vt<extrema[0]?ct+=ft<_?yt:-yt:vt<extrema[1]?ct+=gt<ft?yt:-yt:ct+=ot<gt?yt:-yt:vt<extrema[0]?ct+=ft<_?yt:-yt:ct+=ot<ft?yt:-yt)}return ct}function windingQuadratic(_e,_,et,tt,nt,it,at,ot){if(ot>_&&ot>tt&&ot>it||ot<_&&ot<tt&&ot<it)return 0;var st=quadraticRootAt(_,tt,it,ot,roots);if(st===0)return 0;var dt=quadraticExtremum(_,tt,it);if(dt>=0&&dt<=1){for(var ht=0,ct=quadraticAt$1(_,tt,it,dt),ut=0;ut<st;ut++){var ft=roots[ut]===0||roots[ut]===1?.5:1,gt=quadraticAt$1(_e,et,nt,roots[ut]);gt<at||(roots[ut]<dt?ht+=ct<_?ft:-ft:ht+=it<ct?ft:-ft)}return ht}else{var ft=roots[0]===0||roots[0]===1?.5:1,gt=quadraticAt$1(_e,et,nt,roots[0]);return gt<at?0:it<_?ft:-ft}}function windingArc(_e,_,et,tt,nt,it,at,ot){if(ot-=_,ot>et||ot<-et)return 0;var st=Math.sqrt(et*et-ot*ot);roots[0]=-st,roots[1]=st;var dt=Math.abs(tt-nt);if(dt<1e-4)return 0;if(dt>=PI2$4-1e-4){tt=0,nt=PI2$4;var ht=it?1:-1;return at>=roots[0]+_e&&at<=roots[1]+_e?ht:0}if(tt>nt){var ct=tt;tt=nt,nt=ct}tt<0&&(tt+=PI2$4,nt+=PI2$4);for(var ut=0,ft=0;ft<2;ft++){var gt=roots[ft];if(gt+_e>at){var mt=Math.atan2(ot,gt),ht=it?1:-1;mt<0&&(mt=PI2$4+mt),(mt>=tt&&mt<=nt||mt+PI2$4>=tt&&mt+PI2$4<=nt)&&(mt>Math.PI/2&&mt<Math.PI*1.5&&(ht=-ht),ut+=ht)}}return ut}function containPath(_e,_,et,tt,nt){for(var it=_e.data,at=_e.len(),ot=0,st=0,dt=0,ht=0,ct=0,ut,ft,gt=0;gt<at;){var mt=it[gt++],vt=gt===1;switch(mt===CMD$3.M&&gt>1&&(et||(ot+=windingLine(st,dt,ht,ct,tt,nt))),vt&&(st=it[gt],dt=it[gt+1],ht=st,ct=dt),mt){case CMD$3.M:ht=it[gt++],ct=it[gt++],st=ht,dt=ct;break;case CMD$3.L:if(et){if(containStroke$4(st,dt,it[gt],it[gt+1],_,tt,nt))return!0}else ot+=windingLine(st,dt,it[gt],it[gt+1],tt,nt)||0;st=it[gt++],dt=it[gt++];break;case CMD$3.C:if(et){if(containStroke$3(st,dt,it[gt++],it[gt++],it[gt++],it[gt++],it[gt],it[gt+1],_,tt,nt))return!0}else ot+=windingCubic(st,dt,it[gt++],it[gt++],it[gt++],it[gt++],it[gt],it[gt+1],tt,nt)||0;st=it[gt++],dt=it[gt++];break;case CMD$3.Q:if(et){if(containStroke$2(st,dt,it[gt++],it[gt++],it[gt],it[gt+1],_,tt,nt))return!0}else ot+=windingQuadratic(st,dt,it[gt++],it[gt++],it[gt],it[gt+1],tt,nt)||0;st=it[gt++],dt=it[gt++];break;case CMD$3.A:var yt=it[gt++],bt=it[gt++],_t=it[gt++],xt=it[gt++],St=it[gt++],Tt=it[gt++];gt+=1;var wt=!!(1-it[gt++]);ut=Math.cos(St)*_t+yt,ft=Math.sin(St)*xt+bt,vt?(ht=ut,ct=ft):ot+=windingLine(st,dt,ut,ft,tt,nt);var Ct=(tt-yt)*xt/_t+yt;if(et){if(containStroke$1(yt,bt,xt,St,St+Tt,wt,_,Ct,nt))return!0}else ot+=windingArc(yt,bt,xt,St,St+Tt,wt,Ct,nt);st=Math.cos(St+Tt)*_t+yt,dt=Math.sin(St+Tt)*xt+bt;break;case CMD$3.R:ht=st=it[gt++],ct=dt=it[gt++];var Et=it[gt++],At=it[gt++];if(ut=ht+Et,ft=ct+At,et){if(containStroke$4(ht,ct,ut,ct,_,tt,nt)||containStroke$4(ut,ct,ut,ft,_,tt,nt)||containStroke$4(ut,ft,ht,ft,_,tt,nt)||containStroke$4(ht,ft,ht,ct,_,tt,nt))return!0}else ot+=windingLine(ut,ct,ut,ft,tt,nt),ot+=windingLine(ht,ft,ht,ct,tt,nt);break;case CMD$3.Z:if(et){if(containStroke$4(st,dt,ht,ct,_,tt,nt))return!0}else ot+=windingLine(st,dt,ht,ct,tt,nt);st=ht,dt=ct;break}}return!et&&!isAroundEqual$1(dt,ct)&&(ot+=windingLine(st,dt,ht,ct,tt,nt)||0),ot!==0}function contain$2(_e,_,et){return containPath(_e,0,!1,_,et)}function containStroke(_e,_,et,tt){return containPath(_e,_,!0,et,tt)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.update=function(){var et=this;_e.prototype.update.call(this);var tt=this.style;if(tt.decal){var nt=this._decalEl=this._decalEl||new _;nt.buildPath===_.prototype.buildPath&&(nt.buildPath=function(st){et.buildPath(st,et.shape)}),nt.silent=!0;var it=nt.style;for(var at in tt)it[at]!==tt[at]&&(it[at]=tt[at]);it.fill=tt.fill?tt.decal:null,it.decal=null,it.shadowColor=null,tt.strokeFirst&&(it.stroke=null);for(var ot=0;ot<pathCopyParams.length;++ot)nt[pathCopyParams[ot]]=this[pathCopyParams[ot]];nt.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},_.prototype.getDecalElement=function(){return this._decalEl},_.prototype._init=function(et){var tt=keys(et);this.shape=this.getDefaultShape();var nt=this.getDefaultStyle();nt&&this.useStyle(nt);for(var it=0;it<tt.length;it++){var at=tt[it],ot=et[at];at==="style"?this.style?extend(this.style,ot):this.useStyle(ot):at==="shape"?extend(this.shape,ot):_e.prototype.attrKV.call(this,at,ot)}this.style||this.useStyle({})},_.prototype.getDefaultStyle=function(){return null},_.prototype.getDefaultShape=function(){return{}},_.prototype.canBeInsideText=function(){return this.hasFill()},_.prototype.getInsideTextFill=function(){var et=this.style.fill;if(et!=="none"){if(isString$1(et)){var tt=lum(et,0);return tt>.5?DARK_LABEL_COLOR:tt>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(et)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},_.prototype.getInsideTextStroke=function(et){var tt=this.style.fill;if(isString$1(tt)){var nt=this.__zr,it=!!(nt&&nt.isDarkMode()),at=lum(et,0)<DARK_MODE_THRESHOLD;if(it===at)return tt}},_.prototype.buildPath=function(et,tt,nt){},_.prototype.pathUpdated=function(){this.__dirty&=-5},_.prototype.getUpdatedPathProxy=function(et){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,et),this.path},_.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},_.prototype.hasStroke=function(){var et=this.style,tt=et.stroke;return!(tt==null||tt==="none"||!(et.lineWidth>0))},_.prototype.hasFill=function(){var et=this.style,tt=et.fill;return tt!=null&&tt!=="none"},_.prototype.getBoundingRect=function(){var et=this._rect,tt=this.style,nt=!et;if(nt){var it=!1;this.path||(it=!0,this.createPathProxy());var at=this.path;(it||this.__dirty&SHAPE_CHANGED_BIT)&&(at.beginPath(),this.buildPath(at,this.shape,!1),this.pathUpdated()),et=at.getBoundingRect()}if(this._rect=et,this.hasStroke()&&this.path&&this.path.len()>0){var ot=this._rectStroke||(this._rectStroke=et.clone());if(this.__dirty||nt){ot.copy(et);var st=tt.strokeNoScale?this.getLineScale():1,dt=tt.lineWidth;if(!this.hasFill()){var ht=this.strokeContainThreshold;dt=Math.max(dt,ht??4)}st>1e-10&&(ot.width+=dt/st,ot.height+=dt/st,ot.x-=dt/st/2,ot.y-=dt/st/2)}return ot}return et},_.prototype.contain=function(et,tt){var nt=this.transformCoordToLocal(et,tt),it=this.getBoundingRect(),at=this.style;if(et=nt[0],tt=nt[1],it.contain(et,tt)){var ot=this.path;if(this.hasStroke()){var st=at.lineWidth,dt=at.strokeNoScale?this.getLineScale():1;if(dt>1e-10&&(this.hasFill()||(st=Math.max(st,this.strokeContainThreshold)),containStroke(ot,st/dt,et,tt)))return!0}if(this.hasFill())return contain$2(ot,et,tt)}return!1},_.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},_.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},_.prototype.animateShape=function(et){return this.animate("shape",et)},_.prototype.updateDuringAnimation=function(et){et==="style"?this.dirtyStyle():et==="shape"?this.dirtyShape():this.markRedraw()},_.prototype.attrKV=function(et,tt){et==="shape"?this.setShape(tt):_e.prototype.attrKV.call(this,et,tt)},_.prototype.setShape=function(et,tt){var nt=this.shape;return nt||(nt=this.shape={}),typeof et=="string"?nt[et]=tt:extend(nt,et),this.dirtyShape(),this},_.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},_.prototype.createStyle=function(et){return createObject(DEFAULT_PATH_STYLE,et)},_.prototype._innerSaveToNormal=function(et){_e.prototype._innerSaveToNormal.call(this,et);var tt=this._normalState;et.shape&&!tt.shape&&(tt.shape=extend({},this.shape))},_.prototype._applyStateObj=function(et,tt,nt,it,at,ot){_e.prototype._applyStateObj.call(this,et,tt,nt,it,at,ot);var st=!(tt&&it),dt;if(tt&&tt.shape?at?it?dt=tt.shape:(dt=extend({},nt.shape),extend(dt,tt.shape)):(dt=extend({},it?this.shape:nt.shape),extend(dt,tt.shape)):st&&(dt=nt.shape),dt)if(at){this.shape=extend({},this.shape);for(var ht={},ct=keys(dt),ut=0;ut<ct.length;ut++){var ft=ct[ut];typeof dt[ft]=="object"?this.shape[ft]=dt[ft]:ht[ft]=dt[ft]}this._transitionState(et,{shape:ht},ot)}else this.shape=dt,this.dirtyShape()},_.prototype._mergeStates=function(et){for(var tt=_e.prototype._mergeStates.call(this,et),nt,it=0;it<et.length;it++){var at=et[it];at.shape&&(nt=nt||{},this._mergeStyle(nt,at.shape))}return nt&&(tt.shape=nt),tt},_.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},_.prototype.isZeroArea=function(){return!1},_.extend=function(et){var tt=function(it){__extends(at,it);function at(ot){var st=it.call(this,ot)||this;return et.init&&et.init.call(st,ot),st}return at.prototype.getDefaultStyle=function(){return clone$4(et.style)},at.prototype.getDefaultShape=function(){return clone$4(et.shape)},at}(_);for(var nt in et)typeof et[nt]=="function"&&(tt.prototype[nt]=et[nt]);return tt},_.initDefaultProps=function(){var et=_.prototype;et.type="path",et.strokeContainThreshold=5,et.segmentIgnoreThreshold=0,et.subPixelOptimize=!1,et.autoBatch=!1,et.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),_}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(_e){__extends(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.hasStroke=function(){var et=this.style,tt=et.stroke;return tt!=null&&tt!=="none"&&et.lineWidth>0},_.prototype.hasFill=function(){var et=this.style,tt=et.fill;return tt!=null&&tt!=="none"},_.prototype.createStyle=function(et){return createObject(DEFAULT_TSPAN_STYLE,et)},_.prototype.setBoundingRect=function(et){this._rect=et},_.prototype.getBoundingRect=function(){var et=this.style;if(!this._rect){var tt=et.text;tt!=null?tt+="":tt="";var nt=getBoundingRect(tt,et.font,et.textAlign,et.textBaseline);if(nt.x+=et.x||0,nt.y+=et.y||0,this.hasStroke()){var it=et.lineWidth;nt.x-=it/2,nt.y-=it/2,nt.width+=it,nt.height+=it}this._rect=nt}return this._rect},_.initDefaultProps=function(){var et=_.prototype;et.dirtyRectTolerance=10}(),_}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(_e){return!!(_e&&typeof _e!="string"&&_e.width&&_e.height)}var ZRImage=function(_e){__extends(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.createStyle=function(et){return createObject(DEFAULT_IMAGE_STYLE,et)},_.prototype._getSize=function(et){var tt=this.style,nt=tt[et];if(nt!=null)return nt;var it=isImageLike$1(tt.image)?tt.image:this.__image;if(!it)return 0;var at=et==="width"?"height":"width",ot=tt[at];return ot==null?it[et]:it[et]/it[at]*ot},_.prototype.getWidth=function(){return this._getSize("width")},_.prototype.getHeight=function(){return this._getSize("height")},_.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},_.prototype.getBoundingRect=function(){var et=this.style;return this._rect||(this._rect=new BoundingRect(et.x||0,et.y||0,this.getWidth(),this.getHeight())),this._rect},_}(Displayable);ZRImage.prototype.type="image";function buildPath$2(_e,_){var et=_.x,tt=_.y,nt=_.width,it=_.height,at=_.r,ot,st,dt,ht;nt<0&&(et=et+nt,nt=-nt),it<0&&(tt=tt+it,it=-it),typeof at=="number"?ot=st=dt=ht=at:at instanceof Array?at.length===1?ot=st=dt=ht=at[0]:at.length===2?(ot=dt=at[0],st=ht=at[1]):at.length===3?(ot=at[0],st=ht=at[1],dt=at[2]):(ot=at[0],st=at[1],dt=at[2],ht=at[3]):ot=st=dt=ht=0;var ct;ot+st>nt&&(ct=ot+st,ot*=nt/ct,st*=nt/ct),dt+ht>nt&&(ct=dt+ht,dt*=nt/ct,ht*=nt/ct),st+dt>it&&(ct=st+dt,st*=it/ct,dt*=it/ct),ot+ht>it&&(ct=ot+ht,ot*=it/ct,ht*=it/ct),_e.moveTo(et+ot,tt),_e.lineTo(et+nt-st,tt),st!==0&&_e.arc(et+nt-st,tt+st,st,-Math.PI/2,0),_e.lineTo(et+nt,tt+it-dt),dt!==0&&_e.arc(et+nt-dt,tt+it-dt,dt,0,Math.PI/2),_e.lineTo(et+ht,tt+it),ht!==0&&_e.arc(et+ht,tt+it-ht,ht,Math.PI/2,Math.PI),_e.lineTo(et,tt+ot),ot!==0&&_e.arc(et+ot,tt+ot,ot,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(_e,_,et){if(_){var tt=_.x1,nt=_.x2,it=_.y1,at=_.y2;_e.x1=tt,_e.x2=nt,_e.y1=it,_e.y2=at;var ot=et&&et.lineWidth;return ot&&(round$2(tt*2)===round$2(nt*2)&&(_e.x1=_e.x2=subPixelOptimize$1(tt,ot,!0)),round$2(it*2)===round$2(at*2)&&(_e.y1=_e.y2=subPixelOptimize$1(it,ot,!0))),_e}}function subPixelOptimizeRect$1(_e,_,et){if(_){var tt=_.x,nt=_.y,it=_.width,at=_.height;_e.x=tt,_e.y=nt,_e.width=it,_e.height=at;var ot=et&&et.lineWidth;return ot&&(_e.x=subPixelOptimize$1(tt,ot,!0),_e.y=subPixelOptimize$1(nt,ot,!0),_e.width=Math.max(subPixelOptimize$1(tt+it,ot,!1)-_e.x,it===0?0:1),_e.height=Math.max(subPixelOptimize$1(nt+at,ot,!1)-_e.y,at===0?0:1)),_e}}function subPixelOptimize$1(_e,_,et){if(!_)return _e;var tt=round$2(_e*2);return(tt+round$2(_))%2===0?tt/2:(tt+(et?1:-1))/2}var RectShape=function(){function _e(){this.x=0,this.y=0,this.width=0,this.height=0}return _e}(),subPixelOptimizeOutputShape$1={},Rect$2=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultShape=function(){return new RectShape},_.prototype.buildPath=function(et,tt){var nt,it,at,ot;if(this.subPixelOptimize){var st=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,tt,this.style);nt=st.x,it=st.y,at=st.width,ot=st.height,st.r=tt.r,tt=st}else nt=tt.x,it=tt.y,at=tt.width,ot=tt.height;tt.r?buildPath$2(et,tt):et.rect(nt,it,at,ot)},_.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},_}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(_e){__extends(_,_e);function _(et){var tt=_e.call(this)||this;return tt.type="text",tt._children=[],tt._defaultStyle=DEFAULT_RICH_TEXT_COLOR,tt.attr(et),tt}return _.prototype.childrenRef=function(){return this._children},_.prototype.update=function(){_e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var et=0;et<this._children.length;et++){var tt=this._children[et];tt.zlevel=this.zlevel,tt.z=this.z,tt.z2=this.z2,tt.culling=this.culling,tt.cursor=this.cursor,tt.invisible=this.invisible}},_.prototype.updateTransform=function(){var et=this.innerTransformable;et?(et.updateTransform(),et.transform&&(this.transform=et.transform)):_e.prototype.updateTransform.call(this)},_.prototype.getLocalTransform=function(et){var tt=this.innerTransformable;return tt?tt.getLocalTransform(et):_e.prototype.getLocalTransform.call(this,et)},_.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),_e.prototype.getComputedTransform.call(this)},_.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},_.prototype.addSelfToZr=function(et){_e.prototype.addSelfToZr.call(this,et);for(var tt=0;tt<this._children.length;tt++)this._children[tt].__zr=et},_.prototype.removeSelfFromZr=function(et){_e.prototype.removeSelfFromZr.call(this,et);for(var tt=0;tt<this._children.length;tt++)this._children[tt].__zr=null},_.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var et=new BoundingRect(0,0,0,0),tt=this._children,nt=[],it=null,at=0;at<tt.length;at++){var ot=tt[at],st=ot.getBoundingRect(),dt=ot.getLocalTransform(nt);dt?(et.copy(st),et.applyTransform(dt),it=it||et.clone(),it.union(et)):(it=it||st.clone(),it.union(st))}this._rect=it||et}return this._rect},_.prototype.setDefaultTextStyle=function(et){this._defaultStyle=et||DEFAULT_RICH_TEXT_COLOR},_.prototype.setTextContent=function(et){},_.prototype._mergeStyle=function(et,tt){if(!tt)return et;var nt=tt.rich,it=et.rich||nt&&{};return extend(et,tt),nt&&it?(this._mergeRich(it,nt),et.rich=it):it&&(et.rich=it),et},_.prototype._mergeRich=function(et,tt){for(var nt=keys(tt),it=0;it<nt.length;it++){var at=nt[it];et[at]=et[at]||{},extend(et[at],tt[at])}},_.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},_.prototype._getOrCreateChild=function(et){var tt=this._children[this._childCursor];return(!tt||!(tt instanceof et))&&(tt=new et),this._children[this._childCursor++]=tt,tt.__zr=this.__zr,tt.parent=this,tt},_.prototype._updatePlainTexts=function(){var et=this.style,tt=et.font||DEFAULT_FONT,nt=et.padding,it=getStyleText(et),at=parsePlainText(it,et),ot=needDrawBackground(et),st=!!et.backgroundColor,dt=at.outerHeight,ht=at.outerWidth,ct=at.contentWidth,ut=at.lines,ft=at.lineHeight,gt=this._defaultStyle;this.isTruncated=!!at.isTruncated;var mt=et.x||0,vt=et.y||0,yt=et.align||gt.align||"left",bt=et.verticalAlign||gt.verticalAlign||"top",_t=mt,xt=adjustTextY(vt,at.contentHeight,bt);if(ot||nt){var St=adjustTextX(mt,ht,yt),Tt=adjustTextY(vt,dt,bt);ot&&this._renderBackground(et,et,St,Tt,ht,dt)}xt+=ft/2,nt&&(_t=getTextXForPadding(mt,yt,nt),bt==="top"?xt+=nt[0]:bt==="bottom"&&(xt-=nt[2]));for(var wt=0,Ct=!1,Et=getFill("fill"in et?et.fill:(Ct=!0,gt.fill)),At=getStroke("stroke"in et?et.stroke:!st&&(!gt.autoStroke||Ct)?(wt=DEFAULT_STROKE_LINE_WIDTH,gt.stroke):null),Pt=et.textShadowBlur>0,Rt=et.width!=null&&(et.overflow==="truncate"||et.overflow==="break"||et.overflow==="breakAll"),It=at.calculatedLineHeight,Mt=0;Mt<ut.length;Mt++){var Ot=this._getOrCreateChild(TSpan),$t=Ot.createStyle();Ot.useStyle($t),$t.text=ut[Mt],$t.x=_t,$t.y=xt,$t.textAlign=yt,$t.textBaseline="middle",$t.opacity=et.opacity,$t.strokeFirst=!0,Pt&&($t.shadowBlur=et.textShadowBlur||0,$t.shadowColor=et.textShadowColor||"transparent",$t.shadowOffsetX=et.textShadowOffsetX||0,$t.shadowOffsetY=et.textShadowOffsetY||0),$t.stroke=At,$t.fill=Et,At&&($t.lineWidth=et.lineWidth||wt,$t.lineDash=et.lineDash,$t.lineDashOffset=et.lineDashOffset||0),$t.font=tt,setSeparateFont($t,et),xt+=ft,Rt&&Ot.setBoundingRect(new BoundingRect(adjustTextX($t.x,ct,$t.textAlign),adjustTextY($t.y,It,$t.textBaseline),ct,It))}},_.prototype._updateRichTexts=function(){var et=this.style,tt=getStyleText(et),nt=parseRichText(tt,et),it=nt.width,at=nt.outerWidth,ot=nt.outerHeight,st=et.padding,dt=et.x||0,ht=et.y||0,ct=this._defaultStyle,ut=et.align||ct.align,ft=et.verticalAlign||ct.verticalAlign;this.isTruncated=!!nt.isTruncated;var gt=adjustTextX(dt,at,ut),mt=adjustTextY(ht,ot,ft),vt=gt,yt=mt;st&&(vt+=st[3],yt+=st[0]);var bt=vt+it;needDrawBackground(et)&&this._renderBackground(et,et,gt,mt,at,ot);for(var _t=!!et.backgroundColor,xt=0;xt<nt.lines.length;xt++){for(var St=nt.lines[xt],Tt=St.tokens,wt=Tt.length,Ct=St.lineHeight,Et=St.width,At=0,Pt=vt,Rt=bt,It=wt-1,Mt=void 0;At<wt&&(Mt=Tt[At],!Mt.align||Mt.align==="left");)this._placeToken(Mt,et,Ct,yt,Pt,"left",_t),Et-=Mt.width,Pt+=Mt.width,At++;for(;It>=0&&(Mt=Tt[It],Mt.align==="right");)this._placeToken(Mt,et,Ct,yt,Rt,"right",_t),Et-=Mt.width,Rt-=Mt.width,It--;for(Pt+=(it-(Pt-vt)-(bt-Rt)-Et)/2;At<=It;)Mt=Tt[At],this._placeToken(Mt,et,Ct,yt,Pt+Mt.width/2,"center",_t),Pt+=Mt.width,At++;yt+=Ct}},_.prototype._placeToken=function(et,tt,nt,it,at,ot,st){var dt=tt.rich[et.styleName]||{};dt.text=et.text;var ht=et.verticalAlign,ct=it+nt/2;ht==="top"?ct=it+et.height/2:ht==="bottom"&&(ct=it+nt-et.height/2);var ut=!et.isLineHolder&&needDrawBackground(dt);ut&&this._renderBackground(dt,tt,ot==="right"?at-et.width:ot==="center"?at-et.width/2:at,ct-et.height/2,et.width,et.height);var ft=!!dt.backgroundColor,gt=et.textPadding;gt&&(at=getTextXForPadding(at,ot,gt),ct-=et.height/2-gt[0]-et.innerHeight/2);var mt=this._getOrCreateChild(TSpan),vt=mt.createStyle();mt.useStyle(vt);var yt=this._defaultStyle,bt=!1,_t=0,xt=getFill("fill"in dt?dt.fill:"fill"in tt?tt.fill:(bt=!0,yt.fill)),St=getStroke("stroke"in dt?dt.stroke:"stroke"in tt?tt.stroke:!ft&&!st&&(!yt.autoStroke||bt)?(_t=DEFAULT_STROKE_LINE_WIDTH,yt.stroke):null),Tt=dt.textShadowBlur>0||tt.textShadowBlur>0;vt.text=et.text,vt.x=at,vt.y=ct,Tt&&(vt.shadowBlur=dt.textShadowBlur||tt.textShadowBlur||0,vt.shadowColor=dt.textShadowColor||tt.textShadowColor||"transparent",vt.shadowOffsetX=dt.textShadowOffsetX||tt.textShadowOffsetX||0,vt.shadowOffsetY=dt.textShadowOffsetY||tt.textShadowOffsetY||0),vt.textAlign=ot,vt.textBaseline="middle",vt.font=et.font||DEFAULT_FONT,vt.opacity=retrieve3(dt.opacity,tt.opacity,1),setSeparateFont(vt,dt),St&&(vt.lineWidth=retrieve3(dt.lineWidth,tt.lineWidth,_t),vt.lineDash=retrieve2(dt.lineDash,tt.lineDash),vt.lineDashOffset=tt.lineDashOffset||0,vt.stroke=St),xt&&(vt.fill=xt);var wt=et.contentWidth,Ct=et.contentHeight;mt.setBoundingRect(new BoundingRect(adjustTextX(vt.x,wt,vt.textAlign),adjustTextY(vt.y,Ct,vt.textBaseline),wt,Ct))},_.prototype._renderBackground=function(et,tt,nt,it,at,ot){var st=et.backgroundColor,dt=et.borderWidth,ht=et.borderColor,ct=st&&st.image,ut=st&&!ct,ft=et.borderRadius,gt=this,mt,vt;if(ut||et.lineHeight||dt&&ht){mt=this._getOrCreateChild(Rect$2),mt.useStyle(mt.createStyle()),mt.style.fill=null;var yt=mt.shape;yt.x=nt,yt.y=it,yt.width=at,yt.height=ot,yt.r=ft,mt.dirtyShape()}if(ut){var bt=mt.style;bt.fill=st||null,bt.fillOpacity=retrieve2(et.fillOpacity,1)}else if(ct){vt=this._getOrCreateChild(ZRImage),vt.onload=function(){gt.dirtyStyle()};var _t=vt.style;_t.image=st.image,_t.x=nt,_t.y=it,_t.width=at,_t.height=ot}if(dt&&ht){var bt=mt.style;bt.lineWidth=dt,bt.stroke=ht,bt.strokeOpacity=retrieve2(et.strokeOpacity,1),bt.lineDash=et.borderDash,bt.lineDashOffset=et.borderDashOffset||0,mt.strokeContainThreshold=0,mt.hasFill()&&mt.hasStroke()&&(bt.strokeFirst=!0,bt.lineWidth*=2)}var xt=(mt||vt).style;xt.shadowBlur=et.shadowBlur||0,xt.shadowColor=et.shadowColor||"transparent",xt.shadowOffsetX=et.shadowOffsetX||0,xt.shadowOffsetY=et.shadowOffsetY||0,xt.opacity=retrieve3(et.opacity,tt.opacity,1)},_.makeFont=function(et){var tt="";return hasSeparateFont(et)&&(tt=[et.fontStyle,et.fontWeight,parseFontSize(et.fontSize),et.fontFamily||"sans-serif"].join(" ")),tt&&trim$1(tt)||et.textFont||et.font},_}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(_e){return typeof _e=="string"&&(_e.indexOf("px")!==-1||_e.indexOf("rem")!==-1||_e.indexOf("em")!==-1)?_e:isNaN(+_e)?DEFAULT_FONT_SIZE+"px":_e+"px"}function setSeparateFont(_e,_){for(var et=0;et<FONT_PARTS.length;et++){var tt=FONT_PARTS[et],nt=_[tt];nt!=null&&(_e[tt]=nt)}}function hasSeparateFont(_e){return _e.fontSize!=null||_e.fontFamily||_e.fontWeight}function normalizeTextStyle(_e){return normalizeStyle(_e),each$f(_e.rich,normalizeStyle),_e}function normalizeStyle(_e){if(_e){_e.font=ZRText.makeFont(_e);var _=_e.align;_==="middle"&&(_="center"),_e.align=_==null||VALID_TEXT_ALIGN[_]?_:"left";var et=_e.verticalAlign;et==="center"&&(et="middle"),_e.verticalAlign=et==null||VALID_TEXT_VERTICAL_ALIGN[et]?et:"top";var tt=_e.padding;tt&&(_e.padding=normalizeCssArray$1(_e.padding))}}function getStroke(_e,_){return _e==null||_<=0||_e==="transparent"||_e==="none"?null:_e.image||_e.colorStops?"#000":_e}function getFill(_e){return _e==null||_e==="none"?null:_e.image||_e.colorStops?"#000":_e}function getTextXForPadding(_e,_,et){return _==="right"?_e-et[1]:_==="center"?_e+et[3]/2-et[1]/2:_e+et[3]}function getStyleText(_e){var _=_e.text;return _!=null&&(_+=""),_}function needDrawBackground(_e){return!!(_e.backgroundColor||_e.lineHeight||_e.borderWidth&&_e.borderColor)}var getECData=makeInner(),setCommonECData=function(_e,_,et,tt){if(tt){var nt=getECData(tt);nt.dataIndex=et,nt.dataType=_,nt.seriesIndex=_e,nt.ssrType="chart",tt.type==="group"&&tt.traverse(function(it){var at=getECData(it);at.seriesIndex=_e,at.dataIndex=et,at.dataType=_,at.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(_e){return _e!=null&&_e!=="none"}function doChangeHoverState(_e,_,et){_e.onHoverStateChange&&(_e.hoverState||0)!==et&&_e.onHoverStateChange(_),_e.hoverState=et}function singleEnterEmphasis(_e){doChangeHoverState(_e,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(_e){_e.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(_e,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(_e){doChangeHoverState(_e,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(_e){_e.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(_e,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(_e){_e.selected=!0}function singleLeaveSelect(_e){_e.selected=!1}function updateElementState(_e,_,et){_(_e,et)}function traverseUpdateState(_e,_,et){updateElementState(_e,_,et),_e.isGroup&&_e.traverse(function(tt){updateElementState(tt,_,et)})}function setStatesFlag(_e,_){switch(_){case"emphasis":_e.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":_e.hoverState=HOVER_STATE_NORMAL;break;case"blur":_e.hoverState=HOVER_STATE_BLUR;break;case"select":_e.selected=!0}}function getFromStateStyle(_e,_,et,tt){for(var nt=_e.style,it={},at=0;at<_.length;at++){var ot=_[at],st=nt[ot];it[ot]=st??tt[ot]}for(var at=0;at<_e.animators.length;at++){var dt=_e.animators[at];dt.__fromStateTransition&&dt.__fromStateTransition.indexOf(et)<0&&dt.targetName==="style"&&dt.saveTo(it,_)}return it}function createEmphasisDefaultState(_e,_,et,tt){var nt=et&&indexOf(et,"select")>=0,it=!1;if(_e instanceof Path){var at=getSavedStates(_e),ot=nt&&at.selectFill||at.normalFill,st=nt&&at.selectStroke||at.normalStroke;if(hasFillOrStroke(ot)||hasFillOrStroke(st)){tt=tt||{};var dt=tt.style||{};dt.fill==="inherit"?(it=!0,tt=extend({},tt),dt=extend({},dt),dt.fill=ot):!hasFillOrStroke(dt.fill)&&hasFillOrStroke(ot)?(it=!0,tt=extend({},tt),dt=extend({},dt),dt.fill=liftColor(ot)):!hasFillOrStroke(dt.stroke)&&hasFillOrStroke(st)&&(it||(tt=extend({},tt),dt=extend({},dt)),dt.stroke=liftColor(st)),tt.style=dt}}if(tt&&tt.z2==null){it||(tt=extend({},tt));var ht=_e.z2EmphasisLift;tt.z2=_e.z2+(ht??Z2_EMPHASIS_LIFT)}return tt}function createSelectDefaultState(_e,_,et){if(et&&et.z2==null){et=extend({},et);var tt=_e.z2SelectLift;et.z2=_e.z2+(tt??Z2_SELECT_LIFT)}return et}function createBlurDefaultState(_e,_,et){var tt=indexOf(_e.currentStates,_)>=0,nt=_e.style.opacity,it=tt?null:getFromStateStyle(_e,["opacity"],_,{opacity:1});et=et||{};var at=et.style||{};return at.opacity==null&&(et=extend({},et),at=extend({opacity:tt?nt:it.opacity*.1},at),et.style=at),et}function elementStateProxy(_e,_){var et=this.states[_e];if(this.style){if(_e==="emphasis")return createEmphasisDefaultState(this,_e,_,et);if(_e==="blur")return createBlurDefaultState(this,_e,et);if(_e==="select")return createSelectDefaultState(this,_e,et)}return et}function setDefaultStateProxy(_e){_e.stateProxy=elementStateProxy;var _=_e.getTextContent(),et=_e.getTextGuideLine();_&&(_.stateProxy=elementStateProxy),et&&(et.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(_e,_){!shouldSilent(_e,_)&&!_e.__highByOuter&&traverseUpdateState(_e,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(_e,_){!shouldSilent(_e,_)&&!_e.__highByOuter&&traverseUpdateState(_e,singleLeaveEmphasis)}function enterEmphasis(_e,_){_e.__highByOuter|=1<<(_||0),traverseUpdateState(_e,singleEnterEmphasis)}function leaveEmphasis(_e,_){!(_e.__highByOuter&=~(1<<(_||0)))&&traverseUpdateState(_e,singleLeaveEmphasis)}function enterBlur(_e){traverseUpdateState(_e,singleEnterBlur)}function leaveBlur(_e){traverseUpdateState(_e,singleLeaveBlur)}function enterSelect(_e){traverseUpdateState(_e,singleEnterSelect)}function leaveSelect(_e){traverseUpdateState(_e,singleLeaveSelect)}function shouldSilent(_e,_){return _e.__highDownSilentOnTouch&&_.zrByTouch}function allLeaveBlur(_e){var _=_e.getModel(),et=[],tt=[];_.eachComponent(function(nt,it){var at=getComponentStates(it),ot=nt==="series",st=ot?_e.getViewOfSeriesModel(it):_e.getViewOfComponentModel(it);!ot&&tt.push(st),at.isBlured&&(st.group.traverse(function(dt){singleLeaveBlur(dt)}),ot&&et.push(it)),at.isBlured=!1}),each$f(tt,function(nt){nt&&nt.toggleBlurSeries&&nt.toggleBlurSeries(et,!1,_)})}function blurSeries(_e,_,et,tt){var nt=tt.getModel();et=et||"coordinateSystem";function it(dt,ht){for(var ct=0;ct<ht.length;ct++){var ut=dt.getItemGraphicEl(ht[ct]);ut&&leaveBlur(ut)}}if(_e!=null&&!(!_||_==="none")){var at=nt.getSeriesByIndex(_e),ot=at.coordinateSystem;ot&&ot.master&&(ot=ot.master);var st=[];nt.eachSeries(function(dt){var ht=at===dt,ct=dt.coordinateSystem;ct&&ct.master&&(ct=ct.master);var ut=ct&&ot?ct===ot:ht;if(!(et==="series"&&!ht||et==="coordinateSystem"&&!ut||_==="series"&&ht)){var ft=tt.getViewOfSeriesModel(dt);if(ft.group.traverse(function(vt){vt.__highByOuter&&ht&&_==="self"||singleEnterBlur(vt)}),isArrayLike(_))it(dt.getData(),_);else if(isObject$4(_))for(var gt=keys(_),mt=0;mt<gt.length;mt++)it(dt.getData(gt[mt]),_[gt[mt]]);st.push(dt),getComponentStates(dt).isBlured=!0}}),nt.eachComponent(function(dt,ht){if(dt!=="series"){var ct=tt.getViewOfComponentModel(ht);ct&&ct.toggleBlurSeries&&ct.toggleBlurSeries(st,!0,nt)}})}}function blurComponent(_e,_,et){if(!(_e==null||_==null)){var tt=et.getModel().getComponent(_e,_);if(tt){getComponentStates(tt).isBlured=!0;var nt=et.getViewOfComponentModel(tt);!nt||!nt.focusBlurEnabled||nt.group.traverse(function(it){singleEnterBlur(it)})}}}function blurSeriesFromHighlightPayload(_e,_,et){var tt=_e.seriesIndex,nt=_e.getData(_.dataType);if(nt){var it=queryDataIndex(nt,_);it=(isArray$1(it)?it[0]:it)||0;var at=nt.getItemGraphicEl(it);if(!at)for(var ot=nt.count(),st=0;!at&&st<ot;)at=nt.getItemGraphicEl(st++);if(at){var dt=getECData(at);blurSeries(tt,dt.focus,dt.blurScope,et)}else{var ht=_e.get(["emphasis","focus"]),ct=_e.get(["emphasis","blurScope"]);ht!=null&&blurSeries(tt,ht,ct,et)}}}function findComponentHighDownDispatchers(_e,_,et,tt){var nt={focusSelf:!1,dispatchers:null};if(_e==null||_e==="series"||_==null||et==null)return nt;var it=tt.getModel().getComponent(_e,_);if(!it)return nt;var at=tt.getViewOfComponentModel(it);if(!at||!at.findHighDownDispatchers)return nt;for(var ot=at.findHighDownDispatchers(et),st,dt=0;dt<ot.length;dt++)if(getECData(ot[dt]).focus==="self"){st=!0;break}return{focusSelf:st,dispatchers:ot}}function handleGlobalMouseOverForHighDown(_e,_,et){var tt=getECData(_e),nt=findComponentHighDownDispatchers(tt.componentMainType,tt.componentIndex,tt.componentHighDownName,et),it=nt.dispatchers,at=nt.focusSelf;it?(at&&blurComponent(tt.componentMainType,tt.componentIndex,et),each$f(it,function(ot){return enterEmphasisWhenMouseOver(ot,_)})):(blurSeries(tt.seriesIndex,tt.focus,tt.blurScope,et),tt.focus==="self"&&blurComponent(tt.componentMainType,tt.componentIndex,et),enterEmphasisWhenMouseOver(_e,_))}function handleGlobalMouseOutForHighDown(_e,_,et){allLeaveBlur(et);var tt=getECData(_e),nt=findComponentHighDownDispatchers(tt.componentMainType,tt.componentIndex,tt.componentHighDownName,et).dispatchers;nt?each$f(nt,function(it){return leaveEmphasisWhenMouseOut(it,_)}):leaveEmphasisWhenMouseOut(_e,_)}function toggleSelectionFromPayload(_e,_,et){if(isSelectChangePayload(_)){var tt=_.dataType,nt=_e.getData(tt),it=queryDataIndex(nt,_);isArray$1(it)||(it=[it]),_e[_.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":_.type===SELECT_ACTION_TYPE?"select":"unselect"](it,tt)}}function updateSeriesElementSelection(_e){var _=_e.getAllData();each$f(_,function(et){var tt=et.data,nt=et.type;tt.eachItemGraphicEl(function(it,at){_e.isSelected(at,nt)?enterSelect(it):leaveSelect(it)})})}function getAllSelectedIndices(_e){var _=[];return _e.eachSeries(function(et){var tt=et.getAllData();each$f(tt,function(nt){nt.data;var it=nt.type,at=et.getSelectedDataIndices();if(at.length>0){var ot={dataIndex:at,seriesIndex:et.seriesIndex};it!=null&&(ot.dataType=it),_.push(ot)}})}),_}function enableHoverEmphasis(_e,_,et){setAsHighDownDispatcher(_e,!0),traverseUpdateState(_e,setDefaultStateProxy),enableHoverFocus(_e,_,et)}function disableHoverEmphasis(_e){setAsHighDownDispatcher(_e,!1)}function toggleHoverEmphasis(_e,_,et,tt){tt?disableHoverEmphasis(_e):enableHoverEmphasis(_e,_,et)}function enableHoverFocus(_e,_,et){var tt=getECData(_e);_!=null?(tt.focus=_,tt.blurScope=et):tt.focus&&(tt.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(_e,_,et,tt){et=et||"itemStyle";for(var nt=0;nt<OTHER_STATES.length;nt++){var it=OTHER_STATES[nt],at=_.getModel([it,et]),ot=_e.ensureState(it);ot.style=tt?tt(at):at[defaultStyleGetterMap[et]]()}}function setAsHighDownDispatcher(_e,_){var et=_===!1,tt=_e;_e.highDownSilentOnTouch&&(tt.__highDownSilentOnTouch=_e.highDownSilentOnTouch),(!et||tt.__highDownDispatcher)&&(tt.__highByOuter=tt.__highByOuter||0,tt.__highDownDispatcher=!et)}function isHighDownDispatcher(_e){return!!(_e&&_e.__highDownDispatcher)}function enableComponentHighDownFeatures(_e,_,et){var tt=getECData(_e);tt.componentMainType=_.mainType,tt.componentIndex=_.componentIndex,tt.componentHighDownName=et}function getHighlightDigit(_e){var _=_highlightKeyMap[_e];return _==null&&_highlightNextDigit<=32&&(_=_highlightKeyMap[_e]=_highlightNextDigit++),_}function isSelectChangePayload(_e){var _=_e.type;return _===SELECT_ACTION_TYPE||_===UNSELECT_ACTION_TYPE||_===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(_e){var _=_e.type;return _===HIGHLIGHT_ACTION_TYPE||_===DOWNPLAY_ACTION_TYPE}function savePathStates(_e){var _=getSavedStates(_e);_.normalFill=_e.style.fill,_.normalStroke=_e.style.stroke;var et=_e.states.select||{};_.selectFill=et.style&&et.style.fill||null,_.selectStroke=et.style&&et.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(_e,_){if(_){var et=_e.data,tt=_e.len(),nt,it,at,ot,st,dt,ht=CMD$2.M,ct=CMD$2.C,ut=CMD$2.L,ft=CMD$2.R,gt=CMD$2.A,mt=CMD$2.Q;for(at=0,ot=0;at<tt;){switch(nt=et[at++],ot=at,it=0,nt){case ht:it=1;break;case ut:it=1;break;case ct:it=3;break;case mt:it=2;break;case gt:var vt=_[4],yt=_[5],bt=mathSqrt$2(_[0]*_[0]+_[1]*_[1]),_t=mathSqrt$2(_[2]*_[2]+_[3]*_[3]),xt=mathAtan2(-_[1]/_t,_[0]/bt);et[at]*=bt,et[at++]+=vt,et[at]*=_t,et[at++]+=yt,et[at++]*=bt,et[at++]*=_t,et[at++]+=xt,et[at++]+=xt,at+=2,ot=at;break;case ft:dt[0]=et[at++],dt[1]=et[at++],applyTransform$1(dt,dt,_),et[ot++]=dt[0],et[ot++]=dt[1],dt[0]+=et[at++],dt[1]+=et[at++],applyTransform$1(dt,dt,_),et[ot++]=dt[0],et[ot++]=dt[1]}for(st=0;st<it;st++){var St=points$2[st];St[0]=et[at++],St[1]=et[at++],applyTransform$1(St,St,_),et[ot++]=St[0],et[ot++]=St[1]}}_e.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(_e){return Math.sqrt(_e[0]*_e[0]+_e[1]*_e[1])}function vRatio(_e,_){return(_e[0]*_[0]+_e[1]*_[1])/(vMag(_e)*vMag(_))}function vAngle(_e,_){return(_e[0]*_[1]<_e[1]*_[0]?-1:1)*Math.acos(vRatio(_e,_))}function processArc(_e,_,et,tt,nt,it,at,ot,st,dt,ht){var ct=st*(PI$7/180),ut=mathCos$2(ct)*(_e-et)/2+mathSin$2(ct)*(_-tt)/2,ft=-1*mathSin$2(ct)*(_e-et)/2+mathCos$2(ct)*(_-tt)/2,gt=ut*ut/(at*at)+ft*ft/(ot*ot);gt>1&&(at*=mathSqrt$1(gt),ot*=mathSqrt$1(gt));var mt=(nt===it?-1:1)*mathSqrt$1((at*at*(ot*ot)-at*at*(ft*ft)-ot*ot*(ut*ut))/(at*at*(ft*ft)+ot*ot*(ut*ut)))||0,vt=mt*at*ft/ot,yt=mt*-ot*ut/at,bt=(_e+et)/2+mathCos$2(ct)*vt-mathSin$2(ct)*yt,_t=(_+tt)/2+mathSin$2(ct)*vt+mathCos$2(ct)*yt,xt=vAngle([1,0],[(ut-vt)/at,(ft-yt)/ot]),St=[(ut-vt)/at,(ft-yt)/ot],Tt=[(-1*ut-vt)/at,(-1*ft-yt)/ot],wt=vAngle(St,Tt);if(vRatio(St,Tt)<=-1&&(wt=PI$7),vRatio(St,Tt)>=1&&(wt=0),wt<0){var Ct=Math.round(wt/PI$7*1e6)/1e6;wt=PI$7*2+Ct%2*PI$7}ht.addData(dt,bt,_t,at,ot,xt,wt,ct,it)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(_e){var _=new PathProxy;if(!_e)return _;var et=0,tt=0,nt=et,it=tt,at,ot=PathProxy.CMD,st=_e.match(commandReg);if(!st)return _;for(var dt=0;dt<st.length;dt++){for(var ht=st[dt],ct=ht.charAt(0),ut=void 0,ft=ht.match(numberReg$1)||[],gt=ft.length,mt=0;mt<gt;mt++)ft[mt]=parseFloat(ft[mt]);for(var vt=0;vt<gt;){var yt=void 0,bt=void 0,_t=void 0,xt=void 0,St=void 0,Tt=void 0,wt=void 0,Ct=et,Et=tt,At=void 0,Pt=void 0;switch(ct){case"l":et+=ft[vt++],tt+=ft[vt++],ut=ot.L,_.addData(ut,et,tt);break;case"L":et=ft[vt++],tt=ft[vt++],ut=ot.L,_.addData(ut,et,tt);break;case"m":et+=ft[vt++],tt+=ft[vt++],ut=ot.M,_.addData(ut,et,tt),nt=et,it=tt,ct="l";break;case"M":et=ft[vt++],tt=ft[vt++],ut=ot.M,_.addData(ut,et,tt),nt=et,it=tt,ct="L";break;case"h":et+=ft[vt++],ut=ot.L,_.addData(ut,et,tt);break;case"H":et=ft[vt++],ut=ot.L,_.addData(ut,et,tt);break;case"v":tt+=ft[vt++],ut=ot.L,_.addData(ut,et,tt);break;case"V":tt=ft[vt++],ut=ot.L,_.addData(ut,et,tt);break;case"C":ut=ot.C,_.addData(ut,ft[vt++],ft[vt++],ft[vt++],ft[vt++],ft[vt++],ft[vt++]),et=ft[vt-2],tt=ft[vt-1];break;case"c":ut=ot.C,_.addData(ut,ft[vt++]+et,ft[vt++]+tt,ft[vt++]+et,ft[vt++]+tt,ft[vt++]+et,ft[vt++]+tt),et+=ft[vt-2],tt+=ft[vt-1];break;case"S":yt=et,bt=tt,At=_.len(),Pt=_.data,at===ot.C&&(yt+=et-Pt[At-4],bt+=tt-Pt[At-3]),ut=ot.C,Ct=ft[vt++],Et=ft[vt++],et=ft[vt++],tt=ft[vt++],_.addData(ut,yt,bt,Ct,Et,et,tt);break;case"s":yt=et,bt=tt,At=_.len(),Pt=_.data,at===ot.C&&(yt+=et-Pt[At-4],bt+=tt-Pt[At-3]),ut=ot.C,Ct=et+ft[vt++],Et=tt+ft[vt++],et+=ft[vt++],tt+=ft[vt++],_.addData(ut,yt,bt,Ct,Et,et,tt);break;case"Q":Ct=ft[vt++],Et=ft[vt++],et=ft[vt++],tt=ft[vt++],ut=ot.Q,_.addData(ut,Ct,Et,et,tt);break;case"q":Ct=ft[vt++]+et,Et=ft[vt++]+tt,et+=ft[vt++],tt+=ft[vt++],ut=ot.Q,_.addData(ut,Ct,Et,et,tt);break;case"T":yt=et,bt=tt,At=_.len(),Pt=_.data,at===ot.Q&&(yt+=et-Pt[At-4],bt+=tt-Pt[At-3]),et=ft[vt++],tt=ft[vt++],ut=ot.Q,_.addData(ut,yt,bt,et,tt);break;case"t":yt=et,bt=tt,At=_.len(),Pt=_.data,at===ot.Q&&(yt+=et-Pt[At-4],bt+=tt-Pt[At-3]),et+=ft[vt++],tt+=ft[vt++],ut=ot.Q,_.addData(ut,yt,bt,et,tt);break;case"A":_t=ft[vt++],xt=ft[vt++],St=ft[vt++],Tt=ft[vt++],wt=ft[vt++],Ct=et,Et=tt,et=ft[vt++],tt=ft[vt++],ut=ot.A,processArc(Ct,Et,et,tt,Tt,wt,_t,xt,St,ut,_);break;case"a":_t=ft[vt++],xt=ft[vt++],St=ft[vt++],Tt=ft[vt++],wt=ft[vt++],Ct=et,Et=tt,et+=ft[vt++],tt+=ft[vt++],ut=ot.A,processArc(Ct,Et,et,tt,Tt,wt,_t,xt,St,ut,_);break}}(ct==="z"||ct==="Z")&&(ut=ot.Z,_.addData(ut),et=nt,tt=it),at=ut}return _.toStatic(),_}var SVGPath=function(_e){__extends(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.applyTransform=function(et){},_}(Path);function isPathProxy(_e){return _e.setData!=null}function createPathOptions(_e,_){var et=createPathProxyFromString(_e),tt=extend({},_);return tt.buildPath=function(nt){if(isPathProxy(nt)){nt.setData(et.data);var it=nt.getContext();it&&nt.rebuildPath(it,1)}else{var it=nt;et.rebuildPath(it,1)}},tt.applyTransform=function(nt){transformPath(et,nt),this.dirtyShape()},tt}function createFromString(_e,_){return new SVGPath(createPathOptions(_e,_))}function extendFromString(_e,_){var et=createPathOptions(_e,_),tt=function(nt){__extends(it,nt);function it(at){var ot=nt.call(this,at)||this;return ot.applyTransform=et.applyTransform,ot.buildPath=et.buildPath,ot}return it}(SVGPath);return tt}function mergePath$1(_e,_){for(var et=[],tt=_e.length,nt=0;nt<tt;nt++){var it=_e[nt];et.push(it.getUpdatedPathProxy(!0))}var at=new Path(_);return at.createPathProxy(),at.buildPath=function(ot){if(isPathProxy(ot)){ot.appendPath(et);var st=ot.getContext();st&&ot.rebuildPath(st,1)}},at}function clonePath(_e,_){_=_||{};var et=new Path;return _e.shape&&et.setShape(_e.shape),et.setStyle(_e.style),_.bakeTransform?transformPath(et.path,_e.getComputedTransform()):_.toLocal?et.setLocalTransform(_e.getComputedTransform()):et.copyTransform(_e),et.buildPath=_e.buildPath,et.applyTransform=et.applyTransform,et.z=_e.z,et.z2=_e.z2,et.zlevel=_e.zlevel,et}var CircleShape=function(){function _e(){this.cx=0,this.cy=0,this.r=0}return _e}(),Circle=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultShape=function(){return new CircleShape},_.prototype.buildPath=function(et,tt){et.moveTo(tt.cx+tt.r,tt.cy),et.arc(tt.cx,tt.cy,tt.r,0,Math.PI*2)},_}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function _e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return _e}(),Ellipse=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultShape=function(){return new EllipseShape},_.prototype.buildPath=function(et,tt){var nt=.5522848,it=tt.cx,at=tt.cy,ot=tt.rx,st=tt.ry,dt=ot*nt,ht=st*nt;et.moveTo(it-ot,at),et.bezierCurveTo(it-ot,at-ht,it-dt,at-st,it,at-st),et.bezierCurveTo(it+dt,at-st,it+ot,at-ht,it+ot,at),et.bezierCurveTo(it+ot,at+ht,it+dt,at+st,it,at+st),et.bezierCurveTo(it-dt,at+st,it-ot,at+ht,it-ot,at),et.closePath()},_}(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(_e,_,et,tt,nt,it,at,ot){var st=et-_e,dt=tt-_,ht=at-nt,ct=ot-it,ut=ct*st-ht*dt;if(!(ut*ut<e))return ut=(ht*(_-it)-ct*(_e-nt))/ut,[_e+ut*st,_+ut*dt]}function computeCornerTangents(_e,_,et,tt,nt,it,at){var ot=_e-et,st=_-tt,dt=(at?it:-it)/mathSqrt(ot*ot+st*st),ht=dt*st,ct=-dt*ot,ut=_e+ht,ft=_+ct,gt=et+ht,mt=tt+ct,vt=(ut+gt)/2,yt=(ft+mt)/2,bt=gt-ut,_t=mt-ft,xt=bt*bt+_t*_t,St=nt-it,Tt=ut*mt-gt*ft,wt=(_t<0?-1:1)*mathSqrt(mathMax$7(0,St*St*xt-Tt*Tt)),Ct=(Tt*_t-bt*wt)/xt,Et=(-Tt*bt-_t*wt)/xt,At=(Tt*_t+bt*wt)/xt,Pt=(-Tt*bt+_t*wt)/xt,Rt=Ct-vt,It=Et-yt,Mt=At-vt,Ot=Pt-yt;return Rt*Rt+It*It>Mt*Mt+Ot*Ot&&(Ct=At,Et=Pt),{cx:Ct,cy:Et,x0:-ht,y0:-ct,x1:Ct*(nt/St-1),y1:Et*(nt/St-1)}}function normalizeCornerRadius(_e){var _;if(isArray$1(_e)){var et=_e.length;if(!et)return _e;et===1?_=[_e[0],_e[0],0,0]:et===2?_=[_e[0],_e[0],_e[1],_e[1]]:et===3?_=_e.concat(_e[2]):_=_e}else _=[_e,_e,_e,_e];return _}function buildPath$1(_e,_){var et,tt=mathMax$7(_.r,0),nt=mathMax$7(_.r0||0,0),it=tt>0,at=nt>0;if(!(!it&&!at)){if(it||(tt=nt,nt=0),nt>tt){var ot=tt;tt=nt,nt=ot}var st=_.startAngle,dt=_.endAngle;if(!(isNaN(st)||isNaN(dt))){var ht=_.cx,ct=_.cy,ut=!!_.clockwise,ft=mathAbs$1(dt-st),gt=ft>PI2$3&&ft%PI2$3;if(gt>e&&(ft=gt),!(tt>e))_e.moveTo(ht,ct);else if(ft>PI2$3-e)_e.moveTo(ht+tt*mathCos$1(st),ct+tt*mathSin$1(st)),_e.arc(ht,ct,tt,st,dt,!ut),nt>e&&(_e.moveTo(ht+nt*mathCos$1(dt),ct+nt*mathSin$1(dt)),_e.arc(ht,ct,nt,dt,st,ut));else{var mt=void 0,vt=void 0,yt=void 0,bt=void 0,_t=void 0,xt=void 0,St=void 0,Tt=void 0,wt=void 0,Ct=void 0,Et=void 0,At=void 0,Pt=void 0,Rt=void 0,It=void 0,Mt=void 0,Ot=tt*mathCos$1(st),$t=tt*mathSin$1(st),Lt=nt*mathCos$1(dt),kt=nt*mathSin$1(dt),Nt=ft>e;if(Nt){var Vt=_.cornerRadius;Vt&&(et=normalizeCornerRadius(Vt),mt=et[0],vt=et[1],yt=et[2],bt=et[3]);var zt=mathAbs$1(tt-nt)/2;if(_t=mathMin$7(zt,yt),xt=mathMin$7(zt,bt),St=mathMin$7(zt,mt),Tt=mathMin$7(zt,vt),Et=wt=mathMax$7(_t,xt),At=Ct=mathMax$7(St,Tt),(wt>e||Ct>e)&&(Pt=tt*mathCos$1(dt),Rt=tt*mathSin$1(dt),It=nt*mathCos$1(st),Mt=nt*mathSin$1(st),ft<PI$6)){var Xt=intersect(Ot,$t,It,Mt,Pt,Rt,Lt,kt);if(Xt){var Wt=Ot-Xt[0],nr=$t-Xt[1],Jt=Pt-Xt[0],lr=Rt-Xt[1],pr=1/mathSin$1(mathACos((Wt*Jt+nr*lr)/(mathSqrt(Wt*Wt+nr*nr)*mathSqrt(Jt*Jt+lr*lr)))/2),Zt=mathSqrt(Xt[0]*Xt[0]+Xt[1]*Xt[1]);Et=mathMin$7(wt,(tt-Zt)/(pr+1)),At=mathMin$7(Ct,(nt-Zt)/(pr-1))}}}if(!Nt)_e.moveTo(ht+Ot,ct+$t);else if(Et>e){var Kt=mathMin$7(yt,Et),ur=mathMin$7(bt,Et),ir=computeCornerTangents(It,Mt,Ot,$t,tt,Kt,ut),hr=computeCornerTangents(Pt,Rt,Lt,kt,tt,ur,ut);_e.moveTo(ht+ir.cx+ir.x0,ct+ir.cy+ir.y0),Et<wt&&Kt===ur?_e.arc(ht+ir.cx,ct+ir.cy,Et,mathATan2(ir.y0,ir.x0),mathATan2(hr.y0,hr.x0),!ut):(Kt>0&&_e.arc(ht+ir.cx,ct+ir.cy,Kt,mathATan2(ir.y0,ir.x0),mathATan2(ir.y1,ir.x1),!ut),_e.arc(ht,ct,tt,mathATan2(ir.cy+ir.y1,ir.cx+ir.x1),mathATan2(hr.cy+hr.y1,hr.cx+hr.x1),!ut),ur>0&&_e.arc(ht+hr.cx,ct+hr.cy,ur,mathATan2(hr.y1,hr.x1),mathATan2(hr.y0,hr.x0),!ut))}else _e.moveTo(ht+Ot,ct+$t),_e.arc(ht,ct,tt,st,dt,!ut);if(!(nt>e)||!Nt)_e.lineTo(ht+Lt,ct+kt);else if(At>e){var Kt=mathMin$7(mt,At),ur=mathMin$7(vt,At),ir=computeCornerTangents(Lt,kt,Pt,Rt,nt,-ur,ut),hr=computeCornerTangents(Ot,$t,It,Mt,nt,-Kt,ut);_e.lineTo(ht+ir.cx+ir.x0,ct+ir.cy+ir.y0),At<Ct&&Kt===ur?_e.arc(ht+ir.cx,ct+ir.cy,At,mathATan2(ir.y0,ir.x0),mathATan2(hr.y0,hr.x0),!ut):(ur>0&&_e.arc(ht+ir.cx,ct+ir.cy,ur,mathATan2(ir.y0,ir.x0),mathATan2(ir.y1,ir.x1),!ut),_e.arc(ht,ct,nt,mathATan2(ir.cy+ir.y1,ir.cx+ir.x1),mathATan2(hr.cy+hr.y1,hr.cx+hr.x1),ut),Kt>0&&_e.arc(ht+hr.cx,ct+hr.cy,Kt,mathATan2(hr.y1,hr.x1),mathATan2(hr.y0,hr.x0),!ut))}else _e.lineTo(ht+Lt,ct+kt),_e.arc(ht,ct,nt,dt,st,ut)}_e.closePath()}}}var SectorShape=function(){function _e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return _e}(),Sector=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultShape=function(){return new SectorShape},_.prototype.buildPath=function(et,tt){buildPath$1(et,tt)},_.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},_}(Path);Sector.prototype.type="sector";var RingShape=function(){function _e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return _e}(),Ring=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultShape=function(){return new RingShape},_.prototype.buildPath=function(et,tt){var nt=tt.cx,it=tt.cy,at=Math.PI*2;et.moveTo(nt+tt.r,it),et.arc(nt,it,tt.r,0,at,!1),et.moveTo(nt+tt.r0,it),et.arc(nt,it,tt.r0,0,at,!0)},_}(Path);Ring.prototype.type="ring";function smoothBezier(_e,_,et,tt){var nt=[],it=[],at=[],ot=[],st,dt,ht,ct;if(tt){ht=[1/0,1/0],ct=[-1/0,-1/0];for(var ut=0,ft=_e.length;ut<ft;ut++)min$1(ht,ht,_e[ut]),max$1(ct,ct,_e[ut]);min$1(ht,ht,tt[0]),max$1(ct,ct,tt[1])}for(var ut=0,ft=_e.length;ut<ft;ut++){var gt=_e[ut];if(et)st=_e[ut?ut-1:ft-1],dt=_e[(ut+1)%ft];else if(ut===0||ut===ft-1){nt.push(clone$3(_e[ut]));continue}else st=_e[ut-1],dt=_e[ut+1];sub(it,dt,st),scale$2(it,it,_);var mt=distance(gt,st),vt=distance(gt,dt),yt=mt+vt;yt!==0&&(mt/=yt,vt/=yt),scale$2(at,it,-mt),scale$2(ot,it,vt);var bt=add$1([],gt,at),_t=add$1([],gt,ot);tt&&(max$1(bt,bt,ht),min$1(bt,bt,ct),max$1(_t,_t,ht),min$1(_t,_t,ct)),nt.push(bt),nt.push(_t)}return et&&nt.push(nt.shift()),nt}function buildPath(_e,_,et){var tt=_.smooth,nt=_.points;if(nt&&nt.length>=2){if(tt){var it=smoothBezier(nt,tt,et,_.smoothConstraint);_e.moveTo(nt[0][0],nt[0][1]);for(var at=nt.length,ot=0;ot<(et?at:at-1);ot++){var st=it[ot*2],dt=it[ot*2+1],ht=nt[(ot+1)%at];_e.bezierCurveTo(st[0],st[1],dt[0],dt[1],ht[0],ht[1])}}else{_e.moveTo(nt[0][0],nt[0][1]);for(var ot=1,ct=nt.length;ot<ct;ot++)_e.lineTo(nt[ot][0],nt[ot][1])}et&&_e.closePath()}}var PolygonShape=function(){function _e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return _e}(),Polygon=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultShape=function(){return new PolygonShape},_.prototype.buildPath=function(et,tt){buildPath(et,tt,!0)},_}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function _e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return _e}(),Polyline$1=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},_.prototype.getDefaultShape=function(){return new PolylineShape},_.prototype.buildPath=function(et,tt){buildPath(et,tt,!1)},_}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function _e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return _e}(),Line$1=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},_.prototype.getDefaultShape=function(){return new LineShape},_.prototype.buildPath=function(et,tt){var nt,it,at,ot;if(this.subPixelOptimize){var st=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,tt,this.style);nt=st.x1,it=st.y1,at=st.x2,ot=st.y2}else nt=tt.x1,it=tt.y1,at=tt.x2,ot=tt.y2;var dt=tt.percent;dt!==0&&(et.moveTo(nt,it),dt<1&&(at=nt*(1-dt)+at*dt,ot=it*(1-dt)+ot*dt),et.lineTo(at,ot))},_.prototype.pointAt=function(et){var tt=this.shape;return[tt.x1*(1-et)+tt.x2*et,tt.y1*(1-et)+tt.y2*et]},_}(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=function(){function _e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return _e}();function someVectorAt(_e,_,et){var tt=_e.cpx2,nt=_e.cpy2;return tt!=null||nt!=null?[(et?cubicDerivativeAt:cubicAt)(_e.x1,_e.cpx1,_e.cpx2,_e.x2,_),(et?cubicDerivativeAt:cubicAt)(_e.y1,_e.cpy1,_e.cpy2,_e.y2,_)]:[(et?quadraticDerivativeAt:quadraticAt$1)(_e.x1,_e.cpx1,_e.x2,_),(et?quadraticDerivativeAt:quadraticAt$1)(_e.y1,_e.cpy1,_e.y2,_)]}var BezierCurve=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},_.prototype.getDefaultShape=function(){return new BezierCurveShape},_.prototype.buildPath=function(et,tt){var nt=tt.x1,it=tt.y1,at=tt.x2,ot=tt.y2,st=tt.cpx1,dt=tt.cpy1,ht=tt.cpx2,ct=tt.cpy2,ut=tt.percent;ut!==0&&(et.moveTo(nt,it),ht==null||ct==null?(ut<1&&(quadraticSubdivide(nt,st,at,ut,out),st=out[1],at=out[2],quadraticSubdivide(it,dt,ot,ut,out),dt=out[1],ot=out[2]),et.quadraticCurveTo(st,dt,at,ot)):(ut<1&&(cubicSubdivide(nt,st,ht,at,ut,out),st=out[1],ht=out[2],at=out[3],cubicSubdivide(it,dt,ct,ot,ut,out),dt=out[1],ct=out[2],ot=out[3]),et.bezierCurveTo(st,dt,ht,ct,at,ot)))},_.prototype.pointAt=function(et){return someVectorAt(this.shape,et,!1)},_.prototype.tangentAt=function(et){var tt=someVectorAt(this.shape,et,!0);return normalize$3(tt,tt)},_}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function _e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return _e}(),Arc=function(_e){__extends(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},_.prototype.getDefaultShape=function(){return new ArcShape},_.prototype.buildPath=function(et,tt){var nt=tt.cx,it=tt.cy,at=Math.max(tt.r,0),ot=tt.startAngle,st=tt.endAngle,dt=tt.clockwise,ht=Math.cos(ot),ct=Math.sin(ot);et.moveTo(ht*at+nt,ct*at+it),et.arc(nt,it,at,ot,st,!dt)},_}(Path);Arc.prototype.type="arc";var CompoundPath=function(_e){__extends(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type="compound",et}return _.prototype._updatePathDirty=function(){for(var et=this.shape.paths,tt=this.shapeChanged(),nt=0;nt<et.length;nt++)tt=tt||et[nt].shapeChanged();tt&&this.dirtyShape()},_.prototype.beforeBrush=function(){this._updatePathDirty();for(var et=this.shape.paths||[],tt=this.getGlobalScale(),nt=0;nt<et.length;nt++)et[nt].path||et[nt].createPathProxy(),et[nt].path.setScale(tt[0],tt[1],et[nt].segmentIgnoreThreshold)},_.prototype.buildPath=function(et,tt){for(var nt=tt.paths||[],it=0;it<nt.length;it++)nt[it].buildPath(et,nt[it].shape,!0)},_.prototype.afterBrush=function(){for(var et=this.shape.paths||[],tt=0;tt<et.length;tt++)et[tt].pathUpdated()},_.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},_}(Path),Gradient=function(){function _e(_){this.colorStops=_||[]}return _e.prototype.addColorStop=function(_,et){this.colorStops.push({offset:_,color:et})},_e}(),LinearGradient=function(_e){__extends(_,_e);function _(et,tt,nt,it,at,ot){var st=_e.call(this,at)||this;return st.x=et??0,st.y=tt??0,st.x2=nt??1,st.y2=it??0,st.type="linear",st.global=ot||!1,st}return _}(Gradient),RadialGradient=function(_e){__extends(_,_e);function _(et,tt,nt,it,at){var ot=_e.call(this,it)||this;return ot.x=et??.5,ot.y=tt??.5,ot.r=nt??.5,ot.type="radial",ot.global=at||!1,ot}return _}(Gradient),extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=function(){function _e(_,et){this._corners=[],this._axes=[],this._origin=[0,0];for(var tt=0;tt<4;tt++)this._corners[tt]=new Point;for(var tt=0;tt<2;tt++)this._axes[tt]=new Point;_&&this.fromBoundingRect(_,et)}return _e.prototype.fromBoundingRect=function(_,et){var tt=this._corners,nt=this._axes,it=_.x,at=_.y,ot=it+_.width,st=at+_.height;if(tt[0].set(it,at),tt[1].set(ot,at),tt[2].set(ot,st),tt[3].set(it,st),et)for(var dt=0;dt<4;dt++)tt[dt].transform(et);Point.sub(nt[0],tt[1],tt[0]),Point.sub(nt[1],tt[3],tt[0]),nt[0].normalize(),nt[1].normalize();for(var dt=0;dt<2;dt++)this._origin[dt]=nt[dt].dot(tt[0])},_e.prototype.intersect=function(_,et){var tt=!0,nt=!et;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,_,minTv,maxTv,nt,1)&&(tt=!1,nt)||!this._intersectCheckOneSide(_,this,minTv,maxTv,nt,-1)&&(tt=!1,nt)||nt||Point.copy(et,tt?minTv:maxTv),tt},_e.prototype._intersectCheckOneSide=function(_,et,tt,nt,it,at){for(var ot=!0,st=0;st<2;st++){var dt=this._axes[st];if(this._getProjMinMaxOnAxis(st,_._corners,extent),this._getProjMinMaxOnAxis(st,et._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(ot=!1,it)return ot;var ht=Math.abs(extent2[0]-extent[1]),ct=Math.abs(extent[0]-extent2[1]);Math.min(ht,ct)>nt.len()&&(ht<ct?Point.scale(nt,dt,-ht*at):Point.scale(nt,dt,ct*at))}else if(tt){var ht=Math.abs(extent2[0]-extent[1]),ct=Math.abs(extent[0]-extent2[1]);Math.min(ht,ct)<tt.len()&&(ht<ct?Point.scale(tt,dt,ht*at):Point.scale(tt,dt,-ct*at))}}return ot},_e.prototype._getProjMinMaxOnAxis=function(_,et,tt){for(var nt=this._axes[_],it=this._origin,at=et[0].dot(nt)+it[_],ot=at,st=at,dt=1;dt<et.length;dt++){var ht=et[dt].dot(nt)+it[_];ot=Math.min(ht,ot),st=Math.max(ht,st)}tt[0]=ot,tt[1]=st},_e}(),m=[],IncrementalDisplayable=function(_e){__extends(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.notClear=!0,et.incremental=!0,et._displayables=[],et._temporaryDisplayables=[],et._cursor=0,et}return _.prototype.traverse=function(et,tt){et.call(tt,this)},_.prototype.useStyle=function(){this.style={}},_.prototype.getCursor=function(){return this._cursor},_.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},_.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},_.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},_.prototype.addDisplayable=function(et,tt){tt?this._temporaryDisplayables.push(et):this._displayables.push(et),this.markRedraw()},_.prototype.addDisplayables=function(et,tt){tt=tt||!1;for(var nt=0;nt<et.length;nt++)this.addDisplayable(et[nt],tt)},_.prototype.getDisplayables=function(){return this._displayables},_.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},_.prototype.eachPendingDisplayable=function(et){for(var tt=this._cursor;tt<this._displayables.length;tt++)et&&et(this._displayables[tt]);for(var tt=0;tt<this._temporaryDisplayables.length;tt++)et&&et(this._temporaryDisplayables[tt])},_.prototype.update=function(){this.updateTransform();for(var et=this._cursor;et<this._displayables.length;et++){var tt=this._displayables[et];tt.parent=this,tt.update(),tt.parent=null}for(var et=0;et<this._temporaryDisplayables.length;et++){var tt=this._temporaryDisplayables[et];tt.parent=this,tt.update(),tt.parent=null}},_.prototype.getBoundingRect=function(){if(!this._rect){for(var et=new BoundingRect(1/0,1/0,-1/0,-1/0),tt=0;tt<this._displayables.length;tt++){var nt=this._displayables[tt],it=nt.getBoundingRect().clone();nt.needLocalTransform()&&it.applyTransform(nt.getLocalTransform(m)),et.union(it)}this._rect=et}return this._rect},_.prototype.contain=function(et,tt){var nt=this.transformCoordToLocal(et,tt),it=this.getBoundingRect();if(it.contain(nt[0],nt[1]))for(var at=0;at<this._displayables.length;at++){var ot=this._displayables[at];if(ot.contain(et,tt))return!0}return!1},_}(Displayable),transitionStore=makeInner();function getAnimationConfig(_e,_,et,tt,nt){var it;if(_&&_.ecModel){var at=_.ecModel.getUpdatePayload();it=at&&at.animation}var ot=_&&_.isAnimationEnabled(),st=_e==="update";if(ot){var dt=void 0,ht=void 0,ct=void 0;tt?(dt=retrieve2(tt.duration,200),ht=retrieve2(tt.easing,"cubicOut"),ct=0):(dt=_.getShallow(st?"animationDurationUpdate":"animationDuration"),ht=_.getShallow(st?"animationEasingUpdate":"animationEasing"),ct=_.getShallow(st?"animationDelayUpdate":"animationDelay")),it&&(it.duration!=null&&(dt=it.duration),it.easing!=null&&(ht=it.easing),it.delay!=null&&(ct=it.delay)),isFunction$3(ct)&&(ct=ct(et,nt)),isFunction$3(dt)&&(dt=dt(et));var ut={duration:dt||0,delay:ct,easing:ht};return ut}else return null}function animateOrSetProps(_e,_,et,tt,nt,it,at){var ot=!1,st;isFunction$3(nt)?(at=it,it=nt,nt=null):isObject$4(nt)&&(it=nt.cb,at=nt.during,ot=nt.isFrom,st=nt.removeOpt,nt=nt.dataIndex);var dt=_e==="leave";dt||_.stopAnimation("leave");var ht=getAnimationConfig(_e,tt,nt,dt?st||{}:null,tt&&tt.getAnimationDelayParams?tt.getAnimationDelayParams(_,nt):null);if(ht&&ht.duration>0){var ct=ht.duration,ut=ht.delay,ft=ht.easing,gt={duration:ct,delay:ut||0,easing:ft,done:it,force:!!it||!!at,setToFinal:!dt,scope:_e,during:at};ot?_.animateFrom(et,gt):_.animateTo(et,gt)}else _.stopAnimation(),!ot&&_.attr(et),at&&at(1),it&&it()}function updateProps$1(_e,_,et,tt,nt,it){animateOrSetProps("update",_e,_,et,tt,nt,it)}function initProps(_e,_,et,tt,nt,it){animateOrSetProps("enter",_e,_,et,tt,nt,it)}function isElementRemoved(_e){if(!_e.__zr)return!0;for(var _=0;_<_e.animators.length;_++){var et=_e.animators[_];if(et.scope==="leave")return!0}return!1}function removeElement(_e,_,et,tt,nt,it){isElementRemoved(_e)||animateOrSetProps("leave",_e,_,et,tt,nt,it)}function fadeOutDisplayable(_e,_,et,tt){_e.removeTextContent(),_e.removeTextGuideLine(),removeElement(_e,{style:{opacity:0}},_,et,tt)}function removeElementWithFadeOut(_e,_,et){function tt(){_e.parent&&_e.parent.remove(_e)}_e.isGroup?_e.traverse(function(nt){nt.isGroup||fadeOutDisplayable(nt,_,et,tt)}):fadeOutDisplayable(_e,_,et,tt)}function saveOldStyle(_e){transitionStore(_e).oldStyle=_e.style}function getOldStyle(_e){return transitionStore(_e).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(_e){return Path.extend(_e)}var extendPathFromString=extendFromString;function extendPath(_e,_){return extendPathFromString(_e,_)}function registerShape(_e,_){_customShapeMap[_e]=_}function getShapeClass(_e){if(_customShapeMap.hasOwnProperty(_e))return _customShapeMap[_e]}function makePath(_e,_,et,tt){var nt=createFromString(_e,_);return et&&(tt==="center"&&(et=centerGraphic(et,nt.getBoundingRect())),resizePath(nt,et)),nt}function makeImage(_e,_,et){var tt=new ZRImage({style:{image:_e,x:_.x,y:_.y,width:_.width,height:_.height},onload:function(nt){if(et==="center"){var it={width:nt.width,height:nt.height};tt.setStyle(centerGraphic(_,it))}}});return tt}function centerGraphic(_e,_){var et=_.width/_.height,tt=_e.height*et,nt;tt<=_e.width?nt=_e.height:(tt=_e.width,nt=tt/et);var it=_e.x+_e.width/2,at=_e.y+_e.height/2;return{x:it-tt/2,y:at-nt/2,width:tt,height:nt}}var mergePath=mergePath$1;function resizePath(_e,_){if(_e.applyTransform){var et=_e.getBoundingRect(),tt=et.calculateTransform(_);_e.applyTransform(tt)}}function subPixelOptimizeLine(_e,_){return subPixelOptimizeLine$1(_e,_e,{lineWidth:_}),_e}function subPixelOptimizeRect(_e){return subPixelOptimizeRect$1(_e.shape,_e.shape,_e.style),_e}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(_e,_){for(var et=identity([]);_e&&_e!==_;)mul(et,_e.getLocalTransform(),et),_e=_e.parent;return et}function applyTransform(_e,_,et){return _&&!isArrayLike(_)&&(_=Transformable.getLocalTransform(_)),et&&(_=invert([],_)),applyTransform$1([],_e,_)}function transformDirection(_e,_,et){var tt=_[4]===0||_[5]===0||_[0]===0?1:Math.abs(2*_[4]/_[0]),nt=_[4]===0||_[5]===0||_[2]===0?1:Math.abs(2*_[4]/_[2]),it=[_e==="left"?-tt:_e==="right"?tt:0,_e==="top"?-nt:_e==="bottom"?nt:0];return it=applyTransform(it,_,et),Math.abs(it[0])>Math.abs(it[1])?it[0]>0?"right":"left":it[1]>0?"bottom":"top"}function isNotGroup(_e){return!_e.isGroup}function isPath$1(_e){return _e.shape!=null}function groupTransition(_e,_,et){if(!_e||!_)return;function tt(at){var ot={};return at.traverse(function(st){isNotGroup(st)&&st.anid&&(ot[st.anid]=st)}),ot}function nt(at){var ot={x:at.x,y:at.y,rotation:at.rotation};return isPath$1(at)&&(ot.shape=extend({},at.shape)),ot}var it=tt(_e);_.traverse(function(at){if(isNotGroup(at)&&at.anid){var ot=it[at.anid];if(ot){var st=nt(at);at.attr(nt(ot)),updateProps$1(at,st,et,getECData(at).dataIndex)}}})}function clipPointsByRect(_e,_){return map$1(_e,function(et){var tt=et[0];tt=mathMax$6(tt,_.x),tt=mathMin$6(tt,_.x+_.width);var nt=et[1];return nt=mathMax$6(nt,_.y),nt=mathMin$6(nt,_.y+_.height),[tt,nt]})}function clipRectByRect(_e,_){var et=mathMax$6(_e.x,_.x),tt=mathMin$6(_e.x+_e.width,_.x+_.width),nt=mathMax$6(_e.y,_.y),it=mathMin$6(_e.y+_e.height,_.y+_.height);if(tt>=et&&it>=nt)return{x:et,y:nt,width:tt-et,height:it-nt}}function createIcon(_e,_,et){var tt=extend({rectHover:!0},_),nt=tt.style={strokeNoScale:!0};if(et=et||{x:-1,y:-1,width:2,height:2},_e)return _e.indexOf("image://")===0?(nt.image=_e.slice(8),defaults(nt,et),new ZRImage(tt)):makePath(_e.replace("path://",""),tt,et,"center")}function linePolygonIntersect(_e,_,et,tt,nt){for(var it=0,at=nt[nt.length-1];it<nt.length;it++){var ot=nt[it];if(lineLineIntersect$1(_e,_,et,tt,ot[0],ot[1],at[0],at[1]))return!0;at=ot}}function lineLineIntersect$1(_e,_,et,tt,nt,it,at,ot){var st=et-_e,dt=tt-_,ht=at-nt,ct=ot-it,ut=crossProduct2d$1(ht,ct,st,dt);if(nearZero(ut))return!1;var ft=_e-nt,gt=_-it,mt=crossProduct2d$1(ft,gt,st,dt)/ut;if(mt<0||mt>1)return!1;var vt=crossProduct2d$1(ft,gt,ht,ct)/ut;return!(vt<0||vt>1)}function crossProduct2d$1(_e,_,et,tt){return _e*tt-et*_}function nearZero(_e){return _e<=1e-6&&_e>=-1e-6}function setTooltipConfig(_e){var _=_e.itemTooltipOption,et=_e.componentModel,tt=_e.itemName,nt=isString$1(_)?{formatter:_}:_,it=et.mainType,at=et.componentIndex,ot={componentType:it,name:tt,$vars:["name"]};ot[it+"Index"]=at;var st=_e.formatterParamsExtra;st&&each$f(keys(st),function(ht){hasOwn(ot,ht)||(ot[ht]=st[ht],ot.$vars.push(ht))});var dt=getECData(_e.el);dt.componentMainType=it,dt.componentIndex=at,dt.tooltipConfig={name:tt,option:defaults({content:tt,encodeHTMLContent:!0,formatterParams:ot},nt)}}function traverseElement(_e,_){var et;_e.isGroup&&(et=_(_e)),et||_e.traverse(_)}function traverseElements(_e,_){if(_e)if(isArray$1(_e))for(var et=0;et<_e.length;et++)traverseElement(_e[et],_);else traverseElement(_e,_)}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$1);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(_e,_){for(var et=0;et<SPECIAL_STATES.length;et++){var tt=SPECIAL_STATES[et],nt=_[tt],it=_e.ensureState(tt);it.style=it.style||{},it.style.text=nt}var at=_e.currentStates.slice();_e.clearStates(!0),_e.setStyle({text:_.normal}),_e.useStates(at,!0)}function getLabelText(_e,_,et){var tt=_e.labelFetcher,nt=_e.labelDataIndex,it=_e.labelDimIndex,at=_.normal,ot;tt&&(ot=tt.getFormattedLabel(nt,"normal",null,it,at&&at.get("formatter"),et!=null?{interpolatedValue:et}:null)),ot==null&&(ot=isFunction$3(_e.defaultText)?_e.defaultText(nt,_e,et):_e.defaultText);for(var st={normal:ot},dt=0;dt<SPECIAL_STATES.length;dt++){var ht=SPECIAL_STATES[dt],ct=_[ht];st[ht]=retrieve2(tt?tt.getFormattedLabel(nt,ht,null,it,ct&&ct.get("formatter")):null,ot)}return st}function setLabelStyle(_e,_,et,tt){et=et||EMPTY_OBJ;for(var nt=_e instanceof ZRText,it=!1,at=0;at<DISPLAY_STATES.length;at++){var ot=_[DISPLAY_STATES[at]];if(ot&&ot.getShallow("show")){it=!0;break}}var st=nt?_e:_e.getTextContent();if(it){nt||(st||(st=new ZRText,_e.setTextContent(st)),_e.stateProxy&&(st.stateProxy=_e.stateProxy));var dt=getLabelText(et,_),ht=_.normal,ct=!!ht.getShallow("show"),ut=createTextStyle$1(ht,tt&&tt.normal,et,!1,!nt);ut.text=dt.normal,nt||_e.setTextConfig(createTextConfig(ht,et,!1));for(var at=0;at<SPECIAL_STATES.length;at++){var ft=SPECIAL_STATES[at],ot=_[ft];if(ot){var gt=st.ensureState(ft),mt=!!retrieve2(ot.getShallow("show"),ct);if(mt!==ct&&(gt.ignore=!mt),gt.style=createTextStyle$1(ot,tt&&tt[ft],et,!0,!nt),gt.style.text=dt[ft],!nt){var vt=_e.ensureState(ft);vt.textConfig=createTextConfig(ot,et,!0)}}}st.silent=!!ht.getShallow("silent"),st.style.x!=null&&(ut.x=st.style.x),st.style.y!=null&&(ut.y=st.style.y),st.ignore=!ct,st.useStyle(ut),st.dirty(),et.enableTextSetter&&(labelInner(st).setLabelText=function(yt){var bt=getLabelText(et,_,yt);setLabelText(st,bt)})}else st&&(st.ignore=!0);_e.dirty()}function getLabelStatesModels(_e,_){_=_||"label";for(var et={normal:_e.getModel(_)},tt=0;tt<SPECIAL_STATES.length;tt++){var nt=SPECIAL_STATES[tt];et[nt]=_e.getModel([nt,_])}return et}function createTextStyle$1(_e,_,et,tt,nt){var it={};return setTextStyleCommon(it,_e,et,tt,nt),_&&extend(it,_),it}function createTextConfig(_e,_,et){_=_||{};var tt={},nt,it=_e.getShallow("rotate"),at=retrieve2(_e.getShallow("distance"),et?null:5),ot=_e.getShallow("offset");return nt=_e.getShallow("position")||(et?null:"inside"),nt==="outside"&&(nt=_.defaultOutsidePosition||"top"),nt!=null&&(tt.position=nt),ot!=null&&(tt.offset=ot),it!=null&&(it*=Math.PI/180,tt.rotation=it),at!=null&&(tt.distance=at),tt.outsideFill=_e.get("color")==="inherit"?_.inheritColor||null:"auto",tt}function setTextStyleCommon(_e,_,et,tt,nt){et=et||EMPTY_OBJ;var it=_.ecModel,at=it&&it.option.textStyle,ot=getRichItemNames(_),st;if(ot){st={};for(var dt in ot)if(ot.hasOwnProperty(dt)){var ht=_.getModel(["rich",dt]);setTokenTextStyle(st[dt]={},ht,at,et,tt,nt,!1,!0)}}st&&(_e.rich=st);var ct=_.get("overflow");ct&&(_e.overflow=ct);var ut=_.get("minMargin");ut!=null&&(_e.margin=ut),setTokenTextStyle(_e,_,at,et,tt,nt,!0,!1)}function getRichItemNames(_e){for(var _;_e&&_e!==_e.ecModel;){var et=(_e.option||EMPTY_OBJ).rich;if(et){_=_||{};for(var tt=keys(et),nt=0;nt<tt.length;nt++){var it=tt[nt];_[it]=1}}_e=_e.parentModel}return _}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(_e,_,et,tt,nt,it,at,ot){et=!nt&&et||EMPTY_OBJ;var st=tt&&tt.inheritColor,dt=_.getShallow("color"),ht=_.getShallow("textBorderColor"),ct=retrieve2(_.getShallow("opacity"),et.opacity);(dt==="inherit"||dt==="auto")&&(st?dt=st:dt=null),(ht==="inherit"||ht==="auto")&&(st?ht=st:ht=null),it||(dt=dt||et.color,ht=ht||et.textBorderColor),dt!=null&&(_e.fill=dt),ht!=null&&(_e.stroke=ht);var ut=retrieve2(_.getShallow("textBorderWidth"),et.textBorderWidth);ut!=null&&(_e.lineWidth=ut);var ft=retrieve2(_.getShallow("textBorderType"),et.textBorderType);ft!=null&&(_e.lineDash=ft);var gt=retrieve2(_.getShallow("textBorderDashOffset"),et.textBorderDashOffset);gt!=null&&(_e.lineDashOffset=gt),!nt&&ct==null&&!ot&&(ct=tt&&tt.defaultOpacity),ct!=null&&(_e.opacity=ct),!nt&&!it&&_e.fill==null&&tt.inheritColor&&(_e.fill=tt.inheritColor);for(var mt=0;mt<TEXT_PROPS_WITH_GLOBAL.length;mt++){var vt=TEXT_PROPS_WITH_GLOBAL[mt],yt=retrieve2(_.getShallow(vt),et[vt]);yt!=null&&(_e[vt]=yt)}for(var mt=0;mt<TEXT_PROPS_SELF.length;mt++){var vt=TEXT_PROPS_SELF[mt],yt=_.getShallow(vt);yt!=null&&(_e[vt]=yt)}if(_e.verticalAlign==null){var bt=_.getShallow("baseline");bt!=null&&(_e.verticalAlign=bt)}if(!at||!tt.disableBox){for(var mt=0;mt<TEXT_PROPS_BOX.length;mt++){var vt=TEXT_PROPS_BOX[mt],yt=_.getShallow(vt);yt!=null&&(_e[vt]=yt)}var _t=_.getShallow("borderType");_t!=null&&(_e.borderDash=_t),(_e.backgroundColor==="auto"||_e.backgroundColor==="inherit")&&st&&(_e.backgroundColor=st),(_e.borderColor==="auto"||_e.borderColor==="inherit")&&st&&(_e.borderColor=st)}}function getFont(_e,_){var et=_&&_.getModel("textStyle");return trim$1([_e.fontStyle||et&&et.getShallow("fontStyle")||"",_e.fontWeight||et&&et.getShallow("fontWeight")||"",(_e.fontSize||et&&et.getShallow("fontSize")||12)+"px",_e.fontFamily||et&&et.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(_e,_,et,tt){if(_e){var nt=labelInner(_e);nt.prevValue=nt.value,nt.value=et;var it=_.normal;nt.valueAnimation=it.get("valueAnimation"),nt.valueAnimation&&(nt.precision=it.get("precision"),nt.defaultInterpolatedText=tt,nt.statesModels=_)}}function animateLabelValue(_e,_,et,tt,nt){var it=labelInner(_e);if(!it.valueAnimation||it.prevValue===it.value)return;var at=it.defaultInterpolatedText,ot=retrieve2(it.interpolatedValue,it.prevValue),st=it.value;function dt(ht){var ct=interpolateRawValues(et,it.precision,ot,st,ht);it.interpolatedValue=ht===1?null:ct;var ut=getLabelText({labelDataIndex:_,labelFetcher:nt,defaultText:at?at(ct):ct+""},it.statesModels,ct);setLabelText(_e,ut)}_e.percent=0,(it.prevValue==null?initProps:updateProps$1)(_e,{percent:1},tt,_,null,dt)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function _e(){}return _e.prototype.getTextColor=function(_){var et=this.ecModel;return this.getShallow("color")||(!_&&et?et.get(PATH_COLOR):null)},_e.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},_e.prototype.getTextRect=function(_){for(var et={text:_,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},tt=0;tt<textStyleParams.length;tt++)et[textStyleParams[tt]]=this.getShallow(textStyleParams[tt]);return tmpText.useStyle(et),tmpText.update(),tmpText.getBoundingRect()},_e}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function _e(){}return _e.prototype.getLineStyle=function(_){return getLineStyle(this,_)},_e}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function _e(){}return _e.prototype.getItemStyle=function(_,et){return getItemStyle(this,_,et)},_e}(),Model=function(){function _e(_,et,tt){this.parentModel=et,this.ecModel=tt,this.option=_}return _e.prototype.init=function(_,et,tt){},_e.prototype.mergeOption=function(_,et){merge$1(this.option,_,!0)},_e.prototype.get=function(_,et){return _==null?this.option:this._doGet(this.parsePath(_),!et&&this.parentModel)},_e.prototype.getShallow=function(_,et){var tt=this.option,nt=tt==null?tt:tt[_];if(nt==null&&!et){var it=this.parentModel;it&&(nt=it.getShallow(_))}return nt},_e.prototype.getModel=function(_,et){var tt=_!=null,nt=tt?this.parsePath(_):null,it=tt?this._doGet(nt):this.option;return et=et||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(nt)),new _e(it,et,this.ecModel)},_e.prototype.isEmpty=function(){return this.option==null},_e.prototype.restoreData=function(){},_e.prototype.clone=function(){var _=this.constructor;return new _(clone$4(this.option))},_e.prototype.parsePath=function(_){return typeof _=="string"?_.split("."):_},_e.prototype.resolveParentPath=function(_){return _},_e.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},_e.prototype._doGet=function(_,et){var tt=this.option;if(!_)return tt;for(var nt=0;nt<_.length&&!(_[nt]&&(tt=tt&&typeof tt=="object"?tt[_[nt]]:null,tt==null));nt++);return tt==null&&et&&(tt=et._doGet(this.resolveParentPath(_),et.parentModel)),tt},_e}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(_e){return[_e||"",base++].join("_")}function enableSubTypeDefaulter(_e){var _={};_e.registerSubTypeDefaulter=function(et,tt){var nt=parseClassType(et);_[nt.main]=tt},_e.determineSubType=function(et,tt){var nt=tt.type;if(!nt){var it=parseClassType(et).main;_e.hasSubTypes(et)&&_[it]&&(nt=_[it](tt))}return nt}}function enableTopologicalTravel(_e,_){_e.topologicalTravel=function(it,at,ot,st){if(!it.length)return;var dt=et(at),ht=dt.graph,ct=dt.noEntryList,ut={};for(each$f(it,function(bt){ut[bt]=!0});ct.length;){var ft=ct.pop(),gt=ht[ft],mt=!!ut[ft];mt&&(ot.call(st,ft,gt.originalDeps.slice()),delete ut[ft]),each$f(gt.successor,mt?yt:vt)}each$f(ut,function(){var bt="";throw new Error(bt)});function vt(bt){ht[bt].entryCount--,ht[bt].entryCount===0&&ct.push(bt)}function yt(bt){ut[bt]=!0,vt(bt)}};function et(it){var at={},ot=[];return each$f(it,function(st){var dt=tt(at,st),ht=dt.originalDeps=_(st),ct=nt(ht,it);dt.entryCount=ct.length,dt.entryCount===0&&ot.push(st),each$f(ct,function(ut){indexOf(dt.predecessor,ut)<0&&dt.predecessor.push(ut);var ft=tt(at,ut);indexOf(ft.successor,ut)<0&&ft.successor.push(st)})}),{graph:at,noEntryList:ot}}function tt(it,at){return it[at]||(it[at]={predecessor:[],successor:[]}),it[at]}function nt(it,at){var ot=[];return each$f(it,function(st){indexOf(at,st)>=0&&ot.push(st)}),ot}}function inheritDefaultOption(_e,_){return merge$1(merge$1({},_e,!0),_,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var _e=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return _e.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(_e,_){_e=_e.toUpperCase(),localeModels[_e]=new Model(_),localeStorage[_e]=_}function createLocaleObject(_e){if(isString$1(_e)){var _=localeStorage[_e.toUpperCase()]||{};return _e===LOCALE_ZH||_e===LOCALE_EN?clone$4(_):merge$1(clone$4(_),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge$1(clone$4(_e),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(_e){return localeModels[_e]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(_e,_){return _e+="","0000".substr(0,_-_e.length)+_e}function getPrimaryTimeUnit(_e){switch(_e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return _e}}function isPrimaryTimeUnit(_e){return _e===getPrimaryTimeUnit(_e)}function getDefaultFormatPrecisionOfInterval(_e){switch(_e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format$1(_e,_,et,tt){var nt=parseDate(_e),it=nt[fullYearGetterName(et)](),at=nt[monthGetterName(et)]()+1,ot=Math.floor((at-1)/3)+1,st=nt[dateGetterName(et)](),dt=nt["get"+(et?"UTC":"")+"Day"](),ht=nt[hoursGetterName(et)](),ct=(ht-1)%12+1,ut=nt[minutesGetterName(et)](),ft=nt[secondsGetterName(et)](),gt=nt[millisecondsGetterName(et)](),mt=ht>=12?"pm":"am",vt=mt.toUpperCase(),yt=tt instanceof Model?tt:getLocaleModel(tt||SYSTEM_LANG)||getDefaultLocaleModel(),bt=yt.getModel("time"),_t=bt.get("month"),xt=bt.get("monthAbbr"),St=bt.get("dayOfWeek"),Tt=bt.get("dayOfWeekAbbr");return(_||"").replace(/{a}/g,mt+"").replace(/{A}/g,vt+"").replace(/{yyyy}/g,it+"").replace(/{yy}/g,pad(it%100+"",2)).replace(/{Q}/g,ot+"").replace(/{MMMM}/g,_t[at-1]).replace(/{MMM}/g,xt[at-1]).replace(/{MM}/g,pad(at,2)).replace(/{M}/g,at+"").replace(/{dd}/g,pad(st,2)).replace(/{d}/g,st+"").replace(/{eeee}/g,St[dt]).replace(/{ee}/g,Tt[dt]).replace(/{e}/g,dt+"").replace(/{HH}/g,pad(ht,2)).replace(/{H}/g,ht+"").replace(/{hh}/g,pad(ct+"",2)).replace(/{h}/g,ct+"").replace(/{mm}/g,pad(ut,2)).replace(/{m}/g,ut+"").replace(/{ss}/g,pad(ft,2)).replace(/{s}/g,ft+"").replace(/{SSS}/g,pad(gt,3)).replace(/{S}/g,gt+"")}function leveledFormat(_e,_,et,tt,nt){var it=null;if(isString$1(et))it=et;else if(isFunction$3(et))it=et(_e.value,_,{level:_e.level});else{var at=extend({},defaultLeveledFormatter);if(_e.level>0)for(var ot=0;ot<primaryTimeUnits.length;++ot)at[primaryTimeUnits[ot]]="{primary|"+at[primaryTimeUnits[ot]]+"}";var st=et?et.inherit===!1?et:defaults(et,at):at,dt=getUnitFromValue(_e.value,nt);if(st[dt])it=st[dt];else if(st.inherit){for(var ht=timeUnits.indexOf(dt),ot=ht-1;ot>=0;--ot)if(st[dt]){it=st[dt];break}it=it||at.none}if(isArray$1(it)){var ct=_e.level==null?0:_e.level>=0?_e.level:it.length+_e.level;ct=Math.min(ct,it.length-1),it=it[ct]}}return format$1(new Date(_e.value),it,nt,tt)}function getUnitFromValue(_e,_){var et=parseDate(_e),tt=et[monthGetterName(_)]()+1,nt=et[dateGetterName(_)](),it=et[hoursGetterName(_)](),at=et[minutesGetterName(_)](),ot=et[secondsGetterName(_)](),st=et[millisecondsGetterName(_)](),dt=st===0,ht=dt&&ot===0,ct=ht&&at===0,ut=ct&&it===0,ft=ut&&nt===1,gt=ft&&tt===1;return gt?"year":ft?"month":ut?"day":ct?"hour":ht?"minute":dt?"second":"millisecond"}function getUnitValue(_e,_,et){var tt=isNumber(_e)?parseDate(_e):_e;switch(_=_||getUnitFromValue(_e,et),_){case"year":return tt[fullYearGetterName(et)]();case"half-year":return tt[monthGetterName(et)]()>=6?1:0;case"quarter":return Math.floor((tt[monthGetterName(et)]()+1)/4);case"month":return tt[monthGetterName(et)]();case"day":return tt[dateGetterName(et)]();case"half-day":return tt[hoursGetterName(et)]()/24;case"hour":return tt[hoursGetterName(et)]();case"minute":return tt[minutesGetterName(et)]();case"second":return tt[secondsGetterName(et)]();case"millisecond":return tt[millisecondsGetterName(et)]()}}function fullYearGetterName(_e){return _e?"getUTCFullYear":"getFullYear"}function monthGetterName(_e){return _e?"getUTCMonth":"getMonth"}function dateGetterName(_e){return _e?"getUTCDate":"getDate"}function hoursGetterName(_e){return _e?"getUTCHours":"getHours"}function minutesGetterName(_e){return _e?"getUTCMinutes":"getMinutes"}function secondsGetterName(_e){return _e?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(_e){return _e?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(_e){return _e?"setUTCFullYear":"setFullYear"}function monthSetterName(_e){return _e?"setUTCMonth":"setMonth"}function dateSetterName(_e){return _e?"setUTCDate":"setDate"}function hoursSetterName(_e){return _e?"setUTCHours":"setHours"}function minutesSetterName(_e){return _e?"setUTCMinutes":"setMinutes"}function secondsSetterName(_e){return _e?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(_e){return _e?"setUTCMilliseconds":"setMilliseconds"}function getTextRect(_e,_,et,tt,nt,it,at,ot){var st=new ZRText({style:{text:_e,font:_,align:et,verticalAlign:tt,padding:nt,rich:it,overflow:at?"truncate":null,lineHeight:ot}});return st.getBoundingRect()}function addCommas(_e){if(!isNumeric(_e))return isString$1(_e)?_e:"-";var _=(_e+"").split(".");return _[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(_.length>1?"."+_[1]:"")}function toCamelCase(_e,_){return _e=(_e||"").toLowerCase().replace(/-(.)/g,function(et,tt){return tt.toUpperCase()}),_&&_e&&(_e=_e.charAt(0).toUpperCase()+_e.slice(1)),_e}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(_e,_,et){var tt="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function nt(ht){return ht&&trim$1(ht)?ht:"-"}function it(ht){return!!(ht!=null&&!isNaN(ht)&&isFinite(ht))}var at=_==="time",ot=_e instanceof Date;if(at||ot){var st=at?parseDate(_e):_e;if(isNaN(+st)){if(ot)return"-"}else return format$1(st,tt,et)}if(_==="ordinal")return isStringSafe(_e)?nt(_e):isNumber(_e)&&it(_e)?_e+"":"-";var dt=numericToNumber(_e);return it(dt)?addCommas(dt):isStringSafe(_e)?nt(_e):typeof _e=="boolean"?_e+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(_e,_){return"{"+_e+(_??"")+"}"};function formatTpl(_e,_,et){isArray$1(_)||(_=[_]);var tt=_.length;if(!tt)return"";for(var nt=_[0].$vars||[],it=0;it<nt.length;it++){var at=TPL_VAR_ALIAS[it];_e=_e.replace(wrapVar(at),wrapVar(at,0))}for(var ot=0;ot<tt;ot++)for(var st=0;st<nt.length;st++){var dt=_[ot][nt[st]];_e=_e.replace(wrapVar(TPL_VAR_ALIAS[st],ot),et?encodeHTML(dt):dt)}return _e}function formatTplSimple(_e,_,et){return each$f(_,function(tt,nt){_e=_e.replace("{"+nt+"}",tt)}),_e}function getTooltipMarker(_e,_){var et=isString$1(_e)?{color:_e,extraCssText:_}:_e||{},tt=et.color,nt=et.type;_=et.extraCssText;var it=et.renderMode||"html";if(!tt)return"";if(it==="html")return nt==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(tt)+";"+(_||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(tt)+";"+(_||"")+'"></span>';var at=et.markerId||"markerX";return{renderMode:it,content:"{"+at+"|}  ",style:nt==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:tt}:{width:10,height:10,borderRadius:5,backgroundColor:tt}}}function formatTime(_e,_,et){(_e==="week"||_e==="month"||_e==="quarter"||_e==="half-year"||_e==="year")&&(_e=`MM-dd
yyyy`);var tt=parseDate(_),nt=et?"getUTC":"get",it=tt[nt+"FullYear"](),at=tt[nt+"Month"]()+1,ot=tt[nt+"Date"](),st=tt[nt+"Hours"](),dt=tt[nt+"Minutes"](),ht=tt[nt+"Seconds"](),ct=tt[nt+"Milliseconds"]();return _e=_e.replace("MM",pad(at,2)).replace("M",at).replace("yyyy",it).replace("yy",pad(it%100+"",2)).replace("dd",pad(ot,2)).replace("d",ot).replace("hh",pad(st,2)).replace("h",st).replace("mm",pad(dt,2)).replace("m",dt).replace("ss",pad(ht,2)).replace("s",ht).replace("SSS",pad(ct,3)),_e}function capitalFirst(_e){return _e&&_e.charAt(0).toUpperCase()+_e.substr(1)}function convertToColorString(_e,_){return _=_||"transparent",isString$1(_e)?_e:isObject$4(_e)&&_e.colorStops&&(_e.colorStops[0]||{}).color||_}function windowOpen(_e,_){if(_==="_blank"||_==="blank"){var et=window.open();et.opener=null,et.location.href=_e}else window.open(_e,_)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(_e,_,et,tt,nt){var it=0,at=0;tt==null&&(tt=1/0),nt==null&&(nt=1/0);var ot=0;_.eachChild(function(st,dt){var ht=st.getBoundingRect(),ct=_.childAt(dt+1),ut=ct&&ct.getBoundingRect(),ft,gt;if(_e==="horizontal"){var mt=ht.width+(ut?-ut.x+ht.x:0);ft=it+mt,ft>tt||st.newline?(it=0,ft=mt,at+=ot+et,ot=ht.height):ot=Math.max(ot,ht.height)}else{var vt=ht.height+(ut?-ut.y+ht.y:0);gt=at+vt,gt>nt||st.newline?(it+=ot+et,at=0,gt=vt,ot=ht.width):ot=Math.max(ot,ht.width)}st.newline||(st.x=it,st.y=at,st.markRedraw(),_e==="horizontal"?it=ft+et:at=gt+et)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(_e,_,et){var tt=_.width,nt=_.height,it=parsePercent(_e.left,tt),at=parsePercent(_e.top,nt),ot=parsePercent(_e.right,tt),st=parsePercent(_e.bottom,nt);return(isNaN(it)||isNaN(parseFloat(_e.left)))&&(it=0),(isNaN(ot)||isNaN(parseFloat(_e.right)))&&(ot=tt),(isNaN(at)||isNaN(parseFloat(_e.top)))&&(at=0),(isNaN(st)||isNaN(parseFloat(_e.bottom)))&&(st=nt),et=normalizeCssArray(et||0),{width:Math.max(ot-it-et[1]-et[3],0),height:Math.max(st-at-et[0]-et[2],0)}}function getLayoutRect(_e,_,et){et=normalizeCssArray(et||0);var tt=_.width,nt=_.height,it=parsePercent(_e.left,tt),at=parsePercent(_e.top,nt),ot=parsePercent(_e.right,tt),st=parsePercent(_e.bottom,nt),dt=parsePercent(_e.width,tt),ht=parsePercent(_e.height,nt),ct=et[2]+et[0],ut=et[1]+et[3],ft=_e.aspect;switch(isNaN(dt)&&(dt=tt-ot-ut-it),isNaN(ht)&&(ht=nt-st-ct-at),ft!=null&&(isNaN(dt)&&isNaN(ht)&&(ft>tt/nt?dt=tt*.8:ht=nt*.8),isNaN(dt)&&(dt=ft*ht),isNaN(ht)&&(ht=dt/ft)),isNaN(it)&&(it=tt-ot-dt-ut),isNaN(at)&&(at=nt-st-ht-ct),_e.left||_e.right){case"center":it=tt/2-dt/2-et[3];break;case"right":it=tt-dt-ut;break}switch(_e.top||_e.bottom){case"middle":case"center":at=nt/2-ht/2-et[0];break;case"bottom":at=nt-ht-ct;break}it=it||0,at=at||0,isNaN(dt)&&(dt=tt-ut-it-(ot||0)),isNaN(ht)&&(ht=nt-ct-at-(st||0));var gt=new BoundingRect(it+et[3],at+et[0],dt,ht);return gt.margin=et,gt}function positionElement(_e,_,et,tt,nt,it){var at=!nt||!nt.hv||nt.hv[0],ot=!nt||!nt.hv||nt.hv[1],st=nt&&nt.boundingMode||"all";if(it=it||_e,it.x=_e.x,it.y=_e.y,!at&&!ot)return!1;var dt;if(st==="raw")dt=_e.type==="group"?new BoundingRect(0,0,+_.width||0,+_.height||0):_e.getBoundingRect();else if(dt=_e.getBoundingRect(),_e.needLocalTransform()){var ht=_e.getLocalTransform();dt=dt.clone(),dt.applyTransform(ht)}var ct=getLayoutRect(defaults({width:dt.width,height:dt.height},_),et,tt),ut=at?ct.x-dt.x:0,ft=ot?ct.y-dt.y:0;return st==="raw"?(it.x=ut,it.y=ft):(it.x+=ut,it.y+=ft),it===_e&&_e.markRedraw(),!0}function sizeCalculable(_e,_){return _e[HV_NAMES[_][0]]!=null||_e[HV_NAMES[_][1]]!=null&&_e[HV_NAMES[_][2]]!=null}function fetchLayoutMode(_e){var _=_e.layoutMode||_e.constructor.layoutMode;return isObject$4(_)?_:_?{type:_}:null}function mergeLayoutParam(_e,_,et){var tt=et&&et.ignoreSize;!isArray$1(tt)&&(tt=[tt,tt]);var nt=at(HV_NAMES[0],0),it=at(HV_NAMES[1],1);dt(HV_NAMES[0],_e,nt),dt(HV_NAMES[1],_e,it);function at(ht,ct){var ut={},ft=0,gt={},mt=0,vt=2;if(each$e(ht,function(_t){gt[_t]=_e[_t]}),each$e(ht,function(_t){ot(_,_t)&&(ut[_t]=gt[_t]=_[_t]),st(ut,_t)&&ft++,st(gt,_t)&&mt++}),tt[ct])return st(_,ht[1])?gt[ht[2]]=null:st(_,ht[2])&&(gt[ht[1]]=null),gt;if(mt===vt||!ft)return gt;if(ft>=vt)return ut;for(var yt=0;yt<ht.length;yt++){var bt=ht[yt];if(!ot(ut,bt)&&ot(_e,bt)){ut[bt]=_e[bt];break}}return ut}function ot(ht,ct){return ht.hasOwnProperty(ct)}function st(ht,ct){return ht[ct]!=null&&ht[ct]!=="auto"}function dt(ht,ct,ut){each$e(ht,function(ft){ct[ft]=ut[ft]})}}function getLayoutParams(_e){return copyLayoutParams({},_e)}function copyLayoutParams(_e,_){return _&&_e&&each$e(LOCATION_PARAMS,function(et){_.hasOwnProperty(et)&&(_e[et]=_[et])}),_e}var inner$l=makeInner(),ComponentModel=function(_e){__extends$1(_,_e);function _(et,tt,nt){var it=_e.call(this,et,tt,nt)||this;return it.uid=getUID("ec_cpt_model"),it}return _.prototype.init=function(et,tt,nt){this.mergeDefaultAndTheme(et,nt)},_.prototype.mergeDefaultAndTheme=function(et,tt){var nt=fetchLayoutMode(this),it=nt?getLayoutParams(et):{},at=tt.getTheme();merge$1(et,at.get(this.mainType)),merge$1(et,this.getDefaultOption()),nt&&mergeLayoutParam(et,it,nt)},_.prototype.mergeOption=function(et,tt){merge$1(this.option,et,!0);var nt=fetchLayoutMode(this);nt&&mergeLayoutParam(this.option,et,nt)},_.prototype.optionUpdated=function(et,tt){},_.prototype.getDefaultOption=function(){var et=this.constructor;if(!isExtendedClass(et))return et.defaultOption;var tt=inner$l(this);if(!tt.defaultOption){for(var nt=[],it=et;it;){var at=it.prototype.defaultOption;at&&nt.push(at),it=it.superClass}for(var ot={},st=nt.length-1;st>=0;st--)ot=merge$1(ot,nt[st],!0);tt.defaultOption=ot}return tt.defaultOption},_.prototype.getReferringComponents=function(et,tt){var nt=et+"Index",it=et+"Id";return queryReferringComponents(this.ecModel,et,{index:this.get(nt,!0),id:this.get(it,!0)},tt)},_.prototype.getBoxLayoutParams=function(){var et=this;return{left:et.get("left"),top:et.get("top"),right:et.get("right"),bottom:et.get("bottom"),width:et.get("width"),height:et.get("height")}},_.prototype.getZLevelKey=function(){return""},_.prototype.setZLevel=function(et){this.option.zlevel=et},_.protoInitialize=function(){var et=_.prototype;et.type="component",et.id="",et.name="",et.mainType="",et.subType="",et.componentIndex=0}(),_}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(_e){var _=[];return each$f(ComponentModel.getClassesByMainType(_e),function(et){_=_.concat(et.dependencies||et.prototype.dependencies||[])}),_=map$1(_,function(et){return parseClassType(et).main}),_e!=="dataset"&&indexOf(_,"dataset")<=0&&_.unshift("dataset"),_}var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(_e){innerGlobalModel(_e).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(_e,_,et){var tt={},nt=querySeriesUpstreamDatasetModel(_);if(!nt||!_e)return tt;var it=[],at=[],ot=_.ecModel,st=innerGlobalModel(ot).datasetMap,dt=nt.uid+"_"+et.seriesLayoutBy,ht,ct;_e=_e.slice(),each$f(_e,function(mt,vt){var yt=isObject$4(mt)?mt:_e[vt]={name:mt};yt.type==="ordinal"&&ht==null&&(ht=vt,ct=gt(yt)),tt[yt.name]=[]});var ut=st.get(dt)||st.set(dt,{categoryWayDim:ct,valueWayDim:0});each$f(_e,function(mt,vt){var yt=mt.name,bt=gt(mt);if(ht==null){var _t=ut.valueWayDim;ft(tt[yt],_t,bt),ft(at,_t,bt),ut.valueWayDim+=bt}else if(ht===vt)ft(tt[yt],0,bt),ft(it,0,bt);else{var _t=ut.categoryWayDim;ft(tt[yt],_t,bt),ft(at,_t,bt),ut.categoryWayDim+=bt}});function ft(mt,vt,yt){for(var bt=0;bt<yt;bt++)mt.push(vt+bt)}function gt(mt){var vt=mt.dimsDef;return vt?vt.length:1}return it.length&&(tt.itemName=it),at.length&&(tt.seriesName=at),tt}function makeSeriesEncodeForNameBased(_e,_,et){var tt={},nt=querySeriesUpstreamDatasetModel(_e);if(!nt)return tt;var it=_.sourceFormat,at=_.dimensionsDefine,ot;(it===SOURCE_FORMAT_OBJECT_ROWS||it===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(at,function(ht,ct){(isObject$4(ht)?ht.name:ht)==="name"&&(ot=ct)});var st=function(){for(var ht={},ct={},ut=[],ft=0,gt=Math.min(5,et);ft<gt;ft++){var mt=doGuessOrdinal(_.data,it,_.seriesLayoutBy,at,_.startIndex,ft);ut.push(mt);var vt=mt===BE_ORDINAL.Not;if(vt&&ht.v==null&&ft!==ot&&(ht.v=ft),(ht.n==null||ht.n===ht.v||!vt&&ut[ht.n]===BE_ORDINAL.Not)&&(ht.n=ft),yt(ht)&&ut[ht.n]!==BE_ORDINAL.Not)return ht;vt||(mt===BE_ORDINAL.Might&&ct.v==null&&ft!==ot&&(ct.v=ft),(ct.n==null||ct.n===ct.v)&&(ct.n=ft))}function yt(bt){return bt.v!=null&&bt.n!=null}return yt(ht)?ht:yt(ct)?ct:null}();if(st){tt.value=[st.v];var dt=ot??st.n;tt.itemName=[dt],tt.seriesName=[dt]}return tt}function querySeriesUpstreamDatasetModel(_e){var _=_e.get("data",!0);if(!_)return queryReferringComponents(_e.ecModel,"dataset",{index:_e.get("datasetIndex",!0),id:_e.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(_e){return!_e.get("transform",!0)&&!_e.get("fromTransformResult",!0)?[]:queryReferringComponents(_e.ecModel,"dataset",{index:_e.get("fromDatasetIndex",!0),id:_e.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(_e,_){return doGuessOrdinal(_e.data,_e.sourceFormat,_e.seriesLayoutBy,_e.dimensionsDefine,_e.startIndex,_)}function doGuessOrdinal(_e,_,et,tt,nt,it){var at,ot=5;if(isTypedArray(_e))return BE_ORDINAL.Not;var st,dt;if(tt){var ht=tt[it];isObject$4(ht)?(st=ht.name,dt=ht.type):isString$1(ht)&&(st=ht)}if(dt!=null)return dt==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(_===SOURCE_FORMAT_ARRAY_ROWS){var ct=_e;if(et===SERIES_LAYOUT_BY_ROW){for(var ut=ct[it],ft=0;ft<(ut||[]).length&&ft<ot;ft++)if((at=xt(ut[nt+ft]))!=null)return at}else for(var ft=0;ft<ct.length&&ft<ot;ft++){var gt=ct[nt+ft];if(gt&&(at=xt(gt[it]))!=null)return at}}else if(_===SOURCE_FORMAT_OBJECT_ROWS){var mt=_e;if(!st)return BE_ORDINAL.Not;for(var ft=0;ft<mt.length&&ft<ot;ft++){var vt=mt[ft];if(vt&&(at=xt(vt[st]))!=null)return at}}else if(_===SOURCE_FORMAT_KEYED_COLUMNS){var yt=_e;if(!st)return BE_ORDINAL.Not;var ut=yt[st];if(!ut||isTypedArray(ut))return BE_ORDINAL.Not;for(var ft=0;ft<ut.length&&ft<ot;ft++)if((at=xt(ut[ft]))!=null)return at}else if(_===SOURCE_FORMAT_ORIGINAL)for(var bt=_e,ft=0;ft<bt.length&&ft<ot;ft++){var vt=bt[ft],_t=getDataItemValue(vt);if(!isArray$1(_t))return BE_ORDINAL.Not;if((at=xt(_t[it]))!=null)return at}function xt(St){var Tt=isString$1(St);if(St!=null&&Number.isFinite(Number(St))&&St!=="")return Tt?BE_ORDINAL.Might:BE_ORDINAL.Not;if(Tt&&St!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(_e,_){assert(internalOptionCreatorMap.get(_e)==null&&_),internalOptionCreatorMap.set(_e,_)}function concatInternalOptions(_e,_,et){var tt=internalOptionCreatorMap.get(_);if(!tt)return et;var nt=tt(_e);return nt?et.concat(nt):et}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function _e(){}return _e.prototype.getColorFromPalette=function(_,et,tt){var nt=normalizeToArray(this.get("color",!0)),it=this.get("colorLayer",!0);return getFromPalette(this,innerColor,nt,it,_,et,tt)},_e.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},_e}();function getDecalFromPalette(_e,_,et,tt){var nt=normalizeToArray(_e.get(["aria","decal","decals"]));return getFromPalette(_e,innerDecal,nt,null,_,et,tt)}function getNearestPalette(_e,_){for(var et=_e.length,tt=0;tt<et;tt++)if(_e[tt].length>_)return _e[tt];return _e[et-1]}function getFromPalette(_e,_,et,tt,nt,it,at){it=it||_e;var ot=_(it),st=ot.paletteIdx||0,dt=ot.paletteNameMap=ot.paletteNameMap||{};if(dt.hasOwnProperty(nt))return dt[nt];var ht=at==null||!tt?et:getNearestPalette(tt,at);if(ht=ht||et,!(!ht||!ht.length)){var ct=ht[st];return nt&&(dt[nt]=ct),ot.paletteIdx=(st+1)%ht.length,ct}}function clearPalette(_e,_){_(_e).paletteIdx=0,_(_e).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.init=function(et,tt,nt,it,at,ot){it=it||{},this.option=null,this._theme=new Model(it),this._locale=new Model(at),this._optionManager=ot},_.prototype.setOption=function(et,tt,nt){var it=normalizeSetOptionInput(tt);this._optionManager.setOption(et,nt,it),this._resetOption(null,it)},_.prototype.resetOption=function(et,tt){return this._resetOption(et,normalizeSetOptionInput(tt))},_.prototype._resetOption=function(et,tt){var nt=!1,it=this._optionManager;if(!et||et==="recreate"){var at=it.mountOption(et==="recreate");!this.option||et==="recreate"?initBase(this,at):(this.restoreData(),this._mergeOption(at,tt)),nt=!0}if((et==="timeline"||et==="media")&&this.restoreData(),!et||et==="recreate"||et==="timeline"){var ot=it.getTimelineOption(this);ot&&(nt=!0,this._mergeOption(ot,tt))}if(!et||et==="recreate"||et==="media"){var st=it.getMediaOption(this);st.length&&each$f(st,function(dt){nt=!0,this._mergeOption(dt,tt)},this)}return nt},_.prototype.mergeOption=function(et){this._mergeOption(et,null)},_.prototype._mergeOption=function(et,tt){var nt=this.option,it=this._componentsMap,at=this._componentsCount,ot=[],st=createHashMap(),dt=tt&&tt.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(et,function(ct,ut){ct!=null&&(ComponentModel.hasClass(ut)?ut&&(ot.push(ut),st.set(ut,!0)):nt[ut]=nt[ut]==null?clone$4(ct):merge$1(nt[ut],ct,!0))}),dt&&dt.each(function(ct,ut){ComponentModel.hasClass(ut)&&!st.get(ut)&&(ot.push(ut),st.set(ut,!0))}),ComponentModel.topologicalTravel(ot,ComponentModel.getAllClassMainTypes(),ht,this);function ht(ct){var ut=concatInternalOptions(this,ct,normalizeToArray(et[ct])),ft=it.get(ct),gt=ft?dt&&dt.get(ct)?"replaceMerge":"normalMerge":"replaceAll",mt=mappingToExists(ft,ut,gt);setComponentTypeToKeyInfo(mt,ct,ComponentModel),nt[ct]=null,it.set(ct,null),at.set(ct,0);var vt=[],yt=[],bt=0,_t;each$f(mt,function(xt,St){var Tt=xt.existing,wt=xt.newOption;if(!wt)Tt&&(Tt.mergeOption({},this),Tt.optionUpdated({},!1));else{var Ct=ct==="series",Et=ComponentModel.getClass(ct,xt.keyInfo.subType,!Ct);if(!Et)return;if(ct==="tooltip"){if(_t)return;_t=!0}if(Tt&&Tt.constructor===Et)Tt.name=xt.keyInfo.name,Tt.mergeOption(wt,this),Tt.optionUpdated(wt,!1);else{var At=extend({componentIndex:St},xt.keyInfo);Tt=new Et(wt,this,this,At),extend(Tt,At),xt.brandNew&&(Tt.__requireNewView=!0),Tt.init(wt,this,this),Tt.optionUpdated(null,!0)}}Tt?(vt.push(Tt.option),yt.push(Tt),bt++):(vt.push(void 0),yt.push(void 0))},this),nt[ct]=vt,it.set(ct,yt),at.set(ct,bt),ct==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},_.prototype.getOption=function(){var et=clone$4(this.option);return each$f(et,function(tt,nt){if(ComponentModel.hasClass(nt)){for(var it=normalizeToArray(tt),at=it.length,ot=!1,st=at-1;st>=0;st--)it[st]&&!isComponentIdInternal(it[st])?ot=!0:(it[st]=null,!ot&&at--);it.length=at,et[nt]=it}}),delete et[OPTION_INNER_KEY],et},_.prototype.getTheme=function(){return this._theme},_.prototype.getLocaleModel=function(){return this._locale},_.prototype.setUpdatePayload=function(et){this._payload=et},_.prototype.getUpdatePayload=function(){return this._payload},_.prototype.getComponent=function(et,tt){var nt=this._componentsMap.get(et);if(nt){var it=nt[tt||0];if(it)return it;if(tt==null){for(var at=0;at<nt.length;at++)if(nt[at])return nt[at]}}},_.prototype.queryComponents=function(et){var tt=et.mainType;if(!tt)return[];var nt=et.index,it=et.id,at=et.name,ot=this._componentsMap.get(tt);if(!ot||!ot.length)return[];var st;return nt!=null?(st=[],each$f(normalizeToArray(nt),function(dt){ot[dt]&&st.push(ot[dt])})):it!=null?st=queryByIdOrName("id",it,ot):at!=null?st=queryByIdOrName("name",at,ot):st=filter$1(ot,function(dt){return!!dt}),filterBySubType(st,et)},_.prototype.findComponents=function(et){var tt=et.query,nt=et.mainType,it=ot(tt),at=it?this.queryComponents(it):filter$1(this._componentsMap.get(nt),function(dt){return!!dt});return st(filterBySubType(at,et));function ot(dt){var ht=nt+"Index",ct=nt+"Id",ut=nt+"Name";return dt&&(dt[ht]!=null||dt[ct]!=null||dt[ut]!=null)?{mainType:nt,index:dt[ht],id:dt[ct],name:dt[ut]}:null}function st(dt){return et.filter?filter$1(dt,et.filter):dt}},_.prototype.eachComponent=function(et,tt,nt){var it=this._componentsMap;if(isFunction$3(et)){var at=tt,ot=et;it.each(function(ct,ut){for(var ft=0;ct&&ft<ct.length;ft++){var gt=ct[ft];gt&&ot.call(at,ut,gt,gt.componentIndex)}})}else for(var st=isString$1(et)?it.get(et):isObject$4(et)?this.findComponents(et):null,dt=0;st&&dt<st.length;dt++){var ht=st[dt];ht&&tt.call(nt,ht,ht.componentIndex)}},_.prototype.getSeriesByName=function(et){var tt=convertOptionIdName(et,null);return filter$1(this._componentsMap.get("series"),function(nt){return!!nt&&tt!=null&&nt.name===tt})},_.prototype.getSeriesByIndex=function(et){return this._componentsMap.get("series")[et]},_.prototype.getSeriesByType=function(et){return filter$1(this._componentsMap.get("series"),function(tt){return!!tt&&tt.subType===et})},_.prototype.getSeries=function(){return filter$1(this._componentsMap.get("series"),function(et){return!!et})},_.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},_.prototype.eachSeries=function(et,tt){assertSeriesInitialized(this),each$f(this._seriesIndices,function(nt){var it=this._componentsMap.get("series")[nt];et.call(tt,it,nt)},this)},_.prototype.eachRawSeries=function(et,tt){each$f(this._componentsMap.get("series"),function(nt){nt&&et.call(tt,nt,nt.componentIndex)})},_.prototype.eachSeriesByType=function(et,tt,nt){assertSeriesInitialized(this),each$f(this._seriesIndices,function(it){var at=this._componentsMap.get("series")[it];at.subType===et&&tt.call(nt,at,it)},this)},_.prototype.eachRawSeriesByType=function(et,tt,nt){return each$f(this.getSeriesByType(et),tt,nt)},_.prototype.isSeriesFiltered=function(et){return assertSeriesInitialized(this),this._seriesIndicesMap.get(et.componentIndex)==null},_.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},_.prototype.filterSeries=function(et,tt){assertSeriesInitialized(this);var nt=[];each$f(this._seriesIndices,function(it){var at=this._componentsMap.get("series")[it];et.call(tt,at,it)&&nt.push(it)},this),this._seriesIndices=nt,this._seriesIndicesMap=createHashMap(nt)},_.prototype.restoreData=function(et){reCreateSeriesIndices(this);var tt=this._componentsMap,nt=[];tt.each(function(it,at){ComponentModel.hasClass(at)&&nt.push(at)}),ComponentModel.topologicalTravel(nt,ComponentModel.getAllClassMainTypes(),function(it){each$f(tt.get(it),function(at){at&&(it!=="series"||!isNotTargetSeries(at,et))&&at.restoreData()})})},_.internalField=function(){reCreateSeriesIndices=function(et){var tt=et._seriesIndices=[];each$f(et._componentsMap.get("series"),function(nt){nt&&tt.push(nt.componentIndex)}),et._seriesIndicesMap=createHashMap(tt)},assertSeriesInitialized=function(et){},initBase=function(et,tt){et.option={},et.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,et._componentsMap=createHashMap({series:[]}),et._componentsCount=createHashMap();var nt=tt.aria;isObject$4(nt)&&nt.enabled==null&&(nt.enabled=!0),mergeTheme(tt,et._theme.option),merge$1(tt,globalDefault,!1),et._mergeOption(tt,null)}}(),_}(Model);function isNotTargetSeries(_e,_){if(_){var et=_.seriesIndex,tt=_.seriesId,nt=_.seriesName;return et!=null&&_e.componentIndex!==et||tt!=null&&_e.id!==tt||nt!=null&&_e.name!==nt}}function mergeTheme(_e,_){var et=_e.color&&!_e.colorLayer;each$f(_,function(tt,nt){nt==="colorLayer"&&et||ComponentModel.hasClass(nt)||(typeof tt=="object"?_e[nt]=_e[nt]?merge$1(_e[nt],tt,!1):clone$4(tt):_e[nt]==null&&(_e[nt]=tt))})}function queryByIdOrName(_e,_,et){if(isArray$1(_)){var tt=createHashMap();return each$f(_,function(it){if(it!=null){var at=convertOptionIdName(it,null);at!=null&&tt.set(it,!0)}}),filter$1(et,function(it){return it&&tt.get(it[_e])})}else{var nt=convertOptionIdName(_,null);return filter$1(et,function(it){return it&&nt!=null&&it[_e]===nt})}}function filterBySubType(_e,_){return _.hasOwnProperty("subType")?filter$1(_e,function(et){return et&&et.subType===_.subType}):_e}function normalizeSetOptionInput(_e){var _=createHashMap();return _e&&each$f(normalizeToArray(_e.replaceMerge),function(et){_.set(et,!0)}),{replaceMergeMainTypeMap:_}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function _e(_){each$f(availableMethods,function(et){this[et]=bind$2(_[et],_)},this)}return _e}(),coordinateSystemCreators={},CoordinateSystemManager=function(){function _e(){this._coordinateSystems=[]}return _e.prototype.create=function(_,et){var tt=[];each$f(coordinateSystemCreators,function(nt,it){var at=nt.create(_,et);tt=tt.concat(at||[])}),this._coordinateSystems=tt},_e.prototype.update=function(_,et){each$f(this._coordinateSystems,function(tt){tt.update&&tt.update(_,et)})},_e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},_e.register=function(_,et){coordinateSystemCreators[_]=et},_e.get=function(_){return coordinateSystemCreators[_]},_e}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function _e(_){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=_}return _e.prototype.setOption=function(_,et,tt){_&&(each$f(normalizeToArray(_.series),function(at){at&&at.data&&isTypedArray(at.data)&&setAsPrimitive(at.data)}),each$f(normalizeToArray(_.dataset),function(at){at&&at.source&&isTypedArray(at.source)&&setAsPrimitive(at.source)})),_=clone$4(_);var nt=this._optionBackup,it=parseRawOption(_,et,!nt);this._newBaseOption=it.baseOption,nt?(it.timelineOptions.length&&(nt.timelineOptions=it.timelineOptions),it.mediaList.length&&(nt.mediaList=it.mediaList),it.mediaDefault&&(nt.mediaDefault=it.mediaDefault)):this._optionBackup=it},_e.prototype.mountOption=function(_){var et=this._optionBackup;return this._timelineOptions=et.timelineOptions,this._mediaList=et.mediaList,this._mediaDefault=et.mediaDefault,this._currentMediaIndices=[],clone$4(_?et.baseOption:this._newBaseOption)},_e.prototype.getTimelineOption=function(_){var et,tt=this._timelineOptions;if(tt.length){var nt=_.getComponent("timeline");nt&&(et=clone$4(tt[nt.getCurrentIndex()]))}return et},_e.prototype.getMediaOption=function(_){var et=this._api.getWidth(),tt=this._api.getHeight(),nt=this._mediaList,it=this._mediaDefault,at=[],ot=[];if(!nt.length&&!it)return ot;for(var st=0,dt=nt.length;st<dt;st++)applyMediaQuery(nt[st].query,et,tt)&&at.push(st);return!at.length&&it&&(at=[-1]),at.length&&!indicesEquals(at,this._currentMediaIndices)&&(ot=map$1(at,function(ht){return clone$4(ht===-1?it.option:nt[ht].option)})),this._currentMediaIndices=at,ot},_e}();function parseRawOption(_e,_,et){var tt=[],nt,it,at=_e.baseOption,ot=_e.timeline,st=_e.options,dt=_e.media,ht=!!_e.media,ct=!!(st||ot||at&&at.timeline);at?(it=at,it.timeline||(it.timeline=ot)):((ct||ht)&&(_e.options=_e.media=null),it=_e),ht&&isArray$1(dt)&&each$f(dt,function(ft){ft&&ft.option&&(ft.query?tt.push(ft):nt||(nt=ft))}),ut(it),each$f(st,function(ft){return ut(ft)}),each$f(tt,function(ft){return ut(ft.option)});function ut(ft){each$f(_,function(gt){gt(ft,et)})}return{baseOption:it,timelineOptions:st||[],mediaDefault:nt,mediaList:tt}}function applyMediaQuery(_e,_,et){var tt={width:_,height:et,aspectratio:_/et},nt=!0;return each$f(_e,function(it,at){var ot=at.match(QUERY_REG);if(!(!ot||!ot[1]||!ot[2])){var st=ot[1],dt=ot[2].toLowerCase();compare(tt[dt],it,st)||(nt=!1)}}),nt}function compare(_e,_,et){return et==="min"?_e>=_:et==="max"?_e<=_:_e===_}function indicesEquals(_e,_){return _e.join(",")===_.join(",")}var each$d=each$f,isObject$3=isObject$4,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(_e){var _=_e&&_e.itemStyle;if(_)for(var et=0,tt=POSSIBLE_STYLES.length;et<tt;et++){var nt=POSSIBLE_STYLES[et],it=_.normal,at=_.emphasis;it&&it[nt]&&(_e[nt]=_e[nt]||{},_e[nt].normal?merge$1(_e[nt].normal,it[nt]):_e[nt].normal=it[nt],it[nt]=null),at&&at[nt]&&(_e[nt]=_e[nt]||{},_e[nt].emphasis?merge$1(_e[nt].emphasis,at[nt]):_e[nt].emphasis=at[nt],at[nt]=null)}}function convertNormalEmphasis(_e,_,et){if(_e&&_e[_]&&(_e[_].normal||_e[_].emphasis)){var tt=_e[_].normal,nt=_e[_].emphasis;tt&&(et?(_e[_].normal=_e[_].emphasis=null,defaults(_e[_],tt)):_e[_]=tt),nt&&(_e.emphasis=_e.emphasis||{},_e.emphasis[_]=nt,nt.focus&&(_e.emphasis.focus=nt.focus),nt.blurScope&&(_e.emphasis.blurScope=nt.blurScope))}}function removeEC3NormalStatus(_e){convertNormalEmphasis(_e,"itemStyle"),convertNormalEmphasis(_e,"lineStyle"),convertNormalEmphasis(_e,"areaStyle"),convertNormalEmphasis(_e,"label"),convertNormalEmphasis(_e,"labelLine"),convertNormalEmphasis(_e,"upperLabel"),convertNormalEmphasis(_e,"edgeLabel")}function compatTextStyle(_e,_){var et=isObject$3(_e)&&_e[_],tt=isObject$3(et)&&et.textStyle;if(tt)for(var nt=0,it=TEXT_STYLE_OPTIONS.length;nt<it;nt++){var at=TEXT_STYLE_OPTIONS[nt];tt.hasOwnProperty(at)&&(et[at]=tt[at])}}function compatEC3CommonStyles(_e){_e&&(removeEC3NormalStatus(_e),compatTextStyle(_e,"label"),_e.emphasis&&compatTextStyle(_e.emphasis,"label"))}function processSeries(_e){if(isObject$3(_e)){compatEC2ItemStyle(_e),removeEC3NormalStatus(_e),compatTextStyle(_e,"label"),compatTextStyle(_e,"upperLabel"),compatTextStyle(_e,"edgeLabel"),_e.emphasis&&(compatTextStyle(_e.emphasis,"label"),compatTextStyle(_e.emphasis,"upperLabel"),compatTextStyle(_e.emphasis,"edgeLabel"));var _=_e.markPoint;_&&(compatEC2ItemStyle(_),compatEC3CommonStyles(_));var et=_e.markLine;et&&(compatEC2ItemStyle(et),compatEC3CommonStyles(et));var tt=_e.markArea;tt&&compatEC3CommonStyles(tt);var nt=_e.data;if(_e.type==="graph"){nt=nt||_e.nodes;var it=_e.links||_e.edges;if(it&&!isTypedArray(it))for(var at=0;at<it.length;at++)compatEC3CommonStyles(it[at]);each$f(_e.categories,function(dt){removeEC3NormalStatus(dt)})}if(nt&&!isTypedArray(nt))for(var at=0;at<nt.length;at++)compatEC3CommonStyles(nt[at]);if(_=_e.markPoint,_&&_.data)for(var ot=_.data,at=0;at<ot.length;at++)compatEC3CommonStyles(ot[at]);if(et=_e.markLine,et&&et.data)for(var st=et.data,at=0;at<st.length;at++)isArray$1(st[at])?(compatEC3CommonStyles(st[at][0]),compatEC3CommonStyles(st[at][1])):compatEC3CommonStyles(st[at]);_e.type==="gauge"?(compatTextStyle(_e,"axisLabel"),compatTextStyle(_e,"title"),compatTextStyle(_e,"detail")):_e.type==="treemap"?(convertNormalEmphasis(_e.breadcrumb,"itemStyle"),each$f(_e.levels,function(dt){removeEC3NormalStatus(dt)})):_e.type==="tree"&&removeEC3NormalStatus(_e.leaves)}}function toArr(_e){return isArray$1(_e)?_e:_e?[_e]:[]}function toObj(_e){return(isArray$1(_e)?_e[0]:_e)||{}}function globalCompatStyle(_e,_){each$d(toArr(_e.series),function(tt){isObject$3(tt)&&processSeries(tt)});var et=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];_&&et.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(et,function(tt){each$d(toArr(_e[tt]),function(nt){nt&&(compatTextStyle(nt,"axisLabel"),compatTextStyle(nt.axisPointer,"label"))})}),each$d(toArr(_e.parallel),function(tt){var nt=tt&&tt.parallelAxisDefault;compatTextStyle(nt,"axisLabel"),compatTextStyle(nt&&nt.axisPointer,"label")}),each$d(toArr(_e.calendar),function(tt){convertNormalEmphasis(tt,"itemStyle"),compatTextStyle(tt,"dayLabel"),compatTextStyle(tt,"monthLabel"),compatTextStyle(tt,"yearLabel")}),each$d(toArr(_e.radar),function(tt){compatTextStyle(tt,"name"),tt.name&&tt.axisName==null&&(tt.axisName=tt.name,delete tt.name),tt.nameGap!=null&&tt.axisNameGap==null&&(tt.axisNameGap=tt.nameGap,delete tt.nameGap)}),each$d(toArr(_e.geo),function(tt){isObject$3(tt)&&(compatEC3CommonStyles(tt),each$d(toArr(tt.regions),function(nt){compatEC3CommonStyles(nt)}))}),each$d(toArr(_e.timeline),function(tt){compatEC3CommonStyles(tt),convertNormalEmphasis(tt,"label"),convertNormalEmphasis(tt,"itemStyle"),convertNormalEmphasis(tt,"controlStyle",!0);var nt=tt.data;isArray$1(nt)&&each$f(nt,function(it){isObject$4(it)&&(convertNormalEmphasis(it,"label"),convertNormalEmphasis(it,"itemStyle"))})}),each$d(toArr(_e.toolbox),function(tt){convertNormalEmphasis(tt,"iconStyle"),each$d(tt.feature,function(nt){convertNormalEmphasis(nt,"iconStyle")})}),compatTextStyle(toObj(_e.axisPointer),"label"),compatTextStyle(toObj(_e.tooltip).axisPointer,"label")}function get$2(_e,_){for(var et=_.split(","),tt=_e,nt=0;nt<et.length&&(tt=tt&&tt[et[nt]],tt!=null);nt++);return tt}function set(_e,_,et,tt){for(var nt=_.split(","),it=_e,at,ot=0;ot<nt.length-1;ot++)at=nt[ot],it[at]==null&&(it[at]={}),it=it[at];it[nt[ot]]==null&&(it[nt[ot]]=et)}function compatLayoutProperties(_e){_e&&each$f(LAYOUT_PROPERTIES,function(_){_[0]in _e&&!(_[1]in _e)&&(_e[_[1]]=_e[_[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(_e){var _=_e&&_e.itemStyle;if(_)for(var et=0;et<BAR_ITEM_STYLE_MAP.length;et++){var tt=BAR_ITEM_STYLE_MAP[et][1],nt=BAR_ITEM_STYLE_MAP[et][0];_[tt]!=null&&(_[nt]=_[tt])}}function compatPieLabel(_e){_e&&_e.alignTo==="edge"&&_e.margin!=null&&_e.edgeDistance==null&&(_e.edgeDistance=_e.margin)}function compatSunburstState(_e){_e&&_e.downplay&&!_e.blur&&(_e.blur=_e.downplay)}function compatGraphFocus(_e){_e&&_e.focusNodeAdjacency!=null&&(_e.emphasis=_e.emphasis||{},_e.emphasis.focus==null&&(_e.emphasis.focus="adjacency"))}function traverseTree(_e,_){if(_e)for(var et=0;et<_e.length;et++)_(_e[et]),_e[et]&&traverseTree(_e[et].children,_)}function globalBackwardCompat(_e,_){globalCompatStyle(_e,_),_e.series=normalizeToArray(_e.series),each$f(_e.series,function(et){if(isObject$4(et)){var tt=et.type;if(tt==="line")et.clipOverflow!=null&&(et.clip=et.clipOverflow);else if(tt==="pie"||tt==="gauge"){et.clockWise!=null&&(et.clockwise=et.clockWise),compatPieLabel(et.label);var nt=et.data;if(nt&&!isTypedArray(nt))for(var it=0;it<nt.length;it++)compatPieLabel(nt[it]);et.hoverOffset!=null&&(et.emphasis=et.emphasis||{},(et.emphasis.scaleSize=null)&&(et.emphasis.scaleSize=et.hoverOffset))}else if(tt==="gauge"){var at=get$2(et,"pointer.color");at!=null&&set(et,"itemStyle.color",at)}else if(tt==="bar"){compatBarItemStyle(et),compatBarItemStyle(et.backgroundStyle),compatBarItemStyle(et.emphasis);var nt=et.data;if(nt&&!isTypedArray(nt))for(var it=0;it<nt.length;it++)typeof nt[it]=="object"&&(compatBarItemStyle(nt[it]),compatBarItemStyle(nt[it]&&nt[it].emphasis))}else if(tt==="sunburst"){var ot=et.highlightPolicy;ot&&(et.emphasis=et.emphasis||{},et.emphasis.focus||(et.emphasis.focus=ot)),compatSunburstState(et),traverseTree(et.data,compatSunburstState)}else tt==="graph"||tt==="sankey"?compatGraphFocus(et):tt==="map"&&(et.mapType&&!et.map&&(et.map=et.mapType),et.mapLocation&&defaults(et,et.mapLocation));et.hoverAnimation!=null&&(et.emphasis=et.emphasis||{},et.emphasis&&et.emphasis.scale==null&&(et.emphasis.scale=et.hoverAnimation)),compatLayoutProperties(et)}}),_e.dataRange&&(_e.visualMap=_e.dataRange),each$f(COMPATITABLE_COMPONENTS,function(et){var tt=_e[et];tt&&(isArray$1(tt)||(tt=[tt]),each$f(tt,function(nt){compatLayoutProperties(nt)}))})}function dataStack$1(_e){var _=createHashMap();_e.eachSeries(function(et){var tt=et.get("stack");if(tt){var nt=_.get(tt)||_.set(tt,[]),it=et.getData(),at={stackResultDimension:it.getCalculationInfo("stackResultDimension"),stackedOverDimension:it.getCalculationInfo("stackedOverDimension"),stackedDimension:it.getCalculationInfo("stackedDimension"),stackedByDimension:it.getCalculationInfo("stackedByDimension"),isStackedByIndex:it.getCalculationInfo("isStackedByIndex"),data:it,seriesModel:et};if(!at.stackedDimension||!(at.isStackedByIndex||at.stackedByDimension))return;nt.length&&it.setCalculationInfo("stackedOnSeries",nt[nt.length-1].seriesModel),nt.push(at)}}),_.each(calculateStack)}function calculateStack(_e){each$f(_e,function(_,et){var tt=[],nt=[NaN,NaN],it=[_.stackResultDimension,_.stackedOverDimension],at=_.data,ot=_.isStackedByIndex,st=_.seriesModel.get("stackStrategy")||"samesign";at.modify(it,function(dt,ht,ct){var ut=at.get(_.stackedDimension,ct);if(isNaN(ut))return nt;var ft,gt;ot?gt=at.getRawIndex(ct):ft=at.get(_.stackedByDimension,ct);for(var mt=NaN,vt=et-1;vt>=0;vt--){var yt=_e[vt];if(ot||(gt=yt.data.rawIndexOf(yt.stackedByDimension,ft)),gt>=0){var bt=yt.data.getByRawIndex(yt.stackResultDimension,gt);if(st==="all"||st==="positive"&&bt>0||st==="negative"&&bt<0||st==="samesign"&&ut>=0&&bt>0||st==="samesign"&&ut<=0&&bt<0){ut=addSafe(ut,bt),mt=bt;break}}}return tt[0]=ut,tt[1]=mt,tt})})}var SourceImpl=function(){function _e(_){this.data=_.data||(_.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=_.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=_.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=_.startIndex||0,this.dimensionsDetectedCount=_.dimensionsDetectedCount,this.metaRawOption=_.metaRawOption;var et=this.dimensionsDefine=_.dimensionsDefine;if(et)for(var tt=0;tt<et.length;tt++){var nt=et[tt];nt.type==null&&guessOrdinal(this,tt)===BE_ORDINAL.Must&&(nt.type="ordinal")}}return _e}();function isSourceInstance(_e){return _e instanceof SourceImpl}function createSource(_e,_,et){et=et||detectSourceFormat(_e);var tt=_.seriesLayoutBy,nt=determineSourceDimensions(_e,et,tt,_.sourceHeader,_.dimensions),it=new SourceImpl({data:_e,sourceFormat:et,seriesLayoutBy:tt,dimensionsDefine:nt.dimensionsDefine,startIndex:nt.startIndex,dimensionsDetectedCount:nt.dimensionsDetectedCount,metaRawOption:clone$4(_)});return it}function createSourceFromSeriesDataOption(_e){return new SourceImpl({data:_e,sourceFormat:isTypedArray(_e)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(_e){return new SourceImpl({data:_e.data,sourceFormat:_e.sourceFormat,seriesLayoutBy:_e.seriesLayoutBy,dimensionsDefine:clone$4(_e.dimensionsDefine),startIndex:_e.startIndex,dimensionsDetectedCount:_e.dimensionsDetectedCount})}function detectSourceFormat(_e){var _=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(_e))_=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(_e)){_e.length===0&&(_=SOURCE_FORMAT_ARRAY_ROWS);for(var et=0,tt=_e.length;et<tt;et++){var nt=_e[et];if(nt!=null){if(isArray$1(nt)||isTypedArray(nt)){_=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$4(nt)){_=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$4(_e)){for(var it in _e)if(hasOwn(_e,it)&&isArrayLike(_e[it])){_=SOURCE_FORMAT_KEYED_COLUMNS;break}}return _}function determineSourceDimensions(_e,_,et,tt,nt){var it,at;if(!_e)return{dimensionsDefine:normalizeDimensionsOption(nt),startIndex:at,dimensionsDetectedCount:it};if(_===SOURCE_FORMAT_ARRAY_ROWS){var ot=_e;tt==="auto"||tt==null?arrayRowsTravelFirst(function(dt){dt!=null&&dt!=="-"&&(isString$1(dt)?at==null&&(at=1):at=0)},et,ot,10):at=isNumber(tt)?tt:tt?1:0,!nt&&at===1&&(nt=[],arrayRowsTravelFirst(function(dt,ht){nt[ht]=dt!=null?dt+"":""},et,ot,1/0)),it=nt?nt.length:et===SERIES_LAYOUT_BY_ROW?ot.length:ot[0]?ot[0].length:null}else if(_===SOURCE_FORMAT_OBJECT_ROWS)nt||(nt=objectRowsCollectDimensions(_e));else if(_===SOURCE_FORMAT_KEYED_COLUMNS)nt||(nt=[],each$f(_e,function(dt,ht){nt.push(ht)}));else if(_===SOURCE_FORMAT_ORIGINAL){var st=getDataItemValue(_e[0]);it=isArray$1(st)&&st.length||1}return{startIndex:at,dimensionsDefine:normalizeDimensionsOption(nt),dimensionsDetectedCount:it}}function objectRowsCollectDimensions(_e){for(var _=0,et;_<_e.length&&!(et=_e[_++]););if(et)return keys(et)}function normalizeDimensionsOption(_e){if(_e){var _=createHashMap();return map$1(_e,function(et,tt){et=isObject$4(et)?et:{name:et};var nt={name:et.name,displayName:et.displayName,type:et.type};if(nt.name==null)return nt;nt.name+="",nt.displayName==null&&(nt.displayName=nt.name);var it=_.get(nt.name);return it?nt.name+="-"+it.count++:_.set(nt.name,{count:1}),nt})}}function arrayRowsTravelFirst(_e,_,et,tt){if(_===SERIES_LAYOUT_BY_ROW)for(var nt=0;nt<et.length&&nt<tt;nt++)_e(et[nt]?et[nt][0]:null,nt);else for(var it=et[0]||[],nt=0;nt<it.length&&nt<tt;nt++)_e(it[nt],nt)}function shouldRetrieveDataByName(_e){var _=_e.sourceFormat;return _===SOURCE_FORMAT_OBJECT_ROWS||_===SOURCE_FORMAT_KEYED_COLUMNS}var _a$1,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function _e(_,et){var tt=isSourceInstance(_)?_:createSourceFromSeriesDataOption(_);this._source=tt;var nt=this._data=tt.data;tt.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=et,this._data=nt),mountMethods(this,nt,tt)}return _e.prototype.getSource=function(){return this._source},_e.prototype.count=function(){return 0},_e.prototype.getItem=function(_,et){},_e.prototype.appendData=function(_){},_e.prototype.clean=function(){},_e.protoInitialize=function(){var _=_e.prototype;_.pure=!1,_.persistent=!0}(),_e.internalField=function(){var _;mountMethods=function(at,ot,st){var dt=st.sourceFormat,ht=st.seriesLayoutBy,ct=st.startIndex,ut=st.dimensionsDefine,ft=providerMethods[getMethodMapKey(dt,ht)];if(extend(at,ft),dt===SOURCE_FORMAT_TYPED_ARRAY)at.getItem=et,at.count=nt,at.fillStorage=tt;else{var gt=getRawSourceItemGetter(dt,ht);at.getItem=bind$2(gt,null,ot,ct,ut);var mt=getRawSourceDataCounter(dt,ht);at.count=bind$2(mt,null,ot,ct,ut)}};var et=function(at,ot){at=at-this._offset,ot=ot||[];for(var st=this._data,dt=this._dimSize,ht=dt*at,ct=0;ct<dt;ct++)ot[ct]=st[ht+ct];return ot},tt=function(at,ot,st,dt){for(var ht=this._data,ct=this._dimSize,ut=0;ut<ct;ut++){for(var ft=dt[ut],gt=ft[0]==null?1/0:ft[0],mt=ft[1]==null?-1/0:ft[1],vt=ot-at,yt=st[ut],bt=0;bt<vt;bt++){var _t=ht[bt*ct+ut];yt[at+bt]=_t,_t<gt&&(gt=_t),_t>mt&&(mt=_t)}ft[0]=gt,ft[1]=mt}},nt=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(_={},_[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:it},_[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},_[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:it},_[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(at){var ot=this._data;each$f(at,function(st,dt){for(var ht=ot[dt]||(ot[dt]=[]),ct=0;ct<(st||[]).length;ct++)ht.push(st[ct])})}},_[SOURCE_FORMAT_ORIGINAL]={appendData:it},_[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(at){this._data=at},clean:function(){this._offset+=this.count(),this._data=null}},_);function it(at){for(var ot=0;ot<at.length;ot++)this._data.push(at[ot])}}(),_e}(),getItemSimply=function(_e,_,et,tt){return _e[tt]},rawSourceItemGetterMap=(_a$1={},_a$1[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(_e,_,et,tt){return _e[tt+_]},_a$1[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(_e,_,et,tt,nt){tt+=_;for(var it=nt||[],at=_e,ot=0;ot<at.length;ot++){var st=at[ot];it[ot]=st?st[tt]:null}return it},_a$1[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a$1[SOURCE_FORMAT_KEYED_COLUMNS]=function(_e,_,et,tt,nt){for(var it=nt||[],at=0;at<et.length;at++){var ot=et[at].name,st=_e[ot];it[at]=st?st[tt]:null}return it},_a$1[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a$1);function getRawSourceItemGetter(_e,_){var et=rawSourceItemGetterMap[getMethodMapKey(_e,_)];return et}var countSimply=function(_e,_,et){return _e.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(_e,_,et){return Math.max(0,_e.length-_)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(_e,_,et){var tt=_e[0];return tt?Math.max(0,tt.length-_):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(_e,_,et){var tt=et[0].name,nt=_e[tt];return nt?nt.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(_e,_){var et=rawSourceDataCounterMap[getMethodMapKey(_e,_)];return et}var getRawValueSimply=function(_e,_,et){return _e[_]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(_e,_,et){return _e[et]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(_e,_,et){var tt=getDataItemValue(_e);return tt instanceof Array?tt[_]:tt},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(_e){var _=rawSourceValueGetterMap[_e];return _}function getMethodMapKey(_e,_){return _e===SOURCE_FORMAT_ARRAY_ROWS?_e+"_"+_:_e}function retrieveRawValue(_e,_,et){if(_e){var tt=_e.getRawDataItem(_);if(tt!=null){var nt=_e.getStore(),it=nt.getSource().sourceFormat;if(et!=null){var at=_e.getDimensionIndex(et),ot=nt.getDimensionProperty(at);return getRawSourceValueGetter(it)(tt,at,ot)}else{var st=tt;return it===SOURCE_FORMAT_ORIGINAL&&(st=getDataItemValue(tt)),st}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function _e(){}return _e.prototype.getDataParams=function(_,et){var tt=this.getData(et),nt=this.getRawValue(_,et),it=tt.getRawIndex(_),at=tt.getName(_),ot=tt.getRawDataItem(_),st=tt.getItemVisual(_,"style"),dt=st&&st[tt.getItemVisual(_,"drawType")||"fill"],ht=st&&st.stroke,ct=this.mainType,ut=ct==="series",ft=tt.userOutput&&tt.userOutput.get();return{componentType:ct,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:ut?this.subType:null,seriesIndex:this.seriesIndex,seriesId:ut?this.id:null,seriesName:ut?this.name:null,name:at,dataIndex:it,data:ot,dataType:et,value:nt,color:dt,borderColor:ht,dimensionNames:ft?ft.fullDimensions:null,encode:ft?ft.encode:null,$vars:["seriesName","name","value"]}},_e.prototype.getFormattedLabel=function(_,et,tt,nt,it,at){et=et||"normal";var ot=this.getData(tt),st=this.getDataParams(_,tt);if(at&&(st.value=at.interpolatedValue),nt!=null&&isArray$1(st.value)&&(st.value=st.value[nt]),!it){var dt=ot.getItemModel(_);it=dt.get(et==="normal"?["label","formatter"]:[et,"label","formatter"])}if(isFunction$3(it))return st.status=et,st.dimensionIndex=nt,it(st);if(isString$1(it)){var ht=formatTpl(it,st);return ht.replace(DIMENSION_LABEL_REG,function(ct,ut){var ft=ut.length,gt=ut;gt.charAt(0)==="["&&gt.charAt(ft-1)==="]"&&(gt=+gt.slice(1,ft-1));var mt=retrieveRawValue(ot,_,gt);if(at&&isArray$1(at.interpolatedValue)){var vt=ot.getDimensionIndex(gt);vt>=0&&(mt=at.interpolatedValue[vt])}return mt!=null?mt+"":""})}},_e.prototype.getRawValue=function(_,et){return retrieveRawValue(this.getData(et),_)},_e.prototype.formatTooltip=function(_,et,tt){},_e}();function normalizeTooltipFormatResult(_e){var _,et;return isObject$4(_e)?_e.type&&(et=_e):_=_e,{text:_,frag:et}}function createTask(_e){return new Task(_e)}var Task=function(){function _e(_){_=_||{},this._reset=_.reset,this._plan=_.plan,this._count=_.count,this._onDirty=_.onDirty,this._dirty=!0}return _e.prototype.perform=function(_){var et=this._upstream,tt=_&&_.skip;if(this._dirty&&et){var nt=this.context;nt.data=nt.outputData=et.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var it;this._plan&&!tt&&(it=this._plan(this.context));var at=ht(this._modBy),ot=this._modDataCount||0,st=ht(_&&_.modBy),dt=_&&_.modDataCount||0;(at!==st||ot!==dt)&&(it="reset");function ht(bt){return!(bt>=1)&&(bt=1),bt}var ct;(this._dirty||it==="reset")&&(this._dirty=!1,ct=this._doReset(tt)),this._modBy=st,this._modDataCount=dt;var ut=_&&_.step;if(et?this._dueEnd=et._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var ft=this._dueIndex,gt=Math.min(ut!=null?this._dueIndex+ut:1/0,this._dueEnd);if(!tt&&(ct||ft<gt)){var mt=this._progress;if(isArray$1(mt))for(var vt=0;vt<mt.length;vt++)this._doProgress(mt[vt],ft,gt,st,dt);else this._doProgress(mt,ft,gt,st,dt)}this._dueIndex=gt;var yt=this._settedOutputEnd!=null?this._settedOutputEnd:gt;this._outputDueEnd=yt}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},_e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},_e.prototype._doProgress=function(_,et,tt,nt,it){iterator.reset(et,tt,nt,it),this._callingProgress=_,this._callingProgress({start:et,end:tt,count:tt-et,next:iterator.next},this.context)},_e.prototype._doReset=function(_){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var et,tt;!_&&this._reset&&(et=this._reset(this.context),et&&et.progress&&(tt=et.forceFirstProgress,et=et.progress),isArray$1(et)&&!et.length&&(et=null)),this._progress=et,this._modBy=this._modDataCount=null;var nt=this._downstream;return nt&&nt.dirty(),tt},_e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},_e.prototype.pipe=function(_){(this._downstream!==_||this._dirty)&&(this._downstream=_,_._upstream=this,_.dirty())},_e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},_e.prototype.getUpstream=function(){return this._upstream},_e.prototype.getDownstream=function(){return this._downstream},_e.prototype.setOutputEnd=function(_){this._outputDueEnd=this._settedOutputEnd=_},_e}(),iterator=function(){var _e,_,et,tt,nt,it={reset:function(st,dt,ht,ct){_=st,_e=dt,et=ht,tt=ct,nt=Math.ceil(tt/et),it.next=et>1&&tt>0?ot:at}};return it;function at(){return _<_e?_++:null}function ot(){var st=_%nt*et+Math.ceil(_/nt),dt=_>=_e?null:st<tt?st:_;return _++,dt}}();function parseDataValue(_e,_){var et=_&&_.type;return et==="ordinal"?_e:(et==="time"&&!isNumber(_e)&&_e!=null&&_e!=="-"&&(_e=+parseDate(_e)),_e==null||_e===""?NaN:Number(_e))}var valueParserMap=createHashMap({number:function(_e){return parseFloat(_e)},time:function(_e){return+parseDate(_e)},trim:function(_e){return isString$1(_e)?trim$1(_e):_e}});function getRawValueParser(_e){return valueParserMap.get(_e)}var ORDER_COMPARISON_OP_MAP={lt:function(_e,_){return _e<_},lte:function(_e,_){return _e<=_},gt:function(_e,_){return _e>_},gte:function(_e,_){return _e>=_}},FilterOrderComparator=function(){function _e(_,et){if(!isNumber(et)){var tt="";throwError(tt)}this._opFn=ORDER_COMPARISON_OP_MAP[_],this._rvalFloat=numericToNumber(et)}return _e.prototype.evaluate=function(_){return isNumber(_)?this._opFn(_,this._rvalFloat):this._opFn(numericToNumber(_),this._rvalFloat)},_e}(),SortOrderComparator=function(){function _e(_,et){var tt=_==="desc";this._resultLT=tt?1:-1,et==null&&(et=tt?"min":"max"),this._incomparable=et==="min"?-1/0:1/0}return _e.prototype.evaluate=function(_,et){var tt=isNumber(_)?_:numericToNumber(_),nt=isNumber(et)?et:numericToNumber(et),it=isNaN(tt),at=isNaN(nt);if(it&&(tt=this._incomparable),at&&(nt=this._incomparable),it&&at){var ot=isString$1(_),st=isString$1(et);ot&&(tt=st?_:0),st&&(nt=ot?et:0)}return tt<nt?this._resultLT:tt>nt?-this._resultLT:0},_e}(),FilterEqualityComparator=function(){function _e(_,et){this._rval=et,this._isEQ=_,this._rvalTypeof=typeof et,this._rvalFloat=numericToNumber(et)}return _e.prototype.evaluate=function(_){var et=_===this._rval;if(!et){var tt=typeof _;tt!==this._rvalTypeof&&(tt==="number"||this._rvalTypeof==="number")&&(et=numericToNumber(_)===this._rvalFloat)}return this._isEQ?et:!et},_e}();function createFilterComparator(_e,_){return _e==="eq"||_e==="ne"?new FilterEqualityComparator(_e==="eq",_):hasOwn(ORDER_COMPARISON_OP_MAP,_e)?new FilterOrderComparator(_e,_):null}var ExternalSource=function(){function _e(){}return _e.prototype.getRawData=function(){throw new Error("not supported")},_e.prototype.getRawDataItem=function(_){throw new Error("not supported")},_e.prototype.cloneRawData=function(){},_e.prototype.getDimensionInfo=function(_){},_e.prototype.cloneAllDimensionInfo=function(){},_e.prototype.count=function(){},_e.prototype.retrieveValue=function(_,et){},_e.prototype.retrieveValueFromItem=function(_,et){},_e.prototype.convertValue=function(_,et){return parseDataValue(_,et)},_e}();function createExternalSource(_e,_){var et=new ExternalSource,tt=_e.data,nt=et.sourceFormat=_e.sourceFormat,it=_e.startIndex,at="";_e.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(at);var ot=[],st={},dt=_e.dimensionsDefine;if(dt)each$f(dt,function(mt,vt){var yt=mt.name,bt={index:vt,name:yt,displayName:mt.displayName};if(ot.push(bt),yt!=null){var _t="";hasOwn(st,yt)&&throwError(_t),st[yt]=bt}});else for(var ht=0;ht<_e.dimensionsDetectedCount;ht++)ot.push({index:ht});var ct=getRawSourceItemGetter(nt,SERIES_LAYOUT_BY_COLUMN);_.__isBuiltIn&&(et.getRawDataItem=function(mt){return ct(tt,it,ot,mt)},et.getRawData=bind$2(getRawData,null,_e)),et.cloneRawData=bind$2(cloneRawData,null,_e);var ut=getRawSourceDataCounter(nt,SERIES_LAYOUT_BY_COLUMN);et.count=bind$2(ut,null,tt,it,ot);var ft=getRawSourceValueGetter(nt);et.retrieveValue=function(mt,vt){var yt=ct(tt,it,ot,mt);return gt(yt,vt)};var gt=et.retrieveValueFromItem=function(mt,vt){if(mt!=null){var yt=ot[vt];if(yt)return ft(mt,vt,yt.name)}};return et.getDimensionInfo=bind$2(getDimensionInfo,null,ot,st),et.cloneAllDimensionInfo=bind$2(cloneAllDimensionInfo,null,ot),et}function getRawData(_e){var _=_e.sourceFormat;if(!isSupportedSourceFormat(_)){var et="";throwError(et)}return _e.data}function cloneRawData(_e){var _=_e.sourceFormat,et=_e.data;if(!isSupportedSourceFormat(_)){var tt="";throwError(tt)}if(_===SOURCE_FORMAT_ARRAY_ROWS){for(var nt=[],it=0,at=et.length;it<at;it++)nt.push(et[it].slice());return nt}else if(_===SOURCE_FORMAT_OBJECT_ROWS){for(var nt=[],it=0,at=et.length;it<at;it++)nt.push(extend({},et[it]));return nt}}function getDimensionInfo(_e,_,et){if(et!=null){if(isNumber(et)||!isNaN(et)&&!hasOwn(_,et))return _e[et];if(hasOwn(_,et))return _[et]}}function cloneAllDimensionInfo(_e){return clone$4(_e)}var externalTransformMap=createHashMap();function registerExternalTransform(_e){_e=clone$4(_e);var _=_e.type,et="";_||throwError(et);var tt=_.split(":");tt.length!==2&&throwError(et);var nt=!1;tt[0]==="echarts"&&(_=tt[1],nt=!0),_e.__isBuiltIn=nt,externalTransformMap.set(_,_e)}function applyDataTransform(_e,_,et){var tt=normalizeToArray(_e),nt=tt.length,it="";nt||throwError(it);for(var at=0,ot=nt;at<ot;at++){var st=tt[at];_=applySingleDataTransform(st,_),at!==ot-1&&(_.length=Math.max(_.length,1))}return _}function applySingleDataTransform(_e,_,et,tt){var nt="";_.length||throwError(nt),isObject$4(_e)||throwError(nt);var it=_e.type,at=externalTransformMap.get(it);at||throwError(nt);var ot=map$1(_,function(dt){return createExternalSource(dt,at)}),st=normalizeToArray(at.transform({upstream:ot[0],upstreamList:ot,config:clone$4(_e.config)}));return map$1(st,function(dt,ht){var ct="";isObject$4(dt)||throwError(ct),dt.data||throwError(ct);var ut=detectSourceFormat(dt.data);isSupportedSourceFormat(ut)||throwError(ct);var ft,gt=_[0];if(gt&&ht===0&&!dt.dimensions){var mt=gt.startIndex;mt&&(dt.data=gt.data.slice(0,mt).concat(dt.data)),ft={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:mt,dimensions:gt.metaRawOption.dimensions}}else ft={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:dt.dimensions};return createSource(dt.data,ft,null)})}function isSupportedSourceFormat(_e){return _e===SOURCE_FORMAT_ARRAY_ROWS||_e===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(_e){return _e>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(_e){var _=_e.constructor;return _===Array?_e.slice():new _(_e)}function prepareStore(_e,_,et,tt,nt){var it=dataCtors[et||"float"];if(nt){var at=_e[_],ot=at&&at.length;if(ot!==tt){for(var st=new it(tt),dt=0;dt<ot;dt++)st[dt]=at[dt];_e[_]=st}}else _e[_]=new it(tt)}var DataStore=function(){function _e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return _e.prototype.initData=function(_,et,tt){this._provider=_,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var nt=_.getSource(),it=this.defaultDimValueGetter=defaultDimValueGetters[nt.sourceFormat];this._dimValueGetter=tt||it,this._rawExtent=[],shouldRetrieveDataByName(nt),this._dimensions=map$1(et,function(at){return{type:at.type,property:at.property}}),this._initDataFromProvider(0,_.count())},_e.prototype.getProvider=function(){return this._provider},_e.prototype.getSource=function(){return this._provider.getSource()},_e.prototype.ensureCalculationDimension=function(_,et){var tt=this._calcDimNameToIdx,nt=this._dimensions,it=tt.get(_);if(it!=null){if(nt[it].type===et)return it}else it=nt.length;return nt[it]={type:et},tt.set(_,it),this._chunks[it]=new dataCtors[et||"float"](this._rawCount),this._rawExtent[it]=getInitialExtent(),it},_e.prototype.collectOrdinalMeta=function(_,et){var tt=this._chunks[_],nt=this._dimensions[_],it=this._rawExtent,at=nt.ordinalOffset||0,ot=tt.length;at===0&&(it[_]=getInitialExtent());for(var st=it[_],dt=at;dt<ot;dt++){var ht=tt[dt]=et.parseAndCollect(tt[dt]);isNaN(ht)||(st[0]=Math.min(ht,st[0]),st[1]=Math.max(ht,st[1]))}nt.ordinalMeta=et,nt.ordinalOffset=ot,nt.type="ordinal"},_e.prototype.getOrdinalMeta=function(_){var et=this._dimensions[_],tt=et.ordinalMeta;return tt},_e.prototype.getDimensionProperty=function(_){var et=this._dimensions[_];return et&&et.property},_e.prototype.appendData=function(_){var et=this._provider,tt=this.count();et.appendData(_);var nt=et.count();return et.persistent||(nt+=tt),tt<nt&&this._initDataFromProvider(tt,nt,!0),[tt,nt]},_e.prototype.appendValues=function(_,et){for(var tt=this._chunks,nt=this._dimensions,it=nt.length,at=this._rawExtent,ot=this.count(),st=ot+Math.max(_.length,et||0),dt=0;dt<it;dt++){var ht=nt[dt];prepareStore(tt,dt,ht.type,st,!0)}for(var ct=[],ut=ot;ut<st;ut++)for(var ft=ut-ot,gt=0;gt<it;gt++){var ht=nt[gt],mt=defaultDimValueGetters.arrayRows.call(this,_[ft]||ct,ht.property,ft,gt);tt[gt][ut]=mt;var vt=at[gt];mt<vt[0]&&(vt[0]=mt),mt>vt[1]&&(vt[1]=mt)}return this._rawCount=this._count=st,{start:ot,end:st}},_e.prototype._initDataFromProvider=function(_,et,tt){for(var nt=this._provider,it=this._chunks,at=this._dimensions,ot=at.length,st=this._rawExtent,dt=map$1(at,function(bt){return bt.property}),ht=0;ht<ot;ht++){var ct=at[ht];st[ht]||(st[ht]=getInitialExtent()),prepareStore(it,ht,ct.type,et,tt)}if(nt.fillStorage)nt.fillStorage(_,et,it,st);else for(var ut=[],ft=_;ft<et;ft++){ut=nt.getItem(ft,ut);for(var gt=0;gt<ot;gt++){var mt=it[gt],vt=this._dimValueGetter(ut,dt[gt],ft,gt);mt[ft]=vt;var yt=st[gt];vt<yt[0]&&(yt[0]=vt),vt>yt[1]&&(yt[1]=vt)}}!nt.persistent&&nt.clean&&nt.clean(),this._rawCount=this._count=et,this._extent=[]},_e.prototype.count=function(){return this._count},_e.prototype.get=function(_,et){if(!(et>=0&&et<this._count))return NaN;var tt=this._chunks[_];return tt?tt[this.getRawIndex(et)]:NaN},_e.prototype.getValues=function(_,et){var tt=[],nt=[];if(et==null){et=_,_=[];for(var it=0;it<this._dimensions.length;it++)nt.push(it)}else nt=_;for(var it=0,at=nt.length;it<at;it++)tt.push(this.get(nt[it],et));return tt},_e.prototype.getByRawIndex=function(_,et){if(!(et>=0&&et<this._rawCount))return NaN;var tt=this._chunks[_];return tt?tt[et]:NaN},_e.prototype.getSum=function(_){var et=this._chunks[_],tt=0;if(et)for(var nt=0,it=this.count();nt<it;nt++){var at=this.get(_,nt);isNaN(at)||(tt+=at)}return tt},_e.prototype.getMedian=function(_){var et=[];this.each([_],function(it){isNaN(it)||et.push(it)});var tt=et.sort(function(it,at){return it-at}),nt=this.count();return nt===0?0:nt%2===1?tt[(nt-1)/2]:(tt[nt/2]+tt[nt/2-1])/2},_e.prototype.indexOfRawIndex=function(_){if(_>=this._rawCount||_<0)return-1;if(!this._indices)return _;var et=this._indices,tt=et[_];if(tt!=null&&tt<this._count&&tt===_)return _;for(var nt=0,it=this._count-1;nt<=it;){var at=(nt+it)/2|0;if(et[at]<_)nt=at+1;else if(et[at]>_)it=at-1;else return at}return-1},_e.prototype.indicesOfNearest=function(_,et,tt){var nt=this._chunks,it=nt[_],at=[];if(!it)return at;tt==null&&(tt=1/0);for(var ot=1/0,st=-1,dt=0,ht=0,ct=this.count();ht<ct;ht++){var ut=this.getRawIndex(ht),ft=et-it[ut],gt=Math.abs(ft);gt<=tt&&((gt<ot||gt===ot&&ft>=0&&st<0)&&(ot=gt,st=ft,dt=0),ft===st&&(at[dt++]=ht))}return at.length=dt,at},_e.prototype.getIndices=function(){var _,et=this._indices;if(et){var tt=et.constructor,nt=this._count;if(tt===Array){_=new tt(nt);for(var it=0;it<nt;it++)_[it]=et[it]}else _=new tt(et.buffer,0,nt)}else{var tt=getIndicesCtor(this._rawCount);_=new tt(this.count());for(var it=0;it<_.length;it++)_[it]=it}return _},_e.prototype.filter=function(_,et){if(!this._count)return this;for(var tt=this.clone(),nt=tt.count(),it=getIndicesCtor(tt._rawCount),at=new it(nt),ot=[],st=_.length,dt=0,ht=_[0],ct=tt._chunks,ut=0;ut<nt;ut++){var ft=void 0,gt=tt.getRawIndex(ut);if(st===0)ft=et(ut);else if(st===1){var mt=ct[ht][gt];ft=et(mt,ut)}else{for(var vt=0;vt<st;vt++)ot[vt]=ct[_[vt]][gt];ot[vt]=ut,ft=et.apply(null,ot)}ft&&(at[dt++]=gt)}return dt<nt&&(tt._indices=at),tt._count=dt,tt._extent=[],tt._updateGetRawIdx(),tt},_e.prototype.selectRange=function(_){var et=this.clone(),tt=et._count;if(!tt)return this;var nt=keys(_),it=nt.length;if(!it)return this;var at=et.count(),ot=getIndicesCtor(et._rawCount),st=new ot(at),dt=0,ht=nt[0],ct=_[ht][0],ut=_[ht][1],ft=et._chunks,gt=!1;if(!et._indices){var mt=0;if(it===1){for(var vt=ft[nt[0]],yt=0;yt<tt;yt++){var bt=vt[yt];(bt>=ct&&bt<=ut||isNaN(bt))&&(st[dt++]=mt),mt++}gt=!0}else if(it===2){for(var vt=ft[nt[0]],_t=ft[nt[1]],xt=_[nt[1]][0],St=_[nt[1]][1],yt=0;yt<tt;yt++){var bt=vt[yt],Tt=_t[yt];(bt>=ct&&bt<=ut||isNaN(bt))&&(Tt>=xt&&Tt<=St||isNaN(Tt))&&(st[dt++]=mt),mt++}gt=!0}}if(!gt)if(it===1)for(var yt=0;yt<at;yt++){var wt=et.getRawIndex(yt),bt=ft[nt[0]][wt];(bt>=ct&&bt<=ut||isNaN(bt))&&(st[dt++]=wt)}else for(var yt=0;yt<at;yt++){for(var Ct=!0,wt=et.getRawIndex(yt),Et=0;Et<it;Et++){var At=nt[Et],bt=ft[At][wt];(bt<_[At][0]||bt>_[At][1])&&(Ct=!1)}Ct&&(st[dt++]=et.getRawIndex(yt))}return dt<at&&(et._indices=st),et._count=dt,et._extent=[],et._updateGetRawIdx(),et},_e.prototype.map=function(_,et){var tt=this.clone(_);return this._updateDims(tt,_,et),tt},_e.prototype.modify=function(_,et){this._updateDims(this,_,et)},_e.prototype._updateDims=function(_,et,tt){for(var nt=_._chunks,it=[],at=et.length,ot=_.count(),st=[],dt=_._rawExtent,ht=0;ht<et.length;ht++)dt[et[ht]]=getInitialExtent();for(var ct=0;ct<ot;ct++){for(var ut=_.getRawIndex(ct),ft=0;ft<at;ft++)st[ft]=nt[et[ft]][ut];st[at]=ct;var gt=tt&&tt.apply(null,st);if(gt!=null){typeof gt!="object"&&(it[0]=gt,gt=it);for(var ht=0;ht<gt.length;ht++){var mt=et[ht],vt=gt[ht],yt=dt[mt],bt=nt[mt];bt&&(bt[ut]=vt),vt<yt[0]&&(yt[0]=vt),vt>yt[1]&&(yt[1]=vt)}}}},_e.prototype.lttbDownSample=function(_,et){var tt=this.clone([_],!0),nt=tt._chunks,it=nt[_],at=this.count(),ot=0,st=Math.floor(1/et),dt=this.getRawIndex(0),ht,ct,ut,ft=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(at/st)+2)*2,at));ft[ot++]=dt;for(var gt=1;gt<at-1;gt+=st){for(var mt=Math.min(gt+st,at-1),vt=Math.min(gt+st*2,at),yt=(vt+mt)/2,bt=0,_t=mt;_t<vt;_t++){var xt=this.getRawIndex(_t),St=it[xt];isNaN(St)||(bt+=St)}bt/=vt-mt;var Tt=gt,wt=Math.min(gt+st,at),Ct=gt-1,Et=it[dt];ht=-1,ut=Tt;for(var At=-1,Pt=0,_t=Tt;_t<wt;_t++){var xt=this.getRawIndex(_t),St=it[xt];if(isNaN(St)){Pt++,At<0&&(At=xt);continue}ct=Math.abs((Ct-yt)*(St-Et)-(Ct-_t)*(bt-Et)),ct>ht&&(ht=ct,ut=xt)}Pt>0&&Pt<wt-Tt&&(ft[ot++]=Math.min(At,ut),ut=Math.max(At,ut)),ft[ot++]=ut,dt=ut}return ft[ot++]=this.getRawIndex(at-1),tt._count=ot,tt._indices=ft,tt.getRawIndex=this._getRawIdx,tt},_e.prototype.minmaxDownSample=function(_,et){for(var tt=this.clone([_],!0),nt=tt._chunks,it=Math.floor(1/et),at=nt[_],ot=this.count(),st=new(getIndicesCtor(this._rawCount))(Math.ceil(ot/it)*2),dt=0,ht=0;ht<ot;ht+=it){var ct=ht,ut=at[this.getRawIndex(ct)],ft=ht,gt=at[this.getRawIndex(ft)],mt=it;ht+it>ot&&(mt=ot-ht);for(var vt=0;vt<mt;vt++){var yt=this.getRawIndex(ht+vt),bt=at[yt];bt<ut&&(ut=bt,ct=ht+vt),bt>gt&&(gt=bt,ft=ht+vt)}var _t=this.getRawIndex(ct),xt=this.getRawIndex(ft);ct<ft?(st[dt++]=_t,st[dt++]=xt):(st[dt++]=xt,st[dt++]=_t)}return tt._count=dt,tt._indices=st,tt._updateGetRawIdx(),tt},_e.prototype.downSample=function(_,et,tt,nt){for(var it=this.clone([_],!0),at=it._chunks,ot=[],st=Math.floor(1/et),dt=at[_],ht=this.count(),ct=it._rawExtent[_]=getInitialExtent(),ut=new(getIndicesCtor(this._rawCount))(Math.ceil(ht/st)),ft=0,gt=0;gt<ht;gt+=st){st>ht-gt&&(st=ht-gt,ot.length=st);for(var mt=0;mt<st;mt++){var vt=this.getRawIndex(gt+mt);ot[mt]=dt[vt]}var yt=tt(ot),bt=this.getRawIndex(Math.min(gt+nt(ot,yt)||0,ht-1));dt[bt]=yt,yt<ct[0]&&(ct[0]=yt),yt>ct[1]&&(ct[1]=yt),ut[ft++]=bt}return it._count=ft,it._indices=ut,it._updateGetRawIdx(),it},_e.prototype.each=function(_,et){if(this._count)for(var tt=_.length,nt=this._chunks,it=0,at=this.count();it<at;it++){var ot=this.getRawIndex(it);switch(tt){case 0:et(it);break;case 1:et(nt[_[0]][ot],it);break;case 2:et(nt[_[0]][ot],nt[_[1]][ot],it);break;default:for(var st=0,dt=[];st<tt;st++)dt[st]=nt[_[st]][ot];dt[st]=it,et.apply(null,dt)}}},_e.prototype.getDataExtent=function(_){var et=this._chunks[_],tt=getInitialExtent();if(!et)return tt;var nt=this.count(),it=!this._indices,at;if(it)return this._rawExtent[_].slice();if(at=this._extent[_],at)return at.slice();at=tt;for(var ot=at[0],st=at[1],dt=0;dt<nt;dt++){var ht=this.getRawIndex(dt),ct=et[ht];ct<ot&&(ot=ct),ct>st&&(st=ct)}return at=[ot,st],this._extent[_]=at,at},_e.prototype.getRawDataItem=function(_){var et=this.getRawIndex(_);if(this._provider.persistent)return this._provider.getItem(et);for(var tt=[],nt=this._chunks,it=0;it<nt.length;it++)tt.push(nt[it][et]);return tt},_e.prototype.clone=function(_,et){var tt=new _e,nt=this._chunks,it=_&&reduce(_,function(ot,st){return ot[st]=!0,ot},{});if(it)for(var at=0;at<nt.length;at++)tt._chunks[at]=it[at]?cloneChunk(nt[at]):nt[at];else tt._chunks=nt;return this._copyCommonProps(tt),et||(tt._indices=this._cloneIndices()),tt._updateGetRawIdx(),tt},_e.prototype._copyCommonProps=function(_){_._count=this._count,_._rawCount=this._rawCount,_._provider=this._provider,_._dimensions=this._dimensions,_._extent=clone$4(this._extent),_._rawExtent=clone$4(this._rawExtent)},_e.prototype._cloneIndices=function(){if(this._indices){var _=this._indices.constructor,et=void 0;if(_===Array){var tt=this._indices.length;et=new _(tt);for(var nt=0;nt<tt;nt++)et[nt]=this._indices[nt]}else et=new _(this._indices);return et}return null},_e.prototype._getRawIdxIdentity=function(_){return _},_e.prototype._getRawIdx=function(_){return _<this._count&&_>=0?this._indices[_]:-1},_e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},_e.internalField=function(){function _(et,tt,nt,it){return parseDataValue(et[it],this._dimensions[it])}defaultDimValueGetters={arrayRows:_,objectRows:function(et,tt,nt,it){return parseDataValue(et[tt],this._dimensions[it])},keyedColumns:_,original:function(et,tt,nt,it){var at=et&&(et.value==null?et:et.value);return parseDataValue(at instanceof Array?at[it]:at,this._dimensions[it])},typedArray:function(et,tt,nt,it){return et[it]}}}(),_e}(),SourceManager=function(){function _e(_){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=_}return _e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},_e.prototype._setLocalSource=function(_,et){this._sourceList=_,this._upstreamSignList=et,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},_e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},_e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},_e.prototype._createSource=function(){this._setLocalSource([],[]);var _=this._sourceHost,et=this._getUpstreamSourceManagers(),tt=!!et.length,nt,it;if(isSeries(_)){var at=_,ot=void 0,st=void 0,dt=void 0;if(tt){var ht=et[0];ht.prepareSource(),dt=ht.getSource(),ot=dt.data,st=dt.sourceFormat,it=[ht._getVersionSign()]}else ot=at.get("data",!0),st=isTypedArray(ot)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,it=[];var ct=this._getSourceMetaRawOption()||{},ut=dt&&dt.metaRawOption||{},ft=retrieve2(ct.seriesLayoutBy,ut.seriesLayoutBy)||null,gt=retrieve2(ct.sourceHeader,ut.sourceHeader),mt=retrieve2(ct.dimensions,ut.dimensions),vt=ft!==ut.seriesLayoutBy||!!gt!=!!ut.sourceHeader||mt;nt=vt?[createSource(ot,{seriesLayoutBy:ft,sourceHeader:gt,dimensions:mt},st)]:[]}else{var yt=_;if(tt){var bt=this._applyTransform(et);nt=bt.sourceList,it=bt.upstreamSignList}else{var _t=yt.get("source",!0);nt=[createSource(_t,this._getSourceMetaRawOption(),null)],it=[]}}this._setLocalSource(nt,it)},_e.prototype._applyTransform=function(_){var et=this._sourceHost,tt=et.get("transform",!0),nt=et.get("fromTransformResult",!0);if(nt!=null){var it="";_.length!==1&&doThrow(it)}var at,ot=[],st=[];return each$f(_,function(dt){dt.prepareSource();var ht=dt.getSource(nt||0),ct="";nt!=null&&!ht&&doThrow(ct),ot.push(ht),st.push(dt._getVersionSign())}),tt?at=applyDataTransform(tt,ot,{datasetIndex:et.componentIndex}):nt!=null&&(at=[cloneSourceShallow(ot[0])]),{sourceList:at,upstreamSignList:st}},_e.prototype._isDirty=function(){if(this._dirty)return!0;for(var _=this._getUpstreamSourceManagers(),et=0;et<_.length;et++){var tt=_[et];if(tt._isDirty()||this._upstreamSignList[et]!==tt._getVersionSign())return!0}},_e.prototype.getSource=function(_){_=_||0;var et=this._sourceList[_];if(!et){var tt=this._getUpstreamSourceManagers();return tt[0]&&tt[0].getSource(_)}return et},_e.prototype.getSharedDataStore=function(_){var et=_.makeStoreSchema();return this._innerGetDataStore(et.dimensions,_.source,et.hash)},_e.prototype._innerGetDataStore=function(_,et,tt){var nt=0,it=this._storeList,at=it[nt];at||(at=it[nt]={});var ot=at[tt];if(!ot){var st=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&st?ot=st._innerGetDataStore(_,et,tt):(ot=new DataStore,ot.initData(new DefaultDataProvider(et,_.length),_)),at[tt]=ot}return ot},_e.prototype._getUpstreamSourceManagers=function(){var _=this._sourceHost;if(isSeries(_)){var et=querySeriesUpstreamDatasetModel(_);return et?[et.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(_),function(tt){return tt.getSourceManager()})},_e.prototype._getSourceMetaRawOption=function(){var _=this._sourceHost,et,tt,nt;if(isSeries(_))et=_.get("seriesLayoutBy",!0),tt=_.get("sourceHeader",!0),nt=_.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var it=_;et=it.get("seriesLayoutBy",!0),tt=it.get("sourceHeader",!0),nt=it.get("dimensions",!0)}return{seriesLayoutBy:et,sourceHeader:tt,dimensions:nt}},_e}();function disableTransformOptionMerge(_e){var _=_e.option.transform;_&&setAsPrimitive(_e.option.transform)}function isSeries(_e){return _e.mainType==="series"}function doThrow(_e){throw new Error(_e)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(_e){var _=_e.lineHeight;return _==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(_+"")+"px"}function getTooltipTextStyle(_e,_){var et=_e.color||"#6e7079",tt=_e.fontSize||12,nt=_e.fontWeight||"400",it=_e.color||"#464646",at=_e.fontSize||14,ot=_e.fontWeight||"900";return _==="html"?{nameStyle:"font-size:"+encodeHTML(tt+"")+"px;color:"+encodeHTML(et)+";font-weight:"+encodeHTML(nt+""),valueStyle:"font-size:"+encodeHTML(at+"")+"px;color:"+encodeHTML(it)+";font-weight:"+encodeHTML(ot+"")}:{nameStyle:{fontSize:tt,fill:et,fontWeight:nt},valueStyle:{fontSize:at,fill:it,fontWeight:ot}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(_e,_){return _.type=_e,_}function isSectionFragment(_e){return _e.type==="section"}function getBuilder(_e){return isSectionFragment(_e)?buildSection:buildNameValue}function getBlockGapLevel(_e){if(isSectionFragment(_e)){var _=0,et=_e.blocks.length,tt=et>1||et>0&&!_e.noHeader;return each$f(_e.blocks,function(nt){var it=getBlockGapLevel(nt);it>=_&&(_=it+ +(tt&&(!it||isSectionFragment(nt)&&!nt.noHeader)))}),_}return 0}function buildSection(_e,_,et,tt){var nt=_.noHeader,it=getGap(getBlockGapLevel(_)),at=[],ot=_.blocks||[];assert(!ot||isArray$1(ot)),ot=ot||[];var st=_e.orderMode;if(_.sortBlocks&&st){ot=ot.slice();var dt={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(dt,st)){var ht=new SortOrderComparator(dt[st],null);ot.sort(function(mt,vt){return ht.evaluate(mt.sortParam,vt.sortParam)})}else st==="seriesDesc"&&ot.reverse()}each$f(ot,function(mt,vt){var yt=_.valueFormatter,bt=getBuilder(mt)(yt?extend(extend({},_e),{valueFormatter:yt}):_e,mt,vt>0?it.html:0,tt);bt!=null&&at.push(bt)});var ct=_e.renderMode==="richText"?at.join(it.richText):wrapBlockHTML(tt,at.join(""),nt?et:it.html);if(nt)return ct;var ut=makeValueReadable(_.header,"ordinal",_e.useUTC),ft=getTooltipTextStyle(tt,_e.renderMode).nameStyle,gt=getTooltipLineHeight(tt);return _e.renderMode==="richText"?wrapInlineNameRichText(_e,ut,ft)+it.richText+ct:wrapBlockHTML(tt,'<div style="'+ft+";"+gt+';">'+encodeHTML(ut)+"</div>"+ct,et)}function buildNameValue(_e,_,et,tt){var nt=_e.renderMode,it=_.noName,at=_.noValue,ot=!_.markerType,st=_.name,dt=_e.useUTC,ht=_.valueFormatter||_e.valueFormatter||function(xt){return xt=isArray$1(xt)?xt:[xt],map$1(xt,function(St,Tt){return makeValueReadable(St,isArray$1(ft)?ft[Tt]:ft,dt)})};if(!(it&&at)){var ct=ot?"":_e.markupStyleCreator.makeTooltipMarker(_.markerType,_.markerColor||"#333",nt),ut=it?"":makeValueReadable(st,"ordinal",dt),ft=_.valueType,gt=at?[]:ht(_.value,_.dataIndex),mt=!ot||!it,vt=!ot&&it,yt=getTooltipTextStyle(tt,nt),bt=yt.nameStyle,_t=yt.valueStyle;return nt==="richText"?(ot?"":ct)+(it?"":wrapInlineNameRichText(_e,ut,bt))+(at?"":wrapInlineValueRichText(_e,gt,mt,vt,_t)):wrapBlockHTML(tt,(ot?"":ct)+(it?"":wrapInlineNameHTML(ut,!ot,bt))+(at?"":wrapInlineValueHTML(gt,mt,vt,_t)),et)}}function buildTooltipMarkup(_e,_,et,tt,nt,it){if(_e){var at=getBuilder(_e),ot={useUTC:nt,renderMode:et,orderMode:tt,markupStyleCreator:_,valueFormatter:_e.valueFormatter};return at(ot,_e,0,it)}}function getGap(_e){return{html:HTML_GAPS[_e],richText:RICH_TEXT_GAPS[_e]}}function wrapBlockHTML(_e,_,et){var tt='<div style="clear:both"></div>',nt="margin: "+et+"px 0 0",it=getTooltipLineHeight(_e);return'<div style="'+nt+";"+it+';">'+_+tt+"</div>"}function wrapInlineNameHTML(_e,_,et){var tt=_?"margin-left:2px":"";return'<span style="'+et+";"+tt+'">'+encodeHTML(_e)+"</span>"}function wrapInlineValueHTML(_e,_,et,tt){var nt=et?"10px":"20px",it=_?"float:right;margin-left:"+nt:"";return _e=isArray$1(_e)?_e:[_e],'<span style="'+it+";"+tt+'">'+map$1(_e,function(at){return encodeHTML(at)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(_e,_,et){return _e.markupStyleCreator.wrapRichTextStyle(_,et)}function wrapInlineValueRichText(_e,_,et,tt,nt){var it=[nt],at=tt?10:20;return et&&it.push({padding:[0,0,0,at],align:"right"}),_e.markupStyleCreator.wrapRichTextStyle(isArray$1(_)?_.join("  "):_,it)}function retrieveVisualColorForTooltipMarker(_e,_){var et=_e.getData().getItemVisual(_,"style"),tt=et[_e.visualDrawType];return convertToColorString(tt)}function getPaddingFromTooltipModel(_e,_){var et=_e.get("padding");return et??(_==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function _e(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return _e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},_e.prototype.makeTooltipMarker=function(_,et,tt){var nt=tt==="richText"?this._generateStyleName():null,it=getTooltipMarker({color:et,type:_,renderMode:tt,markerId:nt});return isString$1(it)?it:(this.richTextStyles[nt]=it.style,it.content)},_e.prototype.wrapRichTextStyle=function(_,et){var tt={};isArray$1(et)?each$f(et,function(it){return extend(tt,it)}):extend(tt,et);var nt=this._generateStyleName();return this.richTextStyles[nt]=tt,"{"+nt+"|"+_+"}"},_e}();function defaultSeriesFormatTooltip(_e){var _=_e.series,et=_e.dataIndex,tt=_e.multipleSeries,nt=_.getData(),it=nt.mapDimensionsAll("defaultedTooltip"),at=it.length,ot=_.getRawValue(et),st=isArray$1(ot),dt=retrieveVisualColorForTooltipMarker(_,et),ht,ct,ut,ft;if(at>1||st&&!at){var gt=formatTooltipArrayValue(ot,_,et,it,dt);ht=gt.inlineValues,ct=gt.inlineValueTypes,ut=gt.blocks,ft=gt.inlineValues[0]}else if(at){var mt=nt.getDimensionInfo(it[0]);ft=ht=retrieveRawValue(nt,et,it[0]),ct=mt.type}else ft=ht=st?ot[0]:ot;var vt=isNameSpecified(_),yt=vt&&_.name||"",bt=nt.getName(et),_t=tt?yt:bt;return createTooltipMarkup("section",{header:yt,noHeader:tt||!vt,sortParam:ft,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:dt,name:_t,noName:!trim$1(_t),value:ht,valueType:ct,dataIndex:et})].concat(ut||[])})}function formatTooltipArrayValue(_e,_,et,tt,nt){var it=_.getData(),at=reduce(_e,function(ct,ut,ft){var gt=it.getDimensionInfo(ft);return ct=ct||gt&&gt.tooltip!==!1&&gt.displayName!=null},!1),ot=[],st=[],dt=[];tt.length?each$f(tt,function(ct){ht(retrieveRawValue(it,et,ct),ct)}):each$f(_e,ht);function ht(ct,ut){var ft=it.getDimensionInfo(ut);!ft||ft.otherDims.tooltip===!1||(at?dt.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:nt,name:ft.displayName,value:ct,valueType:ft.type})):(ot.push(ct),st.push(ft.type)))}return{inlineValues:ot,inlineValueTypes:st,blocks:dt}}var inner$k=makeInner();function getSelectionKey(_e,_){return _e.getName(_)||_e.getId(_)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et._selectedDataIndicesMap={},et}return _.prototype.init=function(et,tt,nt){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(et,nt);var it=inner$k(this).sourceManager=new SourceManager(this);it.prepareSource();var at=this.getInitialData(et,nt);wrapData(at,this),this.dataTask.context.data=at,inner$k(this).dataBeforeProcessed=at,autoSeriesName(this),this._initSelectedMapFromData(at)},_.prototype.mergeDefaultAndTheme=function(et,tt){var nt=fetchLayoutMode(this),it=nt?getLayoutParams(et):{},at=this.subType;ComponentModel.hasClass(at)&&(at+="Series"),merge$1(et,tt.getTheme().get(this.subType)),merge$1(et,this.getDefaultOption()),defaultEmphasis(et,"label",["show"]),this.fillDataTextStyle(et.data),nt&&mergeLayoutParam(et,it,nt)},_.prototype.mergeOption=function(et,tt){et=merge$1(this.option,et,!0),this.fillDataTextStyle(et.data);var nt=fetchLayoutMode(this);nt&&mergeLayoutParam(this.option,et,nt);var it=inner$k(this).sourceManager;it.dirty(),it.prepareSource();var at=this.getInitialData(et,tt);wrapData(at,this),this.dataTask.dirty(),this.dataTask.context.data=at,inner$k(this).dataBeforeProcessed=at,autoSeriesName(this),this._initSelectedMapFromData(at)},_.prototype.fillDataTextStyle=function(et){if(et&&!isTypedArray(et))for(var tt=["show"],nt=0;nt<et.length;nt++)et[nt]&&et[nt].label&&defaultEmphasis(et[nt],"label",tt)},_.prototype.getInitialData=function(et,tt){},_.prototype.appendData=function(et){var tt=this.getRawData();tt.appendData(et.data)},_.prototype.getData=function(et){var tt=getCurrentTask(this);if(tt){var nt=tt.context.data;return et==null||!nt.getLinkedData?nt:nt.getLinkedData(et)}else return inner$k(this).data},_.prototype.getAllData=function(){var et=this.getData();return et&&et.getLinkedDataAll?et.getLinkedDataAll():[{data:et}]},_.prototype.setData=function(et){var tt=getCurrentTask(this);if(tt){var nt=tt.context;nt.outputData=et,tt!==this.dataTask&&(nt.data=et)}inner$k(this).data=et},_.prototype.getEncode=function(){var et=this.get("encode",!0);if(et)return createHashMap(et)},_.prototype.getSourceManager=function(){return inner$k(this).sourceManager},_.prototype.getSource=function(){return this.getSourceManager().getSource()},_.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},_.prototype.getColorBy=function(){var et=this.get("colorBy");return et||"series"},_.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},_.prototype.getBaseAxis=function(){var et=this.coordinateSystem;return et&&et.getBaseAxis&&et.getBaseAxis()},_.prototype.formatTooltip=function(et,tt,nt){return defaultSeriesFormatTooltip({series:this,dataIndex:et,multipleSeries:tt})},_.prototype.isAnimationEnabled=function(){var et=this.ecModel;if(env.node&&!(et&&et.ssr))return!1;var tt=this.getShallow("animation");return tt&&this.getData().count()>this.getShallow("animationThreshold")&&(tt=!1),!!tt},_.prototype.restoreData=function(){this.dataTask.dirty()},_.prototype.getColorFromPalette=function(et,tt,nt){var it=this.ecModel,at=PaletteMixin.prototype.getColorFromPalette.call(this,et,tt,nt);return at||(at=it.getColorFromPalette(et,tt,nt)),at},_.prototype.coordDimToDataDim=function(et){return this.getRawData().mapDimensionsAll(et)},_.prototype.getProgressive=function(){return this.get("progressive")},_.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},_.prototype.select=function(et,tt){this._innerSelect(this.getData(tt),et)},_.prototype.unselect=function(et,tt){var nt=this.option.selectedMap;if(nt){var it=this.option.selectedMode,at=this.getData(tt);if(it==="series"||nt==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var ot=0;ot<et.length;ot++){var st=et[ot],dt=getSelectionKey(at,st);nt[dt]=!1,this._selectedDataIndicesMap[dt]=-1}}},_.prototype.toggleSelect=function(et,tt){for(var nt=[],it=0;it<et.length;it++)nt[0]=et[it],this.isSelected(et[it],tt)?this.unselect(nt,tt):this.select(nt,tt)},_.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var et=this._selectedDataIndicesMap,tt=keys(et),nt=[],it=0;it<tt.length;it++){var at=et[tt[it]];at>=0&&nt.push(at)}return nt},_.prototype.isSelected=function(et,tt){var nt=this.option.selectedMap;if(!nt)return!1;var it=this.getData(tt);return(nt==="all"||nt[getSelectionKey(it,et)])&&!it.getItemModel(et).get(["select","disabled"])},_.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var et=this.option.universalTransition;return et?et===!0?!0:et&&et.enabled:!1},_.prototype._innerSelect=function(et,tt){var nt,it,at=this.option,ot=at.selectedMode,st=tt.length;if(!(!ot||!st)){if(ot==="series")at.selectedMap="all";else if(ot==="multiple"){isObject$4(at.selectedMap)||(at.selectedMap={});for(var dt=at.selectedMap,ht=0;ht<st;ht++){var ct=tt[ht],ut=getSelectionKey(et,ct);dt[ut]=!0,this._selectedDataIndicesMap[ut]=et.getRawIndex(ct)}}else if(ot==="single"||ot===!0){var ft=tt[st-1],ut=getSelectionKey(et,ft);at.selectedMap=(nt={},nt[ut]=!0,nt),this._selectedDataIndicesMap=(it={},it[ut]=et.getRawIndex(ft),it)}}},_.prototype._initSelectedMapFromData=function(et){if(!this.option.selectedMap){var tt=[];et.hasItemOption&&et.each(function(nt){var it=et.getRawDataItem(nt);it&&it.selected&&tt.push(nt)}),tt.length>0&&this._innerSelect(et,tt)}},_.registerClass=function(et){return ComponentModel.registerClass(et)},_.protoInitialize=function(){var et=_.prototype;et.type="series.__base__",et.seriesIndex=0,et.ignoreStyleOnData=!1,et.hasSymbolVisual=!1,et.defaultSymbol="circle",et.visualStyleAccessPath="itemStyle",et.visualDrawType="fill"}(),_}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(_e){var _=_e.name;isNameSpecified(_e)||(_e.name=getSeriesAutoName(_e)||_)}function getSeriesAutoName(_e){var _=_e.getRawData(),et=_.mapDimensionsAll("seriesName"),tt=[];return each$f(et,function(nt){var it=_.getDimensionInfo(nt);it.displayName&&tt.push(it.displayName)}),tt.join(" ")}function dataTaskCount(_e){return _e.model.getRawData().count()}function dataTaskReset(_e){var _=_e.model;return _.setData(_.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(_e,_){_.outputData&&_e.end>_.outputData.count()&&_.model.getRawData().cloneShallow(_.outputData)}function wrapData(_e,_){each$f(concatArray(_e.CHANGABLE_METHODS,_e.DOWNSAMPLE_METHODS),function(et){_e.wrapMethod(et,curry$1(onDataChange,_))})}function onDataChange(_e,_){var et=getCurrentTask(_e);return et&&et.setOutputEnd((_||this).count()),_}function getCurrentTask(_e){var _=(_e.ecModel||{}).scheduler,et=_&&_.getPipeline(_e.uid);if(et){var tt=et.currentTask;if(tt){var nt=tt.agentStubMap;nt&&(tt=nt.get(_e.uid))}return tt}}var ComponentView=function(){function _e(){this.group=new Group$3,this.uid=getUID("viewComponent")}return _e.prototype.init=function(_,et){},_e.prototype.render=function(_,et,tt,nt){},_e.prototype.dispose=function(_,et){},_e.prototype.updateView=function(_,et,tt,nt){},_e.prototype.updateLayout=function(_,et,tt,nt){},_e.prototype.updateVisual=function(_,et,tt,nt){},_e.prototype.toggleBlurSeries=function(_,et,tt){},_e.prototype.eachRendered=function(_){var et=this.group;et&&et.traverse(_)},_e}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var _e=makeInner();return function(_){var et=_e(_),tt=_.pipelineContext,nt=!!et.large,it=!!et.progressiveRender,at=et.large=!!(tt&&tt.large),ot=et.progressiveRender=!!(tt&&tt.progressiveRender);return(nt!==at||it!==ot)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function _e(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return _e.prototype.init=function(_,et){},_e.prototype.render=function(_,et,tt,nt){},_e.prototype.highlight=function(_,et,tt,nt){var it=_.getData(nt&&nt.dataType);it&&toggleHighlight(it,nt,"emphasis")},_e.prototype.downplay=function(_,et,tt,nt){var it=_.getData(nt&&nt.dataType);it&&toggleHighlight(it,nt,"normal")},_e.prototype.remove=function(_,et){this.group.removeAll()},_e.prototype.dispose=function(_,et){},_e.prototype.updateView=function(_,et,tt,nt){this.render(_,et,tt,nt)},_e.prototype.updateLayout=function(_,et,tt,nt){this.render(_,et,tt,nt)},_e.prototype.updateVisual=function(_,et,tt,nt){this.render(_,et,tt,nt)},_e.prototype.eachRendered=function(_){traverseElements(this.group,_)},_e.markUpdateMethod=function(_,et){inner$j(_).updateMethod=et},_e.protoInitialize=function(){var _=_e.prototype;_.type="chart"}(),_e}();function elSetState(_e,_,et){_e&&isHighDownDispatcher(_e)&&(_==="emphasis"?enterEmphasis:leaveEmphasis)(_e,et)}function toggleHighlight(_e,_,et){var tt=queryDataIndex(_e,_),nt=_&&_.highlightKey!=null?getHighlightDigit(_.highlightKey):null;tt!=null?each$f(normalizeToArray(tt),function(it){elSetState(_e.getItemGraphicEl(it),et,nt)}):_e.eachItemGraphicEl(function(it){elSetState(it,et,nt)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(_e){return renderPlanner(_e.model)}function renderTaskReset(_e){var _=_e.model,et=_e.ecModel,tt=_e.api,nt=_e.payload,it=_.pipelineContext.progressiveRender,at=_e.view,ot=nt&&inner$j(nt).updateMethod,st=it?"incrementalPrepareRender":ot&&at[ot]?ot:"render";return st!=="render"&&at[st](_,et,tt,nt),progressMethodMap[st]}var progressMethodMap={incrementalPrepareRender:{progress:function(_e,_){_.view.incrementalRender(_e,_.model,_.ecModel,_.api,_.payload)}},render:{forceFirstProgress:!0,progress:function(_e,_){_.view.render(_.model,_.ecModel,_.api,_.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(_e,_,et){var tt,nt=0,it=0,at=null,ot,st,dt,ht;_=_||0;function ct(){it=new Date().getTime(),at=null,_e.apply(st,dt||[])}var ut=function(){for(var ft=[],gt=0;gt<arguments.length;gt++)ft[gt]=arguments[gt];tt=new Date().getTime(),st=this,dt=ft;var mt=ht||_,vt=ht||et;ht=null,ot=tt-(vt?nt:it)-mt,clearTimeout(at),vt?at=setTimeout(ct,mt):ot>=0?ct():at=setTimeout(ct,-ot),nt=tt};return ut.clear=function(){at&&(clearTimeout(at),at=null)},ut.debounceNextCall=function(ft){ht=ft},ut}function createOrUpdate(_e,_,et,tt){var nt=_e[_];if(nt){var it=nt[ORIGIN_METHOD]||nt,at=nt[THROTTLE_TYPE],ot=nt[RATE];if(ot!==et||at!==tt){if(et==null||!tt)return _e[_]=it;nt=_e[_]=throttle(it,et,tt==="debounce"),nt[ORIGIN_METHOD]=it,nt[THROTTLE_TYPE]=tt,nt[RATE]=et}return nt}}function clear$2(_e,_){var et=_e[_];et&&et[ORIGIN_METHOD]&&(et.clear&&et.clear(),_e[_]=et[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(_e,_){var et=_e.visualStyleMapper||defaultStyleMappers[_];return et||(console.warn("Unknown style type '"+_+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(_e,_){var et=_e.visualDrawType||defaultColorKey[_];return et||(console.warn("Unknown style type '"+_+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(_e,_){var et=_e.getData(),tt=_e.visualStyleAccessPath||"itemStyle",nt=_e.getModel(tt),it=getStyleMapper(_e,tt),at=it(nt),ot=nt.getShallow("decal");ot&&(et.setVisual("decal",ot),ot.dirty=!0);var st=getDefaultColorKey(_e,tt),dt=at[st],ht=isFunction$3(dt)?dt:null,ct=at.fill==="auto"||at.stroke==="auto";if(!at[st]||ht||ct){var ut=_e.getColorFromPalette(_e.name,null,_.getSeriesCount());at[st]||(at[st]=ut,et.setVisual("colorFromPalette",!0)),at.fill=at.fill==="auto"||isFunction$3(at.fill)?ut:at.fill,at.stroke=at.stroke==="auto"||isFunction$3(at.stroke)?ut:at.stroke}if(et.setVisual("style",at),et.setVisual("drawType",st),!_.isSeriesFiltered(_e)&&ht)return et.setVisual("colorFromPalette",!1),{dataEach:function(ft,gt){var mt=_e.getDataParams(gt),vt=extend({},at);vt[st]=ht(mt),ft.setItemVisual(gt,"style",vt)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(_e,_){if(!(_e.ignoreStyleOnData||_.isSeriesFiltered(_e))){var et=_e.getData(),tt=_e.visualStyleAccessPath||"itemStyle",nt=getStyleMapper(_e,tt),it=et.getVisual("drawType");return{dataEach:et.hasItemOption?function(at,ot){var st=at.getRawDataItem(ot);if(st&&st[tt]){sharedModel.option=st[tt];var dt=nt(sharedModel),ht=at.ensureUniqueItemVisual(ot,"style");extend(ht,dt),sharedModel.option.decal&&(at.setItemVisual(ot,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),it in dt&&at.setItemVisual(ot,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(_e){var _=createHashMap();_e.eachSeries(function(et){var tt=et.getColorBy();if(!et.isColorBySeries()){var nt=et.type+"-"+tt,it=_.get(nt);it||(it={},_.set(nt,it)),inner$i(et).scope=it}}),_e.eachSeries(function(et){if(!(et.isColorBySeries()||_e.isSeriesFiltered(et))){var tt=et.getRawData(),nt={},it=et.getData(),at=inner$i(et).scope,ot=et.visualStyleAccessPath||"itemStyle",st=getDefaultColorKey(et,ot);it.each(function(dt){var ht=it.getRawIndex(dt);nt[ht]=dt}),tt.each(function(dt){var ht=nt[dt],ct=it.getItemVisual(ht,"colorFromPalette");if(ct){var ut=it.ensureUniqueItemVisual(ht,"style"),ft=tt.getName(dt)||dt+"",gt=tt.count();ut[st]=et.getColorFromPalette(ft,at,gt)}})}})}},PI$5=Math.PI;function defaultLoading(_e,_){_=_||{},defaults(_,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var et=new Group$3,tt=new Rect$2({style:{fill:_.maskColor},zlevel:_.zlevel,z:1e4});et.add(tt);var nt=new ZRText({style:{text:_.text,fill:_.textColor,fontSize:_.fontSize,fontWeight:_.fontWeight,fontStyle:_.fontStyle,fontFamily:_.fontFamily},zlevel:_.zlevel,z:10001}),it=new Rect$2({style:{fill:"none"},textContent:nt,textConfig:{position:"right",distance:10},zlevel:_.zlevel,z:10001});et.add(it);var at;return _.showSpinner&&(at=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:_.spinnerRadius},style:{stroke:_.color,lineCap:"round",lineWidth:_.lineWidth},zlevel:_.zlevel,z:10001}),at.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),at.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),et.add(at)),et.resize=function(){var ot=nt.getBoundingRect().width,st=_.showSpinner?_.spinnerRadius:0,dt=(_e.getWidth()-st*2-(_.showSpinner&&ot?10:0)-ot)/2-(_.showSpinner&&ot?0:5+ot/2)+(_.showSpinner?0:ot/2)+(ot?0:st),ht=_e.getHeight()/2;_.showSpinner&&at.setShape({cx:dt,cy:ht}),it.setShape({x:dt-st,y:ht-st,width:st*2,height:st*2}),tt.setShape({x:0,y:0,width:_e.getWidth(),height:_e.getHeight()})},et.resize(),et}var Scheduler=function(){function _e(_,et,tt,nt){this._stageTaskMap=createHashMap(),this.ecInstance=_,this.api=et,tt=this._dataProcessorHandlers=tt.slice(),nt=this._visualHandlers=nt.slice(),this._allHandlers=tt.concat(nt)}return _e.prototype.restoreData=function(_,et){_.restoreData(et),this._stageTaskMap.each(function(tt){var nt=tt.overallTask;nt&&nt.dirty()})},_e.prototype.getPerformArgs=function(_,et){if(_.__pipeline){var tt=this._pipelineMap.get(_.__pipeline.id),nt=tt.context,it=!et&&tt.progressiveEnabled&&(!nt||nt.progressiveRender)&&_.__idxInPipeline>tt.blockIndex,at=it?tt.step:null,ot=nt&&nt.modDataCount,st=ot!=null?Math.ceil(ot/at):null;return{step:at,modBy:st,modDataCount:ot}}},_e.prototype.getPipeline=function(_){return this._pipelineMap.get(_)},_e.prototype.updateStreamModes=function(_,et){var tt=this._pipelineMap.get(_.uid),nt=_.getData(),it=nt.count(),at=tt.progressiveEnabled&&et.incrementalPrepareRender&&it>=tt.threshold,ot=_.get("large")&&it>=_.get("largeThreshold"),st=_.get("progressiveChunkMode")==="mod"?it:null;_.pipelineContext=tt.context={progressiveRender:at,modDataCount:st,large:ot}},_e.prototype.restorePipelines=function(_){var et=this,tt=et._pipelineMap=createHashMap();_.eachSeries(function(nt){var it=nt.getProgressive(),at=nt.uid;tt.set(at,{id:at,head:null,tail:null,threshold:nt.getProgressiveThreshold(),progressiveEnabled:it&&!(nt.preventIncremental&&nt.preventIncremental()),blockIndex:-1,step:Math.round(it||700),count:0}),et._pipe(nt,nt.dataTask)})},_e.prototype.prepareStageTasks=function(){var _=this._stageTaskMap,et=this.api.getModel(),tt=this.api;each$f(this._allHandlers,function(nt){var it=_.get(nt.uid)||_.set(nt.uid,{}),at="";assert(!(nt.reset&&nt.overallReset),at),nt.reset&&this._createSeriesStageTask(nt,it,et,tt),nt.overallReset&&this._createOverallStageTask(nt,it,et,tt)},this)},_e.prototype.prepareView=function(_,et,tt,nt){var it=_.renderTask,at=it.context;at.model=et,at.ecModel=tt,at.api=nt,it.__block=!_.incrementalPrepareRender,this._pipe(et,it)},_e.prototype.performDataProcessorTasks=function(_,et){this._performStageTasks(this._dataProcessorHandlers,_,et,{block:!0})},_e.prototype.performVisualTasks=function(_,et,tt){this._performStageTasks(this._visualHandlers,_,et,tt)},_e.prototype._performStageTasks=function(_,et,tt,nt){nt=nt||{};var it=!1,at=this;each$f(_,function(st,dt){if(!(nt.visualType&&nt.visualType!==st.visualType)){var ht=at._stageTaskMap.get(st.uid),ct=ht.seriesTaskMap,ut=ht.overallTask;if(ut){var ft,gt=ut.agentStubMap;gt.each(function(vt){ot(nt,vt)&&(vt.dirty(),ft=!0)}),ft&&ut.dirty(),at.updatePayload(ut,tt);var mt=at.getPerformArgs(ut,nt.block);gt.each(function(vt){vt.perform(mt)}),ut.perform(mt)&&(it=!0)}else ct&&ct.each(function(vt,yt){ot(nt,vt)&&vt.dirty();var bt=at.getPerformArgs(vt,nt.block);bt.skip=!st.performRawSeries&&et.isSeriesFiltered(vt.context.model),at.updatePayload(vt,tt),vt.perform(bt)&&(it=!0)})}});function ot(st,dt){return st.setDirty&&(!st.dirtyMap||st.dirtyMap.get(dt.__pipeline.id))}this.unfinished=it||this.unfinished},_e.prototype.performSeriesTasks=function(_){var et;_.eachSeries(function(tt){et=tt.dataTask.perform()||et}),this.unfinished=et||this.unfinished},_e.prototype.plan=function(){this._pipelineMap.each(function(_){var et=_.tail;do{if(et.__block){_.blockIndex=et.__idxInPipeline;break}et=et.getUpstream()}while(et)})},_e.prototype.updatePayload=function(_,et){et!=="remain"&&(_.context.payload=et)},_e.prototype._createSeriesStageTask=function(_,et,tt,nt){var it=this,at=et.seriesTaskMap,ot=et.seriesTaskMap=createHashMap(),st=_.seriesType,dt=_.getTargetSeries;_.createOnAllSeries?tt.eachRawSeries(ht):st?tt.eachRawSeriesByType(st,ht):dt&&dt(tt,nt).each(ht);function ht(ct){var ut=ct.uid,ft=ot.set(ut,at&&at.get(ut)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));ft.context={model:ct,ecModel:tt,api:nt,useClearVisual:_.isVisual&&!_.isLayout,plan:_.plan,reset:_.reset,scheduler:it},it._pipe(ct,ft)}},_e.prototype._createOverallStageTask=function(_,et,tt,nt){var it=this,at=et.overallTask=et.overallTask||createTask({reset:overallTaskReset});at.context={ecModel:tt,api:nt,overallReset:_.overallReset,scheduler:it};var ot=at.agentStubMap,st=at.agentStubMap=createHashMap(),dt=_.seriesType,ht=_.getTargetSeries,ct=!0,ut=!1,ft="";assert(!_.createOnAllSeries,ft),dt?tt.eachRawSeriesByType(dt,gt):ht?ht(tt,nt).each(gt):(ct=!1,each$f(tt.getSeries(),gt));function gt(mt){var vt=mt.uid,yt=st.set(vt,ot&&ot.get(vt)||(ut=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));yt.context={model:mt,overallProgress:ct},yt.agent=at,yt.__block=ct,it._pipe(mt,yt)}ut&&at.dirty()},_e.prototype._pipe=function(_,et){var tt=_.uid,nt=this._pipelineMap.get(tt);!nt.head&&(nt.head=et),nt.tail&&nt.tail.pipe(et),nt.tail=et,et.__idxInPipeline=nt.count++,et.__pipeline=nt},_e.wrapStageHandler=function(_,et){return isFunction$3(_)&&(_={overallReset:_,seriesType:detectSeriseType(_)}),_.uid=getUID("stageHandler"),et&&(_.visualType=et),_},_e}();function overallTaskReset(_e){_e.overallReset(_e.ecModel,_e.api,_e.payload)}function stubReset(_e){return _e.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(_e){return _e.plan?_e.plan(_e.model,_e.ecModel,_e.api,_e.payload):null}function seriesTaskReset(_e){_e.useClearVisual&&_e.data.clearAllVisual();var _=_e.resetDefines=normalizeToArray(_e.reset(_e.model,_e.ecModel,_e.api,_e.payload));return _.length>1?map$1(_,function(et,tt){return makeSeriesTaskProgress(tt)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(_e){return function(_,et){var tt=et.data,nt=et.resetDefines[_e];if(nt&&nt.dataEach)for(var it=_.start;it<_.end;it++)nt.dataEach(tt,it);else nt&&nt.progress&&nt.progress(_,tt)}}function seriesTaskCount(_e){return _e.data.count()}function detectSeriseType(_e){seriesType=null;try{_e(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(_e){seriesType=_e};ecModelMock.eachComponent=function(_e){_e.mainType==="series"&&_e.subType&&(seriesType=_e.subType)};function mockMethods(_e,_){for(var et in _.prototype)_e[et]=noop}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor},pageTextStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function _e(){}return _e.prototype.normalizeQuery=function(_){var et={},tt={},nt={};if(isString$1(_)){var it=parseClassType(_);et.mainType=it.main||null,et.subType=it.sub||null}else{var at=["Index","Name","Id"],ot={name:1,dataIndex:1,dataType:1};each$f(_,function(st,dt){for(var ht=!1,ct=0;ct<at.length;ct++){var ut=at[ct],ft=dt.lastIndexOf(ut);if(ft>0&&ft===dt.length-ut.length){var gt=dt.slice(0,ft);gt!=="data"&&(et.mainType=gt,et[ut.toLowerCase()]=st,ht=!0)}}ot.hasOwnProperty(dt)&&(tt[dt]=st,ht=!0),ht||(nt[dt]=st)})}return{cptQuery:et,dataQuery:tt,otherQuery:nt}},_e.prototype.filter=function(_,et){var tt=this.eventInfo;if(!tt)return!0;var nt=tt.targetEl,it=tt.packedEvent,at=tt.model,ot=tt.view;if(!at||!ot)return!0;var st=et.cptQuery,dt=et.dataQuery;return ht(st,at,"mainType")&&ht(st,at,"subType")&&ht(st,at,"index","componentIndex")&&ht(st,at,"name")&&ht(st,at,"id")&&ht(dt,it,"name")&&ht(dt,it,"dataIndex")&&ht(dt,it,"dataType")&&(!ot.filterForExposedEvent||ot.filterForExposedEvent(_,et.otherQuery,nt,it));function ht(ct,ut,ft,gt){return ct[ft]==null||ut[gt||ft]===ct[ft]}},_e.prototype.afterTrigger=function(){this.eventInfo=null},_e}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(_e,_){var et=_e.getData();if(_e.legendIcon&&et.setVisual("legendIcon",_e.legendIcon),!_e.hasSymbolVisual)return;for(var tt={},nt={},it=!1,at=0;at<SYMBOL_PROPS_WITH_CB.length;at++){var ot=SYMBOL_PROPS_WITH_CB[at],st=_e.get(ot);isFunction$3(st)?(it=!0,nt[ot]=st):tt[ot]=st}if(tt.symbol=tt.symbol||_e.defaultSymbol,et.setVisual(extend({legendIcon:_e.legendIcon||tt.symbol,symbolKeepAspect:_e.get("symbolKeepAspect")},tt)),_.isSeriesFiltered(_e))return;var dt=keys(nt);function ht(ct,ut){for(var ft=_e.getRawValue(ut),gt=_e.getDataParams(ut),mt=0;mt<dt.length;mt++){var vt=dt[mt];ct.setItemVisual(ut,vt,nt[vt](ft,gt))}}return{dataEach:it?ht:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(_e,_){if(!_e.hasSymbolVisual||_.isSeriesFiltered(_e))return;var et=_e.getData();function tt(nt,it){for(var at=nt.getItemModel(it),ot=0;ot<SYMBOL_PROPS.length;ot++){var st=SYMBOL_PROPS[ot],dt=at.getShallow(st,!0);dt!=null&&nt.setItemVisual(it,st,dt)}}return{dataEach:et.hasItemOption?tt:null}}};function getItemVisualFromData(_e,_,et){switch(et){case"color":var tt=_e.getItemVisual(_,"style");return tt[_e.getVisual("drawType")];case"opacity":return _e.getItemVisual(_,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return _e.getItemVisual(_,et)}}function getVisualFromData(_e,_){switch(_){case"color":var et=_e.getVisual("style");return et[_e.getVisual("drawType")];case"opacity":return _e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return _e.getVisual(_)}}function setItemVisualFromData(_e,_,et,tt){switch(et){case"color":var nt=_e.ensureUniqueItemVisual(_,"style");nt[_e.getVisual("drawType")]=tt,_e.setItemVisual(_,"colorFromPalette",!1);break;case"opacity":_e.ensureUniqueItemVisual(_,"style").opacity=tt;break;case"symbol":case"symbolSize":case"liftZ":_e.setItemVisual(_,et,tt);break}}function createLegacyDataSelectAction(_e,_){function et(tt,nt){var it=[];return tt.eachComponent({mainType:"series",subType:_e,query:nt},function(at){it.push(at.seriesIndex)}),it}each$f([[_e+"ToggleSelect","toggleSelect"],[_e+"Select","select"],[_e+"UnSelect","unselect"]],function(tt){_(tt[0],function(nt,it,at){nt=extend({},nt),at.dispatchAction(extend(nt,{type:tt[1],seriesIndex:et(it,nt)}))})})}function handleSeriesLegacySelectEvents(_e,_,et,tt,nt){var it=_e+_;et.isSilent(it)||tt.eachComponent({mainType:"series",subType:"pie"},function(at){for(var ot=at.seriesIndex,st=at.option.selectedMap,dt=nt.selected,ht=0;ht<dt.length;ht++)if(dt[ht].seriesIndex===ot){var ct=at.getData(),ut=queryDataIndex(ct,nt.fromActionPayload);et.trigger(it,{type:it,seriesId:at.id,name:isArray$1(ut)?ct.getName(ut[0]):ct.getName(ut),selected:isString$1(st)?st:extend({},st)})}})}function handleLegacySelectEvents(_e,_,et){_e.on("selectchanged",function(tt){var nt=et.getModel();tt.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",_,nt,tt),handleSeriesLegacySelectEvents("pie","selectchanged",_,nt,tt)):tt.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",_,nt,tt),handleSeriesLegacySelectEvents("pie","selected",_,nt,tt)):tt.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",_,nt,tt),handleSeriesLegacySelectEvents("pie","unselected",_,nt,tt))})}function findEventDispatcher(_e,_,et){for(var tt;_e&&!(_(_e)&&(tt=_e,et));)_e=_e.__hostTarget||_e.parent;return tt}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function _e(){this._id="__ec_inner_"+wmUniqueIndex++}return _e.prototype.get=function(_){return this._guard(_)[this._id]},_e.prototype.set=function(_,et){var tt=this._guard(_);return supportDefineProperty?Object.defineProperty(tt,this._id,{value:et,enumerable:!1,configurable:!0}):tt[this._id]=et,this},_e.prototype.delete=function(_){return this.has(_)?(delete this._guard(_)[this._id],!0):!1},_e.prototype.has=function(_){return!!this._guard(_)[this._id]},_e.prototype._guard=function(_){if(_!==Object(_))throw TypeError("Value of WeakMap is not a non-null object.");return _},_e}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(_e,_){var et=_.cx,tt=_.cy,nt=_.width/2,it=_.height/2;_e.moveTo(et,tt-it),_e.lineTo(et+nt,tt+it),_e.lineTo(et-nt,tt+it),_e.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(_e,_){var et=_.cx,tt=_.cy,nt=_.width/2,it=_.height/2;_e.moveTo(et,tt-it),_e.lineTo(et+nt,tt),_e.lineTo(et,tt+it),_e.lineTo(et-nt,tt),_e.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(_e,_){var et=_.x,tt=_.y,nt=_.width/5*3,it=Math.max(nt,_.height),at=nt/2,ot=at*at/(it-at),st=tt-it+at+ot,dt=Math.asin(ot/at),ht=Math.cos(dt)*at,ct=Math.sin(dt),ut=Math.cos(dt),ft=at*.6,gt=at*.7;_e.moveTo(et-ht,st+ot),_e.arc(et,st,at,Math.PI-dt,Math.PI*2+dt),_e.bezierCurveTo(et+ht-ct*ft,st+ot+ut*ft,et,tt-gt,et,tt),_e.bezierCurveTo(et,tt-gt,et-ht+ct*ft,st+ot+ut*ft,et-ht,st+ot),_e.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(_e,_){var et=_.height,tt=_.width,nt=_.x,it=_.y,at=tt/3*2;_e.moveTo(nt,it),_e.lineTo(nt+at,it+et),_e.lineTo(nt,it+et/4*3),_e.lineTo(nt-at,it+et),_e.lineTo(nt,it),_e.closePath()}}),symbolCtors={line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(_e,_,et,tt,nt){nt.x1=_e,nt.y1=_+tt/2,nt.x2=_e+et,nt.y2=_+tt/2},rect:function(_e,_,et,tt,nt){nt.x=_e,nt.y=_,nt.width=et,nt.height=tt},roundRect:function(_e,_,et,tt,nt){nt.x=_e,nt.y=_,nt.width=et,nt.height=tt,nt.r=Math.min(et,tt)/4},square:function(_e,_,et,tt,nt){var it=Math.min(et,tt);nt.x=_e,nt.y=_,nt.width=it,nt.height=it},circle:function(_e,_,et,tt,nt){nt.cx=_e+et/2,nt.cy=_+tt/2,nt.r=Math.min(et,tt)/2},diamond:function(_e,_,et,tt,nt){nt.cx=_e+et/2,nt.cy=_+tt/2,nt.width=et,nt.height=tt},pin:function(_e,_,et,tt,nt){nt.x=_e+et/2,nt.y=_+tt/2,nt.width=et,nt.height=tt},arrow:function(_e,_,et,tt,nt){nt.x=_e+et/2,nt.y=_+tt/2,nt.width=et,nt.height=tt},triangle:function(_e,_,et,tt,nt){nt.cx=_e+et/2,nt.cy=_+tt/2,nt.width=et,nt.height=tt}},symbolBuildProxies={};each$f(symbolCtors,function(_e,_){symbolBuildProxies[_]=new _e});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(_e,_,et){var tt=calculateTextPosition(_e,_,et),nt=this.shape;return nt&&nt.symbolType==="pin"&&_.position==="inside"&&(tt.y=et.y+et.height*.4),tt},buildPath:function(_e,_,et){var tt=_.symbolType;if(tt!=="none"){var nt=symbolBuildProxies[tt];nt||(tt="rect",nt=symbolBuildProxies[tt]),symbolShapeMakers[tt](_.x,_.y,_.width,_.height,nt.shape),nt.buildPath(_e,nt.shape,et)}}});function symbolPathSetColor(_e,_){if(this.type!=="image"){var et=this.style;this.__isEmptyBrush?(et.stroke=_e,et.fill=_||"#fff",et.lineWidth=2):this.shape.symbolType==="line"?et.stroke=_e:et.fill=_e,this.markRedraw()}}function createSymbol$1(_e,_,et,tt,nt,it,at){var ot=_e.indexOf("empty")===0;ot&&(_e=_e.substr(5,1).toLowerCase()+_e.substr(6));var st;return _e.indexOf("image://")===0?st=makeImage(_e.slice(8),new BoundingRect(_,et,tt,nt),at?"center":"cover"):_e.indexOf("path://")===0?st=makePath(_e.slice(7),{},new BoundingRect(_,et,tt,nt),at?"center":"cover"):st=new SymbolClz({shape:{symbolType:_e,x:_,y:et,width:tt,height:nt}}),st.__isEmptyBrush=ot,st.setColor=symbolPathSetColor,it&&st.setColor(it),st}function normalizeSymbolSize(_e){return isArray$1(_e)||(_e=[+_e,+_e]),[_e[0]||0,_e[1]||0]}function normalizeSymbolOffset(_e,_){if(_e!=null)return isArray$1(_e)||(_e=[_e,_e]),[parsePercent(_e[0],_[0])||0,parsePercent(retrieve2(_e[1],_e[0]),_[1])||0]}function isSafeNum(_e){return isFinite(_e)}function createLinearGradient(_e,_,et){var tt=_.x==null?0:_.x,nt=_.x2==null?1:_.x2,it=_.y==null?0:_.y,at=_.y2==null?0:_.y2;_.global||(tt=tt*et.width+et.x,nt=nt*et.width+et.x,it=it*et.height+et.y,at=at*et.height+et.y),tt=isSafeNum(tt)?tt:0,nt=isSafeNum(nt)?nt:1,it=isSafeNum(it)?it:0,at=isSafeNum(at)?at:0;var ot=_e.createLinearGradient(tt,it,nt,at);return ot}function createRadialGradient(_e,_,et){var tt=et.width,nt=et.height,it=Math.min(tt,nt),at=_.x==null?.5:_.x,ot=_.y==null?.5:_.y,st=_.r==null?.5:_.r;_.global||(at=at*tt+et.x,ot=ot*nt+et.y,st=st*it),at=isSafeNum(at)?at:.5,ot=isSafeNum(ot)?ot:.5,st=st>=0&&isSafeNum(st)?st:.5;var dt=_e.createRadialGradient(at,ot,0,at,ot,st);return dt}function getCanvasGradient(_e,_,et){for(var tt=_.type==="radial"?createRadialGradient(_e,_,et):createLinearGradient(_e,_,et),nt=_.colorStops,it=0;it<nt.length;it++)tt.addColorStop(nt[it].offset,nt[it].color);return tt}function isClipPathChanged(_e,_){if(_e===_||!_e&&!_)return!1;if(!_e||!_||_e.length!==_.length)return!0;for(var et=0;et<_e.length;et++)if(_e[et]!==_[et])return!0;return!1}function parseInt10(_e){return parseInt(_e,10)}function getSize$1(_e,_,et){var tt=["width","height"][_],nt=["clientWidth","clientHeight"][_],it=["paddingLeft","paddingTop"][_],at=["paddingRight","paddingBottom"][_];if(et[tt]!=null&&et[tt]!=="auto")return parseFloat(et[tt]);var ot=document.defaultView.getComputedStyle(_e);return(_e[nt]||parseInt10(ot[tt])||parseInt10(_e.style[tt]))-(parseInt10(ot[it])||0)-(parseInt10(ot[at])||0)|0}function normalizeLineDash(_e,_){return!_e||_e==="solid"||!(_>0)?null:_e==="dashed"?[4*_,2*_]:_e==="dotted"?[_]:isNumber(_e)?[_e]:isArray$1(_e)?_e:null}function getLineDash(_e){var _=_e.style,et=_.lineDash&&_.lineWidth>0&&normalizeLineDash(_.lineDash,_.lineWidth),tt=_.lineDashOffset;if(et){var nt=_.strokeNoScale&&_e.getLineScale?_e.getLineScale():1;nt&&nt!==1&&(et=map$1(et,function(it){return it/nt}),tt/=nt)}return[et,tt]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(_e){var _=_e.stroke;return!(_==null||_==="none"||!(_e.lineWidth>0))}function isValidStrokeFillStyle(_e){return typeof _e=="string"&&_e!=="none"}function styleHasFill(_e){var _=_e.fill;return _!=null&&_!=="none"}function doFillPath(_e,_){if(_.fillOpacity!=null&&_.fillOpacity!==1){var et=_e.globalAlpha;_e.globalAlpha=_.fillOpacity*_.opacity,_e.fill(),_e.globalAlpha=et}else _e.fill()}function doStrokePath(_e,_){if(_.strokeOpacity!=null&&_.strokeOpacity!==1){var et=_e.globalAlpha;_e.globalAlpha=_.strokeOpacity*_.opacity,_e.stroke(),_e.globalAlpha=et}else _e.stroke()}function createCanvasPattern(_e,_,et){var tt=createOrUpdateImage(_.image,_.__image,et);if(isImageReady(tt)){var nt=_e.createPattern(tt,_.repeat||"repeat");if(typeof DOMMatrix=="function"&&nt&&nt.setTransform){var it=new DOMMatrix;it.translateSelf(_.x||0,_.y||0),it.rotateSelf(0,0,(_.rotation||0)*RADIAN_TO_DEGREE),it.scaleSelf(_.scaleX||1,_.scaleY||1),nt.setTransform(it)}return nt}}function brushPath(_e,_,et,tt){var nt,it=styleHasStroke(et),at=styleHasFill(et),ot=et.strokePercent,st=ot<1,dt=!_.path;(!_.silent||st)&&dt&&_.createPathProxy();var ht=_.path||pathProxyForDraw,ct=_.__dirty;if(!tt){var ut=et.fill,ft=et.stroke,gt=at&&!!ut.colorStops,mt=it&&!!ft.colorStops,vt=at&&!!ut.image,yt=it&&!!ft.image,bt=void 0,_t=void 0,xt=void 0,St=void 0,Tt=void 0;(gt||mt)&&(Tt=_.getBoundingRect()),gt&&(bt=ct?getCanvasGradient(_e,ut,Tt):_.__canvasFillGradient,_.__canvasFillGradient=bt),mt&&(_t=ct?getCanvasGradient(_e,ft,Tt):_.__canvasStrokeGradient,_.__canvasStrokeGradient=_t),vt&&(xt=ct||!_.__canvasFillPattern?createCanvasPattern(_e,ut,_):_.__canvasFillPattern,_.__canvasFillPattern=xt),yt&&(St=ct||!_.__canvasStrokePattern?createCanvasPattern(_e,ft,_):_.__canvasStrokePattern,_.__canvasStrokePattern=xt),gt?_e.fillStyle=bt:vt&&(xt?_e.fillStyle=xt:at=!1),mt?_e.strokeStyle=_t:yt&&(St?_e.strokeStyle=St:it=!1)}var wt=_.getGlobalScale();ht.setScale(wt[0],wt[1],_.segmentIgnoreThreshold);var Ct,Et;_e.setLineDash&&et.lineDash&&(nt=getLineDash(_),Ct=nt[0],Et=nt[1]);var At=!0;(dt||ct&SHAPE_CHANGED_BIT)&&(ht.setDPR(_e.dpr),st?ht.setContext(null):(ht.setContext(_e),At=!1),ht.reset(),_.buildPath(ht,_.shape,tt),ht.toStatic(),_.pathUpdated()),At&&ht.rebuildPath(_e,st?ot:1),Ct&&(_e.setLineDash(Ct),_e.lineDashOffset=Et),tt||(et.strokeFirst?(it&&doStrokePath(_e,et),at&&doFillPath(_e,et)):(at&&doFillPath(_e,et),it&&doStrokePath(_e,et))),Ct&&_e.setLineDash([])}function brushImage(_e,_,et){var tt=_.__image=createOrUpdateImage(et.image,_.__image,_,_.onload);if(!(!tt||!isImageReady(tt))){var nt=et.x||0,it=et.y||0,at=_.getWidth(),ot=_.getHeight(),st=tt.width/tt.height;if(at==null&&ot!=null?at=ot*st:ot==null&&at!=null?ot=at/st:at==null&&ot==null&&(at=tt.width,ot=tt.height),et.sWidth&&et.sHeight){var dt=et.sx||0,ht=et.sy||0;_e.drawImage(tt,dt,ht,et.sWidth,et.sHeight,nt,it,at,ot)}else if(et.sx&&et.sy){var dt=et.sx,ht=et.sy,ct=at-dt,ut=ot-ht;_e.drawImage(tt,dt,ht,ct,ut,nt,it,at,ot)}else _e.drawImage(tt,nt,it,at,ot)}}function brushText(_e,_,et){var tt,nt=et.text;if(nt!=null&&(nt+=""),nt){_e.font=et.font||DEFAULT_FONT,_e.textAlign=et.textAlign,_e.textBaseline=et.textBaseline;var it=void 0,at=void 0;_e.setLineDash&&et.lineDash&&(tt=getLineDash(_),it=tt[0],at=tt[1]),it&&(_e.setLineDash(it),_e.lineDashOffset=at),et.strokeFirst?(styleHasStroke(et)&&_e.strokeText(nt,et.x,et.y),styleHasFill(et)&&_e.fillText(nt,et.x,et.y)):(styleHasFill(et)&&_e.fillText(nt,et.x,et.y),styleHasStroke(et)&&_e.strokeText(nt,et.x,et.y)),it&&_e.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(_e,_,et,tt,nt){var it=!1;if(!tt&&(et=et||{},_===et))return!1;if(tt||_.opacity!==et.opacity){flushPathDrawn(_e,nt),it=!0;var at=Math.max(Math.min(_.opacity,1),0);_e.globalAlpha=isNaN(at)?DEFAULT_COMMON_STYLE.opacity:at}(tt||_.blend!==et.blend)&&(it||(flushPathDrawn(_e,nt),it=!0),_e.globalCompositeOperation=_.blend||DEFAULT_COMMON_STYLE.blend);for(var ot=0;ot<SHADOW_NUMBER_PROPS.length;ot++){var st=SHADOW_NUMBER_PROPS[ot];(tt||_[st]!==et[st])&&(it||(flushPathDrawn(_e,nt),it=!0),_e[st]=_e.dpr*(_[st]||0))}return(tt||_.shadowColor!==et.shadowColor)&&(it||(flushPathDrawn(_e,nt),it=!0),_e.shadowColor=_.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),it}function bindPathAndTextCommonStyle(_e,_,et,tt,nt){var it=getStyle(_,nt.inHover),at=tt?null:et&&getStyle(et,nt.inHover)||{};if(it===at)return!1;var ot=bindCommonProps(_e,it,at,tt,nt);if((tt||it.fill!==at.fill)&&(ot||(flushPathDrawn(_e,nt),ot=!0),isValidStrokeFillStyle(it.fill)&&(_e.fillStyle=it.fill)),(tt||it.stroke!==at.stroke)&&(ot||(flushPathDrawn(_e,nt),ot=!0),isValidStrokeFillStyle(it.stroke)&&(_e.strokeStyle=it.stroke)),(tt||it.opacity!==at.opacity)&&(ot||(flushPathDrawn(_e,nt),ot=!0),_e.globalAlpha=it.opacity==null?1:it.opacity),_.hasStroke()){var st=it.lineWidth,dt=st/(it.strokeNoScale&&_.getLineScale?_.getLineScale():1);_e.lineWidth!==dt&&(ot||(flushPathDrawn(_e,nt),ot=!0),_e.lineWidth=dt)}for(var ht=0;ht<STROKE_PROPS.length;ht++){var ct=STROKE_PROPS[ht],ut=ct[0];(tt||it[ut]!==at[ut])&&(ot||(flushPathDrawn(_e,nt),ot=!0),_e[ut]=it[ut]||ct[1])}return ot}function bindImageStyle(_e,_,et,tt,nt){return bindCommonProps(_e,getStyle(_,nt.inHover),et&&getStyle(et,nt.inHover),tt,nt)}function setContextTransform(_e,_){var et=_.transform,tt=_e.dpr||1;et?_e.setTransform(tt*et[0],tt*et[1],tt*et[2],tt*et[3],tt*et[4],tt*et[5]):_e.setTransform(tt,0,0,tt,0,0)}function updateClipStatus(_e,_,et){for(var tt=!1,nt=0;nt<_e.length;nt++){var it=_e[nt];tt=tt||it.isZeroArea(),setContextTransform(_,it),_.beginPath(),it.buildPath(_,it.shape),_.clip()}et.allClipped=tt}function isTransformChanged(_e,_){return _e&&_?_e[0]!==_[0]||_e[1]!==_[1]||_e[2]!==_[2]||_e[3]!==_[3]||_e[4]!==_[4]||_e[5]!==_[5]:!(!_e&&!_)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(_e){var _=styleHasFill(_e),et=styleHasStroke(_e);return!(_e.lineDash||!(+_^+et)||_&&typeof _e.fill!="string"||et&&typeof _e.stroke!="string"||_e.strokePercent<1||_e.strokeOpacity<1||_e.fillOpacity<1)}function flushPathDrawn(_e,_){_.batchFill&&_e.fill(),_.batchStroke&&_e.stroke(),_.batchFill="",_.batchStroke=""}function getStyle(_e,_){return _&&_e.__hoverStyle||_e.style}function brushSingle(_e,_){brush$1(_e,_,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(_e,_,et,tt){var nt=_.transform;if(!_.shouldBePainted(et.viewWidth,et.viewHeight,!1,!1)){_.__dirty&=-2,_.__isRendered=!1;return}var it=_.__clipPaths,at=et.prevElClipPaths,ot=!1,st=!1;if((!at||isClipPathChanged(it,at))&&(at&&at.length&&(flushPathDrawn(_e,et),_e.restore(),st=ot=!0,et.prevElClipPaths=null,et.allClipped=!1,et.prevEl=null),it&&it.length&&(flushPathDrawn(_e,et),_e.save(),updateClipStatus(it,_e,et),ot=!0),et.prevElClipPaths=it),et.allClipped){_.__isRendered=!1;return}_.beforeBrush&&_.beforeBrush(),_.innerBeforeBrush();var dt=et.prevEl;dt||(st=ot=!0);var ht=_ instanceof Path&&_.autoBatch&&canPathBatch(_.style);ot||isTransformChanged(nt,dt.transform)?(flushPathDrawn(_e,et),setContextTransform(_e,_)):ht||flushPathDrawn(_e,et);var ct=getStyle(_,et.inHover);_ instanceof Path?(et.lastDrawType!==DRAW_TYPE_PATH&&(st=!0,et.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(_e,_,dt,st,et),(!ht||!et.batchFill&&!et.batchStroke)&&_e.beginPath(),brushPath(_e,_,ct,ht),ht&&(et.batchFill=ct.fill||"",et.batchStroke=ct.stroke||"")):_ instanceof TSpan?(et.lastDrawType!==DRAW_TYPE_TEXT&&(st=!0,et.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(_e,_,dt,st,et),brushText(_e,_,ct)):_ instanceof ZRImage?(et.lastDrawType!==DRAW_TYPE_IMAGE&&(st=!0,et.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(_e,_,dt,st,et),brushImage(_e,_,ct)):_.getTemporalDisplayables&&(et.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(st=!0,et.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(_e,_,et)),ht&&tt&&flushPathDrawn(_e,et),_.innerAfterBrush(),_.afterBrush&&_.afterBrush(),et.prevEl=_,_.__dirty=0,_.__isRendered=!0}function brushIncremental(_e,_,et){var tt=_.getDisplayables(),nt=_.getTemporalDisplayables();_e.save();var it={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:et.viewWidth,viewHeight:et.viewHeight,inHover:et.inHover},at,ot;for(at=_.getCursor(),ot=tt.length;at<ot;at++){var st=tt[at];st.beforeBrush&&st.beforeBrush(),st.innerBeforeBrush(),brush$1(_e,st,it,at===ot-1),st.innerAfterBrush(),st.afterBrush&&st.afterBrush(),it.prevEl=st}for(var dt=0,ht=nt.length;dt<ht;dt++){var st=nt[dt];st.beforeBrush&&st.beforeBrush(),st.innerBeforeBrush(),brush$1(_e,st,it,dt===ht-1),st.innerAfterBrush(),st.afterBrush&&st.afterBrush(),it.prevEl=st}_.clearTemporalDisplayables(),_.notClear=!0,_e.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(_e,_){if(_e==="none")return null;var et=_.getDevicePixelRatio(),tt=_.getZr(),nt=tt.painter.type==="svg";_e.dirty&&decalMap.delete(_e);var it=decalMap.get(_e);if(it)return it;var at=defaults(_e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});at.backgroundColor==="none"&&(at.backgroundColor=null);var ot={repeat:"repeat"};return st(ot),ot.rotation=at.rotation,ot.scaleX=ot.scaleY=nt?1:1/et,decalMap.set(_e,ot),_e.dirty=!1,ot;function st(dt){for(var ht=[et],ct=!0,ut=0;ut<decalKeys.length;++ut){var ft=at[decalKeys[ut]];if(ft!=null&&!isArray$1(ft)&&!isString$1(ft)&&!isNumber(ft)&&typeof ft!="boolean"){ct=!1;break}ht.push(ft)}var gt;if(ct){gt=ht.join(",")+(nt?"-svg":"");var mt=decalCache.get(gt);mt&&(nt?dt.svgElement=mt:dt.image=mt)}var vt=normalizeDashArrayX(at.dashArrayX),yt=normalizeDashArrayY(at.dashArrayY),bt=normalizeSymbolArray(at.symbol),_t=getLineBlockLengthX(vt),xt=getLineBlockLengthY(yt),St=!nt&&platformApi.createCanvas(),Tt=nt&&{tag:"g",attrs:{},key:"dcl",children:[]},wt=Et(),Ct;St&&(St.width=wt.width*et,St.height=wt.height*et,Ct=St.getContext("2d")),At(),ct&&decalCache.put(gt,St||Tt),dt.image=St,dt.svgElement=Tt,dt.svgWidth=wt.width,dt.svgHeight=wt.height;function Et(){for(var Pt=1,Rt=0,It=_t.length;Rt<It;++Rt)Pt=getLeastCommonMultiple(Pt,_t[Rt]);for(var Mt=1,Rt=0,It=bt.length;Rt<It;++Rt)Mt=getLeastCommonMultiple(Mt,bt[Rt].length);Pt*=Mt;var Ot=xt*_t.length*bt.length;return{width:Math.max(1,Math.min(Pt,at.maxTileWidth)),height:Math.max(1,Math.min(Ot,at.maxTileHeight))}}function At(){Ct&&(Ct.clearRect(0,0,St.width,St.height),at.backgroundColor&&(Ct.fillStyle=at.backgroundColor,Ct.fillRect(0,0,St.width,St.height)));for(var Pt=0,Rt=0;Rt<yt.length;++Rt)Pt+=yt[Rt];if(Pt<=0)return;for(var It=-xt,Mt=0,Ot=0,$t=0;It<wt.height;){if(Mt%2===0){for(var Lt=Ot/2%bt.length,kt=0,Nt=0,Vt=0;kt<wt.width*2;){for(var zt=0,Rt=0;Rt<vt[$t].length;++Rt)zt+=vt[$t][Rt];if(zt<=0)break;if(Nt%2===0){var Xt=(1-at.symbolSize)*.5,Wt=kt+vt[$t][Nt]*Xt,nr=It+yt[Mt]*Xt,Jt=vt[$t][Nt]*at.symbolSize,lr=yt[Mt]*at.symbolSize,pr=Vt/2%bt[Lt].length;Zt(Wt,nr,Jt,lr,bt[Lt][pr])}kt+=vt[$t][Nt],++Vt,++Nt,Nt===vt[$t].length&&(Nt=0)}++$t,$t===vt.length&&($t=0)}It+=yt[Mt],++Ot,++Mt,Mt===yt.length&&(Mt=0)}function Zt(Kt,ur,ir,hr,fr){var mr=nt?1:et,br=createSymbol$1(fr,Kt*mr,ur*mr,ir*mr,hr*mr,at.color,at.symbolKeepAspect);if(nt){var Er=tt.painter.renderOneToVNode(br);Er&&Tt.children.push(Er)}else brushSingle(Ct,br)}}}}function normalizeSymbolArray(_e){if(!_e||_e.length===0)return[["rect"]];if(isString$1(_e))return[[_e]];for(var _=!0,et=0;et<_e.length;++et)if(!isString$1(_e[et])){_=!1;break}if(_)return normalizeSymbolArray([_e]);for(var tt=[],et=0;et<_e.length;++et)isString$1(_e[et])?tt.push([_e[et]]):tt.push(_e[et]);return tt}function normalizeDashArrayX(_e){if(!_e||_e.length===0)return[[0,0]];if(isNumber(_e)){var _=Math.ceil(_e);return[[_,_]]}for(var et=!0,tt=0;tt<_e.length;++tt)if(!isNumber(_e[tt])){et=!1;break}if(et)return normalizeDashArrayX([_e]);for(var nt=[],tt=0;tt<_e.length;++tt)if(isNumber(_e[tt])){var _=Math.ceil(_e[tt]);nt.push([_,_])}else{var _=map$1(_e[tt],function(ot){return Math.ceil(ot)});_.length%2===1?nt.push(_.concat(_)):nt.push(_)}return nt}function normalizeDashArrayY(_e){if(!_e||typeof _e=="object"&&_e.length===0)return[0,0];if(isNumber(_e)){var _=Math.ceil(_e);return[_,_]}var et=map$1(_e,function(tt){return Math.ceil(tt)});return _e.length%2?et.concat(et):et}function getLineBlockLengthX(_e){return map$1(_e,function(_){return getLineBlockLengthY(_)})}function getLineBlockLengthY(_e){for(var _=0,et=0;et<_e.length;++et)_+=_e[et];return _e.length%2===1?_*2:_}function decalVisual(_e,_){_e.eachRawSeries(function(et){if(!_e.isSeriesFiltered(et)){var tt=et.getData();tt.hasItemVisual()&&tt.each(function(at){var ot=tt.getItemVisual(at,"decal");if(ot){var st=tt.ensureUniqueItemVisual(at,"style");st.decal=createOrUpdatePatternFromDecal(ot,_)}});var nt=tt.getVisual("decal");if(nt){var it=tt.getVisual("style");it.decal=createOrUpdatePatternFromDecal(nt,_)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(_e,_){implsStore[_e]=_}function getImpl(_e){return implsStore[_e]}var version="5.6.0",dependencies={zrender:"5.6.1"},TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(_e){return function(){for(var _=[],et=0;et<arguments.length;et++)_[et]=arguments[et];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,_e,_)}}function createRegisterEventWithLowercaseMessageCenter(_e){return function(){for(var _=[],et=0;et<arguments.length;et++)_[et]=arguments[et];return toLowercaseNameAndCallEventful(this,_e,_)}}function toLowercaseNameAndCallEventful(_e,_,et){return et[0]=et[0]&&et[0].toLowerCase(),Eventful.prototype[_].apply(_e,et)}var MessageCenter=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(_e){__extends$1(_,_e);function _(et,tt,nt){var it=_e.call(this,new ECEventProcessor)||this;it._chartsViews=[],it._chartsMap={},it._componentsViews=[],it._componentsMap={},it._pendingActions=[],nt=nt||{},isString$1(tt)&&(tt=themeStorage[tt]),it._dom=et;var at="canvas",ot="auto",st=!1;nt.ssr&&registerSSRDataGetter(function(ut){var ft=getECData(ut),gt=ft.dataIndex;if(gt!=null){var mt=createHashMap();return mt.set("series_index",ft.seriesIndex),mt.set("data_index",gt),ft.ssrType&&mt.set("ssr_type",ft.ssrType),mt}});var dt=it._zr=init$2(et,{renderer:nt.renderer||at,devicePixelRatio:nt.devicePixelRatio,width:nt.width,height:nt.height,ssr:nt.ssr,useDirtyRect:retrieve2(nt.useDirtyRect,st),useCoarsePointer:retrieve2(nt.useCoarsePointer,ot),pointerSize:nt.pointerSize});it._ssr=nt.ssr,it._throttledZrFlush=throttle(bind$2(dt.flush,dt),17),tt=clone$4(tt),tt&&globalBackwardCompat(tt,!0),it._theme=tt,it._locale=createLocaleObject(nt.locale||SYSTEM_LANG),it._coordSysMgr=new CoordinateSystemManager;var ht=it._api=createExtensionAPI(it);function ct(ut,ft){return ut.__prio-ft.__prio}return sort$2(visualFuncs,ct),sort$2(dataProcessorFuncs,ct),it._scheduler=new Scheduler(it,ht,dataProcessorFuncs,visualFuncs),it._messageCenter=new MessageCenter,it._initEvents(),it.resize=bind$2(it.resize,it),dt.animation.on("frame",it._onframe,it),bindRenderedEvent(dt,it),bindMouseEvent(dt,it),setAsPrimitive(it),it}return _.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var et=this._scheduler;if(this[PENDING_UPDATE]){var tt=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(st){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,st}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,tt),triggerUpdatedEvent.call(this,tt)}else if(et.unfinished){var nt=TEST_FRAME_REMAIN_TIME,it=this._model,at=this._api;et.unfinished=!1;do{var ot=+new Date;et.performSeriesTasks(it),et.performDataProcessorTasks(it),updateStreamModes(this,it),et.performVisualTasks(it),renderSeries(this,this._model,at,"remain",{}),nt-=+new Date-ot}while(nt>0&&et.unfinished);et.unfinished||this._zr.flush()}}},_.prototype.getDom=function(){return this._dom},_.prototype.getId=function(){return this.id},_.prototype.getZr=function(){return this._zr},_.prototype.isSSR=function(){return this._ssr},_.prototype.setOption=function(et,tt,nt){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var it,at,ot;if(isObject$4(tt)&&(nt=tt.lazyUpdate,it=tt.silent,at=tt.replaceMerge,ot=tt.transition,tt=tt.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||tt){var st=new OptionManager(this._api),dt=this._theme,ht=this._model=new GlobalModel;ht.scheduler=this._scheduler,ht.ssr=this._ssr,ht.init(null,null,null,dt,this._locale,st)}this._model.setOption(et,{replaceMerge:at},optionPreprocessorFuncs);var ct={seriesTransition:ot,optionChanged:!0};if(nt)this[PENDING_UPDATE]={silent:it,updateParams:ct},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,ct)}catch(ut){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,ut}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,it),triggerUpdatedEvent.call(this,it)}}},_.prototype.setTheme=function(){},_.prototype.getModel=function(){return this._model},_.prototype.getOption=function(){return this._model&&this._model.getOption()},_.prototype.getWidth=function(){return this._zr.getWidth()},_.prototype.getHeight=function(){return this._zr.getHeight()},_.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},_.prototype.getRenderedCanvas=function(et){return this.renderToCanvas(et)},_.prototype.renderToCanvas=function(et){et=et||{};var tt=this._zr.painter;return tt.getRenderedCanvas({backgroundColor:et.backgroundColor||this._model.get("backgroundColor"),pixelRatio:et.pixelRatio||this.getDevicePixelRatio()})},_.prototype.renderToSVGString=function(et){et=et||{};var tt=this._zr.painter;return tt.renderToString({useViewBox:et.useViewBox})},_.prototype.getSvgDataURL=function(){if(env.svgSupported){var et=this._zr,tt=et.storage.getDisplayList();return each$f(tt,function(nt){nt.stopAnimation(null,!0)}),et.painter.toDataURL()}},_.prototype.getDataURL=function(et){if(this._disposed){this.id;return}et=et||{};var tt=et.excludeComponents,nt=this._model,it=[],at=this;each$f(tt,function(st){nt.eachComponent({mainType:st},function(dt){var ht=at._componentsMap[dt.__viewId];ht.group.ignore||(it.push(ht),ht.group.ignore=!0)})});var ot=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(et).toDataURL("image/"+(et&&et.type||"png"));return each$f(it,function(st){st.group.ignore=!1}),ot},_.prototype.getConnectedDataURL=function(et){if(this._disposed){this.id;return}var tt=et.type==="svg",nt=this.group,it=Math.min,at=Math.max,ot=1/0;if(connectedGroups[nt]){var st=ot,dt=ot,ht=-ot,ct=-ot,ut=[],ft=et&&et.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(_t,xt){if(_t.group===nt){var St=tt?_t.getZr().painter.getSvgDom().innerHTML:_t.renderToCanvas(clone$4(et)),Tt=_t.getDom().getBoundingClientRect();st=it(Tt.left,st),dt=it(Tt.top,dt),ht=at(Tt.right,ht),ct=at(Tt.bottom,ct),ut.push({dom:St,left:Tt.left,top:Tt.top})}}),st*=ft,dt*=ft,ht*=ft,ct*=ft;var gt=ht-st,mt=ct-dt,vt=platformApi.createCanvas(),yt=init$2(vt,{renderer:tt?"svg":"canvas"});if(yt.resize({width:gt,height:mt}),tt){var bt="";return each$f(ut,function(_t){var xt=_t.left-st,St=_t.top-dt;bt+='<g transform="translate('+xt+","+St+')">'+_t.dom+"</g>"}),yt.painter.getSvgRoot().innerHTML=bt,et.connectedBackgroundColor&&yt.painter.setBackgroundColor(et.connectedBackgroundColor),yt.refreshImmediately(),yt.painter.toDataURL()}else return et.connectedBackgroundColor&&yt.add(new Rect$2({shape:{x:0,y:0,width:gt,height:mt},style:{fill:et.connectedBackgroundColor}})),each$f(ut,function(_t){var xt=new ZRImage({style:{x:_t.left*ft-st,y:_t.top*ft-dt,image:_t.dom}});yt.add(xt)}),yt.refreshImmediately(),vt.toDataURL("image/"+(et&&et.type||"png"))}else return this.getDataURL(et)},_.prototype.convertToPixel=function(et,tt){return doConvertPixel(this,"convertToPixel",et,tt)},_.prototype.convertFromPixel=function(et,tt){return doConvertPixel(this,"convertFromPixel",et,tt)},_.prototype.containPixel=function(et,tt){if(this._disposed){this.id;return}var nt=this._model,it,at=parseFinder$1(nt,et);return each$f(at,function(ot,st){st.indexOf("Models")>=0&&each$f(ot,function(dt){var ht=dt.coordinateSystem;if(ht&&ht.containPoint)it=it||!!ht.containPoint(tt);else if(st==="seriesModels"){var ct=this._chartsMap[dt.__viewId];ct&&ct.containPoint&&(it=it||ct.containPoint(tt,dt))}},this)},this),!!it},_.prototype.getVisual=function(et,tt){var nt=this._model,it=parseFinder$1(nt,et,{defaultMainType:"series"}),at=it.seriesModel,ot=at.getData(),st=it.hasOwnProperty("dataIndexInside")?it.dataIndexInside:it.hasOwnProperty("dataIndex")?ot.indexOfRawIndex(it.dataIndex):null;return st!=null?getItemVisualFromData(ot,st,tt):getVisualFromData(ot,tt)},_.prototype.getViewOfComponentModel=function(et){return this._componentsMap[et.__viewId]},_.prototype.getViewOfSeriesModel=function(et){return this._chartsMap[et.__viewId]},_.prototype._initEvents=function(){var et=this;each$f(MOUSE_EVENT_NAMES,function(tt){var nt=function(it){var at=et.getModel(),ot=it.target,st,dt=tt==="globalout";if(dt?st={}:ot&&findEventDispatcher(ot,function(gt){var mt=getECData(gt);if(mt&&mt.dataIndex!=null){var vt=mt.dataModel||at.getSeriesByIndex(mt.seriesIndex);return st=vt&&vt.getDataParams(mt.dataIndex,mt.dataType,ot)||{},!0}else if(mt.eventData)return st=extend({},mt.eventData),!0},!0),st){var ht=st.componentType,ct=st.componentIndex;(ht==="markLine"||ht==="markPoint"||ht==="markArea")&&(ht="series",ct=st.seriesIndex);var ut=ht&&ct!=null&&at.getComponent(ht,ct),ft=ut&&et[ut.mainType==="series"?"_chartsMap":"_componentsMap"][ut.__viewId];st.event=it,st.type=tt,et._$eventProcessor.eventInfo={targetEl:ot,packedEvent:st,model:ut,view:ft},et.trigger(tt,st)}};nt.zrEventfulCallAtLast=!0,et._zr.on(tt,nt,et)}),each$f(eventActionMap,function(tt,nt){et._messageCenter.on(nt,function(it){this.trigger(nt,it)},et)}),each$f(["selectchanged"],function(tt){et._messageCenter.on(tt,function(nt){this.trigger(tt,nt)},et)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},_.prototype.isDisposed=function(){return this._disposed},_.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},_.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var et=this.getDom();et&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var tt=this,nt=tt._api,it=tt._model;each$f(tt._componentsViews,function(at){at.dispose(it,nt)}),each$f(tt._chartsViews,function(at){at.dispose(it,nt)}),tt._zr.dispose(),tt._dom=tt._model=tt._chartsMap=tt._componentsMap=tt._chartsViews=tt._componentsViews=tt._scheduler=tt._api=tt._zr=tt._throttledZrFlush=tt._theme=tt._coordSysMgr=tt._messageCenter=null,delete instances[tt.id]},_.prototype.resize=function(et){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(et);var tt=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!tt){var nt=tt.resetOption("media"),it=et&&et.silent;this[PENDING_UPDATE]&&(it==null&&(it=this[PENDING_UPDATE].silent),nt=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{nt&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},et&&et.animation)})}catch(at){throw this[IN_MAIN_PROCESS_KEY]=!1,at}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,it),triggerUpdatedEvent.call(this,it)}}},_.prototype.showLoading=function(et,tt){if(this._disposed){this.id;return}if(isObject$4(et)&&(tt=et,et=""),et=et||"default",this.hideLoading(),!!loadingEffects[et]){var nt=loadingEffects[et](this._api,tt),it=this._zr;this._loadingFX=nt,it.add(nt)}},_.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},_.prototype.makeActionFromEvent=function(et){var tt=extend({},et);return tt.type=eventActionMap[et.type],tt},_.prototype.dispatchAction=function(et,tt){if(this._disposed){this.id;return}if(isObject$4(tt)||(tt={silent:!!tt}),!!actions[et.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(et);return}var nt=tt.silent;doDispatchAction.call(this,et,nt);var it=tt.flush;it?this._zr.flush():it!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,nt),triggerUpdatedEvent.call(this,nt)}},_.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},_.prototype.appendData=function(et){if(this._disposed){this.id;return}var tt=et.seriesIndex,nt=this.getModel(),it=nt.getSeriesByIndex(tt);it.appendData(et),this._scheduler.unfinished=!0,this.getZr().wakeUp()},_.internalField=function(){prepare=function(ct){var ut=ct._scheduler;ut.restorePipelines(ct._model),ut.prepareStageTasks(),prepareView(ct,!0),prepareView(ct,!1),ut.plan()},prepareView=function(ct,ut){for(var ft=ct._model,gt=ct._scheduler,mt=ut?ct._componentsViews:ct._chartsViews,vt=ut?ct._componentsMap:ct._chartsMap,yt=ct._zr,bt=ct._api,_t=0;_t<mt.length;_t++)mt[_t].__alive=!1;ut?ft.eachComponent(function(Tt,wt){Tt!=="series"&&xt(wt)}):ft.eachSeries(xt);function xt(Tt){var wt=Tt.__requireNewView;Tt.__requireNewView=!1;var Ct="_ec_"+Tt.id+"_"+Tt.type,Et=!wt&&vt[Ct];if(!Et){var At=parseClassType(Tt.type),Pt=ut?ComponentView.getClass(At.main,At.sub):ChartView.getClass(At.sub);Et=new Pt,Et.init(ft,bt),vt[Ct]=Et,mt.push(Et),yt.add(Et.group)}Tt.__viewId=Et.__id=Ct,Et.__alive=!0,Et.__model=Tt,Et.group.__ecComponentInfo={mainType:Tt.mainType,index:Tt.componentIndex},!ut&&gt.prepareView(Et,Tt,ft,bt)}for(var _t=0;_t<mt.length;){var St=mt[_t];St.__alive?_t++:(!ut&&St.renderTask.dispose(),yt.remove(St.group),St.dispose(ft,bt),mt.splice(_t,1),vt[St.__id]===St&&delete vt[St.__id],St.__id=St.group.__ecComponentInfo=null)}},updateDirectly=function(ct,ut,ft,gt,mt){var vt=ct._model;if(vt.setUpdatePayload(ft),!gt){each$f([].concat(ct._componentsViews).concat(ct._chartsViews),St);return}var yt={};yt[gt+"Id"]=ft[gt+"Id"],yt[gt+"Index"]=ft[gt+"Index"],yt[gt+"Name"]=ft[gt+"Name"];var bt={mainType:gt,query:yt};mt&&(bt.subType=mt);var _t=ft.excludeSeriesId,xt;_t!=null&&(xt=createHashMap(),each$f(normalizeToArray(_t),function(Tt){var wt=convertOptionIdName(Tt,null);wt!=null&&xt.set(wt,!0)})),vt&&vt.eachComponent(bt,function(Tt){var wt=xt&&xt.get(Tt.id)!=null;if(!wt)if(isHighDownPayload(ft))if(Tt instanceof SeriesModel)ft.type===HIGHLIGHT_ACTION_TYPE&&!ft.notBlur&&!Tt.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(Tt,ft,ct._api);else{var Ct=findComponentHighDownDispatchers(Tt.mainType,Tt.componentIndex,ft.name,ct._api),Et=Ct.focusSelf,At=Ct.dispatchers;ft.type===HIGHLIGHT_ACTION_TYPE&&Et&&!ft.notBlur&&blurComponent(Tt.mainType,Tt.componentIndex,ct._api),At&&each$f(At,function(Pt){ft.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(Pt):leaveEmphasis(Pt)})}else isSelectChangePayload(ft)&&Tt instanceof SeriesModel&&(toggleSelectionFromPayload(Tt,ft,ct._api),updateSeriesElementSelection(Tt),markStatusToUpdate(ct))},ct),vt&&vt.eachComponent(bt,function(Tt){var wt=xt&&xt.get(Tt.id)!=null;wt||St(ct[gt==="series"?"_chartsMap":"_componentsMap"][Tt.__viewId])},ct);function St(Tt){Tt&&Tt.__alive&&Tt[ut]&&Tt[ut](Tt.__model,vt,ct._api,ft)}},updateMethods={prepareAndUpdate:function(ct){prepare(this),updateMethods.update.call(this,ct,{optionChanged:ct.newOption!=null})},update:function(ct,ut){var ft=this._model,gt=this._api,mt=this._zr,vt=this._coordSysMgr,yt=this._scheduler;if(ft){ft.setUpdatePayload(ct),yt.restoreData(ft,ct),yt.performSeriesTasks(ft),vt.create(ft,gt),yt.performDataProcessorTasks(ft,ct),updateStreamModes(this,ft),vt.update(ft,gt),et(ft),yt.performVisualTasks(ft,ct),render(this,ft,gt,ct,ut);var bt=ft.get("backgroundColor")||"transparent",_t=ft.get("darkMode");mt.setBackgroundColor(bt),_t!=null&&_t!=="auto"&&mt.setDarkMode(_t),lifecycle.trigger("afterupdate",ft,gt)}},updateTransform:function(ct){var ut=this,ft=this._model,gt=this._api;if(ft){ft.setUpdatePayload(ct);var mt=[];ft.eachComponent(function(yt,bt){if(yt!=="series"){var _t=ut.getViewOfComponentModel(bt);if(_t&&_t.__alive)if(_t.updateTransform){var xt=_t.updateTransform(bt,ft,gt,ct);xt&&xt.update&&mt.push(_t)}else mt.push(_t)}});var vt=createHashMap();ft.eachSeries(function(yt){var bt=ut._chartsMap[yt.__viewId];if(bt.updateTransform){var _t=bt.updateTransform(yt,ft,gt,ct);_t&&_t.update&&vt.set(yt.uid,1)}else vt.set(yt.uid,1)}),et(ft),this._scheduler.performVisualTasks(ft,ct,{setDirty:!0,dirtyMap:vt}),renderSeries(this,ft,gt,ct,{},vt),lifecycle.trigger("afterupdate",ft,gt)}},updateView:function(ct){var ut=this._model;ut&&(ut.setUpdatePayload(ct),ChartView.markUpdateMethod(ct,"updateView"),et(ut),this._scheduler.performVisualTasks(ut,ct,{setDirty:!0}),render(this,ut,this._api,ct,{}),lifecycle.trigger("afterupdate",ut,this._api))},updateVisual:function(ct){var ut=this,ft=this._model;ft&&(ft.setUpdatePayload(ct),ft.eachSeries(function(gt){gt.getData().clearAllVisual()}),ChartView.markUpdateMethod(ct,"updateVisual"),et(ft),this._scheduler.performVisualTasks(ft,ct,{visualType:"visual",setDirty:!0}),ft.eachComponent(function(gt,mt){if(gt!=="series"){var vt=ut.getViewOfComponentModel(mt);vt&&vt.__alive&&vt.updateVisual(mt,ft,ut._api,ct)}}),ft.eachSeries(function(gt){var mt=ut._chartsMap[gt.__viewId];mt.updateVisual(gt,ft,ut._api,ct)}),lifecycle.trigger("afterupdate",ft,this._api))},updateLayout:function(ct){updateMethods.update.call(this,ct)}},doConvertPixel=function(ct,ut,ft,gt){if(ct._disposed){ct.id;return}for(var mt=ct._model,vt=ct._coordSysMgr.getCoordinateSystems(),yt,bt=parseFinder$1(mt,ft),_t=0;_t<vt.length;_t++){var xt=vt[_t];if(xt[ut]&&(yt=xt[ut](mt,bt,gt))!=null)return yt}},updateStreamModes=function(ct,ut){var ft=ct._chartsMap,gt=ct._scheduler;ut.eachSeries(function(mt){gt.updateStreamModes(mt,ft[mt.__viewId])})},doDispatchAction=function(ct,ut){var ft=this,gt=this.getModel(),mt=ct.type,vt=ct.escapeConnect,yt=actions[mt],bt=yt.actionInfo,_t=(bt.update||"update").split(":"),xt=_t.pop(),St=_t[0]!=null&&parseClassType(_t[0]);this[IN_MAIN_PROCESS_KEY]=!0;var Tt=[ct],wt=!1;ct.batch&&(wt=!0,Tt=map$1(ct.batch,function(Mt){return Mt=defaults(extend({},Mt),ct),Mt.batch=null,Mt}));var Ct=[],Et,At=isSelectChangePayload(ct),Pt=isHighDownPayload(ct);if(Pt&&allLeaveBlur(this._api),each$f(Tt,function(Mt){if(Et=yt.action(Mt,ft._model,ft._api),Et=Et||extend({},Mt),Et.type=bt.event||Et.type,Ct.push(Et),Pt){var Ot=preParseFinder(ct),$t=Ot.queryOptionMap,Lt=Ot.mainTypeSpecified,kt=Lt?$t.keys()[0]:"series";updateDirectly(ft,xt,Mt,kt),markStatusToUpdate(ft)}else At?(updateDirectly(ft,xt,Mt,"series"),markStatusToUpdate(ft)):St&&updateDirectly(ft,xt,Mt,St.main,St.sub)}),xt!=="none"&&!Pt&&!At&&!St)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,ct),this[PENDING_UPDATE]=null):updateMethods[xt].call(this,ct)}catch(Mt){throw this[IN_MAIN_PROCESS_KEY]=!1,Mt}if(wt?Et={type:bt.event||mt,escapeConnect:vt,batch:Ct}:Et=Ct[0],this[IN_MAIN_PROCESS_KEY]=!1,!ut){var Rt=this._messageCenter;if(Rt.trigger(Et.type,Et),At){var It={type:"selectchanged",escapeConnect:vt,selected:getAllSelectedIndices(gt),isFromClick:ct.isFromClick||!1,fromAction:ct.type,fromActionPayload:ct};Rt.trigger(It.type,It)}}},flushPendingActions=function(ct){for(var ut=this._pendingActions;ut.length;){var ft=ut.shift();doDispatchAction.call(this,ft,ct)}},triggerUpdatedEvent=function(ct){!ct&&this.trigger("updated")},bindRenderedEvent=function(ct,ut){ct.on("rendered",function(ft){ut.trigger("rendered",ft),ct.animation.isFinished()&&!ut[PENDING_UPDATE]&&!ut._scheduler.unfinished&&!ut._pendingActions.length&&ut.trigger("finished")})},bindMouseEvent=function(ct,ut){ct.on("mouseover",function(ft){var gt=ft.target,mt=findEventDispatcher(gt,isHighDownDispatcher);mt&&(handleGlobalMouseOverForHighDown(mt,ft,ut._api),markStatusToUpdate(ut))}).on("mouseout",function(ft){var gt=ft.target,mt=findEventDispatcher(gt,isHighDownDispatcher);mt&&(handleGlobalMouseOutForHighDown(mt,ft,ut._api),markStatusToUpdate(ut))}).on("click",function(ft){var gt=ft.target,mt=findEventDispatcher(gt,function(bt){return getECData(bt).dataIndex!=null},!0);if(mt){var vt=mt.selected?"unselect":"select",yt=getECData(mt);ut._api.dispatchAction({type:vt,dataType:yt.dataType,dataIndexInside:yt.dataIndex,seriesIndex:yt.seriesIndex,isFromClick:!0})}})};function et(ct){ct.clearColorPalette(),ct.eachSeries(function(ut){ut.clearColorPalette()})}function tt(ct){var ut=[],ft=[],gt=!1;if(ct.eachComponent(function(bt,_t){var xt=_t.get("zlevel")||0,St=_t.get("z")||0,Tt=_t.getZLevelKey();gt=gt||!!Tt,(bt==="series"?ft:ut).push({zlevel:xt,z:St,idx:_t.componentIndex,type:bt,key:Tt})}),gt){var mt=ut.concat(ft),vt,yt;sort$2(mt,function(bt,_t){return bt.zlevel===_t.zlevel?bt.z-_t.z:bt.zlevel-_t.zlevel}),each$f(mt,function(bt){var _t=ct.getComponent(bt.type,bt.idx),xt=bt.zlevel,St=bt.key;vt!=null&&(xt=Math.max(vt,xt)),St?(xt===vt&&St!==yt&&xt++,yt=St):yt&&(xt===vt&&xt++,yt=""),vt=xt,_t.setZLevel(xt)})}}render=function(ct,ut,ft,gt,mt){tt(ut),renderComponents(ct,ut,ft,gt,mt),each$f(ct._chartsViews,function(vt){vt.__alive=!1}),renderSeries(ct,ut,ft,gt,mt),each$f(ct._chartsViews,function(vt){vt.__alive||vt.remove(ut,ft)})},renderComponents=function(ct,ut,ft,gt,mt,vt){each$f(vt||ct._componentsViews,function(yt){var bt=yt.__model;dt(bt,yt),yt.render(bt,ut,ft,gt),ot(bt,yt),ht(bt,yt)})},renderSeries=function(ct,ut,ft,gt,mt,vt){var yt=ct._scheduler;mt=extend(mt||{},{updatedSeries:ut.getSeries()}),lifecycle.trigger("series:beforeupdate",ut,ft,mt);var bt=!1;ut.eachSeries(function(_t){var xt=ct._chartsMap[_t.__viewId];xt.__alive=!0;var St=xt.renderTask;yt.updatePayload(St,gt),dt(_t,xt),vt&&vt.get(_t.uid)&&St.dirty(),St.perform(yt.getPerformArgs(St))&&(bt=!0),xt.group.silent=!!_t.get("silent"),at(_t,xt),updateSeriesElementSelection(_t)}),yt.unfinished=bt||yt.unfinished,lifecycle.trigger("series:layoutlabels",ut,ft,mt),lifecycle.trigger("series:transition",ut,ft,mt),ut.eachSeries(function(_t){var xt=ct._chartsMap[_t.__viewId];ot(_t,xt),ht(_t,xt)}),it(ct,ut),lifecycle.trigger("series:afterupdate",ut,ft,mt)},markStatusToUpdate=function(ct){ct[STATUS_NEEDS_UPDATE_KEY]=!0,ct.getZr().wakeUp()},applyChangedStates=function(ct){ct[STATUS_NEEDS_UPDATE_KEY]&&(ct.getZr().storage.traverse(function(ut){isElementRemoved(ut)||nt(ut)}),ct[STATUS_NEEDS_UPDATE_KEY]=!1)};function nt(ct){for(var ut=[],ft=ct.currentStates,gt=0;gt<ft.length;gt++){var mt=ft[gt];mt==="emphasis"||mt==="blur"||mt==="select"||ut.push(mt)}ct.selected&&ct.states.select&&ut.push("select"),ct.hoverState===HOVER_STATE_EMPHASIS&&ct.states.emphasis?ut.push("emphasis"):ct.hoverState===HOVER_STATE_BLUR&&ct.states.blur&&ut.push("blur"),ct.useStates(ut)}function it(ct,ut){var ft=ct._zr,gt=ft.storage,mt=0;gt.traverse(function(vt){vt.isGroup||mt++}),mt>ut.get("hoverLayerThreshold")&&!env.node&&!env.worker&&ut.eachSeries(function(vt){if(!vt.preventUsingHoverLayer){var yt=ct._chartsMap[vt.__viewId];yt.__alive&&yt.eachRendered(function(bt){bt.states.emphasis&&(bt.states.emphasis.hoverLayer=!0)})}})}function at(ct,ut){var ft=ct.get("blendMode")||null;ut.eachRendered(function(gt){gt.isGroup||(gt.style.blend=ft)})}function ot(ct,ut){if(!ct.preventAutoZ){var ft=ct.get("z")||0,gt=ct.get("zlevel")||0;ut.eachRendered(function(mt){return st(mt,ft,gt,-1/0),!0})}}function st(ct,ut,ft,gt){var mt=ct.getTextContent(),vt=ct.getTextGuideLine(),yt=ct.isGroup;if(yt)for(var bt=ct.childrenRef(),_t=0;_t<bt.length;_t++)gt=Math.max(st(bt[_t],ut,ft,gt),gt);else ct.z=ut,ct.zlevel=ft,gt=Math.max(ct.z2,gt);if(mt&&(mt.z=ut,mt.zlevel=ft,isFinite(gt)&&(mt.z2=gt+2)),vt){var xt=ct.textGuideLineConfig;vt.z=ut,vt.zlevel=ft,isFinite(gt)&&(vt.z2=gt+(xt&&xt.showAbove?1:-1))}return gt}function dt(ct,ut){ut.eachRendered(function(ft){if(!isElementRemoved(ft)){var gt=ft.getTextContent(),mt=ft.getTextGuideLine();ft.stateTransition&&(ft.stateTransition=null),gt&&gt.stateTransition&&(gt.stateTransition=null),mt&&mt.stateTransition&&(mt.stateTransition=null),ft.hasState()?(ft.prevStates=ft.currentStates,ft.clearStates()):ft.prevStates&&(ft.prevStates=null)}})}function ht(ct,ut){var ft=ct.getModel("stateAnimation"),gt=ct.isAnimationEnabled(),mt=ft.get("duration"),vt=mt>0?{duration:mt,delay:ft.get("delay"),easing:ft.get("easing")}:null;ut.eachRendered(function(yt){if(yt.states&&yt.states.emphasis){if(isElementRemoved(yt))return;if(yt instanceof Path&&savePathStates(yt),yt.__dirty){var bt=yt.prevStates;bt&&yt.useStates(bt)}if(gt){yt.stateTransition=vt;var _t=yt.getTextContent(),xt=yt.getTextGuideLine();_t&&(_t.stateTransition=vt),xt&&(xt.stateTransition=vt)}yt.__dirty&&nt(yt)}})}createExtensionAPI=function(ct){return new(function(ut){__extends$1(ft,ut);function ft(){return ut!==null&&ut.apply(this,arguments)||this}return ft.prototype.getCoordinateSystems=function(){return ct._coordSysMgr.getCoordinateSystems()},ft.prototype.getComponentByElement=function(gt){for(;gt;){var mt=gt.__ecComponentInfo;if(mt!=null)return ct._model.getComponent(mt.mainType,mt.index);gt=gt.parent}},ft.prototype.enterEmphasis=function(gt,mt){enterEmphasis(gt,mt),markStatusToUpdate(ct)},ft.prototype.leaveEmphasis=function(gt,mt){leaveEmphasis(gt,mt),markStatusToUpdate(ct)},ft.prototype.enterBlur=function(gt){enterBlur(gt),markStatusToUpdate(ct)},ft.prototype.leaveBlur=function(gt){leaveBlur(gt),markStatusToUpdate(ct)},ft.prototype.enterSelect=function(gt){enterSelect(gt),markStatusToUpdate(ct)},ft.prototype.leaveSelect=function(gt){leaveSelect(gt),markStatusToUpdate(ct)},ft.prototype.getModel=function(){return ct.getModel()},ft.prototype.getViewOfComponentModel=function(gt){return ct.getViewOfComponentModel(gt)},ft.prototype.getViewOfSeriesModel=function(gt){return ct.getViewOfSeriesModel(gt)},ft}(ExtensionAPI))(ct)},enableConnect=function(ct){function ut(ft,gt){for(var mt=0;mt<ft.length;mt++){var vt=ft[mt];vt[CONNECT_STATUS_KEY]=gt}}each$f(eventActionMap,function(ft,gt){ct._messageCenter.on(gt,function(mt){if(connectedGroups[ct.group]&&ct[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(mt&&mt.escapeConnect)return;var vt=ct.makeActionFromEvent(mt),yt=[];each$f(instances,function(bt){bt!==ct&&bt.group===ct.group&&yt.push(bt)}),ut(yt,CONNECT_STATUS_PENDING),each$f(yt,function(bt){bt[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&bt.dispatchAction(vt)}),ut(yt,CONNECT_STATUS_UPDATED)}})})}}(),_}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(_e,_,et){var tt=this;function nt(){for(var it=[],at=0;at<arguments.length;at++)it[at]=arguments[at];_&&_.apply&&_.apply(this,it),tt.off(_e,nt)}this.on.call(this,_e,nt,et)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(_e){}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(_e,_,et){var tt=!(et&&et.ssr);if(tt){var nt=getInstanceByDom(_e);if(nt)return nt}var it=new ECharts(_e,_,et);return it.id="ec_"+idBase++,instances[it.id]=it,tt&&setAttribute(_e,DOM_ATTRIBUTE_KEY,it.id),enableConnect(it),lifecycle.trigger("afterinit",it),it}function connect(_e){if(isArray$1(_e)){var _=_e;_e=null,each$f(_,function(et){et.group!=null&&(_e=et.group)}),_e=_e||"g_"+groupIdBase++,each$f(_,function(et){et.group=_e})}return connectedGroups[_e]=!0,_e}function disconnect(_e){connectedGroups[_e]=!1}var disConnect=disconnect;function dispose(_e){isString$1(_e)?_e=instances[_e]:_e instanceof ECharts||(_e=getInstanceByDom(_e)),_e instanceof ECharts&&!_e.isDisposed()&&_e.dispose()}function getInstanceByDom(_e){return instances[getAttribute(_e,DOM_ATTRIBUTE_KEY)]}function getInstanceById(_e){return instances[_e]}function registerTheme(_e,_){themeStorage[_e]=_}function registerPreprocessor(_e){indexOf(optionPreprocessorFuncs,_e)<0&&optionPreprocessorFuncs.push(_e)}function registerProcessor(_e,_){normalizeRegister(dataProcessorFuncs,_e,_,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(_e){registerUpdateLifecycle("afterinit",_e)}function registerPostUpdate(_e){registerUpdateLifecycle("afterupdate",_e)}function registerUpdateLifecycle(_e,_){lifecycle.on(_e,_)}function registerAction(_e,_,et){isFunction$3(_)&&(et=_,_="");var tt=isObject$4(_e)?_e.type:[_e,_e={event:_}][0];_e.event=(_e.event||tt).toLowerCase(),_=_e.event,!eventActionMap[_]&&(assert(ACTION_REG.test(tt)&&ACTION_REG.test(_)),actions[tt]||(actions[tt]={action:et,actionInfo:_e}),eventActionMap[_]=tt)}function registerCoordinateSystem(_e,_){CoordinateSystemManager.register(_e,_)}function getCoordinateSystemDimensions(_e){var _=CoordinateSystemManager.get(_e);if(_)return _.getDimensionsInfo?_.getDimensionsInfo():_.dimensions.slice()}function registerLayout(_e,_){normalizeRegister(visualFuncs,_e,_,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(_e,_){normalizeRegister(visualFuncs,_e,_,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(_e,_,et,tt,nt){if((isFunction$3(_)||isObject$4(_))&&(et=_,_=tt),!(indexOf(registeredTasks,et)>=0)){registeredTasks.push(et);var it=Scheduler.wrapStageHandler(et,nt);it.__prio=_,it.__raw=et,_e.push(it)}}function registerLoading(_e,_){loadingEffects[_e]=_}function setCanvasCreator(_e){setPlatformAPI({createCanvas:_e})}function registerMap$1(_e,_,et){var tt=getImpl("registerMap");tt&&tt(_e,_,et)}function getMap(_e){var _=getImpl("getMap");return _&&_(_e)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop);registerTheme("light",lightTheme);registerTheme("dark",theme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(_e){ComponentModel.registerClass(_e)},registerComponentView:function(_e){ComponentView.registerClass(_e)},registerSeriesModel:function(_e){SeriesModel.registerClass(_e)},registerChartView:function(_e){ChartView.registerClass(_e)},registerSubTypeDefaulter:function(_e,_){ComponentModel.registerSubTypeDefaulter(_e,_)},registerPainter:function(_e,_){registerPainter(_e,_)}};function use(_e){if(isArray$1(_e)){each$f(_e,function(_){use(_)});return}indexOf(extensions,_e)>=0||(extensions.push(_e),isFunction$3(_e)&&(_e={install:_e}),_e.install(extensionRegisters))}function dataIndexMapValueLength(_e){return _e==null?0:_e.length||1}function defaultKeyGetter(_e){return _e}var DataDiffer=function(){function _e(_,et,tt,nt,it,at){this._old=_,this._new=et,this._oldKeyGetter=tt||defaultKeyGetter,this._newKeyGetter=nt||defaultKeyGetter,this.context=it,this._diffModeMultiple=at==="multiple"}return _e.prototype.add=function(_){return this._add=_,this},_e.prototype.update=function(_){return this._update=_,this},_e.prototype.updateManyToOne=function(_){return this._updateManyToOne=_,this},_e.prototype.updateOneToMany=function(_){return this._updateOneToMany=_,this},_e.prototype.updateManyToMany=function(_){return this._updateManyToMany=_,this},_e.prototype.remove=function(_){return this._remove=_,this},_e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},_e.prototype._executeOneToOne=function(){var _=this._old,et=this._new,tt={},nt=new Array(_.length),it=new Array(et.length);this._initIndexMap(_,null,nt,"_oldKeyGetter"),this._initIndexMap(et,tt,it,"_newKeyGetter");for(var at=0;at<_.length;at++){var ot=nt[at],st=tt[ot],dt=dataIndexMapValueLength(st);if(dt>1){var ht=st.shift();st.length===1&&(tt[ot]=st[0]),this._update&&this._update(ht,at)}else dt===1?(tt[ot]=null,this._update&&this._update(st,at)):this._remove&&this._remove(at)}this._performRestAdd(it,tt)},_e.prototype._executeMultiple=function(){var _=this._old,et=this._new,tt={},nt={},it=[],at=[];this._initIndexMap(_,tt,it,"_oldKeyGetter"),this._initIndexMap(et,nt,at,"_newKeyGetter");for(var ot=0;ot<it.length;ot++){var st=it[ot],dt=tt[st],ht=nt[st],ct=dataIndexMapValueLength(dt),ut=dataIndexMapValueLength(ht);if(ct>1&&ut===1)this._updateManyToOne&&this._updateManyToOne(ht,dt),nt[st]=null;else if(ct===1&&ut>1)this._updateOneToMany&&this._updateOneToMany(ht,dt),nt[st]=null;else if(ct===1&&ut===1)this._update&&this._update(ht,dt),nt[st]=null;else if(ct>1&&ut>1)this._updateManyToMany&&this._updateManyToMany(ht,dt),nt[st]=null;else if(ct>1)for(var ft=0;ft<ct;ft++)this._remove&&this._remove(dt[ft]);else this._remove&&this._remove(dt)}this._performRestAdd(at,nt)},_e.prototype._performRestAdd=function(_,et){for(var tt=0;tt<_.length;tt++){var nt=_[tt],it=et[nt],at=dataIndexMapValueLength(it);if(at>1)for(var ot=0;ot<at;ot++)this._add&&this._add(it[ot]);else at===1&&this._add&&this._add(it);et[nt]=null}},_e.prototype._initIndexMap=function(_,et,tt,nt){for(var it=this._diffModeMultiple,at=0;at<_.length;at++){var ot="_ec_"+this[nt](_[at],at);if(it||(tt[at]=ot),!!et){var st=et[ot],dt=dataIndexMapValueLength(st);dt===0?(et[ot]=at,it&&tt.push(ot)):dt===1?et[ot]=[st,at]:st.push(at)}}},_e}(),DimensionUserOuput=function(){function _e(_,et){this._encode=_,this._schema=et}return _e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},_e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},_e}();function summarizeDimensions(_e,_){var et={},tt=et.encode={},nt=createHashMap(),it=[],at=[],ot={};each$f(_e.dimensions,function(ut){var ft=_e.getDimensionInfo(ut),gt=ft.coordDim;if(gt){var mt=ft.coordDimIndex;getOrCreateEncodeArr(tt,gt)[mt]=ut,ft.isExtraCoord||(nt.set(gt,1),mayLabelDimType(ft.type)&&(it[0]=ut),getOrCreateEncodeArr(ot,gt)[mt]=_e.getDimensionIndex(ft.name)),ft.defaultTooltip&&at.push(ut)}VISUAL_DIMENSIONS.each(function(vt,yt){var bt=getOrCreateEncodeArr(tt,yt),_t=ft.otherDims[yt];_t!=null&&_t!==!1&&(bt[_t]=ft.name)})});var st=[],dt={};nt.each(function(ut,ft){var gt=tt[ft];dt[ft]=gt[0],st=st.concat(gt)}),et.dataDimsOnCoord=st,et.dataDimIndicesOnCoord=map$1(st,function(ut){return _e.getDimensionInfo(ut).storeDimIndex}),et.encodeFirstDimNotExtra=dt;var ht=tt.label;ht&&ht.length&&(it=ht.slice());var ct=tt.tooltip;return ct&&ct.length?at=ct.slice():at.length||(at=it.slice()),tt.defaultedLabel=it,tt.defaultedTooltip=at,et.userOutput=new DimensionUserOuput(ot,_),et}function getOrCreateEncodeArr(_e,_){return _e.hasOwnProperty(_)||(_e[_]=[]),_e[_]}function getDimensionTypeByAxis(_e){return _e==="category"?"ordinal":_e==="time"?"time":"float"}function mayLabelDimType(_e){return!(_e==="ordinal"||_e==="time")}var SeriesDimensionDefine=function(){function _e(_){this.otherDims={},_!=null&&extend(this,_)}return _e}(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function _e(_){this.dimensions=_.dimensions,this._dimOmitted=_.dimensionOmitted,this.source=_.source,this._fullDimCount=_.fullDimensionCount,this._updateDimOmitted(_.dimensionOmitted)}return _e.prototype.isDimensionOmitted=function(){return this._dimOmitted},_e.prototype._updateDimOmitted=function(_){this._dimOmitted=_,_&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},_e.prototype.getSourceDimensionIndex=function(_){return retrieve2(this._dimNameMap.get(_),-1)},_e.prototype.getSourceDimension=function(_){var et=this.source.dimensionsDefine;if(et)return et[_]},_e.prototype.makeStoreSchema=function(){for(var _=this._fullDimCount,et=shouldRetrieveDataByName(this.source),tt=!shouldOmitUnusedDimensions(_),nt="",it=[],at=0,ot=0;at<_;at++){var st=void 0,dt=void 0,ht=void 0,ct=this.dimensions[ot];if(ct&&ct.storeDimIndex===at)st=et?ct.name:null,dt=ct.type,ht=ct.ordinalMeta,ot++;else{var ut=this.getSourceDimension(at);ut&&(st=et?ut.name:null,dt=ut.type)}it.push({property:st,type:dt,ordinalMeta:ht}),et&&st!=null&&(!ct||!ct.isCalculationCoord)&&(nt+=tt?st.replace(/\`/g,"`1").replace(/\$/g,"`2"):st),nt+="$",nt+=dimTypeShort[dt]||"f",ht&&(nt+=ht.uid),nt+="$"}var ft=this.source,gt=[ft.seriesLayoutBy,ft.startIndex,nt].join("$$");return{dimensions:it,hash:gt}},_e.prototype.makeOutputDimensionNames=function(){for(var _=[],et=0,tt=0;et<this._fullDimCount;et++){var nt=void 0,it=this.dimensions[tt];if(it&&it.storeDimIndex===et)it.isCalculationCoord||(nt=it.name),tt++;else{var at=this.getSourceDimension(et);at&&(nt=at.name)}_.push(nt)}return _},_e.prototype.appendCalculationDimension=function(_){this.dimensions.push(_),_.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},_e}();function isSeriesDataSchema(_e){return _e instanceof SeriesDataSchema}function createDimNameMap(_e){for(var _=createHashMap(),et=0;et<(_e||[]).length;et++){var tt=_e[et],nt=isObject$4(tt)?tt.name:tt;nt!=null&&_.get(nt)==null&&_.set(nt,et)}return _}function ensureSourceDimNameMap(_e){var _=inner$h(_e);return _.dimNameMap||(_.dimNameMap=createDimNameMap(_e.dimensionsDefine))}function shouldOmitUnusedDimensions(_e){return _e>30}var isObject$2=isObject$4,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function _e(_,et){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var tt,nt=!1;isSeriesDataSchema(_)?(tt=_.dimensions,this._dimOmitted=_.isDimensionOmitted(),this._schema=_):(nt=!0,tt=_),tt=tt||["x","y"];for(var it={},at=[],ot={},st=!1,dt={},ht=0;ht<tt.length;ht++){var ct=tt[ht],ut=isString$1(ct)?new SeriesDimensionDefine({name:ct}):ct instanceof SeriesDimensionDefine?ct:new SeriesDimensionDefine(ct),ft=ut.name;ut.type=ut.type||"float",ut.coordDim||(ut.coordDim=ft,ut.coordDimIndex=0);var gt=ut.otherDims=ut.otherDims||{};at.push(ft),it[ft]=ut,dt[ft]!=null&&(st=!0),ut.createInvertedIndices&&(ot[ft]=[]),gt.itemName===0&&(this._nameDimIdx=ht),gt.itemId===0&&(this._idDimIdx=ht),nt&&(ut.storeDimIndex=ht)}if(this.dimensions=at,this._dimInfos=it,this._initGetDimensionInfo(st),this.hostModel=et,this._invertedIndicesMap=ot,this._dimOmitted){var mt=this._dimIdxToName=createHashMap();each$f(at,function(vt){mt.set(it[vt].storeDimIndex,vt)})}}return _e.prototype.getDimension=function(_){var et=this._recognizeDimIndex(_);if(et==null)return _;if(et=_,!this._dimOmitted)return this.dimensions[et];var tt=this._dimIdxToName.get(et);if(tt!=null)return tt;var nt=this._schema.getSourceDimension(et);if(nt)return nt.name},_e.prototype.getDimensionIndex=function(_){var et=this._recognizeDimIndex(_);if(et!=null)return et;if(_==null)return-1;var tt=this._getDimInfo(_);return tt?tt.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(_):-1},_e.prototype._recognizeDimIndex=function(_){if(isNumber(_)||_!=null&&!isNaN(_)&&!this._getDimInfo(_)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(_)<0))return+_},_e.prototype._getStoreDimIndex=function(_){var et=this.getDimensionIndex(_);return et},_e.prototype.getDimensionInfo=function(_){return this._getDimInfo(this.getDimension(_))},_e.prototype._initGetDimensionInfo=function(_){var et=this._dimInfos;this._getDimInfo=_?function(tt){return et.hasOwnProperty(tt)?et[tt]:void 0}:function(tt){return et[tt]}},_e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},_e.prototype.mapDimension=function(_,et){var tt=this._dimSummary;if(et==null)return tt.encodeFirstDimNotExtra[_];var nt=tt.encode[_];return nt?nt[et]:null},_e.prototype.mapDimensionsAll=function(_){var et=this._dimSummary,tt=et.encode[_];return(tt||[]).slice()},_e.prototype.getStore=function(){return this._store},_e.prototype.initData=function(_,et,tt){var nt=this,it;if(_ instanceof DataStore&&(it=_),!it){var at=this.dimensions,ot=isSourceInstance(_)||isArrayLike(_)?new DefaultDataProvider(_,at.length):_;it=new DataStore;var st=map(at,function(dt){return{type:nt._dimInfos[dt].type,property:dt}});it.initData(ot,st,tt)}this._store=it,this._nameList=(et||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,it.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},_e.prototype.appendData=function(_){var et=this._store.appendData(_);this._doInit(et[0],et[1])},_e.prototype.appendValues=function(_,et){var tt=this._store.appendValues(_,et&&et.length),nt=tt.start,it=tt.end,at=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),et)for(var ot=nt;ot<it;ot++){var st=ot-nt;this._nameList[ot]=et[st],at&&makeIdFromName(this,ot)}},_e.prototype._updateOrdinalMeta=function(){for(var _=this._store,et=this.dimensions,tt=0;tt<et.length;tt++){var nt=this._dimInfos[et[tt]];nt.ordinalMeta&&_.collectOrdinalMeta(nt.storeDimIndex,nt.ordinalMeta)}},_e.prototype._shouldMakeIdFromName=function(){var _=this._store.getProvider();return this._idDimIdx==null&&_.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!_.fillStorage},_e.prototype._doInit=function(_,et){if(!(_>=et)){var tt=this._store,nt=tt.getProvider();this._updateOrdinalMeta();var it=this._nameList,at=this._idList,ot=nt.getSource().sourceFormat,st=ot===SOURCE_FORMAT_ORIGINAL;if(st&&!nt.pure)for(var dt=[],ht=_;ht<et;ht++){var ct=nt.getItem(ht,dt);if(!this.hasItemOption&&isDataItemOption(ct)&&(this.hasItemOption=!0),ct){var ut=ct.name;it[ht]==null&&ut!=null&&(it[ht]=convertOptionIdName(ut,null));var ft=ct.id;at[ht]==null&&ft!=null&&(at[ht]=convertOptionIdName(ft,null))}}if(this._shouldMakeIdFromName())for(var ht=_;ht<et;ht++)makeIdFromName(this,ht);prepareInvertedIndex(this)}},_e.prototype.getApproximateExtent=function(_){return this._approximateExtent[_]||this._store.getDataExtent(this._getStoreDimIndex(_))},_e.prototype.setApproximateExtent=function(_,et){et=this.getDimension(et),this._approximateExtent[et]=_.slice()},_e.prototype.getCalculationInfo=function(_){return this._calculationInfo[_]},_e.prototype.setCalculationInfo=function(_,et){isObject$2(_)?extend(this._calculationInfo,_):this._calculationInfo[_]=et},_e.prototype.getName=function(_){var et=this.getRawIndex(_),tt=this._nameList[et];return tt==null&&this._nameDimIdx!=null&&(tt=getIdNameFromStore(this,this._nameDimIdx,et)),tt==null&&(tt=""),tt},_e.prototype._getCategory=function(_,et){var tt=this._store.get(_,et),nt=this._store.getOrdinalMeta(_);return nt?nt.categories[tt]:tt},_e.prototype.getId=function(_){return getId(this,this.getRawIndex(_))},_e.prototype.count=function(){return this._store.count()},_e.prototype.get=function(_,et){var tt=this._store,nt=this._dimInfos[_];if(nt)return tt.get(nt.storeDimIndex,et)},_e.prototype.getByRawIndex=function(_,et){var tt=this._store,nt=this._dimInfos[_];if(nt)return tt.getByRawIndex(nt.storeDimIndex,et)},_e.prototype.getIndices=function(){return this._store.getIndices()},_e.prototype.getDataExtent=function(_){return this._store.getDataExtent(this._getStoreDimIndex(_))},_e.prototype.getSum=function(_){return this._store.getSum(this._getStoreDimIndex(_))},_e.prototype.getMedian=function(_){return this._store.getMedian(this._getStoreDimIndex(_))},_e.prototype.getValues=function(_,et){var tt=this,nt=this._store;return isArray$1(_)?nt.getValues(map(_,function(it){return tt._getStoreDimIndex(it)}),et):nt.getValues(_)},_e.prototype.hasValue=function(_){for(var et=this._dimSummary.dataDimIndicesOnCoord,tt=0,nt=et.length;tt<nt;tt++)if(isNaN(this._store.get(et[tt],_)))return!1;return!0},_e.prototype.indexOfName=function(_){for(var et=0,tt=this._store.count();et<tt;et++)if(this.getName(et)===_)return et;return-1},_e.prototype.getRawIndex=function(_){return this._store.getRawIndex(_)},_e.prototype.indexOfRawIndex=function(_){return this._store.indexOfRawIndex(_)},_e.prototype.rawIndexOf=function(_,et){var tt=_&&this._invertedIndicesMap[_],nt=tt&&tt[et];return nt==null||isNaN(nt)?INDEX_NOT_FOUND:nt},_e.prototype.indicesOfNearest=function(_,et,tt){return this._store.indicesOfNearest(this._getStoreDimIndex(_),et,tt)},_e.prototype.each=function(_,et,tt){isFunction$3(_)&&(tt=et,et=_,_=[]);var nt=tt||this,it=map(normalizeDimensions(_),this._getStoreDimIndex,this);this._store.each(it,nt?bind$2(et,nt):et)},_e.prototype.filterSelf=function(_,et,tt){isFunction$3(_)&&(tt=et,et=_,_=[]);var nt=tt||this,it=map(normalizeDimensions(_),this._getStoreDimIndex,this);return this._store=this._store.filter(it,nt?bind$2(et,nt):et),this},_e.prototype.selectRange=function(_){var et=this,tt={},nt=keys(_);return each$f(nt,function(it){var at=et._getStoreDimIndex(it);tt[at]=_[it]}),this._store=this._store.selectRange(tt),this},_e.prototype.mapArray=function(_,et,tt){isFunction$3(_)&&(tt=et,et=_,_=[]),tt=tt||this;var nt=[];return this.each(_,function(){nt.push(et&&et.apply(this,arguments))},tt),nt},_e.prototype.map=function(_,et,tt,nt){var it=tt||nt||this,at=map(normalizeDimensions(_),this._getStoreDimIndex,this),ot=cloneListForMapAndSample(this);return ot._store=this._store.map(at,it?bind$2(et,it):et),ot},_e.prototype.modify=function(_,et,tt,nt){var it=tt||nt||this,at=map(normalizeDimensions(_),this._getStoreDimIndex,this);this._store.modify(at,it?bind$2(et,it):et)},_e.prototype.downSample=function(_,et,tt,nt){var it=cloneListForMapAndSample(this);return it._store=this._store.downSample(this._getStoreDimIndex(_),et,tt,nt),it},_e.prototype.minmaxDownSample=function(_,et){var tt=cloneListForMapAndSample(this);return tt._store=this._store.minmaxDownSample(this._getStoreDimIndex(_),et),tt},_e.prototype.lttbDownSample=function(_,et){var tt=cloneListForMapAndSample(this);return tt._store=this._store.lttbDownSample(this._getStoreDimIndex(_),et),tt},_e.prototype.getRawDataItem=function(_){return this._store.getRawDataItem(_)},_e.prototype.getItemModel=function(_){var et=this.hostModel,tt=this.getRawDataItem(_);return new Model(tt,et,et&&et.ecModel)},_e.prototype.diff=function(_){var et=this;return new DataDiffer(_?_.getStore().getIndices():[],this.getStore().getIndices(),function(tt){return getId(_,tt)},function(tt){return getId(et,tt)})},_e.prototype.getVisual=function(_){var et=this._visual;return et&&et[_]},_e.prototype.setVisual=function(_,et){this._visual=this._visual||{},isObject$2(_)?extend(this._visual,_):this._visual[_]=et},_e.prototype.getItemVisual=function(_,et){var tt=this._itemVisuals[_],nt=tt&&tt[et];return nt??this.getVisual(et)},_e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},_e.prototype.ensureUniqueItemVisual=function(_,et){var tt=this._itemVisuals,nt=tt[_];nt||(nt=tt[_]={});var it=nt[et];return it==null&&(it=this.getVisual(et),isArray$1(it)?it=it.slice():isObject$2(it)&&(it=extend({},it)),nt[et]=it),it},_e.prototype.setItemVisual=function(_,et,tt){var nt=this._itemVisuals[_]||{};this._itemVisuals[_]=nt,isObject$2(et)?extend(nt,et):nt[et]=tt},_e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},_e.prototype.setLayout=function(_,et){isObject$2(_)?extend(this._layout,_):this._layout[_]=et},_e.prototype.getLayout=function(_){return this._layout[_]},_e.prototype.getItemLayout=function(_){return this._itemLayouts[_]},_e.prototype.setItemLayout=function(_,et,tt){this._itemLayouts[_]=tt?extend(this._itemLayouts[_]||{},et):et},_e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},_e.prototype.setItemGraphicEl=function(_,et){var tt=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(tt,this.dataType,_,et),this._graphicEls[_]=et},_e.prototype.getItemGraphicEl=function(_){return this._graphicEls[_]},_e.prototype.eachItemGraphicEl=function(_,et){each$f(this._graphicEls,function(tt,nt){tt&&_&&_.call(et,tt,nt)})},_e.prototype.cloneShallow=function(_){return _||(_=new _e(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(_,this),_._store=this._store,_},_e.prototype.wrapMethod=function(_,et){var tt=this[_];isFunction$3(tt)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(_),this[_]=function(){var nt=tt.apply(this,arguments);return et.apply(this,[nt].concat(slice(arguments)))})},_e.internalField=function(){prepareInvertedIndex=function(_){var et=_._invertedIndicesMap;each$f(et,function(tt,nt){var it=_._dimInfos[nt],at=it.ordinalMeta,ot=_._store;if(at){tt=et[nt]=new CtorInt32Array(at.categories.length);for(var st=0;st<tt.length;st++)tt[st]=INDEX_NOT_FOUND;for(var st=0;st<ot.count();st++)tt[ot.get(it.storeDimIndex,st)]=st}})},getIdNameFromStore=function(_,et,tt){return convertOptionIdName(_._getCategory(et,tt),null)},getId=function(_,et){var tt=_._idList[et];return tt==null&&_._idDimIdx!=null&&(tt=getIdNameFromStore(_,_._idDimIdx,et)),tt==null&&(tt=ID_PREFIX+et),tt},normalizeDimensions=function(_){return isArray$1(_)||(_=_!=null?[_]:[]),_},cloneListForMapAndSample=function(_){var et=new _e(_._schema?_._schema:map(_.dimensions,_._getDimInfo,_),_.hostModel);return transferProperties(et,_),et},transferProperties=function(_,et){each$f(TRANSFERABLE_PROPERTIES.concat(et.__wrappedMethods||[]),function(tt){et.hasOwnProperty(tt)&&(_[tt]=et[tt])}),_.__wrappedMethods=et.__wrappedMethods,each$f(CLONE_PROPERTIES,function(tt){_[tt]=clone$4(et[tt])}),_._calculationInfo=extend({},et._calculationInfo)},makeIdFromName=function(_,et){var tt=_._nameList,nt=_._idList,it=_._nameDimIdx,at=_._idDimIdx,ot=tt[et],st=nt[et];if(ot==null&&it!=null&&(tt[et]=ot=getIdNameFromStore(_,it,et)),st==null&&at!=null&&(nt[et]=st=getIdNameFromStore(_,at,et)),st==null&&ot!=null){var dt=_._nameRepeatCount,ht=dt[ot]=(dt[ot]||0)+1;st=ot,ht>1&&(st+="__ec__"+ht),nt[et]=st}}}(),_e}();function createDimensions(_e,_){return prepareSeriesDataSchema(_e,_).dimensions}function prepareSeriesDataSchema(_e,_){isSourceInstance(_e)||(_e=createSourceFromSeriesDataOption(_e)),_=_||{};var et=_.coordDimensions||[],tt=_.dimensionsDefine||_e.dimensionsDefine||[],nt=createHashMap(),it=[],at=getDimCount(_e,et,tt,_.dimensionsCount),ot=_.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(at),st=tt===_e.dimensionsDefine,dt=st?ensureSourceDimNameMap(_e):createDimNameMap(tt),ht=_.encodeDefine;!ht&&_.encodeDefaulter&&(ht=_.encodeDefaulter(_e,at));for(var ct=createHashMap(ht),ut=new CtorInt32Array$1(at),ft=0;ft<ut.length;ft++)ut[ft]=-1;function gt(Et){var At=ut[Et];if(At<0){var Pt=tt[Et],Rt=isObject$4(Pt)?Pt:{name:Pt},It=new SeriesDimensionDefine,Mt=Rt.name;Mt!=null&&dt.get(Mt)!=null&&(It.name=It.displayName=Mt),Rt.type!=null&&(It.type=Rt.type),Rt.displayName!=null&&(It.displayName=Rt.displayName);var Ot=it.length;return ut[Et]=Ot,It.storeDimIndex=Et,it.push(It),It}return it[At]}if(!ot)for(var ft=0;ft<at;ft++)gt(ft);ct.each(function(Et,At){var Pt=normalizeToArray(Et).slice();if(Pt.length===1&&!isString$1(Pt[0])&&Pt[0]<0){ct.set(At,!1);return}var Rt=ct.set(At,[]);each$f(Pt,function(It,Mt){var Ot=isString$1(It)?dt.get(It):It;Ot!=null&&Ot<at&&(Rt[Mt]=Ot,vt(gt(Ot),At,Mt))})});var mt=0;each$f(et,function(Et){var At,Pt,Rt,It;if(isString$1(Et))At=Et,It={};else{It=Et,At=It.name;var Mt=It.ordinalMeta;It.ordinalMeta=null,It=extend({},It),It.ordinalMeta=Mt,Pt=It.dimsDef,Rt=It.otherDims,It.name=It.coordDim=It.coordDimIndex=It.dimsDef=It.otherDims=null}var Ot=ct.get(At);if(Ot!==!1){if(Ot=normalizeToArray(Ot),!Ot.length)for(var $t=0;$t<(Pt&&Pt.length||1);$t++){for(;mt<at&&gt(mt).coordDim!=null;)mt++;mt<at&&Ot.push(mt++)}each$f(Ot,function(Lt,kt){var Nt=gt(Lt);if(st&&It.type!=null&&(Nt.type=It.type),vt(defaults(Nt,It),At,kt),Nt.name==null&&Pt){var Vt=Pt[kt];!isObject$4(Vt)&&(Vt={name:Vt}),Nt.name=Nt.displayName=Vt.name,Nt.defaultTooltip=Vt.defaultTooltip}Rt&&defaults(Nt.otherDims,Rt)})}});function vt(Et,At,Pt){VISUAL_DIMENSIONS.get(At)!=null?Et.otherDims[At]=Pt:(Et.coordDim=At,Et.coordDimIndex=Pt,nt.set(At,!0))}var yt=_.generateCoord,bt=_.generateCoordCount,_t=bt!=null;bt=yt?bt||1:0;var xt=yt||"value";function St(Et){Et.name==null&&(Et.name=Et.coordDim)}if(ot)each$f(it,function(Et){St(Et)}),it.sort(function(Et,At){return Et.storeDimIndex-At.storeDimIndex});else for(var Tt=0;Tt<at;Tt++){var wt=gt(Tt),Ct=wt.coordDim;Ct==null&&(wt.coordDim=genCoordDimName(xt,nt,_t),wt.coordDimIndex=0,(!yt||bt<=0)&&(wt.isExtraCoord=!0),bt--),St(wt),wt.type==null&&(guessOrdinal(_e,Tt)===BE_ORDINAL.Must||wt.isExtraCoord&&(wt.otherDims.itemName!=null||wt.otherDims.seriesName!=null))&&(wt.type="ordinal")}return removeDuplication(it),new SeriesDataSchema({source:_e,dimensions:it,fullDimensionCount:at,dimensionOmitted:ot})}function removeDuplication(_e){for(var _=createHashMap(),et=0;et<_e.length;et++){var tt=_e[et],nt=tt.name,it=_.get(nt)||0;it>0&&(tt.name=nt+(it-1)),it++,_.set(nt,it)}}function getDimCount(_e,_,et,tt){var nt=Math.max(_e.dimensionsDetectedCount||1,_.length,et.length,tt||0);return each$f(_,function(it){var at;isObject$4(it)&&(at=it.dimsDef)&&(nt=Math.max(nt,at.length))}),nt}function genCoordDimName(_e,_,et){if(et||_.hasKey(_e)){for(var tt=0;_.hasKey(_e+tt);)tt++;_e+=tt}return _.set(_e,!0),_e}var CoordSysInfo=function(){function _e(_){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=_}return _e}();function getCoordSysInfoBySeries(_e){var _=_e.get("coordinateSystem"),et=new CoordSysInfo(_),tt=fetchers[_];if(tt)return tt(_e,et,et.axisMap,et.categoryAxisMap),et}var fetchers={cartesian2d:function(_e,_,et,tt){var nt=_e.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],it=_e.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];_.coordSysDims=["x","y"],et.set("x",nt),et.set("y",it),isCategory(nt)&&(tt.set("x",nt),_.firstCategoryDimIndex=0),isCategory(it)&&(tt.set("y",it),_.firstCategoryDimIndex==null&&(_.firstCategoryDimIndex=1))},singleAxis:function(_e,_,et,tt){var nt=_e.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];_.coordSysDims=["single"],et.set("single",nt),isCategory(nt)&&(tt.set("single",nt),_.firstCategoryDimIndex=0)},polar:function(_e,_,et,tt){var nt=_e.getReferringComponents("polar",SINGLE_REFERRING).models[0],it=nt.findAxisModel("radiusAxis"),at=nt.findAxisModel("angleAxis");_.coordSysDims=["radius","angle"],et.set("radius",it),et.set("angle",at),isCategory(it)&&(tt.set("radius",it),_.firstCategoryDimIndex=0),isCategory(at)&&(tt.set("angle",at),_.firstCategoryDimIndex==null&&(_.firstCategoryDimIndex=1))},geo:function(_e,_,et,tt){_.coordSysDims=["lng","lat"]},parallel:function(_e,_,et,tt){var nt=_e.ecModel,it=nt.getComponent("parallel",_e.get("parallelIndex")),at=_.coordSysDims=it.dimensions.slice();each$f(it.parallelAxisIndex,function(ot,st){var dt=nt.getComponent("parallelAxis",ot),ht=at[st];et.set(ht,dt),isCategory(dt)&&(tt.set(ht,dt),_.firstCategoryDimIndex==null&&(_.firstCategoryDimIndex=st))})}};function isCategory(_e){return _e.get("type")==="category"}function enableDataStack(_e,_,et){et=et||{};var tt=et.byIndex,nt=et.stackedCoordDimension,it,at,ot;isLegacyDimensionsInput(_)?it=_:(at=_.schema,it=at.dimensions,ot=_.store);var st=!!(_e&&_e.get("stack")),dt,ht,ct,ut;if(each$f(it,function(bt,_t){isString$1(bt)&&(it[_t]=bt={name:bt}),st&&!bt.isExtraCoord&&(!tt&&!dt&&bt.ordinalMeta&&(dt=bt),!ht&&bt.type!=="ordinal"&&bt.type!=="time"&&(!nt||nt===bt.coordDim)&&(ht=bt))}),ht&&!tt&&!dt&&(tt=!0),ht){ct="__\0ecstackresult_"+_e.id,ut="__\0ecstackedover_"+_e.id,dt&&(dt.createInvertedIndices=!0);var ft=ht.coordDim,gt=ht.type,mt=0;each$f(it,function(bt){bt.coordDim===ft&&mt++});var vt={name:ct,coordDim:ft,coordDimIndex:mt,type:gt,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:it.length},yt={name:ut,coordDim:ut,coordDimIndex:mt+1,type:gt,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:it.length+1};at?(ot&&(vt.storeDimIndex=ot.ensureCalculationDimension(ut,gt),yt.storeDimIndex=ot.ensureCalculationDimension(ct,gt)),at.appendCalculationDimension(vt),at.appendCalculationDimension(yt)):(it.push(vt),it.push(yt))}return{stackedDimension:ht&&ht.name,stackedByDimension:dt&&dt.name,isStackedByIndex:tt,stackedOverDimension:ut,stackResultDimension:ct}}function isLegacyDimensionsInput(_e){return!isSeriesDataSchema(_e.schema)}function isDimensionStacked(_e,_){return!!_&&_===_e.getCalculationInfo("stackedDimension")}function getStackedDimension(_e,_){return isDimensionStacked(_e,_)?_e.getCalculationInfo("stackResultDimension"):_}function getCoordSysDimDefs(_e,_){var et=_e.get("coordinateSystem"),tt=CoordinateSystemManager.get(et),nt;return _&&_.coordSysDims&&(nt=map$1(_.coordSysDims,function(it){var at={name:it},ot=_.axisMap.get(it);if(ot){var st=ot.get("type");at.type=getDimensionTypeByAxis(st)}return at})),nt||(nt=tt&&(tt.getDimensionsInfo?tt.getDimensionsInfo():tt.dimensions.slice())||["x","y"]),nt}function injectOrdinalMeta(_e,_,et){var tt,nt;return et&&each$f(_e,function(it,at){var ot=it.coordDim,st=et.categoryAxisMap.get(ot);st&&(tt==null&&(tt=at),it.ordinalMeta=st.getOrdinalMeta(),_&&(it.createInvertedIndices=!0)),it.otherDims.itemName!=null&&(nt=!0)}),!nt&&tt!=null&&(_e[tt].otherDims.itemName=0),tt}function createSeriesData(_e,_,et){et=et||{};var tt=_.getSourceManager(),nt,it=!1;_e?(it=!0,nt=createSourceFromSeriesDataOption(_e)):(nt=tt.getSource(),it=nt.sourceFormat===SOURCE_FORMAT_ORIGINAL);var at=getCoordSysInfoBySeries(_),ot=getCoordSysDimDefs(_,at),st=et.useEncodeDefaulter,dt=isFunction$3(st)?st:st?curry$1(makeSeriesEncodeForAxisCoordSys,ot,_):null,ht={coordDimensions:ot,generateCoord:et.generateCoord,encodeDefine:_.getEncode(),encodeDefaulter:dt,canOmitUnusedDimensions:!it},ct=prepareSeriesDataSchema(nt,ht),ut=injectOrdinalMeta(ct.dimensions,et.createInvertedIndices,at),ft=it?null:tt.getSharedDataStore(ct),gt=enableDataStack(_,{schema:ct,store:ft}),mt=new SeriesData(ct,_);mt.setCalculationInfo(gt);var vt=ut!=null&&isNeedCompleteOrdinalData(nt)?function(yt,bt,_t,xt){return xt===ut?_t:this.defaultDimValueGetter(yt,bt,_t,xt)}:null;return mt.hasItemOption=!1,mt.initData(it?nt:ft,null,vt),mt}function isNeedCompleteOrdinalData(_e){if(_e.sourceFormat===SOURCE_FORMAT_ORIGINAL){var _=firstDataNotNull(_e.data||[]);return!isArray$1(getDataItemValue(_))}}function firstDataNotNull(_e){for(var _=0;_<_e.length&&_e[_]==null;)_++;return _e[_]}var Scale=function(){function _e(_){this._setting=_||{},this._extent=[1/0,-1/0]}return _e.prototype.getSetting=function(_){return this._setting[_]},_e.prototype.unionExtent=function(_){var et=this._extent;_[0]<et[0]&&(et[0]=_[0]),_[1]>et[1]&&(et[1]=_[1])},_e.prototype.unionExtentFromData=function(_,et){this.unionExtent(_.getApproximateExtent(et))},_e.prototype.getExtent=function(){return this._extent.slice()},_e.prototype.setExtent=function(_,et){var tt=this._extent;isNaN(_)||(tt[0]=_),isNaN(et)||(tt[1]=et)},_e.prototype.isInExtentRange=function(_){return this._extent[0]<=_&&this._extent[1]>=_},_e.prototype.isBlank=function(){return this._isBlank},_e.prototype.setBlank=function(_){this._isBlank=_},_e}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function _e(_){this.categories=_.categories||[],this._needCollect=_.needCollect,this._deduplication=_.deduplication,this.uid=++uidBase}return _e.createByAxisModel=function(_){var et=_.option,tt=et.data,nt=tt&&map$1(tt,getName);return new _e({categories:nt,needCollect:!nt,deduplication:et.dedplication!==!1})},_e.prototype.getOrdinal=function(_){return this._getOrCreateMap().get(_)},_e.prototype.parseAndCollect=function(_){var et,tt=this._needCollect;if(!isString$1(_)&&!tt)return _;if(tt&&!this._deduplication)return et=this.categories.length,this.categories[et]=_,et;var nt=this._getOrCreateMap();return et=nt.get(_),et==null&&(tt?(et=this.categories.length,this.categories[et]=_,nt.set(_,et)):et=NaN),et},_e.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},_e}();function getName(_e){return isObject$4(_e)&&_e.value!=null?_e.value:_e+""}function isIntervalOrLogScale(_e){return _e.type==="interval"||_e.type==="log"}function intervalScaleNiceTicks(_e,_,et,tt){var nt={},it=_e[1]-_e[0],at=nt.interval=nice(it/_,!0);et!=null&&at<et&&(at=nt.interval=et),tt!=null&&at>tt&&(at=nt.interval=tt);var ot=nt.intervalPrecision=getIntervalPrecision(at),st=nt.niceTickExtent=[round$3(Math.ceil(_e[0]/at)*at,ot),round$3(Math.floor(_e[1]/at)*at,ot)];return fixExtent(st,_e),nt}function increaseInterval(_e){var _=Math.pow(10,quantityExponent(_e)),et=_e/_;return et?et===2?et=3:et===3?et=5:et*=2:et=1,round$3(et*_)}function getIntervalPrecision(_e){return getPrecision(_e)+2}function clamp(_e,_,et){_e[_]=Math.max(Math.min(_e[_],et[1]),et[0])}function fixExtent(_e,_){!isFinite(_e[0])&&(_e[0]=_[0]),!isFinite(_e[1])&&(_e[1]=_[1]),clamp(_e,0,_),clamp(_e,1,_),_e[0]>_e[1]&&(_e[0]=_e[1])}function contain$1(_e,_){return _e>=_[0]&&_e<=_[1]}function normalize$2(_e,_){return _[1]===_[0]?.5:(_e-_[0])/(_[1]-_[0])}function scale(_e,_){return _e*(_[1]-_[0])+_[0]}var OrdinalScale=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;tt.type="ordinal";var nt=tt.getSetting("ordinalMeta");return nt||(nt=new OrdinalMeta({})),isArray$1(nt)&&(nt=new OrdinalMeta({categories:map$1(nt,function(it){return isObject$4(it)?it.value:it})})),tt._ordinalMeta=nt,tt._extent=tt.getSetting("extent")||[0,nt.categories.length-1],tt}return _.prototype.parse=function(et){return et==null?NaN:isString$1(et)?this._ordinalMeta.getOrdinal(et):Math.round(et)},_.prototype.contain=function(et){return et=this.parse(et),contain$1(et,this._extent)&&this._ordinalMeta.categories[et]!=null},_.prototype.normalize=function(et){return et=this._getTickNumber(this.parse(et)),normalize$2(et,this._extent)},_.prototype.scale=function(et){return et=Math.round(scale(et,this._extent)),this.getRawOrdinalNumber(et)},_.prototype.getTicks=function(){for(var et=[],tt=this._extent,nt=tt[0];nt<=tt[1];)et.push({value:nt}),nt++;return et},_.prototype.getMinorTicks=function(et){},_.prototype.setSortInfo=function(et){if(et==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var tt=et.ordinalNumbers,nt=this._ordinalNumbersByTick=[],it=this._ticksByOrdinalNumber=[],at=0,ot=this._ordinalMeta.categories.length,st=Math.min(ot,tt.length);at<st;++at){var dt=tt[at];nt[at]=dt,it[dt]=at}for(var ht=0;at<ot;++at){for(;it[ht]!=null;)ht++;nt.push(ht),it[ht]=at}},_.prototype._getTickNumber=function(et){var tt=this._ticksByOrdinalNumber;return tt&&et>=0&&et<tt.length?tt[et]:et},_.prototype.getRawOrdinalNumber=function(et){var tt=this._ordinalNumbersByTick;return tt&&et>=0&&et<tt.length?tt[et]:et},_.prototype.getLabel=function(et){if(!this.isBlank()){var tt=this.getRawOrdinalNumber(et.value),nt=this._ordinalMeta.categories[tt];return nt==null?"":nt+""}},_.prototype.count=function(){return this._extent[1]-this._extent[0]+1},_.prototype.unionExtentFromData=function(et,tt){this.unionExtent(et.getApproximateExtent(tt))},_.prototype.isInExtentRange=function(et){return et=this._getTickNumber(et),this._extent[0]<=et&&this._extent[1]>=et},_.prototype.getOrdinalMeta=function(){return this._ordinalMeta},_.prototype.calcNiceTicks=function(){},_.prototype.calcNiceExtent=function(){},_.type="ordinal",_}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$3,IntervalScale=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type="interval",et._interval=0,et._intervalPrecision=2,et}return _.prototype.parse=function(et){return et},_.prototype.contain=function(et){return contain$1(et,this._extent)},_.prototype.normalize=function(et){return normalize$2(et,this._extent)},_.prototype.scale=function(et){return scale(et,this._extent)},_.prototype.setExtent=function(et,tt){var nt=this._extent;isNaN(et)||(nt[0]=parseFloat(et)),isNaN(tt)||(nt[1]=parseFloat(tt))},_.prototype.unionExtent=function(et){var tt=this._extent;et[0]<tt[0]&&(tt[0]=et[0]),et[1]>tt[1]&&(tt[1]=et[1]),this.setExtent(tt[0],tt[1])},_.prototype.getInterval=function(){return this._interval},_.prototype.setInterval=function(et){this._interval=et,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(et)},_.prototype.getTicks=function(et){var tt=this._interval,nt=this._extent,it=this._niceExtent,at=this._intervalPrecision,ot=[];if(!tt)return ot;var st=1e4;nt[0]<it[0]&&(et?ot.push({value:roundNumber(it[0]-tt,at)}):ot.push({value:nt[0]}));for(var dt=it[0];dt<=it[1]&&(ot.push({value:dt}),dt=roundNumber(dt+tt,at),dt!==ot[ot.length-1].value);)if(ot.length>st)return[];var ht=ot.length?ot[ot.length-1].value:it[1];return nt[1]>ht&&(et?ot.push({value:roundNumber(ht+tt,at)}):ot.push({value:nt[1]})),ot},_.prototype.getMinorTicks=function(et){for(var tt=this.getTicks(!0),nt=[],it=this.getExtent(),at=1;at<tt.length;at++){for(var ot=tt[at],st=tt[at-1],dt=0,ht=[],ct=ot.value-st.value,ut=ct/et;dt<et-1;){var ft=roundNumber(st.value+(dt+1)*ut);ft>it[0]&&ft<it[1]&&ht.push(ft),dt++}nt.push(ht)}return nt},_.prototype.getLabel=function(et,tt){if(et==null)return"";var nt=tt&&tt.precision;nt==null?nt=getPrecision(et.value)||0:nt==="auto"&&(nt=this._intervalPrecision);var it=roundNumber(et.value,nt,!0);return addCommas(it)},_.prototype.calcNiceTicks=function(et,tt,nt){et=et||5;var it=this._extent,at=it[1]-it[0];if(isFinite(at)){at<0&&(at=-at,it.reverse());var ot=intervalScaleNiceTicks(it,et,tt,nt);this._intervalPrecision=ot.intervalPrecision,this._interval=ot.interval,this._niceExtent=ot.niceTickExtent}},_.prototype.calcNiceExtent=function(et){var tt=this._extent;if(tt[0]===tt[1])if(tt[0]!==0){var nt=Math.abs(tt[0]);et.fixMax||(tt[1]+=nt/2),tt[0]-=nt/2}else tt[1]=1;var it=tt[1]-tt[0];isFinite(it)||(tt[0]=0,tt[1]=1),this.calcNiceTicks(et.splitNumber,et.minInterval,et.maxInterval);var at=this._interval;et.fixMin||(tt[0]=roundNumber(Math.floor(tt[0]/at)*at)),et.fixMax||(tt[1]=roundNumber(Math.ceil(tt[1]/at)*at))},_.prototype.setNiceExtent=function(et,tt){this._niceExtent=[et,tt]},_.type="interval",_}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(_e){return isArray$1(_e)?supportFloat32Array?new Float32Array(_e):_e:new Float32ArrayCtor(_e)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(_e){return _e.get("stack")||STACK_PREFIX+_e.seriesIndex}function getAxisKey$1(_e){return _e.dim+_e.index}function getLayoutOnAxis(_e){var _=[],et=_e.axis,tt="axis0";if(et.type==="category"){for(var nt=et.getBandWidth(),it=0;it<_e.count;it++)_.push(defaults({bandWidth:nt,axisKey:tt,stackId:STACK_PREFIX+it},_e));for(var at=doCalBarWidthAndOffset(_),ot=[],it=0;it<_e.count;it++){var st=at[tt][STACK_PREFIX+it];st.offsetCenter=st.offset+st.width/2,ot.push(st)}return ot}}function prepareLayoutBarSeries(_e,_){var et=[];return _.eachSeriesByType(_e,function(tt){isOnCartesian(tt)&&et.push(tt)}),et}function getValueAxesMinGaps(_e){var _={};each$f(_e,function(st){var dt=st.coordinateSystem,ht=dt.getBaseAxis();if(!(ht.type!=="time"&&ht.type!=="value"))for(var ct=st.getData(),ut=ht.dim+"_"+ht.index,ft=ct.getDimensionIndex(ct.mapDimension(ht.dim)),gt=ct.getStore(),mt=0,vt=gt.count();mt<vt;++mt){var yt=gt.get(ft,mt);_[ut]?_[ut].push(yt):_[ut]=[yt]}});var et={};for(var tt in _)if(_.hasOwnProperty(tt)){var nt=_[tt];if(nt){nt.sort(function(st,dt){return st-dt});for(var it=null,at=1;at<nt.length;++at){var ot=nt[at]-nt[at-1];ot>0&&(it=it===null?ot:Math.min(it,ot))}et[tt]=it}}return et}function makeColumnLayout(_e){var _=getValueAxesMinGaps(_e),et=[];return each$f(_e,function(tt){var nt=tt.coordinateSystem,it=nt.getBaseAxis(),at=it.getExtent(),ot;if(it.type==="category")ot=it.getBandWidth();else if(it.type==="value"||it.type==="time"){var st=it.dim+"_"+it.index,dt=_[st],ht=Math.abs(at[1]-at[0]),ct=it.scale.getExtent(),ut=Math.abs(ct[1]-ct[0]);ot=dt?ht/ut*dt:ht}else{var ft=tt.getData();ot=Math.abs(at[1]-at[0])/ft.count()}var gt=parsePercent(tt.get("barWidth"),ot),mt=parsePercent(tt.get("barMaxWidth"),ot),vt=parsePercent(tt.get("barMinWidth")||(isInLargeMode(tt)?.5:1),ot),yt=tt.get("barGap"),bt=tt.get("barCategoryGap");et.push({bandWidth:ot,barWidth:gt,barMaxWidth:mt,barMinWidth:vt,barGap:yt,barCategoryGap:bt,axisKey:getAxisKey$1(it),stackId:getSeriesStackId$1(tt)})}),doCalBarWidthAndOffset(et)}function doCalBarWidthAndOffset(_e){var _={};each$f(_e,function(tt,nt){var it=tt.axisKey,at=tt.bandWidth,ot=_[it]||{bandWidth:at,remainedWidth:at,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},st=ot.stacks;_[it]=ot;var dt=tt.stackId;st[dt]||ot.autoWidthCount++,st[dt]=st[dt]||{width:0,maxWidth:0};var ht=tt.barWidth;ht&&!st[dt].width&&(st[dt].width=ht,ht=Math.min(ot.remainedWidth,ht),ot.remainedWidth-=ht);var ct=tt.barMaxWidth;ct&&(st[dt].maxWidth=ct);var ut=tt.barMinWidth;ut&&(st[dt].minWidth=ut);var ft=tt.barGap;ft!=null&&(ot.gap=ft);var gt=tt.barCategoryGap;gt!=null&&(ot.categoryGap=gt)});var et={};return each$f(_,function(tt,nt){et[nt]={};var it=tt.stacks,at=tt.bandWidth,ot=tt.categoryGap;if(ot==null){var st=keys(it).length;ot=Math.max(35-st*4,15)+"%"}var dt=parsePercent(ot,at),ht=parsePercent(tt.gap,1),ct=tt.remainedWidth,ut=tt.autoWidthCount,ft=(ct-dt)/(ut+(ut-1)*ht);ft=Math.max(ft,0),each$f(it,function(yt){var bt=yt.maxWidth,_t=yt.minWidth;if(yt.width){var xt=yt.width;bt&&(xt=Math.min(xt,bt)),_t&&(xt=Math.max(xt,_t)),yt.width=xt,ct-=xt+ht*xt,ut--}else{var xt=ft;bt&&bt<xt&&(xt=Math.min(bt,ct)),_t&&_t>xt&&(xt=_t),xt!==ft&&(yt.width=xt,ct-=xt+ht*xt,ut--)}}),ft=(ct-dt)/(ut+(ut-1)*ht),ft=Math.max(ft,0);var gt=0,mt;each$f(it,function(yt,bt){yt.width||(yt.width=ft),mt=yt,gt+=yt.width*(1+ht)}),mt&&(gt-=mt.width*ht);var vt=-gt/2;each$f(it,function(yt,bt){et[nt][bt]=et[nt][bt]||{bandWidth:at,offset:vt,width:yt.width},vt+=yt.width*(1+ht)})}),et}function retrieveColumnLayout(_e,_,et){if(_e&&_){var tt=_e[getAxisKey$1(_)];return tt}}function layout$4(_e,_){var et=prepareLayoutBarSeries(_e,_),tt=makeColumnLayout(et);each$f(et,function(nt){var it=nt.getData(),at=nt.coordinateSystem,ot=at.getBaseAxis(),st=getSeriesStackId$1(nt),dt=tt[getAxisKey$1(ot)][st],ht=dt.offset,ct=dt.width;it.setLayout({bandWidth:dt.bandWidth,offset:ht,size:ct})})}function createProgressiveLayout(_e){return{seriesType:_e,plan:createRenderPlanner(),reset:function(_){if(isOnCartesian(_)){var et=_.getData(),tt=_.coordinateSystem,nt=tt.getBaseAxis(),it=tt.getOtherAxis(nt),at=et.getDimensionIndex(et.mapDimension(it.dim)),ot=et.getDimensionIndex(et.mapDimension(nt.dim)),st=_.get("showBackground",!0),dt=et.mapDimension(it.dim),ht=et.getCalculationInfo("stackResultDimension"),ct=isDimensionStacked(et,dt)&&!!et.getCalculationInfo("stackedOnSeries"),ut=it.isHorizontal(),ft=getValueAxisStart(nt,it),gt=isInLargeMode(_),mt=_.get("barMinHeight")||0,vt=ht&&et.getDimensionIndex(ht),yt=et.getLayout("size"),bt=et.getLayout("offset");return{progress:function(_t,xt){for(var St=_t.count,Tt=gt&&createFloat32Array(St*3),wt=gt&&st&&createFloat32Array(St*3),Ct=gt&&createFloat32Array(St),Et=tt.master.getRect(),At=ut?Et.width:Et.height,Pt,Rt=xt.getStore(),It=0;(Pt=_t.next())!=null;){var Mt=Rt.get(ct?vt:at,Pt),Ot=Rt.get(ot,Pt),$t=ft,Lt=void 0;ct&&(Lt=+Mt-Rt.get(at,Pt));var kt=void 0,Nt=void 0,Vt=void 0,zt=void 0;if(ut){var Xt=tt.dataToPoint([Mt,Ot]);if(ct){var Wt=tt.dataToPoint([Lt,Ot]);$t=Wt[0]}kt=$t,Nt=Xt[1]+bt,Vt=Xt[0]-$t,zt=yt,Math.abs(Vt)<mt&&(Vt=(Vt<0?-1:1)*mt)}else{var Xt=tt.dataToPoint([Ot,Mt]);if(ct){var Wt=tt.dataToPoint([Ot,Lt]);$t=Wt[1]}kt=Xt[0]+bt,Nt=$t,Vt=yt,zt=Xt[1]-$t,Math.abs(zt)<mt&&(zt=(zt<=0?-1:1)*mt)}gt?(Tt[It]=kt,Tt[It+1]=Nt,Tt[It+2]=ut?Vt:zt,wt&&(wt[It]=ut?Et.x:kt,wt[It+1]=ut?Nt:Et.y,wt[It+2]=At),Ct[Pt]=Pt):xt.setItemLayout(Pt,{x:kt,y:Nt,width:Vt,height:zt}),It+=3}gt&&xt.setLayout({largePoints:Tt,largeDataIndices:Ct,largeBackgroundPoints:wt,valueAxisHorizontal:ut})}}}}}}function isOnCartesian(_e){return _e.coordinateSystem&&_e.coordinateSystem.type==="cartesian2d"}function isInLargeMode(_e){return _e.pipelineContext&&_e.pipelineContext.large}function getValueAxisStart(_e,_){var et=_.model.get("startValue");return et||(et=0),_.toGlobalCoord(_.dataToCoord(_.type==="log"?et>0?et:1:et))}var bisect=function(_e,_,et,tt){for(;et<tt;){var nt=et+tt>>>1;_e[nt][1]<_?et=nt+1:tt=nt}return et},TimeScale=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.type="time",tt}return _.prototype.getLabel=function(et){var tt=this.getSetting("useUTC");return format$1(et.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,tt,this.getSetting("locale"))},_.prototype.getFormattedLabel=function(et,tt,nt){var it=this.getSetting("useUTC"),at=this.getSetting("locale");return leveledFormat(et,tt,nt,at,it)},_.prototype.getTicks=function(){var et=this._interval,tt=this._extent,nt=[];if(!et)return nt;nt.push({value:tt[0],level:0});var it=this.getSetting("useUTC"),at=getIntervalTicks(this._minLevelUnit,this._approxInterval,it,tt);return nt=nt.concat(at),nt.push({value:tt[1],level:0}),nt},_.prototype.calcNiceExtent=function(et){var tt=this._extent;if(tt[0]===tt[1]&&(tt[0]-=ONE_DAY,tt[1]+=ONE_DAY),tt[1]===-1/0&&tt[0]===1/0){var nt=new Date;tt[1]=+new Date(nt.getFullYear(),nt.getMonth(),nt.getDate()),tt[0]=tt[1]-ONE_DAY}this.calcNiceTicks(et.splitNumber,et.minInterval,et.maxInterval)},_.prototype.calcNiceTicks=function(et,tt,nt){et=et||10;var it=this._extent,at=it[1]-it[0];this._approxInterval=at/et,tt!=null&&this._approxInterval<tt&&(this._approxInterval=tt),nt!=null&&this._approxInterval>nt&&(this._approxInterval=nt);var ot=scaleIntervals.length,st=Math.min(bisect(scaleIntervals,this._approxInterval,0,ot),ot-1);this._interval=scaleIntervals[st][1],this._minLevelUnit=scaleIntervals[Math.max(st-1,0)][0]},_.prototype.parse=function(et){return isNumber(et)?et:+parseDate(et)},_.prototype.contain=function(et){return contain$1(this.parse(et),this._extent)},_.prototype.normalize=function(et){return normalize$2(this.parse(et),this._extent)},_.prototype.scale=function(et){return scale(et,this._extent)},_.type="time",_}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(_e,_,et,tt){var nt=parseDate(_),it=parseDate(et),at=function(gt){return getUnitValue(nt,gt,tt)===getUnitValue(it,gt,tt)},ot=function(){return at("year")},st=function(){return ot()&&at("month")},dt=function(){return st()&&at("day")},ht=function(){return dt()&&at("hour")},ct=function(){return ht()&&at("minute")},ut=function(){return ct()&&at("second")},ft=function(){return ut()&&at("millisecond")};switch(_e){case"year":return ot();case"month":return st();case"day":return dt();case"hour":return ht();case"minute":return ct();case"second":return ut();case"millisecond":return ft()}}function getDateInterval(_e,_){return _e/=ONE_DAY,_e>16?16:_e>7.5?7:_e>3.5?4:_e>1.5?2:1}function getMonthInterval(_e){var _=30*ONE_DAY;return _e/=_,_e>6?6:_e>3?3:_e>2?2:1}function getHourInterval(_e){return _e/=ONE_HOUR,_e>12?12:_e>6?6:_e>3.5?4:_e>2?2:1}function getMinutesAndSecondsInterval(_e,_){return _e/=_?ONE_MINUTE:ONE_SECOND,_e>30?30:_e>20?20:_e>15?15:_e>10?10:_e>5?5:_e>2?2:1}function getMillisecondsInterval(_e){return nice(_e,!0)}function getFirstTimestampOfUnit(_e,_,et){var tt=new Date(_e);switch(getPrimaryTimeUnit(_)){case"year":case"month":tt[monthSetterName(et)](0);case"day":tt[dateSetterName(et)](1);case"hour":tt[hoursSetterName(et)](0);case"minute":tt[minutesSetterName(et)](0);case"second":tt[secondsSetterName(et)](0),tt[millisecondsSetterName(et)](0)}return tt.getTime()}function getIntervalTicks(_e,_,et,tt){var nt=1e4,it=timeUnits,at=0;function ot(At,Pt,Rt,It,Mt,Ot,$t){for(var Lt=new Date(Pt),kt=Pt,Nt=Lt[It]();kt<Rt&&kt<=tt[1];)$t.push({value:kt}),Nt+=At,Lt[Mt](Nt),kt=Lt.getTime();$t.push({value:kt,notAdd:!0})}function st(At,Pt,Rt){var It=[],Mt=!Pt.length;if(!isUnitValueSame(getPrimaryTimeUnit(At),tt[0],tt[1],et)){Mt&&(Pt=[{value:getFirstTimestampOfUnit(new Date(tt[0]),At,et)},{value:tt[1]}]);for(var Ot=0;Ot<Pt.length-1;Ot++){var $t=Pt[Ot].value,Lt=Pt[Ot+1].value;if($t!==Lt){var kt=void 0,Nt=void 0,Vt=void 0,zt=!1;switch(At){case"year":kt=Math.max(1,Math.round(_/ONE_DAY/365)),Nt=fullYearGetterName(et),Vt=fullYearSetterName(et);break;case"half-year":case"quarter":case"month":kt=getMonthInterval(_),Nt=monthGetterName(et),Vt=monthSetterName(et);break;case"week":case"half-week":case"day":kt=getDateInterval(_),Nt=dateGetterName(et),Vt=dateSetterName(et),zt=!0;break;case"half-day":case"quarter-day":case"hour":kt=getHourInterval(_),Nt=hoursGetterName(et),Vt=hoursSetterName(et);break;case"minute":kt=getMinutesAndSecondsInterval(_,!0),Nt=minutesGetterName(et),Vt=minutesSetterName(et);break;case"second":kt=getMinutesAndSecondsInterval(_,!1),Nt=secondsGetterName(et),Vt=secondsSetterName(et);break;case"millisecond":kt=getMillisecondsInterval(_),Nt=millisecondsGetterName(et),Vt=millisecondsSetterName(et);break}ot(kt,$t,Lt,Nt,Vt,zt,It),At==="year"&&Rt.length>1&&Ot===0&&Rt.unshift({value:Rt[0].value-kt})}}for(var Ot=0;Ot<It.length;Ot++)Rt.push(It[Ot]);return It}}for(var dt=[],ht=[],ct=0,ut=0,ft=0;ft<it.length&&at++<nt;++ft){var gt=getPrimaryTimeUnit(it[ft]);if(isPrimaryTimeUnit(it[ft])){st(it[ft],dt[dt.length-1]||[],ht);var mt=it[ft+1]?getPrimaryTimeUnit(it[ft+1]):null;if(gt!==mt){if(ht.length){ut=ct,ht.sort(function(At,Pt){return At.value-Pt.value});for(var vt=[],yt=0;yt<ht.length;++yt){var bt=ht[yt].value;(yt===0||ht[yt-1].value!==bt)&&(vt.push(ht[yt]),bt>=tt[0]&&bt<=tt[1]&&ct++)}var _t=(tt[1]-tt[0])/_;if(ct>_t*1.5&&ut>_t/1.5||(dt.push(vt),ct>_t||_e===it[ft]))break}ht=[]}}}for(var xt=filter$1(map$1(dt,function(At){return filter$1(At,function(Pt){return Pt.value>=tt[0]&&Pt.value<=tt[1]&&!Pt.notAdd})}),function(At){return At.length>0}),St=[],Tt=xt.length-1,ft=0;ft<xt.length;++ft)for(var wt=xt[ft],Ct=0;Ct<wt.length;++Ct)St.push({value:wt[Ct].value,level:Tt-ft});St.sort(function(At,Pt){return At.value-Pt.value});for(var Et=[],ft=0;ft<St.length;++ft)(ft===0||St[ft].value!==St[ft-1].value)&&Et.push(St[ft]);return Et}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type="log",et.base=10,et._originalScale=new IntervalScale,et._interval=0,et}return _.prototype.getTicks=function(et){var tt=this._originalScale,nt=this._extent,it=tt.getExtent(),at=intervalScaleProto.getTicks.call(this,et);return map$1(at,function(ot){var st=ot.value,dt=round$3(mathPow$1(this.base,st));return dt=st===nt[0]&&this._fixMin?fixRoundingError(dt,it[0]):dt,dt=st===nt[1]&&this._fixMax?fixRoundingError(dt,it[1]):dt,{value:dt}},this)},_.prototype.setExtent=function(et,tt){var nt=mathLog$1(this.base);et=mathLog$1(Math.max(0,et))/nt,tt=mathLog$1(Math.max(0,tt))/nt,intervalScaleProto.setExtent.call(this,et,tt)},_.prototype.getExtent=function(){var et=this.base,tt=scaleProto.getExtent.call(this);tt[0]=mathPow$1(et,tt[0]),tt[1]=mathPow$1(et,tt[1]);var nt=this._originalScale,it=nt.getExtent();return this._fixMin&&(tt[0]=fixRoundingError(tt[0],it[0])),this._fixMax&&(tt[1]=fixRoundingError(tt[1],it[1])),tt},_.prototype.unionExtent=function(et){this._originalScale.unionExtent(et);var tt=this.base;et[0]=mathLog$1(et[0])/mathLog$1(tt),et[1]=mathLog$1(et[1])/mathLog$1(tt),scaleProto.unionExtent.call(this,et)},_.prototype.unionExtentFromData=function(et,tt){this.unionExtent(et.getApproximateExtent(tt))},_.prototype.calcNiceTicks=function(et){et=et||10;var tt=this._extent,nt=tt[1]-tt[0];if(!(nt===1/0||nt<=0)){var it=quantity(nt),at=et/nt*it;for(at<=.5&&(it*=10);!isNaN(it)&&Math.abs(it)<1&&Math.abs(it)>0;)it*=10;var ot=[round$3(mathCeil$1(tt[0]/it)*it),round$3(mathFloor$1(tt[1]/it)*it)];this._interval=it,this._niceExtent=ot}},_.prototype.calcNiceExtent=function(et){intervalScaleProto.calcNiceExtent.call(this,et),this._fixMin=et.fixMin,this._fixMax=et.fixMax},_.prototype.parse=function(et){return et},_.prototype.contain=function(et){return et=mathLog$1(et)/mathLog$1(this.base),contain$1(et,this._extent)},_.prototype.normalize=function(et){return et=mathLog$1(et)/mathLog$1(this.base),normalize$2(et,this._extent)},_.prototype.scale=function(et){return et=scale(et,this._extent),mathPow$1(this.base,et)},_.type="log",_}(Scale),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(_e,_){return roundingErrorFix(_e,getPrecision(_))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function _e(_,et,tt){this._prepareParams(_,et,tt)}return _e.prototype._prepareParams=function(_,et,tt){tt[1]<tt[0]&&(tt=[NaN,NaN]),this._dataMin=tt[0],this._dataMax=tt[1];var nt=this._isOrdinal=_.type==="ordinal";this._needCrossZero=_.type==="interval"&&et.getNeedCrossZero&&et.getNeedCrossZero();var it=et.get("min",!0);it==null&&(it=et.get("startValue",!0));var at=this._modelMinRaw=it;isFunction$3(at)?this._modelMinNum=parseAxisModelMinMax(_,at({min:tt[0],max:tt[1]})):at!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(_,at));var ot=this._modelMaxRaw=et.get("max",!0);if(isFunction$3(ot)?this._modelMaxNum=parseAxisModelMinMax(_,ot({min:tt[0],max:tt[1]})):ot!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(_,ot)),nt)this._axisDataLen=et.getCategories().length;else{var st=et.get("boundaryGap"),dt=isArray$1(st)?st:[st||0,st||0];typeof dt[0]=="boolean"||typeof dt[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(dt[0],1),parsePercent$1(dt[1],1)]}},_e.prototype.calculate=function(){var _=this._isOrdinal,et=this._dataMin,tt=this._dataMax,nt=this._axisDataLen,it=this._boundaryGapInner,at=_?null:tt-et||Math.abs(et),ot=this._modelMinRaw==="dataMin"?et:this._modelMinNum,st=this._modelMaxRaw==="dataMax"?tt:this._modelMaxNum,dt=ot!=null,ht=st!=null;ot==null&&(ot=_?nt?0:NaN:et-it[0]*at),st==null&&(st=_?nt?nt-1:NaN:tt+it[1]*at),(ot==null||!isFinite(ot))&&(ot=NaN),(st==null||!isFinite(st))&&(st=NaN);var ct=eqNaN(ot)||eqNaN(st)||_&&!nt;this._needCrossZero&&(ot>0&&st>0&&!dt&&(ot=0),ot<0&&st<0&&!ht&&(st=0));var ut=this._determinedMin,ft=this._determinedMax;return ut!=null&&(ot=ut,dt=!0),ft!=null&&(st=ft,ht=!0),{min:ot,max:st,minFixed:dt,maxFixed:ht,isBlank:ct}},_e.prototype.modifyDataMinMax=function(_,et){this[DATA_MIN_MAX_ATTR[_]]=et},_e.prototype.setDeterminedMinMax=function(_,et){var tt=DETERMINED_MIN_MAX_ATTR[_];this[tt]=et},_e.prototype.freeze=function(){this.frozen=!0},_e}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(_e,_,et){var tt=_e.rawExtentInfo;return tt||(tt=new ScaleRawExtentInfo(_e,_,et),_e.rawExtentInfo=tt,tt)}function parseAxisModelMinMax(_e,_){return _==null?null:eqNaN(_)?NaN:_e.parse(_)}function getScaleExtent(_e,_){var et=_e.type,tt=ensureScaleRawExtentInfo(_e,_,_e.getExtent()).calculate();_e.setBlank(tt.isBlank);var nt=tt.min,it=tt.max,at=_.ecModel;if(at&&et==="time"){var ot=prepareLayoutBarSeries("bar",at),st=!1;if(each$f(ot,function(ct){st=st||ct.getBaseAxis()===_.axis}),st){var dt=makeColumnLayout(ot),ht=adjustScaleForOverflow(nt,it,_,dt);nt=ht.min,it=ht.max}}return{extent:[nt,it],fixMin:tt.minFixed,fixMax:tt.maxFixed}}function adjustScaleForOverflow(_e,_,et,tt){var nt=et.axis.getExtent(),it=Math.abs(nt[1]-nt[0]),at=retrieveColumnLayout(tt,et.axis);if(at===void 0)return{min:_e,max:_};var ot=1/0;each$f(at,function(ft){ot=Math.min(ft.offset,ot)});var st=-1/0;each$f(at,function(ft){st=Math.max(ft.offset+ft.width,st)}),ot=Math.abs(ot),st=Math.abs(st);var dt=ot+st,ht=_-_e,ct=1-(ot+st)/it,ut=ht/ct-ht;return _+=ut*(st/dt),_e-=ut*(ot/dt),{min:_e,max:_}}function niceScaleExtent(_e,_){var et=_,tt=getScaleExtent(_e,et),nt=tt.extent,it=et.get("splitNumber");_e instanceof LogScale&&(_e.base=et.get("logBase"));var at=_e.type,ot=et.get("interval"),st=at==="interval"||at==="time";_e.setExtent(nt[0],nt[1]),_e.calcNiceExtent({splitNumber:it,fixMin:tt.fixMin,fixMax:tt.fixMax,minInterval:st?et.get("minInterval"):null,maxInterval:st?et.get("maxInterval"):null}),ot!=null&&_e.setInterval&&_e.setInterval(ot)}function createScaleByModel$1(_e,_){if(_=_||_e.get("type"),_)switch(_){case"category":return new OrdinalScale({ordinalMeta:_e.getOrdinalMeta?_e.getOrdinalMeta():_e.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:_e.ecModel.getLocaleModel(),useUTC:_e.ecModel.get("useUTC")});default:return new(Scale.getClass(_)||IntervalScale)}}function ifAxisCrossZero(_e){var _=_e.scale.getExtent(),et=_[0],tt=_[1];return!(et>0&&tt>0||et<0&&tt<0)}function makeLabelFormatter(_e){var _=_e.getLabelModel().get("formatter"),et=_e.type==="category"?_e.scale.getExtent()[0]:null;return _e.scale.type==="time"?function(tt){return function(nt,it){return _e.scale.getFormattedLabel(nt,it,tt)}}(_):isString$1(_)?function(tt){return function(nt){var it=_e.scale.getLabel(nt),at=tt.replace("{value}",it??"");return at}}(_):isFunction$3(_)?function(tt){return function(nt,it){return et!=null&&(it=nt.value-et),tt(getAxisRawValue(_e,nt),it,nt.level!=null?{level:nt.level}:null)}}(_):function(tt){return _e.scale.getLabel(tt)}}function getAxisRawValue(_e,_){return _e.type==="category"?_e.scale.getLabel(_):_.value}function estimateLabelUnionRect(_e){var _=_e.model,et=_e.scale;if(!(!_.get(["axisLabel","show"])||et.isBlank())){var tt,nt,it=et.getExtent();et instanceof OrdinalScale?nt=et.count():(tt=et.getTicks(),nt=tt.length);var at=_e.getLabelModel(),ot=makeLabelFormatter(_e),st,dt=1;nt>40&&(dt=Math.ceil(nt/40));for(var ht=0;ht<nt;ht+=dt){var ct=tt?tt[ht]:{value:it[0]+ht},ut=ot(ct,ht),ft=at.getTextRect(ut),gt=rotateTextRect(ft,at.get("rotate")||0);st?st.union(gt):st=gt}return st}}function rotateTextRect(_e,_){var et=_*Math.PI/180,tt=_e.width,nt=_e.height,it=tt*Math.abs(Math.cos(et))+Math.abs(nt*Math.sin(et)),at=tt*Math.abs(Math.sin(et))+Math.abs(nt*Math.cos(et)),ot=new BoundingRect(_e.x,_e.y,it,at);return ot}function getOptionCategoryInterval(_e){var _=_e.get("interval");return _??"auto"}function shouldShowAllLabels(_e){return _e.type==="category"&&getOptionCategoryInterval(_e.getLabelModel())===0}function getDataDimensionsOnAxis(_e,_){var et={};return each$f(_e.mapDimensionsAll(_),function(tt){et[getStackedDimension(_e,tt)]=!0}),keys(et)}function unionAxisExtentFromData(_e,_,et){_&&each$f(getDataDimensionsOnAxis(_,et),function(tt){var nt=_.getApproximateExtent(tt);nt[0]<_e[0]&&(_e[0]=nt[0]),nt[1]>_e[1]&&(_e[1]=nt[1])})}var AxisModelCommonMixin=function(){function _e(){}return _e.prototype.getNeedCrossZero=function(){var _=this.option;return!_.scale},_e.prototype.getCoordSysModel=function(){},_e}();function createList$2(_e){return createSeriesData(null,_e)}var dataStack={isDimensionStacked,enableDataStack,getStackedDimension};function createScale(_e,_){var et=_;_ instanceof Model||(et=new Model(_));var tt=createScaleByModel$1(et);return tt.setExtent(_e[0],_e[1]),niceScaleExtent(tt,et),tt}function mixinAxisModelCommonMethods(_e){mixin(_e,AxisModelCommonMixin)}function createTextStyle(_e,_){return _=_||{},createTextStyle$1(_e,null,null,_.state!=="normal")}const helper=Object.freeze(Object.defineProperty({__proto__:null,createDimensions,createList:createList$2,createScale,createSymbol:createSymbol$1,createTextStyle,dataStack,enableHoverEmphasis,getECData,getLayoutRect,mixinAxisModelCommonMethods},Symbol.toStringTag,{value:"Module"}));var EPSILON=1e-8;function isAroundEqual(_e,_){return Math.abs(_e-_)<EPSILON}function contain(_e,_,et){var tt=0,nt=_e[0];if(!nt)return!1;for(var it=1;it<_e.length;it++){var at=_e[it];tt+=windingLine(nt[0],nt[1],at[0],at[1],_,et),nt=at}var ot=_e[0];return(!isAroundEqual(nt[0],ot[0])||!isAroundEqual(nt[1],ot[1]))&&(tt+=windingLine(nt[0],nt[1],ot[0],ot[1],_,et)),tt!==0}var TMP_TRANSFORM=[];function transformPoints(_e,_){for(var et=0;et<_e.length;et++)applyTransform$1(_e[et],_e[et],_)}function updateBBoxFromPoints(_e,_,et,tt){for(var nt=0;nt<_e.length;nt++){var it=_e[nt];tt&&(it=tt.project(it)),it&&isFinite(it[0])&&isFinite(it[1])&&(min$1(_,_,it),max$1(et,et,it))}}function centroid$1(_e){for(var _=0,et=0,tt=0,nt=_e.length,it=_e[nt-1][0],at=_e[nt-1][1],ot=0;ot<nt;ot++){var st=_e[ot][0],dt=_e[ot][1],ht=it*dt-st*at;_+=ht,et+=(it+st)*ht,tt+=(at+dt)*ht,it=st,at=dt}return _?[et/_/3,tt/_/3,_]:[_e[0][0]||0,_e[0][1]||0]}var Region=function(){function _e(_){this.name=_}return _e.prototype.setCenter=function(_){this._center=_},_e.prototype.getCenter=function(){var _=this._center;return _||(_=this._center=this.calcCenter()),_},_e}(),GeoJSONPolygonGeometry=function(){function _e(_,et){this.type="polygon",this.exterior=_,this.interiors=et}return _e}(),GeoJSONLineStringGeometry=function(){function _e(_){this.type="linestring",this.points=_}return _e}(),GeoJSONRegion=function(_e){__extends$1(_,_e);function _(et,tt,nt){var it=_e.call(this,et)||this;return it.type="geoJSON",it.geometries=tt,it._center=nt&&[nt[0],nt[1]],it}return _.prototype.calcCenter=function(){for(var et=this.geometries,tt,nt=0,it=0;it<et.length;it++){var at=et[it],ot=at.exterior,st=ot&&ot.length;st>nt&&(tt=at,nt=st)}if(tt)return centroid$1(tt.exterior);var dt=this.getBoundingRect();return[dt.x+dt.width/2,dt.y+dt.height/2]},_.prototype.getBoundingRect=function(et){var tt=this._rect;if(tt&&!et)return tt;var nt=[1/0,1/0],it=[-1/0,-1/0],at=this.geometries;return each$f(at,function(ot){ot.type==="polygon"?updateBBoxFromPoints(ot.exterior,nt,it,et):each$f(ot.points,function(st){updateBBoxFromPoints(st,nt,it,et)})}),isFinite(nt[0])&&isFinite(nt[1])&&isFinite(it[0])&&isFinite(it[1])||(nt[0]=nt[1]=it[0]=it[1]=0),tt=new BoundingRect(nt[0],nt[1],it[0]-nt[0],it[1]-nt[1]),et||(this._rect=tt),tt},_.prototype.contain=function(et){var tt=this.getBoundingRect(),nt=this.geometries;if(!tt.contain(et[0],et[1]))return!1;e:for(var it=0,at=nt.length;it<at;it++){var ot=nt[it];if(ot.type==="polygon"){var st=ot.exterior,dt=ot.interiors;if(contain(st,et[0],et[1])){for(var ht=0;ht<(dt?dt.length:0);ht++)if(contain(dt[ht],et[0],et[1]))continue e;return!0}}}return!1},_.prototype.transformTo=function(et,tt,nt,it){var at=this.getBoundingRect(),ot=at.width/at.height;nt?it||(it=nt/ot):nt=ot*it;for(var st=new BoundingRect(et,tt,nt,it),dt=at.calculateTransform(st),ht=this.geometries,ct=0;ct<ht.length;ct++){var ut=ht[ct];ut.type==="polygon"?(transformPoints(ut.exterior,dt),each$f(ut.interiors,function(ft){transformPoints(ft,dt)})):each$f(ut.points,function(ft){transformPoints(ft,dt)})}at=this._rect,at.copy(st),this._center=[at.x+at.width/2,at.y+at.height/2]},_.prototype.cloneShallow=function(et){et==null&&(et=this.name);var tt=new _(et,this.geometries,this._center);return tt._rect=this._rect,tt.transformTo=null,tt},_}(Region),GeoSVGRegion=function(_e){__extends$1(_,_e);function _(et,tt){var nt=_e.call(this,et)||this;return nt.type="geoSVG",nt._elOnlyForCalculate=tt,nt}return _.prototype.calcCenter=function(){for(var et=this._elOnlyForCalculate,tt=et.getBoundingRect(),nt=[tt.x+tt.width/2,tt.y+tt.height/2],it=identity(TMP_TRANSFORM),at=et;at&&!at.isGeoSVGGraphicRoot;)mul(it,at.getLocalTransform(),it),at=at.parent;return invert(it,it),applyTransform$1(nt,nt,it),nt},_}(Region);function decode(_e){if(!_e.UTF8Encoding)return _e;var _=_e,et=_.UTF8Scale;et==null&&(et=1024);var tt=_.features;return each$f(tt,function(nt){var it=nt.geometry,at=it.encodeOffsets,ot=it.coordinates;if(at)switch(it.type){case"LineString":it.coordinates=decodeRing(ot,at,et);break;case"Polygon":decodeRings(ot,at,et);break;case"MultiLineString":decodeRings(ot,at,et);break;case"MultiPolygon":each$f(ot,function(st,dt){return decodeRings(st,at[dt],et)})}}),_.UTF8Encoding=!1,_}function decodeRings(_e,_,et){for(var tt=0;tt<_e.length;tt++)_e[tt]=decodeRing(_e[tt],_[tt],et)}function decodeRing(_e,_,et){for(var tt=[],nt=_[0],it=_[1],at=0;at<_e.length;at+=2){var ot=_e.charCodeAt(at)-64,st=_e.charCodeAt(at+1)-64;ot=ot>>1^-(ot&1),st=st>>1^-(st&1),ot+=nt,st+=it,nt=ot,it=st,tt.push([ot/et,st/et])}return tt}function parseGeoJSON(_e,_){return _e=decode(_e),map$1(filter$1(_e.features,function(et){return et.geometry&&et.properties&&et.geometry.coordinates.length>0}),function(et){var tt=et.properties,nt=et.geometry,it=[];switch(nt.type){case"Polygon":var at=nt.coordinates;it.push(new GeoJSONPolygonGeometry(at[0],at.slice(1)));break;case"MultiPolygon":each$f(nt.coordinates,function(st){st[0]&&it.push(new GeoJSONPolygonGeometry(st[0],st.slice(1)))});break;case"LineString":it.push(new GeoJSONLineStringGeometry([nt.coordinates]));break;case"MultiLineString":it.push(new GeoJSONLineStringGeometry(nt.coordinates))}var ot=new GeoJSONRegion(tt[_||"name"],it,tt.cp);return ot.properties=tt,ot})}const number=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER,asc:asc$2,getPercentWithPrecision,getPixelPrecision,getPrecision,getPrecisionSafe,isNumeric,isRadianAroundZero,linearMap:linearMap$2,nice,numericToNumber,parseDate,quantile,quantity,quantityExponent,reformIntervals,remRadian,round:round$3},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,format:format$1,parse:parseDate},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,initProps,makeImage,makePath,mergePath,registerShape,resizePath,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas,capitalFirst,encodeHTML,formatTime,formatTpl,getTextRect,getTooltipMarker,normalizeCssArray,toCamelCase,truncateText},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,bind:bind$2,clone:clone$4,curry:curry$1,defaults,each:each$f,extend,filter:filter$1,indexOf,inherits,isArray:isArray$1,isFunction:isFunction$3,isObject:isObject$4,isString:isString$1,map:map$1,merge:merge$1,reduce},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function tickValuesToNumbers(_e,_){var et=map$1(_,function(tt){return _e.scale.parse(tt)});return _e.type==="time"&&et.length>0&&(et.sort(),et.unshift(et[0]),et.push(et[et.length-1])),et}function createAxisLabels(_e){var _=_e.getLabelModel().get("customValues");if(_){var et=makeLabelFormatter(_e),tt=_e.scale.getExtent(),nt=tickValuesToNumbers(_e,_),it=filter$1(nt,function(at){return at>=tt[0]&&at<=tt[1]});return{labels:map$1(it,function(at){var ot={value:at};return{formattedLabel:et(ot),rawLabel:_e.scale.getLabel(ot),tickValue:at}})}}return _e.type==="category"?makeCategoryLabels(_e):makeRealNumberLabels(_e)}function createAxisTicks(_e,_){var et=_e.getTickModel().get("customValues");if(et){var tt=_e.scale.getExtent(),nt=tickValuesToNumbers(_e,et);return{ticks:filter$1(nt,function(it){return it>=tt[0]&&it<=tt[1]})}}return _e.type==="category"?makeCategoryTicks(_e,_):{ticks:map$1(_e.scale.getTicks(),function(it){return it.value})}}function makeCategoryLabels(_e){var _=_e.getLabelModel(),et=makeCategoryLabelsActually(_e,_);return!_.get("show")||_e.scale.isBlank()?{labels:[],labelCategoryInterval:et.labelCategoryInterval}:et}function makeCategoryLabelsActually(_e,_){var et=getListCache(_e,"labels"),tt=getOptionCategoryInterval(_),nt=listCacheGet(et,tt);if(nt)return nt;var it,at;return isFunction$3(tt)?it=makeLabelsByCustomizedCategoryInterval(_e,tt):(at=tt==="auto"?makeAutoCategoryInterval(_e):tt,it=makeLabelsByNumericCategoryInterval(_e,at)),listCacheSet(et,tt,{labels:it,labelCategoryInterval:at})}function makeCategoryTicks(_e,_){var et=getListCache(_e,"ticks"),tt=getOptionCategoryInterval(_),nt=listCacheGet(et,tt);if(nt)return nt;var it,at;if((!_.get("show")||_e.scale.isBlank())&&(it=[]),isFunction$3(tt))it=makeLabelsByCustomizedCategoryInterval(_e,tt,!0);else if(tt==="auto"){var ot=makeCategoryLabelsActually(_e,_e.getLabelModel());at=ot.labelCategoryInterval,it=map$1(ot.labels,function(st){return st.tickValue})}else at=tt,it=makeLabelsByNumericCategoryInterval(_e,at,!0);return listCacheSet(et,tt,{ticks:it,tickCategoryInterval:at})}function makeRealNumberLabels(_e){var _=_e.scale.getTicks(),et=makeLabelFormatter(_e);return{labels:map$1(_,function(tt,nt){return{level:tt.level,formattedLabel:et(tt,nt),rawLabel:_e.scale.getLabel(tt),tickValue:tt.value}})}}function getListCache(_e,_){return inner$g(_e)[_]||(inner$g(_e)[_]=[])}function listCacheGet(_e,_){for(var et=0;et<_e.length;et++)if(_e[et].key===_)return _e[et].value}function listCacheSet(_e,_,et){return _e.push({key:_,value:et}),et}function makeAutoCategoryInterval(_e){var _=inner$g(_e).autoInterval;return _??(inner$g(_e).autoInterval=_e.calculateCategoryInterval())}function calculateCategoryInterval(_e){var _=fetchAutoCategoryIntervalCalculationParams(_e),et=makeLabelFormatter(_e),tt=(_.axisRotate-_.labelRotate)/180*Math.PI,nt=_e.scale,it=nt.getExtent(),at=nt.count();if(it[1]-it[0]<1)return 0;var ot=1;at>40&&(ot=Math.max(1,Math.floor(at/40)));for(var st=it[0],dt=_e.dataToCoord(st+1)-_e.dataToCoord(st),ht=Math.abs(dt*Math.cos(tt)),ct=Math.abs(dt*Math.sin(tt)),ut=0,ft=0;st<=it[1];st+=ot){var gt=0,mt=0,vt=getBoundingRect(et({value:st}),_.font,"center","top");gt=vt.width*1.3,mt=vt.height*1.3,ut=Math.max(ut,gt,7),ft=Math.max(ft,mt,7)}var yt=ut/ht,bt=ft/ct;isNaN(yt)&&(yt=1/0),isNaN(bt)&&(bt=1/0);var _t=Math.max(0,Math.floor(Math.min(yt,bt))),xt=inner$g(_e.model),St=_e.getExtent(),Tt=xt.lastAutoInterval,wt=xt.lastTickCount;return Tt!=null&&wt!=null&&Math.abs(Tt-_t)<=1&&Math.abs(wt-at)<=1&&Tt>_t&&xt.axisExtent0===St[0]&&xt.axisExtent1===St[1]?_t=Tt:(xt.lastTickCount=at,xt.lastAutoInterval=_t,xt.axisExtent0=St[0],xt.axisExtent1=St[1]),_t}function fetchAutoCategoryIntervalCalculationParams(_e){var _=_e.getLabelModel();return{axisRotate:_e.getRotate?_e.getRotate():_e.isHorizontal&&!_e.isHorizontal()?90:0,labelRotate:_.get("rotate")||0,font:_.getFont()}}function makeLabelsByNumericCategoryInterval(_e,_,et){var tt=makeLabelFormatter(_e),nt=_e.scale,it=nt.getExtent(),at=_e.getLabelModel(),ot=[],st=Math.max((_||0)+1,1),dt=it[0],ht=nt.count();dt!==0&&st>1&&ht/st>2&&(dt=Math.round(Math.ceil(dt/st)*st));var ct=shouldShowAllLabels(_e),ut=at.get("showMinLabel")||ct,ft=at.get("showMaxLabel")||ct;ut&&dt!==it[0]&&mt(it[0]);for(var gt=dt;gt<=it[1];gt+=st)mt(gt);ft&&gt-st!==it[1]&&mt(it[1]);function mt(vt){var yt={value:vt};ot.push(et?vt:{formattedLabel:tt(yt),rawLabel:nt.getLabel(yt),tickValue:vt})}return ot}function makeLabelsByCustomizedCategoryInterval(_e,_,et){var tt=_e.scale,nt=makeLabelFormatter(_e),it=[];return each$f(tt.getTicks(),function(at){var ot=tt.getLabel(at),st=at.value;_(at.value,ot)&&it.push(et?st:{formattedLabel:nt(at),rawLabel:ot,tickValue:st})}),it}var NORMALIZED_EXTENT=[0,1],Axis=function(){function _e(_,et,tt){this.onBand=!1,this.inverse=!1,this.dim=_,this.scale=et,this._extent=tt||[0,0]}return _e.prototype.contain=function(_){var et=this._extent,tt=Math.min(et[0],et[1]),nt=Math.max(et[0],et[1]);return _>=tt&&_<=nt},_e.prototype.containData=function(_){return this.scale.contain(_)},_e.prototype.getExtent=function(){return this._extent.slice()},_e.prototype.getPixelPrecision=function(_){return getPixelPrecision(_||this.scale.getExtent(),this._extent)},_e.prototype.setExtent=function(_,et){var tt=this._extent;tt[0]=_,tt[1]=et},_e.prototype.dataToCoord=function(_,et){var tt=this._extent,nt=this.scale;return _=nt.normalize(_),this.onBand&&nt.type==="ordinal"&&(tt=tt.slice(),fixExtentWithBands(tt,nt.count())),linearMap$2(_,NORMALIZED_EXTENT,tt,et)},_e.prototype.coordToData=function(_,et){var tt=this._extent,nt=this.scale;this.onBand&&nt.type==="ordinal"&&(tt=tt.slice(),fixExtentWithBands(tt,nt.count()));var it=linearMap$2(_,tt,NORMALIZED_EXTENT,et);return this.scale.scale(it)},_e.prototype.pointToData=function(_,et){},_e.prototype.getTicksCoords=function(_){_=_||{};var et=_.tickModel||this.getTickModel(),tt=createAxisTicks(this,et),nt=tt.ticks,it=map$1(nt,function(ot){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(ot):ot),tickValue:ot}},this),at=et.get("alignWithLabel");return fixOnBandTicksCoords(this,it,at,_.clamp),it},_e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var _=this.model.getModel("minorTick"),et=_.get("splitNumber");et>0&&et<100||(et=5);var tt=this.scale.getMinorTicks(et),nt=map$1(tt,function(it){return map$1(it,function(at){return{coord:this.dataToCoord(at),tickValue:at}},this)},this);return nt},_e.prototype.getViewLabels=function(){return createAxisLabels(this).labels},_e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},_e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},_e.prototype.getBandWidth=function(){var _=this._extent,et=this.scale.getExtent(),tt=et[1]-et[0]+(this.onBand?1:0);tt===0&&(tt=1);var nt=Math.abs(_[1]-_[0]);return Math.abs(nt)/tt},_e.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},_e}();function fixExtentWithBands(_e,_){var et=_e[1]-_e[0],tt=_,nt=et/tt/2;_e[0]+=nt,_e[1]-=nt}function fixOnBandTicksCoords(_e,_,et,tt){var nt=_.length;if(!_e.onBand||et||!nt)return;var it=_e.getExtent(),at,ot;if(nt===1)_[0].coord=it[0],at=_[1]={coord:it[1],tickValue:_[0].tickValue};else{var st=_[nt-1].tickValue-_[0].tickValue,dt=(_[nt-1].coord-_[0].coord)/st;each$f(_,function(ft){ft.coord-=dt/2});var ht=_e.scale.getExtent();ot=1+ht[1]-_[nt-1].tickValue,at={coord:_[nt-1].coord+dt*ot,tickValue:ht[1]+1},_.push(at)}var ct=it[0]>it[1];ut(_[0].coord,it[0])&&(tt?_[0].coord=it[0]:_.shift()),tt&&ut(it[0],_[0].coord)&&_.unshift({coord:it[0]}),ut(it[1],at.coord)&&(tt?at.coord=it[1]:_.pop()),tt&&ut(at.coord,it[1])&&_.push({coord:it[1]});function ut(ft,gt){return ft=round$3(ft),gt=round$3(gt),ct?ft>gt:ft<gt}}function extendComponentModel(_e){var _=ComponentModel.extend(_e);return ComponentModel.registerClass(_),_}function extendComponentView(_e){var _=ComponentView.extend(_e);return ComponentView.registerClass(_),_}function extendSeriesModel(_e){var _=SeriesModel.extend(_e);return SeriesModel.registerClass(_),_}function extendChartView(_e){var _=ChartView.extend(_e);return ChartView.registerClass(_),_}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(_e,_,et,tt,nt){var it=et.width,at=et.height;switch(_e){case"top":tt.set(et.x+it/2,et.y-_),nt.set(0,-1);break;case"bottom":tt.set(et.x+it/2,et.y+at+_),nt.set(0,1);break;case"left":tt.set(et.x-_,et.y+at/2),nt.set(-1,0);break;case"right":tt.set(et.x+it+_,et.y+at/2),nt.set(1,0);break}}function projectPointToArc(_e,_,et,tt,nt,it,at,ot,st){at-=_e,ot-=_;var dt=Math.sqrt(at*at+ot*ot);at/=dt,ot/=dt;var ht=at*et+_e,ct=ot*et+_;if(Math.abs(tt-nt)%PI2$2<1e-4)return st[0]=ht,st[1]=ct,dt-et;if(it){var ut=tt;tt=normalizeRadian(nt),nt=normalizeRadian(ut)}else tt=normalizeRadian(tt),nt=normalizeRadian(nt);tt>nt&&(nt+=PI2$2);var ft=Math.atan2(ot,at);if(ft<0&&(ft+=PI2$2),ft>=tt&&ft<=nt||ft+PI2$2>=tt&&ft+PI2$2<=nt)return st[0]=ht,st[1]=ct,dt-et;var gt=et*Math.cos(tt)+_e,mt=et*Math.sin(tt)+_,vt=et*Math.cos(nt)+_e,yt=et*Math.sin(nt)+_,bt=(gt-at)*(gt-at)+(mt-ot)*(mt-ot),_t=(vt-at)*(vt-at)+(yt-ot)*(yt-ot);return bt<_t?(st[0]=gt,st[1]=mt,Math.sqrt(bt)):(st[0]=vt,st[1]=yt,Math.sqrt(_t))}function projectPointToLine(_e,_,et,tt,nt,it,at,ot){var st=nt-_e,dt=it-_,ht=et-_e,ct=tt-_,ut=Math.sqrt(ht*ht+ct*ct);ht/=ut,ct/=ut;var ft=st*ht+dt*ct,gt=ft/ut;ot&&(gt=Math.min(Math.max(gt,0),1)),gt*=ut;var mt=at[0]=_e+gt*ht,vt=at[1]=_+gt*ct;return Math.sqrt((mt-nt)*(mt-nt)+(vt-it)*(vt-it))}function projectPointToRect(_e,_,et,tt,nt,it,at){et<0&&(_e=_e+et,et=-et),tt<0&&(_=_+tt,tt=-tt);var ot=_e+et,st=_+tt,dt=at[0]=Math.min(Math.max(nt,_e),ot),ht=at[1]=Math.min(Math.max(it,_),st);return Math.sqrt((dt-nt)*(dt-nt)+(ht-it)*(ht-it))}var tmpPt=[];function nearestPointOnRect(_e,_,et){var tt=projectPointToRect(_.x,_.y,_.width,_.height,_e.x,_e.y,tmpPt);return et.set(tmpPt[0],tmpPt[1]),tt}function nearestPointOnPath(_e,_,et){for(var tt=0,nt=0,it=0,at=0,ot,st,dt=1/0,ht=_.data,ct=_e.x,ut=_e.y,ft=0;ft<ht.length;){var gt=ht[ft++];ft===1&&(tt=ht[ft],nt=ht[ft+1],it=tt,at=nt);var mt=dt;switch(gt){case CMD$1.M:it=ht[ft++],at=ht[ft++],tt=it,nt=at;break;case CMD$1.L:mt=projectPointToLine(tt,nt,ht[ft],ht[ft+1],ct,ut,tmpPt,!0),tt=ht[ft++],nt=ht[ft++];break;case CMD$1.C:mt=cubicProjectPoint(tt,nt,ht[ft++],ht[ft++],ht[ft++],ht[ft++],ht[ft],ht[ft+1],ct,ut,tmpPt),tt=ht[ft++],nt=ht[ft++];break;case CMD$1.Q:mt=quadraticProjectPoint(tt,nt,ht[ft++],ht[ft++],ht[ft],ht[ft+1],ct,ut,tmpPt),tt=ht[ft++],nt=ht[ft++];break;case CMD$1.A:var vt=ht[ft++],yt=ht[ft++],bt=ht[ft++],_t=ht[ft++],xt=ht[ft++],St=ht[ft++];ft+=1;var Tt=!!(1-ht[ft++]);ot=Math.cos(xt)*bt+vt,st=Math.sin(xt)*_t+yt,ft<=1&&(it=ot,at=st);var wt=(ct-vt)*_t/bt+vt;mt=projectPointToArc(vt,yt,_t,xt,xt+St,Tt,wt,ut,tmpPt),tt=Math.cos(xt+St)*bt+vt,nt=Math.sin(xt+St)*_t+yt;break;case CMD$1.R:it=tt=ht[ft++],at=nt=ht[ft++];var Ct=ht[ft++],Et=ht[ft++];mt=projectPointToRect(it,at,Ct,Et,ct,ut,tmpPt);break;case CMD$1.Z:mt=projectPointToLine(tt,nt,it,at,ct,ut,tmpPt,!0),tt=it,nt=at;break}mt<dt&&(dt=mt,et.set(tmpPt[0],tmpPt[1]))}return dt}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(_e,_){if(_e){var et=_e.getTextGuideLine(),tt=_e.getTextContent();if(tt&&et){var nt=_e.textGuideLineConfig||{},it=[[0,0],[0,0],[0,0]],at=nt.candidates||DEFAULT_SEARCH_SPACE,ot=tt.getBoundingRect().clone();ot.applyTransform(tt.getComputedTransform());var st=1/0,dt=nt.anchor,ht=_e.getComputedTransform(),ct=ht&&invert([],ht),ut=_.get("length2")||0;dt&&pt2.copy(dt);for(var ft=0;ft<at.length;ft++){var gt=at[ft];getCandidateAnchor(gt,0,ot,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,ut),pt1.transform(ct);var mt=_e.getBoundingRect(),vt=dt?dt.distance(pt1):_e instanceof Path?nearestPointOnPath(pt1,_e.path,pt2):nearestPointOnRect(pt1,mt,pt2);vt<st&&(st=vt,pt1.transform(ht),pt2.transform(ht),pt2.toArray(it[0]),pt1.toArray(it[1]),pt0.toArray(it[2]))}limitTurnAngle(it,_.get("minTurnAngle")),et.setShape({points:it})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(_e,_){if(_<=180&&_>0){_=_/180*Math.PI,pt0.fromArray(_e[0]),pt1.fromArray(_e[1]),pt2.fromArray(_e[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var et=dir.len(),tt=dir2.len();if(!(et<.001||tt<.001)){dir.scale(1/et),dir2.scale(1/tt);var nt=dir.dot(dir2),it=Math.cos(_);if(it<nt){var at=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,at/Math.tan(Math.PI-_));var ot=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(ot))return;ot<0?Point.copy(tmpProjPoint,pt1):ot>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(_e[1])}}}}function limitSurfaceAngle(_e,_,et){if(et<=180&&et>0){et=et/180*Math.PI,pt0.fromArray(_e[0]),pt1.fromArray(_e[1]),pt2.fromArray(_e[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var tt=dir.len(),nt=dir2.len();if(!(tt<.001||nt<.001)){dir.scale(1/tt),dir2.scale(1/nt);var it=dir.dot(_),at=Math.cos(et);if(it<at){var ot=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var st=Math.PI/2,dt=Math.acos(dir2.dot(_)),ht=st+dt-et;if(ht>=st)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,ot/Math.tan(Math.PI/2-ht));var ct=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(ct))return;ct<0?Point.copy(tmpProjPoint,pt1):ct>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(_e[1])}}}}function setLabelLineState(_e,_,et,tt){var nt=et==="normal",it=nt?_e:_e.ensureState(et);it.ignore=_;var at=tt.get("smooth");at&&at===!0&&(at=.3),it.shape=it.shape||{},at>0&&(it.shape.smooth=at);var ot=tt.getModel("lineStyle").getLineStyle();nt?_e.useStyle(ot):it.style=ot}function buildLabelLinePath(_e,_){var et=_.smooth,tt=_.points;if(tt)if(_e.moveTo(tt[0][0],tt[0][1]),et>0&&tt.length>=3){var nt=dist$1(tt[0],tt[1]),it=dist$1(tt[1],tt[2]);if(!nt||!it){_e.lineTo(tt[1][0],tt[1][1]),_e.lineTo(tt[2][0],tt[2][1]);return}var at=Math.min(nt,it)*et,ot=lerp$1([],tt[1],tt[0],at/nt),st=lerp$1([],tt[1],tt[2],at/it),dt=lerp$1([],ot,st,.5);_e.bezierCurveTo(ot[0],ot[1],ot[0],ot[1],dt[0],dt[1]),_e.bezierCurveTo(st[0],st[1],st[0],st[1],tt[2][0],tt[2][1])}else for(var ht=1;ht<tt.length;ht++)_e.lineTo(tt[ht][0],tt[ht][1])}function setLabelLineStyle(_e,_,et){var tt=_e.getTextGuideLine(),nt=_e.getTextContent();if(!nt){tt&&_e.removeTextGuideLine();return}for(var it=_.normal,at=it.get("show"),ot=nt.ignore,st=0;st<DISPLAY_STATES.length;st++){var dt=DISPLAY_STATES[st],ht=_[dt],ct=dt==="normal";if(ht){var ut=ht.get("show"),ft=ct?ot:retrieve2(nt.states[dt]&&nt.states[dt].ignore,ot);if(ft||!retrieve2(ut,at)){var gt=ct?tt:tt&&tt.states[dt];gt&&(gt.ignore=!0),tt&&setLabelLineState(tt,!0,dt,ht);continue}tt||(tt=new Polyline$1,_e.setTextGuideLine(tt),!ct&&(ot||!at)&&setLabelLineState(tt,!0,"normal",_.normal),_e.stateProxy&&(tt.stateProxy=_e.stateProxy)),setLabelLineState(tt,!1,dt,ht)}}if(tt){defaults(tt.style,et),tt.style.fill=null;var mt=it.get("showAbove"),vt=_e.textGuideLineConfig=_e.textGuideLineConfig||{};vt.showAbove=mt||!1,tt.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(_e,_){_=_||"labelLine";for(var et={normal:_e.getModel(_)},tt=0;tt<SPECIAL_STATES.length;tt++){var nt=SPECIAL_STATES[tt];et[nt]=_e.getModel([nt,_])}return et}function prepareLayoutList(_e){for(var _=[],et=0;et<_e.length;et++){var tt=_e[et];if(!tt.defaultAttr.ignore){var nt=tt.label,it=nt.getComputedTransform(),at=nt.getBoundingRect(),ot=!it||it[1]<1e-5&&it[2]<1e-5,st=nt.style.margin||0,dt=at.clone();dt.applyTransform(it),dt.x-=st/2,dt.y-=st/2,dt.width+=st,dt.height+=st;var ht=ot?new OrientedBoundingRect(at,it):null;_.push({label:nt,labelLine:tt.labelLine,rect:dt,localRect:at,obb:ht,priority:tt.priority,defaultAttr:tt.defaultAttr,layoutOption:tt.computedLayoutOption,axisAligned:ot,transform:it})}}return _}function shiftLayout(_e,_,et,tt,nt,it){var at=_e.length;if(at<2)return;_e.sort(function(Tt,wt){return Tt.rect[_]-wt.rect[_]});for(var ot=0,st,dt=!1,ht=0;ht<at;ht++){var ct=_e[ht],ut=ct.rect;st=ut[_]-ot,st<0&&(ut[_]-=st,ct.label[_]-=st,dt=!0),ot=ut[_]+ut[et]}var ft=_e[0],gt=_e[at-1],mt,vt;yt(),mt<0&&xt(-mt,.8),vt<0&&xt(vt,.8),yt(),bt(mt,vt,1),bt(vt,mt,-1),yt(),mt<0&&St(-mt),vt<0&&St(vt);function yt(){mt=ft.rect[_]-tt,vt=nt-gt.rect[_]-gt.rect[et]}function bt(Tt,wt,Ct){if(Tt<0){var Et=Math.min(wt,-Tt);if(Et>0){_t(Et*Ct,0,at);var At=Et+Tt;At<0&&xt(-At*Ct,1)}else xt(-Tt*Ct,1)}}function _t(Tt,wt,Ct){Tt!==0&&(dt=!0);for(var Et=wt;Et<Ct;Et++){var At=_e[Et],Pt=At.rect;Pt[_]+=Tt,At.label[_]+=Tt}}function xt(Tt,wt){for(var Ct=[],Et=0,At=1;At<at;At++){var Pt=_e[At-1].rect,Rt=Math.max(_e[At].rect[_]-Pt[_]-Pt[et],0);Ct.push(Rt),Et+=Rt}if(Et){var It=Math.min(Math.abs(Tt)/Et,wt);if(Tt>0)for(var At=0;At<at-1;At++){var Mt=Ct[At]*It;_t(Mt,0,At+1)}else for(var At=at-1;At>0;At--){var Mt=Ct[At-1]*It;_t(-Mt,At,at)}}}function St(Tt){var wt=Tt<0?-1:1;Tt=Math.abs(Tt);for(var Ct=Math.ceil(Tt/(at-1)),Et=0;Et<at-1;Et++)if(wt>0?_t(Ct,0,Et+1):_t(-Ct,at-Et-1,at),Tt-=Ct,Tt<=0)return}return dt}function shiftLayoutOnX(_e,_,et,tt){return shiftLayout(_e,"x","width",_,et)}function shiftLayoutOnY(_e,_,et,tt){return shiftLayout(_e,"y","height",_,et)}function hideOverlap(_e){var _=[];_e.sort(function(mt,vt){return vt.priority-mt.priority});var et=new BoundingRect(0,0,0,0);function tt(mt){if(!mt.ignore){var vt=mt.ensureState("emphasis");vt.ignore==null&&(vt.ignore=!1)}mt.ignore=!0}for(var nt=0;nt<_e.length;nt++){var it=_e[nt],at=it.axisAligned,ot=it.localRect,st=it.transform,dt=it.label,ht=it.labelLine;et.copy(it.rect),et.width-=.1,et.height-=.1,et.x+=.05,et.y+=.05;for(var ct=it.obb,ut=!1,ft=0;ft<_.length;ft++){var gt=_[ft];if(et.intersect(gt.rect)){if(at&&gt.axisAligned){ut=!0;break}if(gt.obb||(gt.obb=new OrientedBoundingRect(gt.localRect,gt.transform)),ct||(ct=new OrientedBoundingRect(ot,st)),ct.intersect(gt.obb)){ut=!0;break}}}ut?(tt(dt),ht&&tt(ht)):(dt.attr("ignore",it.defaultAttr.ignore),ht&&ht.attr("ignore",it.defaultAttr.labelGuideIgnore),_.push(it))}}function cloneArr(_e){if(_e){for(var _=[],et=0;et<_e.length;et++)_.push(_e[et].slice());return _}}function prepareLayoutCallbackParams(_e,_){var et=_e.label,tt=_&&_.getTextGuideLine();return{dataIndex:_e.dataIndex,dataType:_e.dataType,seriesIndex:_e.seriesModel.seriesIndex,text:_e.label.style.text,rect:_e.hostRect,labelRect:_e.rect,align:et.style.align,verticalAlign:et.style.verticalAlign,labelLinePoints:cloneArr(tt&&tt.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(_e,_,et){for(var tt=0;tt<et.length;tt++){var nt=et[tt];_[nt]!=null&&(_e[nt]=_[nt])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function _e(){this._labelList=[],this._chartViewList=[]}return _e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},_e.prototype._addLabel=function(_,et,tt,nt,it){var at=nt.style,ot=nt.__hostTarget,st=ot.textConfig||{},dt=nt.getComputedTransform(),ht=nt.getBoundingRect().plain();BoundingRect.applyTransform(ht,ht,dt),dt?dummyTransformable.setLocalTransform(dt):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var ct=nt.__hostTarget,ut;if(ct){ut=ct.getBoundingRect().plain();var ft=ct.getComputedTransform();BoundingRect.applyTransform(ut,ut,ft)}var gt=ut&&ct.getTextGuideLine();this._labelList.push({label:nt,labelLine:gt,seriesModel:tt,dataIndex:_,dataType:et,layoutOption:it,computedLayoutOption:null,rect:ht,hostRect:ut,priority:ut?ut.width*ut.height:0,defaultAttr:{ignore:nt.ignore,labelGuideIgnore:gt&&gt.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:at.x,y:at.y,align:at.align,verticalAlign:at.verticalAlign,width:at.width,height:at.height,fontSize:at.fontSize},cursor:nt.cursor,attachedPos:st.position,attachedRot:st.rotation}})},_e.prototype.addLabelsOfSeries=function(_){var et=this;this._chartViewList.push(_);var tt=_.__model,nt=tt.get("labelLayout");(isFunction$3(nt)||keys(nt).length)&&_.group.traverse(function(it){if(it.ignore)return!0;var at=it.getTextContent(),ot=getECData(it);at&&!at.disableLabelLayout&&et._addLabel(ot.dataIndex,ot.dataType,tt,at,nt)})},_e.prototype.updateLayoutConfig=function(_){var et=_.getWidth(),tt=_.getHeight();function nt(_t,xt){return function(){updateLabelLinePoints(_t,xt)}}for(var it=0;it<this._labelList.length;it++){var at=this._labelList[it],ot=at.label,st=ot.__hostTarget,dt=at.defaultAttr,ht=void 0;isFunction$3(at.layoutOption)?ht=at.layoutOption(prepareLayoutCallbackParams(at,st)):ht=at.layoutOption,ht=ht||{},at.computedLayoutOption=ht;var ct=Math.PI/180;st&&st.setTextConfig({local:!1,position:ht.x!=null||ht.y!=null?null:dt.attachedPos,rotation:ht.rotate!=null?ht.rotate*ct:dt.attachedRot,offset:[ht.dx||0,ht.dy||0]});var ut=!1;if(ht.x!=null?(ot.x=parsePercent(ht.x,et),ot.setStyle("x",0),ut=!0):(ot.x=dt.x,ot.setStyle("x",dt.style.x)),ht.y!=null?(ot.y=parsePercent(ht.y,tt),ot.setStyle("y",0),ut=!0):(ot.y=dt.y,ot.setStyle("y",dt.style.y)),ht.labelLinePoints){var ft=st.getTextGuideLine();ft&&(ft.setShape({points:ht.labelLinePoints}),ut=!1)}var gt=labelLayoutInnerStore(ot);gt.needsUpdateLabelLine=ut,ot.rotation=ht.rotate!=null?ht.rotate*ct:dt.rotation,ot.scaleX=dt.scaleX,ot.scaleY=dt.scaleY;for(var mt=0;mt<LABEL_OPTION_TO_STYLE_KEYS.length;mt++){var vt=LABEL_OPTION_TO_STYLE_KEYS[mt];ot.setStyle(vt,ht[vt]!=null?ht[vt]:dt.style[vt])}if(ht.draggable){if(ot.draggable=!0,ot.cursor="move",st){var yt=at.seriesModel;if(at.dataIndex!=null){var bt=at.seriesModel.getData(at.dataType);yt=bt.getItemModel(at.dataIndex)}ot.on("drag",nt(st,yt.getModel("labelLine")))}}else ot.off("drag"),ot.cursor=dt.cursor}},_e.prototype.layout=function(_){var et=_.getWidth(),tt=_.getHeight(),nt=prepareLayoutList(this._labelList),it=filter$1(nt,function(st){return st.layoutOption.moveOverlap==="shiftX"}),at=filter$1(nt,function(st){return st.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(it,0,et),shiftLayoutOnY(at,0,tt);var ot=filter$1(nt,function(st){return st.layoutOption.hideOverlap});hideOverlap(ot)},_e.prototype.processLabelsOverall=function(){var _=this;each$f(this._chartViewList,function(et){var tt=et.__model,nt=et.ignoreLabelLineUpdate,it=tt.isAnimationEnabled();et.group.traverse(function(at){if(at.ignore&&!at.forceLabelAnimation)return!0;var ot=!nt,st=at.getTextContent();!ot&&st&&(ot=labelLayoutInnerStore(st).needsUpdateLabelLine),ot&&_._updateLabelLine(at,tt),it&&_._animateLabels(at,tt)})})},_e.prototype._updateLabelLine=function(_,et){var tt=_.getTextContent(),nt=getECData(_),it=nt.dataIndex;if(tt&&it!=null){var at=et.getData(nt.dataType),ot=at.getItemModel(it),st={},dt=at.getItemVisual(it,"style");if(dt){var ht=at.getVisual("drawType");st.stroke=dt[ht]}var ct=ot.getModel("labelLine");setLabelLineStyle(_,getLabelLineStatesModels(ot),st),updateLabelLinePoints(_,ct)}},_e.prototype._animateLabels=function(_,et){var tt=_.getTextContent(),nt=_.getTextGuideLine();if(tt&&(_.forceLabelAnimation||!tt.ignore&&!tt.invisible&&!_.disableLabelAnimation&&!isElementRemoved(_))){var it=labelLayoutInnerStore(tt),at=it.oldLayout,ot=getECData(_),st=ot.dataIndex,dt={x:tt.x,y:tt.y,rotation:tt.rotation},ht=et.getData(ot.dataType);if(at){tt.attr(at);var ut=_.prevStates;ut&&(indexOf(ut,"select")>=0&&tt.attr(it.oldLayoutSelect),indexOf(ut,"emphasis")>=0&&tt.attr(it.oldLayoutEmphasis)),updateProps$1(tt,dt,et,st)}else if(tt.attr(dt),!labelInner(tt).valueAnimation){var ct=retrieve2(tt.style.opacity,1);tt.style.opacity=0,initProps(tt,{style:{opacity:ct}},et,st)}if(it.oldLayout=dt,tt.states.select){var ft=it.oldLayoutSelect={};extendWithKeys(ft,dt,LABEL_LAYOUT_PROPS),extendWithKeys(ft,tt.states.select,LABEL_LAYOUT_PROPS)}if(tt.states.emphasis){var gt=it.oldLayoutEmphasis={};extendWithKeys(gt,dt,LABEL_LAYOUT_PROPS),extendWithKeys(gt,tt.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(tt,st,ht,et,et)}if(nt&&!nt.ignore&&!nt.invisible){var it=labelLineAnimationStore(nt),at=it.oldLayout,mt={points:nt.shape.points};at?(nt.attr({shape:at}),updateProps$1(nt,{shape:mt},et)):(nt.setShape(mt),nt.style.strokePercent=0,initProps(nt,{style:{strokePercent:1}},et)),it.oldLayout=mt}},_e}(),getLabelManager=makeInner();function installLabelLayout(_e){_e.registerUpdateLifecycle("series:beforeupdate",function(_,et,tt){var nt=getLabelManager(et).labelManager;nt||(nt=getLabelManager(et).labelManager=new LabelManager),nt.clearLabels()}),_e.registerUpdateLifecycle("series:layoutlabels",function(_,et,tt){var nt=getLabelManager(et).labelManager;tt.updatedSeries.forEach(function(it){nt.addLabelsOfSeries(et.getViewOfSeriesModel(it))}),nt.updateLayoutConfig(et),nt.layout(et),nt.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function _e(){}return _e.prototype.reset=function(_){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,_||4)},_e.prototype.moveTo=function(_,et){this._add("M",_,et)},_e.prototype.lineTo=function(_,et){this._add("L",_,et)},_e.prototype.bezierCurveTo=function(_,et,tt,nt,it,at){this._add("C",_,et,tt,nt,it,at)},_e.prototype.quadraticCurveTo=function(_,et,tt,nt){this._add("Q",_,et,tt,nt)},_e.prototype.arc=function(_,et,tt,nt,it,at){this.ellipse(_,et,tt,tt,0,nt,it,at)},_e.prototype.ellipse=function(_,et,tt,nt,it,at,ot,st){var dt=ot-at,ht=!st,ct=Math.abs(dt),ut=isAroundZero(ct-PI2$1)||(ht?dt>=PI2$1:-dt>=PI2$1),ft=dt>0?dt%PI2$1:dt%PI2$1+PI2$1,gt=!1;ut?gt=!0:isAroundZero(ct)?gt=!1:gt=ft>=PI$4==!!ht;var mt=_+tt*mathCos(at),vt=et+nt*mathSin(at);this._start&&this._add("M",mt,vt);var yt=Math.round(it*degree);if(ut){var bt=1/this._p,_t=(ht?1:-1)*(PI2$1-bt);this._add("A",tt,nt,yt,1,+ht,_+tt*mathCos(at+_t),et+nt*mathSin(at+_t)),bt>.01&&this._add("A",tt,nt,yt,0,+ht,mt,vt)}else{var xt=_+tt*mathCos(ot),St=et+nt*mathSin(ot);this._add("A",tt,nt,yt,+gt,+ht,xt,St)}},_e.prototype.rect=function(_,et,tt,nt){this._add("M",_,et),this._add("l",tt,0),this._add("l",0,nt),this._add("l",-tt,0),this._add("Z")},_e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},_e.prototype._add=function(_,et,tt,nt,it,at,ot,st,dt){for(var ht=[],ct=this._p,ut=1;ut<arguments.length;ut++){var ft=arguments[ut];if(isNaN(ft)){this._invalid=!0;return}ht.push(Math.round(ft*ct)/ct)}this._d.push(_+ht.join(" ")),this._start=_==="Z"},_e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},_e.prototype.getStr=function(){return this._str},_e}(),NONE="none",mathRound=Math.round;function pathHasFill(_e){var _=_e.fill;return _!=null&&_!==NONE}function pathHasStroke(_e){var _=_e.stroke;return _!=null&&_!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(_e){return"stroke-"+_e.toLowerCase()});function mapStyleToAttrs(_e,_,et,tt){var nt=_.opacity==null?1:_.opacity;if(et instanceof ZRImage){_e("opacity",nt);return}if(pathHasFill(_)){var it=normalizeColor(_.fill);_e("fill",it.color);var at=_.fillOpacity!=null?_.fillOpacity*it.opacity*nt:it.opacity*nt;at<1&&_e("fill-opacity",at)}else _e("fill",NONE);if(pathHasStroke(_)){var ot=normalizeColor(_.stroke);_e("stroke",ot.color);var st=_.strokeNoScale?et.getLineScale():1,dt=st?(_.lineWidth||0)/st:0,ht=_.strokeOpacity!=null?_.strokeOpacity*ot.opacity*nt:ot.opacity*nt,ct=_.strokeFirst;if(dt!==1&&_e("stroke-width",dt),ct&&_e("paint-order",ct?"stroke":"fill"),ht<1&&_e("stroke-opacity",ht),_.lineDash){var ut=getLineDash(et),ft=ut[0],gt=ut[1];ft&&(gt=mathRound(gt||0),_e("stroke-dasharray",ft.join(",")),(gt||tt)&&_e("stroke-dashoffset",gt))}for(var mt=0;mt<strokeProps.length;mt++){var vt=strokeProps[mt];if(_[vt]!==DEFAULT_PATH_STYLE[vt]){var yt=_[vt]||DEFAULT_PATH_STYLE[vt];yt&&_e(svgStrokeProps[mt],yt)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(_e){return document.createElementNS(SVGNS,_e)}function createVNode(_e,_,et,tt,nt){return{tag:_e,attrs:et||{},children:tt,text:nt,key:_}}function createElementOpen(_e,_){var et=[];if(_)for(var tt in _){var nt=_[tt],it=tt;nt!==!1&&(nt!==!0&&nt!=null&&(it+='="'+nt+'"'),et.push(it))}return"<"+_e+" "+et.join(" ")+">"}function createElementClose(_e){return"</"+_e+">"}function vNodeToString(_e,_){_=_||{};var et=_.newline?`
`:"";function tt(nt){var it=nt.children,at=nt.tag,ot=nt.attrs,st=nt.text;return createElementOpen(at,ot)+(at!=="style"?encodeHTML(st):st||"")+(it?""+et+map$1(it,function(dt){return tt(dt)}).join(et)+et:"")+createElementClose(at)}return tt(_e)}function getCssString(_e,_,et){et=et||{};var tt=et.newline?`
`:"",nt=" {"+tt,it=tt+"}",at=map$1(keys(_e),function(st){return st+nt+map$1(keys(_e[st]),function(dt){return dt+":"+_e[st][dt]+";"}).join(tt)+it}).join(tt),ot=map$1(keys(_),function(st){return"@keyframes "+st+nt+map$1(keys(_[st]),function(dt){return dt+nt+map$1(keys(_[st][dt]),function(ht){var ct=_[st][dt][ht];return ht==="d"&&(ct='path("'+ct+'")'),ht+":"+ct+";"}).join(tt)+it}).join(tt)+it}).join(tt);return!at&&!ot?"":["<![CDATA[",at,ot,"]]>"].join(tt)}function createBrushScope(_e){return{zrId:_e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(_e,_,et,tt){return createVNode("svg","root",{width:_e,height:_,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:tt?"0 0 "+_e+" "+_:!1},et)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(_e,_,et){var tt=extend({},_e.shape);extend(tt,_),_e.buildPath(et,tt);var nt=new SVGPathRebuilder;return nt.reset(getPathPrecision(_e)),et.rebuildPath(nt,1),nt.generateStr(),nt.getStr()}function setTransformOrigin(_e,_){var et=_.originX,tt=_.originY;(et||tt)&&(_e[transformOriginKey]=et+"px "+tt+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(_e,_){var et=_.zrId+"-ani-"+_.cssAnimIdx++;return _.cssAnims[et]=_e,et}function createCompoundPathCSSAnimation(_e,_,et){var tt=_e.shape.paths,nt={},it,at;if(each$f(tt,function(st){var dt=createBrushScope(et.zrId);dt.animation=!0,createCSSAnimation(st,{},dt,!0);var ht=dt.cssAnims,ct=dt.cssNodes,ut=keys(ht),ft=ut.length;if(ft){at=ut[ft-1];var gt=ht[at];for(var mt in gt){var vt=gt[mt];nt[mt]=nt[mt]||{d:""},nt[mt].d+=vt.d||""}for(var yt in ct){var bt=ct[yt].animation;bt.indexOf(at)>=0&&(it=bt)}}}),!!it){_.d=!1;var ot=addAnimation(nt,et);return it.replace(at,ot)}}function getEasingFunc(_e){return isString$1(_e)?EASING_MAP[_e]?"cubic-bezier("+EASING_MAP[_e]+")":createCubicEasingFunc(_e)?_e:"":""}function createCSSAnimation(_e,_,et,tt){var nt=_e.animators,it=nt.length,at=[];if(_e instanceof CompoundPath){var ot=createCompoundPathCSSAnimation(_e,_,et);if(ot)at.push(ot);else if(!it)return}else if(!it)return;for(var st={},dt=0;dt<it;dt++){var ht=nt[dt],ct=[ht.getMaxTime()/1e3+"s"],ut=getEasingFunc(ht.getClip().easing),ft=ht.getDelay();ut?ct.push(ut):ct.push("linear"),ft&&ct.push(ft/1e3+"s"),ht.getLoop()&&ct.push("infinite");var gt=ct.join(" ");st[gt]=st[gt]||[gt,[]],st[gt][1].push(ht)}function mt(bt){var _t=bt[1],xt=_t.length,St={},Tt={},wt={},Ct="animation-timing-function";function Et(Zt,Kt,ur){for(var ir=Zt.getTracks(),hr=Zt.getMaxTime(),fr=0;fr<ir.length;fr++){var mr=ir[fr];if(mr.needsAnimate()){var br=mr.keyframes,Er=mr.propName;if(ur&&(Er=ur(Er)),Er)for(var kr=0;kr<br.length;kr++){var jr=br[kr],Hr=Math.round(jr.time/hr*100)+"%",Wr=getEasingFunc(jr.easing),Yr=jr.rawValue;(isString$1(Yr)||isNumber(Yr))&&(Kt[Hr]=Kt[Hr]||{},Kt[Hr][Er]=jr.rawValue,Wr&&(Kt[Hr][Ct]=Wr))}}}}for(var At=0;At<xt;At++){var Pt=_t[At],Rt=Pt.targetName;Rt?Rt==="shape"&&Et(Pt,Tt):!tt&&Et(Pt,St)}for(var It in St){var Mt={};copyTransform(Mt,_e),extend(Mt,St[It]);var Ot=getSRTTransformString(Mt),$t=St[It][Ct];wt[It]=Ot?{transform:Ot}:{},setTransformOrigin(wt[It],Mt),$t&&(wt[It][Ct]=$t)}var Lt,kt=!0;for(var It in Tt){wt[It]=wt[It]||{};var Nt=!Lt,$t=Tt[It][Ct];Nt&&(Lt=new PathProxy);var Vt=Lt.len();Lt.reset(),wt[It].d=buildPathString(_e,Tt[It],Lt);var zt=Lt.len();if(!Nt&&Vt!==zt){kt=!1;break}$t&&(wt[It][Ct]=$t)}if(!kt)for(var It in wt)delete wt[It].d;if(!tt)for(var At=0;At<xt;At++){var Pt=_t[At],Rt=Pt.targetName;Rt==="style"&&Et(Pt,wt,function(ir){return ANIMATE_STYLE_MAP[ir]})}for(var Xt=keys(wt),Wt=!0,nr,At=1;At<Xt.length;At++){var Jt=Xt[At-1],lr=Xt[At];if(wt[Jt][transformOriginKey]!==wt[lr][transformOriginKey]){Wt=!1;break}nr=wt[Jt][transformOriginKey]}if(Wt&&nr){for(var It in wt)wt[It][transformOriginKey]&&delete wt[It][transformOriginKey];_[transformOriginKey]=nr}if(filter$1(Xt,function(Zt){return keys(wt[Zt]).length>0}).length){var pr=addAnimation(wt,et);return pr+" "+bt[0]+" both"}}for(var vt in st){var ot=mt(st[vt]);ot&&at.push(ot)}if(at.length){var yt=et.zrId+"-cls-"+getClassId();et.cssNodes["."+yt]={animation:at.join(",")},_.class=yt}}function createCSSEmphasis(_e,_,et){if(!_e.ignore)if(_e.isSilent()){var tt={"pointer-events":"none"};setClassAttribute(tt,_,et)}else{var nt=_e.states.emphasis&&_e.states.emphasis.style?_e.states.emphasis.style:{},it=nt.fill;if(!it){var at=_e.style&&_e.style.fill,ot=_e.states.select&&_e.states.select.style&&_e.states.select.style.fill,st=_e.currentStates.indexOf("select")>=0&&ot||at;st&&(it=liftColor(st))}var dt=nt.lineWidth;if(dt){var ht=!nt.strokeNoScale&&_e.transform?_e.transform[0]:1;dt=dt/ht}var tt={cursor:"pointer"};it&&(tt.fill=it),nt.stroke&&(tt.stroke=nt.stroke),dt&&(tt["stroke-width"]=dt),setClassAttribute(tt,_,et)}}function setClassAttribute(_e,_,et,tt){var nt=JSON.stringify(_e),it=et.cssStyleCache[nt];it||(it=et.zrId+"-cls-"+getClassId(),et.cssStyleCache[nt]=it,et.cssNodes["."+it+":hover"]=_e),_.class=_.class?_.class+" "+it:it}var round$1=Math.round;function isImageLike(_e){return _e&&isString$1(_e.src)}function isCanvasLike(_e){return _e&&isFunction$3(_e.toDataURL)}function setStyleAttrs(_e,_,et,tt){mapStyleToAttrs(function(nt,it){var at=nt==="fill"||nt==="stroke";at&&isGradient(it)?setGradient(_,_e,nt,tt):at&&isPattern(it)?setPattern(et,_e,nt,tt):_e[nt]=it,at&&tt.ssr&&it==="none"&&(_e["pointer-events"]="visible")},_,et,!1),setShadow(et,_e,tt)}function setMetaData(_e,_){var et=getElementSSRData(_);et&&(et.each(function(tt,nt){tt!=null&&(_e[(META_DATA_PREFIX+nt).toLowerCase()]=tt+"")}),_.isSilent()&&(_e[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(_e){return isAroundZero(_e[0]-1)&&isAroundZero(_e[1])&&isAroundZero(_e[2])&&isAroundZero(_e[3]-1)}function noTranslate(_e){return isAroundZero(_e[4])&&isAroundZero(_e[5])}function setTransform(_e,_,et){if(_&&!(noTranslate(_)&&noRotateScale(_))){var tt=1e4;_e.transform=noRotateScale(_)?"translate("+round$1(_[4]*tt)/tt+" "+round$1(_[5]*tt)/tt+")":getMatrixStr(_)}}function convertPolyShape(_e,_,et){for(var tt=_e.points,nt=[],it=0;it<tt.length;it++)nt.push(round$1(tt[it][0]*et)/et),nt.push(round$1(tt[it][1]*et)/et);_.points=nt.join(" ")}function validatePolyShape(_e){return!_e.smooth}function createAttrsConvert(_e){var _=map$1(_e,function(et){return typeof et=="string"?[et,et]:et});return function(et,tt,nt){for(var it=0;it<_.length;it++){var at=_[it],ot=et[at[0]];ot!=null&&(tt[at[1]]=round$1(ot*nt)/nt)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(_e){for(var _=_e.animators,et=0;et<_.length;et++)if(_[et].targetName==="shape")return!0;return!1}function brushSVGPath(_e,_){var et=_e.style,tt=_e.shape,nt=builtinShapesDef[_e.type],it={},at=_.animation,ot="path",st=_e.style.strokePercent,dt=_.compress&&getPathPrecision(_e)||4;if(nt&&!_.willUpdate&&!(nt[1]&&!nt[1](tt))&&!(at&&hasShapeAnimation(_e))&&!(st<1)){ot=_e.type;var ht=Math.pow(10,dt);nt[0](tt,it,ht)}else{var ct=!_e.path||_e.shapeChanged();_e.path||_e.createPathProxy();var ut=_e.path;ct&&(ut.beginPath(),_e.buildPath(ut,_e.shape),_e.pathUpdated());var ft=ut.getVersion(),gt=_e,mt=gt.__svgPathBuilder;(gt.__svgPathVersion!==ft||!mt||st!==gt.__svgPathStrokePercent)&&(mt||(mt=gt.__svgPathBuilder=new SVGPathRebuilder),mt.reset(dt),ut.rebuildPath(mt,st),mt.generateStr(),gt.__svgPathVersion=ft,gt.__svgPathStrokePercent=st),it.d=mt.getStr()}return setTransform(it,_e.transform),setStyleAttrs(it,et,_e,_),setMetaData(it,_e),_.animation&&createCSSAnimation(_e,it,_),_.emphasis&&createCSSEmphasis(_e,it,_),createVNode(ot,_e.id+"",it)}function brushSVGImage(_e,_){var et=_e.style,tt=et.image;if(tt&&!isString$1(tt)&&(isImageLike(tt)?tt=tt.src:isCanvasLike(tt)&&(tt=tt.toDataURL())),!!tt){var nt=et.x||0,it=et.y||0,at=et.width,ot=et.height,st={href:tt,width:at,height:ot};return nt&&(st.x=nt),it&&(st.y=it),setTransform(st,_e.transform),setStyleAttrs(st,et,_e,_),setMetaData(st,_e),_.animation&&createCSSAnimation(_e,st,_),createVNode("image",_e.id+"",st)}}function brushSVGTSpan(_e,_){var et=_e.style,tt=et.text;if(tt!=null&&(tt+=""),!(!tt||isNaN(et.x)||isNaN(et.y))){var nt=et.font||DEFAULT_FONT,it=et.x||0,at=adjustTextY$1(et.y||0,getLineHeight(nt),et.textBaseline),ot=TEXT_ALIGN_TO_ANCHOR[et.textAlign]||et.textAlign,st={"dominant-baseline":"central","text-anchor":ot};if(hasSeparateFont(et)){var dt="",ht=et.fontStyle,ct=parseFontSize(et.fontSize);if(!parseFloat(ct))return;var ut=et.fontFamily||DEFAULT_FONT_FAMILY,ft=et.fontWeight;dt+="font-size:"+ct+";font-family:"+ut+";",ht&&ht!=="normal"&&(dt+="font-style:"+ht+";"),ft&&ft!=="normal"&&(dt+="font-weight:"+ft+";"),st.style=dt}else st.style="font: "+nt;return tt.match(/\s/)&&(st["xml:space"]="preserve"),it&&(st.x=it),at&&(st.y=at),setTransform(st,_e.transform),setStyleAttrs(st,et,_e,_),setMetaData(st,_e),_.animation&&createCSSAnimation(_e,st,_),createVNode("text",_e.id+"",st,void 0,tt)}}function brush(_e,_){if(_e instanceof Path)return brushSVGPath(_e,_);if(_e instanceof ZRImage)return brushSVGImage(_e,_);if(_e instanceof TSpan)return brushSVGTSpan(_e,_)}function setShadow(_e,_,et){var tt=_e.style;if(hasShadow(tt)){var nt=getShadowKey(_e),it=et.shadowCache,at=it[nt];if(!at){var ot=_e.getGlobalScale(),st=ot[0],dt=ot[1];if(!st||!dt)return;var ht=tt.shadowOffsetX||0,ct=tt.shadowOffsetY||0,ut=tt.shadowBlur,ft=normalizeColor(tt.shadowColor),gt=ft.opacity,mt=ft.color,vt=ut/2/st,yt=ut/2/dt,bt=vt+" "+yt;at=et.zrId+"-s"+et.shadowIdx++,et.defs[at]=createVNode("filter",at,{id:at,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:ht/st,dy:ct/dt,stdDeviation:bt,"flood-color":mt,"flood-opacity":gt})]),it[nt]=at}_.filter=getIdURL(at)}}function setGradient(_e,_,et,tt){var nt=_e[et],it,at={gradientUnits:nt.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(nt))it="linearGradient",at.x1=nt.x,at.y1=nt.y,at.x2=nt.x2,at.y2=nt.y2;else if(isRadialGradient(nt))it="radialGradient",at.cx=retrieve2(nt.x,.5),at.cy=retrieve2(nt.y,.5),at.r=retrieve2(nt.r,.5);else return;for(var ot=nt.colorStops,st=[],dt=0,ht=ot.length;dt<ht;++dt){var ct=round4(ot[dt].offset)*100+"%",ut=ot[dt].color,ft=normalizeColor(ut),gt=ft.color,mt=ft.opacity,vt={offset:ct};vt["stop-color"]=gt,mt<1&&(vt["stop-opacity"]=mt),st.push(createVNode("stop",dt+"",vt))}var yt=createVNode(it,"",at,st),bt=vNodeToString(yt),_t=tt.gradientCache,xt=_t[bt];xt||(xt=tt.zrId+"-g"+tt.gradientIdx++,_t[bt]=xt,at.id=xt,tt.defs[xt]=createVNode(it,xt,at,st)),_[et]=getIdURL(xt)}function setPattern(_e,_,et,tt){var nt=_e.style[et],it=_e.getBoundingRect(),at={},ot=nt.repeat,st=ot==="no-repeat",dt=ot==="repeat-x",ht=ot==="repeat-y",ct;if(isImagePattern(nt)){var ut=nt.imageWidth,ft=nt.imageHeight,gt=void 0,mt=nt.image;if(isString$1(mt)?gt=mt:isImageLike(mt)?gt=mt.src:isCanvasLike(mt)&&(gt=mt.toDataURL()),typeof Image>"u"){var vt="Image width/height must been given explictly in svg-ssr renderer.";assert(ut,vt),assert(ft,vt)}else if(ut==null||ft==null){var yt=function(At,Pt){if(At){var Rt=At.elm,It=ut||Pt.width,Mt=ft||Pt.height;At.tag==="pattern"&&(dt?(Mt=1,It/=it.width):ht&&(It=1,Mt/=it.height)),At.attrs.width=It,At.attrs.height=Mt,Rt&&(Rt.setAttribute("width",It),Rt.setAttribute("height",Mt))}},bt=createOrUpdateImage(gt,null,_e,function(At){st||yt(Tt,At),yt(ct,At)});bt&&bt.width&&bt.height&&(ut=ut||bt.width,ft=ft||bt.height)}ct=createVNode("image","img",{href:gt,width:ut,height:ft}),at.width=ut,at.height=ft}else nt.svgElement&&(ct=clone$4(nt.svgElement),at.width=nt.svgWidth,at.height=nt.svgHeight);if(ct){var _t,xt;st?_t=xt=1:dt?(xt=1,_t=at.width/it.width):ht?(_t=1,xt=at.height/it.height):at.patternUnits="userSpaceOnUse",_t!=null&&!isNaN(_t)&&(at.width=_t),xt!=null&&!isNaN(xt)&&(at.height=xt);var St=getSRTTransformString(nt);St&&(at.patternTransform=St);var Tt=createVNode("pattern","",at,[ct]),wt=vNodeToString(Tt),Ct=tt.patternCache,Et=Ct[wt];Et||(Et=tt.zrId+"-p"+tt.patternIdx++,Ct[wt]=Et,at.id=Et,Tt=tt.defs[Et]=createVNode("pattern",Et,at,[ct])),_[et]=getIdURL(Et)}}function setClipPath(_e,_,et){var tt=et.clipPathCache,nt=et.defs,it=tt[_e.id];if(!it){it=et.zrId+"-c"+et.clipPathIdx++;var at={id:it};tt[_e.id]=it,nt[it]=createVNode("clipPath",it,at,[brushSVGPath(_e,et)])}_["clip-path"]=getIdURL(it)}function createTextNode(_e){return document.createTextNode(_e)}function insertBefore(_e,_,et){_e.insertBefore(_,et)}function removeChild(_e,_){_e.removeChild(_)}function appendChild(_e,_){_e.appendChild(_)}function parentNode(_e){return _e.parentNode}function nextSibling(_e){return _e.nextSibling}function setTextContent(_e,_){_e.textContent=_}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(_e){return _e===void 0}function isDef(_e){return _e!==void 0}function createKeyToOldIdx(_e,_,et){for(var tt={},nt=_;nt<=et;++nt){var it=_e[nt].key;it!==void 0&&(tt[it]=nt)}return tt}function sameVnode(_e,_){var et=_e.key===_.key,tt=_e.tag===_.tag;return tt&&et}function createElm(_e){var _,et=_e.children,tt=_e.tag;if(isDef(tt)){var nt=_e.elm=createElement(tt);if(updateAttrs(emptyNode,_e),isArray$1(et))for(_=0;_<et.length;++_){var it=et[_];it!=null&&appendChild(nt,createElm(it))}else isDef(_e.text)&&!isObject$4(_e.text)&&appendChild(nt,createTextNode(_e.text))}else _e.elm=createTextNode(_e.text);return _e.elm}function addVnodes(_e,_,et,tt,nt){for(;tt<=nt;++tt){var it=et[tt];it!=null&&insertBefore(_e,createElm(it),_)}}function removeVnodes(_e,_,et,tt){for(;et<=tt;++et){var nt=_[et];if(nt!=null)if(isDef(nt.tag)){var it=parentNode(nt.elm);removeChild(it,nt.elm)}else removeChild(_e,nt.elm)}}function updateAttrs(_e,_){var et,tt=_.elm,nt=_e&&_e.attrs||{},it=_.attrs||{};if(nt!==it){for(et in it){var at=it[et],ot=nt[et];ot!==at&&(at===!0?tt.setAttribute(et,""):at===!1?tt.removeAttribute(et):et==="style"?tt.style.cssText=at:et.charCodeAt(0)!==xChar?tt.setAttribute(et,at):et==="xmlns:xlink"||et==="xmlns"?tt.setAttributeNS(XMLNS,et,at):et.charCodeAt(3)===colonChar?tt.setAttributeNS(XML_NAMESPACE,et,at):et.charCodeAt(5)===colonChar?tt.setAttributeNS(XLINKNS,et,at):tt.setAttribute(et,at))}for(et in nt)et in it||tt.removeAttribute(et)}}function updateChildren(_e,_,et){for(var tt=0,nt=0,it=_.length-1,at=_[0],ot=_[it],st=et.length-1,dt=et[0],ht=et[st],ct,ut,ft,gt;tt<=it&&nt<=st;)at==null?at=_[++tt]:ot==null?ot=_[--it]:dt==null?dt=et[++nt]:ht==null?ht=et[--st]:sameVnode(at,dt)?(patchVnode(at,dt),at=_[++tt],dt=et[++nt]):sameVnode(ot,ht)?(patchVnode(ot,ht),ot=_[--it],ht=et[--st]):sameVnode(at,ht)?(patchVnode(at,ht),insertBefore(_e,at.elm,nextSibling(ot.elm)),at=_[++tt],ht=et[--st]):sameVnode(ot,dt)?(patchVnode(ot,dt),insertBefore(_e,ot.elm,at.elm),ot=_[--it],dt=et[++nt]):(isUndef(ct)&&(ct=createKeyToOldIdx(_,tt,it)),ut=ct[dt.key],isUndef(ut)?insertBefore(_e,createElm(dt),at.elm):(ft=_[ut],ft.tag!==dt.tag?insertBefore(_e,createElm(dt),at.elm):(patchVnode(ft,dt),_[ut]=void 0,insertBefore(_e,ft.elm,at.elm))),dt=et[++nt]);(tt<=it||nt<=st)&&(tt>it?(gt=et[st+1]==null?null:et[st+1].elm,addVnodes(_e,gt,et,nt,st)):removeVnodes(_e,_,tt,it))}function patchVnode(_e,_){var et=_.elm=_e.elm,tt=_e.children,nt=_.children;_e!==_&&(updateAttrs(_e,_),isUndef(_.text)?isDef(tt)&&isDef(nt)?tt!==nt&&updateChildren(et,tt,nt):isDef(nt)?(isDef(_e.text)&&setTextContent(et,""),addVnodes(et,null,nt,0,nt.length-1)):isDef(tt)?removeVnodes(et,tt,0,tt.length-1):isDef(_e.text)&&setTextContent(et,""):_e.text!==_.text&&(isDef(tt)&&removeVnodes(et,tt,0,tt.length-1),setTextContent(et,_.text)))}function patch(_e,_){if(sameVnode(_e,_))patchVnode(_e,_);else{var et=_e.elm,tt=parentNode(et);createElm(_),tt!==null&&(insertBefore(tt,_.elm,nextSibling(et)),removeVnodes(tt,[_e],0,0))}return _}var svgId=0,SVGPainter=function(){function _e(_,et,tt){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=et,this._opts=tt=extend({},tt),this.root=_,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(tt.width,tt.height),_&&!tt.ssr){var nt=this._viewport=document.createElement("div");nt.style.cssText="position:relative;overflow:hidden";var it=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),nt.appendChild(it),_.appendChild(nt)}this.resize(tt.width,tt.height)}return _e.prototype.getType=function(){return this.type},_e.prototype.getViewportRoot=function(){return this._viewport},_e.prototype.getViewportRootOffset=function(){var _=this.getViewportRoot();if(_)return{offsetLeft:_.offsetLeft||0,offsetTop:_.offsetTop||0}},_e.prototype.getSvgDom=function(){return this._svgDom},_e.prototype.refresh=function(){if(this.root){var _=this.renderToVNode({willUpdate:!0});_.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,_),this._oldVNode=_}},_e.prototype.renderOneToVNode=function(_){return brush(_,createBrushScope(this._id))},_e.prototype.renderToVNode=function(_){_=_||{};var et=this.storage.getDisplayList(!0),tt=this._width,nt=this._height,it=createBrushScope(this._id);it.animation=_.animation,it.willUpdate=_.willUpdate,it.compress=_.compress,it.emphasis=_.emphasis,it.ssr=this._opts.ssr;var at=[],ot=this._bgVNode=createBackgroundVNode(tt,nt,this._backgroundColor,it);ot&&at.push(ot);var st=_.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(et,it,st?st.children:at),st&&at.push(st);var dt=map$1(keys(it.defs),function(ut){return it.defs[ut]});if(dt.length&&at.push(createVNode("defs","defs",{},dt)),_.animation){var ht=getCssString(it.cssNodes,it.cssAnims,{newline:!0});if(ht){var ct=createVNode("style","stl",{},[],ht);at.push(ct)}}return createSVGVNode(tt,nt,at,_.useViewBox)},_e.prototype.renderToString=function(_){return _=_||{},vNodeToString(this.renderToVNode({animation:retrieve2(_.cssAnimation,!0),emphasis:retrieve2(_.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(_.useViewBox,!0)}),{newline:!0})},_e.prototype.setBackgroundColor=function(_){this._backgroundColor=_},_e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},_e.prototype._paintList=function(_,et,tt){for(var nt=_.length,it=[],at=0,ot,st,dt=0,ht=0;ht<nt;ht++){var ct=_[ht];if(!ct.invisible){var ut=ct.__clipPaths,ft=ut&&ut.length||0,gt=st&&st.length||0,mt=void 0;for(mt=Math.max(ft-1,gt-1);mt>=0&&!(ut&&st&&ut[mt]===st[mt]);mt--);for(var vt=gt-1;vt>mt;vt--)at--,ot=it[at-1];for(var yt=mt+1;yt<ft;yt++){var bt={};setClipPath(ut[yt],bt,et);var _t=createVNode("g","clip-g-"+dt++,bt,[]);(ot?ot.children:tt).push(_t),it[at++]=_t,ot=_t}st=ut;var xt=brush(ct,et);xt&&(ot?ot.children:tt).push(xt)}}},_e.prototype.resize=function(_,et){var tt=this._opts,nt=this.root,it=this._viewport;if(_!=null&&(tt.width=_),et!=null&&(tt.height=et),nt&&it&&(it.style.display="none",_=getSize$1(nt,0,tt),et=getSize$1(nt,1,tt),it.style.display=""),this._width!==_||this._height!==et){if(this._width=_,this._height=et,it){var at=it.style;at.width=_+"px",at.height=et+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var ot=this._svgDom;ot&&(ot.setAttribute("width",_),ot.setAttribute("height",et));var st=this._bgVNode&&this._bgVNode.elm;st&&(st.setAttribute("width",_),st.setAttribute("height",et))}}},_e.prototype.getWidth=function(){return this._width},_e.prototype.getHeight=function(){return this._height},_e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},_e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},_e.prototype.toDataURL=function(_){var et=this.renderToString(),tt="data:image/svg+xml;";return _?(et=encodeBase64(et),et&&tt+"base64,"+et):tt+"charset=UTF-8,"+encodeURIComponent(et)},_e}();function createMethodNotSupport(_e){return function(){}}function createBackgroundVNode(_e,_,et,tt){var nt;if(et&&et!=="none")if(nt=createVNode("rect","bg",{width:_e,height:_,x:"0",y:"0"}),isGradient(et))setGradient({fill:et},nt.attrs,"fill",tt);else if(isPattern(et))setPattern({style:{fill:et},dirty:noop,getBoundingRect:function(){return{width:_e,height:_}}},nt.attrs,"fill",tt);else{var it=normalizeColor(et),at=it.color,ot=it.opacity;nt.attrs.fill=at,ot<1&&(nt.attrs["fill-opacity"]=ot)}return nt}function install$S(_e){_e.registerPainter("svg",SVGPainter)}function createDom(_e,_,et){var tt=platformApi.createCanvas(),nt=_.getWidth(),it=_.getHeight(),at=tt.style;return at&&(at.position="absolute",at.left="0",at.top="0",at.width=nt+"px",at.height=it+"px",tt.setAttribute("data-zr-dom-id",_e)),tt.width=nt*et,tt.height=it*et,tt}var Layer=function(_e){__extends(_,_e);function _(et,tt,nt){var it=_e.call(this)||this;it.motionBlur=!1,it.lastFrameAlpha=.7,it.dpr=1,it.virtual=!1,it.config={},it.incremental=!1,it.zlevel=0,it.maxRepaintRectCount=5,it.__dirty=!0,it.__firstTimePaint=!0,it.__used=!1,it.__drawIndex=0,it.__startIndex=0,it.__endIndex=0,it.__prevStartIndex=null,it.__prevEndIndex=null;var at;nt=nt||devicePixelRatio,typeof et=="string"?at=createDom(et,tt,nt):isObject$4(et)&&(at=et,et=at.id),it.id=et,it.dom=at;var ot=at.style;return ot&&(disableUserSelect(at),at.onselectstart=function(){return!1},ot.padding="0",ot.margin="0",ot.borderWidth="0"),it.painter=tt,it.dpr=nt,it}return _.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},_.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},_.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},_.prototype.setUnpainted=function(){this.__firstTimePaint=!0},_.prototype.createBackBuffer=function(){var et=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,et),this.ctxBack=this.domBack.getContext("2d"),et!==1&&this.ctxBack.scale(et,et)},_.prototype.createRepaintRects=function(et,tt,nt,it){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var at=[],ot=this.maxRepaintRectCount,st=!1,dt=new BoundingRect(0,0,0,0);function ht(bt){if(!(!bt.isFinite()||bt.isZero()))if(at.length===0){var _t=new BoundingRect(0,0,0,0);_t.copy(bt),at.push(_t)}else{for(var xt=!1,St=1/0,Tt=0,wt=0;wt<at.length;++wt){var Ct=at[wt];if(Ct.intersect(bt)){var Et=new BoundingRect(0,0,0,0);Et.copy(Ct),Et.union(bt),at[wt]=Et,xt=!0;break}else if(st){dt.copy(bt),dt.union(Ct);var At=bt.width*bt.height,Pt=Ct.width*Ct.height,Rt=dt.width*dt.height,It=Rt-At-Pt;It<St&&(St=It,Tt=wt)}}if(st&&(at[Tt].union(bt),xt=!0),!xt){var _t=new BoundingRect(0,0,0,0);_t.copy(bt),at.push(_t)}st||(st=at.length>=ot)}}for(var ct=this.__startIndex;ct<this.__endIndex;++ct){var ut=et[ct];if(ut){var ft=ut.shouldBePainted(nt,it,!0,!0),gt=ut.__isRendered&&(ut.__dirty&REDRAW_BIT||!ft)?ut.getPrevPaintRect():null;gt&&ht(gt);var mt=ft&&(ut.__dirty&REDRAW_BIT||!ut.__isRendered)?ut.getPaintRect():null;mt&&ht(mt)}}for(var ct=this.__prevStartIndex;ct<this.__prevEndIndex;++ct){var ut=tt[ct],ft=ut&&ut.shouldBePainted(nt,it,!0,!0);if(ut&&(!ft||!ut.__zr)&&ut.__isRendered){var gt=ut.getPrevPaintRect();gt&&ht(gt)}}var vt;do{vt=!1;for(var ct=0;ct<at.length;){if(at[ct].isZero()){at.splice(ct,1);continue}for(var yt=ct+1;yt<at.length;)at[ct].intersect(at[yt])?(vt=!0,at[ct].union(at[yt]),at.splice(yt,1)):yt++;ct++}}while(vt);return this._paintRects=at,at},_.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},_.prototype.resize=function(et,tt){var nt=this.dpr,it=this.dom,at=it.style,ot=this.domBack;at&&(at.width=et+"px",at.height=tt+"px"),it.width=et*nt,it.height=tt*nt,ot&&(ot.width=et*nt,ot.height=tt*nt,nt!==1&&this.ctxBack.scale(nt,nt))},_.prototype.clear=function(et,tt,nt){var it=this.dom,at=this.ctx,ot=it.width,st=it.height;tt=tt||this.clearColor;var dt=this.motionBlur&&!et,ht=this.lastFrameAlpha,ct=this.dpr,ut=this;dt&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(it,0,0,ot/ct,st/ct));var ft=this.domBack;function gt(mt,vt,yt,bt){if(at.clearRect(mt,vt,yt,bt),tt&&tt!=="transparent"){var _t=void 0;if(isGradientObject(tt)){var xt=tt.global||tt.__width===yt&&tt.__height===bt;_t=xt&&tt.__canvasGradient||getCanvasGradient(at,tt,{x:0,y:0,width:yt,height:bt}),tt.__canvasGradient=_t,tt.__width=yt,tt.__height=bt}else isImagePatternObject(tt)&&(tt.scaleX=tt.scaleX||ct,tt.scaleY=tt.scaleY||ct,_t=createCanvasPattern(at,tt,{dirty:function(){ut.setUnpainted(),ut.painter.refresh()}}));at.save(),at.fillStyle=_t||tt,at.fillRect(mt,vt,yt,bt),at.restore()}dt&&(at.save(),at.globalAlpha=ht,at.drawImage(ft,mt,vt,yt,bt),at.restore())}!nt||dt?gt(0,0,ot,st):nt.length&&each$f(nt,function(mt){gt(mt.x*ct,mt.y*ct,mt.width*ct,mt.height*ct)})},_}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(_e){return _e?_e.__builtin__?!0:!(typeof _e.resize!="function"||typeof _e.refresh!="function"):!1}function createRoot(_e,_){var et=document.createElement("div");return et.style.cssText=["position:relative","width:"+_e+"px","height:"+_+"px","padding:0","margin:0","border-width:0"].join(";")+";",et}var CanvasPainter=function(){function _e(_,et,tt,nt){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var it=!_.nodeName||_.nodeName.toUpperCase()==="CANVAS";this._opts=tt=extend({},tt||{}),this.dpr=tt.devicePixelRatio||devicePixelRatio,this._singleCanvas=it,this.root=_;var at=_.style;at&&(disableUserSelect(_),_.innerHTML=""),this.storage=et;var ot=this._zlevelList;this._prevDisplayList=[];var st=this._layers;if(it){var ht=_,ct=ht.width,ut=ht.height;tt.width!=null&&(ct=tt.width),tt.height!=null&&(ut=tt.height),this.dpr=tt.devicePixelRatio||1,ht.width=ct*this.dpr,ht.height=ut*this.dpr,this._width=ct,this._height=ut;var ft=new Layer(ht,this,this.dpr);ft.__builtin__=!0,ft.initContext(),st[CANVAS_ZLEVEL]=ft,ft.zlevel=CANVAS_ZLEVEL,ot.push(CANVAS_ZLEVEL),this._domRoot=_}else{this._width=getSize$1(_,0,tt),this._height=getSize$1(_,1,tt);var dt=this._domRoot=createRoot(this._width,this._height);_.appendChild(dt)}}return _e.prototype.getType=function(){return"canvas"},_e.prototype.isSingleCanvas=function(){return this._singleCanvas},_e.prototype.getViewportRoot=function(){return this._domRoot},_e.prototype.getViewportRootOffset=function(){var _=this.getViewportRoot();if(_)return{offsetLeft:_.offsetLeft||0,offsetTop:_.offsetTop||0}},_e.prototype.refresh=function(_){var et=this.storage.getDisplayList(!0),tt=this._prevDisplayList,nt=this._zlevelList;this._redrawId=Math.random(),this._paintList(et,tt,_,this._redrawId);for(var it=0;it<nt.length;it++){var at=nt[it],ot=this._layers[at];if(!ot.__builtin__&&ot.refresh){var st=it===0?this._backgroundColor:null;ot.refresh(st)}}return this._opts.useDirtyRect&&(this._prevDisplayList=et.slice()),this},_e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},_e.prototype._paintHoverList=function(_){var et=_.length,tt=this._hoverlayer;if(tt&&tt.clear(),!!et){for(var nt={inHover:!0,viewWidth:this._width,viewHeight:this._height},it,at=0;at<et;at++){var ot=_[at];ot.__inHover&&(tt||(tt=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),it||(it=tt.ctx,it.save()),brush$1(it,ot,nt,at===et-1))}it&&it.restore()}},_e.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},_e.prototype.paintOne=function(_,et){brushSingle(_,et)},_e.prototype._paintList=function(_,et,tt,nt){if(this._redrawId===nt){tt=tt||!1,this._updateLayerStatus(_);var it=this._doPaintList(_,et,tt),at=it.finished,ot=it.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),ot&&this._paintHoverList(_),at)this.eachLayer(function(dt){dt.afterBrush&&dt.afterBrush()});else{var st=this;requestAnimationFrame$1(function(){st._paintList(_,et,tt,nt)})}}},_e.prototype._compositeManually=function(){var _=this.getLayer(CANVAS_ZLEVEL).ctx,et=this._domRoot.width,tt=this._domRoot.height;_.clearRect(0,0,et,tt),this.eachBuiltinLayer(function(nt){nt.virtual&&_.drawImage(nt.dom,0,0,et,tt)})},_e.prototype._doPaintList=function(_,et,tt){for(var nt=this,it=[],at=this._opts.useDirtyRect,ot=0;ot<this._zlevelList.length;ot++){var st=this._zlevelList[ot],dt=this._layers[st];dt.__builtin__&&dt!==this._hoverlayer&&(dt.__dirty||tt)&&it.push(dt)}for(var ht=!0,ct=!1,ut=function(mt){var vt=it[mt],yt=vt.ctx,bt=at&&vt.createRepaintRects(_,et,ft._width,ft._height),_t=tt?vt.__startIndex:vt.__drawIndex,xt=!tt&&vt.incremental&&Date.now,St=xt&&Date.now(),Tt=vt.zlevel===ft._zlevelList[0]?ft._backgroundColor:null;if(vt.__startIndex===vt.__endIndex)vt.clear(!1,Tt,bt);else if(_t===vt.__startIndex){var wt=_[_t];(!wt.incremental||!wt.notClear||tt)&&vt.clear(!1,Tt,bt)}_t===-1&&(console.error("For some unknown reason. drawIndex is -1"),_t=vt.__startIndex);var Ct,Et=function(It){var Mt={inHover:!1,allClipped:!1,prevEl:null,viewWidth:nt._width,viewHeight:nt._height};for(Ct=_t;Ct<vt.__endIndex;Ct++){var Ot=_[Ct];if(Ot.__inHover&&(ct=!0),nt._doPaintEl(Ot,vt,at,It,Mt,Ct===vt.__endIndex-1),xt){var $t=Date.now()-St;if($t>15)break}}Mt.prevElClipPaths&&yt.restore()};if(bt)if(bt.length===0)Ct=vt.__endIndex;else for(var At=ft.dpr,Pt=0;Pt<bt.length;++Pt){var Rt=bt[Pt];yt.save(),yt.beginPath(),yt.rect(Rt.x*At,Rt.y*At,Rt.width*At,Rt.height*At),yt.clip(),Et(Rt),yt.restore()}else yt.save(),Et(),yt.restore();vt.__drawIndex=Ct,vt.__drawIndex<vt.__endIndex&&(ht=!1)},ft=this,gt=0;gt<it.length;gt++)ut(gt);return env.wxa&&each$f(this._layers,function(mt){mt&&mt.ctx&&mt.ctx.draw&&mt.ctx.draw()}),{finished:ht,needsRefreshHover:ct}},_e.prototype._doPaintEl=function(_,et,tt,nt,it,at){var ot=et.ctx;if(tt){var st=_.getPaintRect();(!nt||st&&st.intersect(nt))&&(brush$1(ot,_,it,at),_.setPrevPaintRect(st))}else brush$1(ot,_,it,at)},_e.prototype.getLayer=function(_,et){this._singleCanvas&&!this._needsManuallyCompositing&&(_=CANVAS_ZLEVEL);var tt=this._layers[_];return tt||(tt=new Layer("zr_"+_,this,this.dpr),tt.zlevel=_,tt.__builtin__=!0,this._layerConfig[_]?merge$1(tt,this._layerConfig[_],!0):this._layerConfig[_-EL_AFTER_INCREMENTAL_INC]&&merge$1(tt,this._layerConfig[_-EL_AFTER_INCREMENTAL_INC],!0),et&&(tt.virtual=et),this.insertLayer(_,tt),tt.initContext()),tt},_e.prototype.insertLayer=function(_,et){var tt=this._layers,nt=this._zlevelList,it=nt.length,at=this._domRoot,ot=null,st=-1;if(!tt[_]&&isLayerValid(et)){if(it>0&&_>nt[0]){for(st=0;st<it-1&&!(nt[st]<_&&nt[st+1]>_);st++);ot=tt[nt[st]]}if(nt.splice(st+1,0,_),tt[_]=et,!et.virtual)if(ot){var dt=ot.dom;dt.nextSibling?at.insertBefore(et.dom,dt.nextSibling):at.appendChild(et.dom)}else at.firstChild?at.insertBefore(et.dom,at.firstChild):at.appendChild(et.dom);et.painter||(et.painter=this)}},_e.prototype.eachLayer=function(_,et){for(var tt=this._zlevelList,nt=0;nt<tt.length;nt++){var it=tt[nt];_.call(et,this._layers[it],it)}},_e.prototype.eachBuiltinLayer=function(_,et){for(var tt=this._zlevelList,nt=0;nt<tt.length;nt++){var it=tt[nt],at=this._layers[it];at.__builtin__&&_.call(et,at,it)}},_e.prototype.eachOtherLayer=function(_,et){for(var tt=this._zlevelList,nt=0;nt<tt.length;nt++){var it=tt[nt],at=this._layers[it];at.__builtin__||_.call(et,at,it)}},_e.prototype.getLayers=function(){return this._layers},_e.prototype._updateLayerStatus=function(_){this.eachBuiltinLayer(function(ct,ut){ct.__dirty=ct.__used=!1});function et(ct){it&&(it.__endIndex!==ct&&(it.__dirty=!0),it.__endIndex=ct)}if(this._singleCanvas)for(var tt=1;tt<_.length;tt++){var nt=_[tt];if(nt.zlevel!==_[tt-1].zlevel||nt.incremental){this._needsManuallyCompositing=!0;break}}var it=null,at=0,ot,st;for(st=0;st<_.length;st++){var nt=_[st],dt=nt.zlevel,ht=void 0;ot!==dt&&(ot=dt,at=0),nt.incremental?(ht=this.getLayer(dt+INCREMENTAL_INC,this._needsManuallyCompositing),ht.incremental=!0,at=1):ht=this.getLayer(dt+(at>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),ht.__builtin__||logError("ZLevel "+dt+" has been used by unkown layer "+ht.id),ht!==it&&(ht.__used=!0,ht.__startIndex!==st&&(ht.__dirty=!0),ht.__startIndex=st,ht.incremental?ht.__drawIndex=-1:ht.__drawIndex=st,et(st),it=ht),nt.__dirty&REDRAW_BIT&&!nt.__inHover&&(ht.__dirty=!0,ht.incremental&&ht.__drawIndex<0&&(ht.__drawIndex=st))}et(st),this.eachBuiltinLayer(function(ct,ut){!ct.__used&&ct.getElementCount()>0&&(ct.__dirty=!0,ct.__startIndex=ct.__endIndex=ct.__drawIndex=0),ct.__dirty&&ct.__drawIndex<0&&(ct.__drawIndex=ct.__startIndex)})},_e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},_e.prototype._clearLayer=function(_){_.clear()},_e.prototype.setBackgroundColor=function(_){this._backgroundColor=_,each$f(this._layers,function(et){et.setUnpainted()})},_e.prototype.configLayer=function(_,et){if(et){var tt=this._layerConfig;tt[_]?merge$1(tt[_],et,!0):tt[_]=et;for(var nt=0;nt<this._zlevelList.length;nt++){var it=this._zlevelList[nt];if(it===_||it===_+EL_AFTER_INCREMENTAL_INC){var at=this._layers[it];merge$1(at,tt[_],!0)}}}},_e.prototype.delLayer=function(_){var et=this._layers,tt=this._zlevelList,nt=et[_];nt&&(nt.dom.parentNode.removeChild(nt.dom),delete et[_],tt.splice(indexOf(tt,_),1))},_e.prototype.resize=function(_,et){if(this._domRoot.style){var tt=this._domRoot;tt.style.display="none";var nt=this._opts,it=this.root;if(_!=null&&(nt.width=_),et!=null&&(nt.height=et),_=getSize$1(it,0,nt),et=getSize$1(it,1,nt),tt.style.display="",this._width!==_||et!==this._height){tt.style.width=_+"px",tt.style.height=et+"px";for(var at in this._layers)this._layers.hasOwnProperty(at)&&this._layers[at].resize(_,et);this.refresh(!0)}this._width=_,this._height=et}else{if(_==null||et==null)return;this._width=_,this._height=et,this.getLayer(CANVAS_ZLEVEL).resize(_,et)}return this},_e.prototype.clearLayer=function(_){var et=this._layers[_];et&&et.clear()},_e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},_e.prototype.getRenderedCanvas=function(_){if(_=_||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var et=new Layer("image",this,_.pixelRatio||this.dpr);et.initContext(),et.clear(!1,_.backgroundColor||this._backgroundColor);var tt=et.ctx;if(_.pixelRatio<=this.dpr){this.refresh();var nt=et.dom.width,it=et.dom.height;this.eachLayer(function(ct){ct.__builtin__?tt.drawImage(ct.dom,0,0,nt,it):ct.renderToCanvas&&(tt.save(),ct.renderToCanvas(tt),tt.restore())})}else for(var at={inHover:!1,viewWidth:this._width,viewHeight:this._height},ot=this.storage.getDisplayList(!0),st=0,dt=ot.length;st<dt;st++){var ht=ot[st];brush$1(tt,ht,at,st===dt-1)}return et.dom},_e.prototype.getWidth=function(){return this._width},_e.prototype.getHeight=function(){return this._height},_e}();function install$R(_e){_e.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.hasSymbolVisual=!0,et}return _.prototype.getInitialData=function(et){return createSeriesData(null,this,{useEncodeDefaulter:!0})},_.prototype.getLegendIcon=function(et){var tt=new Group$3,nt=createSymbol$1("line",0,et.itemHeight/2,et.itemWidth,0,et.lineStyle.stroke,!1);tt.add(nt),nt.setStyle(et.lineStyle);var it=this.getData().getVisual("symbol"),at=this.getData().getVisual("symbolRotate"),ot=it==="none"?"circle":it,st=et.itemHeight*.8,dt=createSymbol$1(ot,(et.itemWidth-st)/2,(et.itemHeight-st)/2,st,st,et.itemStyle.fill);tt.add(dt),dt.setStyle(et.itemStyle);var ht=et.iconRotate==="inherit"?at:et.iconRotate||0;return dt.rotation=ht*Math.PI/180,dt.setOrigin([et.itemWidth/2,et.itemHeight/2]),ot.indexOf("empty")>-1&&(dt.style.stroke=dt.style.fill,dt.style.fill="#fff",dt.style.lineWidth=2),tt},_.type="series.line",_.dependencies=["grid","polar"],_.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},_}(SeriesModel);function getDefaultLabel(_e,_){var et=_e.mapDimensionsAll("defaultedLabel"),tt=et.length;if(tt===1){var nt=retrieveRawValue(_e,_,et[0]);return nt!=null?nt+"":null}else if(tt){for(var it=[],at=0;at<et.length;at++)it.push(retrieveRawValue(_e,_,et[at]));return it.join(" ")}}function getDefaultInterpolatedLabel(_e,_){var et=_e.mapDimensionsAll("defaultedLabel");if(!isArray$1(_))return _+"";for(var tt=[],nt=0;nt<et.length;nt++){var it=_e.getDimensionIndex(et[nt]);it>=0&&tt.push(_[it])}return tt.join(" ")}var Symbol$1=function(_e){__extends$1(_,_e);function _(et,tt,nt,it){var at=_e.call(this)||this;return at.updateData(et,tt,nt,it),at}return _.prototype._createSymbol=function(et,tt,nt,it,at){this.removeAll();var ot=createSymbol$1(et,-1,-1,2,2,null,at);ot.attr({z2:100,culling:!0,scaleX:it[0]/2,scaleY:it[1]/2}),ot.drift=driftSymbol,this._symbolType=et,this.add(ot)},_.prototype.stopSymbolAnimation=function(et){this.childAt(0).stopAnimation(null,et)},_.prototype.getSymbolType=function(){return this._symbolType},_.prototype.getSymbolPath=function(){return this.childAt(0)},_.prototype.highlight=function(){enterEmphasis(this.childAt(0))},_.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},_.prototype.setZ=function(et,tt){var nt=this.childAt(0);nt.zlevel=et,nt.z=tt},_.prototype.setDraggable=function(et,tt){var nt=this.childAt(0);nt.draggable=et,nt.cursor=!tt&&et?"move":nt.cursor},_.prototype.updateData=function(et,tt,nt,it){this.silent=!1;var at=et.getItemVisual(tt,"symbol")||"circle",ot=et.hostModel,st=_.getSymbolSize(et,tt),dt=at!==this._symbolType,ht=it&&it.disableAnimation;if(dt){var ct=et.getItemVisual(tt,"symbolKeepAspect");this._createSymbol(at,et,tt,st,ct)}else{var ut=this.childAt(0);ut.silent=!1;var ft={scaleX:st[0]/2,scaleY:st[1]/2};ht?ut.attr(ft):updateProps$1(ut,ft,ot,tt),saveOldStyle(ut)}if(this._updateCommon(et,tt,st,nt,it),dt){var ut=this.childAt(0);if(!ht){var ft={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:ut.style.opacity}};ut.scaleX=ut.scaleY=0,ut.style.opacity=0,initProps(ut,ft,ot,tt)}}ht&&this.childAt(0).stopAnimation("leave")},_.prototype._updateCommon=function(et,tt,nt,it,at){var ot=this.childAt(0),st=et.hostModel,dt,ht,ct,ut,ft,gt,mt,vt,yt;if(it&&(dt=it.emphasisItemStyle,ht=it.blurItemStyle,ct=it.selectItemStyle,ut=it.focus,ft=it.blurScope,mt=it.labelStatesModels,vt=it.hoverScale,yt=it.cursorStyle,gt=it.emphasisDisabled),!it||et.hasItemOption){var bt=it&&it.itemModel?it.itemModel:et.getItemModel(tt),_t=bt.getModel("emphasis");dt=_t.getModel("itemStyle").getItemStyle(),ct=bt.getModel(["select","itemStyle"]).getItemStyle(),ht=bt.getModel(["blur","itemStyle"]).getItemStyle(),ut=_t.get("focus"),ft=_t.get("blurScope"),gt=_t.get("disabled"),mt=getLabelStatesModels(bt),vt=_t.getShallow("scale"),yt=bt.getShallow("cursor")}var xt=et.getItemVisual(tt,"symbolRotate");ot.attr("rotation",(xt||0)*Math.PI/180||0);var St=normalizeSymbolOffset(et.getItemVisual(tt,"symbolOffset"),nt);St&&(ot.x=St[0],ot.y=St[1]),yt&&ot.attr("cursor",yt);var Tt=et.getItemVisual(tt,"style"),wt=Tt.fill;if(ot instanceof ZRImage){var Ct=ot.style;ot.useStyle(extend({image:Ct.image,x:Ct.x,y:Ct.y,width:Ct.width,height:Ct.height},Tt))}else ot.__isEmptyBrush?ot.useStyle(extend({},Tt)):ot.useStyle(Tt),ot.style.decal=null,ot.setColor(wt,at&&at.symbolInnerColor),ot.style.strokeNoScale=!0;var Et=et.getItemVisual(tt,"liftZ"),At=this._z2;Et!=null?At==null&&(this._z2=ot.z2,ot.z2+=Et):At!=null&&(ot.z2=At,this._z2=null);var Pt=at&&at.useNameLabel;setLabelStyle(ot,mt,{labelFetcher:st,labelDataIndex:tt,defaultText:Rt,inheritColor:wt,defaultOpacity:Tt.opacity});function Rt(Ot){return Pt?et.getName(Ot):getDefaultLabel(et,Ot)}this._sizeX=nt[0]/2,this._sizeY=nt[1]/2;var It=ot.ensureState("emphasis");It.style=dt,ot.ensureState("select").style=ct,ot.ensureState("blur").style=ht;var Mt=vt==null||vt===!0?Math.max(1.1,3/this._sizeY):isFinite(vt)&&vt>0?+vt:1;It.scaleX=this._sizeX*Mt,It.scaleY=this._sizeY*Mt,this.setSymbolScale(1),toggleHoverEmphasis(this,ut,ft,gt)},_.prototype.setSymbolScale=function(et){this.scaleX=this.scaleY=et},_.prototype.fadeOut=function(et,tt,nt){var it=this.childAt(0),at=getECData(this).dataIndex,ot=nt&&nt.animation;if(this.silent=it.silent=!0,nt&&nt.fadeLabel){var st=it.getTextContent();st&&removeElement(st,{style:{opacity:0}},tt,{dataIndex:at,removeOpt:ot,cb:function(){it.removeTextContent()}})}else it.removeTextContent();removeElement(it,{style:{opacity:0},scaleX:0,scaleY:0},tt,{dataIndex:at,cb:et,removeOpt:ot})},_.getSymbolSize=function(et,tt){return normalizeSymbolSize(et.getItemVisual(tt,"symbolSize"))},_}(Group$3);function driftSymbol(_e,_){this.parent.drift(_e,_)}function symbolNeedsDraw$1(_e,_,et,tt){return _&&!isNaN(_[0])&&!isNaN(_[1])&&!(tt.isIgnore&&tt.isIgnore(et))&&!(tt.clipShape&&!tt.clipShape.contain(_[0],_[1]))&&_e.getItemVisual(et,"symbol")!=="none"}function normalizeUpdateOpt(_e){return _e!=null&&!isObject$4(_e)&&(_e={isIgnore:_e}),_e||{}}function makeSeriesScope$2(_e){var _=_e.hostModel,et=_.getModel("emphasis");return{emphasisItemStyle:et.getModel("itemStyle").getItemStyle(),blurItemStyle:_.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:_.getModel(["select","itemStyle"]).getItemStyle(),focus:et.get("focus"),blurScope:et.get("blurScope"),emphasisDisabled:et.get("disabled"),hoverScale:et.get("scale"),labelStatesModels:getLabelStatesModels(_),cursorStyle:_.get("cursor")}}var SymbolDraw=function(){function _e(_){this.group=new Group$3,this._SymbolCtor=_||Symbol$1}return _e.prototype.updateData=function(_,et){this._progressiveEls=null,et=normalizeUpdateOpt(et);var tt=this.group,nt=_.hostModel,it=this._data,at=this._SymbolCtor,ot=et.disableAnimation,st=makeSeriesScope$2(_),dt={disableAnimation:ot},ht=et.getSymbolPoint||function(ct){return _.getItemLayout(ct)};it||tt.removeAll(),_.diff(it).add(function(ct){var ut=ht(ct);if(symbolNeedsDraw$1(_,ut,ct,et)){var ft=new at(_,ct,st,dt);ft.setPosition(ut),_.setItemGraphicEl(ct,ft),tt.add(ft)}}).update(function(ct,ut){var ft=it.getItemGraphicEl(ut),gt=ht(ct);if(!symbolNeedsDraw$1(_,gt,ct,et)){tt.remove(ft);return}var mt=_.getItemVisual(ct,"symbol")||"circle",vt=ft&&ft.getSymbolType&&ft.getSymbolType();if(!ft||vt&&vt!==mt)tt.remove(ft),ft=new at(_,ct,st,dt),ft.setPosition(gt);else{ft.updateData(_,ct,st,dt);var yt={x:gt[0],y:gt[1]};ot?ft.attr(yt):updateProps$1(ft,yt,nt)}tt.add(ft),_.setItemGraphicEl(ct,ft)}).remove(function(ct){var ut=it.getItemGraphicEl(ct);ut&&ut.fadeOut(function(){tt.remove(ut)},nt)}).execute(),this._getSymbolPoint=ht,this._data=_},_e.prototype.updateLayout=function(){var _=this,et=this._data;et&&et.eachItemGraphicEl(function(tt,nt){var it=_._getSymbolPoint(nt);tt.setPosition(it),tt.markRedraw()})},_e.prototype.incrementalPrepareUpdate=function(_){this._seriesScope=makeSeriesScope$2(_),this._data=null,this.group.removeAll()},_e.prototype.incrementalUpdate=function(_,et,tt){this._progressiveEls=[],tt=normalizeUpdateOpt(tt);function nt(st){st.isGroup||(st.incremental=!0,st.ensureState("emphasis").hoverLayer=!0)}for(var it=_.start;it<_.end;it++){var at=et.getItemLayout(it);if(symbolNeedsDraw$1(et,at,it,tt)){var ot=new this._SymbolCtor(et,it,this._seriesScope);ot.traverse(nt),ot.setPosition(at),this.group.add(ot),et.setItemGraphicEl(it,ot),this._progressiveEls.push(ot)}}},_e.prototype.eachRendered=function(_){traverseElements(this._progressiveEls||this.group,_)},_e.prototype.remove=function(_){var et=this.group,tt=this._data;tt&&_?tt.eachItemGraphicEl(function(nt){nt.fadeOut(function(){et.remove(nt)},tt.hostModel)}):et.removeAll()},_e}();function prepareDataCoordInfo(_e,_,et){var tt=_e.getBaseAxis(),nt=_e.getOtherAxis(tt),it=getValueStart(nt,et),at=tt.dim,ot=nt.dim,st=_.mapDimension(ot),dt=_.mapDimension(at),ht=ot==="x"||ot==="radius"?1:0,ct=map$1(_e.dimensions,function(gt){return _.mapDimension(gt)}),ut=!1,ft=_.getCalculationInfo("stackResultDimension");return isDimensionStacked(_,ct[0])&&(ut=!0,ct[0]=ft),isDimensionStacked(_,ct[1])&&(ut=!0,ct[1]=ft),{dataDimsForPoint:ct,valueStart:it,valueAxisDim:ot,baseAxisDim:at,stacked:!!ut,valueDim:st,baseDim:dt,baseDataOffset:ht,stackedOverDimension:_.getCalculationInfo("stackedOverDimension")}}function getValueStart(_e,_){var et=0,tt=_e.scale.getExtent();return _==="start"?et=tt[0]:_==="end"?et=tt[1]:isNumber(_)&&!isNaN(_)?et=_:tt[0]>0?et=tt[0]:tt[1]<0&&(et=tt[1]),et}function getStackedOnPoint(_e,_,et,tt){var nt=NaN;_e.stacked&&(nt=et.get(et.getCalculationInfo("stackedOverDimension"),tt)),isNaN(nt)&&(nt=_e.valueStart);var it=_e.baseDataOffset,at=[];return at[it]=et.get(_e.baseDim,tt),at[1-it]=nt,_.dataToPoint(at)}function diffData(_e,_){var et=[];return _.diff(_e).add(function(tt){et.push({cmd:"+",idx:tt})}).update(function(tt,nt){et.push({cmd:"=",idx:nt,idx1:tt})}).remove(function(tt){et.push({cmd:"-",idx:tt})}).execute(),et}function lineAnimationDiff(_e,_,et,tt,nt,it,at,ot){for(var st=diffData(_e,_),dt=[],ht=[],ct=[],ut=[],ft=[],gt=[],mt=[],vt=prepareDataCoordInfo(nt,_,at),yt=_e.getLayout("points")||[],bt=_.getLayout("points")||[],_t=0;_t<st.length;_t++){var xt=st[_t],St=!0,Tt=void 0,wt=void 0;switch(xt.cmd){case"=":Tt=xt.idx*2,wt=xt.idx1*2;var Ct=yt[Tt],Et=yt[Tt+1],At=bt[wt],Pt=bt[wt+1];(isNaN(Ct)||isNaN(Et))&&(Ct=At,Et=Pt),dt.push(Ct,Et),ht.push(At,Pt),ct.push(et[Tt],et[Tt+1]),ut.push(tt[wt],tt[wt+1]),mt.push(_.getRawIndex(xt.idx1));break;case"+":var Rt=xt.idx,It=vt.dataDimsForPoint,Mt=nt.dataToPoint([_.get(It[0],Rt),_.get(It[1],Rt)]);wt=Rt*2,dt.push(Mt[0],Mt[1]),ht.push(bt[wt],bt[wt+1]);var Ot=getStackedOnPoint(vt,nt,_,Rt);ct.push(Ot[0],Ot[1]),ut.push(tt[wt],tt[wt+1]),mt.push(_.getRawIndex(Rt));break;case"-":St=!1}St&&(ft.push(xt),gt.push(gt.length))}gt.sort(function(Jt,lr){return mt[Jt]-mt[lr]});for(var $t=dt.length,Lt=createFloat32Array($t),kt=createFloat32Array($t),Nt=createFloat32Array($t),Vt=createFloat32Array($t),zt=[],_t=0;_t<gt.length;_t++){var Xt=gt[_t],Wt=_t*2,nr=Xt*2;Lt[Wt]=dt[nr],Lt[Wt+1]=dt[nr+1],kt[Wt]=ht[nr],kt[Wt+1]=ht[nr+1],Nt[Wt]=ct[nr],Nt[Wt+1]=ct[nr+1],Vt[Wt]=ut[nr],Vt[Wt+1]=ut[nr+1],zt[_t]=ft[Xt]}return{current:Lt,next:kt,stackedOnCurrent:Nt,stackedOnNext:Vt,status:zt}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(_e,_){return isNaN(_e)||isNaN(_)}function drawSegment(_e,_,et,tt,nt,it,at,ot,st){for(var dt,ht,ct,ut,ft,gt,mt=et,vt=0;vt<tt;vt++){var yt=_[mt*2],bt=_[mt*2+1];if(mt>=nt||mt<0)break;if(isPointNull$1(yt,bt)){if(st){mt+=it;continue}break}if(mt===et)_e[it>0?"moveTo":"lineTo"](yt,bt),ct=yt,ut=bt;else{var _t=yt-dt,xt=bt-ht;if(_t*_t+xt*xt<.5){mt+=it;continue}if(at>0){for(var St=mt+it,Tt=_[St*2],wt=_[St*2+1];Tt===yt&&wt===bt&&vt<tt;)vt++,St+=it,mt+=it,Tt=_[St*2],wt=_[St*2+1],yt=_[mt*2],bt=_[mt*2+1],_t=yt-dt,xt=bt-ht;var Ct=vt+1;if(st)for(;isPointNull$1(Tt,wt)&&Ct<tt;)Ct++,St+=it,Tt=_[St*2],wt=_[St*2+1];var Et=.5,At=0,Pt=0,Rt=void 0,It=void 0;if(Ct>=tt||isPointNull$1(Tt,wt))ft=yt,gt=bt;else{At=Tt-dt,Pt=wt-ht;var Mt=yt-dt,Ot=Tt-yt,$t=bt-ht,Lt=wt-bt,kt=void 0,Nt=void 0;if(ot==="x"){kt=Math.abs(Mt),Nt=Math.abs(Ot);var Vt=At>0?1:-1;ft=yt-Vt*kt*at,gt=bt,Rt=yt+Vt*Nt*at,It=bt}else if(ot==="y"){kt=Math.abs($t),Nt=Math.abs(Lt);var zt=Pt>0?1:-1;ft=yt,gt=bt-zt*kt*at,Rt=yt,It=bt+zt*Nt*at}else kt=Math.sqrt(Mt*Mt+$t*$t),Nt=Math.sqrt(Ot*Ot+Lt*Lt),Et=Nt/(Nt+kt),ft=yt-At*at*(1-Et),gt=bt-Pt*at*(1-Et),Rt=yt+At*at*Et,It=bt+Pt*at*Et,Rt=mathMin$5(Rt,mathMax$5(Tt,yt)),It=mathMin$5(It,mathMax$5(wt,bt)),Rt=mathMax$5(Rt,mathMin$5(Tt,yt)),It=mathMax$5(It,mathMin$5(wt,bt)),At=Rt-yt,Pt=It-bt,ft=yt-At*kt/Nt,gt=bt-Pt*kt/Nt,ft=mathMin$5(ft,mathMax$5(dt,yt)),gt=mathMin$5(gt,mathMax$5(ht,bt)),ft=mathMax$5(ft,mathMin$5(dt,yt)),gt=mathMax$5(gt,mathMin$5(ht,bt)),At=yt-ft,Pt=bt-gt,Rt=yt+At*Nt/kt,It=bt+Pt*Nt/kt}_e.bezierCurveTo(ct,ut,ft,gt,yt,bt),ct=Rt,ut=It}else _e.lineTo(yt,bt)}dt=yt,ht=bt,mt+=it}return vt}var ECPolylineShape=function(){function _e(){this.smooth=0,this.smoothConstraint=!0}return _e}(),ECPolyline=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.type="ec-polyline",tt}return _.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},_.prototype.getDefaultShape=function(){return new ECPolylineShape},_.prototype.buildPath=function(et,tt){var nt=tt.points,it=0,at=nt.length/2;if(tt.connectNulls){for(;at>0&&isPointNull$1(nt[at*2-2],nt[at*2-1]);at--);for(;it<at&&isPointNull$1(nt[it*2],nt[it*2+1]);it++);}for(;it<at;)it+=drawSegment(et,nt,it,at,at,1,tt.smooth,tt.smoothMonotone,tt.connectNulls)+1},_.prototype.getPointOn=function(et,tt){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var nt=this.path,it=nt.data,at=PathProxy.CMD,ot,st,dt=tt==="x",ht=[],ct=0;ct<it.length;){var ut=it[ct++],ft=void 0,gt=void 0,mt=void 0,vt=void 0,yt=void 0,bt=void 0,_t=void 0;switch(ut){case at.M:ot=it[ct++],st=it[ct++];break;case at.L:if(ft=it[ct++],gt=it[ct++],_t=dt?(et-ot)/(ft-ot):(et-st)/(gt-st),_t<=1&&_t>=0){var xt=dt?(gt-st)*_t+st:(ft-ot)*_t+ot;return dt?[et,xt]:[xt,et]}ot=ft,st=gt;break;case at.C:ft=it[ct++],gt=it[ct++],mt=it[ct++],vt=it[ct++],yt=it[ct++],bt=it[ct++];var St=dt?cubicRootAt(ot,ft,mt,yt,et,ht):cubicRootAt(st,gt,vt,bt,et,ht);if(St>0)for(var Tt=0;Tt<St;Tt++){var wt=ht[Tt];if(wt<=1&&wt>=0){var xt=dt?cubicAt(st,gt,vt,bt,wt):cubicAt(ot,ft,mt,yt,wt);return dt?[et,xt]:[xt,et]}}ot=yt,st=bt;break}}},_}(Path),ECPolygonShape=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _}(ECPolylineShape),ECPolygon=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.type="ec-polygon",tt}return _.prototype.getDefaultShape=function(){return new ECPolygonShape},_.prototype.buildPath=function(et,tt){var nt=tt.points,it=tt.stackedOnPoints,at=0,ot=nt.length/2,st=tt.smoothMonotone;if(tt.connectNulls){for(;ot>0&&isPointNull$1(nt[ot*2-2],nt[ot*2-1]);ot--);for(;at<ot&&isPointNull$1(nt[at*2],nt[at*2+1]);at++);}for(;at<ot;){var dt=drawSegment(et,nt,at,ot,ot,1,tt.smooth,st,tt.connectNulls);drawSegment(et,it,at+dt-1,dt,ot,-1,tt.stackedOnSmooth,st,tt.connectNulls),at+=dt+1,et.closePath()}},_}(Path);function createGridClipPath(_e,_,et,tt,nt){var it=_e.getArea(),at=it.x,ot=it.y,st=it.width,dt=it.height,ht=et.get(["lineStyle","width"])||0;at-=ht/2,ot-=ht/2,st+=ht,dt+=ht,st=Math.ceil(st),at!==Math.floor(at)&&(at=Math.floor(at),st++);var ct=new Rect$2({shape:{x:at,y:ot,width:st,height:dt}});if(_){var ut=_e.getBaseAxis(),ft=ut.isHorizontal(),gt=ut.inverse;ft?(gt&&(ct.shape.x+=st),ct.shape.width=0):(gt||(ct.shape.y+=dt),ct.shape.height=0);var mt=isFunction$3(nt)?function(vt){nt(vt,ct)}:null;initProps(ct,{shape:{width:st,height:dt,x:at,y:ot}},et,null,tt,mt)}return ct}function createPolarClipPath(_e,_,et){var tt=_e.getArea(),nt=round$3(tt.r0,1),it=round$3(tt.r,1),at=new Sector({shape:{cx:round$3(_e.cx,1),cy:round$3(_e.cy,1),r0:nt,r:it,startAngle:tt.startAngle,endAngle:tt.endAngle,clockwise:tt.clockwise}});if(_){var ot=_e.getBaseAxis().dim==="angle";ot?at.shape.endAngle=tt.startAngle:at.shape.r=nt,initProps(at,{shape:{endAngle:tt.endAngle,r:it}},et)}return at}function createClipPath(_e,_,et,tt,nt){if(_e){if(_e.type==="polar")return createPolarClipPath(_e,_,et);if(_e.type==="cartesian2d")return createGridClipPath(_e,_,et,tt,nt)}else return null;return null}function isCoordinateSystemType(_e,_){return _e.type===_}function isPointsSame(_e,_){if(_e.length===_.length){for(var et=0;et<_e.length;et++)if(_e[et]!==_[et])return;return!0}}function bboxFromPoints(_e){for(var _=1/0,et=1/0,tt=-1/0,nt=-1/0,it=0;it<_e.length;){var at=_e[it++],ot=_e[it++];isNaN(at)||(_=Math.min(at,_),tt=Math.max(at,tt)),isNaN(ot)||(et=Math.min(ot,et),nt=Math.max(ot,nt))}return[[_,et],[tt,nt]]}function getBoundingDiff(_e,_){var et=bboxFromPoints(_e),tt=et[0],nt=et[1],it=bboxFromPoints(_),at=it[0],ot=it[1];return Math.max(Math.abs(tt[0]-at[0]),Math.abs(tt[1]-at[1]),Math.abs(nt[0]-ot[0]),Math.abs(nt[1]-ot[1]))}function getSmooth(_e){return isNumber(_e)?_e:_e?.5:0}function getStackedOnPoints(_e,_,et){if(!et.valueDim)return[];for(var tt=_.count(),nt=createFloat32Array(tt*2),it=0;it<tt;it++){var at=getStackedOnPoint(et,_e,_,it);nt[it*2]=at[0],nt[it*2+1]=at[1]}return nt}function turnPointsIntoStep(_e,_,et,tt,nt){var it=et.getBaseAxis(),at=it.dim==="x"||it.dim==="radius"?0:1,ot=[],st=0,dt=[],ht=[],ct=[],ut=[];if(nt){for(st=0;st<_e.length;st+=2){var ft=_||_e;!isNaN(ft[st])&&!isNaN(ft[st+1])&&ut.push(_e[st],_e[st+1])}_e=ut}for(st=0;st<_e.length-2;st+=2)switch(ct[0]=_e[st+2],ct[1]=_e[st+3],ht[0]=_e[st],ht[1]=_e[st+1],ot.push(ht[0],ht[1]),tt){case"end":dt[at]=ct[at],dt[1-at]=ht[1-at],ot.push(dt[0],dt[1]);break;case"middle":var gt=(ht[at]+ct[at])/2,mt=[];dt[at]=mt[at]=gt,dt[1-at]=ht[1-at],mt[1-at]=ct[1-at],ot.push(dt[0],dt[1]),ot.push(mt[0],mt[1]);break;default:dt[at]=ht[at],dt[1-at]=ct[1-at],ot.push(dt[0],dt[1])}return ot.push(_e[st++],_e[st++]),ot}function clipColorStops(_e,_){var et=[],tt=_e.length,nt,it;function at(ht,ct,ut){var ft=ht.coord,gt=(ut-ft)/(ct.coord-ft),mt=lerp(gt,[ht.color,ct.color]);return{coord:ut,color:mt}}for(var ot=0;ot<tt;ot++){var st=_e[ot],dt=st.coord;if(dt<0)nt=st;else if(dt>_){it?et.push(at(it,st,_)):nt&&et.push(at(nt,st,0),at(nt,st,_));break}else nt&&(et.push(at(nt,st,0)),nt=null),et.push(st),it=st}return et}function getVisualGradient(_e,_,et){var tt=_e.getVisual("visualMeta");if(!(!tt||!tt.length||!_e.count())&&_.type==="cartesian2d"){for(var nt,it,at=tt.length-1;at>=0;at--){var ot=_e.getDimensionInfo(tt[at].dimension);if(nt=ot&&ot.coordDim,nt==="x"||nt==="y"){it=tt[at];break}}if(it){var st=_.getAxis(nt),dt=map$1(it.stops,function(_t){return{coord:st.toGlobalCoord(st.dataToCoord(_t.value)),color:_t.color}}),ht=dt.length,ct=it.outerColors.slice();ht&&dt[0].coord>dt[ht-1].coord&&(dt.reverse(),ct.reverse());var ut=clipColorStops(dt,nt==="x"?et.getWidth():et.getHeight()),ft=ut.length;if(!ft&&ht)return dt[0].coord<0?ct[1]?ct[1]:dt[ht-1].color:ct[0]?ct[0]:dt[0].color;var gt=10,mt=ut[0].coord-gt,vt=ut[ft-1].coord+gt,yt=vt-mt;if(yt<.001)return"transparent";each$f(ut,function(_t){_t.offset=(_t.coord-mt)/yt}),ut.push({offset:ft?ut[ft-1].offset:.5,color:ct[1]||"transparent"}),ut.unshift({offset:ft?ut[0].offset:.5,color:ct[0]||"transparent"});var bt=new LinearGradient(0,0,0,0,ut,!0);return bt[nt]=mt,bt[nt+"2"]=vt,bt}}}function getIsIgnoreFunc(_e,_,et){var tt=_e.get("showAllSymbol"),nt=tt==="auto";if(!(tt&&!nt)){var it=et.getAxesByScale("ordinal")[0];if(it&&!(nt&&canShowAllSymbolForCategory(it,_))){var at=_.mapDimension(it.dim),ot={};return each$f(it.getViewLabels(),function(st){var dt=it.scale.getRawOrdinalNumber(st.tickValue);ot[dt]=1}),function(st){return!ot.hasOwnProperty(_.get(at,st))}}}}function canShowAllSymbolForCategory(_e,_){var et=_e.getExtent(),tt=Math.abs(et[1]-et[0])/_e.scale.count();isNaN(tt)&&(tt=0);for(var nt=_.count(),it=Math.max(1,Math.round(nt/5)),at=0;at<nt;at+=it)if(Symbol$1.getSymbolSize(_,at)[_e.isHorizontal()?1:0]*1.5>tt)return!1;return!0}function isPointNull(_e,_){return isNaN(_e)||isNaN(_)}function getLastIndexNotNull(_e){for(var _=_e.length/2;_>0&&isPointNull(_e[_*2-2],_e[_*2-1]);_--);return _-1}function getPointAtIndex(_e,_){return[_e[_*2],_e[_*2+1]]}function getIndexRange(_e,_,et){for(var tt=_e.length/2,nt=et==="x"?0:1,it,at,ot=0,st=-1,dt=0;dt<tt;dt++)if(at=_e[dt*2+nt],!(isNaN(at)||isNaN(_e[dt*2+1-nt]))){if(dt===0){it=at;continue}if(it<=_&&at>=_||it>=_&&at<=_){st=dt;break}ot=dt,it=at}return{range:[ot,st],t:(_-it)/(at-it)}}function anyStateShowEndLabel(_e){if(_e.get(["endLabel","show"]))return!0;for(var _=0;_<SPECIAL_STATES.length;_++)if(_e.get([SPECIAL_STATES[_],"endLabel","show"]))return!0;return!1}function createLineClipPath(_e,_,et,tt){if(isCoordinateSystemType(_,"cartesian2d")){var nt=tt.getModel("endLabel"),it=nt.get("valueAnimation"),at=tt.getData(),ot={lastFrameIndex:0},st=anyStateShowEndLabel(tt)?function(ft,gt){_e._endLabelOnDuring(ft,gt,at,ot,it,nt,_)}:null,dt=_.getBaseAxis().isHorizontal(),ht=createGridClipPath(_,et,tt,function(){var ft=_e._endLabel;ft&&et&&ot.originalX!=null&&ft.attr({x:ot.originalX,y:ot.originalY})},st);if(!tt.get("clip",!0)){var ct=ht.shape,ut=Math.max(ct.width,ct.height);dt?(ct.y-=ut,ct.height+=ut*2):(ct.x-=ut,ct.width+=ut*2)}return st&&st(1,ht),ht}else return createPolarClipPath(_,et,tt)}function getEndLabelStateSpecified(_e,_){var et=_.getBaseAxis(),tt=et.isHorizontal(),nt=et.inverse,it=tt?nt?"right":"left":"center",at=tt?"middle":nt?"top":"bottom";return{normal:{align:_e.get("align")||it,verticalAlign:_e.get("verticalAlign")||at}}}var LineView=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.init=function(){var et=new Group$3,tt=new SymbolDraw;this.group.add(tt.group),this._symbolDraw=tt,this._lineGroup=et,this._changePolyState=bind$2(this._changePolyState,this)},_.prototype.render=function(et,tt,nt){var it=et.coordinateSystem,at=this.group,ot=et.getData(),st=et.getModel("lineStyle"),dt=et.getModel("areaStyle"),ht=ot.getLayout("points")||[],ct=it.type==="polar",ut=this._coordSys,ft=this._symbolDraw,gt=this._polyline,mt=this._polygon,vt=this._lineGroup,yt=!tt.ssr&&et.get("animation"),bt=!dt.isEmpty(),_t=dt.get("origin"),xt=prepareDataCoordInfo(it,ot,_t),St=bt&&getStackedOnPoints(it,ot,xt),Tt=et.get("showSymbol"),wt=et.get("connectNulls"),Ct=Tt&&!ct&&getIsIgnoreFunc(et,ot,it),Et=this._data;Et&&Et.eachItemGraphicEl(function(Jt,lr){Jt.__temp&&(at.remove(Jt),Et.setItemGraphicEl(lr,null))}),Tt||ft.remove(),at.add(vt);var At=ct?!1:et.get("step"),Pt;it&&it.getArea&&et.get("clip",!0)&&(Pt=it.getArea(),Pt.width!=null?(Pt.x-=.1,Pt.y-=.1,Pt.width+=.2,Pt.height+=.2):Pt.r0&&(Pt.r0-=.5,Pt.r+=.5)),this._clipShapeForSymbol=Pt;var Rt=getVisualGradient(ot,it,nt)||ot.getVisual("style")[ot.getVisual("drawType")];if(!(gt&&ut.type===it.type&&At===this._step))Tt&&ft.updateData(ot,{isIgnore:Ct,clipShape:Pt,disableAnimation:!0,getSymbolPoint:function(Jt){return[ht[Jt*2],ht[Jt*2+1]]}}),yt&&this._initSymbolLabelAnimation(ot,it,Pt),At&&(St&&(St=turnPointsIntoStep(St,ht,it,At,wt)),ht=turnPointsIntoStep(ht,null,it,At,wt)),gt=this._newPolyline(ht),bt?mt=this._newPolygon(ht,St):mt&&(vt.remove(mt),mt=this._polygon=null),ct||this._initOrUpdateEndLabel(et,it,convertToColorString(Rt)),vt.setClipPath(createLineClipPath(this,it,!0,et));else{bt&&!mt?mt=this._newPolygon(ht,St):mt&&!bt&&(vt.remove(mt),mt=this._polygon=null),ct||this._initOrUpdateEndLabel(et,it,convertToColorString(Rt));var It=vt.getClipPath();if(It){var Mt=createLineClipPath(this,it,!1,et);initProps(It,{shape:Mt.shape},et)}else vt.setClipPath(createLineClipPath(this,it,!0,et));Tt&&ft.updateData(ot,{isIgnore:Ct,clipShape:Pt,disableAnimation:!0,getSymbolPoint:function(Jt){return[ht[Jt*2],ht[Jt*2+1]]}}),(!isPointsSame(this._stackedOnPoints,St)||!isPointsSame(this._points,ht))&&(yt?this._doUpdateAnimation(ot,St,it,nt,At,_t,wt):(At&&(St&&(St=turnPointsIntoStep(St,ht,it,At,wt)),ht=turnPointsIntoStep(ht,null,it,At,wt)),gt.setShape({points:ht}),mt&&mt.setShape({points:ht,stackedOnPoints:St})))}var Ot=et.getModel("emphasis"),$t=Ot.get("focus"),Lt=Ot.get("blurScope"),kt=Ot.get("disabled");if(gt.useStyle(defaults(st.getLineStyle(),{fill:"none",stroke:Rt,lineJoin:"bevel"})),setStatesStylesFromModel(gt,et,"lineStyle"),gt.style.lineWidth>0&&et.get(["emphasis","lineStyle","width"])==="bolder"){var Nt=gt.getState("emphasis").style;Nt.lineWidth=+gt.style.lineWidth+1}getECData(gt).seriesIndex=et.seriesIndex,toggleHoverEmphasis(gt,$t,Lt,kt);var Vt=getSmooth(et.get("smooth")),zt=et.get("smoothMonotone");if(gt.setShape({smooth:Vt,smoothMonotone:zt,connectNulls:wt}),mt){var Xt=ot.getCalculationInfo("stackedOnSeries"),Wt=0;mt.useStyle(defaults(dt.getAreaStyle(),{fill:Rt,opacity:.7,lineJoin:"bevel",decal:ot.getVisual("style").decal})),Xt&&(Wt=getSmooth(Xt.get("smooth"))),mt.setShape({smooth:Vt,stackedOnSmooth:Wt,smoothMonotone:zt,connectNulls:wt}),setStatesStylesFromModel(mt,et,"areaStyle"),getECData(mt).seriesIndex=et.seriesIndex,toggleHoverEmphasis(mt,$t,Lt,kt)}var nr=this._changePolyState;ot.eachItemGraphicEl(function(Jt){Jt&&(Jt.onHoverStateChange=nr)}),this._polyline.onHoverStateChange=nr,this._data=ot,this._coordSys=it,this._stackedOnPoints=St,this._points=ht,this._step=At,this._valueOrigin=_t,et.get("triggerLineEvent")&&(this.packEventData(et,gt),mt&&this.packEventData(et,mt))},_.prototype.packEventData=function(et,tt){getECData(tt).eventData={componentType:"series",componentSubType:"line",componentIndex:et.componentIndex,seriesIndex:et.seriesIndex,seriesName:et.name,seriesType:"line"}},_.prototype.highlight=function(et,tt,nt,it){var at=et.getData(),ot=queryDataIndex(at,it);if(this._changePolyState("emphasis"),!(ot instanceof Array)&&ot!=null&&ot>=0){var st=at.getLayout("points"),dt=at.getItemGraphicEl(ot);if(!dt){var ht=st[ot*2],ct=st[ot*2+1];if(isNaN(ht)||isNaN(ct)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(ht,ct))return;var ut=et.get("zlevel")||0,ft=et.get("z")||0;dt=new Symbol$1(at,ot),dt.x=ht,dt.y=ct,dt.setZ(ut,ft);var gt=dt.getSymbolPath().getTextContent();gt&&(gt.zlevel=ut,gt.z=ft,gt.z2=this._polyline.z2+1),dt.__temp=!0,at.setItemGraphicEl(ot,dt),dt.stopSymbolAnimation(!0),this.group.add(dt)}dt.highlight()}else ChartView.prototype.highlight.call(this,et,tt,nt,it)},_.prototype.downplay=function(et,tt,nt,it){var at=et.getData(),ot=queryDataIndex(at,it);if(this._changePolyState("normal"),ot!=null&&ot>=0){var st=at.getItemGraphicEl(ot);st&&(st.__temp?(at.setItemGraphicEl(ot,null),this.group.remove(st)):st.downplay())}else ChartView.prototype.downplay.call(this,et,tt,nt,it)},_.prototype._changePolyState=function(et){var tt=this._polygon;setStatesFlag(this._polyline,et),tt&&setStatesFlag(tt,et)},_.prototype._newPolyline=function(et){var tt=this._polyline;return tt&&this._lineGroup.remove(tt),tt=new ECPolyline({shape:{points:et},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(tt),this._polyline=tt,tt},_.prototype._newPolygon=function(et,tt){var nt=this._polygon;return nt&&this._lineGroup.remove(nt),nt=new ECPolygon({shape:{points:et,stackedOnPoints:tt},segmentIgnoreThreshold:2}),this._lineGroup.add(nt),this._polygon=nt,nt},_.prototype._initSymbolLabelAnimation=function(et,tt,nt){var it,at,ot=tt.getBaseAxis(),st=ot.inverse;tt.type==="cartesian2d"?(it=ot.isHorizontal(),at=!1):tt.type==="polar"&&(it=ot.dim==="angle",at=!0);var dt=et.hostModel,ht=dt.get("animationDuration");isFunction$3(ht)&&(ht=ht(null));var ct=dt.get("animationDelay")||0,ut=isFunction$3(ct)?ct(null):ct;et.eachItemGraphicEl(function(ft,gt){var mt=ft;if(mt){var vt=[ft.x,ft.y],yt=void 0,bt=void 0,_t=void 0;if(nt)if(at){var xt=nt,St=tt.pointToCoord(vt);it?(yt=xt.startAngle,bt=xt.endAngle,_t=-St[1]/180*Math.PI):(yt=xt.r0,bt=xt.r,_t=St[0])}else{var Tt=nt;it?(yt=Tt.x,bt=Tt.x+Tt.width,_t=ft.x):(yt=Tt.y+Tt.height,bt=Tt.y,_t=ft.y)}var wt=bt===yt?0:(_t-yt)/(bt-yt);st&&(wt=1-wt);var Ct=isFunction$3(ct)?ct(gt):ht*wt+ut,Et=mt.getSymbolPath(),At=Et.getTextContent();mt.attr({scaleX:0,scaleY:0}),mt.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:Ct}),At&&At.animateFrom({style:{opacity:0}},{duration:300,delay:Ct}),Et.disableLabelAnimation=!0}})},_.prototype._initOrUpdateEndLabel=function(et,tt,nt){var it=et.getModel("endLabel");if(anyStateShowEndLabel(et)){var at=et.getData(),ot=this._polyline,st=at.getLayout("points");if(!st){ot.removeTextContent(),this._endLabel=null;return}var dt=this._endLabel;dt||(dt=this._endLabel=new ZRText({z2:200}),dt.ignoreClip=!0,ot.setTextContent(this._endLabel),ot.disableLabelAnimation=!0);var ht=getLastIndexNotNull(st);ht>=0&&(setLabelStyle(ot,getLabelStatesModels(et,"endLabel"),{inheritColor:nt,labelFetcher:et,labelDataIndex:ht,defaultText:function(ct,ut,ft){return ft!=null?getDefaultInterpolatedLabel(at,ft):getDefaultLabel(at,ct)},enableTextSetter:!0},getEndLabelStateSpecified(it,tt)),ot.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},_.prototype._endLabelOnDuring=function(et,tt,nt,it,at,ot,st){var dt=this._endLabel,ht=this._polyline;if(dt){et<1&&it.originalX==null&&(it.originalX=dt.x,it.originalY=dt.y);var ct=nt.getLayout("points"),ut=nt.hostModel,ft=ut.get("connectNulls"),gt=ot.get("precision"),mt=ot.get("distance")||0,vt=st.getBaseAxis(),yt=vt.isHorizontal(),bt=vt.inverse,_t=tt.shape,xt=bt?yt?_t.x:_t.y+_t.height:yt?_t.x+_t.width:_t.y,St=(yt?mt:0)*(bt?-1:1),Tt=(yt?0:-mt)*(bt?-1:1),wt=yt?"x":"y",Ct=getIndexRange(ct,xt,wt),Et=Ct.range,At=Et[1]-Et[0],Pt=void 0;if(At>=1){if(At>1&&!ft){var Rt=getPointAtIndex(ct,Et[0]);dt.attr({x:Rt[0]+St,y:Rt[1]+Tt}),at&&(Pt=ut.getRawValue(Et[0]))}else{var Rt=ht.getPointOn(xt,wt);Rt&&dt.attr({x:Rt[0]+St,y:Rt[1]+Tt});var It=ut.getRawValue(Et[0]),Mt=ut.getRawValue(Et[1]);at&&(Pt=interpolateRawValues(nt,gt,It,Mt,Ct.t))}it.lastFrameIndex=Et[0]}else{var Ot=et===1||it.lastFrameIndex>0?Et[0]:0,Rt=getPointAtIndex(ct,Ot);at&&(Pt=ut.getRawValue(Ot)),dt.attr({x:Rt[0]+St,y:Rt[1]+Tt})}if(at){var $t=labelInner(dt);typeof $t.setLabelText=="function"&&$t.setLabelText(Pt)}}},_.prototype._doUpdateAnimation=function(et,tt,nt,it,at,ot,st){var dt=this._polyline,ht=this._polygon,ct=et.hostModel,ut=lineAnimationDiff(this._data,et,this._stackedOnPoints,tt,this._coordSys,nt,this._valueOrigin),ft=ut.current,gt=ut.stackedOnCurrent,mt=ut.next,vt=ut.stackedOnNext;if(at&&(gt=turnPointsIntoStep(ut.stackedOnCurrent,ut.current,nt,at,st),ft=turnPointsIntoStep(ut.current,null,nt,at,st),vt=turnPointsIntoStep(ut.stackedOnNext,ut.next,nt,at,st),mt=turnPointsIntoStep(ut.next,null,nt,at,st)),getBoundingDiff(ft,mt)>3e3||ht&&getBoundingDiff(gt,vt)>3e3){dt.stopAnimation(),dt.setShape({points:mt}),ht&&(ht.stopAnimation(),ht.setShape({points:mt,stackedOnPoints:vt}));return}dt.shape.__points=ut.current,dt.shape.points=ft;var yt={shape:{points:mt}};ut.current!==ft&&(yt.shape.__points=ut.next),dt.stopAnimation(),updateProps$1(dt,yt,ct),ht&&(ht.setShape({points:ft,stackedOnPoints:gt}),ht.stopAnimation(),updateProps$1(ht,{shape:{stackedOnPoints:vt}},ct),dt.shape.points!==ht.shape.points&&(ht.shape.points=dt.shape.points));for(var bt=[],_t=ut.status,xt=0;xt<_t.length;xt++){var St=_t[xt].cmd;if(St==="="){var Tt=et.getItemGraphicEl(_t[xt].idx1);Tt&&bt.push({el:Tt,ptIdx:xt})}}dt.animators&&dt.animators.length&&dt.animators[0].during(function(){ht&&ht.dirtyShape();for(var wt=dt.shape.__points,Ct=0;Ct<bt.length;Ct++){var Et=bt[Ct].el,At=bt[Ct].ptIdx*2;Et.x=wt[At],Et.y=wt[At+1],Et.markRedraw()}})},_.prototype.remove=function(et){var tt=this.group,nt=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),nt&&nt.eachItemGraphicEl(function(it,at){it.__temp&&(tt.remove(it),nt.setItemGraphicEl(at,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},_.type="line",_}(ChartView);function pointsLayout(_e,_){return{seriesType:_e,plan:createRenderPlanner(),reset:function(et){var tt=et.getData(),nt=et.coordinateSystem,it=et.pipelineContext,at=_||it.large;if(nt){var ot=map$1(nt.dimensions,function(ft){return tt.mapDimension(ft)}).slice(0,2),st=ot.length,dt=tt.getCalculationInfo("stackResultDimension");isDimensionStacked(tt,ot[0])&&(ot[0]=dt),isDimensionStacked(tt,ot[1])&&(ot[1]=dt);var ht=tt.getStore(),ct=tt.getDimensionIndex(ot[0]),ut=tt.getDimensionIndex(ot[1]);return st&&{progress:function(ft,gt){for(var mt=ft.end-ft.start,vt=at&&createFloat32Array(mt*st),yt=[],bt=[],_t=ft.start,xt=0;_t<ft.end;_t++){var St=void 0;if(st===1){var Tt=ht.get(ct,_t);St=nt.dataToPoint(Tt,null,bt)}else yt[0]=ht.get(ct,_t),yt[1]=ht.get(ut,_t),St=nt.dataToPoint(yt,null,bt);at?(vt[xt++]=St[0],vt[xt++]=St[1]):gt.setItemLayout(_t,St.slice())}at&&gt.setLayout("points",vt)}}}}}}var samplers={average:function(_e){for(var _=0,et=0,tt=0;tt<_e.length;tt++)isNaN(_e[tt])||(_+=_e[tt],et++);return et===0?NaN:_/et},sum:function(_e){for(var _=0,et=0;et<_e.length;et++)_+=_e[et]||0;return _},max:function(_e){for(var _=-1/0,et=0;et<_e.length;et++)_e[et]>_&&(_=_e[et]);return isFinite(_)?_:NaN},min:function(_e){for(var _=1/0,et=0;et<_e.length;et++)_e[et]<_&&(_=_e[et]);return isFinite(_)?_:NaN},nearest:function(_e){return _e[0]}},indexSampler=function(_e){return Math.round(_e.length/2)};function dataSample(_e){return{seriesType:_e,reset:function(_,et,tt){var nt=_.getData(),it=_.get("sampling"),at=_.coordinateSystem,ot=nt.count();if(ot>10&&at.type==="cartesian2d"&&it){var st=at.getBaseAxis(),dt=at.getOtherAxis(st),ht=st.getExtent(),ct=tt.getDevicePixelRatio(),ut=Math.abs(ht[1]-ht[0])*(ct||1),ft=Math.round(ot/ut);if(isFinite(ft)&&ft>1){it==="lttb"?_.setData(nt.lttbDownSample(nt.mapDimension(dt.dim),1/ft)):it==="minmax"&&_.setData(nt.minmaxDownSample(nt.mapDimension(dt.dim),1/ft));var gt=void 0;isString$1(it)?gt=samplers[it]:isFunction$3(it)&&(gt=it),gt&&_.setData(nt.downSample(nt.mapDimension(dt.dim),1/ft,gt,indexSampler))}}}}}function install$Q(_e){_e.registerChartView(LineView),_e.registerSeriesModel(LineSeriesModel),_e.registerLayout(pointsLayout("line",!0)),_e.registerVisual({seriesType:"line",reset:function(_){var et=_.getData(),tt=_.getModel("lineStyle").getLineStyle();tt&&!tt.stroke&&(tt.stroke=et.getVisual("style").fill),et.setVisual("legendLineStyle",tt)}}),_e.registerProcessor(_e.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.getInitialData=function(et,tt){return createSeriesData(null,this,{useEncodeDefaulter:!0})},_.prototype.getMarkerPosition=function(et,tt,nt){var it=this.coordinateSystem;if(it&&it.clampData){var at=it.clampData(et),ot=it.dataToPoint(at);if(nt)each$f(it.getAxes(),function(ut,ft){if(ut.type==="category"&&tt!=null){var gt=ut.getTicksCoords(),mt=ut.getTickModel().get("alignWithLabel"),vt=at[ft],yt=tt[ft]==="x1"||tt[ft]==="y1";if(yt&&!mt&&(vt+=1),gt.length<2)return;if(gt.length===2){ot[ft]=ut.toGlobalCoord(ut.getExtent()[yt?1:0]);return}for(var bt=void 0,_t=void 0,xt=1,St=0;St<gt.length;St++){var Tt=gt[St].coord,wt=St===gt.length-1?gt[St-1].tickValue+xt:gt[St].tickValue;if(wt===vt){_t=Tt;break}else if(wt<vt)bt=Tt;else if(bt!=null&&wt>vt){_t=(Tt+bt)/2;break}St===1&&(xt=wt-gt[0].tickValue)}_t==null&&(bt?bt&&(_t=gt[gt.length-1].coord):_t=gt[0].coord),ot[ft]=ut.toGlobalCoord(_t)}});else{var st=this.getData(),dt=st.getLayout("offset"),ht=st.getLayout("size"),ct=it.getBaseAxis().isHorizontal()?0:1;ot[ct]+=dt+ht/2}return ot}return[NaN,NaN]},_.type="series.__base_bar__",_.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},_}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},_.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},_.prototype.getProgressiveThreshold=function(){var et=this.get("progressiveThreshold"),tt=this.get("largeThreshold");return tt>et&&(et=tt),et},_.prototype.brushSelector=function(et,tt,nt){return nt.rect(tt.getItemLayout(et))},_.type="series.bar",_.dependencies=["grid","polar"],_.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),_}(BaseBarSeriesModel),SausageShape=function(){function _e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return _e}(),SausagePath=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.type="sausage",tt}return _.prototype.getDefaultShape=function(){return new SausageShape},_.prototype.buildPath=function(et,tt){var nt=tt.cx,it=tt.cy,at=Math.max(tt.r0||0,0),ot=Math.max(tt.r,0),st=(ot-at)*.5,dt=at+st,ht=tt.startAngle,ct=tt.endAngle,ut=tt.clockwise,ft=Math.PI*2,gt=ut?ct-ht<ft:ht-ct<ft;gt||(ht=ct-(ut?ft:-ft));var mt=Math.cos(ht),vt=Math.sin(ht),yt=Math.cos(ct),bt=Math.sin(ct);gt?(et.moveTo(mt*at+nt,vt*at+it),et.arc(mt*dt+nt,vt*dt+it,st,-Math.PI+ht,ht,!ut)):et.moveTo(mt*ot+nt,vt*ot+it),et.arc(nt,it,ot,ht,ct,!ut),et.arc(yt*dt+nt,bt*dt+it,st,ct-Math.PI*2,ct-Math.PI,!ut),at!==0&&et.arc(nt,it,at,ct,ht,ut)},_}(Path);function createSectorCalculateTextPosition(_e,_){_=_||{};var et=_.isRoundCap;return function(tt,nt,it){var at=nt.position;if(!at||at instanceof Array)return calculateTextPosition(tt,nt,it);var ot=_e(at),st=nt.distance!=null?nt.distance:5,dt=this.shape,ht=dt.cx,ct=dt.cy,ut=dt.r,ft=dt.r0,gt=(ut+ft)/2,mt=dt.startAngle,vt=dt.endAngle,yt=(mt+vt)/2,bt=et?Math.abs(ut-ft)/2:0,_t=Math.cos,xt=Math.sin,St=ht+ut*_t(mt),Tt=ct+ut*xt(mt),wt="left",Ct="top";switch(ot){case"startArc":St=ht+(ft-st)*_t(yt),Tt=ct+(ft-st)*xt(yt),wt="center",Ct="top";break;case"insideStartArc":St=ht+(ft+st)*_t(yt),Tt=ct+(ft+st)*xt(yt),wt="center",Ct="bottom";break;case"startAngle":St=ht+gt*_t(mt)+adjustAngleDistanceX(mt,st+bt,!1),Tt=ct+gt*xt(mt)+adjustAngleDistanceY(mt,st+bt,!1),wt="right",Ct="middle";break;case"insideStartAngle":St=ht+gt*_t(mt)+adjustAngleDistanceX(mt,-st+bt,!1),Tt=ct+gt*xt(mt)+adjustAngleDistanceY(mt,-st+bt,!1),wt="left",Ct="middle";break;case"middle":St=ht+gt*_t(yt),Tt=ct+gt*xt(yt),wt="center",Ct="middle";break;case"endArc":St=ht+(ut+st)*_t(yt),Tt=ct+(ut+st)*xt(yt),wt="center",Ct="bottom";break;case"insideEndArc":St=ht+(ut-st)*_t(yt),Tt=ct+(ut-st)*xt(yt),wt="center",Ct="top";break;case"endAngle":St=ht+gt*_t(vt)+adjustAngleDistanceX(vt,st+bt,!0),Tt=ct+gt*xt(vt)+adjustAngleDistanceY(vt,st+bt,!0),wt="left",Ct="middle";break;case"insideEndAngle":St=ht+gt*_t(vt)+adjustAngleDistanceX(vt,-st+bt,!0),Tt=ct+gt*xt(vt)+adjustAngleDistanceY(vt,-st+bt,!0),wt="right",Ct="middle";break;default:return calculateTextPosition(tt,nt,it)}return tt=tt||{},tt.x=St,tt.y=Tt,tt.align=wt,tt.verticalAlign=Ct,tt}}function setSectorTextRotation(_e,_,et,tt){if(isNumber(tt)){_e.setTextConfig({rotation:tt});return}else if(isArray$1(_)){_e.setTextConfig({rotation:0});return}var nt=_e.shape,it=nt.clockwise?nt.startAngle:nt.endAngle,at=nt.clockwise?nt.endAngle:nt.startAngle,ot=(it+at)/2,st,dt=et(_);switch(dt){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":st=ot;break;case"startAngle":case"insideStartAngle":st=it;break;case"endAngle":case"insideEndAngle":st=at;break;default:_e.setTextConfig({rotation:0});return}var ht=Math.PI*1.5-st;dt==="middle"&&ht>Math.PI/2&&ht<Math.PI*1.5&&(ht-=Math.PI),_e.setTextConfig({rotation:ht})}function adjustAngleDistanceX(_e,_,et){return _*Math.sin(_e)*(et?-1:1)}function adjustAngleDistanceY(_e,_,et){return _*Math.cos(_e)*(et?1:-1)}function getSectorCornerRadius(_e,_,et){var tt=_e.get("borderRadius");if(tt==null)return et?{cornerRadius:0}:null;isArray$1(tt)||(tt=[tt,tt,tt,tt]);var nt=Math.abs(_.r||0-_.r0||0);return{cornerRadius:map$1(tt,function(it){return parsePercent$1(it,nt)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(_e,_){var et=_e.getArea&&_e.getArea();if(isCoordinateSystemType(_e,"cartesian2d")){var tt=_e.getBaseAxis();if(tt.type!=="category"||!tt.onBand){var nt=_.getLayout("bandWidth");tt.isHorizontal()?(et.x-=nt,et.width+=nt*2):(et.y-=nt,et.height+=nt*2)}}return et}var BarView=function(_e){__extends$1(_,_e);function _(){var et=_e.call(this)||this;return et.type=_.type,et._isFirstFrame=!0,et}return _.prototype.render=function(et,tt,nt,it){this._model=et,this._removeOnRenderedListener(nt),this._updateDrawMode(et);var at=et.get("coordinateSystem");(at==="cartesian2d"||at==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(et,tt,nt):this._renderNormal(et,tt,nt,it))},_.prototype.incrementalPrepareRender=function(et){this._clear(),this._updateDrawMode(et),this._updateLargeClip(et)},_.prototype.incrementalRender=function(et,tt){this._progressiveEls=[],this._incrementalRenderLarge(et,tt)},_.prototype.eachRendered=function(et){traverseElements(this._progressiveEls||this.group,et)},_.prototype._updateDrawMode=function(et){var tt=et.pipelineContext.large;(this._isLargeDraw==null||tt!==this._isLargeDraw)&&(this._isLargeDraw=tt,this._clear())},_.prototype._renderNormal=function(et,tt,nt,it){var at=this.group,ot=et.getData(),st=this._data,dt=et.coordinateSystem,ht=dt.getBaseAxis(),ct;dt.type==="cartesian2d"?ct=ht.isHorizontal():dt.type==="polar"&&(ct=ht.dim==="angle");var ut=et.isAnimationEnabled()?et:null,ft=shouldRealtimeSort(et,dt);ft&&this._enableRealtimeSort(ft,ot,nt);var gt=et.get("clip",!0)||ft,mt=getClipArea(dt,ot);at.removeClipPath();var vt=et.get("roundCap",!0),yt=et.get("showBackground",!0),bt=et.getModel("backgroundStyle"),_t=bt.get("borderRadius")||0,xt=[],St=this._backgroundEls,Tt=it&&it.isInitSort,wt=it&&it.type==="changeAxisOrder";function Ct(Pt){var Rt=getLayout[dt.type](ot,Pt),It=createBackgroundEl(dt,ct,Rt);return It.useStyle(bt.getItemStyle()),dt.type==="cartesian2d"?It.setShape("r",_t):It.setShape("cornerRadius",_t),xt[Pt]=It,It}ot.diff(st).add(function(Pt){var Rt=ot.getItemModel(Pt),It=getLayout[dt.type](ot,Pt,Rt);if(yt&&Ct(Pt),!(!ot.hasValue(Pt)||!isValidLayout[dt.type](It))){var Mt=!1;gt&&(Mt=clip[dt.type](mt,It));var Ot=elementCreator[dt.type](et,ot,Pt,It,ct,ut,ht.model,!1,vt);ft&&(Ot.forceLabelAnimation=!0),updateStyle(Ot,ot,Pt,Rt,It,et,ct,dt.type==="polar"),Tt?Ot.attr({shape:It}):ft?updateRealtimeAnimation(ft,ut,Ot,It,Pt,ct,!1,!1):initProps(Ot,{shape:It},et,Pt),ot.setItemGraphicEl(Pt,Ot),at.add(Ot),Ot.ignore=Mt}}).update(function(Pt,Rt){var It=ot.getItemModel(Pt),Mt=getLayout[dt.type](ot,Pt,It);if(yt){var Ot=void 0;St.length===0?Ot=Ct(Rt):(Ot=St[Rt],Ot.useStyle(bt.getItemStyle()),dt.type==="cartesian2d"?Ot.setShape("r",_t):Ot.setShape("cornerRadius",_t),xt[Pt]=Ot);var $t=getLayout[dt.type](ot,Pt),Lt=createBackgroundShape(ct,$t,dt);updateProps$1(Ot,{shape:Lt},ut,Pt)}var kt=st.getItemGraphicEl(Rt);if(!ot.hasValue(Pt)||!isValidLayout[dt.type](Mt)){at.remove(kt);return}var Nt=!1;if(gt&&(Nt=clip[dt.type](mt,Mt),Nt&&at.remove(kt)),kt?saveOldStyle(kt):kt=elementCreator[dt.type](et,ot,Pt,Mt,ct,ut,ht.model,!!kt,vt),ft&&(kt.forceLabelAnimation=!0),wt){var Vt=kt.getTextContent();if(Vt){var zt=labelInner(Vt);zt.prevValue!=null&&(zt.prevValue=zt.value)}}else updateStyle(kt,ot,Pt,It,Mt,et,ct,dt.type==="polar");Tt?kt.attr({shape:Mt}):ft?updateRealtimeAnimation(ft,ut,kt,Mt,Pt,ct,!0,wt):updateProps$1(kt,{shape:Mt},et,Pt,null),ot.setItemGraphicEl(Pt,kt),kt.ignore=Nt,at.add(kt)}).remove(function(Pt){var Rt=st.getItemGraphicEl(Pt);Rt&&removeElementWithFadeOut(Rt,et,Pt)}).execute();var Et=this._backgroundGroup||(this._backgroundGroup=new Group$3);Et.removeAll();for(var At=0;At<xt.length;++At)Et.add(xt[At]);at.add(Et),this._backgroundEls=xt,this._data=ot},_.prototype._renderLarge=function(et,tt,nt){this._clear(),createLarge$1(et,this.group),this._updateLargeClip(et)},_.prototype._incrementalRenderLarge=function(et,tt){this._removeBackground(),createLarge$1(tt,this.group,this._progressiveEls,!0)},_.prototype._updateLargeClip=function(et){var tt=et.get("clip",!0)&&createClipPath(et.coordinateSystem,!1,et),nt=this.group;tt?nt.setClipPath(tt):nt.removeClipPath()},_.prototype._enableRealtimeSort=function(et,tt,nt){var it=this;if(tt.count()){var at=et.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(tt,et,nt),this._isFirstFrame=!1;else{var ot=function(st){var dt=tt.getItemGraphicEl(st),ht=dt&&dt.shape;return ht&&Math.abs(at.isHorizontal()?ht.height:ht.width)||0};this._onRendered=function(){it._updateSortWithinSameData(tt,ot,at,nt)},nt.getZr().on("rendered",this._onRendered)}}},_.prototype._dataSort=function(et,tt,nt){var it=[];return et.each(et.mapDimension(tt.dim),function(at,ot){var st=nt(ot);st=st??NaN,it.push({dataIndex:ot,mappedValue:st,ordinalNumber:at})}),it.sort(function(at,ot){return ot.mappedValue-at.mappedValue}),{ordinalNumbers:map$1(it,function(at){return at.ordinalNumber})}},_.prototype._isOrderChangedWithinSameData=function(et,tt,nt){for(var it=nt.scale,at=et.mapDimension(nt.dim),ot=Number.MAX_VALUE,st=0,dt=it.getOrdinalMeta().categories.length;st<dt;++st){var ht=et.rawIndexOf(at,it.getRawOrdinalNumber(st)),ct=ht<0?Number.MIN_VALUE:tt(et.indexOfRawIndex(ht));if(ct>ot)return!0;ot=ct}return!1},_.prototype._isOrderDifferentInView=function(et,tt){for(var nt=tt.scale,it=nt.getExtent(),at=Math.max(0,it[0]),ot=Math.min(it[1],nt.getOrdinalMeta().categories.length-1);at<=ot;++at)if(et.ordinalNumbers[at]!==nt.getRawOrdinalNumber(at))return!0},_.prototype._updateSortWithinSameData=function(et,tt,nt,it){if(this._isOrderChangedWithinSameData(et,tt,nt)){var at=this._dataSort(et,nt,tt);this._isOrderDifferentInView(at,nt)&&(this._removeOnRenderedListener(it),it.dispatchAction({type:"changeAxisOrder",componentType:nt.dim+"Axis",axisId:nt.index,sortInfo:at}))}},_.prototype._dispatchInitSort=function(et,tt,nt){var it=tt.baseAxis,at=this._dataSort(et,it,function(ot){return et.get(et.mapDimension(tt.otherAxis.dim),ot)});nt.dispatchAction({type:"changeAxisOrder",componentType:it.dim+"Axis",isInitSort:!0,axisId:it.index,sortInfo:at})},_.prototype.remove=function(et,tt){this._clear(this._model),this._removeOnRenderedListener(tt)},_.prototype.dispose=function(et,tt){this._removeOnRenderedListener(tt)},_.prototype._removeOnRenderedListener=function(et){this._onRendered&&(et.getZr().off("rendered",this._onRendered),this._onRendered=null)},_.prototype._clear=function(et){var tt=this.group,nt=this._data;et&&et.isAnimationEnabled()&&nt&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],nt.eachItemGraphicEl(function(it){removeElementWithFadeOut(it,et,getECData(it).dataIndex)})):tt.removeAll(),this._data=null,this._isFirstFrame=!0},_.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},_.type="bar",_}(ChartView),clip={cartesian2d:function(_e,_){var et=_.width<0?-1:1,tt=_.height<0?-1:1;et<0&&(_.x+=_.width,_.width=-_.width),tt<0&&(_.y+=_.height,_.height=-_.height);var nt=_e.x+_e.width,it=_e.y+_e.height,at=mathMax$4(_.x,_e.x),ot=mathMin$4(_.x+_.width,nt),st=mathMax$4(_.y,_e.y),dt=mathMin$4(_.y+_.height,it),ht=ot<at,ct=dt<st;return _.x=ht&&at>nt?ot:at,_.y=ct&&st>it?dt:st,_.width=ht?0:ot-at,_.height=ct?0:dt-st,et<0&&(_.x+=_.width,_.width=-_.width),tt<0&&(_.y+=_.height,_.height=-_.height),ht||ct},polar:function(_e,_){var et=_.r0<=_.r?1:-1;if(et<0){var tt=_.r;_.r=_.r0,_.r0=tt}var nt=mathMin$4(_.r,_e.r),it=mathMax$4(_.r0,_e.r0);_.r=nt,_.r0=it;var at=nt-it<0;if(et<0){var tt=_.r;_.r=_.r0,_.r0=tt}return at}},elementCreator={cartesian2d:function(_e,_,et,tt,nt,it,at,ot,st){var dt=new Rect$2({shape:extend({},tt),z2:1});if(dt.__dataIndex=et,dt.name="item",it){var ht=dt.shape,ct=nt?"height":"width";ht[ct]=0}return dt},polar:function(_e,_,et,tt,nt,it,at,ot,st){var dt=!nt&&st?SausagePath:Sector,ht=new dt({shape:tt,z2:1});ht.name="item";var ct=createPolarPositionMapping(nt);if(ht.calculateTextPosition=createSectorCalculateTextPosition(ct,{isRoundCap:dt===SausagePath}),it){var ut=ht.shape,ft=nt?"r":"endAngle",gt={};ut[ft]=nt?tt.r0:tt.startAngle,gt[ft]=tt[ft],(ot?updateProps$1:initProps)(ht,{shape:gt},it)}return ht}};function shouldRealtimeSort(_e,_){var et=_e.get("realtimeSort",!0),tt=_.getBaseAxis();if(et&&tt.type==="category"&&_.type==="cartesian2d")return{baseAxis:tt,otherAxis:_.getOtherAxis(tt)}}function updateRealtimeAnimation(_e,_,et,tt,nt,it,at,ot){var st,dt;it?(dt={x:tt.x,width:tt.width},st={y:tt.y,height:tt.height}):(dt={y:tt.y,height:tt.height},st={x:tt.x,width:tt.width}),ot||(at?updateProps$1:initProps)(et,{shape:st},_,nt,null);var ht=_?_e.baseAxis.model:null;(at?updateProps$1:initProps)(et,{shape:dt},ht,nt)}function checkPropertiesNotValid(_e,_){for(var et=0;et<_.length;et++)if(!isFinite(_e[_[et]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(_e){return!checkPropertiesNotValid(_e,rectPropties)},polar:function(_e){return!checkPropertiesNotValid(_e,polarPropties)}},getLayout={cartesian2d:function(_e,_,et){var tt=_e.getItemLayout(_),nt=et?getLineWidth(et,tt):0,it=tt.width>0?1:-1,at=tt.height>0?1:-1;return{x:tt.x+it*nt/2,y:tt.y+at*nt/2,width:tt.width-it*nt,height:tt.height-at*nt}},polar:function(_e,_,et){var tt=_e.getItemLayout(_);return{cx:tt.cx,cy:tt.cy,r0:tt.r0,r:tt.r,startAngle:tt.startAngle,endAngle:tt.endAngle,clockwise:tt.clockwise}}};function isZeroOnPolar(_e){return _e.startAngle!=null&&_e.endAngle!=null&&_e.startAngle===_e.endAngle}function createPolarPositionMapping(_e){return function(_){var et=_?"Arc":"Angle";return function(tt){switch(tt){case"start":case"insideStart":case"end":case"insideEnd":return tt+et;default:return tt}}}(_e)}function updateStyle(_e,_,et,tt,nt,it,at,ot){var st=_.getItemVisual(et,"style");if(ot){if(!it.get("roundCap")){var ht=_e.shape,ct=getSectorCornerRadius(tt.getModel("itemStyle"),ht,!0);extend(ht,ct),_e.setShape(ht)}}else{var dt=tt.get(["itemStyle","borderRadius"])||0;_e.setShape("r",dt)}_e.useStyle(st);var ut=tt.getShallow("cursor");ut&&_e.attr("cursor",ut);var ft=ot?at?nt.r>=nt.r0?"endArc":"startArc":nt.endAngle>=nt.startAngle?"endAngle":"startAngle":at?nt.height>=0?"bottom":"top":nt.width>=0?"right":"left",gt=getLabelStatesModels(tt);setLabelStyle(_e,gt,{labelFetcher:it,labelDataIndex:et,defaultText:getDefaultLabel(it.getData(),et),inheritColor:st.fill,defaultOpacity:st.opacity,defaultOutsidePosition:ft});var mt=_e.getTextContent();if(ot&&mt){var vt=tt.get(["label","position"]);_e.textConfig.inside=vt==="middle"?!0:null,setSectorTextRotation(_e,vt==="outside"?ft:vt,createPolarPositionMapping(at),tt.get(["label","rotate"]))}setLabelValueAnimation(mt,gt,it.getRawValue(et),function(bt){return getDefaultInterpolatedLabel(_,bt)});var yt=tt.getModel(["emphasis"]);toggleHoverEmphasis(_e,yt.get("focus"),yt.get("blurScope"),yt.get("disabled")),setStatesStylesFromModel(_e,tt),isZeroOnPolar(nt)&&(_e.style.fill="none",_e.style.stroke="none",each$f(_e.states,function(bt){bt.style&&(bt.style.fill=bt.style.stroke="none")}))}function getLineWidth(_e,_){var et=_e.get(["itemStyle","borderColor"]);if(!et||et==="none")return 0;var tt=_e.get(["itemStyle","borderWidth"])||0,nt=isNaN(_.width)?Number.MAX_VALUE:Math.abs(_.width),it=isNaN(_.height)?Number.MAX_VALUE:Math.abs(_.height);return Math.min(tt,nt,it)}var LagePathShape=function(){function _e(){}return _e}(),LargePath=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.type="largeBar",tt}return _.prototype.getDefaultShape=function(){return new LagePathShape},_.prototype.buildPath=function(et,tt){for(var nt=tt.points,it=this.baseDimIdx,at=1-this.baseDimIdx,ot=[],st=[],dt=this.barWidth,ht=0;ht<nt.length;ht+=3)st[it]=dt,st[at]=nt[ht+2],ot[it]=nt[ht+it],ot[at]=nt[ht+at],et.rect(ot[0],ot[1],st[0],st[1])},_}(Path);function createLarge$1(_e,_,et,tt){var nt=_e.getData(),it=nt.getLayout("valueAxisHorizontal")?1:0,at=nt.getLayout("largeDataIndices"),ot=nt.getLayout("size"),st=_e.getModel("backgroundStyle"),dt=nt.getLayout("largeBackgroundPoints");if(dt){var ht=new LargePath({shape:{points:dt},incremental:!!tt,silent:!0,z2:0});ht.baseDimIdx=it,ht.largeDataIndices=at,ht.barWidth=ot,ht.useStyle(st.getItemStyle()),_.add(ht),et&&et.push(ht)}var ct=new LargePath({shape:{points:nt.getLayout("largePoints")},incremental:!!tt,ignoreCoarsePointer:!0,z2:1});ct.baseDimIdx=it,ct.largeDataIndices=at,ct.barWidth=ot,_.add(ct),ct.useStyle(nt.getVisual("style")),ct.style.stroke=null,getECData(ct).seriesIndex=_e.seriesIndex,_e.get("silent")||(ct.on("mousedown",largePathUpdateDataIndex),ct.on("mousemove",largePathUpdateDataIndex)),et&&et.push(ct)}var largePathUpdateDataIndex=throttle(function(_e){var _=this,et=largePathFindDataIndex(_,_e.offsetX,_e.offsetY);getECData(_).dataIndex=et>=0?et:null},30,!1);function largePathFindDataIndex(_e,_,et){for(var tt=_e.baseDimIdx,nt=1-tt,it=_e.shape.points,at=_e.largeDataIndices,ot=[],st=[],dt=_e.barWidth,ht=0,ct=it.length/3;ht<ct;ht++){var ut=ht*3;if(st[tt]=dt,st[nt]=it[ut+2],ot[tt]=it[ut+tt],ot[nt]=it[ut+nt],st[nt]<0&&(ot[nt]+=st[nt],st[nt]=-st[nt]),_>=ot[0]&&_<=ot[0]+st[0]&&et>=ot[1]&&et<=ot[1]+st[1])return at[ht]}return-1}function createBackgroundShape(_e,_,et){if(isCoordinateSystemType(et,"cartesian2d")){var tt=_,nt=et.getArea();return{x:_e?tt.x:nt.x,y:_e?nt.y:tt.y,width:_e?tt.width:nt.width,height:_e?nt.height:tt.height}}else{var nt=et.getArea(),it=_;return{cx:nt.cx,cy:nt.cy,r0:_e?nt.r0:it.r0,r:_e?nt.r:it.r,startAngle:_e?it.startAngle:0,endAngle:_e?it.endAngle:Math.PI*2}}}function createBackgroundEl(_e,_,et){var tt=_e.type==="polar"?Sector:Rect$2;return new tt({shape:createBackgroundShape(_,et,_e),silent:!0,z2:0})}function install$P(_e){_e.registerChartView(BarView),_e.registerSeriesModel(BarSeriesModel),_e.registerLayout(_e.PRIORITY.VISUAL.LAYOUT,curry$1(layout$4,"bar")),_e.registerLayout(_e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),_e.registerProcessor(_e.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),_e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(_,et){var tt=_.componentType||"series";et.eachComponent({mainType:tt,query:_},function(nt){_.sortInfo&&nt.axis.setCategorySortInfo(_.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(_e,_){return getLayoutRect(_e.getBoxLayoutParams(),{width:_.getWidth(),height:_.getHeight()})}function getBasicPieLayout(_e,_){var et=getViewRect$5(_e,_),tt=_e.get("center"),nt=_e.get("radius");isArray$1(nt)||(nt=[0,nt]);var it=parsePercent(et.width,_.getWidth()),at=parsePercent(et.height,_.getHeight()),ot=Math.min(it,at),st=parsePercent(nt[0],ot/2),dt=parsePercent(nt[1],ot/2),ht,ct,ut=_e.coordinateSystem;if(ut){var ft=ut.dataToPoint(tt);ht=ft[0]||0,ct=ft[1]||0}else isArray$1(tt)||(tt=[tt,tt]),ht=parsePercent(tt[0],it)+et.x,ct=parsePercent(tt[1],at)+et.y;return{cx:ht,cy:ct,r0:st,r:dt}}function pieLayout(_e,_,et){_.eachSeriesByType(_e,function(tt){var nt=tt.getData(),it=nt.mapDimension("value"),at=getViewRect$5(tt,et),ot=getBasicPieLayout(tt,et),st=ot.cx,dt=ot.cy,ht=ot.r,ct=ot.r0,ut=-tt.get("startAngle")*RADIAN$2,ft=tt.get("endAngle"),gt=tt.get("padAngle")*RADIAN$2;ft=ft==="auto"?ut-PI2:-ft*RADIAN$2;var mt=tt.get("minAngle")*RADIAN$2,vt=mt+gt,yt=0;nt.each(it,function(Lt){!isNaN(Lt)&&yt++});var bt=nt.getSum(it),_t=Math.PI/(bt||yt)*2,xt=tt.get("clockwise"),St=tt.get("roseType"),Tt=tt.get("stillShowZeroSum"),wt=nt.getDataExtent(it);wt[0]=0;var Ct=xt?1:-1,Et=[ut,ft],At=Ct*gt/2;normalizeArcAngles(Et,!xt),ut=Et[0],ft=Et[1];var Pt=getSeriesLayoutData(tt);Pt.startAngle=ut,Pt.endAngle=ft,Pt.clockwise=xt;var Rt=Math.abs(ft-ut),It=Rt,Mt=0,Ot=ut;if(nt.setLayout({viewRect:at,r:ht}),nt.each(it,function(Lt,kt){var Nt;if(isNaN(Lt)){nt.setItemLayout(kt,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:xt,cx:st,cy:dt,r0:ct,r:St?NaN:ht});return}St!=="area"?Nt=bt===0&&Tt?_t:Lt*_t:Nt=Rt/yt,Nt<vt?(Nt=vt,It-=vt):Mt+=Lt;var Vt=Ot+Ct*Nt,zt=0,Xt=0;gt>Nt?(zt=Ot+Ct*Nt/2,Xt=zt):(zt=Ot+At,Xt=Vt-At),nt.setItemLayout(kt,{angle:Nt,startAngle:zt,endAngle:Xt,clockwise:xt,cx:st,cy:dt,r0:ct,r:St?linearMap$2(Lt,wt,[ct,ht]):ht}),Ot=Vt}),It<PI2&&yt)if(It<=.001){var $t=Rt/yt;nt.each(it,function(Lt,kt){if(!isNaN(Lt)){var Nt=nt.getItemLayout(kt);Nt.angle=$t;var Vt=0,zt=0;$t<gt?(Vt=ut+Ct*(kt+1/2)*$t,zt=Vt):(Vt=ut+Ct*kt*$t+At,zt=ut+Ct*(kt+1)*$t-At),Nt.startAngle=Vt,Nt.endAngle=zt}})}else _t=It/Mt,Ot=ut,nt.each(it,function(Lt,kt){if(!isNaN(Lt)){var Nt=nt.getItemLayout(kt),Vt=Nt.angle===vt?vt:Lt*_t,zt=0,Xt=0;Vt<gt?(zt=Ot+Ct*Vt/2,Xt=zt):(zt=Ot+At,Xt=Ot+Ct*Vt-At),Nt.startAngle=zt,Nt.endAngle=Xt,Ot+=Ct*Vt}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(_e){return{seriesType:_e,reset:function(_,et){var tt=et.findComponents({mainType:"legend"});if(!(!tt||!tt.length)){var nt=_.getData();nt.filterSelf(function(it){for(var at=nt.getName(it),ot=0;ot<tt.length;ot++)if(!tt[ot].isSelected(at))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(_e,_,et,tt,nt,it,at,ot,st,dt){if(_e.length<2)return;function ht(mt){for(var vt=mt.rB,yt=vt*vt,bt=0;bt<mt.list.length;bt++){var _t=mt.list[bt],xt=Math.abs(_t.label.y-et),St=tt+_t.len,Tt=St*St,wt=Math.sqrt(Math.abs((1-xt*xt/yt)*Tt)),Ct=_+(wt+_t.len2)*nt,Et=Ct-_t.label.x,At=_t.targetTextWidth-Et*nt;constrainTextWidth(_t,At,!0),_t.label.x=Ct}}function ct(mt){for(var vt={list:[],maxY:0},yt={list:[],maxY:0},bt=0;bt<mt.length;bt++)if(mt[bt].labelAlignTo==="none"){var _t=mt[bt],xt=_t.label.y>et?yt:vt,St=Math.abs(_t.label.y-et);if(St>=xt.maxY){var Tt=_t.label.x-_-_t.len2*nt,wt=tt+_t.len,Ct=Math.abs(Tt)<wt?Math.sqrt(St*St/(1-Tt*Tt/wt/wt)):wt;xt.rB=Ct,xt.maxY=St}xt.list.push(_t)}ht(vt),ht(yt)}for(var ut=_e.length,ft=0;ft<ut;ft++)if(_e[ft].position==="outer"&&_e[ft].labelAlignTo==="labelLine"){var gt=_e[ft].label.x-dt;_e[ft].linePoints[1][0]+=gt,_e[ft].label.x=dt}shiftLayoutOnY(_e,st,st+at)&&ct(_e)}function avoidOverlap(_e,_,et,tt,nt,it,at,ot){for(var st=[],dt=[],ht=Number.MAX_VALUE,ct=-Number.MAX_VALUE,ut=0;ut<_e.length;ut++){var ft=_e[ut].label;isPositionCenter(_e[ut])||(ft.x<_?(ht=Math.min(ht,ft.x),st.push(_e[ut])):(ct=Math.max(ct,ft.x),dt.push(_e[ut])))}for(var ut=0;ut<_e.length;ut++){var gt=_e[ut];if(!isPositionCenter(gt)&&gt.linePoints){if(gt.labelStyleWidth!=null)continue;var ft=gt.label,mt=gt.linePoints,vt=void 0;gt.labelAlignTo==="edge"?ft.x<_?vt=mt[2][0]-gt.labelDistance-at-gt.edgeDistance:vt=at+nt-gt.edgeDistance-mt[2][0]-gt.labelDistance:gt.labelAlignTo==="labelLine"?ft.x<_?vt=ht-at-gt.bleedMargin:vt=at+nt-ct-gt.bleedMargin:ft.x<_?vt=ft.x-at-gt.bleedMargin:vt=at+nt-ft.x-gt.bleedMargin,gt.targetTextWidth=vt,constrainTextWidth(gt,vt)}}adjustSingleSide(dt,_,et,tt,1,nt,it,at,ot,ct),adjustSingleSide(st,_,et,tt,-1,nt,it,at,ot,ht);for(var ut=0;ut<_e.length;ut++){var gt=_e[ut];if(!isPositionCenter(gt)&&gt.linePoints){var ft=gt.label,mt=gt.linePoints,yt=gt.labelAlignTo==="edge",bt=ft.style.padding,_t=bt?bt[1]+bt[3]:0,xt=ft.style.backgroundColor?0:_t,St=gt.rect.width+xt,Tt=mt[1][0]-mt[2][0];yt?ft.x<_?mt[2][0]=at+gt.edgeDistance+St+gt.labelDistance:mt[2][0]=at+nt-gt.edgeDistance-St-gt.labelDistance:(ft.x<_?mt[2][0]=ft.x+gt.labelDistance:mt[2][0]=ft.x-gt.labelDistance,mt[1][0]=mt[2][0]+Tt),mt[1][1]=mt[2][1]=ft.y}}}function constrainTextWidth(_e,_,et){if(et===void 0&&(et=!1),_e.labelStyleWidth==null){var tt=_e.label,nt=tt.style,it=_e.rect,at=nt.backgroundColor,ot=nt.padding,st=ot?ot[1]+ot[3]:0,dt=nt.overflow,ht=it.width+(at?0:st);if(_<ht||et){var ct=it.height;if(dt&&dt.match("break")){tt.setStyle("backgroundColor",null),tt.setStyle("width",_-st);var ut=tt.getBoundingRect();tt.setStyle("width",Math.ceil(ut.width)),tt.setStyle("backgroundColor",at)}else{var ft=_-st,gt=_<ht?ft:et?ft>_e.unconstrainedWidth?null:ft:null;tt.setStyle("width",gt)}var mt=tt.getBoundingRect();it.width=mt.width;var vt=(tt.style.margin||0)+2.1;it.height=mt.height+vt,it.y-=(it.height-ct)/2}}}function isPositionCenter(_e){return _e.position==="center"}function pieLabelLayout(_e){var _=_e.getData(),et=[],tt,nt,it=!1,at=(_e.get("minShowLabelAngle")||0)*RADIAN$1,ot=_.getLayout("viewRect"),st=_.getLayout("r"),dt=ot.width,ht=ot.x,ct=ot.y,ut=ot.height;function ft(Tt){Tt.ignore=!0}function gt(Tt){if(!Tt.ignore)return!0;for(var wt in Tt.states)if(Tt.states[wt].ignore===!1)return!0;return!1}_.each(function(Tt){var wt=_.getItemGraphicEl(Tt),Ct=wt.shape,Et=wt.getTextContent(),At=wt.getTextGuideLine(),Pt=_.getItemModel(Tt),Rt=Pt.getModel("label"),It=Rt.get("position")||Pt.get(["emphasis","label","position"]),Mt=Rt.get("distanceToLabelLine"),Ot=Rt.get("alignTo"),$t=parsePercent(Rt.get("edgeDistance"),dt),Lt=Rt.get("bleedMargin"),kt=Pt.getModel("labelLine"),Nt=kt.get("length");Nt=parsePercent(Nt,dt);var Vt=kt.get("length2");if(Vt=parsePercent(Vt,dt),Math.abs(Ct.endAngle-Ct.startAngle)<at){each$f(Et.states,ft),Et.ignore=!0,At&&(each$f(At.states,ft),At.ignore=!0);return}if(gt(Et)){var zt=(Ct.startAngle+Ct.endAngle)/2,Xt=Math.cos(zt),Wt=Math.sin(zt),nr,Jt,lr,pr;tt=Ct.cx,nt=Ct.cy;var Zt=It==="inside"||It==="inner";if(It==="center")nr=Ct.cx,Jt=Ct.cy,pr="center";else{var Kt=(Zt?(Ct.r+Ct.r0)/2*Xt:Ct.r*Xt)+tt,ur=(Zt?(Ct.r+Ct.r0)/2*Wt:Ct.r*Wt)+nt;if(nr=Kt+Xt*3,Jt=ur+Wt*3,!Zt){var ir=Kt+Xt*(Nt+st-Ct.r),hr=ur+Wt*(Nt+st-Ct.r),fr=ir+(Xt<0?-1:1)*Vt,mr=hr;Ot==="edge"?nr=Xt<0?ht+$t:ht+dt-$t:nr=fr+(Xt<0?-Mt:Mt),Jt=mr,lr=[[Kt,ur],[ir,hr],[fr,mr]]}pr=Zt?"center":Ot==="edge"?Xt>0?"right":"left":Xt>0?"left":"right"}var br=Math.PI,Er=0,kr=Rt.get("rotate");if(isNumber(kr))Er=kr*(br/180);else if(It==="center")Er=0;else if(kr==="radial"||kr===!0){var jr=Xt<0?-zt+br:-zt;Er=jr}else if(kr==="tangential"&&It!=="outside"&&It!=="outer"){var Hr=Math.atan2(Xt,Wt);Hr<0&&(Hr=br*2+Hr);var Wr=Wt>0;Wr&&(Hr=br+Hr),Er=Hr-br}if(it=!!Er,Et.x=nr,Et.y=Jt,Et.rotation=Er,Et.setStyle({verticalAlign:"middle"}),Zt){Et.setStyle({align:pr});var Gr=Et.states.select;Gr&&(Gr.x+=Et.x,Gr.y+=Et.y)}else{var Yr=Et.getBoundingRect().clone();Yr.applyTransform(Et.getComputedTransform());var Br=(Et.style.margin||0)+2.1;Yr.y-=Br/2,Yr.height+=Br,et.push({label:Et,labelLine:At,position:It,len:Nt,len2:Vt,minTurnAngle:kt.get("minTurnAngle"),maxSurfaceAngle:kt.get("maxSurfaceAngle"),surfaceNormal:new Point(Xt,Wt),linePoints:lr,textAlign:pr,labelDistance:Mt,labelAlignTo:Ot,edgeDistance:$t,bleedMargin:Lt,rect:Yr,unconstrainedWidth:Yr.width,labelStyleWidth:Et.style.width})}wt.setTextConfig({inside:Zt})}}),!it&&_e.get("avoidLabelOverlap")&&avoidOverlap(et,tt,nt,st,dt,ut,ht,ct);for(var mt=0;mt<et.length;mt++){var vt=et[mt],yt=vt.label,bt=vt.labelLine,_t=isNaN(yt.x)||isNaN(yt.y);if(yt){yt.setStyle({align:vt.textAlign}),_t&&(each$f(yt.states,ft),yt.ignore=!0);var xt=yt.states.select;xt&&(xt.x+=yt.x,xt.y+=yt.y)}if(bt){var St=vt.linePoints;_t||!St?(each$f(bt.states,ft),bt.ignore=!0):(limitTurnAngle(St,vt.minTurnAngle),limitSurfaceAngle(St,vt.surfaceNormal,vt.maxSurfaceAngle),bt.setShape({points:St}),yt.__hostTarget.textGuideLineConfig={anchor:new Point(St[0][0],St[0][1])})}}}var PiePiece=function(_e){__extends$1(_,_e);function _(et,tt,nt){var it=_e.call(this)||this;it.z2=2;var at=new ZRText;return it.setTextContent(at),it.updateData(et,tt,nt,!0),it}return _.prototype.updateData=function(et,tt,nt,it){var at=this,ot=et.hostModel,st=et.getItemModel(tt),dt=st.getModel("emphasis"),ht=et.getItemLayout(tt),ct=extend(getSectorCornerRadius(st.getModel("itemStyle"),ht,!0),ht);if(isNaN(ct.startAngle)){at.setShape(ct);return}if(it){at.setShape(ct);var ut=ot.getShallow("animationType");ot.ecModel.ssr?(initProps(at,{scaleX:0,scaleY:0},ot,{dataIndex:tt,isFrom:!0}),at.originX=ct.cx,at.originY=ct.cy):ut==="scale"?(at.shape.r=ht.r0,initProps(at,{shape:{r:ht.r}},ot,tt)):nt!=null?(at.setShape({startAngle:nt,endAngle:nt}),initProps(at,{shape:{startAngle:ht.startAngle,endAngle:ht.endAngle}},ot,tt)):(at.shape.endAngle=ht.startAngle,updateProps$1(at,{shape:{endAngle:ht.endAngle}},ot,tt))}else saveOldStyle(at),updateProps$1(at,{shape:ct},ot,tt);at.useStyle(et.getItemVisual(tt,"style")),setStatesStylesFromModel(at,st);var ft=(ht.startAngle+ht.endAngle)/2,gt=ot.get("selectedOffset"),mt=Math.cos(ft)*gt,vt=Math.sin(ft)*gt,yt=st.getShallow("cursor");yt&&at.attr("cursor",yt),this._updateLabel(ot,et,tt),at.ensureState("emphasis").shape=extend({r:ht.r+(dt.get("scale")&&dt.get("scaleSize")||0)},getSectorCornerRadius(dt.getModel("itemStyle"),ht)),extend(at.ensureState("select"),{x:mt,y:vt,shape:getSectorCornerRadius(st.getModel(["select","itemStyle"]),ht)}),extend(at.ensureState("blur"),{shape:getSectorCornerRadius(st.getModel(["blur","itemStyle"]),ht)});var bt=at.getTextGuideLine(),_t=at.getTextContent();bt&&extend(bt.ensureState("select"),{x:mt,y:vt}),extend(_t.ensureState("select"),{x:mt,y:vt}),toggleHoverEmphasis(this,dt.get("focus"),dt.get("blurScope"),dt.get("disabled"))},_.prototype._updateLabel=function(et,tt,nt){var it=this,at=tt.getItemModel(nt),ot=at.getModel("labelLine"),st=tt.getItemVisual(nt,"style"),dt=st&&st.fill,ht=st&&st.opacity;setLabelStyle(it,getLabelStatesModels(at),{labelFetcher:tt.hostModel,labelDataIndex:nt,inheritColor:dt,defaultOpacity:ht,defaultText:et.getFormattedLabel(nt,"normal")||tt.getName(nt)});var ct=it.getTextContent();it.setTextConfig({position:null,rotation:null}),ct.attr({z2:10});var ut=et.get(["label","position"]);if(ut!=="outside"&&ut!=="outer")it.removeTextGuideLine();else{var ft=this.getTextGuideLine();ft||(ft=new Polyline$1,this.setTextGuideLine(ft)),setLabelLineStyle(this,getLabelLineStatesModels(at),{stroke:dt,opacity:retrieve3(ot.get(["lineStyle","opacity"]),ht,1)})}},_}(Sector),PieView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.ignoreLabelLineUpdate=!0,et}return _.prototype.render=function(et,tt,nt,it){var at=et.getData(),ot=this._data,st=this.group,dt;if(!ot&&at.count()>0){for(var ht=at.getItemLayout(0),ct=1;isNaN(ht&&ht.startAngle)&&ct<at.count();++ct)ht=at.getItemLayout(ct);ht&&(dt=ht.startAngle)}if(this._emptyCircleSector&&st.remove(this._emptyCircleSector),at.count()===0&&et.get("showEmptyCircle")){var ut=getSeriesLayoutData(et),ft=new Sector({shape:extend(getBasicPieLayout(et,nt),ut)});ft.useStyle(et.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=ft,st.add(ft)}at.diff(ot).add(function(gt){var mt=new PiePiece(at,gt,dt);at.setItemGraphicEl(gt,mt),st.add(mt)}).update(function(gt,mt){var vt=ot.getItemGraphicEl(mt);vt.updateData(at,gt,dt),vt.off("click"),st.add(vt),at.setItemGraphicEl(gt,vt)}).remove(function(gt){var mt=ot.getItemGraphicEl(gt);removeElementWithFadeOut(mt,et,gt)}).execute(),pieLabelLayout(et),et.get("animationTypeUpdate")!=="expansion"&&(this._data=at)},_.prototype.dispose=function(){},_.prototype.containPoint=function(et,tt){var nt=tt.getData(),it=nt.getItemLayout(0);if(it){var at=et[0]-it.cx,ot=et[1]-it.cy,st=Math.sqrt(at*at+ot*ot);return st<=it.r&&st>=it.r0}},_.type="pie",_}(ChartView);function createSeriesDataSimply(_e,_,et){_=isArray$1(_)&&{coordDimensions:_}||extend({encodeDefine:_e.getEncode()},_);var tt=_e.getSource(),nt=prepareSeriesDataSchema(tt,_).dimensions,it=new SeriesData(nt,_e);return it.initData(tt,et),it}var LegendVisualProvider=function(){function _e(_,et){this._getDataWithEncodedVisual=_,this._getRawData=et}return _e.prototype.getAllNames=function(){var _=this._getRawData();return _.mapArray(_.getName)},_e.prototype.containName=function(_){var et=this._getRawData();return et.indexOfName(_)>=0},_e.prototype.indexOfName=function(_){var et=this._getDataWithEncodedVisual();return et.indexOfName(_)},_e.prototype.getItemVisual=function(_,et){var tt=this._getDataWithEncodedVisual();return tt.getItemVisual(_,et)},_e}(),innerData=makeInner(),PieSeriesModel=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.init=function(et){_e.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$2(this.getData,this),bind$2(this.getRawData,this)),this._defaultLabelLine(et)},_.prototype.mergeOption=function(){_e.prototype.mergeOption.apply(this,arguments)},_.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},_.prototype.getDataParams=function(et){var tt=this.getData(),nt=innerData(tt),it=nt.seats;if(!it){var at=[];tt.each(tt.mapDimension("value"),function(st){at.push(st)}),it=nt.seats=getPercentSeats(at,tt.hostModel.get("percentPrecision"))}var ot=_e.prototype.getDataParams.call(this,et);return ot.percent=it[et]||0,ot.$vars.push("percent"),ot},_.prototype._defaultLabelLine=function(et){defaultEmphasis(et,"labelLine",["show"]);var tt=et.labelLine,nt=et.emphasis.labelLine;tt.show=tt.show&&et.label.show,nt.show=nt.show&&et.emphasis.label.show},_.type="series.pie",_.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},_}(SeriesModel);function negativeDataFilter(_e){return{seriesType:_e,reset:function(_,et){var tt=_.getData();tt.filterSelf(function(nt){var it=tt.mapDimension("value"),at=tt.get(it,nt);return!(isNumber(at)&&!isNaN(at)&&at<0)})}}}function install$O(_e){_e.registerChartView(PieView),_e.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",_e.registerAction),_e.registerLayout(curry$1(pieLayout,"pie")),_e.registerProcessor(dataFilter$1("pie")),_e.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.hasSymbolVisual=!0,et}return _.prototype.getInitialData=function(et,tt){return createSeriesData(null,this,{useEncodeDefaulter:!0})},_.prototype.getProgressive=function(){var et=this.option.progressive;return et??(this.option.large?5e3:this.get("progressive"))},_.prototype.getProgressiveThreshold=function(){var et=this.option.progressiveThreshold;return et??(this.option.large?1e4:this.get("progressiveThreshold"))},_.prototype.brushSelector=function(et,tt,nt){return nt.point(tt.getItemLayout(et))},_.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},_.type="series.scatter",_.dependencies=["grid","polar","geo","singleAxis","calendar"],_.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},_}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function _e(){}return _e}(),LargeSymbolPath=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt._off=0,tt.hoverDataIdx=-1,tt}return _.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},_.prototype.reset=function(){this.notClear=!1,this._off=0},_.prototype.buildPath=function(et,tt){var nt=tt.points,it=tt.size,at=this.symbolProxy,ot=at.shape,st=et.getContext?et.getContext():et,dt=st&&it[0]<BOOST_SIZE_THRESHOLD,ht=this.softClipShape,ct;if(dt){this._ctx=st;return}for(this._ctx=null,ct=this._off;ct<nt.length;){var ut=nt[ct++],ft=nt[ct++];isNaN(ut)||isNaN(ft)||ht&&!ht.contain(ut,ft)||(ot.x=ut-it[0]/2,ot.y=ft-it[1]/2,ot.width=it[0],ot.height=it[1],at.buildPath(et,ot,!0))}this.incremental&&(this._off=ct,this.notClear=!0)},_.prototype.afterBrush=function(){var et=this.shape,tt=et.points,nt=et.size,it=this._ctx,at=this.softClipShape,ot;if(it){for(ot=this._off;ot<tt.length;){var st=tt[ot++],dt=tt[ot++];isNaN(st)||isNaN(dt)||at&&!at.contain(st,dt)||it.fillRect(st-nt[0]/2,dt-nt[1]/2,nt[0],nt[1])}this.incremental&&(this._off=ot,this.notClear=!0)}},_.prototype.findDataIndex=function(et,tt){for(var nt=this.shape,it=nt.points,at=nt.size,ot=Math.max(at[0],4),st=Math.max(at[1],4),dt=it.length/2-1;dt>=0;dt--){var ht=dt*2,ct=it[ht]-ot/2,ut=it[ht+1]-st/2;if(et>=ct&&tt>=ut&&et<=ct+ot&&tt<=ut+st)return dt}return-1},_.prototype.contain=function(et,tt){var nt=this.transformCoordToLocal(et,tt),it=this.getBoundingRect();if(et=nt[0],tt=nt[1],it.contain(et,tt)){var at=this.hoverDataIdx=this.findDataIndex(et,tt);return at>=0}return this.hoverDataIdx=-1,!1},_.prototype.getBoundingRect=function(){var et=this._rect;if(!et){for(var tt=this.shape,nt=tt.points,it=tt.size,at=it[0],ot=it[1],st=1/0,dt=1/0,ht=-1/0,ct=-1/0,ut=0;ut<nt.length;){var ft=nt[ut++],gt=nt[ut++];st=Math.min(ft,st),ht=Math.max(ft,ht),dt=Math.min(gt,dt),ct=Math.max(gt,ct)}et=this._rect=new BoundingRect(st-at/2,dt-ot/2,ht-st+at,ct-dt+ot)}return et},_}(Path),LargeSymbolDraw=function(){function _e(){this.group=new Group$3}return _e.prototype.updateData=function(_,et){this._clear();var tt=this._create();tt.setShape({points:_.getLayout("points")}),this._setCommon(tt,_,et)},_e.prototype.updateLayout=function(_){var et=_.getLayout("points");this.group.eachChild(function(tt){if(tt.startIndex!=null){var nt=(tt.endIndex-tt.startIndex)*2,it=tt.startIndex*4*2;et=new Float32Array(et.buffer,it,nt)}tt.setShape("points",et),tt.reset()})},_e.prototype.incrementalPrepareUpdate=function(_){this._clear()},_e.prototype.incrementalUpdate=function(_,et,tt){var nt=this._newAdded[0],it=et.getLayout("points"),at=nt&&nt.shape.points;if(at&&at.length<2e4){var ot=at.length,st=new Float32Array(ot+it.length);st.set(at),st.set(it,ot),nt.endIndex=_.end,nt.setShape({points:st})}else{this._newAdded=[];var dt=this._create();dt.startIndex=_.start,dt.endIndex=_.end,dt.incremental=!0,dt.setShape({points:it}),this._setCommon(dt,et,tt)}},_e.prototype.eachRendered=function(_){this._newAdded[0]&&_(this._newAdded[0])},_e.prototype._create=function(){var _=new LargeSymbolPath({cursor:"default"});return _.ignoreCoarsePointer=!0,this.group.add(_),this._newAdded.push(_),_},_e.prototype._setCommon=function(_,et,tt){var nt=et.hostModel;tt=tt||{};var it=et.getVisual("symbolSize");_.setShape("size",it instanceof Array?it:[it,it]),_.softClipShape=tt.clipShape||null,_.symbolProxy=createSymbol$1(et.getVisual("symbol"),0,0,0,0),_.setColor=_.symbolProxy.setColor;var at=_.shape.size[0]<BOOST_SIZE_THRESHOLD;_.useStyle(nt.getModel("itemStyle").getItemStyle(at?["color","shadowBlur","shadowColor"]:["color"]));var ot=et.getVisual("style"),st=ot&&ot.fill;st&&_.setColor(st);var dt=getECData(_);dt.seriesIndex=nt.seriesIndex,_.on("mousemove",function(ht){dt.dataIndex=null;var ct=_.hoverDataIdx;ct>=0&&(dt.dataIndex=ct+(_.startIndex||0))})},_e.prototype.remove=function(){this._clear()},_e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},_e}(),ScatterView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){var it=et.getData(),at=this._updateSymbolDraw(it,et);at.updateData(it,{clipShape:this._getClipShape(et)}),this._finished=!0},_.prototype.incrementalPrepareRender=function(et,tt,nt){var it=et.getData(),at=this._updateSymbolDraw(it,et);at.incrementalPrepareUpdate(it),this._finished=!1},_.prototype.incrementalRender=function(et,tt,nt){this._symbolDraw.incrementalUpdate(et,tt.getData(),{clipShape:this._getClipShape(tt)}),this._finished=et.end===tt.getData().count()},_.prototype.updateTransform=function(et,tt,nt){var it=et.getData();if(this.group.dirty(),!this._finished||it.count()>1e4)return{update:!0};var at=pointsLayout("").reset(et,tt,nt);at.progress&&at.progress({start:0,end:it.count(),count:it.count()},it),this._symbolDraw.updateLayout(it)},_.prototype.eachRendered=function(et){this._symbolDraw&&this._symbolDraw.eachRendered(et)},_.prototype._getClipShape=function(et){if(et.get("clip",!0)){var tt=et.coordinateSystem;return tt&&tt.getArea&&tt.getArea(.1)}},_.prototype._updateSymbolDraw=function(et,tt){var nt=this._symbolDraw,it=tt.pipelineContext,at=it.large;return(!nt||at!==this._isLargeDraw)&&(nt&&nt.remove(),nt=this._symbolDraw=at?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=at,this.group.removeAll()),this.group.add(nt.group),nt},_.prototype.remove=function(et,tt){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},_.prototype.dispose=function(){},_.type="scatter",_}(ChartView),GridModel=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.type="grid",_.dependencies=["xAxis","yAxis"],_.layoutMode="box",_.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},_}(ComponentModel),CartesianAxisModel=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},_.type="cartesian2dAxis",_}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge$1({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge$1({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge$1({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(_e,_,et,tt){each$f(AXIS_TYPES,function(nt,it){var at=merge$1(merge$1({},axisDefault[it],!0),tt,!0),ot=function(st){__extends$1(dt,st);function dt(){var ht=st!==null&&st.apply(this,arguments)||this;return ht.type=_+"Axis."+it,ht}return dt.prototype.mergeDefaultAndTheme=function(ht,ct){var ut=fetchLayoutMode(this),ft=ut?getLayoutParams(ht):{},gt=ct.getTheme();merge$1(ht,gt.get(it+"Axis")),merge$1(ht,this.getDefaultOption()),ht.type=getAxisType(ht),ut&&mergeLayoutParam(ht,ft,ut)},dt.prototype.optionUpdated=function(){var ht=this.option;ht.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},dt.prototype.getCategories=function(ht){var ct=this.option;if(ct.type==="category")return ht?ct.data:this.__ordinalMeta.categories},dt.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},dt.type=_+"Axis."+it,dt.defaultOption=at,dt}(et);_e.registerComponentModel(ot)}),_e.registerSubTypeDefaulter(_+"Axis",getAxisType)}function getAxisType(_e){return _e.type||(_e.data?"category":"value")}var Cartesian=function(){function _e(_){this.type="cartesian",this._dimList=[],this._axes={},this.name=_||""}return _e.prototype.getAxis=function(_){return this._axes[_]},_e.prototype.getAxes=function(){return map$1(this._dimList,function(_){return this._axes[_]},this)},_e.prototype.getAxesByScale=function(_){return _=_.toLowerCase(),filter$1(this.getAxes(),function(et){return et.scale.type===_})},_e.prototype.addAxis=function(_){var et=_.dim;this._axes[et]=_,this._dimList.push(et)},_e}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(_e){return _e.type==="interval"||_e.type==="time"}var Cartesian2D=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type="cartesian2d",et.dimensions=cartesian2DDimensions,et}return _.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var et=this.getAxis("x").scale,tt=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(et)||!canCalculateAffineTransform(tt))){var nt=et.getExtent(),it=tt.getExtent(),at=this.dataToPoint([nt[0],it[0]]),ot=this.dataToPoint([nt[1],it[1]]),st=nt[1]-nt[0],dt=it[1]-it[0];if(!(!st||!dt)){var ht=(ot[0]-at[0])/st,ct=(ot[1]-at[1])/dt,ut=at[0]-nt[0]*ht,ft=at[1]-it[0]*ct,gt=this._transform=[ht,0,0,ct,ut,ft];this._invTransform=invert([],gt)}}},_.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},_.prototype.containPoint=function(et){var tt=this.getAxis("x"),nt=this.getAxis("y");return tt.contain(tt.toLocalCoord(et[0]))&&nt.contain(nt.toLocalCoord(et[1]))},_.prototype.containData=function(et){return this.getAxis("x").containData(et[0])&&this.getAxis("y").containData(et[1])},_.prototype.containZone=function(et,tt){var nt=this.dataToPoint(et),it=this.dataToPoint(tt),at=this.getArea(),ot=new BoundingRect(nt[0],nt[1],it[0]-nt[0],it[1]-nt[1]);return at.intersect(ot)},_.prototype.dataToPoint=function(et,tt,nt){nt=nt||[];var it=et[0],at=et[1];if(this._transform&&it!=null&&isFinite(it)&&at!=null&&isFinite(at))return applyTransform$1(nt,et,this._transform);var ot=this.getAxis("x"),st=this.getAxis("y");return nt[0]=ot.toGlobalCoord(ot.dataToCoord(it,tt)),nt[1]=st.toGlobalCoord(st.dataToCoord(at,tt)),nt},_.prototype.clampData=function(et,tt){var nt=this.getAxis("x").scale,it=this.getAxis("y").scale,at=nt.getExtent(),ot=it.getExtent(),st=nt.parse(et[0]),dt=it.parse(et[1]);return tt=tt||[],tt[0]=Math.min(Math.max(Math.min(at[0],at[1]),st),Math.max(at[0],at[1])),tt[1]=Math.min(Math.max(Math.min(ot[0],ot[1]),dt),Math.max(ot[0],ot[1])),tt},_.prototype.pointToData=function(et,tt){var nt=[];if(this._invTransform)return applyTransform$1(nt,et,this._invTransform);var it=this.getAxis("x"),at=this.getAxis("y");return nt[0]=it.coordToData(it.toLocalCoord(et[0]),tt),nt[1]=at.coordToData(at.toLocalCoord(et[1]),tt),nt},_.prototype.getOtherAxis=function(et){return this.getAxis(et.dim==="x"?"y":"x")},_.prototype.getArea=function(et){et=et||0;var tt=this.getAxis("x").getGlobalExtent(),nt=this.getAxis("y").getGlobalExtent(),it=Math.min(tt[0],tt[1])-et,at=Math.min(nt[0],nt[1])-et,ot=Math.max(tt[0],tt[1])-it+et,st=Math.max(nt[0],nt[1])-at+et;return new BoundingRect(it,at,ot,st)},_}(Cartesian),Axis2D=function(_e){__extends$1(_,_e);function _(et,tt,nt,it,at){var ot=_e.call(this,et,tt,nt)||this;return ot.index=0,ot.type=it||"value",ot.position=at||"bottom",ot}return _.prototype.isHorizontal=function(){var et=this.position;return et==="top"||et==="bottom"},_.prototype.getGlobalExtent=function(et){var tt=this.getExtent();return tt[0]=this.toGlobalCoord(tt[0]),tt[1]=this.toGlobalCoord(tt[1]),et&&tt[0]>tt[1]&&tt.reverse(),tt},_.prototype.pointToData=function(et,tt){return this.coordToData(this.toLocalCoord(et[this.dim==="x"?0:1]),tt)},_.prototype.setCategorySortInfo=function(et){if(this.type!=="category")return!1;this.model.option.categorySortInfo=et,this.scale.setSortInfo(et)},_}(Axis);function layout$3(_e,_,et){et=et||{};var tt=_e.coordinateSystem,nt=_.axis,it={},at=nt.getAxesOnZeroOf()[0],ot=nt.position,st=at?"onZero":ot,dt=nt.dim,ht=tt.getRect(),ct=[ht.x,ht.x+ht.width,ht.y,ht.y+ht.height],ut={left:0,right:1,top:0,bottom:1,onZero:2},ft=_.get("offset")||0,gt=dt==="x"?[ct[2]-ft,ct[3]+ft]:[ct[0]-ft,ct[1]+ft];if(at){var mt=at.toGlobalCoord(at.dataToCoord(0));gt[ut.onZero]=Math.max(Math.min(mt,gt[1]),gt[0])}it.position=[dt==="y"?gt[ut[st]]:ct[0],dt==="x"?gt[ut[st]]:ct[3]],it.rotation=Math.PI/2*(dt==="x"?0:1);var vt={top:-1,bottom:1,left:-1,right:1};it.labelDirection=it.tickDirection=it.nameDirection=vt[ot],it.labelOffset=at?gt[ut[ot]]-gt[ut.onZero]:0,_.get(["axisTick","inside"])&&(it.tickDirection=-it.tickDirection),retrieve(et.labelInside,_.get(["axisLabel","inside"]))&&(it.labelDirection=-it.labelDirection);var yt=_.get(["axisLabel","rotate"]);return it.labelRotate=st==="top"?-yt:yt,it.z2=1,it}function isCartesian2DSeries(_e){return _e.get("coordinateSystem")==="cartesian2d"}function findAxisModels(_e){var _={xAxisModel:null,yAxisModel:null};return each$f(_,function(et,tt){var nt=tt.replace(/Model$/,""),it=_e.getReferringComponents(nt,SINGLE_REFERRING).models[0];_[tt]=it}),_}var mathLog=Math.log;function alignScaleTicks(_e,_,et){var tt=IntervalScale.prototype,nt=tt.getTicks.call(et),it=tt.getTicks.call(et,!0),at=nt.length-1,ot=tt.getInterval.call(et),st=getScaleExtent(_e,_),dt=st.extent,ht=st.fixMin,ct=st.fixMax;if(_e.type==="log"){var ut=mathLog(_e.base);dt=[mathLog(dt[0])/ut,mathLog(dt[1])/ut]}_e.setExtent(dt[0],dt[1]),_e.calcNiceExtent({splitNumber:at,fixMin:ht,fixMax:ct});var ft=tt.getExtent.call(_e);ht&&(dt[0]=ft[0]),ct&&(dt[1]=ft[1]);var gt=tt.getInterval.call(_e),mt=dt[0],vt=dt[1];if(ht&&ct)gt=(vt-mt)/at;else if(ht)for(vt=dt[0]+gt*at;vt<dt[1]&&isFinite(vt)&&isFinite(dt[1]);)gt=increaseInterval(gt),vt=dt[0]+gt*at;else if(ct)for(mt=dt[1]-gt*at;mt>dt[0]&&isFinite(mt)&&isFinite(dt[0]);)gt=increaseInterval(gt),mt=dt[1]-gt*at;else{var yt=_e.getTicks().length-1;yt>at&&(gt=increaseInterval(gt));var bt=gt*at;vt=Math.ceil(dt[1]/gt)*gt,mt=round$3(vt-bt),mt<0&&dt[0]>=0?(mt=0,vt=round$3(bt)):vt>0&&dt[1]<=0&&(vt=0,mt=-round$3(bt))}var _t=(nt[0].value-it[0].value)/ot,xt=(nt[at].value-it[at].value)/ot;tt.setExtent.call(_e,mt+gt*_t,vt+gt*xt),tt.setInterval.call(_e,gt),(_t||xt)&&tt.setNiceExtent.call(_e,mt+gt,vt-gt)}var Grid=function(){function _e(_,et,tt){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(_,et,tt),this.model=_}return _e.prototype.getRect=function(){return this._rect},_e.prototype.update=function(_,et){var tt=this._axesMap;this._updateScale(_,this.model);function nt(at){var ot,st=keys(at),dt=st.length;if(dt){for(var ht=[],ct=dt-1;ct>=0;ct--){var ut=+st[ct],ft=at[ut],gt=ft.model,mt=ft.scale;isIntervalOrLogScale(mt)&&gt.get("alignTicks")&&gt.get("interval")==null?ht.push(ft):(niceScaleExtent(mt,gt),isIntervalOrLogScale(mt)&&(ot=ft))}ht.length&&(ot||(ot=ht.pop(),niceScaleExtent(ot.scale,ot.model)),each$f(ht,function(vt){alignScaleTicks(vt.scale,vt.model,ot.scale)}))}}nt(tt.x),nt(tt.y);var it={};each$f(tt.x,function(at){fixAxisOnZero(tt,"y",at,it)}),each$f(tt.y,function(at){fixAxisOnZero(tt,"x",at,it)}),this.resize(this.model,et)},_e.prototype.resize=function(_,et,tt){var nt=_.getBoxLayoutParams(),it=!tt&&_.get("containLabel"),at=getLayoutRect(nt,{width:et.getWidth(),height:et.getHeight()});this._rect=at;var ot=this._axesList;st(),it&&(each$f(ot,function(dt){if(!dt.model.get(["axisLabel","inside"])){var ht=estimateLabelUnionRect(dt);if(ht){var ct=dt.isHorizontal()?"height":"width",ut=dt.model.get(["axisLabel","margin"]);at[ct]-=ht[ct]+ut,dt.position==="top"?at.y+=ht.height+ut:dt.position==="left"&&(at.x+=ht.width+ut)}}}),st()),each$f(this._coordsList,function(dt){dt.calcAffineTransform()});function st(){each$f(ot,function(dt){var ht=dt.isHorizontal(),ct=ht?[0,at.width]:[0,at.height],ut=dt.inverse?1:0;dt.setExtent(ct[ut],ct[1-ut]),updateAxisTransform(dt,ht?at.x:at.y)})}},_e.prototype.getAxis=function(_,et){var tt=this._axesMap[_];if(tt!=null)return tt[et||0]},_e.prototype.getAxes=function(){return this._axesList.slice()},_e.prototype.getCartesian=function(_,et){if(_!=null&&et!=null){var tt="x"+_+"y"+et;return this._coordsMap[tt]}isObject$4(_)&&(et=_.yAxisIndex,_=_.xAxisIndex);for(var nt=0,it=this._coordsList;nt<it.length;nt++)if(it[nt].getAxis("x").index===_||it[nt].getAxis("y").index===et)return it[nt]},_e.prototype.getCartesians=function(){return this._coordsList.slice()},_e.prototype.convertToPixel=function(_,et,tt){var nt=this._findConvertTarget(et);return nt.cartesian?nt.cartesian.dataToPoint(tt):nt.axis?nt.axis.toGlobalCoord(nt.axis.dataToCoord(tt)):null},_e.prototype.convertFromPixel=function(_,et,tt){var nt=this._findConvertTarget(et);return nt.cartesian?nt.cartesian.pointToData(tt):nt.axis?nt.axis.coordToData(nt.axis.toLocalCoord(tt)):null},_e.prototype._findConvertTarget=function(_){var et=_.seriesModel,tt=_.xAxisModel||et&&et.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],nt=_.yAxisModel||et&&et.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],it=_.gridModel,at=this._coordsList,ot,st;if(et)ot=et.coordinateSystem,indexOf(at,ot)<0&&(ot=null);else if(tt&&nt)ot=this.getCartesian(tt.componentIndex,nt.componentIndex);else if(tt)st=this.getAxis("x",tt.componentIndex);else if(nt)st=this.getAxis("y",nt.componentIndex);else if(it){var dt=it.coordinateSystem;dt===this&&(ot=this._coordsList[0])}return{cartesian:ot,axis:st}},_e.prototype.containPoint=function(_){var et=this._coordsList[0];if(et)return et.containPoint(_)},_e.prototype._initCartesian=function(_,et,tt){var nt=this,it=this,at={left:!1,right:!1,top:!1,bottom:!1},ot={x:{},y:{}},st={x:0,y:0};if(et.eachComponent("xAxis",dt("x"),this),et.eachComponent("yAxis",dt("y"),this),!st.x||!st.y){this._axesMap={},this._axesList=[];return}this._axesMap=ot,each$f(ot.x,function(ht,ct){each$f(ot.y,function(ut,ft){var gt="x"+ct+"y"+ft,mt=new Cartesian2D(gt);mt.master=nt,mt.model=_,nt._coordsMap[gt]=mt,nt._coordsList.push(mt),mt.addAxis(ht),mt.addAxis(ut)})});function dt(ht){return function(ct,ut){if(isAxisUsedInTheGrid(ct,_)){var ft=ct.get("position");ht==="x"?ft!=="top"&&ft!=="bottom"&&(ft=at.bottom?"top":"bottom"):ft!=="left"&&ft!=="right"&&(ft=at.left?"right":"left"),at[ft]=!0;var gt=new Axis2D(ht,createScaleByModel$1(ct),[0,0],ct.get("type"),ft),mt=gt.type==="category";gt.onBand=mt&&ct.get("boundaryGap"),gt.inverse=ct.get("inverse"),ct.axis=gt,gt.model=ct,gt.grid=it,gt.index=ut,it._axesList.push(gt),ot[ht][ut]=gt,st[ht]++}}}},_e.prototype._updateScale=function(_,et){each$f(this._axesList,function(nt){if(nt.scale.setExtent(1/0,-1/0),nt.type==="category"){var it=nt.model.get("categorySortInfo");nt.scale.setSortInfo(it)}}),_.eachSeries(function(nt){if(isCartesian2DSeries(nt)){var it=findAxisModels(nt),at=it.xAxisModel,ot=it.yAxisModel;if(!isAxisUsedInTheGrid(at,et)||!isAxisUsedInTheGrid(ot,et))return;var st=this.getCartesian(at.componentIndex,ot.componentIndex),dt=nt.getData(),ht=st.getAxis("x"),ct=st.getAxis("y");tt(dt,ht),tt(dt,ct)}},this);function tt(nt,it){each$f(getDataDimensionsOnAxis(nt,it.dim),function(at){it.scale.unionExtentFromData(nt,at)})}},_e.prototype.getTooltipAxes=function(_){var et=[],tt=[];return each$f(this.getCartesians(),function(nt){var it=_!=null&&_!=="auto"?nt.getAxis(_):nt.getBaseAxis(),at=nt.getOtherAxis(it);indexOf(et,it)<0&&et.push(it),indexOf(tt,at)<0&&tt.push(at)}),{baseAxes:et,otherAxes:tt}},_e.create=function(_,et){var tt=[];return _.eachComponent("grid",function(nt,it){var at=new _e(nt,_,et);at.name="grid_"+it,at.resize(nt,et,!0),nt.coordinateSystem=at,tt.push(at)}),_.eachSeries(function(nt){if(isCartesian2DSeries(nt)){var it=findAxisModels(nt),at=it.xAxisModel,ot=it.yAxisModel,st=at.getCoordSysModel(),dt=st.coordinateSystem;nt.coordinateSystem=dt.getCartesian(at.componentIndex,ot.componentIndex)}}),tt},_e.dimensions=cartesian2DDimensions,_e}();function isAxisUsedInTheGrid(_e,_){return _e.getCoordSysModel()===_}function fixAxisOnZero(_e,_,et,tt){et.getAxesOnZeroOf=function(){return it?[it]:[]};var nt=_e[_],it,at=et.model,ot=at.get(["axisLine","onZero"]),st=at.get(["axisLine","onZeroAxisIndex"]);if(!ot)return;if(st!=null)canOnZeroToAxis(nt[st])&&(it=nt[st]);else for(var dt in nt)if(nt.hasOwnProperty(dt)&&canOnZeroToAxis(nt[dt])&&!tt[ht(nt[dt])]){it=nt[dt];break}it&&(tt[ht(it)]=!0);function ht(ct){return ct.dim+"_"+ct.index}}function canOnZeroToAxis(_e){return _e&&_e.type!=="category"&&_e.type!=="time"&&ifAxisCrossZero(_e)}function updateAxisTransform(_e,_){var et=_e.getExtent(),tt=et[0]+et[1];_e.toGlobalCoord=_e.dim==="x"?function(nt){return nt+_}:function(nt){return tt-nt+_},_e.toLocalCoord=_e.dim==="x"?function(nt){return nt-_}:function(nt){return tt-nt+_}}var PI$3=Math.PI,AxisBuilder=function(){function _e(_,et){this.group=new Group$3,this.opt=et,this.axisModel=_,defaults(et,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var tt=new Group$3({x:et.position[0],y:et.position[1],rotation:et.rotation});tt.updateTransform(),this._transformGroup=tt}return _e.prototype.hasBuilder=function(_){return!!builders[_]},_e.prototype.add=function(_){builders[_](this.opt,this.axisModel,this.group,this._transformGroup)},_e.prototype.getGroup=function(){return this.group},_e.innerTextLayout=function(_,et,tt){var nt=remRadian(et-_),it,at;return isRadianAroundZero(nt)?(at=tt>0?"top":"bottom",it="center"):isRadianAroundZero(nt-PI$3)?(at=tt>0?"bottom":"top",it="center"):(at="middle",nt>0&&nt<PI$3?it=tt>0?"right":"left":it=tt>0?"left":"right"),{rotation:nt,textAlign:it,textVerticalAlign:at}},_e.makeAxisEventDataBase=function(_){var et={componentType:_.mainType,componentIndex:_.componentIndex};return et[_.mainType+"Index"]=_.componentIndex,et},_e.isLabelSilent=function(_){var et=_.get("tooltip");return _.get("silent")||!(_.get("triggerEvent")||et&&et.show)},_e}(),builders={axisLine:function(_e,_,et,tt){var nt=_.get(["axisLine","show"]);if(nt==="auto"&&_e.handleAutoShown&&(nt=_e.handleAutoShown("axisLine")),!!nt){var it=_.axis.getExtent(),at=tt.transform,ot=[it[0],0],st=[it[1],0],dt=ot[0]>st[0];at&&(applyTransform$1(ot,ot,at),applyTransform$1(st,st,at));var ht=extend({lineCap:"round"},_.getModel(["axisLine","lineStyle"]).getLineStyle()),ct=new Line$1({shape:{x1:ot[0],y1:ot[1],x2:st[0],y2:st[1]},style:ht,strokeContainThreshold:_e.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(ct.shape,ct.style.lineWidth),ct.anid="line",et.add(ct);var ut=_.get(["axisLine","symbol"]);if(ut!=null){var ft=_.get(["axisLine","symbolSize"]);isString$1(ut)&&(ut=[ut,ut]),(isString$1(ft)||isNumber(ft))&&(ft=[ft,ft]);var gt=normalizeSymbolOffset(_.get(["axisLine","symbolOffset"])||0,ft),mt=ft[0],vt=ft[1];each$f([{rotate:_e.rotation+Math.PI/2,offset:gt[0],r:0},{rotate:_e.rotation-Math.PI/2,offset:gt[1],r:Math.sqrt((ot[0]-st[0])*(ot[0]-st[0])+(ot[1]-st[1])*(ot[1]-st[1]))}],function(yt,bt){if(ut[bt]!=="none"&&ut[bt]!=null){var _t=createSymbol$1(ut[bt],-mt/2,-vt/2,mt,vt,ht.stroke,!0),xt=yt.r+yt.offset,St=dt?st:ot;_t.attr({rotation:yt.rotate,x:St[0]+xt*Math.cos(_e.rotation),y:St[1]-xt*Math.sin(_e.rotation),silent:!0,z2:11}),et.add(_t)}})}}},axisTickLabel:function(_e,_,et,tt){var nt=buildAxisMajorTicks(et,tt,_,_e),it=buildAxisLabel(et,tt,_,_e);if(fixMinMaxLabelShow(_,it,nt),buildAxisMinorTicks(et,tt,_,_e.tickDirection),_.get(["axisLabel","hideOverlap"])){var at=prepareLayoutList(map$1(it,function(ot){return{label:ot,priority:ot.z2,defaultAttr:{ignore:ot.ignore}}}));hideOverlap(at)}},axisName:function(_e,_,et,tt){var nt=retrieve(_e.axisName,_.get("name"));if(nt){var it=_.get("nameLocation"),at=_e.nameDirection,ot=_.getModel("nameTextStyle"),st=_.get("nameGap")||0,dt=_.axis.getExtent(),ht=dt[0]>dt[1]?-1:1,ct=[it==="start"?dt[0]-ht*st:it==="end"?dt[1]+ht*st:(dt[0]+dt[1])/2,isNameLocationCenter(it)?_e.labelOffset+at*st:0],ut,ft=_.get("nameRotate");ft!=null&&(ft=ft*PI$3/180);var gt;isNameLocationCenter(it)?ut=AxisBuilder.innerTextLayout(_e.rotation,ft??_e.rotation,at):(ut=endTextLayout(_e.rotation,it,ft||0,dt),gt=_e.axisNameAvailableWidth,gt!=null&&(gt=Math.abs(gt/Math.sin(ut.rotation)),!isFinite(gt)&&(gt=null)));var mt=ot.getFont(),vt=_.get("nameTruncate",!0)||{},yt=vt.ellipsis,bt=retrieve(_e.nameTruncateMaxWidth,vt.maxWidth,gt),_t=new ZRText({x:ct[0],y:ct[1],rotation:ut.rotation,silent:AxisBuilder.isLabelSilent(_),style:createTextStyle$1(ot,{text:nt,font:mt,overflow:"truncate",width:bt,ellipsis:yt,fill:ot.getTextColor()||_.get(["axisLine","lineStyle","color"]),align:ot.get("align")||ut.textAlign,verticalAlign:ot.get("verticalAlign")||ut.textVerticalAlign}),z2:1});if(setTooltipConfig({el:_t,componentModel:_,itemName:nt}),_t.__fullText=nt,_t.anid="name",_.get("triggerEvent")){var xt=AxisBuilder.makeAxisEventDataBase(_);xt.targetType="axisName",xt.name=nt,getECData(_t).eventData=xt}tt.add(_t),_t.updateTransform(),et.add(_t),_t.decomposeTransform()}}};function endTextLayout(_e,_,et,tt){var nt=remRadian(et-_e),it,at,ot=tt[0]>tt[1],st=_==="start"&&!ot||_!=="start"&&ot;return isRadianAroundZero(nt-PI$3/2)?(at=st?"bottom":"top",it="center"):isRadianAroundZero(nt-PI$3*1.5)?(at=st?"top":"bottom",it="center"):(at="middle",nt<PI$3*1.5&&nt>PI$3/2?it=st?"left":"right":it=st?"right":"left"),{rotation:nt,textAlign:it,textVerticalAlign:at}}function fixMinMaxLabelShow(_e,_,et){if(!shouldShowAllLabels(_e.axis)){var tt=_e.get(["axisLabel","showMinLabel"]),nt=_e.get(["axisLabel","showMaxLabel"]);_=_||[],et=et||[];var it=_[0],at=_[1],ot=_[_.length-1],st=_[_.length-2],dt=et[0],ht=et[1],ct=et[et.length-1],ut=et[et.length-2];tt===!1?(ignoreEl(it),ignoreEl(dt)):isTwoLabelOverlapped(it,at)&&(tt?(ignoreEl(at),ignoreEl(ht)):(ignoreEl(it),ignoreEl(dt))),nt===!1?(ignoreEl(ot),ignoreEl(ct)):isTwoLabelOverlapped(st,ot)&&(nt?(ignoreEl(st),ignoreEl(ut)):(ignoreEl(ot),ignoreEl(ct)))}}function ignoreEl(_e){_e&&(_e.ignore=!0)}function isTwoLabelOverlapped(_e,_){var et=_e&&_e.getBoundingRect().clone(),tt=_&&_.getBoundingRect().clone();if(!(!et||!tt)){var nt=identity([]);return rotate(nt,nt,-_e.rotation),et.applyTransform(mul([],nt,_e.getLocalTransform())),tt.applyTransform(mul([],nt,_.getLocalTransform())),et.intersect(tt)}}function isNameLocationCenter(_e){return _e==="middle"||_e==="center"}function createTicks(_e,_,et,tt,nt){for(var it=[],at=[],ot=[],st=0;st<_e.length;st++){var dt=_e[st].coord;at[0]=dt,at[1]=0,ot[0]=dt,ot[1]=et,_&&(applyTransform$1(at,at,_),applyTransform$1(ot,ot,_));var ht=new Line$1({shape:{x1:at[0],y1:at[1],x2:ot[0],y2:ot[1]},style:tt,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(ht.shape,ht.style.lineWidth),ht.anid=nt+"_"+_e[st].tickValue,it.push(ht)}return it}function buildAxisMajorTicks(_e,_,et,tt){var nt=et.axis,it=et.getModel("axisTick"),at=it.get("show");if(at==="auto"&&tt.handleAutoShown&&(at=tt.handleAutoShown("axisTick")),!(!at||nt.scale.isBlank())){for(var ot=it.getModel("lineStyle"),st=tt.tickDirection*it.get("length"),dt=nt.getTicksCoords(),ht=createTicks(dt,_.transform,st,defaults(ot.getLineStyle(),{stroke:et.get(["axisLine","lineStyle","color"])}),"ticks"),ct=0;ct<ht.length;ct++)_e.add(ht[ct]);return ht}}function buildAxisMinorTicks(_e,_,et,tt){var nt=et.axis,it=et.getModel("minorTick");if(!(!it.get("show")||nt.scale.isBlank())){var at=nt.getMinorTicksCoords();if(at.length)for(var ot=it.getModel("lineStyle"),st=tt*it.get("length"),dt=defaults(ot.getLineStyle(),defaults(et.getModel("axisTick").getLineStyle(),{stroke:et.get(["axisLine","lineStyle","color"])})),ht=0;ht<at.length;ht++)for(var ct=createTicks(at[ht],_.transform,st,dt,"minorticks_"+ht),ut=0;ut<ct.length;ut++)_e.add(ct[ut])}}function buildAxisLabel(_e,_,et,tt){var nt=et.axis,it=retrieve(tt.axisLabelShow,et.get(["axisLabel","show"]));if(!(!it||nt.scale.isBlank())){var at=et.getModel("axisLabel"),ot=at.get("margin"),st=nt.getViewLabels(),dt=(retrieve(tt.labelRotate,at.get("rotate"))||0)*PI$3/180,ht=AxisBuilder.innerTextLayout(tt.rotation,dt,tt.labelDirection),ct=et.getCategories&&et.getCategories(!0),ut=[],ft=AxisBuilder.isLabelSilent(et),gt=et.get("triggerEvent");return each$f(st,function(mt,vt){var yt=nt.scale.type==="ordinal"?nt.scale.getRawOrdinalNumber(mt.tickValue):mt.tickValue,bt=mt.formattedLabel,_t=mt.rawLabel,xt=at;if(ct&&ct[yt]){var St=ct[yt];isObject$4(St)&&St.textStyle&&(xt=new Model(St.textStyle,at,et.ecModel))}var Tt=xt.getTextColor()||et.get(["axisLine","lineStyle","color"]),wt=nt.dataToCoord(yt),Ct=xt.getShallow("align",!0)||ht.textAlign,Et=retrieve2(xt.getShallow("alignMinLabel",!0),Ct),At=retrieve2(xt.getShallow("alignMaxLabel",!0),Ct),Pt=xt.getShallow("verticalAlign",!0)||xt.getShallow("baseline",!0)||ht.textVerticalAlign,Rt=retrieve2(xt.getShallow("verticalAlignMinLabel",!0),Pt),It=retrieve2(xt.getShallow("verticalAlignMaxLabel",!0),Pt),Mt=new ZRText({x:wt,y:tt.labelOffset+tt.labelDirection*ot,rotation:ht.rotation,silent:ft,z2:10+(mt.level||0),style:createTextStyle$1(xt,{text:bt,align:vt===0?Et:vt===st.length-1?At:Ct,verticalAlign:vt===0?Rt:vt===st.length-1?It:Pt,fill:isFunction$3(Tt)?Tt(nt.type==="category"?_t:nt.type==="value"?yt+"":yt,vt):Tt})});if(Mt.anid="label_"+yt,setTooltipConfig({el:Mt,componentModel:et,itemName:bt,formatterParamsExtra:{isTruncated:function(){return Mt.isTruncated},value:_t,tickIndex:vt}}),gt){var Ot=AxisBuilder.makeAxisEventDataBase(et);Ot.targetType="axisLabel",Ot.value=_t,Ot.tickIndex=vt,nt.type==="category"&&(Ot.dataIndex=yt),getECData(Mt).eventData=Ot}_.add(Mt),Mt.updateTransform(),ut.push(Mt),_e.add(Mt),Mt.decomposeTransform()}),ut}}function collect(_e,_){var et={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(et,_e,_),et.seriesInvolved&&collectSeriesInfo(et,_e),et}function collectAxesInfo(_e,_,et){var tt=_.getComponent("tooltip"),nt=_.getComponent("axisPointer"),it=nt.get("link",!0)||[],at=[];each$f(et.getCoordinateSystems(),function(ot){if(!ot.axisPointerEnabled)return;var st=makeKey(ot.model),dt=_e.coordSysAxesInfo[st]={};_e.coordSysMap[st]=ot;var ht=ot.model,ct=ht.getModel("tooltip",tt);if(each$f(ot.getAxes(),curry$1(mt,!1,null)),ot.getTooltipAxes&&tt&&ct.get("show")){var ut=ct.get("trigger")==="axis",ft=ct.get(["axisPointer","type"])==="cross",gt=ot.getTooltipAxes(ct.get(["axisPointer","axis"]));(ut||ft)&&each$f(gt.baseAxes,curry$1(mt,ft?"cross":!0,ut)),ft&&each$f(gt.otherAxes,curry$1(mt,"cross",!1))}function mt(vt,yt,bt){var _t=bt.model.getModel("axisPointer",nt),xt=_t.get("show");if(!(!xt||xt==="auto"&&!vt&&!isHandleTrigger(_t))){yt==null&&(yt=_t.get("triggerTooltip")),_t=vt?makeAxisPointerModel(bt,ct,nt,_,vt,yt):_t;var St=_t.get("snap"),Tt=_t.get("triggerEmphasis"),wt=makeKey(bt.model),Ct=yt||St||bt.type==="category",Et=_e.axesInfo[wt]={key:wt,axis:bt,coordSys:ot,axisPointerModel:_t,triggerTooltip:yt,triggerEmphasis:Tt,involveSeries:Ct,snap:St,useHandle:isHandleTrigger(_t),seriesModels:[],linkGroup:null};dt[wt]=Et,_e.seriesInvolved=_e.seriesInvolved||Ct;var At=getLinkGroupIndex(it,bt);if(At!=null){var Pt=at[At]||(at[At]={axesInfo:{}});Pt.axesInfo[wt]=Et,Pt.mapper=it[At].mapper,Et.linkGroup=Pt}}}})}function makeAxisPointerModel(_e,_,et,tt,nt,it){var at=_.getModel("axisPointer"),ot=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],st={};each$f(ot,function(ut){st[ut]=clone$4(at.get(ut))}),st.snap=_e.type!=="category"&&!!it,at.get("type")==="cross"&&(st.type="line");var dt=st.label||(st.label={});if(dt.show==null&&(dt.show=!1),nt==="cross"){var ht=at.get(["label","show"]);if(dt.show=ht??!0,!it){var ct=st.lineStyle=at.get("crossStyle");ct&&defaults(dt,ct.textStyle)}}return _e.model.getModel("axisPointer",new Model(st,et,tt))}function collectSeriesInfo(_e,_){_.eachSeries(function(et){var tt=et.coordinateSystem,nt=et.get(["tooltip","trigger"],!0),it=et.get(["tooltip","show"],!0);!tt||nt==="none"||nt===!1||nt==="item"||it===!1||et.get(["axisPointer","show"],!0)===!1||each$f(_e.coordSysAxesInfo[makeKey(tt.model)],function(at){var ot=at.axis;tt.getAxis(ot.dim)===ot&&(at.seriesModels.push(et),at.seriesDataCount==null&&(at.seriesDataCount=0),at.seriesDataCount+=et.getData().count())})})}function getLinkGroupIndex(_e,_){for(var et=_.model,tt=_.dim,nt=0;nt<_e.length;nt++){var it=_e[nt]||{};if(checkPropInLink(it[tt+"AxisId"],et.id)||checkPropInLink(it[tt+"AxisIndex"],et.componentIndex)||checkPropInLink(it[tt+"AxisName"],et.name))return nt}}function checkPropInLink(_e,_){return _e==="all"||isArray$1(_e)&&indexOf(_e,_)>=0||_e===_}function fixValue(_e){var _=getAxisInfo$1(_e);if(_){var et=_.axisPointerModel,tt=_.axis.scale,nt=et.option,it=et.get("status"),at=et.get("value");at!=null&&(at=tt.parse(at));var ot=isHandleTrigger(et);it==null&&(nt.status=ot?"show":"hide");var st=tt.getExtent().slice();st[0]>st[1]&&st.reverse(),(at==null||at>st[1])&&(at=st[1]),at<st[0]&&(at=st[0]),nt.value=at,ot&&(nt.status=_.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(_e){var _=(_e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return _&&_.axesInfo[makeKey(_e)]}function getAxisPointerModel(_e){var _=getAxisInfo$1(_e);return _&&_.axisPointerModel}function isHandleTrigger(_e){return!!_e.get(["handle","show"])}function makeKey(_e){return _e.type+"||"+_e.id}var axisPointerClazz={},AxisView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt,it){this.axisPointerClass&&fixValue(et),_e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(et,nt,!0)},_.prototype.updateAxisPointer=function(et,tt,nt,it){this._doUpdateAxisPointerClass(et,nt,!1)},_.prototype.remove=function(et,tt){var nt=this._axisPointer;nt&&nt.remove(tt)},_.prototype.dispose=function(et,tt){this._disposeAxisPointer(tt),_e.prototype.dispose.apply(this,arguments)},_.prototype._doUpdateAxisPointerClass=function(et,tt,nt){var it=_.getAxisPointerClass(this.axisPointerClass);if(it){var at=getAxisPointerModel(et);at?(this._axisPointer||(this._axisPointer=new it)).render(et,at,tt,nt):this._disposeAxisPointer(tt)}},_.prototype._disposeAxisPointer=function(et){this._axisPointer&&this._axisPointer.dispose(et),this._axisPointer=null},_.registerAxisPointerClass=function(et,tt){axisPointerClazz[et]=tt},_.getAxisPointerClass=function(et){return et&&axisPointerClazz[et]},_.type="axis",_}(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(_e,_,et,tt){var nt=et.axis;if(!nt.scale.isBlank()){var it=et.getModel("splitArea"),at=it.getModel("areaStyle"),ot=at.get("color"),st=tt.coordinateSystem.getRect(),dt=nt.getTicksCoords({tickModel:it,clamp:!0});if(dt.length){var ht=ot.length,ct=inner$f(_e).splitAreaColors,ut=createHashMap(),ft=0;if(ct)for(var gt=0;gt<dt.length;gt++){var mt=ct.get(dt[gt].tickValue);if(mt!=null){ft=(mt+(ht-1)*gt)%ht;break}}var vt=nt.toGlobalCoord(dt[0].coord),yt=at.getAreaStyle();ot=isArray$1(ot)?ot:[ot];for(var gt=1;gt<dt.length;gt++){var bt=nt.toGlobalCoord(dt[gt].coord),_t=void 0,xt=void 0,St=void 0,Tt=void 0;nt.isHorizontal()?(_t=vt,xt=st.y,St=bt-_t,Tt=st.height,vt=_t+St):(_t=st.x,xt=vt,St=st.width,Tt=bt-xt,vt=xt+Tt);var wt=dt[gt-1].tickValue;wt!=null&&ut.set(wt,ft),_.add(new Rect$2({anid:wt!=null?"area_"+wt:null,shape:{x:_t,y:xt,width:St,height:Tt},style:defaults({fill:ot[ft]},yt),autoBatch:!0,silent:!0})),ft=(ft+1)%ht}inner$f(_e).splitAreaColors=ut}}}function rectCoordAxisHandleRemove(_e){inner$f(_e).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.axisPointerClass="CartesianAxisPointer",et}return _.prototype.render=function(et,tt,nt,it){this.group.removeAll();var at=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!et.get("show")){var ot=et.getCoordSysModel(),st=layout$3(ot,et),dt=new AxisBuilder(et,extend({handleAutoShown:function(ct){for(var ut=ot.coordinateSystem.getCartesians(),ft=0;ft<ut.length;ft++)if(isIntervalOrLogScale(ut[ft].getOtherAxis(et.axis).scale))return!0;return!1}},st));each$f(axisBuilderAttrs$3,dt.add,dt),this._axisGroup.add(dt.getGroup()),each$f(selfBuilderAttrs$2,function(ct){et.get([ct,"show"])&&axisElementBuilders$2[ct](this,this._axisGroup,et,ot)},this);var ht=it&&it.type==="changeAxisOrder"&&it.isInitSort;ht||groupTransition(at,this._axisGroup,et),_e.prototype.render.call(this,et,tt,nt,it)}},_.prototype.remove=function(){rectCoordAxisHandleRemove(this)},_.type="cartesianAxis",_}(AxisView),axisElementBuilders$2={splitLine:function(_e,_,et,tt){var nt=et.axis;if(!nt.scale.isBlank()){var it=et.getModel("splitLine"),at=it.getModel("lineStyle"),ot=at.get("color"),st=it.get("showMinLine")!==!1,dt=it.get("showMaxLine")!==!1;ot=isArray$1(ot)?ot:[ot];for(var ht=tt.coordinateSystem.getRect(),ct=nt.isHorizontal(),ut=0,ft=nt.getTicksCoords({tickModel:it}),gt=[],mt=[],vt=at.getLineStyle(),yt=0;yt<ft.length;yt++){var bt=nt.toGlobalCoord(ft[yt].coord);if(!(yt===0&&!st||yt===ft.length-1&&!dt)){var _t=ft[yt].tickValue;ct?(gt[0]=bt,gt[1]=ht.y,mt[0]=bt,mt[1]=ht.y+ht.height):(gt[0]=ht.x,gt[1]=bt,mt[0]=ht.x+ht.width,mt[1]=bt);var xt=ut++%ot.length,St=new Line$1({anid:_t!=null?"line_"+_t:null,autoBatch:!0,shape:{x1:gt[0],y1:gt[1],x2:mt[0],y2:mt[1]},style:defaults({stroke:ot[xt]},vt),silent:!0});subPixelOptimizeLine(St.shape,vt.lineWidth),_.add(St)}}}},minorSplitLine:function(_e,_,et,tt){var nt=et.axis,it=et.getModel("minorSplitLine"),at=it.getModel("lineStyle"),ot=tt.coordinateSystem.getRect(),st=nt.isHorizontal(),dt=nt.getMinorTicksCoords();if(dt.length)for(var ht=[],ct=[],ut=at.getLineStyle(),ft=0;ft<dt.length;ft++)for(var gt=0;gt<dt[ft].length;gt++){var mt=nt.toGlobalCoord(dt[ft][gt].coord);st?(ht[0]=mt,ht[1]=ot.y,ct[0]=mt,ct[1]=ot.y+ot.height):(ht[0]=ot.x,ht[1]=mt,ct[0]=ot.x+ot.width,ct[1]=mt);var vt=new Line$1({anid:"minor_line_"+dt[ft][gt].tickValue,autoBatch:!0,shape:{x1:ht[0],y1:ht[1],x2:ct[0],y2:ct[1]},style:ut,silent:!0});subPixelOptimizeLine(vt.shape,ut.lineWidth),_.add(vt)}},splitArea:function(_e,_,et,tt){rectCoordAxisBuildSplitArea(_e,_,et,tt)}},CartesianXAxisView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="xAxis",_}(CartesianAxisView),CartesianYAxisView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=CartesianXAxisView.type,et}return _.type="yAxis",_}(CartesianAxisView),GridView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type="grid",et}return _.prototype.render=function(et,tt){this.group.removeAll(),et.get("show")&&this.group.add(new Rect$2({shape:et.coordinateSystem.getRect(),style:defaults({fill:et.get("backgroundColor")},et.getItemStyle()),silent:!0,z2:-1}))},_.type="grid",_}(ComponentView),extraOption={offset:0};function install$N(_e){_e.registerComponentView(GridView),_e.registerComponentModel(GridModel),_e.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(_e,"x",CartesianAxisModel,extraOption),axisModelCreator(_e,"y",CartesianAxisModel,extraOption),_e.registerComponentView(CartesianXAxisView),_e.registerComponentView(CartesianYAxisView),_e.registerPreprocessor(function(_){_.xAxis&&_.yAxis&&!_.grid&&(_.grid={})})}function install$M(_e){use(install$N),_e.registerSeriesModel(ScatterSeriesModel),_e.registerChartView(ScatterView),_e.registerLayout(pointsLayout("scatter"))}function radarLayout(_e){_e.eachSeriesByType("radar",function(_){var et=_.getData(),tt=[],nt=_.coordinateSystem;if(nt){var it=nt.getIndicatorAxes();each$f(it,function(at,ot){et.each(et.mapDimension(it[ot].dim),function(st,dt){tt[dt]=tt[dt]||[];var ht=nt.dataToPoint(st,ot);tt[dt][ot]=isValidPoint(ht)?ht:getValueMissingPoint(nt)})}),et.each(function(at){var ot=find(tt[at],function(st){return isValidPoint(st)})||getValueMissingPoint(nt);tt[at].push(ot.slice()),et.setItemLayout(at,tt[at])})}})}function isValidPoint(_e){return!isNaN(_e[0])&&!isNaN(_e[1])}function getValueMissingPoint(_e){return[_e.cx,_e.cy]}function radarBackwardCompat(_e){var _=_e.polar;if(_){isArray$1(_)||(_=[_]);var et=[];each$f(_,function(tt,nt){tt.indicator?(tt.type&&!tt.shape&&(tt.shape=tt.type),_e.radar=_e.radar||[],isArray$1(_e.radar)||(_e.radar=[_e.radar]),_e.radar.push(tt)):et.push(tt)}),_e.polar=et}each$f(_e.series,function(tt){tt&&tt.type==="radar"&&tt.polarIndex&&(tt.radarIndex=tt.polarIndex)})}var RadarView$1=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){var it=et.coordinateSystem,at=this.group,ot=et.getData(),st=this._data;function dt(ut,ft){var gt=ut.getItemVisual(ft,"symbol")||"circle";if(gt!=="none"){var mt=normalizeSymbolSize(ut.getItemVisual(ft,"symbolSize")),vt=createSymbol$1(gt,-1,-1,2,2),yt=ut.getItemVisual(ft,"symbolRotate")||0;return vt.attr({style:{strokeNoScale:!0},z2:100,scaleX:mt[0]/2,scaleY:mt[1]/2,rotation:yt*Math.PI/180||0}),vt}}function ht(ut,ft,gt,mt,vt,yt){gt.removeAll();for(var bt=0;bt<ft.length-1;bt++){var _t=dt(mt,vt);_t&&(_t.__dimIdx=bt,ut[bt]?(_t.setPosition(ut[bt]),graphic$1[yt?"initProps":"updateProps"](_t,{x:ft[bt][0],y:ft[bt][1]},et,vt)):_t.setPosition(ft[bt]),gt.add(_t))}}function ct(ut){return map$1(ut,function(ft){return[it.cx,it.cy]})}ot.diff(st).add(function(ut){var ft=ot.getItemLayout(ut);if(ft){var gt=new Polygon,mt=new Polyline$1,vt={shape:{points:ft}};gt.shape.points=ct(ft),mt.shape.points=ct(ft),initProps(gt,vt,et,ut),initProps(mt,vt,et,ut);var yt=new Group$3,bt=new Group$3;yt.add(mt),yt.add(gt),yt.add(bt),ht(mt.shape.points,ft,bt,ot,ut,!0),ot.setItemGraphicEl(ut,yt)}}).update(function(ut,ft){var gt=st.getItemGraphicEl(ft),mt=gt.childAt(0),vt=gt.childAt(1),yt=gt.childAt(2),bt={shape:{points:ot.getItemLayout(ut)}};bt.shape.points&&(ht(mt.shape.points,bt.shape.points,yt,ot,ut,!1),saveOldStyle(vt),saveOldStyle(mt),updateProps$1(mt,bt,et),updateProps$1(vt,bt,et),ot.setItemGraphicEl(ut,gt))}).remove(function(ut){at.remove(st.getItemGraphicEl(ut))}).execute(),ot.eachItemGraphicEl(function(ut,ft){var gt=ot.getItemModel(ft),mt=ut.childAt(0),vt=ut.childAt(1),yt=ut.childAt(2),bt=ot.getItemVisual(ft,"style"),_t=bt.fill;at.add(ut),mt.useStyle(defaults(gt.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:_t})),setStatesStylesFromModel(mt,gt,"lineStyle"),setStatesStylesFromModel(vt,gt,"areaStyle");var xt=gt.getModel("areaStyle"),St=xt.isEmpty()&&xt.parentModel.isEmpty();vt.ignore=St,each$f(["emphasis","select","blur"],function(Ct){var Et=gt.getModel([Ct,"areaStyle"]),At=Et.isEmpty()&&Et.parentModel.isEmpty();vt.ensureState(Ct).ignore=At&&St}),vt.useStyle(defaults(xt.getAreaStyle(),{fill:_t,opacity:.7,decal:bt.decal}));var Tt=gt.getModel("emphasis"),wt=Tt.getModel("itemStyle").getItemStyle();yt.eachChild(function(Ct){if(Ct instanceof ZRImage){var Et=Ct.style;Ct.useStyle(extend({image:Et.image,x:Et.x,y:Et.y,width:Et.width,height:Et.height},bt))}else Ct.useStyle(bt),Ct.setColor(_t),Ct.style.strokeNoScale=!0;var At=Ct.ensureState("emphasis");At.style=clone$4(wt);var Pt=ot.getStore().get(ot.getDimensionIndex(Ct.__dimIdx),ft);(Pt==null||isNaN(Pt))&&(Pt=""),setLabelStyle(Ct,getLabelStatesModels(gt),{labelFetcher:ot.hostModel,labelDataIndex:ft,labelDimIndex:Ct.__dimIdx,defaultText:Pt,inheritColor:_t,defaultOpacity:bt.opacity})}),toggleHoverEmphasis(ut,Tt.get("focus"),Tt.get("blurScope"),Tt.get("disabled"))}),this._data=ot},_.prototype.remove=function(){this.group.removeAll(),this._data=null},_.type="radar",_}(ChartView),RadarSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.hasSymbolVisual=!0,et}return _.prototype.init=function(et){_e.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$2(this.getData,this),bind$2(this.getRawData,this))},_.prototype.getInitialData=function(et,tt){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},_.prototype.formatTooltip=function(et,tt,nt){var it=this.getData(),at=this.coordinateSystem,ot=at.getIndicatorAxes(),st=this.getData().getName(et),dt=st===""?this.name:st,ht=retrieveVisualColorForTooltipMarker(this,et);return createTooltipMarkup("section",{header:dt,sortBlocks:!0,blocks:map$1(ot,function(ct){var ut=it.get(it.mapDimension(ct.dim),et);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:ht,name:ct.name,value:ut,sortParam:ut})})})},_.prototype.getTooltipPosition=function(et){if(et!=null){for(var tt=this.getData(),nt=this.coordinateSystem,it=tt.getValues(map$1(nt.dimensions,function(dt){return tt.mapDimension(dt)}),et),at=0,ot=it.length;at<ot;at++)if(!isNaN(it[at])){var st=nt.getIndicatorAxes();return nt.coordToPoint(st[at].dataToCoord(it[at]),at)}}},_.type="series.radar",_.dependencies=["radar"],_.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},_}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(_e,_){return defaults({show:_},_e)}var RadarModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.optionUpdated=function(){var et=this.get("boundaryGap"),tt=this.get("splitNumber"),nt=this.get("scale"),it=this.get("axisLine"),at=this.get("axisTick"),ot=this.get("axisLabel"),st=this.get("axisName"),dt=this.get(["axisName","show"]),ht=this.get(["axisName","formatter"]),ct=this.get("axisNameGap"),ut=this.get("triggerEvent"),ft=map$1(this.get("indicator")||[],function(gt){gt.max!=null&&gt.max>0&&!gt.min?gt.min=0:gt.min!=null&&gt.min<0&&!gt.max&&(gt.max=0);var mt=st;gt.color!=null&&(mt=defaults({color:gt.color},st));var vt=merge$1(clone$4(gt),{boundaryGap:et,splitNumber:tt,scale:nt,axisLine:it,axisTick:at,axisLabel:ot,name:gt.text,showName:dt,nameLocation:"end",nameGap:ct,nameTextStyle:mt,triggerEvent:ut},!1);if(isString$1(ht)){var yt=vt.name;vt.name=ht.replace("{value}",yt??"")}else isFunction$3(ht)&&(vt.name=ht(vt.name,vt));var bt=new Model(vt,null,this.ecModel);return mixin(bt,AxisModelCommonMixin.prototype),bt.mainType="radar",bt.componentIndex=this.componentIndex,bt},this);this._indicatorModels=ft},_.prototype.getIndicatorModels=function(){return this._indicatorModels},_.type="radar",_.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge$1({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},_}(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){var it=this.group;it.removeAll(),this._buildAxes(et),this._buildSplitLineAndArea(et)},_.prototype._buildAxes=function(et){var tt=et.coordinateSystem,nt=tt.getIndicatorAxes(),it=map$1(nt,function(at){var ot=at.model.get("showName")?at.name:"",st=new AxisBuilder(at.model,{axisName:ot,position:[tt.cx,tt.cy],rotation:at.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return st});each$f(it,function(at){each$f(axisBuilderAttrs$2,at.add,at),this.group.add(at.getGroup())},this)},_.prototype._buildSplitLineAndArea=function(et){var tt=et.coordinateSystem,nt=tt.getIndicatorAxes();if(!nt.length)return;var it=et.get("shape"),at=et.getModel("splitLine"),ot=et.getModel("splitArea"),st=at.getModel("lineStyle"),dt=ot.getModel("areaStyle"),ht=at.get("show"),ct=ot.get("show"),ut=st.get("color"),ft=dt.get("color"),gt=isArray$1(ut)?ut:[ut],mt=isArray$1(ft)?ft:[ft],vt=[],yt=[];function bt(Ot,$t,Lt){var kt=Lt%$t.length;return Ot[kt]=Ot[kt]||[],kt}if(it==="circle")for(var _t=nt[0].getTicksCoords(),xt=tt.cx,St=tt.cy,Tt=0;Tt<_t.length;Tt++){if(ht){var wt=bt(vt,gt,Tt);vt[wt].push(new Circle({shape:{cx:xt,cy:St,r:_t[Tt].coord}}))}if(ct&&Tt<_t.length-1){var wt=bt(yt,mt,Tt);yt[wt].push(new Ring({shape:{cx:xt,cy:St,r0:_t[Tt].coord,r:_t[Tt+1].coord}}))}}else for(var Ct,Et=map$1(nt,function(Ot,$t){var Lt=Ot.getTicksCoords();return Ct=Ct==null?Lt.length-1:Math.min(Lt.length-1,Ct),map$1(Lt,function(kt){return tt.coordToPoint(kt.coord,$t)})}),At=[],Tt=0;Tt<=Ct;Tt++){for(var Pt=[],Rt=0;Rt<nt.length;Rt++)Pt.push(Et[Rt][Tt]);if(Pt[0]&&Pt.push(Pt[0].slice()),ht){var wt=bt(vt,gt,Tt);vt[wt].push(new Polyline$1({shape:{points:Pt}}))}if(ct&&At){var wt=bt(yt,mt,Tt-1);yt[wt].push(new Polygon({shape:{points:Pt.concat(At)}}))}At=Pt.slice().reverse()}var It=st.getLineStyle(),Mt=dt.getAreaStyle();each$f(yt,function(Ot,$t){this.group.add(mergePath(Ot,{style:defaults({stroke:"none",fill:mt[$t%mt.length]},Mt),silent:!0}))},this),each$f(vt,function(Ot,$t){this.group.add(mergePath(Ot,{style:defaults({fill:"none",stroke:gt[$t%gt.length]},It),silent:!0}))},this)},_.type="radar",_}(ComponentView),IndicatorAxis=function(_e){__extends$1(_,_e);function _(et,tt,nt){var it=_e.call(this,et,tt,nt)||this;return it.type="value",it.angle=0,it.name="",it}return _}(Axis),Radar=function(){function _e(_,et,tt){this.dimensions=[],this._model=_,this._indicatorAxes=map$1(_.getIndicatorModels(),function(nt,it){var at="indicator_"+it,ot=new IndicatorAxis(at,new IntervalScale);return ot.name=nt.get("name"),ot.model=nt,nt.axis=ot,this.dimensions.push(at),ot},this),this.resize(_,tt)}return _e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},_e.prototype.dataToPoint=function(_,et){var tt=this._indicatorAxes[et];return this.coordToPoint(tt.dataToCoord(_),et)},_e.prototype.coordToPoint=function(_,et){var tt=this._indicatorAxes[et],nt=tt.angle,it=this.cx+_*Math.cos(nt),at=this.cy-_*Math.sin(nt);return[it,at]},_e.prototype.pointToData=function(_){var et=_[0]-this.cx,tt=_[1]-this.cy,nt=Math.sqrt(et*et+tt*tt);et/=nt,tt/=nt;for(var it=Math.atan2(-tt,et),at=1/0,ot,st=-1,dt=0;dt<this._indicatorAxes.length;dt++){var ht=this._indicatorAxes[dt],ct=Math.abs(it-ht.angle);ct<at&&(ot=ht,st=dt,at=ct)}return[st,+(ot&&ot.coordToData(nt))]},_e.prototype.resize=function(_,et){var tt=_.get("center"),nt=et.getWidth(),it=et.getHeight(),at=Math.min(nt,it)/2;this.cx=parsePercent(tt[0],nt),this.cy=parsePercent(tt[1],it),this.startAngle=_.get("startAngle")*Math.PI/180;var ot=_.get("radius");(isString$1(ot)||isNumber(ot))&&(ot=[0,ot]),this.r0=parsePercent(ot[0],at),this.r=parsePercent(ot[1],at),each$f(this._indicatorAxes,function(st,dt){st.setExtent(this.r0,this.r);var ht=this.startAngle+dt*Math.PI*2/this._indicatorAxes.length;ht=Math.atan2(Math.sin(ht),Math.cos(ht)),st.angle=ht},this)},_e.prototype.update=function(_,et){var tt=this._indicatorAxes,nt=this._model;each$f(tt,function(ot){ot.scale.setExtent(1/0,-1/0)}),_.eachSeriesByType("radar",function(ot,st){if(!(ot.get("coordinateSystem")!=="radar"||_.getComponent("radar",ot.get("radarIndex"))!==nt)){var dt=ot.getData();each$f(tt,function(ht){ht.scale.unionExtentFromData(dt,dt.mapDimension(ht.dim))})}},this);var it=nt.get("splitNumber"),at=new IntervalScale;at.setExtent(0,it),at.setInterval(1),each$f(tt,function(ot,st){alignScaleTicks(ot.scale,ot.model,at)})},_e.prototype.convertToPixel=function(_,et,tt){return console.warn("Not implemented."),null},_e.prototype.convertFromPixel=function(_,et,tt){return console.warn("Not implemented."),null},_e.prototype.containPoint=function(_){return console.warn("Not implemented."),!1},_e.create=function(_,et){var tt=[];return _.eachComponent("radar",function(nt){var it=new _e(nt,_,et);tt.push(it),nt.coordinateSystem=it}),_.eachSeriesByType("radar",function(nt){nt.get("coordinateSystem")==="radar"&&(nt.coordinateSystem=tt[nt.get("radarIndex")||0])}),tt},_e.dimensions=[],_e}();function install$L(_e){_e.registerCoordinateSystem("radar",Radar),_e.registerComponentModel(RadarModel),_e.registerComponentView(RadarView),_e.registerVisual({seriesType:"radar",reset:function(_){var et=_.getData();et.each(function(tt){et.setItemVisual(tt,"legendIcon","roundRect")}),et.setVisual("legendIcon","roundRect")}})}function install$K(_e){use(install$L),_e.registerChartView(RadarView$1),_e.registerSeriesModel(RadarSeriesModel),_e.registerLayout(radarLayout),_e.registerProcessor(dataFilter$1("radar")),_e.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(_e,_,et){var tt=getStore(_e);tt[_]=et}function release(_e,_,et){var tt=getStore(_e),nt=tt[_];nt===et&&(tt[_]=null)}function isTaken(_e,_){return!!getStore(_e)[_]}function getStore(_e){return _e[ATTR]||(_e[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this)||this;tt._zr=et;var nt=bind$2(tt._mousedownHandler,tt),it=bind$2(tt._mousemoveHandler,tt),at=bind$2(tt._mouseupHandler,tt),ot=bind$2(tt._mousewheelHandler,tt),st=bind$2(tt._pinchHandler,tt);return tt.enable=function(dt,ht){this.disable(),this._opt=defaults(clone$4(ht)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),dt==null&&(dt=!0),(dt===!0||dt==="move"||dt==="pan")&&(et.on("mousedown",nt),et.on("mousemove",it),et.on("mouseup",at)),(dt===!0||dt==="scale"||dt==="zoom")&&(et.on("mousewheel",ot),et.on("pinch",st))},tt.disable=function(){et.off("mousedown",nt),et.off("mousemove",it),et.off("mouseup",at),et.off("mousewheel",ot),et.off("pinch",st)},tt}return _.prototype.isDragging=function(){return this._dragging},_.prototype.isPinching=function(){return this._pinching},_.prototype.setPointerChecker=function(et){this.pointerChecker=et},_.prototype.dispose=function(){this.disable()},_.prototype._mousedownHandler=function(et){if(!isMiddleOrRightButtonOnMouseUpDown(et)){for(var tt=et.target;tt;){if(tt.draggable)return;tt=tt.__hostTarget||tt.parent}var nt=et.offsetX,it=et.offsetY;this.pointerChecker&&this.pointerChecker(et,nt,it)&&(this._x=nt,this._y=it,this._dragging=!0)}},_.prototype._mousemoveHandler=function(et){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",et,this._opt)||et.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var tt=et.offsetX,nt=et.offsetY,it=this._x,at=this._y,ot=tt-it,st=nt-at;this._x=tt,this._y=nt,this._opt.preventDefaultMouseMove&&stop(et.event),trigger$1(this,"pan","moveOnMouseMove",et,{dx:ot,dy:st,oldX:it,oldY:at,newX:tt,newY:nt,isAvailableBehavior:null})}},_.prototype._mouseupHandler=function(et){isMiddleOrRightButtonOnMouseUpDown(et)||(this._dragging=!1)},_.prototype._mousewheelHandler=function(et){var tt=isAvailableBehavior("zoomOnMouseWheel",et,this._opt),nt=isAvailableBehavior("moveOnMouseWheel",et,this._opt),it=et.wheelDelta,at=Math.abs(it),ot=et.offsetX,st=et.offsetY;if(!(it===0||!tt&&!nt)){if(tt){var dt=at>3?1.4:at>1?1.2:1.1,ht=it>0?dt:1/dt;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",et,{scale:ht,originX:ot,originY:st,isAvailableBehavior:null})}if(nt){var ct=Math.abs(it),ut=(it>0?1:-1)*(ct>3?.4:ct>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",et,{scrollDelta:ut,originX:ot,originY:st,isAvailableBehavior:null})}}},_.prototype._pinchHandler=function(et){if(!isTaken(this._zr,"globalPan")){var tt=et.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,et,{scale:tt,originX:et.pinchX,originY:et.pinchY,isAvailableBehavior:null})}},_}(Eventful);function checkPointerAndTrigger(_e,_,et,tt,nt){_e.pointerChecker&&_e.pointerChecker(tt,nt.originX,nt.originY)&&(stop(tt.event),trigger$1(_e,_,et,tt,nt))}function trigger$1(_e,_,et,tt,nt){nt.isAvailableBehavior=bind$2(isAvailableBehavior,null,et,tt),_e.trigger(_,nt)}function isAvailableBehavior(_e,_,et){var tt=et[_e];return!_e||tt&&(!isString$1(tt)||_.event[tt+"Key"])}function updateViewOnPan(_e,_,et){var tt=_e.target;tt.x+=_,tt.y+=et,tt.dirty()}function updateViewOnZoom(_e,_,et,tt){var nt=_e.target,it=_e.zoomLimit,at=_e.zoom=_e.zoom||1;if(at*=_,it){var ot=it.min||0,st=it.max||1/0;at=Math.max(Math.min(st,at),ot)}var dt=at/_e.zoom;_e.zoom=at,nt.x-=(et-nt.x)*(dt-1),nt.y-=(tt-nt.y)*(dt-1),nt.scaleX*=dt,nt.scaleY*=dt,nt.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(_e,_,et){var tt=_.getComponentByElement(_e.topTarget),nt=tt&&tt.coordinateSystem;return tt&&tt!==et&&!IRRELEVANT_EXCLUDES.hasOwnProperty(tt.mainType)&&nt&&nt.model!==et}function parseXML(_e){if(isString$1(_e)){var _=new DOMParser;_e=_.parseFromString(_e,"text/xml")}var et=_e;for(et.nodeType===9&&(et=et.firstChild);et.nodeName.toLowerCase()!=="svg"||et.nodeType!==1;)et=et.nextSibling;return et}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function _e(){this._defs={},this._root=null}return _e.prototype.parse=function(_,et){et=et||{};var tt=parseXML(_);this._defsUsePending=[];var nt=new Group$3;this._root=nt;var it=[],at=tt.getAttribute("viewBox")||"",ot=parseFloat(tt.getAttribute("width")||et.width),st=parseFloat(tt.getAttribute("height")||et.height);isNaN(ot)&&(ot=null),isNaN(st)&&(st=null),parseAttributes(tt,nt,null,!0,!1);for(var dt=tt.firstChild;dt;)this._parseNode(dt,nt,it,null,!1,!1),dt=dt.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var ht,ct;if(at){var ut=splitNumberSequence(at);ut.length>=4&&(ht={x:parseFloat(ut[0]||0),y:parseFloat(ut[1]||0),width:parseFloat(ut[2]),height:parseFloat(ut[3])})}if(ht&&ot!=null&&st!=null&&(ct=makeViewBoxTransform(ht,{x:0,y:0,width:ot,height:st}),!et.ignoreViewBox)){var ft=nt;nt=new Group$3,nt.add(ft),ft.scaleX=ft.scaleY=ct.scale,ft.x=ct.x,ft.y=ct.y}return!et.ignoreRootClip&&ot!=null&&st!=null&&nt.setClipPath(new Rect$2({shape:{x:0,y:0,width:ot,height:st}})),{root:nt,width:ot,height:st,viewBoxRect:ht,viewBoxTransform:ct,named:it}},_e.prototype._parseNode=function(_,et,tt,nt,it,at){var ot=_.nodeName.toLowerCase(),st,dt=nt;if(ot==="defs"&&(it=!0),ot==="text"&&(at=!0),ot==="defs"||ot==="switch")st=et;else{if(!it){var ht=nodeParsers[ot];if(ht&&hasOwn(nodeParsers,ot)){st=ht.call(this,_,et);var ct=_.getAttribute("name");if(ct){var ut={name:ct,namedFrom:null,svgNodeTagLower:ot,el:st};tt.push(ut),ot==="g"&&(dt=ut)}else nt&&tt.push({name:nt.name,namedFrom:nt,svgNodeTagLower:ot,el:st});et.add(st)}}var ft=paintServerParsers[ot];if(ft&&hasOwn(paintServerParsers,ot)){var gt=ft.call(this,_),mt=_.getAttribute("id");mt&&(this._defs[mt]=gt)}}if(st&&st.isGroup)for(var vt=_.firstChild;vt;)vt.nodeType===1?this._parseNode(vt,st,tt,dt,it,at):vt.nodeType===3&&at&&this._parseText(vt,st),vt=vt.nextSibling},_e.prototype._parseText=function(_,et){var tt=new TSpan({style:{text:_.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(et,tt),parseAttributes(_,tt,this._defsUsePending,!1,!1),applyTextAlignment(tt,et);var nt=tt.style,it=nt.fontSize;it&&it<9&&(nt.fontSize=9,tt.scaleX*=it/9,tt.scaleY*=it/9);var at=(nt.fontSize||nt.fontFamily)&&[nt.fontStyle,nt.fontWeight,(nt.fontSize||12)+"px",nt.fontFamily||"sans-serif"].join(" ");nt.font=at;var ot=tt.getBoundingRect();return this._textX+=ot.width,et.add(tt),tt},_e.internalField=function(){nodeParsers={g:function(_,et){var tt=new Group$3;return inheritStyle(et,tt),parseAttributes(_,tt,this._defsUsePending,!1,!1),tt},rect:function(_,et){var tt=new Rect$2;return inheritStyle(et,tt),parseAttributes(_,tt,this._defsUsePending,!1,!1),tt.setShape({x:parseFloat(_.getAttribute("x")||"0"),y:parseFloat(_.getAttribute("y")||"0"),width:parseFloat(_.getAttribute("width")||"0"),height:parseFloat(_.getAttribute("height")||"0")}),tt.silent=!0,tt},circle:function(_,et){var tt=new Circle;return inheritStyle(et,tt),parseAttributes(_,tt,this._defsUsePending,!1,!1),tt.setShape({cx:parseFloat(_.getAttribute("cx")||"0"),cy:parseFloat(_.getAttribute("cy")||"0"),r:parseFloat(_.getAttribute("r")||"0")}),tt.silent=!0,tt},line:function(_,et){var tt=new Line$1;return inheritStyle(et,tt),parseAttributes(_,tt,this._defsUsePending,!1,!1),tt.setShape({x1:parseFloat(_.getAttribute("x1")||"0"),y1:parseFloat(_.getAttribute("y1")||"0"),x2:parseFloat(_.getAttribute("x2")||"0"),y2:parseFloat(_.getAttribute("y2")||"0")}),tt.silent=!0,tt},ellipse:function(_,et){var tt=new Ellipse;return inheritStyle(et,tt),parseAttributes(_,tt,this._defsUsePending,!1,!1),tt.setShape({cx:parseFloat(_.getAttribute("cx")||"0"),cy:parseFloat(_.getAttribute("cy")||"0"),rx:parseFloat(_.getAttribute("rx")||"0"),ry:parseFloat(_.getAttribute("ry")||"0")}),tt.silent=!0,tt},polygon:function(_,et){var tt=_.getAttribute("points"),nt;tt&&(nt=parsePoints(tt));var it=new Polygon({shape:{points:nt||[]},silent:!0});return inheritStyle(et,it),parseAttributes(_,it,this._defsUsePending,!1,!1),it},polyline:function(_,et){var tt=_.getAttribute("points"),nt;tt&&(nt=parsePoints(tt));var it=new Polyline$1({shape:{points:nt||[]},silent:!0});return inheritStyle(et,it),parseAttributes(_,it,this._defsUsePending,!1,!1),it},image:function(_,et){var tt=new ZRImage;return inheritStyle(et,tt),parseAttributes(_,tt,this._defsUsePending,!1,!1),tt.setStyle({image:_.getAttribute("xlink:href")||_.getAttribute("href"),x:+_.getAttribute("x"),y:+_.getAttribute("y"),width:+_.getAttribute("width"),height:+_.getAttribute("height")}),tt.silent=!0,tt},text:function(_,et){var tt=_.getAttribute("x")||"0",nt=_.getAttribute("y")||"0",it=_.getAttribute("dx")||"0",at=_.getAttribute("dy")||"0";this._textX=parseFloat(tt)+parseFloat(it),this._textY=parseFloat(nt)+parseFloat(at);var ot=new Group$3;return inheritStyle(et,ot),parseAttributes(_,ot,this._defsUsePending,!1,!0),ot},tspan:function(_,et){var tt=_.getAttribute("x"),nt=_.getAttribute("y");tt!=null&&(this._textX=parseFloat(tt)),nt!=null&&(this._textY=parseFloat(nt));var it=_.getAttribute("dx")||"0",at=_.getAttribute("dy")||"0",ot=new Group$3;return inheritStyle(et,ot),parseAttributes(_,ot,this._defsUsePending,!1,!0),this._textX+=parseFloat(it),this._textY+=parseFloat(at),ot},path:function(_,et){var tt=_.getAttribute("d")||"",nt=createFromString(tt);return inheritStyle(et,nt),parseAttributes(_,nt,this._defsUsePending,!1,!1),nt.silent=!0,nt}}}(),_e}(),paintServerParsers={lineargradient:function(_e){var _=parseInt(_e.getAttribute("x1")||"0",10),et=parseInt(_e.getAttribute("y1")||"0",10),tt=parseInt(_e.getAttribute("x2")||"10",10),nt=parseInt(_e.getAttribute("y2")||"0",10),it=new LinearGradient(_,et,tt,nt);return parsePaintServerUnit(_e,it),parseGradientColorStops(_e,it),it},radialgradient:function(_e){var _=parseInt(_e.getAttribute("cx")||"0",10),et=parseInt(_e.getAttribute("cy")||"0",10),tt=parseInt(_e.getAttribute("r")||"0",10),nt=new RadialGradient(_,et,tt);return parsePaintServerUnit(_e,nt),parseGradientColorStops(_e,nt),nt}};function parsePaintServerUnit(_e,_){var et=_e.getAttribute("gradientUnits");et==="userSpaceOnUse"&&(_.global=!0)}function parseGradientColorStops(_e,_){for(var et=_e.firstChild;et;){if(et.nodeType===1&&et.nodeName.toLocaleLowerCase()==="stop"){var tt=et.getAttribute("offset"),nt=void 0;tt&&tt.indexOf("%")>0?nt=parseInt(tt,10)/100:tt?nt=parseFloat(tt):nt=0;var it={};parseInlineStyle(et,it,it);var at=it.stopColor||et.getAttribute("stop-color")||"#000000";_.colorStops.push({offset:nt,color:at})}et=et.nextSibling}}function inheritStyle(_e,_){_e&&_e.__inheritedStyle&&(_.__inheritedStyle||(_.__inheritedStyle={}),defaults(_.__inheritedStyle,_e.__inheritedStyle))}function parsePoints(_e){for(var _=splitNumberSequence(_e),et=[],tt=0;tt<_.length;tt+=2){var nt=parseFloat(_[tt]),it=parseFloat(_[tt+1]);et.push([nt,it])}return et}function parseAttributes(_e,_,et,tt,nt){var it=_,at=it.__inheritedStyle=it.__inheritedStyle||{},ot={};_e.nodeType===1&&(parseTransformAttribute(_e,_),parseInlineStyle(_e,at,ot),tt||parseAttributeStyle(_e,at,ot)),it.style=it.style||{},at.fill!=null&&(it.style.fill=getFillStrokeStyle(it,"fill",at.fill,et)),at.stroke!=null&&(it.style.stroke=getFillStrokeStyle(it,"stroke",at.stroke,et)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(st){at[st]!=null&&(it.style[st]=parseFloat(at[st]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(st){at[st]!=null&&(it.style[st]=at[st])}),nt&&(it.__selfStyle=ot),at.lineDash&&(it.style.lineDash=map$1(splitNumberSequence(at.lineDash),function(st){return parseFloat(st)})),(at.visibility==="hidden"||at.visibility==="collapse")&&(it.invisible=!0),at.display==="none"&&(it.ignore=!0)}function applyTextAlignment(_e,_){var et=_.__selfStyle;if(et){var tt=et.textBaseline,nt=tt;!tt||tt==="auto"||tt==="baseline"?nt="alphabetic":tt==="before-edge"||tt==="text-before-edge"?nt="top":tt==="after-edge"||tt==="text-after-edge"?nt="bottom":(tt==="central"||tt==="mathematical")&&(nt="middle"),_e.style.textBaseline=nt}var it=_.__inheritedStyle;if(it){var at=it.textAlign,ot=at;at&&(at==="middle"&&(ot="center"),_e.style.textAlign=ot)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(_e,_,et,tt){var nt=et&&et.match(urlRegex);if(nt){var it=trim$1(nt[1]);tt.push([_e,_,it]);return}return et==="none"&&(et=null),et}function applyDefs(_e,_){for(var et=0;et<_.length;et++){var tt=_[et];tt[0].style[tt[1]]=_e[tt[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(_e){return _e.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(_e,_){var et=_e.getAttribute("transform");if(et){et=et.replace(/,/g," ");var tt=[],nt=null;et.replace(transformRegex,function(ct,ut,ft){return tt.push(ut,ft),""});for(var it=tt.length-1;it>0;it-=2){var at=tt[it],ot=tt[it-1],st=splitNumberSequence(at);switch(nt=nt||create$1(),ot){case"translate":translate(nt,nt,[parseFloat(st[0]),parseFloat(st[1]||"0")]);break;case"scale":scale$1(nt,nt,[parseFloat(st[0]),parseFloat(st[1]||st[0])]);break;case"rotate":rotate(nt,nt,-parseFloat(st[0])*DEGREE_TO_ANGLE,[parseFloat(st[1]||"0"),parseFloat(st[2]||"0")]);break;case"skewX":var dt=Math.tan(parseFloat(st[0])*DEGREE_TO_ANGLE);mul(nt,[1,0,dt,1,0,0],nt);break;case"skewY":var ht=Math.tan(parseFloat(st[0])*DEGREE_TO_ANGLE);mul(nt,[1,ht,0,1,0,0],nt);break;case"matrix":nt[0]=parseFloat(st[0]),nt[1]=parseFloat(st[1]),nt[2]=parseFloat(st[2]),nt[3]=parseFloat(st[3]),nt[4]=parseFloat(st[4]),nt[5]=parseFloat(st[5]);break}}_.setLocalTransform(nt)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(_e,_,et){var tt=_e.getAttribute("style");if(tt){styleRegex.lastIndex=0;for(var nt;(nt=styleRegex.exec(tt))!=null;){var it=nt[1],at=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,it)?INHERITABLE_STYLE_ATTRIBUTES_MAP[it]:null;at&&(_[at]=nt[2]);var ot=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,it)?SELF_STYLE_ATTRIBUTES_MAP[it]:null;ot&&(et[ot]=nt[2])}}}function parseAttributeStyle(_e,_,et){for(var tt=0;tt<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;tt++){var nt=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[tt],it=_e.getAttribute(nt);it!=null&&(_[INHERITABLE_STYLE_ATTRIBUTES_MAP[nt]]=it)}for(var tt=0;tt<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;tt++){var nt=SELF_STYLE_ATTRIBUTES_MAP_KEYS[tt],it=_e.getAttribute(nt);it!=null&&(et[SELF_STYLE_ATTRIBUTES_MAP[nt]]=it)}}function makeViewBoxTransform(_e,_){var et=_.width/_e.width,tt=_.height/_e.height,nt=Math.min(et,tt);return{scale:nt,x:-(_e.x+_e.width/2)*nt+(_.x+_.width/2),y:-(_e.y+_e.height/2)*nt+(_.y+_.height/2)}}function parseSVG(_e,_){var et=new SVGParser;return et.parse(_e,_)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function _e(_,et){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=_,this._parsedXML=parseXML(et)}return _e.prototype.load=function(){var _=this._firstGraphic;if(!_){_=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(_),this._boundingRect=this._firstGraphic.boundingRect.clone();var et=createRegions(_.named),tt=et.regions,nt=et.regionsMap;this._regions=tt,this._regionsMap=nt}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},_e.prototype._buildGraphic=function(_){var et,tt;try{et=_&&parseSVG(_,{ignoreViewBox:!0,ignoreRootClip:!0})||{},tt=et.root,assert(tt!=null)}catch(vt){throw new Error(`Invalid svg format
`+vt.message)}var nt=new Group$3;nt.add(tt),nt.isGeoSVGGraphicRoot=!0;var it=et.width,at=et.height,ot=et.viewBoxRect,st=this._boundingRect;if(!st){var dt=void 0,ht=void 0,ct=void 0,ut=void 0;if(it!=null?(dt=0,ct=it):ot&&(dt=ot.x,ct=ot.width),at!=null?(ht=0,ut=at):ot&&(ht=ot.y,ut=ot.height),dt==null||ht==null){var ft=tt.getBoundingRect();dt==null&&(dt=ft.x,ct=ft.width),ht==null&&(ht=ft.y,ut=ft.height)}st=this._boundingRect=new BoundingRect(dt,ht,ct,ut)}if(ot){var gt=makeViewBoxTransform(ot,st);tt.scaleX=tt.scaleY=gt.scale,tt.x=gt.x,tt.y=gt.y}nt.setClipPath(new Rect$2({shape:st.plain()}));var mt=[];return each$f(et.named,function(vt){REGION_AVAILABLE_SVG_TAG_MAP.get(vt.svgNodeTagLower)!=null&&(mt.push(vt),setSilent(vt.el))}),{root:nt,boundingRect:st,named:mt}},_e.prototype.useGraphic=function(_){var et=this._usedGraphicMap,tt=et.get(_);return tt||(tt=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),et.set(_,tt),tt)},_e.prototype.freeGraphic=function(_){var et=this._usedGraphicMap,tt=et.get(_);tt&&(et.removeKey(_),this._freedGraphics.push(tt))},_e}();function setSilent(_e){_e.silent=!1,_e.isGroup&&_e.traverse(function(_){_.silent=!1})}function createRegions(_e){var _=[],et=createHashMap();return each$f(_e,function(tt){if(tt.namedFrom==null){var nt=new GeoSVGRegion(tt.name,tt.el);_.push(nt),et.set(tt.name,nt)}}),{regions:_,regionsMap:et}}var geoCoord=[126,25],nanhaiName="",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(_e,_){if(_e==="china"){for(var et=0;et<_.length;et++)if(_[et].name===nanhaiName)return;_.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(tt){return{type:"polygon",exterior:tt}}),geoCoord))}}var coordsOffsetMap={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function fixTextCoords(_e,_){if(_e==="china"){var et=coordsOffsetMap[_.name];if(et){var tt=_.getCenter();tt[0]+=et[0]/10.5,tt[1]+=-et[1]/(10.5/.75),_.setCenter(tt)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(_e,_){_e==="china"&&_.name===""&&_.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function _e(_,et,tt){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=_,this._specialAreas=tt,this._geoJSON=parseInput(et)}return _e.prototype.load=function(_,et){et=et||DEFAULT_NAME_PROPERTY;var tt=this._parsedMap.get(et);if(!tt){var nt=this._parseToRegions(et);tt=this._parsedMap.set(et,{regions:nt,boundingRect:calculateBoundingRect(nt)})}var it=createHashMap(),at=[];return each$f(tt.regions,function(ot){var st=ot.name;_&&hasOwn(_,st)&&(ot=ot.cloneShallow(st=_[st])),at.push(ot),it.set(st,ot)}),{regions:at,boundingRect:tt.boundingRect||new BoundingRect(0,0,0,0),regionsMap:it}},_e.prototype._parseToRegions=function(_){var et=this._mapName,tt=this._geoJSON,nt;try{nt=tt?parseGeoJSON(tt,_):[]}catch(it){throw new Error(`Invalid geoJson format
`+it.message)}return fixNanhai(et,nt),each$f(nt,function(it){var at=it.name;fixTextCoords(et,it),fixDiaoyuIsland(et,it);var ot=this._specialAreas&&this._specialAreas[at];ot&&it.transformTo(ot.left,ot.top,ot.width,ot.height)},this),nt},_e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},_e}();function calculateBoundingRect(_e){for(var _,et=0;et<_e.length;et++){var tt=_e[et].getBoundingRect();_=_||tt.clone(),_.union(tt)}return _}function parseInput(_e){return isString$1(_e)?typeof JSON<"u"&&JSON.parse?JSON.parse(_e):new Function("return ("+_e+");")():_e}var storage=createHashMap();const geoSourceManager={registerMap:function(_e,_,et){if(_.svg){var tt=new GeoSVGResource(_e,_.svg);storage.set(_e,tt)}else{var nt=_.geoJson||_.geoJSON;nt&&!_.features?et=_.specialAreas:nt=_;var tt=new GeoJSONResource(_e,nt,et);storage.set(_e,tt)}},getGeoResource:function(_e){return storage.get(_e)},getMapForUser:function(_e){var _=storage.get(_e);return _&&_.type==="geoJSON"&&_.getMapForUser()},load:function(_e,_,et){var tt=storage.get(_e);if(tt)return tt.load(_,et)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(_e){var _=_e.getItemStyle(),et=_e.get("areaColor");return et!=null&&(_.fill=et),_}function fixLineStyle(_e){var _=_e.style;_&&(_.stroke=_.stroke||_.fill,_.fill=null)}var MapDraw=function(){function _e(_){var et=new Group$3;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(_.getZr()),this._controllerHost={target:et},this.group=et,et.add(this._regionsGroup=new Group$3),et.add(this._svgGroup=new Group$3)}return _e.prototype.draw=function(_,et,tt,nt,it){var at=_.mainType==="geo",ot=_.getData&&_.getData();at&&et.eachComponent({mainType:"series",subType:"map"},function(yt){!ot&&yt.getHostGeoModel()===_&&(ot=yt.getData())});var st=_.coordinateSystem,dt=this._regionsGroup,ht=this.group,ct=st.getTransformInfo(),ut=ct.raw,ft=ct.roam,gt=!dt.childAt(0)||it;gt?(ht.x=ft.x,ht.y=ft.y,ht.scaleX=ft.scaleX,ht.scaleY=ft.scaleY,ht.dirty()):updateProps$1(ht,ft,_);var mt=ot&&ot.getVisual("visualMeta")&&ot.getVisual("visualMeta").length>0,vt={api:tt,geo:st,mapOrGeoModel:_,data:ot,isVisualEncodedByVisualMap:mt,isGeo:at,transformInfoRaw:ut};st.resourceType==="geoJSON"?this._buildGeoJSON(vt):st.resourceType==="geoSVG"&&this._buildSVG(vt),this._updateController(_,et,tt),this._updateMapSelectHandler(_,dt,tt,nt)},_e.prototype._buildGeoJSON=function(_){var et=this._regionsGroupByName=createHashMap(),tt=createHashMap(),nt=this._regionsGroup,it=_.transformInfoRaw,at=_.mapOrGeoModel,ot=_.data,st=_.geo.projection,dt=st&&st.stream;function ht(ft,gt){return gt&&(ft=gt(ft)),ft&&[ft[0]*it.scaleX+it.x,ft[1]*it.scaleY+it.y]}function ct(ft){for(var gt=[],mt=!dt&&st&&st.project,vt=0;vt<ft.length;++vt){var yt=ht(ft[vt],mt);yt&&gt.push(yt)}return gt}function ut(ft){return{shape:{points:ct(ft)}}}nt.removeAll(),each$f(_.geo.regions,function(ft){var gt=ft.name,mt=et.get(gt),vt=tt.get(gt)||{},yt=vt.dataIdx,bt=vt.regionModel;if(!mt){mt=et.set(gt,new Group$3),nt.add(mt),yt=ot?ot.indexOfName(gt):null,bt=_.isGeo?at.getRegionModel(gt):ot?ot.getItemModel(yt):null;var _t=bt.get("silent",!0);_t!=null&&(mt.silent=_t),tt.set(gt,{dataIdx:yt,regionModel:bt})}var xt=[],St=[];each$f(ft.geometries,function(Ct){if(Ct.type==="polygon"){var Et=[Ct.exterior].concat(Ct.interiors||[]);dt&&(Et=projectPolys(Et,dt)),each$f(Et,function(Pt){xt.push(new Polygon(ut(Pt)))})}else{var At=Ct.points;dt&&(At=projectPolys(At,dt,!0)),each$f(At,function(Pt){St.push(new Polyline$1(ut(Pt)))})}});var Tt=ht(ft.getCenter(),st&&st.project);function wt(Ct,Et){if(Ct.length){var At=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:Ct}});mt.add(At),applyOptionStyleForRegion(_,At,yt,bt),resetLabelForRegion(_,At,gt,bt,at,yt,Tt),Et&&(fixLineStyle(At),each$f(At.states,fixLineStyle))}}wt(xt),wt(St,!0)}),et.each(function(ft,gt){var mt=tt.get(gt),vt=mt.dataIdx,yt=mt.regionModel;resetEventTriggerForRegion(_,ft,gt,yt,at,vt),resetTooltipForRegion(_,ft,gt,yt,at),resetStateTriggerForRegion(_,ft,gt,yt,at)},this)},_e.prototype._buildSVG=function(_){var et=_.geo.map,tt=_.transformInfoRaw;this._svgGroup.x=tt.x,this._svgGroup.y=tt.y,this._svgGroup.scaleX=tt.scaleX,this._svgGroup.scaleY=tt.scaleY,this._svgResourceChanged(et)&&(this._freeSVG(),this._useSVG(et));var nt=this._svgDispatcherMap=createHashMap(),it=!1;each$f(this._svgGraphicRecord.named,function(at){var ot=at.name,st=_.mapOrGeoModel,dt=_.data,ht=at.svgNodeTagLower,ct=at.el,ut=dt?dt.indexOfName(ot):null,ft=st.getRegionModel(ot);OPTION_STYLE_ENABLED_TAG_MAP.get(ht)!=null&&ct instanceof Displayable&&applyOptionStyleForRegion(_,ct,ut,ft),ct instanceof Displayable&&(ct.culling=!0);var gt=ft.get("silent",!0);if(gt!=null&&(ct.silent=gt),ct.z2EmphasisLift=0,!at.namedFrom&&(LABEL_HOST_MAP.get(ht)!=null&&resetLabelForRegion(_,ct,ot,ft,st,ut,null),resetEventTriggerForRegion(_,ct,ot,ft,st,ut),resetTooltipForRegion(_,ct,ot,ft,st),STATE_TRIGGER_TAG_MAP.get(ht)!=null)){var mt=resetStateTriggerForRegion(_,ct,ot,ft,st);mt==="self"&&(it=!0);var vt=nt.get(ot)||nt.set(ot,[]);vt.push(ct)}},this),this._enableBlurEntireSVG(it,_)},_e.prototype._enableBlurEntireSVG=function(_,et){if(_&&et.isGeo){var tt=et.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),nt=tt.opacity;this._svgGraphicRecord.root.traverse(function(it){if(!it.isGroup){setDefaultStateProxy(it);var at=it.ensureState("blur").style||{};at.opacity==null&&nt!=null&&(at.opacity=nt),it.ensureState("emphasis")}})}},_e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},_e.prototype.findHighDownDispatchers=function(_,et){if(_==null)return[];var tt=et.coordinateSystem;if(tt.resourceType==="geoJSON"){var nt=this._regionsGroupByName;if(nt){var it=nt.get(_);return it?[it]:[]}}else if(tt.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(_)||[]},_e.prototype._svgResourceChanged=function(_){return this._svgMapName!==_},_e.prototype._useSVG=function(_){var et=geoSourceManager.getGeoResource(_);if(et&&et.type==="geoSVG"){var tt=et.useGraphic(this.uid);this._svgGroup.add(tt.root),this._svgGraphicRecord=tt,this._svgMapName=_}},_e.prototype._freeSVG=function(){var _=this._svgMapName;if(_!=null){var et=geoSourceManager.getGeoResource(_);et&&et.type==="geoSVG"&&et.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},_e.prototype._updateController=function(_,et,tt){var nt=_.coordinateSystem,it=this._controller,at=this._controllerHost;at.zoomLimit=_.get("scaleLimit"),at.zoom=nt.getZoom(),it.enable(_.get("roam")||!1);var ot=_.mainType;function st(){var dt={type:"geoRoam",componentType:ot};return dt[ot+"Id"]=_.id,dt}it.off("pan").on("pan",function(dt){this._mouseDownFlag=!1,updateViewOnPan(at,dt.dx,dt.dy),tt.dispatchAction(extend(st(),{dx:dt.dx,dy:dt.dy,animation:{duration:0}}))},this),it.off("zoom").on("zoom",function(dt){this._mouseDownFlag=!1,updateViewOnZoom(at,dt.scale,dt.originX,dt.originY),tt.dispatchAction(extend(st(),{totalZoom:at.zoom,zoom:dt.scale,originX:dt.originX,originY:dt.originY,animation:{duration:0}}))},this),it.setPointerChecker(function(dt,ht,ct){return nt.containPoint([ht,ct])&&!onIrrelevantElement(dt,tt,_)})},_e.prototype.resetForLabelLayout=function(){this.group.traverse(function(_){var et=_.getTextContent();et&&(et.ignore=mapLabelRaw(et).ignore)})},_e.prototype._updateMapSelectHandler=function(_,et,tt,nt){var it=this;et.off("mousedown"),et.off("click"),_.get("selectedMode")&&(et.on("mousedown",function(){it._mouseDownFlag=!0}),et.on("click",function(at){it._mouseDownFlag&&(it._mouseDownFlag=!1)}))},_e}();function applyOptionStyleForRegion(_e,_,et,tt){var nt=tt.getModel("itemStyle"),it=tt.getModel(["emphasis","itemStyle"]),at=tt.getModel(["blur","itemStyle"]),ot=tt.getModel(["select","itemStyle"]),st=getFixedItemStyle(nt),dt=getFixedItemStyle(it),ht=getFixedItemStyle(ot),ct=getFixedItemStyle(at),ut=_e.data;if(ut){var ft=ut.getItemVisual(et,"style"),gt=ut.getItemVisual(et,"decal");_e.isVisualEncodedByVisualMap&&ft.fill&&(st.fill=ft.fill),gt&&(st.decal=createOrUpdatePatternFromDecal(gt,_e.api))}_.setStyle(st),_.style.strokeNoScale=!0,_.ensureState("emphasis").style=dt,_.ensureState("select").style=ht,_.ensureState("blur").style=ct,setDefaultStateProxy(_)}function resetLabelForRegion(_e,_,et,tt,nt,it,at){var ot=_e.data,st=_e.isGeo,dt=ot&&isNaN(ot.get(ot.mapDimension("value"),it)),ht=ot&&ot.getItemLayout(it);if(st||dt||ht&&ht.showLabel){var ct=st?et:it,ut=void 0;(!ot||it>=0)&&(ut=nt);var ft=at?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(_,getLabelStatesModels(tt),{labelFetcher:ut,labelDataIndex:ct,defaultText:et},ft);var gt=_.getTextContent();if(gt&&(mapLabelRaw(gt).ignore=gt.ignore,_.textConfig&&at)){var mt=_.getBoundingRect().clone();_.textConfig.layoutRect=mt,_.textConfig.position=[(at[0]-mt.x)/mt.width*100+"%",(at[1]-mt.y)/mt.height*100+"%"]}_.disableLabelAnimation=!0}else _.removeTextContent(),_.removeTextConfig(),_.disableLabelAnimation=null}function resetEventTriggerForRegion(_e,_,et,tt,nt,it){_e.data?_e.data.setItemGraphicEl(it,_):getECData(_).eventData={componentType:"geo",componentIndex:nt.componentIndex,geoIndex:nt.componentIndex,name:et,region:tt&&tt.option||{}}}function resetTooltipForRegion(_e,_,et,tt,nt){_e.data||setTooltipConfig({el:_,componentModel:nt,itemName:et,itemTooltipOption:tt.get("tooltip")})}function resetStateTriggerForRegion(_e,_,et,tt,nt){_.highDownSilentOnTouch=!!nt.get("selectedMode");var it=tt.getModel("emphasis"),at=it.get("focus");return toggleHoverEmphasis(_,at,it.get("blurScope"),it.get("disabled")),_e.isGeo&&enableComponentHighDownFeatures(_,nt,et),at}function projectPolys(_e,_,et){var tt=[],nt;function it(){nt=[]}function at(){nt.length&&(tt.push(nt),nt=[])}var ot=_({polygonStart:it,polygonEnd:at,lineStart:it,lineEnd:at,point:function(st,dt){isFinite(st)&&isFinite(dt)&&nt.push([st,dt])},sphere:function(){}});return!et&&ot.polygonStart(),each$f(_e,function(st){ot.lineStart();for(var dt=0;dt<st.length;dt++)ot.point(st[dt][0],st[dt][1]);ot.lineEnd()}),!et&&ot.polygonEnd(),tt}var MapView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt,it){if(!(it&&it.type==="mapToggleSelect"&&it.from===this.uid)){var at=this.group;if(at.removeAll(),!et.getHostGeoModel()){if(this._mapDraw&&it&&it.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),it&&it.type==="geoRoam"&&it.componentType==="series"&&it.seriesId===et.id){var ot=this._mapDraw;ot&&at.add(ot.group)}else if(et.needsDrawMap){var ot=this._mapDraw||new MapDraw(nt);at.add(ot.group),ot.draw(et,tt,nt,this,it),this._mapDraw=ot}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;et.get("showLegendSymbol")&&tt.getComponent("legend")&&this._renderSymbols(et,tt,nt)}}},_.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},_.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_.prototype._renderSymbols=function(et,tt,nt){var it=et.originalData,at=this.group;it.each(it.mapDimension("value"),function(ot,st){if(!isNaN(ot)){var dt=it.getItemLayout(st);if(!(!dt||!dt.point)){var ht=dt.point,ct=dt.offset,ut=new Circle({style:{fill:et.getData().getVisual("style").fill},shape:{cx:ht[0]+ct*9,cy:ht[1],r:3},silent:!0,z2:8+(ct?0:Z2_EMPHASIS_LIFT+1)});if(!ct){var ft=et.mainSeries.getData(),gt=it.getName(st),mt=ft.indexOfName(gt),vt=it.getItemModel(st),yt=vt.getModel("label"),bt=ft.getItemGraphicEl(mt);setLabelStyle(ut,getLabelStatesModels(vt),{labelFetcher:{getFormattedLabel:function(_t,xt){return et.getFormattedLabel(mt,xt)}},defaultText:gt}),ut.disableLabelAnimation=!0,yt.get("position")||ut.setTextConfig({position:"bottom"}),bt.onHoverStateChange=function(_t){setStatesFlag(ut,_t)}}at.add(ut)}}})},_.type="map",_}(ChartView),MapSeries=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.needsDrawMap=!1,et.seriesGroup=[],et.getTooltipPosition=function(tt){if(tt!=null){var nt=this.getData().getName(tt),it=this.coordinateSystem,at=it.getRegion(nt);return at&&it.dataToPoint(at.getCenter())}},et}return _.prototype.getInitialData=function(et){for(var tt=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),nt=createHashMap(),it=[],at=0,ot=tt.count();at<ot;at++){var st=tt.getName(at);nt.set(st,at)}var dt=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(dt.regions,function(ht){var ct=ht.name,ut=nt.get(ct),ft=ht.properties&&ht.properties.echartsStyle,gt;ut==null?(gt={name:ct},it.push(gt)):gt=tt.getRawDataItem(ut),ft&&merge$1(gt,ft)}),tt.appendData(it),tt},_.prototype.getHostGeoModel=function(){var et=this.option.geoIndex;return et!=null?this.ecModel.getComponent("geo",et):null},_.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},_.prototype.getRawValue=function(et){var tt=this.getData();return tt.get(tt.mapDimension("value"),et)},_.prototype.getRegionModel=function(et){var tt=this.getData();return tt.getItemModel(tt.indexOfName(et))},_.prototype.formatTooltip=function(et,tt,nt){for(var it=this.getData(),at=this.getRawValue(et),ot=it.getName(et),st=this.seriesGroup,dt=[],ht=0;ht<st.length;ht++){var ct=st[ht].originalData.indexOfName(ot),ut=it.mapDimension("value");isNaN(st[ht].originalData.get(ut,ct))||dt.push(st[ht].name)}return createTooltipMarkup("section",{header:dt.join(", "),noHeader:!dt.length,blocks:[createTooltipMarkup("nameValue",{name:ot,value:at})]})},_.prototype.setZoom=function(et){this.option.zoom=et},_.prototype.setCenter=function(et){this.option.center=et},_.prototype.getLegendIcon=function(et){var tt=et.icon||"roundRect",nt=createSymbol$1(tt,0,0,et.itemWidth,et.itemHeight,et.itemStyle.fill);return nt.setStyle(et.itemStyle),nt.style.stroke="none",tt.indexOf("empty")>-1&&(nt.style.stroke=nt.style.fill,nt.style.fill="#fff",nt.style.lineWidth=2),nt},_.type="series.map",_.dependencies=["geo"],_.layoutMode="box",_.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},_}(SeriesModel);function dataStatistics(_e,_){var et={};return each$f(_e,function(tt){tt.each(tt.mapDimension("value"),function(nt,it){var at="ec-"+tt.getName(it);et[at]=et[at]||[],isNaN(nt)||et[at].push(nt)})}),_e[0].map(_e[0].mapDimension("value"),function(tt,nt){for(var it="ec-"+_e[0].getName(nt),at=0,ot=1/0,st=-1/0,dt=et[it].length,ht=0;ht<dt;ht++)ot=Math.min(ot,et[it][ht]),st=Math.max(st,et[it][ht]),at+=et[it][ht];var ct;return _==="min"?ct=ot:_==="max"?ct=st:_==="average"?ct=at/dt:ct=at,dt===0?NaN:ct})}function mapDataStatistic(_e){var _={};_e.eachSeriesByType("map",function(et){var tt=et.getHostGeoModel(),nt=tt?"o"+tt.id:"i"+et.getMapType();(_[nt]=_[nt]||[]).push(et)}),each$f(_,function(et,tt){for(var nt=dataStatistics(map$1(et,function(at){return at.getData()}),et[0].get("mapValueCalculation")),it=0;it<et.length;it++)et[it].originalData=et[it].getData();for(var it=0;it<et.length;it++)et[it].seriesGroup=et,et[it].needsDrawMap=it===0&&!et[it].getHostGeoModel(),et[it].setData(nt.cloneShallow()),et[it].mainSeries=et[0]})}function mapSymbolLayout(_e){var _={};_e.eachSeriesByType("map",function(et){var tt=et.getMapType();if(!(et.getHostGeoModel()||_[tt])){var nt={};each$f(et.seriesGroup,function(at){var ot=at.coordinateSystem,st=at.originalData;at.get("showLegendSymbol")&&_e.getComponent("legend")&&st.each(st.mapDimension("value"),function(dt,ht){var ct=st.getName(ht),ut=ot.getRegion(ct);if(!(!ut||isNaN(dt))){var ft=nt[ct]||0,gt=ot.dataToPoint(ut.getCenter());nt[ct]=ft+1,st.setItemLayout(ht,{point:gt,offset:ft})}})});var it=et.getData();it.each(function(at){var ot=it.getName(at),st=it.getItemLayout(at)||{};st.showLabel=!nt[ot],it.setItemLayout(at,st)}),_[tt]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this)||this;return tt.type="view",tt.dimensions=["x","y"],tt._roamTransformable=new Transformable,tt._rawTransformable=new Transformable,tt.name=et,tt}return _.prototype.setBoundingRect=function(et,tt,nt,it){return this._rect=new BoundingRect(et,tt,nt,it),this._rect},_.prototype.getBoundingRect=function(){return this._rect},_.prototype.setViewRect=function(et,tt,nt,it){this._transformTo(et,tt,nt,it),this._viewRect=new BoundingRect(et,tt,nt,it)},_.prototype._transformTo=function(et,tt,nt,it){var at=this.getBoundingRect(),ot=this._rawTransformable;ot.transform=at.calculateTransform(new BoundingRect(et,tt,nt,it));var st=ot.parent;ot.parent=null,ot.decomposeTransform(),ot.parent=st,this._updateTransform()},_.prototype.setCenter=function(et,tt){et&&(this._center=[parsePercent(et[0],tt.getWidth()),parsePercent(et[1],tt.getHeight())],this._updateCenterAndZoom())},_.prototype.setZoom=function(et){et=et||1;var tt=this.zoomLimit;tt&&(tt.max!=null&&(et=Math.min(tt.max,et)),tt.min!=null&&(et=Math.max(tt.min,et))),this._zoom=et,this._updateCenterAndZoom()},_.prototype.getDefaultCenter=function(){var et=this.getBoundingRect(),tt=et.x+et.width/2,nt=et.y+et.height/2;return[tt,nt]},_.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},_.prototype.getZoom=function(){return this._zoom||1},_.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},_.prototype._updateCenterAndZoom=function(){var et=this._rawTransformable.getLocalTransform(),tt=this._roamTransformable,nt=this.getDefaultCenter(),it=this.getCenter(),at=this.getZoom();it=applyTransform$1([],it,et),nt=applyTransform$1([],nt,et),tt.originX=it[0],tt.originY=it[1],tt.x=nt[0]-it[0],tt.y=nt[1]-it[1],tt.scaleX=tt.scaleY=at,this._updateTransform()},_.prototype._updateTransform=function(){var et=this._roamTransformable,tt=this._rawTransformable;tt.parent=et,et.updateTransform(),tt.updateTransform(),copy(this.transform||(this.transform=[]),tt.transform||create$1()),this._rawTransform=tt.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},_.prototype.getTransformInfo=function(){var et=this._rawTransformable,tt=this._roamTransformable,nt=new Transformable;return nt.transform=tt.transform,nt.decomposeTransform(),{roam:{x:nt.x,y:nt.y,scaleX:nt.scaleX,scaleY:nt.scaleY},raw:{x:et.x,y:et.y,scaleX:et.scaleX,scaleY:et.scaleY}}},_.prototype.getViewRect=function(){return this._viewRect},_.prototype.getViewRectAfterRoam=function(){var et=this.getBoundingRect().clone();return et.applyTransform(this.transform),et},_.prototype.dataToPoint=function(et,tt,nt){var it=tt?this._rawTransform:this.transform;return nt=nt||[],it?v2ApplyTransform(nt,et,it):copy$1(nt,et)},_.prototype.pointToData=function(et){var tt=this.invTransform;return tt?v2ApplyTransform([],et,tt):[et[0],et[1]]},_.prototype.convertToPixel=function(et,tt,nt){var it=getCoordSys$4(tt);return it===this?it.dataToPoint(nt):null},_.prototype.convertFromPixel=function(et,tt,nt){var it=getCoordSys$4(tt);return it===this?it.pointToData(nt):null},_.prototype.containPoint=function(et){return this.getViewRectAfterRoam().contain(et[0],et[1])},_.dimensions=["x","y"],_}(Transformable);function getCoordSys$4(_e){var _=_e.seriesModel;return _?_.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(_e){__extends$1(_,_e);function _(et,tt,nt){var it=_e.call(this,et)||this;it.dimensions=geo2DDimensions,it.type="geo",it._nameCoordMap=createHashMap(),it.map=tt;var at=nt.projection,ot=geoSourceManager.load(tt,nt.nameMap,nt.nameProperty),st=geoSourceManager.getGeoResource(tt);it.resourceType=st?st.type:null;var dt=it.regions=ot.regions,ht=GEO_DEFAULT_PARAMS[st.type];it._regionsMap=ot.regionsMap,it.regions=ot.regions,it.projection=at;var ct;if(at)for(var ut=0;ut<dt.length;ut++){var ft=dt[ut].getBoundingRect(at);ct=ct||ft.clone(),ct.union(ft)}else ct=ot.boundingRect;return it.setBoundingRect(ct.x,ct.y,ct.width,ct.height),it.aspectScale=at?1:retrieve2(nt.aspectScale,ht.aspectScale),it._invertLongitute=at?!1:ht.invertLongitute,it}return _.prototype._transformTo=function(et,tt,nt,it){var at=this.getBoundingRect(),ot=this._invertLongitute;at=at.clone(),ot&&(at.y=-at.y-at.height);var st=this._rawTransformable;st.transform=at.calculateTransform(new BoundingRect(et,tt,nt,it));var dt=st.parent;st.parent=null,st.decomposeTransform(),st.parent=dt,ot&&(st.scaleY=-st.scaleY),this._updateTransform()},_.prototype.getRegion=function(et){return this._regionsMap.get(et)},_.prototype.getRegionByCoord=function(et){for(var tt=this.regions,nt=0;nt<tt.length;nt++){var it=tt[nt];if(it.type==="geoJSON"&&it.contain(et))return tt[nt]}},_.prototype.addGeoCoord=function(et,tt){this._nameCoordMap.set(et,tt)},_.prototype.getGeoCoord=function(et){var tt=this._regionsMap.get(et);return this._nameCoordMap.get(et)||tt&&tt.getCenter()},_.prototype.dataToPoint=function(et,tt,nt){if(isString$1(et)&&(et=this.getGeoCoord(et)),et){var it=this.projection;return it&&(et=it.project(et)),et&&this.projectedToPoint(et,tt,nt)}},_.prototype.pointToData=function(et){var tt=this.projection;return tt&&(et=tt.unproject(et)),et&&this.pointToProjected(et)},_.prototype.pointToProjected=function(et){return _e.prototype.pointToData.call(this,et)},_.prototype.projectedToPoint=function(et,tt,nt){return _e.prototype.dataToPoint.call(this,et,tt,nt)},_.prototype.convertToPixel=function(et,tt,nt){var it=getCoordSys$3(tt);return it===this?it.dataToPoint(nt):null},_.prototype.convertFromPixel=function(et,tt,nt){var it=getCoordSys$3(tt);return it===this?it.pointToData(nt):null},_}(View);mixin(Geo,View);function getCoordSys$3(_e){var _=_e.geoModel,et=_e.seriesModel;return _?_.coordinateSystem:et?et.coordinateSystem||(et.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(_e,_){var et=_e.get("boundingCoords");if(et!=null){var tt=et[0],nt=et[1];if(isFinite(tt[0])&&isFinite(tt[1])&&isFinite(nt[0])&&isFinite(nt[1])){var it=this.projection;if(it){var at=tt[0],ot=tt[1],st=nt[0],dt=nt[1];tt=[1/0,1/0],nt=[-1/0,-1/0];var ht=function(Tt,wt,Ct,Et){for(var At=Ct-Tt,Pt=Et-wt,Rt=0;Rt<=100;Rt++){var It=Rt/100,Mt=it.project([Tt+At*It,wt+Pt*It]);min$1(tt,tt,Mt),max$1(nt,nt,Mt)}};ht(at,ot,st,ot),ht(st,ot,st,dt),ht(st,dt,at,dt),ht(at,dt,st,ot)}this.setBoundingRect(tt[0],tt[1],nt[0]-tt[0],nt[1]-tt[1])}}var ct=this.getBoundingRect(),ut=_e.get("layoutCenter"),ft=_e.get("layoutSize"),gt=_.getWidth(),mt=_.getHeight(),vt=ct.width/ct.height*this.aspectScale,yt=!1,bt,_t;ut&&ft&&(bt=[parsePercent(ut[0],gt),parsePercent(ut[1],mt)],_t=parsePercent(ft,Math.min(gt,mt)),!isNaN(bt[0])&&!isNaN(bt[1])&&!isNaN(_t)&&(yt=!0));var xt;if(yt)xt={},vt>1?(xt.width=_t,xt.height=_t/vt):(xt.height=_t,xt.width=_t*vt),xt.y=bt[1]-xt.height/2,xt.x=bt[0]-xt.width/2;else{var St=_e.getBoxLayoutParams();St.aspect=vt,xt=getLayoutRect(St,{width:gt,height:mt})}this.setViewRect(xt.x,xt.y,xt.width,xt.height),this.setCenter(_e.get("center"),_),this.setZoom(_e.get("zoom"))}function setGeoCoords(_e,_){each$f(_.get("geoCoord"),function(et,tt){_e.addGeoCoord(tt,et)})}var GeoCreator=function(){function _e(){this.dimensions=geo2DDimensions}return _e.prototype.create=function(_,et){var tt=[];function nt(at){return{nameProperty:at.get("nameProperty"),aspectScale:at.get("aspectScale"),projection:at.get("projection")}}_.eachComponent("geo",function(at,ot){var st=at.get("map"),dt=new Geo(st+ot,st,extend({nameMap:at.get("nameMap")},nt(at)));dt.zoomLimit=at.get("scaleLimit"),tt.push(dt),at.coordinateSystem=dt,dt.model=at,dt.resize=resizeGeo,dt.resize(at,et)}),_.eachSeries(function(at){var ot=at.get("coordinateSystem");if(ot==="geo"){var st=at.get("geoIndex")||0;at.coordinateSystem=tt[st]}});var it={};return _.eachSeriesByType("map",function(at){if(!at.getHostGeoModel()){var ot=at.getMapType();it[ot]=it[ot]||[],it[ot].push(at)}}),each$f(it,function(at,ot){var st=map$1(at,function(ht){return ht.get("nameMap")}),dt=new Geo(ot,ot,extend({nameMap:mergeAll(st)},nt(at[0])));dt.zoomLimit=retrieve.apply(null,map$1(at,function(ht){return ht.get("scaleLimit")})),tt.push(dt),dt.resize=resizeGeo,dt.resize(at[0],et),each$f(at,function(ht){ht.coordinateSystem=dt,setGeoCoords(dt,ht)})}),tt},_e.prototype.getFilledRegions=function(_,et,tt,nt){for(var it=(_||[]).slice(),at=createHashMap(),ot=0;ot<it.length;ot++)at.set(it[ot].name,it[ot]);var st=geoSourceManager.load(et,tt,nt);return each$f(st.regions,function(dt){var ht=dt.name,ct=at.get(ht),ut=dt.properties&&dt.properties.echartsStyle;ct||(ct={name:ht},it.push(ct)),ut&&merge$1(ct,ut)}),it},_e}(),geoCreator=new GeoCreator,GeoModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(et,tt,nt){var it=geoSourceManager.getGeoResource(et.map);if(it&&it.type==="geoJSON"){var at=et.itemStyle=et.itemStyle||{};"color"in at||(at.color="#eee")}this.mergeDefaultAndTheme(et,nt),defaultEmphasis(et,"label",["show"])},_.prototype.optionUpdated=function(){var et=this,tt=this.option;tt.regions=geoCreator.getFilledRegions(tt.regions,tt.map,tt.nameMap,tt.nameProperty);var nt={};this._optionModelMap=reduce(tt.regions||[],function(it,at){var ot=at.name;return ot&&(it.set(ot,new Model(at,et,et.ecModel)),at.selected&&(nt[ot]=!0)),it},createHashMap()),tt.selectedMap||(tt.selectedMap=nt)},_.prototype.getRegionModel=function(et){return this._optionModelMap.get(et)||new Model(null,this,this.ecModel)},_.prototype.getFormattedLabel=function(et,tt){var nt=this.getRegionModel(et),it=tt==="normal"?nt.get(["label","formatter"]):nt.get(["emphasis","label","formatter"]),at={name:et};if(isFunction$3(it))return at.status=tt,it(at);if(isString$1(it))return it.replace("{a}",et??"")},_.prototype.setZoom=function(et){this.option.zoom=et},_.prototype.setCenter=function(et){this.option.center=et},_.prototype.select=function(et){var tt=this.option,nt=tt.selectedMode;if(nt){nt!=="multiple"&&(tt.selectedMap=null);var it=tt.selectedMap||(tt.selectedMap={});it[et]=!0}},_.prototype.unSelect=function(et){var tt=this.option.selectedMap;tt&&(tt[et]=!1)},_.prototype.toggleSelected=function(et){this[this.isSelected(et)?"unSelect":"select"](et)},_.prototype.isSelected=function(et){var tt=this.option.selectedMap;return!!(tt&&tt[et])},_.type="geo",_.layoutMode="box",_.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},_}(ComponentModel);function getCenterCoord(_e,_){return _e.pointToProjected?_e.pointToProjected(_):_e.pointToData(_)}function updateCenterAndZoom(_e,_,et,tt){var nt=_e.getZoom(),it=_e.getCenter(),at=_.zoom,ot=_e.projectedToPoint?_e.projectedToPoint(it):_e.dataToPoint(it);if(_.dx!=null&&_.dy!=null&&(ot[0]-=_.dx,ot[1]-=_.dy,_e.setCenter(getCenterCoord(_e,ot),tt)),at!=null){if(et){var st=et.min||0,dt=et.max||1/0;at=Math.max(Math.min(nt*at,dt),st)/nt}_e.scaleX*=at,_e.scaleY*=at;var ht=(_.originX-_e.x)*(at-1),ct=(_.originY-_e.y)*(at-1);_e.x-=ht,_e.y-=ct,_e.updateTransform(),_e.setCenter(getCenterCoord(_e,ot),tt),_e.setZoom(at*nt)}return{center:_e.getCenter(),zoom:_e.getZoom()}}var GeoView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.focusBlurEnabled=!0,et}return _.prototype.init=function(et,tt){this._api=tt},_.prototype.render=function(et,tt,nt,it){if(this._model=et,!et.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(nt));var at=this._mapDraw;at.draw(et,tt,nt,this,it),at.group.on("click",this._handleRegionClick,this),at.group.silent=et.get("silent"),this.group.add(at.group),this.updateSelectStatus(et,tt,nt)},_.prototype._handleRegionClick=function(et){var tt;findEventDispatcher(et.target,function(nt){return(tt=getECData(nt).eventData)!=null},!0),tt&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:tt.name})},_.prototype.updateSelectStatus=function(et,tt,nt){var it=this;this._mapDraw.group.traverse(function(at){var ot=getECData(at).eventData;if(ot)return it._model.isSelected(ot.name)?nt.enterSelect(at):nt.leaveSelect(at),!0})},_.prototype.findHighDownDispatchers=function(et){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(et,this._model)},_.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},_.type="geo",_}(ComponentView);function registerMap(_e,_,et){geoSourceManager.registerMap(_e,_,et)}function install$J(_e){_e.registerCoordinateSystem("geo",geoCreator),_e.registerComponentModel(GeoModel),_e.registerComponentView(GeoView),_e.registerImpl("registerMap",registerMap),_e.registerImpl("getMap",function(et){return geoSourceManager.getMapForUser(et)});function _(et,tt){tt.update="geo:updateSelectStatus",_e.registerAction(tt,function(nt,it){var at={},ot=[];return it.eachComponent({mainType:"geo",query:nt},function(st){st[et](nt.name);var dt=st.coordinateSystem;each$f(dt.regions,function(ct){at[ct.name]=st.isSelected(ct.name)||!1});var ht=[];each$f(at,function(ct,ut){at[ut]&&ht.push(ut)}),ot.push({geoIndex:st.componentIndex,name:ht})}),{selected:at,allSelected:ot,name:nt.name}})}_("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),_("select",{type:"geoSelect",event:"geoselected"}),_("unSelect",{type:"geoUnSelect",event:"geounselected"}),_e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(et,tt,nt){var it=et.componentType||"series";tt.eachComponent({mainType:it,query:et},function(at){var ot=at.coordinateSystem;if(ot.type==="geo"){var st=updateCenterAndZoom(ot,et,at.get("scaleLimit"),nt);at.setCenter&&at.setCenter(st.center),at.setZoom&&at.setZoom(st.zoom),it==="series"&&each$f(at.seriesGroup,function(dt){dt.setCenter(st.center),dt.setZoom(st.zoom)})}})})}function install$I(_e){use(install$J),_e.registerChartView(MapView),_e.registerSeriesModel(MapSeries),_e.registerLayout(mapSymbolLayout),_e.registerProcessor(_e.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",_e.registerAction)}function init(_e){var _=_e;_.hierNode={defaultAncestor:null,ancestor:_,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var et=[_],tt,nt;tt=et.pop();)if(nt=tt.children,tt.isExpand&&nt.length)for(var it=nt.length,at=it-1;at>=0;at--){var ot=nt[at];ot.hierNode={defaultAncestor:null,ancestor:ot,prelim:0,modifier:0,change:0,shift:0,i:at,thread:null},et.push(ot)}}function firstWalk(_e,_){var et=_e.isExpand?_e.children:[],tt=_e.parentNode.children,nt=_e.hierNode.i?tt[_e.hierNode.i-1]:null;if(et.length){executeShifts(_e);var it=(et[0].hierNode.prelim+et[et.length-1].hierNode.prelim)/2;nt?(_e.hierNode.prelim=nt.hierNode.prelim+_(_e,nt),_e.hierNode.modifier=_e.hierNode.prelim-it):_e.hierNode.prelim=it}else nt&&(_e.hierNode.prelim=nt.hierNode.prelim+_(_e,nt));_e.parentNode.hierNode.defaultAncestor=apportion(_e,nt,_e.parentNode.hierNode.defaultAncestor||tt[0],_)}function secondWalk(_e){var _=_e.hierNode.prelim+_e.parentNode.hierNode.modifier;_e.setLayout({x:_},!0),_e.hierNode.modifier+=_e.parentNode.hierNode.modifier}function separation(_e){return arguments.length?_e:defaultSeparation}function radialCoordinate(_e,_){return _e-=Math.PI/2,{x:_*Math.cos(_e),y:_*Math.sin(_e)}}function getViewRect$4(_e,_){return getLayoutRect(_e.getBoxLayoutParams(),{width:_.getWidth(),height:_.getHeight()})}function executeShifts(_e){for(var _=_e.children,et=_.length,tt=0,nt=0;--et>=0;){var it=_[et];it.hierNode.prelim+=tt,it.hierNode.modifier+=tt,nt+=it.hierNode.change,tt+=it.hierNode.shift+nt}}function apportion(_e,_,et,tt){if(_){for(var nt=_e,it=_e,at=it.parentNode.children[0],ot=_,st=nt.hierNode.modifier,dt=it.hierNode.modifier,ht=at.hierNode.modifier,ct=ot.hierNode.modifier;ot=nextRight(ot),it=nextLeft(it),ot&&it;){nt=nextRight(nt),at=nextLeft(at),nt.hierNode.ancestor=_e;var ut=ot.hierNode.prelim+ct-it.hierNode.prelim-dt+tt(ot,it);ut>0&&(moveSubtree(nextAncestor(ot,_e,et),_e,ut),dt+=ut,st+=ut),ct+=ot.hierNode.modifier,dt+=it.hierNode.modifier,st+=nt.hierNode.modifier,ht+=at.hierNode.modifier}ot&&!nextRight(nt)&&(nt.hierNode.thread=ot,nt.hierNode.modifier+=ct-st),it&&!nextLeft(at)&&(at.hierNode.thread=it,at.hierNode.modifier+=dt-ht,et=_e)}return et}function nextRight(_e){var _=_e.children;return _.length&&_e.isExpand?_[_.length-1]:_e.hierNode.thread}function nextLeft(_e){var _=_e.children;return _.length&&_e.isExpand?_[0]:_e.hierNode.thread}function nextAncestor(_e,_,et){return _e.hierNode.ancestor.parentNode===_.parentNode?_e.hierNode.ancestor:et}function moveSubtree(_e,_,et){var tt=et/(_.hierNode.i-_e.hierNode.i);_.hierNode.change-=tt,_.hierNode.shift+=et,_.hierNode.modifier+=et,_.hierNode.prelim+=et,_e.hierNode.change+=tt}function defaultSeparation(_e,_){return _e.parentNode===_.parentNode?1:2}var TreeEdgeShape=function(){function _e(){this.parentPoint=[],this.childPoints=[]}return _e}(),TreePath=function(_e){__extends$1(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},_.prototype.getDefaultShape=function(){return new TreeEdgeShape},_.prototype.buildPath=function(et,tt){var nt=tt.childPoints,it=nt.length,at=tt.parentPoint,ot=nt[0],st=nt[it-1];if(it===1){et.moveTo(at[0],at[1]),et.lineTo(ot[0],ot[1]);return}var dt=tt.orient,ht=dt==="TB"||dt==="BT"?0:1,ct=1-ht,ut=parsePercent(tt.forkPosition,1),ft=[];ft[ht]=at[ht],ft[ct]=at[ct]+(st[ct]-at[ct])*ut,et.moveTo(at[0],at[1]),et.lineTo(ft[0],ft[1]),et.moveTo(ot[0],ot[1]),ft[ht]=ot[ht],et.lineTo(ft[0],ft[1]),ft[ht]=st[ht],et.lineTo(ft[0],ft[1]),et.lineTo(st[0],st[1]);for(var gt=1;gt<it-1;gt++){var mt=nt[gt];et.moveTo(mt[0],mt[1]),ft[ht]=mt[ht],et.lineTo(ft[0],ft[1])}},_}(Path),TreeView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et._mainGroup=new Group$3,et}return _.prototype.init=function(et,tt){this._controller=new RoamController(tt.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},_.prototype.render=function(et,tt,nt){var it=et.getData(),at=et.layoutInfo,ot=this._mainGroup,st=et.get("layout");st==="radial"?(ot.x=at.x+at.width/2,ot.y=at.y+at.height/2):(ot.x=at.x,ot.y=at.y),this._updateViewCoordSys(et,nt),this._updateController(et,tt,nt);var dt=this._data;it.diff(dt).add(function(ht){symbolNeedsDraw(it,ht)&&updateNode(it,ht,null,ot,et)}).update(function(ht,ct){var ut=dt.getItemGraphicEl(ct);if(!symbolNeedsDraw(it,ht)){ut&&removeNode(dt,ct,ut,ot,et);return}updateNode(it,ht,ut,ot,et)}).remove(function(ht){var ct=dt.getItemGraphicEl(ht);ct&&removeNode(dt,ht,ct,ot,et)}).execute(),this._nodeScaleRatio=et.get("nodeScaleRatio"),this._updateNodeAndLinkScale(et),et.get("expandAndCollapse")===!0&&it.eachItemGraphicEl(function(ht,ct){ht.off("click").on("click",function(){nt.dispatchAction({type:"treeExpandAndCollapse",seriesId:et.id,dataIndex:ct})})}),this._data=it},_.prototype._updateViewCoordSys=function(et,tt){var nt=et.getData(),it=[];nt.each(function(ct){var ut=nt.getItemLayout(ct);ut&&!isNaN(ut.x)&&!isNaN(ut.y)&&it.push([+ut.x,+ut.y])});var at=[],ot=[];fromPoints(it,at,ot);var st=this._min,dt=this._max;ot[0]-at[0]===0&&(at[0]=st?st[0]:at[0]-1,ot[0]=dt?dt[0]:ot[0]+1),ot[1]-at[1]===0&&(at[1]=st?st[1]:at[1]-1,ot[1]=dt?dt[1]:ot[1]+1);var ht=et.coordinateSystem=new View;ht.zoomLimit=et.get("scaleLimit"),ht.setBoundingRect(at[0],at[1],ot[0]-at[0],ot[1]-at[1]),ht.setCenter(et.get("center"),tt),ht.setZoom(et.get("zoom")),this.group.attr({x:ht.x,y:ht.y,scaleX:ht.scaleX,scaleY:ht.scaleY}),this._min=at,this._max=ot},_.prototype._updateController=function(et,tt,nt){var it=this,at=this._controller,ot=this._controllerHost,st=this.group;at.setPointerChecker(function(dt,ht,ct){var ut=st.getBoundingRect();return ut.applyTransform(st.transform),ut.contain(ht,ct)&&!onIrrelevantElement(dt,nt,et)}),at.enable(et.get("roam")),ot.zoomLimit=et.get("scaleLimit"),ot.zoom=et.coordinateSystem.getZoom(),at.off("pan").off("zoom").on("pan",function(dt){updateViewOnPan(ot,dt.dx,dt.dy),nt.dispatchAction({seriesId:et.id,type:"treeRoam",dx:dt.dx,dy:dt.dy})}).on("zoom",function(dt){updateViewOnZoom(ot,dt.scale,dt.originX,dt.originY),nt.dispatchAction({seriesId:et.id,type:"treeRoam",zoom:dt.scale,originX:dt.originX,originY:dt.originY}),it._updateNodeAndLinkScale(et),nt.updateLabelLayout()})},_.prototype._updateNodeAndLinkScale=function(et){var tt=et.getData(),nt=this._getNodeGlobalScale(et);tt.eachItemGraphicEl(function(it,at){it.setSymbolScale(nt)})},_.prototype._getNodeGlobalScale=function(et){var tt=et.coordinateSystem;if(tt.type!=="view")return 1;var nt=this._nodeScaleRatio,it=tt.scaleX||1,at=tt.getZoom(),ot=(at-1)*nt+1;return ot/it},_.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},_.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},_.type="tree",_}(ChartView);function symbolNeedsDraw(_e,_){var et=_e.getItemLayout(_);return et&&!isNaN(et.x)&&!isNaN(et.y)}function updateNode(_e,_,et,tt,nt){var it=!et,at=_e.tree.getNodeByDataIndex(_),ot=at.getModel(),st=at.getVisual("style").fill,dt=at.isExpand===!1&&at.children.length!==0?st:"#fff",ht=_e.tree.root,ct=at.parentNode===ht?at:at.parentNode||at,ut=_e.getItemGraphicEl(ct.dataIndex),ft=ct.getLayout(),gt=ut?{x:ut.__oldX,y:ut.__oldY,rawX:ut.__radialOldRawX,rawY:ut.__radialOldRawY}:ft,mt=at.getLayout();it?(et=new Symbol$1(_e,_,null,{symbolInnerColor:dt,useNameLabel:!0}),et.x=gt.x,et.y=gt.y):et.updateData(_e,_,null,{symbolInnerColor:dt,useNameLabel:!0}),et.__radialOldRawX=et.__radialRawX,et.__radialOldRawY=et.__radialRawY,et.__radialRawX=mt.rawX,et.__radialRawY=mt.rawY,tt.add(et),_e.setItemGraphicEl(_,et),et.__oldX=et.x,et.__oldY=et.y,updateProps$1(et,{x:mt.x,y:mt.y},nt);var vt=et.getSymbolPath();if(nt.get("layout")==="radial"){var yt=ht.children[0],bt=yt.getLayout(),_t=yt.children.length,xt=void 0,St=void 0;if(mt.x===bt.x&&at.isExpand===!0&&yt.children.length){var Tt={x:(yt.children[0].getLayout().x+yt.children[_t-1].getLayout().x)/2,y:(yt.children[0].getLayout().y+yt.children[_t-1].getLayout().y)/2};xt=Math.atan2(Tt.y-bt.y,Tt.x-bt.x),xt<0&&(xt=Math.PI*2+xt),St=Tt.x<bt.x,St&&(xt=xt-Math.PI)}else xt=Math.atan2(mt.y-bt.y,mt.x-bt.x),xt<0&&(xt=Math.PI*2+xt),at.children.length===0||at.children.length!==0&&at.isExpand===!1?(St=mt.x<bt.x,St&&(xt=xt-Math.PI)):(St=mt.x>bt.x,St||(xt=xt-Math.PI));var wt=St?"left":"right",Ct=ot.getModel("label"),Et=Ct.get("rotate"),At=Et*(Math.PI/180),Pt=vt.getTextContent();Pt&&(vt.setTextConfig({position:Ct.get("position")||wt,rotation:Et==null?-xt:At,origin:"center"}),Pt.setStyle("verticalAlign","middle"))}var Rt=ot.get(["emphasis","focus"]),It=Rt==="relative"?concatArray(at.getAncestorsIndices(),at.getDescendantIndices()):Rt==="ancestor"?at.getAncestorsIndices():Rt==="descendant"?at.getDescendantIndices():null;It&&(getECData(et).focus=It),drawEdge(nt,at,ht,et,gt,ft,mt,tt),et.__edge&&(et.onHoverStateChange=function(Mt){if(Mt!=="blur"){var Ot=at.parentNode&&_e.getItemGraphicEl(at.parentNode.dataIndex);Ot&&Ot.hoverState===HOVER_STATE_BLUR||setStatesFlag(et.__edge,Mt)}})}function drawEdge(_e,_,et,tt,nt,it,at,ot){var st=_.getModel(),dt=_e.get("edgeShape"),ht=_e.get("layout"),ct=_e.getOrient(),ut=_e.get(["lineStyle","curveness"]),ft=_e.get("edgeForkPosition"),gt=st.getModel("lineStyle").getLineStyle(),mt=tt.__edge;if(dt==="curve")_.parentNode&&_.parentNode!==et&&(mt||(mt=tt.__edge=new BezierCurve({shape:getEdgeShape(ht,ct,ut,nt,nt)})),updateProps$1(mt,{shape:getEdgeShape(ht,ct,ut,it,at)},_e));else if(dt==="polyline"&&ht==="orthogonal"&&_!==et&&_.children&&_.children.length!==0&&_.isExpand===!0){for(var vt=_.children,yt=[],bt=0;bt<vt.length;bt++){var _t=vt[bt].getLayout();yt.push([_t.x,_t.y])}mt||(mt=tt.__edge=new TreePath({shape:{parentPoint:[at.x,at.y],childPoints:[[at.x,at.y]],orient:ct,forkPosition:ft}})),updateProps$1(mt,{shape:{parentPoint:[at.x,at.y],childPoints:yt}},_e)}mt&&!(dt==="polyline"&&!_.isExpand)&&(mt.useStyle(defaults({strokeNoScale:!0,fill:null},gt)),setStatesStylesFromModel(mt,st,"lineStyle"),setDefaultStateProxy(mt),ot.add(mt))}function removeNodeEdge(_e,_,et,tt,nt){var it=_.tree.root,at=getSourceNode(it,_e),ot=at.source,st=at.sourceLayout,dt=_.getItemGraphicEl(_e.dataIndex);if(dt){var ht=_.getItemGraphicEl(ot.dataIndex),ct=ht.__edge,ut=dt.__edge||(ot.isExpand===!1||ot.children.length===1?ct:void 0),ft=tt.get("edgeShape"),gt=tt.get("layout"),mt=tt.get("orient"),vt=tt.get(["lineStyle","curveness"]);ut&&(ft==="curve"?removeElement(ut,{shape:getEdgeShape(gt,mt,vt,st,st),style:{opacity:0}},tt,{cb:function(){et.remove(ut)},removeOpt:nt}):ft==="polyline"&&tt.get("layout")==="orthogonal"&&removeElement(ut,{shape:{parentPoint:[st.x,st.y],childPoints:[[st.x,st.y]]},style:{opacity:0}},tt,{cb:function(){et.remove(ut)},removeOpt:nt}))}}function getSourceNode(_e,_){for(var et=_.parentNode===_e?_:_.parentNode||_,tt;tt=et.getLayout(),tt==null;)et=et.parentNode===_e?et:et.parentNode||et;return{source:et,sourceLayout:tt}}function removeNode(_e,_,et,tt,nt){var it=_e.tree.getNodeByDataIndex(_),at=_e.tree.root,ot=getSourceNode(at,it).sourceLayout,st={duration:nt.get("animationDurationUpdate"),easing:nt.get("animationEasingUpdate")};removeElement(et,{x:ot.x+1,y:ot.y+1},nt,{cb:function(){tt.remove(et),_e.setItemGraphicEl(_,null)},removeOpt:st}),et.fadeOut(null,_e.hostModel,{fadeLabel:!0,animation:st}),it.children.forEach(function(dt){removeNodeEdge(dt,_e,tt,nt,st)}),removeNodeEdge(it,_e,tt,nt,st)}function getEdgeShape(_e,_,et,tt,nt){var it,at,ot,st,dt,ht,ct,ut;if(_e==="radial"){dt=tt.rawX,ct=tt.rawY,ht=nt.rawX,ut=nt.rawY;var ft=radialCoordinate(dt,ct),gt=radialCoordinate(dt,ct+(ut-ct)*et),mt=radialCoordinate(ht,ut+(ct-ut)*et),vt=radialCoordinate(ht,ut);return{x1:ft.x||0,y1:ft.y||0,x2:vt.x||0,y2:vt.y||0,cpx1:gt.x||0,cpy1:gt.y||0,cpx2:mt.x||0,cpy2:mt.y||0}}else dt=tt.x,ct=tt.y,ht=nt.x,ut=nt.y,(_==="LR"||_==="RL")&&(it=dt+(ht-dt)*et,at=ct,ot=ht+(dt-ht)*et,st=ut),(_==="TB"||_==="BT")&&(it=dt,at=ct+(ut-ct)*et,ot=ht,st=ut+(ct-ut)*et);return{x1:dt,y1:ct,x2:ht,y2:ut,cpx1:it,cpy1:at,cpx2:ot,cpy2:st}}var inner$e=makeInner();function linkSeriesData(_e){var _=_e.mainData,et=_e.datas;et||(et={main:_},_e.datasAttr={main:"data"}),_e.datas=_e.mainData=null,linkAll(_,et,_e),each$f(et,function(tt){each$f(_.TRANSFERABLE_METHODS,function(nt){tt.wrapMethod(nt,curry$1(transferInjection,_e))})}),_.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,_e)),each$f(_.CHANGABLE_METHODS,function(tt){_.wrapMethod(tt,curry$1(changeInjection,_e))}),assert(et[_.dataType]===_)}function transferInjection(_e,_){if(isMainData(this)){var et=extend({},inner$e(this).datas);et[this.dataType]=_,linkAll(_,et,_e)}else linkSingle(_,this.dataType,inner$e(this).mainData,_e);return _}function changeInjection(_e,_){return _e.struct&&_e.struct.update(),_}function cloneShallowInjection(_e,_){return each$f(inner$e(_).datas,function(et,tt){et!==_&&linkSingle(et.cloneShallow(),tt,_,_e)}),_}function getLinkedData(_e){var _=inner$e(this).mainData;return _e==null||_==null?_:inner$e(_).datas[_e]}function getLinkedDataAll(){var _e=inner$e(this).mainData;return _e==null?[{data:_e}]:map$1(keys(inner$e(_e).datas),function(_){return{type:_,data:inner$e(_e).datas[_]}})}function isMainData(_e){return inner$e(_e).mainData===_e}function linkAll(_e,_,et){inner$e(_e).datas={},each$f(_,function(tt,nt){linkSingle(tt,nt,_e,et)})}function linkSingle(_e,_,et,tt){inner$e(et).datas[_]=_e,inner$e(_e).mainData=et,_e.dataType=_,tt.struct&&(_e[tt.structAttr]=tt.struct,tt.struct[tt.datasAttr[_]]=_e),_e.getLinkedData=getLinkedData,_e.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function _e(_,et){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=_||"",this.hostTree=et}return _e.prototype.isRemoved=function(){return this.dataIndex<0},_e.prototype.eachNode=function(_,et,tt){isFunction$3(_)&&(tt=et,et=_,_=null),_=_||{},isString$1(_)&&(_={order:_});var nt=_.order||"preorder",it=this[_.attr||"children"],at;nt==="preorder"&&(at=et.call(tt,this));for(var ot=0;!at&&ot<it.length;ot++)it[ot].eachNode(_,et,tt);nt==="postorder"&&et.call(tt,this)},_e.prototype.updateDepthAndHeight=function(_){var et=0;this.depth=_;for(var tt=0;tt<this.children.length;tt++){var nt=this.children[tt];nt.updateDepthAndHeight(_+1),nt.height>et&&(et=nt.height)}this.height=et+1},_e.prototype.getNodeById=function(_){if(this.getId()===_)return this;for(var et=0,tt=this.children,nt=tt.length;et<nt;et++){var it=tt[et].getNodeById(_);if(it)return it}},_e.prototype.contains=function(_){if(_===this)return!0;for(var et=0,tt=this.children,nt=tt.length;et<nt;et++){var it=tt[et].contains(_);if(it)return it}},_e.prototype.getAncestors=function(_){for(var et=[],tt=_?this:this.parentNode;tt;)et.push(tt),tt=tt.parentNode;return et.reverse(),et},_e.prototype.getAncestorsIndices=function(){for(var _=[],et=this;et;)_.push(et.dataIndex),et=et.parentNode;return _.reverse(),_},_e.prototype.getDescendantIndices=function(){var _=[];return this.eachNode(function(et){_.push(et.dataIndex)}),_},_e.prototype.getValue=function(_){var et=this.hostTree.data;return et.getStore().get(et.getDimensionIndex(_||"value"),this.dataIndex)},_e.prototype.setLayout=function(_,et){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,_,et)},_e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},_e.prototype.getModel=function(_){if(!(this.dataIndex<0)){var et=this.hostTree,tt=et.data.getItemModel(this.dataIndex);return tt.getModel(_)}},_e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},_e.prototype.setVisual=function(_,et){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,_,et)},_e.prototype.getVisual=function(_){return this.hostTree.data.getItemVisual(this.dataIndex,_)},_e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},_e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},_e.prototype.getChildIndex=function(){if(this.parentNode){for(var _=this.parentNode.children,et=0;et<_.length;++et)if(_[et]===this)return et;return-1}return-1},_e.prototype.isAncestorOf=function(_){for(var et=_.parentNode;et;){if(et===this)return!0;et=et.parentNode}return!1},_e.prototype.isDescendantOf=function(_){return _!==this&&_.isAncestorOf(this)},_e}(),Tree=function(){function _e(_){this.type="tree",this._nodes=[],this.hostModel=_}return _e.prototype.eachNode=function(_,et,tt){this.root.eachNode(_,et,tt)},_e.prototype.getNodeByDataIndex=function(_){var et=this.data.getRawIndex(_);return this._nodes[et]},_e.prototype.getNodeById=function(_){return this.root.getNodeById(_)},_e.prototype.update=function(){for(var _=this.data,et=this._nodes,tt=0,nt=et.length;tt<nt;tt++)et[tt].dataIndex=-1;for(var tt=0,nt=_.count();tt<nt;tt++)et[_.getRawIndex(tt)].dataIndex=tt},_e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},_e.createTree=function(_,et,tt){var nt=new _e(et),it=[],at=1;ot(_);function ot(ht,ct){var ut=ht.value;at=Math.max(at,isArray$1(ut)?ut.length:1),it.push(ht);var ft=new TreeNode(convertOptionIdName(ht.name,""),nt);ct?addChild(ft,ct):nt.root=ft,nt._nodes.push(ft);var gt=ht.children;if(gt)for(var mt=0;mt<gt.length;mt++)ot(gt[mt],ft)}nt.root.updateDepthAndHeight(0);var st=prepareSeriesDataSchema(it,{coordDimensions:["value"],dimensionsCount:at}).dimensions,dt=new SeriesData(st,et);return dt.initData(it),tt&&tt(dt),linkSeriesData({mainData:dt,struct:nt,structAttr:"tree"}),nt.update(),nt},_e}();function addChild(_e,_){var et=_.children;_e.parentNode!==_&&(et.push(_e),_e.parentNode=_)}function retrieveTargetInfo(_e,_,et){if(_e&&indexOf(_,_e.type)>=0){var tt=et.getData().tree.root,nt=_e.targetNode;if(isString$1(nt)&&(nt=tt.getNodeById(nt)),nt&&tt.contains(nt))return{node:nt};var it=_e.targetNodeId;if(it!=null&&(nt=tt.getNodeById(it)))return{node:nt}}}function getPathToRoot(_e){for(var _=[];_e;)_e=_e.parentNode,_e&&_.push(_e);return _.reverse()}function aboveViewRoot(_e,_){var et=getPathToRoot(_e);return indexOf(et,_)>=0}function wrapTreePathInfo(_e,_){for(var et=[];_e;){var tt=_e.dataIndex;et.push({name:_e.name,dataIndex:tt,value:_.getRawValue(tt)}),_e=_e.parentNode}return et.reverse(),et}var TreeSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.hasSymbolVisual=!0,et.ignoreStyleOnData=!0,et}return _.prototype.getInitialData=function(et){var tt={name:et.name,children:et.data},nt=et.leaves||{},it=new Model(nt,this,this.ecModel),at=Tree.createTree(tt,this,ot);function ot(ct){ct.wrapMethod("getItemModel",function(ut,ft){var gt=at.getNodeByDataIndex(ft);return gt&&gt.children.length&&gt.isExpand||(ut.parentModel=it),ut})}var st=0;at.eachNode("preorder",function(ct){ct.depth>st&&(st=ct.depth)});var dt=et.expandAndCollapse,ht=dt&&et.initialTreeDepth>=0?et.initialTreeDepth:st;return at.root.eachNode("preorder",function(ct){var ut=ct.hostTree.data.getRawDataItem(ct.dataIndex);ct.isExpand=ut&&ut.collapsed!=null?!ut.collapsed:ct.depth<=ht}),at.data},_.prototype.getOrient=function(){var et=this.get("orient");return et==="horizontal"?et="LR":et==="vertical"&&(et="TB"),et},_.prototype.setZoom=function(et){this.option.zoom=et},_.prototype.setCenter=function(et){this.option.center=et},_.prototype.formatTooltip=function(et,tt,nt){for(var it=this.getData().tree,at=it.root.children[0],ot=it.getNodeByDataIndex(et),st=ot.getValue(),dt=ot.name;ot&&ot!==at;)dt=ot.parentNode.name+"."+dt,ot=ot.parentNode;return createTooltipMarkup("nameValue",{name:dt,value:st,noValue:isNaN(st)||st==null})},_.prototype.getDataParams=function(et){var tt=_e.prototype.getDataParams.apply(this,arguments),nt=this.getData().tree.getNodeByDataIndex(et);return tt.treeAncestors=wrapTreePathInfo(nt,this),tt.collapsed=!nt.isExpand,tt},_.type="series.tree",_.layoutMode="box",_.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},_}(SeriesModel);function eachAfter(_e,_,et){for(var tt=[_e],nt=[],it;it=tt.pop();)if(nt.push(it),it.isExpand){var at=it.children;if(at.length)for(var ot=0;ot<at.length;ot++)tt.push(at[ot])}for(;it=nt.pop();)_(it,et)}function eachBefore(_e,_){for(var et=[_e],tt;tt=et.pop();)if(_(tt),tt.isExpand){var nt=tt.children;if(nt.length)for(var it=nt.length-1;it>=0;it--)et.push(nt[it])}}function treeLayout(_e,_){_e.eachSeriesByType("tree",function(et){commonLayout(et,_)})}function commonLayout(_e,_){var et=getViewRect$4(_e,_);_e.layoutInfo=et;var tt=_e.get("layout"),nt=0,it=0,at=null;tt==="radial"?(nt=2*Math.PI,it=Math.min(et.height,et.width)/2,at=separation(function(_t,xt){return(_t.parentNode===xt.parentNode?1:2)/_t.depth})):(nt=et.width,it=et.height,at=separation());var ot=_e.getData().tree.root,st=ot.children[0];if(st){init(ot),eachAfter(st,firstWalk,at),ot.hierNode.modifier=-st.hierNode.prelim,eachBefore(st,secondWalk);var dt=st,ht=st,ct=st;eachBefore(st,function(_t){var xt=_t.getLayout().x;xt<dt.getLayout().x&&(dt=_t),xt>ht.getLayout().x&&(ht=_t),_t.depth>ct.depth&&(ct=_t)});var ut=dt===ht?1:at(dt,ht)/2,ft=ut-dt.getLayout().x,gt=0,mt=0,vt=0,yt=0;if(tt==="radial")gt=nt/(ht.getLayout().x+ut+ft),mt=it/(ct.depth-1||1),eachBefore(st,function(_t){vt=(_t.getLayout().x+ft)*gt,yt=(_t.depth-1)*mt;var xt=radialCoordinate(vt,yt);_t.setLayout({x:xt.x,y:xt.y,rawX:vt,rawY:yt},!0)});else{var bt=_e.getOrient();bt==="RL"||bt==="LR"?(mt=it/(ht.getLayout().x+ut+ft),gt=nt/(ct.depth-1||1),eachBefore(st,function(_t){yt=(_t.getLayout().x+ft)*mt,vt=bt==="LR"?(_t.depth-1)*gt:nt-(_t.depth-1)*gt,_t.setLayout({x:vt,y:yt},!0)})):(bt==="TB"||bt==="BT")&&(gt=nt/(ht.getLayout().x+ut+ft),mt=it/(ct.depth-1||1),eachBefore(st,function(_t){vt=(_t.getLayout().x+ft)*gt,yt=bt==="TB"?(_t.depth-1)*mt:it-(_t.depth-1)*mt,_t.setLayout({x:vt,y:yt},!0)}))}}}function treeVisual(_e){_e.eachSeriesByType("tree",function(_){var et=_.getData(),tt=et.tree;tt.eachNode(function(nt){var it=nt.getModel(),at=it.getModel("itemStyle").getItemStyle(),ot=et.ensureUniqueItemVisual(nt.dataIndex,"style");extend(ot,at)})})}function installTreeAction(_e){_e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(_,et){et.eachComponent({mainType:"series",subType:"tree",query:_},function(tt){var nt=_.dataIndex,it=tt.getData().tree,at=it.getNodeByDataIndex(nt);at.isExpand=!at.isExpand})}),_e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(_,et,tt){et.eachComponent({mainType:"series",subType:"tree",query:_},function(nt){var it=nt.coordinateSystem,at=updateCenterAndZoom(it,_,void 0,tt);nt.setCenter&&nt.setCenter(at.center),nt.setZoom&&nt.setZoom(at.zoom)})})}function install$H(_e){_e.registerChartView(TreeView),_e.registerSeriesModel(TreeSeriesModel),_e.registerLayout(treeLayout),_e.registerVisual(treeVisual),installTreeAction(_e)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(_e){for(var _=0;_<actionTypes.length;_++)_e.registerAction({type:actionTypes[_],update:"updateView"},noop);_e.registerAction({type:"treemapRootToNode",update:"updateView"},function(et,tt){tt.eachComponent({mainType:"series",subType:"treemap",query:et},nt);function nt(it,at){var ot=["treemapZoomToNode","treemapRootToNode"],st=retrieveTargetInfo(et,ot,it);if(st){var dt=it.getViewRoot();dt&&(et.direction=aboveViewRoot(dt,st.node)?"rollUp":"drillDown"),it.resetViewRoot(st.node)}}})}function enableAriaDecalForTree(_e){var _=_e.getData(),et=_.tree,tt={};et.eachNode(function(nt){for(var it=nt;it&&it.depth>1;)it=it.parentNode;var at=getDecalFromPalette(_e.ecModel,it.name||it.dataIndex+"",tt);nt.setVisual("decal",at)})}var TreemapSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.preventUsingHoverLayer=!0,et}return _.prototype.getInitialData=function(et,tt){var nt={name:et.name,children:et.data};completeTreeValue$1(nt);var it=et.levels||[],at=this.designatedVisualItemStyle={},ot=new Model({itemStyle:at},this,tt);it=et.levels=setDefault(it,tt);var st=map$1(it||[],function(ct){return new Model(ct,ot,tt)},this),dt=Tree.createTree(nt,this,ht);function ht(ct){ct.wrapMethod("getItemModel",function(ut,ft){var gt=dt.getNodeByDataIndex(ft),mt=gt?st[gt.depth]:null;return ut.parentModel=mt||ot,ut})}return dt.data},_.prototype.optionUpdated=function(){this.resetViewRoot()},_.prototype.formatTooltip=function(et,tt,nt){var it=this.getData(),at=this.getRawValue(et),ot=it.getName(et);return createTooltipMarkup("nameValue",{name:ot,value:at})},_.prototype.getDataParams=function(et){var tt=_e.prototype.getDataParams.apply(this,arguments),nt=this.getData().tree.getNodeByDataIndex(et);return tt.treeAncestors=wrapTreePathInfo(nt,this),tt.treePathInfo=tt.treeAncestors,tt},_.prototype.setLayoutInfo=function(et){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,et)},_.prototype.mapIdToIndex=function(et){var tt=this._idIndexMap;tt||(tt=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var nt=tt.get(et);return nt==null&&tt.set(et,nt=this._idIndexMapCount++),nt},_.prototype.getViewRoot=function(){return this._viewRoot},_.prototype.resetViewRoot=function(et){et?this._viewRoot=et:et=this._viewRoot;var tt=this.getRawData().tree.root;(!et||et!==tt&&!tt.contains(et))&&(this._viewRoot=tt)},_.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},_.type="series.treemap",_.layoutMode="box",_.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},_}(SeriesModel);function completeTreeValue$1(_e){var _=0;each$f(_e.children,function(tt){completeTreeValue$1(tt);var nt=tt.value;isArray$1(nt)&&(nt=nt[0]),_+=nt});var et=_e.value;isArray$1(et)&&(et=et[0]),(et==null||isNaN(et))&&(et=_),et<0&&(et=0),isArray$1(_e.value)?_e.value[0]=et:_e.value=et}function setDefault(_e,_){var et=normalizeToArray(_.get("color")),tt=normalizeToArray(_.get(["aria","decal","decals"]));if(et){_e=_e||[];var nt,it;each$f(_e,function(ot){var st=new Model(ot),dt=st.get("color"),ht=st.get("decal");(st.get(["itemStyle","color"])||dt&&dt!=="none")&&(nt=!0),(st.get(["itemStyle","decal"])||ht&&ht!=="none")&&(it=!0)});var at=_e[0]||(_e[0]={});return nt||(at.color=et.slice()),!it&&tt&&(at.decal=tt.slice()),_e}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function _e(_){this.group=new Group$3,_.add(this.group)}return _e.prototype.render=function(_,et,tt,nt){var it=_.getModel("breadcrumb"),at=this.group;if(at.removeAll(),!(!it.get("show")||!tt)){var ot=it.getModel("itemStyle"),st=it.getModel("emphasis"),dt=ot.getModel("textStyle"),ht=st.getModel(["itemStyle","textStyle"]),ct={pos:{left:it.get("left"),right:it.get("right"),top:it.get("top"),bottom:it.get("bottom")},box:{width:et.getWidth(),height:et.getHeight()},emptyItemWidth:it.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(tt,ct,dt),this._renderContent(_,ct,ot,st,dt,ht,nt),positionElement(at,ct.pos,ct.box)}},_e.prototype._prepare=function(_,et,tt){for(var nt=_;nt;nt=nt.parentNode){var it=convertOptionIdName(nt.getModel().get("name"),""),at=tt.getTextRect(it),ot=Math.max(at.width+TEXT_PADDING*2,et.emptyItemWidth);et.totalWidth+=ot+ITEM_GAP,et.renderList.push({node:nt,text:it,width:ot})}},_e.prototype._renderContent=function(_,et,tt,nt,it,at,ot){for(var st=0,dt=et.emptyItemWidth,ht=_.get(["breadcrumb","height"]),ct=getAvailableSize(et.pos,et.box),ut=et.totalWidth,ft=et.renderList,gt=nt.getModel("itemStyle").getItemStyle(),mt=ft.length-1;mt>=0;mt--){var vt=ft[mt],yt=vt.node,bt=vt.width,_t=vt.text;ut>ct.width&&(ut-=bt-dt,bt=dt,_t=null);var xt=new Polygon({shape:{points:makeItemPoints(st,0,bt,ht,mt===ft.length-1,mt===0)},style:defaults(tt.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle$1(it,{text:_t})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(ot,yt)});xt.disableLabelAnimation=!0,xt.getTextContent().ensureState("emphasis").style=createTextStyle$1(at,{text:_t}),xt.ensureState("emphasis").style=gt,toggleHoverEmphasis(xt,nt.get("focus"),nt.get("blurScope"),nt.get("disabled")),this.group.add(xt),packEventData(xt,_,yt),st+=bt+ITEM_GAP}},_e.prototype.remove=function(){this.group.removeAll()},_e}();function makeItemPoints(_e,_,et,tt,nt,it){var at=[[nt?_e:_e-ARRAY_LENGTH,_],[_e+et,_],[_e+et,_+tt],[nt?_e:_e-ARRAY_LENGTH,_+tt]];return!it&&at.splice(2,0,[_e+et+ARRAY_LENGTH,_+tt/2]),!nt&&at.push([_e,_+tt/2]),at}function packEventData(_e,_,et){getECData(_e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:_.componentIndex,seriesIndex:_.seriesIndex,seriesName:_.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:et&&et.dataIndex,name:et&&et.name},treePathInfo:et&&wrapTreePathInfo(et,_)}}var AnimationWrap=function(){function _e(){this._storage=[],this._elExistsMap={}}return _e.prototype.add=function(_,et,tt,nt,it){return this._elExistsMap[_.id]?!1:(this._elExistsMap[_.id]=!0,this._storage.push({el:_,target:et,duration:tt,delay:nt,easing:it}),!0)},_e.prototype.finished=function(_){return this._finishedCallback=_,this},_e.prototype.start=function(){for(var _=this,et=this._storage.length,tt=function(){et--,et<=0&&(_._storage.length=0,_._elExistsMap={},_._finishedCallback&&_._finishedCallback())},nt=0,it=this._storage.length;nt<it;nt++){var at=this._storage[nt];at.el.animateTo(at.target,{duration:at.duration,delay:at.delay,easing:at.easing,setToFinal:!0,done:tt,aborted:tt})}return this},_e}();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(_e){var _=getStateItemStyle(_e);return _.stroke=_.fill=_.lineWidth=null,_},inner$d=makeInner(),TreemapView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et._state="ready",et._storage=createStorage(),et}return _.prototype.render=function(et,tt,nt,it){var at=tt.findComponents({mainType:"series",subType:"treemap",query:it});if(!(indexOf(at,et)<0)){this.seriesModel=et,this.api=nt,this.ecModel=tt;var ot=["treemapZoomToNode","treemapRootToNode"],st=retrieveTargetInfo(it,ot,et),dt=it&&it.type,ht=et.layoutInfo,ct=!this._oldTree,ut=this._storage,ft=dt==="treemapRootToNode"&&st&&ut?{rootNodeGroup:ut.nodeGroup[st.node.getRawIndex()],direction:it.direction}:null,gt=this._giveContainerGroup(ht),mt=et.get("animation"),vt=this._doRender(gt,et,ft);mt&&!ct&&(!dt||dt==="treemapZoomToNode"||dt==="treemapRootToNode")?this._doAnimation(gt,vt,et,ft):vt.renderFinally(),this._resetController(nt),this._renderBreadcrumb(et,nt,st)}},_.prototype._giveContainerGroup=function(et){var tt=this._containerGroup;return tt||(tt=this._containerGroup=new Group$2,this._initEvents(tt),this.group.add(tt)),tt.x=et.x,tt.y=et.y,tt},_.prototype._doRender=function(et,tt,nt){var it=tt.getData().tree,at=this._oldTree,ot=createStorage(),st=createStorage(),dt=this._storage,ht=[];function ct(bt,_t,xt,St){return renderNode(tt,st,dt,nt,ot,ht,bt,_t,xt,St)}mt(it.root?[it.root]:[],at&&at.root?[at.root]:[],et,it===at||!at,0);var ut=vt(dt);if(this._oldTree=it,this._storage=st,this._controllerHost){var ft=this.seriesModel.layoutInfo,gt=it.root.getLayout();gt.width===ft.width&&gt.height===ft.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:ot,willDeleteEls:ut,renderFinally:yt};function mt(bt,_t,xt,St,Tt){St?(_t=bt,each$f(bt,function(Et,At){!Et.isRemoved()&&Ct(At,At)})):new DataDiffer(_t,bt,wt,wt).add(Ct).update(Ct).remove(curry$1(Ct,null)).execute();function wt(Et){return Et.getId()}function Ct(Et,At){var Pt=Et!=null?bt[Et]:null,Rt=At!=null?_t[At]:null,It=ct(Pt,Rt,xt,Tt);It&&mt(Pt&&Pt.viewChildren||[],Rt&&Rt.viewChildren||[],It,St,Tt+1)}}function vt(bt){var _t=createStorage();return bt&&each$f(bt,function(xt,St){var Tt=_t[St];each$f(xt,function(wt){wt&&(Tt.push(wt),inner$d(wt).willDelete=!0)})}),_t}function yt(){each$f(ut,function(bt){each$f(bt,function(_t){_t.parent&&_t.parent.remove(_t)})}),each$f(ht,function(bt){bt.invisible=!0,bt.dirty()})}},_.prototype._doAnimation=function(et,tt,nt,it){var at=nt.get("animationDurationUpdate"),ot=nt.get("animationEasing"),st=(isFunction$3(at)?0:at)||0,dt=(isFunction$3(ot)?null:ot)||"cubicOut",ht=createWrap();each$f(tt.willDeleteEls,function(ct,ut){each$f(ct,function(ft,gt){if(!ft.invisible){var mt=ft.parent,vt,yt=inner$d(mt);if(it&&it.direction==="drillDown")vt=mt===it.rootNodeGroup?{shape:{x:0,y:0,width:yt.nodeWidth,height:yt.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var bt=0,_t=0;yt.willDelete||(bt=yt.nodeWidth/2,_t=yt.nodeHeight/2),vt=ut==="nodeGroup"?{x:bt,y:_t,style:{opacity:0}}:{shape:{x:bt,y:_t,width:0,height:0},style:{opacity:0}}}vt&&ht.add(ft,vt,st,0,dt)}})}),each$f(this._storage,function(ct,ut){each$f(ct,function(ft,gt){var mt=tt.lastsForAnimation[ut][gt],vt={};mt&&(ft instanceof Group$3?mt.oldX!=null&&(vt.x=ft.x,vt.y=ft.y,ft.x=mt.oldX,ft.y=mt.oldY):(mt.oldShape&&(vt.shape=extend({},ft.shape),ft.setShape(mt.oldShape)),mt.fadein?(ft.setStyle("opacity",0),vt.style={opacity:1}):ft.style.opacity!==1&&(vt.style={opacity:1})),ht.add(ft,vt,st,0,dt))})},this),this._state="animating",ht.finished(bind$2(function(){this._state="ready",tt.renderFinally()},this)).start()},_.prototype._resetController=function(et){var tt=this._controller,nt=this._controllerHost;nt||(this._controllerHost={target:this.group},nt=this._controllerHost),tt||(tt=this._controller=new RoamController(et.getZr()),tt.enable(this.seriesModel.get("roam")),nt.zoomLimit=this.seriesModel.get("scaleLimit"),nt.zoom=this.seriesModel.get("zoom"),tt.on("pan",bind$2(this._onPan,this)),tt.on("zoom",bind$2(this._onZoom,this)));var it=new BoundingRect(0,0,et.getWidth(),et.getHeight());tt.setPointerChecker(function(at,ot,st){return it.contain(ot,st)})},_.prototype._clearController=function(){var et=this._controller;this._controllerHost=null,et&&(et.dispose(),et=null)},_.prototype._onPan=function(et){if(this._state!=="animating"&&(Math.abs(et.dx)>DRAG_THRESHOLD||Math.abs(et.dy)>DRAG_THRESHOLD)){var tt=this.seriesModel.getData().tree.root;if(!tt)return;var nt=tt.getLayout();if(!nt)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:nt.x+et.dx,y:nt.y+et.dy,width:nt.width,height:nt.height}})}},_.prototype._onZoom=function(et){var tt=et.originX,nt=et.originY,it=et.scale;if(this._state!=="animating"){var at=this.seriesModel.getData().tree.root;if(!at)return;var ot=at.getLayout();if(!ot)return;var st=new BoundingRect(ot.x,ot.y,ot.width,ot.height),dt=null,ht=this._controllerHost;dt=ht.zoomLimit;var ct=ht.zoom=ht.zoom||1;if(ct*=it,dt){var ut=dt.min||0,ft=dt.max||1/0;ct=Math.max(Math.min(ft,ct),ut)}var gt=ct/ht.zoom;ht.zoom=ct;var mt=this.seriesModel.layoutInfo;tt-=mt.x,nt-=mt.y;var vt=create$1();translate(vt,vt,[-tt,-nt]),scale$1(vt,vt,[gt,gt]),translate(vt,vt,[tt,nt]),st.applyTransform(vt),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:st.x,y:st.y,width:st.width,height:st.height}})}},_.prototype._initEvents=function(et){var tt=this;et.on("click",function(nt){if(tt._state==="ready"){var it=tt.seriesModel.get("nodeClick",!0);if(it){var at=tt.findTarget(nt.offsetX,nt.offsetY);if(at){var ot=at.node;if(ot.getLayout().isLeafRoot)tt._rootToNode(at);else if(it==="zoomToNode")tt._zoomToNode(at);else if(it==="link"){var st=ot.hostTree.data.getItemModel(ot.dataIndex),dt=st.get("link",!0),ht=st.get("target",!0)||"blank";dt&&windowOpen(dt,ht)}}}}},this)},_.prototype._renderBreadcrumb=function(et,tt,nt){var it=this;nt||(nt=et.get("leafDepth",!0)!=null?{node:et.getViewRoot()}:this.findTarget(tt.getWidth()/2,tt.getHeight()/2),nt||(nt={node:et.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(et,tt,nt.node,function(at){it._state!=="animating"&&(aboveViewRoot(et.getViewRoot(),at)?it._rootToNode({node:at}):it._zoomToNode({node:at}))})},_.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},_.prototype.dispose=function(){this._clearController()},_.prototype._zoomToNode=function(et){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:et.node})},_.prototype._rootToNode=function(et){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:et.node})},_.prototype.findTarget=function(et,tt){var nt,it=this.seriesModel.getViewRoot();return it.eachNode({attr:"viewChildren",order:"preorder"},function(at){var ot=this._storage.background[at.getRawIndex()];if(ot){var st=ot.transformCoordToLocal(et,tt),dt=ot.shape;if(dt.x<=st[0]&&st[0]<=dt.x+dt.width&&dt.y<=st[1]&&st[1]<=dt.y+dt.height)nt={node:at,offsetX:st[0],offsetY:st[1]};else return!1}},this),nt},_.type="treemap",_}(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(_e,_,et,tt,nt,it,at,ot,st,dt){if(!at)return;var ht=at.getLayout(),ct=_e.getData(),ut=at.getModel();if(ct.setItemGraphicEl(at.dataIndex,null),!ht||!ht.isInView)return;var ft=ht.width,gt=ht.height,mt=ht.borderWidth,vt=ht.invisible,yt=at.getRawIndex(),bt=ot&&ot.getRawIndex(),_t=at.viewChildren,xt=ht.upperHeight,St=_t&&_t.length,Tt=ut.getModel("itemStyle"),wt=ut.getModel(["emphasis","itemStyle"]),Ct=ut.getModel(["blur","itemStyle"]),Et=ut.getModel(["select","itemStyle"]),At=Tt.get("borderRadius")||0,Pt=Jt("nodeGroup",Group$2);if(!Pt)return;if(st.add(Pt),Pt.x=ht.x||0,Pt.y=ht.y||0,Pt.markRedraw(),inner$d(Pt).nodeWidth=ft,inner$d(Pt).nodeHeight=gt,ht.isAboveViewRoot)return Pt;var Rt=Jt("background",Rect$1,dt,Z2_BG);Rt&&Vt(Pt,Rt,St&&ht.upperLabelHeight);var It=ut.getModel("emphasis"),Mt=It.get("focus"),Ot=It.get("blurScope"),$t=It.get("disabled"),Lt=Mt==="ancestor"?at.getAncestorsIndices():Mt==="descendant"?at.getDescendantIndices():Mt;if(St)isHighDownDispatcher(Pt)&&setAsHighDownDispatcher(Pt,!1),Rt&&(setAsHighDownDispatcher(Rt,!$t),ct.setItemGraphicEl(at.dataIndex,Rt),enableHoverFocus(Rt,Lt,Ot));else{var kt=Jt("content",Rect$1,dt,Z2_CONTENT);kt&&zt(Pt,kt),Rt.disableMorphing=!0,Rt&&isHighDownDispatcher(Rt)&&setAsHighDownDispatcher(Rt,!1),setAsHighDownDispatcher(Pt,!$t),ct.setItemGraphicEl(at.dataIndex,Pt);var Nt=ut.getShallow("cursor");Nt&&kt.attr("cursor",Nt),enableHoverFocus(Pt,Lt,Ot)}return Pt;function Vt(Zt,Kt,ur){var ir=getECData(Kt);if(ir.dataIndex=at.dataIndex,ir.seriesIndex=_e.seriesIndex,Kt.setShape({x:0,y:0,width:ft,height:gt,r:At}),vt)Xt(Kt);else{Kt.invisible=!1;var hr=at.getVisual("style"),fr=hr.stroke,mr=getItemStyleNormal(Tt);mr.fill=fr;var br=getStateItemStyle(wt);br.fill=wt.get("borderColor");var Er=getStateItemStyle(Ct);Er.fill=Ct.get("borderColor");var kr=getStateItemStyle(Et);if(kr.fill=Et.get("borderColor"),ur){var jr=ft-2*mt;Wt(Kt,fr,hr.opacity,{x:mt,y:0,width:jr,height:xt})}else Kt.removeTextContent();Kt.setStyle(mr),Kt.ensureState("emphasis").style=br,Kt.ensureState("blur").style=Er,Kt.ensureState("select").style=kr,setDefaultStateProxy(Kt)}Zt.add(Kt)}function zt(Zt,Kt){var ur=getECData(Kt);ur.dataIndex=at.dataIndex,ur.seriesIndex=_e.seriesIndex;var ir=Math.max(ft-2*mt,0),hr=Math.max(gt-2*mt,0);if(Kt.culling=!0,Kt.setShape({x:mt,y:mt,width:ir,height:hr,r:At}),vt)Xt(Kt);else{Kt.invisible=!1;var fr=at.getVisual("style"),mr=fr.fill,br=getItemStyleNormal(Tt);br.fill=mr,br.decal=fr.decal;var Er=getStateItemStyle(wt),kr=getStateItemStyle(Ct),jr=getStateItemStyle(Et);Wt(Kt,mr,fr.opacity,null),Kt.setStyle(br),Kt.ensureState("emphasis").style=Er,Kt.ensureState("blur").style=kr,Kt.ensureState("select").style=jr,setDefaultStateProxy(Kt)}Zt.add(Kt)}function Xt(Zt){!Zt.invisible&&it.push(Zt)}function Wt(Zt,Kt,ur,ir){var hr=ut.getModel(ir?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),fr=convertOptionIdName(ut.get("name"),null),mr=hr.getShallow("show");setLabelStyle(Zt,getLabelStatesModels(ut,ir?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:mr?fr:null,inheritColor:Kt,defaultOpacity:ur,labelFetcher:_e,labelDataIndex:at.dataIndex});var br=Zt.getTextContent();if(br){var Er=br.style,kr=normalizeCssArray$1(Er.padding||0);ir&&(Zt.setTextConfig({layoutRect:ir}),br.disableLabelLayout=!0),br.beforeUpdate=function(){var Hr=Math.max((ir?ir.width:Zt.shape.width)-kr[1]-kr[3],0),Wr=Math.max((ir?ir.height:Zt.shape.height)-kr[0]-kr[2],0);(Er.width!==Hr||Er.height!==Wr)&&br.setStyle({width:Hr,height:Wr})},Er.truncateMinChar=2,Er.lineOverflow="truncate",nr(Er,ir,ht);var jr=br.getState("emphasis");nr(jr?jr.style:null,ir,ht)}}function nr(Zt,Kt,ur){var ir=Zt?Zt.text:null;if(!Kt&&ur.isLeafRoot&&ir!=null){var hr=_e.get("drillDownIcon",!0);Zt.text=hr?hr+" "+ir:ir}}function Jt(Zt,Kt,ur,ir){var hr=bt!=null&&et[Zt][bt],fr=nt[Zt];return hr?(et[Zt][bt]=null,lr(fr,hr)):vt||(hr=new Kt,hr instanceof Displayable&&(hr.z2=calculateZ2(ur,ir)),pr(fr,hr)),_[Zt][yt]=hr}function lr(Zt,Kt){var ur=Zt[yt]={};Kt instanceof Group$2?(ur.oldX=Kt.x,ur.oldY=Kt.y):ur.oldShape=extend({},Kt.shape)}function pr(Zt,Kt){var ur=Zt[yt]={},ir=at.parentNode,hr=Kt instanceof Group$3;if(ir&&(!tt||tt.direction==="drillDown")){var fr=0,mr=0,br=nt.background[ir.getRawIndex()];!tt&&br&&br.oldShape&&(fr=br.oldShape.width,mr=br.oldShape.height),hr?(ur.oldX=0,ur.oldY=mr):ur.oldShape={x:fr,y:mr,width:0,height:0}}ur.fadein=!hr}}function calculateZ2(_e,_){return _e*Z2_BASE+_}var each$c=each$f,isObject$1=isObject$4,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function _e(_){var et=_.mappingMethod,tt=_.type,nt=this.option=clone$4(_);this.type=tt,this.mappingMethod=et,this._normalizeData=normalizers[et];var it=_e.visualHandlers[tt];this.applyVisual=it.applyVisual,this.getColorMapper=it.getColorMapper,this._normalizedToVisual=it._normalizedToVisual[et],et==="piecewise"?(normalizeVisualRange(nt),preprocessForPiecewise(nt)):et==="category"?nt.categories?preprocessForSpecifiedCategory(nt):normalizeVisualRange(nt,!0):(assert(et!=="linear"||nt.dataExtent),normalizeVisualRange(nt))}return _e.prototype.mapValueToVisual=function(_){var et=this._normalizeData(_);return this._normalizedToVisual(et,_)},_e.prototype.getNormalizer=function(){return bind$2(this._normalizeData,this)},_e.listVisualTypes=function(){return keys(_e.visualHandlers)},_e.isValidType=function(_){return _e.visualHandlers.hasOwnProperty(_)},_e.eachVisual=function(_,et,tt){isObject$4(_)?each$f(_,et,tt):et.call(tt,_)},_e.mapVisual=function(_,et,tt){var nt,it=isArray$1(_)?[]:isObject$4(_)?{}:(nt=!0,null);return _e.eachVisual(_,function(at,ot){var st=et.call(tt,at,ot);nt?it=st:it[ot]=st}),it},_e.retrieveVisuals=function(_){var et={},tt;return _&&each$c(_e.visualHandlers,function(nt,it){_.hasOwnProperty(it)&&(et[it]=_[it],tt=!0)}),tt?et:null},_e.prepareVisualTypes=function(_){if(isArray$1(_))_=_.slice();else if(isObject$1(_)){var et=[];each$c(_,function(tt,nt){et.push(nt)}),_=et}else return[];return _.sort(function(tt,nt){return nt==="color"&&tt!=="color"&&tt.indexOf("color")===0?1:-1}),_},_e.dependsOn=function(_,et){return et==="color"?!!(_&&_.indexOf(et)===0):_===et},_e.findPieceIndex=function(_,et,tt){for(var nt,it=1/0,at=0,ot=et.length;at<ot;at++){var st=et[at].value;if(st!=null){if(st===_||isString$1(st)&&st===_+"")return at;tt&&ut(st,at)}}for(var at=0,ot=et.length;at<ot;at++){var dt=et[at],ht=dt.interval,ct=dt.close;if(ht){if(ht[0]===-1/0){if(littleThan(ct[1],_,ht[1]))return at}else if(ht[1]===1/0){if(littleThan(ct[0],ht[0],_))return at}else if(littleThan(ct[0],ht[0],_)&&littleThan(ct[1],_,ht[1]))return at;tt&&ut(ht[0],at),tt&&ut(ht[1],at)}}if(tt)return _===1/0?et.length-1:_===-1/0?0:nt;function ut(ft,gt){var mt=Math.abs(ft-_);mt<it&&(it=mt,nt=gt)}},_e.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var _=this.option;return bind$2(_.mappingMethod==="category"?function(et,tt){return!tt&&(et=this._normalizeData(et)),doMapCategory.call(this,et)}:function(et,tt,nt){var it=!!nt;return!tt&&(et=this._normalizeData(et)),nt=fastLerp(et,_.parsedVisual,nt),it?nt:stringify(nt,"rgba")},this)},_normalizedToVisual:{linear:function(_){return stringify(fastLerp(_,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(_,et){var tt=getSpecifiedVisual.call(this,et);return tt==null&&(tt=stringify(fastLerp(_,this.option.parsedVisual),"rgba")),tt},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(_,et){return modifyHSL(_,et)}),colorSaturation:makePartialColorVisualHandler(function(_,et){return modifyHSL(_,null,et)}),colorLightness:makePartialColorVisualHandler(function(_,et){return modifyHSL(_,null,null,et)}),colorAlpha:makePartialColorVisualHandler(function(_,et){return modifyAlpha(_,et)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(_,et,tt){var nt=this.mapValueToVisual(_);tt("symbol",nt)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(_,et){var tt=getSpecifiedVisual.call(this,et);return tt==null&&(tt=doMapToArray.call(this,_)),tt},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},_e}();function preprocessForPiecewise(_e){var _=_e.pieceList;_e.hasSpecialVisual=!1,each$f(_,function(et,tt){et.originIndex=tt,et.visual!=null&&(_e.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(_e){var _=_e.categories,et=_e.categoryMap={},tt=_e.visual;if(each$c(_,function(at,ot){et[at]=ot}),!isArray$1(tt)){var nt=[];isObject$4(tt)?each$c(tt,function(at,ot){var st=et[ot];nt[st??CATEGORY_DEFAULT_VISUAL_INDEX]=at}):nt[CATEGORY_DEFAULT_VISUAL_INDEX]=tt,tt=setVisualToOption(_e,nt)}for(var it=_.length-1;it>=0;it--)tt[it]==null&&(delete et[_[it]],_.pop())}function normalizeVisualRange(_e,_){var et=_e.visual,tt=[];isObject$4(et)?each$c(et,function(it){tt.push(it)}):et!=null&&tt.push(et);var nt={color:1,symbol:1};!_&&tt.length===1&&!nt.hasOwnProperty(_e.type)&&(tt[1]=tt[0]),setVisualToOption(_e,tt)}function makePartialColorVisualHandler(_e){return{applyVisual:function(_,et,tt){var nt=this.mapValueToVisual(_);tt("color",_e(et("color"),nt))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(_e){var _=this.option.visual;return _[Math.round(linearMap$2(_e,[0,1],[0,_.length-1],!0))]||{}}function makeApplyVisual(_e){return function(_,et,tt){tt(_e,this.mapValueToVisual(_))}}function doMapCategory(_e){var _=this.option.visual;return _[this.option.loop&&_e!==CATEGORY_DEFAULT_VISUAL_INDEX?_e%_.length:_e]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(_e){return{linear:function(_){return linearMap$2(_,_e,this.option.visual,!0)},category:doMapCategory,piecewise:function(_,et){var tt=getSpecifiedVisual.call(this,et);return tt==null&&(tt=linearMap$2(_,_e,this.option.visual,!0)),tt},fixed:doMapFixed}}function getSpecifiedVisual(_e){var _=this.option,et=_.pieceList;if(_.hasSpecialVisual){var tt=VisualMapping.findPieceIndex(_e,et),nt=et[tt];if(nt&&nt.visual)return nt.visual[this.type]}}function setVisualToOption(_e,_){return _e.visual=_,_e.type==="color"&&(_e.parsedVisual=map$1(_,function(et){var tt=parse(et);return tt||[0,0,0,1]})),_}var normalizers={linear:function(_e){return linearMap$2(_e,this.option.dataExtent,[0,1],!0)},piecewise:function(_e){var _=this.option.pieceList,et=VisualMapping.findPieceIndex(_e,_,!0);if(et!=null)return linearMap$2(et,[0,_.length-1],[0,1],!0)},category:function(_e){var _=this.option.categories?this.option.categoryMap[_e]:_e;return _??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(_e,_,et){return _e?_<=et:_<et}var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(_e){var _=_e.getData().tree,et=_.root;et.isRemoved()||travelTree(et,{},_e.getViewRoot().getAncestors(),_e)}};function travelTree(_e,_,et,tt){var nt=_e.getModel(),it=_e.getLayout(),at=_e.hostTree.data;if(!(!it||it.invisible||!it.isInView)){var ot=nt.getModel(ITEM_STYLE_NORMAL),st=buildVisuals(ot,_,tt),dt=at.ensureUniqueItemVisual(_e.dataIndex,"style"),ht=ot.get("borderColor"),ct=ot.get("borderColorSaturation"),ut;ct!=null&&(ut=calculateColor(st),ht=calculateBorderColor(ct,ut)),dt.stroke=ht;var ft=_e.viewChildren;if(!ft||!ft.length)ut=calculateColor(st),dt.fill=ut;else{var gt=buildVisualMapping(_e,nt,it,ot,st,ft);each$f(ft,function(mt,vt){if(mt.depth>=et.length||mt===et[mt.depth]){var yt=mapVisual$1(nt,st,mt,vt,gt,tt);travelTree(mt,yt,et,tt)}})}}}function buildVisuals(_e,_,et){var tt=extend({},_),nt=et.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(it){nt[it]=_[it];var at=_e.get(it);nt[it]=null,at!=null&&(tt[it]=at)}),tt}function calculateColor(_e){var _=getValueVisualDefine(_e,"color");if(_){var et=getValueVisualDefine(_e,"colorAlpha"),tt=getValueVisualDefine(_e,"colorSaturation");return tt&&(_=modifyHSL(_,null,null,tt)),et&&(_=modifyAlpha(_,et)),_}}function calculateBorderColor(_e,_){return _!=null?modifyHSL(_,null,null,_e):null}function getValueVisualDefine(_e,_){var et=_e[_];if(et!=null&&et!=="none")return et}function buildVisualMapping(_e,_,et,tt,nt,it){if(!(!it||!it.length)){var at=getRangeVisual(_,"color")||nt.color!=null&&nt.color!=="none"&&(getRangeVisual(_,"colorAlpha")||getRangeVisual(_,"colorSaturation"));if(at){var ot=_.get("visualMin"),st=_.get("visualMax"),dt=et.dataExtent.slice();ot!=null&&ot<dt[0]&&(dt[0]=ot),st!=null&&st>dt[1]&&(dt[1]=st);var ht=_.get("colorMappingBy"),ct={type:at.name,dataExtent:dt,visual:at.range};ct.type==="color"&&(ht==="index"||ht==="id")?(ct.mappingMethod="category",ct.loop=!0):ct.mappingMethod="linear";var ut=new VisualMapping(ct);return inner$c(ut).drColorMappingBy=ht,ut}}}function getRangeVisual(_e,_){var et=_e.get(_);return isArray$1(et)&&et.length?{name:_,range:et}:null}function mapVisual$1(_e,_,et,tt,nt,it){var at=extend({},_);if(nt){var ot=nt.type,st=ot==="color"&&inner$c(nt).drColorMappingBy,dt=st==="index"?tt:st==="id"?it.mapIdToIndex(et.getId()):et.getValue(_e.get("visualDimension"));at[ot]=nt.mapValueToVisual(dt)}return at}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(_e,_,et,tt){var nt=et.getWidth(),it=et.getHeight(),at=_e.option,ot=getLayoutRect(_e.getBoxLayoutParams(),{width:et.getWidth(),height:et.getHeight()}),st=at.size||[],dt=parsePercent(retrieveValue(ot.width,st[0]),nt),ht=parsePercent(retrieveValue(ot.height,st[1]),it),ct=tt&&tt.type,ut=["treemapZoomToNode","treemapRootToNode"],ft=retrieveTargetInfo(tt,ut,_e),gt=ct==="treemapRender"||ct==="treemapMove"?tt.rootRect:null,mt=_e.getViewRoot(),vt=getPathToRoot(mt);if(ct!=="treemapMove"){var yt=ct==="treemapZoomToNode"?estimateRootSize(_e,ft,mt,dt,ht):gt?[gt.width,gt.height]:[dt,ht],bt=at.sort;bt&&bt!=="asc"&&bt!=="desc"&&(bt="desc");var _t={squareRatio:at.squareRatio,sort:bt,leafDepth:at.leafDepth};mt.hostTree.clearLayouts();var xt={x:0,y:0,width:yt[0],height:yt[1],area:yt[0]*yt[1]};mt.setLayout(xt),squarify(mt,_t,!1,0),xt=mt.getLayout(),each$b(vt,function(Tt,wt){var Ct=(vt[wt+1]||mt).getValue();Tt.setLayout(extend({dataExtent:[Ct,Ct],borderWidth:0,upperHeight:0},xt))})}var St=_e.getData().tree.root;St.setLayout(calculateRootPosition(ot,gt,ft),!0),_e.setLayoutInfo(ot),prunning(St,new BoundingRect(-ot.x,-ot.y,nt,it),vt,mt,0)}};function squarify(_e,_,et,tt){var nt,it;if(!_e.isRemoved()){var at=_e.getLayout();nt=at.width,it=at.height;var ot=_e.getModel(),st=ot.get(PATH_BORDER_WIDTH),dt=ot.get(PATH_GAP_WIDTH)/2,ht=getUpperLabelHeight(ot),ct=Math.max(st,ht),ut=st-dt,ft=ct-dt;_e.setLayout({borderWidth:st,upperHeight:ct,upperLabelHeight:ht},!0),nt=mathMax$3(nt-2*ut,0),it=mathMax$3(it-ut-ft,0);var gt=nt*it,mt=initChildren$1(_e,ot,gt,_,et,tt);if(mt.length){var vt={x:ut,y:ft,width:nt,height:it},yt=mathMin$3(nt,it),bt=1/0,_t=[];_t.area=0;for(var xt=0,St=mt.length;xt<St;){var Tt=mt[xt];_t.push(Tt),_t.area+=Tt.getLayout().area;var wt=worst(_t,yt,_.squareRatio);wt<=bt?(xt++,bt=wt):(_t.area-=_t.pop().getLayout().area,position$1(_t,yt,vt,dt,!1),yt=mathMin$3(vt.width,vt.height),_t.length=_t.area=0,bt=1/0)}if(_t.length&&position$1(_t,yt,vt,dt,!0),!et){var Ct=ot.get("childrenVisibleMin");Ct!=null&&gt<Ct&&(et=!0)}for(var xt=0,St=mt.length;xt<St;xt++)squarify(mt[xt],_,et,tt+1)}}}function initChildren$1(_e,_,et,tt,nt,it){var at=_e.children||[],ot=tt.sort;ot!=="asc"&&ot!=="desc"&&(ot=null);var st=tt.leafDepth!=null&&tt.leafDepth<=it;if(nt&&!st)return _e.viewChildren=[];at=filter$1(at,function(ft){return!ft.isRemoved()}),sort$1(at,ot);var dt=statistic(_,at,ot);if(dt.sum===0)return _e.viewChildren=[];if(dt.sum=filterByThreshold(_,et,dt.sum,ot,at),dt.sum===0)return _e.viewChildren=[];for(var ht=0,ct=at.length;ht<ct;ht++){var ut=at[ht].getValue()/dt.sum*et;at[ht].setLayout({area:ut})}return st&&(at.length&&_e.setLayout({isLeafRoot:!0},!0),at.length=0),_e.viewChildren=at,_e.setLayout({dataExtent:dt.dataExtent},!0),at}function filterByThreshold(_e,_,et,tt,nt){if(!tt)return et;for(var it=_e.get("visibleMin"),at=nt.length,ot=at,st=at-1;st>=0;st--){var dt=nt[tt==="asc"?at-st-1:st].getValue();dt/et*_<it&&(ot=st,et-=dt)}return tt==="asc"?nt.splice(0,at-ot):nt.splice(ot,at-ot),et}function sort$1(_e,_){return _&&_e.sort(function(et,tt){var nt=_==="asc"?et.getValue()-tt.getValue():tt.getValue()-et.getValue();return nt===0?_==="asc"?et.dataIndex-tt.dataIndex:tt.dataIndex-et.dataIndex:nt}),_e}function statistic(_e,_,et){for(var tt=0,nt=0,it=_.length;nt<it;nt++)tt+=_[nt].getValue();var at=_e.get("visualDimension"),ot;return!_||!_.length?ot=[NaN,NaN]:at==="value"&&et?(ot=[_[_.length-1].getValue(),_[0].getValue()],et==="asc"&&ot.reverse()):(ot=[1/0,-1/0],each$b(_,function(st){var dt=st.getValue(at);dt<ot[0]&&(ot[0]=dt),dt>ot[1]&&(ot[1]=dt)})),{sum:tt,dataExtent:ot}}function worst(_e,_,et){for(var tt=0,nt=1/0,it=0,at=void 0,ot=_e.length;it<ot;it++)at=_e[it].getLayout().area,at&&(at<nt&&(nt=at),at>tt&&(tt=at));var st=_e.area*_e.area,dt=_*_*et;return st?mathMax$3(dt*tt/st,st/(dt*nt)):1/0}function position$1(_e,_,et,tt,nt){var it=_===et.width?0:1,at=1-it,ot=["x","y"],st=["width","height"],dt=et[ot[it]],ht=_?_e.area/_:0;(nt||ht>et[st[at]])&&(ht=et[st[at]]);for(var ct=0,ut=_e.length;ct<ut;ct++){var ft=_e[ct],gt={},mt=ht?ft.getLayout().area/ht:0,vt=gt[st[at]]=mathMax$3(ht-2*tt,0),yt=et[ot[it]]+et[st[it]]-dt,bt=ct===ut-1||yt<mt?yt:mt,_t=gt[st[it]]=mathMax$3(bt-2*tt,0);gt[ot[at]]=et[ot[at]]+mathMin$3(tt,vt/2),gt[ot[it]]=dt+mathMin$3(tt,_t/2),dt+=bt,ft.setLayout(gt,!0)}et[ot[at]]+=ht,et[st[at]]-=ht}function estimateRootSize(_e,_,et,tt,nt){var it=(_||{}).node,at=[tt,nt];if(!it||it===et)return at;for(var ot,st=tt*nt,dt=st*_e.option.zoomToNodeRatio;ot=it.parentNode;){for(var ht=0,ct=ot.children,ut=0,ft=ct.length;ut<ft;ut++)ht+=ct[ut].getValue();var gt=it.getValue();if(gt===0)return at;dt*=ht/gt;var mt=ot.getModel(),vt=mt.get(PATH_BORDER_WIDTH),yt=Math.max(vt,getUpperLabelHeight(mt));dt+=4*vt*vt+(3*vt+yt)*Math.pow(dt,.5),dt>MAX_SAFE_INTEGER&&(dt=MAX_SAFE_INTEGER),it=ot}dt<st&&(dt=st);var bt=Math.pow(dt/st,.5);return[tt*bt,nt*bt]}function calculateRootPosition(_e,_,et){if(_)return{x:_.x,y:_.y};var tt={x:0,y:0};if(!et)return tt;var nt=et.node,it=nt.getLayout();if(!it)return tt;for(var at=[it.width/2,it.height/2],ot=nt;ot;){var st=ot.getLayout();at[0]+=st.x,at[1]+=st.y,ot=ot.parentNode}return{x:_e.width/2-at[0],y:_e.height/2-at[1]}}function prunning(_e,_,et,tt,nt){var it=_e.getLayout(),at=et[nt],ot=at&&at===_e;if(!(at&&!ot||nt===et.length&&_e!==tt)){_e.setLayout({isInView:!0,invisible:!ot&&!_.intersect(it),isAboveViewRoot:ot},!0);var st=new BoundingRect(_.x-it.x,_.y-it.y,_.width,_.height);each$b(_e.viewChildren||[],function(dt){prunning(dt,st,et,tt,nt+1)})}}function getUpperLabelHeight(_e){return _e.get(PATH_UPPER_LABEL_SHOW)?_e.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(_e){_e.registerSeriesModel(TreemapSeriesModel),_e.registerChartView(TreemapView),_e.registerVisual(treemapVisual),_e.registerLayout(treemapLayout),installTreemapAction(_e)}function categoryFilter(_e){var _=_e.findComponents({mainType:"legend"});!_||!_.length||_e.eachSeriesByType("graph",function(et){var tt=et.getCategoriesData(),nt=et.getGraph(),it=nt.data,at=tt.mapArray(tt.getName);it.filterSelf(function(ot){var st=it.getItemModel(ot),dt=st.getShallow("category");if(dt!=null){isNumber(dt)&&(dt=at[dt]);for(var ht=0;ht<_.length;ht++)if(!_[ht].isSelected(dt))return!1}return!0})})}function categoryVisual(_e){var _={};_e.eachSeriesByType("graph",function(et){var tt=et.getCategoriesData(),nt=et.getData(),it={};tt.each(function(at){var ot=tt.getName(at);it["ec-"+ot]=at;var st=tt.getItemModel(at),dt=st.getModel("itemStyle").getItemStyle();dt.fill||(dt.fill=et.getColorFromPalette(ot,_)),tt.setItemVisual(at,"style",dt);for(var ht=["symbol","symbolSize","symbolKeepAspect"],ct=0;ct<ht.length;ct++){var ut=st.getShallow(ht[ct],!0);ut!=null&&tt.setItemVisual(at,ht[ct],ut)}}),tt.count()&&nt.each(function(at){var ot=nt.getItemModel(at),st=ot.getShallow("category");if(st!=null){isString$1(st)&&(st=it["ec-"+st]);var dt=tt.getItemVisual(st,"style"),ht=nt.ensureUniqueItemVisual(at,"style");extend(ht,dt);for(var ct=["symbol","symbolSize","symbolKeepAspect"],ut=0;ut<ct.length;ut++)nt.setItemVisual(at,ct[ut],tt.getItemVisual(st,ct[ut]))}})})}function normalize$1(_e){return _e instanceof Array||(_e=[_e,_e]),_e}function graphEdgeVisual(_e){_e.eachSeriesByType("graph",function(_){var et=_.getGraph(),tt=_.getEdgeData(),nt=normalize$1(_.get("edgeSymbol")),it=normalize$1(_.get("edgeSymbolSize"));tt.setVisual("fromSymbol",nt&&nt[0]),tt.setVisual("toSymbol",nt&&nt[1]),tt.setVisual("fromSymbolSize",it&&it[0]),tt.setVisual("toSymbolSize",it&&it[1]),tt.setVisual("style",_.getModel("lineStyle").getLineStyle()),tt.each(function(at){var ot=tt.getItemModel(at),st=et.getEdgeByIndex(at),dt=normalize$1(ot.getShallow("symbol",!0)),ht=normalize$1(ot.getShallow("symbolSize",!0)),ct=ot.getModel("lineStyle").getLineStyle(),ut=tt.ensureUniqueItemVisual(at,"style");switch(extend(ut,ct),ut.stroke){case"source":{var ft=st.node1.getVisual("style");ut.stroke=ft&&ft.fill;break}case"target":{var ft=st.node2.getVisual("style");ut.stroke=ft&&ft.fill;break}}dt[0]&&st.setVisual("fromSymbol",dt[0]),dt[1]&&st.setVisual("toSymbol",dt[1]),ht[0]&&st.setVisual("fromSymbolSize",ht[0]),ht[1]&&st.setVisual("toSymbolSize",ht[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(_e){return _e.get("autoCurveness")||null},createCurveness=function(_e,_){var et=getAutoCurvenessParams(_e),tt=20,nt=[];if(isNumber(et))tt=et;else if(isArray$1(et)){_e.__curvenessList=et;return}_>tt&&(tt=_);var it=tt%2?tt+2:tt+3;nt=[];for(var at=0;at<it;at++)nt.push((at%2?at+1:at)/10*(at%2?-1:1));_e.__curvenessList=nt},getKeyOfEdges=function(_e,_,et){var tt=[_e.id,_e.dataIndex].join("."),nt=[_.id,_.dataIndex].join(".");return[et.uid,tt,nt].join(KEY_DELIMITER)},getOppositeKey=function(_e){var _=_e.split(KEY_DELIMITER);return[_[0],_[2],_[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(_e,_){var et=getKeyOfEdges(_e.node1,_e.node2,_);return _.__edgeMap[et]},getTotalLengthBetweenNodes=function(_e,_){var et=getEdgeMapLengthWithKey(getKeyOfEdges(_e.node1,_e.node2,_),_),tt=getEdgeMapLengthWithKey(getKeyOfEdges(_e.node2,_e.node1,_),_);return et+tt},getEdgeMapLengthWithKey=function(_e,_){var et=_.__edgeMap;return et[_e]?et[_e].length:0};function initCurvenessList(_e){getAutoCurvenessParams(_e)&&(_e.__curvenessList=[],_e.__edgeMap={},createCurveness(_e))}function createEdgeMapForCurveness(_e,_,et,tt){if(getAutoCurvenessParams(et)){var nt=getKeyOfEdges(_e,_,et),it=et.__edgeMap,at=it[getOppositeKey(nt)];it[nt]&&!at?it[nt].isForward=!0:at&&it[nt]&&(at.isForward=!0,it[nt].isForward=!1),it[nt]=it[nt]||[],it[nt].push(tt)}}function getCurvenessForEdge(_e,_,et,tt){var nt=getAutoCurvenessParams(_),it=isArray$1(nt);if(!nt)return null;var at=getEdgeFromMap(_e,_);if(!at)return null;for(var ot=-1,st=0;st<at.length;st++)if(at[st]===et){ot=st;break}var dt=getTotalLengthBetweenNodes(_e,_);createCurveness(_,dt),_e.lineStyle=_e.lineStyle||{};var ht=getKeyOfEdges(_e.node1,_e.node2,_),ct=_.__curvenessList,ut=it||dt%2?0:1;if(at.isForward)return ct[ut+ot];var ft=getOppositeKey(ht),gt=getEdgeMapLengthWithKey(ft,_),mt=ct[ot+gt+ut];return tt?it?nt&&nt[0]===0?(gt+ut)%2?mt:-mt:((gt%2?0:1)+ut)%2?mt:-mt:(gt+ut)%2?mt:-mt:ct[ot+gt+ut]}function simpleLayout(_e){var _=_e.coordinateSystem;if(!(_&&_.type!=="view")){var et=_e.getGraph();et.eachNode(function(tt){var nt=tt.getModel();tt.setLayout([+nt.get("x"),+nt.get("y")])}),simpleLayoutEdge(et,_e)}}function simpleLayoutEdge(_e,_){_e.eachEdge(function(et,tt){var nt=retrieve3(et.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(et,_,tt,!0),0),it=clone$3(et.node1.getLayout()),at=clone$3(et.node2.getLayout()),ot=[it,at];+nt&&ot.push([(it[0]+at[0])/2-(it[1]-at[1])*nt,(it[1]+at[1])/2-(at[0]-it[0])*nt]),et.setLayout(ot)})}function graphSimpleLayout(_e,_){_e.eachSeriesByType("graph",function(et){var tt=et.get("layout"),nt=et.coordinateSystem;if(nt&&nt.type!=="view"){var it=et.getData(),at=[];each$f(nt.dimensions,function(ut){at=at.concat(it.mapDimensionsAll(ut))});for(var ot=0;ot<it.count();ot++){for(var st=[],dt=!1,ht=0;ht<at.length;ht++){var ct=it.get(at[ht],ot);isNaN(ct)||(dt=!0),st.push(ct)}dt?it.setItemLayout(ot,nt.dataToPoint(st)):it.setItemLayout(ot,[NaN,NaN])}simpleLayoutEdge(it.graph,et)}else(!tt||tt==="none")&&simpleLayout(et)})}function getNodeGlobalScale(_e){var _=_e.coordinateSystem;if(_.type!=="view")return 1;var et=_e.option.nodeScaleRatio,tt=_.scaleX,nt=_.getZoom(),it=(nt-1)*et+1;return it/tt}function getSymbolSize(_e){var _=_e.getVisual("symbolSize");return _ instanceof Array&&(_=(_[0]+_[1])/2),+_}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(_e,_,et,tt){var nt=_e.coordinateSystem;if(!(nt&&nt.type!=="view")){var it=nt.getBoundingRect(),at=_e.getData(),ot=at.graph,st=it.width/2+it.x,dt=it.height/2+it.y,ht=Math.min(it.width,it.height)/2,ct=at.count();if(at.setLayout({cx:st,cy:dt}),!!ct){if(et){var ut=nt.pointToData(tt),ft=ut[0],gt=ut[1],mt=[ft-st,gt-dt];normalize$3(mt,mt),scale$2(mt,mt,ht),et.setLayout([st+mt[0],dt+mt[1]],!0);var vt=_e.get(["circular","rotateLabel"]);rotateNodeLabel(et,vt,st,dt)}_layoutNodesBasedOn[_](_e,ot,at,ht,st,dt,ct),ot.eachEdge(function(yt,bt){var _t=retrieve3(yt.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(yt,_e,bt),0),xt=clone$3(yt.node1.getLayout()),St=clone$3(yt.node2.getLayout()),Tt,wt=(xt[0]+St[0])/2,Ct=(xt[1]+St[1])/2;+_t&&(_t*=3,Tt=[st*_t+wt*(1-_t),dt*_t+Ct*(1-_t)]),yt.setLayout([xt,St,Tt])})}}}var _layoutNodesBasedOn={value:function(_e,_,et,tt,nt,it,at){var ot=0,st=et.getSum("value"),dt=Math.PI*2/(st||at);_.eachNode(function(ht){var ct=ht.getValue("value"),ut=dt*(st?ct:1)/2;ot+=ut,ht.setLayout([tt*Math.cos(ot)+nt,tt*Math.sin(ot)+it]),ot+=ut})},symbolSize:function(_e,_,et,tt,nt,it,at){var ot=0;_symbolRadiansHalf.length=at;var st=getNodeGlobalScale(_e);_.eachNode(function(ct){var ut=getSymbolSize(ct);isNaN(ut)&&(ut=2),ut<0&&(ut=0),ut*=st;var ft=Math.asin(ut/2/tt);isNaN(ft)&&(ft=PI$2/2),_symbolRadiansHalf[ct.dataIndex]=ft,ot+=ft*2});var dt=(2*PI$2-ot)/at/2,ht=0;_.eachNode(function(ct){var ut=dt+_symbolRadiansHalf[ct.dataIndex];ht+=ut,(!ct.getLayout()||!ct.getLayout().fixed)&&ct.setLayout([tt*Math.cos(ht)+nt,tt*Math.sin(ht)+it]),ht+=ut})}};function rotateNodeLabel(_e,_,et,tt){var nt=_e.getGraphicEl();if(nt){var it=_e.getModel(),at=it.get(["label","rotate"])||0,ot=nt.getSymbolPath();if(_){var st=_e.getLayout(),dt=Math.atan2(st[1]-tt,st[0]-et);dt<0&&(dt=Math.PI*2+dt);var ht=st[0]<et;ht&&(dt=dt-Math.PI);var ct=ht?"left":"right";ot.setTextConfig({rotation:-dt,position:ct,origin:"center"});var ut=ot.ensureState("emphasis");extend(ut.textConfig||(ut.textConfig={}),{position:ct})}else ot.setTextConfig({rotation:at*=Math.PI/180})}}function graphCircularLayout(_e){_e.eachSeriesByType("graph",function(_){_.get("layout")==="circular"&&circularLayout(_,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(_e,_,et){for(var tt=_e,nt=_,it=et.rect,at=it.width,ot=it.height,st=[it.x+at/2,it.y+ot/2],dt=et.gravity==null?.1:et.gravity,ht=0;ht<tt.length;ht++){var ct=tt[ht];ct.p||(ct.p=create$2(at*(Math.random()-.5)+st[0],ot*(Math.random()-.5)+st[1])),ct.pp=clone$3(ct.p),ct.edges=null}var ut=et.friction==null?.6:et.friction,ft=ut,gt,mt;return{warmUp:function(){ft=ut*.8},setFixed:function(vt){tt[vt].fixed=!0},setUnfixed:function(vt){tt[vt].fixed=!1},beforeStep:function(vt){gt=vt},afterStep:function(vt){mt=vt},step:function(vt){gt&&gt(tt,nt);for(var yt=[],bt=tt.length,_t=0;_t<nt.length;_t++){var xt=nt[_t];if(!xt.ignoreForceLayout){var St=xt.n1,Tt=xt.n2;sub(yt,Tt.p,St.p);var wt=len(yt)-xt.d,Ct=Tt.w/(St.w+Tt.w);isNaN(Ct)&&(Ct=0),normalize$3(yt,yt),!St.fixed&&scaleAndAdd(St.p,St.p,yt,Ct*wt*ft),!Tt.fixed&&scaleAndAdd(Tt.p,Tt.p,yt,-(1-Ct)*wt*ft)}}for(var _t=0;_t<bt;_t++){var Et=tt[_t];Et.fixed||(sub(yt,st,Et.p),scaleAndAdd(Et.p,Et.p,yt,dt*ft))}for(var _t=0;_t<bt;_t++)for(var St=tt[_t],At=_t+1;At<bt;At++){var Tt=tt[At];sub(yt,Tt.p,St.p);var wt=len(yt);wt===0&&(set$1(yt,Math.random()-.5,Math.random()-.5),wt=1);var Pt=(St.rep+Tt.rep)/wt/wt;!St.fixed&&scaleAndAdd(St.pp,St.pp,yt,Pt),!Tt.fixed&&scaleAndAdd(Tt.pp,Tt.pp,yt,-Pt)}for(var Rt=[],_t=0;_t<bt;_t++){var Et=tt[_t];Et.fixed||(sub(Rt,Et.p,Et.pp),scaleAndAdd(Et.p,Et.p,Rt,ft),copy$1(Et.pp,Et.p))}ft=ft*.992;var It=ft<.01;mt&&mt(tt,nt,It),vt&&vt(It)}}}function graphForceLayout(_e){_e.eachSeriesByType("graph",function(_){var et=_.coordinateSystem;if(!(et&&et.type!=="view"))if(_.get("layout")==="force"){var tt=_.preservedPoints||{},nt=_.getGraph(),it=nt.data,at=nt.edgeData,ot=_.getModel("force"),st=ot.get("initLayout");_.preservedPoints?it.each(function(_t){var xt=it.getId(_t);it.setItemLayout(_t,tt[xt]||[NaN,NaN])}):!st||st==="none"?simpleLayout(_):st==="circular"&&circularLayout(_,"value");var dt=it.getDataExtent("value"),ht=at.getDataExtent("value"),ct=ot.get("repulsion"),ut=ot.get("edgeLength"),ft=isArray$1(ct)?ct:[ct,ct],gt=isArray$1(ut)?ut:[ut,ut];gt=[gt[1],gt[0]];var mt=it.mapArray("value",function(_t,xt){var St=it.getItemLayout(xt),Tt=linearMap$2(_t,dt,ft);return isNaN(Tt)&&(Tt=(ft[0]+ft[1])/2),{w:Tt,rep:Tt,fixed:it.getItemModel(xt).get("fixed"),p:!St||isNaN(St[0])||isNaN(St[1])?null:St}}),vt=at.mapArray("value",function(_t,xt){var St=nt.getEdgeByIndex(xt),Tt=linearMap$2(_t,ht,gt);isNaN(Tt)&&(Tt=(gt[0]+gt[1])/2);var wt=St.getModel(),Ct=retrieve3(St.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(St,_,xt,!0),0);return{n1:mt[St.node1.dataIndex],n2:mt[St.node2.dataIndex],d:Tt,curveness:Ct,ignoreForceLayout:wt.get("ignoreForceLayout")}}),yt=et.getBoundingRect(),bt=forceLayout(mt,vt,{rect:yt,gravity:ot.get("gravity"),friction:ot.get("friction")});bt.beforeStep(function(_t,xt){for(var St=0,Tt=_t.length;St<Tt;St++)_t[St].fixed&&copy$1(_t[St].p,nt.getNodeByIndex(St).getLayout())}),bt.afterStep(function(_t,xt,St){for(var Tt=0,wt=_t.length;Tt<wt;Tt++)_t[Tt].fixed||nt.getNodeByIndex(Tt).setLayout(_t[Tt].p),tt[it.getId(Tt)]=_t[Tt].p;for(var Tt=0,wt=xt.length;Tt<wt;Tt++){var Ct=xt[Tt],Et=nt.getEdgeByIndex(Tt),At=Ct.n1.p,Pt=Ct.n2.p,Rt=Et.getLayout();Rt=Rt?Rt.slice():[],Rt[0]=Rt[0]||[],Rt[1]=Rt[1]||[],copy$1(Rt[0],At),copy$1(Rt[1],Pt),+Ct.curveness&&(Rt[2]=[(At[0]+Pt[0])/2-(At[1]-Pt[1])*Ct.curveness,(At[1]+Pt[1])/2-(Pt[0]-At[0])*Ct.curveness]),Et.setLayout(Rt)}}),_.forceLayout=bt,_.preservedPoints=tt,bt.step()}else _.forceLayout=null})}function getViewRect$3(_e,_,et){var tt=extend(_e.getBoxLayoutParams(),{aspect:et});return getLayoutRect(tt,{width:_.getWidth(),height:_.getHeight()})}function createViewCoordSys(_e,_){var et=[];return _e.eachSeriesByType("graph",function(tt){var nt=tt.get("coordinateSystem");if(!nt||nt==="view"){var it=tt.getData(),at=it.mapArray(function(vt){var yt=it.getItemModel(vt);return[+yt.get("x"),+yt.get("y")]}),ot=[],st=[];fromPoints(at,ot,st),st[0]-ot[0]===0&&(st[0]+=1,ot[0]-=1),st[1]-ot[1]===0&&(st[1]+=1,ot[1]-=1);var dt=(st[0]-ot[0])/(st[1]-ot[1]),ht=getViewRect$3(tt,_,dt);isNaN(dt)&&(ot=[ht.x,ht.y],st=[ht.x+ht.width,ht.y+ht.height]);var ct=st[0]-ot[0],ut=st[1]-ot[1],ft=ht.width,gt=ht.height,mt=tt.coordinateSystem=new View;mt.zoomLimit=tt.get("scaleLimit"),mt.setBoundingRect(ot[0],ot[1],ct,ut),mt.setViewRect(ht.x,ht.y,ft,gt),mt.setCenter(tt.get("center"),_),mt.setZoom(tt.get("zoom")),et.push(mt)}}),et}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){function _e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return _e}();(function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _})(StraightLineShape);function isStraightLine(_e){return isNaN(+_e.cpx1)||isNaN(+_e.cpy1)}var ECLinePath=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.type="ec-line",tt}return _.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},_.prototype.getDefaultShape=function(){return new StraightLineShape},_.prototype.buildPath=function(et,tt){isStraightLine(tt)?straightLineProto.buildPath.call(this,et,tt):bezierCurveProto.buildPath.call(this,et,tt)},_.prototype.pointAt=function(et){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,et):bezierCurveProto.pointAt.call(this,et)},_.prototype.tangentAt=function(et){var tt=this.shape,nt=isStraightLine(tt)?[tt.x2-tt.x1,tt.y2-tt.y1]:bezierCurveProto.tangentAt.call(this,et);return normalize$3(nt,nt)},_}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(_e){return"_"+_e+"Type"}function makeSymbolTypeValue(_e,_,et){var tt=_.getItemVisual(et,_e);if(!tt||tt==="none")return tt;var nt=_.getItemVisual(et,_e+"Size"),it=_.getItemVisual(et,_e+"Rotate"),at=_.getItemVisual(et,_e+"Offset"),ot=_.getItemVisual(et,_e+"KeepAspect"),st=normalizeSymbolSize(nt),dt=normalizeSymbolOffset(at||0,st);return tt+st+dt+(it||"")+(ot||"")}function createSymbol(_e,_,et){var tt=_.getItemVisual(et,_e);if(!(!tt||tt==="none")){var nt=_.getItemVisual(et,_e+"Size"),it=_.getItemVisual(et,_e+"Rotate"),at=_.getItemVisual(et,_e+"Offset"),ot=_.getItemVisual(et,_e+"KeepAspect"),st=normalizeSymbolSize(nt),dt=normalizeSymbolOffset(at||0,st),ht=createSymbol$1(tt,-st[0]/2+dt[0],-st[1]/2+dt[1],st[0],st[1],null,ot);return ht.__specifiedRotation=it==null||isNaN(it)?void 0:+it*Math.PI/180||0,ht.name=_e,ht}}function createLine(_e){var _=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(_.shape,_e),_}function setLinePoints(_e,_){_e.x1=_[0][0],_e.y1=_[0][1],_e.x2=_[1][0],_e.y2=_[1][1],_e.percent=1;var et=_[2];et?(_e.cpx1=et[0],_e.cpy1=et[1]):(_e.cpx1=NaN,_e.cpy1=NaN)}var Line=function(_e){__extends$1(_,_e);function _(et,tt,nt){var it=_e.call(this)||this;return it._createLine(et,tt,nt),it}return _.prototype._createLine=function(et,tt,nt){var it=et.hostModel,at=et.getItemLayout(tt),ot=createLine(at);ot.shape.percent=0,initProps(ot,{shape:{percent:1}},it,tt),this.add(ot),each$f(SYMBOL_CATEGORIES,function(st){var dt=createSymbol(st,et,tt);this.add(dt),this[makeSymbolTypeKey(st)]=makeSymbolTypeValue(st,et,tt)},this),this._updateCommonStl(et,tt,nt)},_.prototype.updateData=function(et,tt,nt){var it=et.hostModel,at=this.childOfName("line"),ot=et.getItemLayout(tt),st={shape:{}};setLinePoints(st.shape,ot),updateProps$1(at,st,it,tt),each$f(SYMBOL_CATEGORIES,function(dt){var ht=makeSymbolTypeValue(dt,et,tt),ct=makeSymbolTypeKey(dt);if(this[ct]!==ht){this.remove(this.childOfName(dt));var ut=createSymbol(dt,et,tt);this.add(ut)}this[ct]=ht},this),this._updateCommonStl(et,tt,nt)},_.prototype.getLinePath=function(){return this.childAt(0)},_.prototype._updateCommonStl=function(et,tt,nt){var it=et.hostModel,at=this.childOfName("line"),ot=nt&&nt.emphasisLineStyle,st=nt&&nt.blurLineStyle,dt=nt&&nt.selectLineStyle,ht=nt&&nt.labelStatesModels,ct=nt&&nt.emphasisDisabled,ut=nt&&nt.focus,ft=nt&&nt.blurScope;if(!nt||et.hasItemOption){var gt=et.getItemModel(tt),mt=gt.getModel("emphasis");ot=mt.getModel("lineStyle").getLineStyle(),st=gt.getModel(["blur","lineStyle"]).getLineStyle(),dt=gt.getModel(["select","lineStyle"]).getLineStyle(),ct=mt.get("disabled"),ut=mt.get("focus"),ft=mt.get("blurScope"),ht=getLabelStatesModels(gt)}var vt=et.getItemVisual(tt,"style"),yt=vt.stroke;at.useStyle(vt),at.style.fill=null,at.style.strokeNoScale=!0,at.ensureState("emphasis").style=ot,at.ensureState("blur").style=st,at.ensureState("select").style=dt,each$f(SYMBOL_CATEGORIES,function(Tt){var wt=this.childOfName(Tt);if(wt){wt.setColor(yt),wt.style.opacity=vt.opacity;for(var Ct=0;Ct<SPECIAL_STATES.length;Ct++){var Et=SPECIAL_STATES[Ct],At=at.getState(Et);if(At){var Pt=At.style||{},Rt=wt.ensureState(Et),It=Rt.style||(Rt.style={});Pt.stroke!=null&&(It[wt.__isEmptyBrush?"stroke":"fill"]=Pt.stroke),Pt.opacity!=null&&(It.opacity=Pt.opacity)}}wt.markRedraw()}},this);var bt=it.getRawValue(tt);setLabelStyle(this,ht,{labelDataIndex:tt,labelFetcher:{getFormattedLabel:function(Tt,wt){return it.getFormattedLabel(Tt,wt,et.dataType)}},inheritColor:yt||"#000",defaultOpacity:vt.opacity,defaultText:(bt==null?et.getName(tt):isFinite(bt)?round$3(bt):bt)+""});var _t=this.getTextContent();if(_t){var xt=ht.normal;_t.__align=_t.style.align,_t.__verticalAlign=_t.style.verticalAlign,_t.__position=xt.get("position")||"middle";var St=xt.get("distance");isArray$1(St)||(St=[St,St]),_t.__labelDistance=St}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,ut,ft,ct)},_.prototype.highlight=function(){enterEmphasis(this)},_.prototype.downplay=function(){leaveEmphasis(this)},_.prototype.updateLayout=function(et,tt){this.setLinePoints(et.getItemLayout(tt))},_.prototype.setLinePoints=function(et){var tt=this.childOfName("line");setLinePoints(tt.shape,et),tt.dirty()},_.prototype.beforeUpdate=function(){var et=this,tt=et.childOfName("fromSymbol"),nt=et.childOfName("toSymbol"),it=et.getTextContent();if(!tt&&!nt&&(!it||it.ignore))return;for(var at=1,ot=this.parent;ot;)ot.scaleX&&(at/=ot.scaleX),ot=ot.parent;var st=et.childOfName("line");if(!this.__dirty&&!st.__dirty)return;var dt=st.shape.percent,ht=st.pointAt(0),ct=st.pointAt(dt),ut=sub([],ct,ht);normalize$3(ut,ut);function ft(At,Pt){var Rt=At.__specifiedRotation;if(Rt==null){var It=st.tangentAt(Pt);At.attr("rotation",(Pt===1?-1:1)*Math.PI/2-Math.atan2(It[1],It[0]))}else At.attr("rotation",Rt)}if(tt&&(tt.setPosition(ht),ft(tt,0),tt.scaleX=tt.scaleY=at*dt,tt.markRedraw()),nt&&(nt.setPosition(ct),ft(nt,1),nt.scaleX=nt.scaleY=at*dt,nt.markRedraw()),it&&!it.ignore){it.x=it.y=0,it.originX=it.originY=0;var gt=void 0,mt=void 0,vt=it.__labelDistance,yt=vt[0]*at,bt=vt[1]*at,_t=dt/2,xt=st.tangentAt(_t),St=[xt[1],-xt[0]],Tt=st.pointAt(_t);St[1]>0&&(St[0]=-St[0],St[1]=-St[1]);var wt=xt[0]<0?-1:1;if(it.__position!=="start"&&it.__position!=="end"){var Ct=-Math.atan2(xt[1],xt[0]);ct[0]<ht[0]&&(Ct=Math.PI+Ct),it.rotation=Ct}var Et=void 0;switch(it.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":Et=-bt,mt="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":Et=bt,mt="top";break;default:Et=0,mt="middle"}switch(it.__position){case"end":it.x=ut[0]*yt+ct[0],it.y=ut[1]*bt+ct[1],gt=ut[0]>.8?"left":ut[0]<-.8?"right":"center",mt=ut[1]>.8?"top":ut[1]<-.8?"bottom":"middle";break;case"start":it.x=-ut[0]*yt+ht[0],it.y=-ut[1]*bt+ht[1],gt=ut[0]>.8?"right":ut[0]<-.8?"left":"center",mt=ut[1]>.8?"bottom":ut[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":it.x=yt*wt+ht[0],it.y=ht[1]+Et,gt=xt[0]<0?"right":"left",it.originX=-yt*wt,it.originY=-Et;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":it.x=Tt[0],it.y=Tt[1]+Et,gt="center",it.originY=-Et;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":it.x=-yt*wt+ct[0],it.y=ct[1]+Et,gt=xt[0]>=0?"right":"left",it.originX=yt*wt,it.originY=-Et;break}it.scaleX=it.scaleY=at,it.setStyle({verticalAlign:it.__verticalAlign||mt,align:it.__align||gt})}},_}(Group$3),LineDraw=function(){function _e(_){this.group=new Group$3,this._LineCtor=_||Line}return _e.prototype.updateData=function(_){var et=this;this._progressiveEls=null;var tt=this,nt=tt.group,it=tt._lineData;tt._lineData=_,it||nt.removeAll();var at=makeSeriesScope$1(_);_.diff(it).add(function(ot){et._doAdd(_,ot,at)}).update(function(ot,st){et._doUpdate(it,_,st,ot,at)}).remove(function(ot){nt.remove(it.getItemGraphicEl(ot))}).execute()},_e.prototype.updateLayout=function(){var _=this._lineData;_&&_.eachItemGraphicEl(function(et,tt){et.updateLayout(_,tt)},this)},_e.prototype.incrementalPrepareUpdate=function(_){this._seriesScope=makeSeriesScope$1(_),this._lineData=null,this.group.removeAll()},_e.prototype.incrementalUpdate=function(_,et){this._progressiveEls=[];function tt(ot){!ot.isGroup&&!isEffectObject(ot)&&(ot.incremental=!0,ot.ensureState("emphasis").hoverLayer=!0)}for(var nt=_.start;nt<_.end;nt++){var it=et.getItemLayout(nt);if(lineNeedsDraw(it)){var at=new this._LineCtor(et,nt,this._seriesScope);at.traverse(tt),this.group.add(at),et.setItemGraphicEl(nt,at),this._progressiveEls.push(at)}}},_e.prototype.remove=function(){this.group.removeAll()},_e.prototype.eachRendered=function(_){traverseElements(this._progressiveEls||this.group,_)},_e.prototype._doAdd=function(_,et,tt){var nt=_.getItemLayout(et);if(lineNeedsDraw(nt)){var it=new this._LineCtor(_,et,tt);_.setItemGraphicEl(et,it),this.group.add(it)}},_e.prototype._doUpdate=function(_,et,tt,nt,it){var at=_.getItemGraphicEl(tt);if(!lineNeedsDraw(et.getItemLayout(nt))){this.group.remove(at);return}at?at.updateData(et,nt,it):at=new this._LineCtor(et,nt,it),et.setItemGraphicEl(nt,at),this.group.add(at)},_e}();function isEffectObject(_e){return _e.animators&&_e.animators.length>0}function makeSeriesScope$1(_e){var _=_e.hostModel,et=_.getModel("emphasis");return{lineStyle:_.getModel("lineStyle").getLineStyle(),emphasisLineStyle:et.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:_.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:_.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:et.get("disabled"),blurScope:et.get("blurScope"),focus:et.get("focus"),labelStatesModels:getLabelStatesModels(_)}}function isPointNaN(_e){return isNaN(_e[0])||isNaN(_e[1])}function lineNeedsDraw(_e){return _e&&!isPointNaN(_e[0])&&!isPointNaN(_e[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(_e,_,et){for(var tt=_e[0],nt=_e[1],it=_e[2],at=1/0,ot,st=et*et,dt=.1,ht=.1;ht<=.9;ht+=.1){v1[0]=quadraticAt(tt[0],nt[0],it[0],ht),v1[1]=quadraticAt(tt[1],nt[1],it[1],ht);var ct=mathAbs(v2DistSquare(v1,_)-st);ct<at&&(at=ct,ot=ht)}for(var ut=0;ut<32;ut++){var ft=ot+dt;v2[0]=quadraticAt(tt[0],nt[0],it[0],ot),v2[1]=quadraticAt(tt[1],nt[1],it[1],ot),v3[0]=quadraticAt(tt[0],nt[0],it[0],ft),v3[1]=quadraticAt(tt[1],nt[1],it[1],ft);var ct=v2DistSquare(v2,_)-st;if(mathAbs(ct)<.01)break;var gt=v2DistSquare(v3,_)-st;dt/=2,ct<0?gt>=0?ot=ot+dt:ot=ot-dt:gt>=0?ot=ot-dt:ot=ot+dt}return ot}function adjustEdge(_e,_){var et=[],tt=quadraticSubdivide,nt=[[],[],[]],it=[[],[]],at=[];_/=2,_e.eachEdge(function(ot,st){var dt=ot.getLayout(),ht=ot.getVisual("fromSymbol"),ct=ot.getVisual("toSymbol");dt.__original||(dt.__original=[clone$3(dt[0]),clone$3(dt[1])],dt[2]&&dt.__original.push(clone$3(dt[2])));var ut=dt.__original;if(dt[2]!=null){if(copy$1(nt[0],ut[0]),copy$1(nt[1],ut[2]),copy$1(nt[2],ut[1]),ht&&ht!=="none"){var ft=getSymbolSize(ot.node1),gt=intersectCurveCircle(nt,ut[0],ft*_);tt(nt[0][0],nt[1][0],nt[2][0],gt,et),nt[0][0]=et[3],nt[1][0]=et[4],tt(nt[0][1],nt[1][1],nt[2][1],gt,et),nt[0][1]=et[3],nt[1][1]=et[4]}if(ct&&ct!=="none"){var ft=getSymbolSize(ot.node2),gt=intersectCurveCircle(nt,ut[1],ft*_);tt(nt[0][0],nt[1][0],nt[2][0],gt,et),nt[1][0]=et[1],nt[2][0]=et[2],tt(nt[0][1],nt[1][1],nt[2][1],gt,et),nt[1][1]=et[1],nt[2][1]=et[2]}copy$1(dt[0],nt[0]),copy$1(dt[1],nt[2]),copy$1(dt[2],nt[1])}else{if(copy$1(it[0],ut[0]),copy$1(it[1],ut[1]),sub(at,it[1],it[0]),normalize$3(at,at),ht&&ht!=="none"){var ft=getSymbolSize(ot.node1);scaleAndAdd$1(it[0],it[0],at,ft*_)}if(ct&&ct!=="none"){var ft=getSymbolSize(ot.node2);scaleAndAdd$1(it[1],it[1],at,-ft*_)}copy$1(dt[0],it[0]),copy$1(dt[1],it[1])}})}function isViewCoordSys(_e){return _e.type==="view"}var GraphView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(et,tt){var nt=new SymbolDraw,it=new LineDraw,at=this.group;this._controller=new RoamController(tt.getZr()),this._controllerHost={target:at},at.add(nt.group),at.add(it.group),this._symbolDraw=nt,this._lineDraw=it,this._firstRender=!0},_.prototype.render=function(et,tt,nt){var it=this,at=et.coordinateSystem;this._model=et;var ot=this._symbolDraw,st=this._lineDraw,dt=this.group;if(isViewCoordSys(at)){var ht={x:at.x,y:at.y,scaleX:at.scaleX,scaleY:at.scaleY};this._firstRender?dt.attr(ht):updateProps$1(dt,ht,et)}adjustEdge(et.getGraph(),getNodeGlobalScale(et));var ct=et.getData();ot.updateData(ct);var ut=et.getEdgeData();st.updateData(ut),this._updateNodeAndLinkScale(),this._updateController(et,tt,nt),clearTimeout(this._layoutTimeout);var ft=et.forceLayout,gt=et.get(["force","layoutAnimation"]);ft&&this._startForceLayoutIteration(ft,gt);var mt=et.get("layout");ct.graph.eachNode(function(_t){var xt=_t.dataIndex,St=_t.getGraphicEl(),Tt=_t.getModel();if(St){St.off("drag").off("dragend");var wt=Tt.get("draggable");wt&&St.on("drag",function(Et){switch(mt){case"force":ft.warmUp(),!it._layouting&&it._startForceLayoutIteration(ft,gt),ft.setFixed(xt),ct.setItemLayout(xt,[St.x,St.y]);break;case"circular":ct.setItemLayout(xt,[St.x,St.y]),_t.setLayout({fixed:!0},!0),circularLayout(et,"symbolSize",_t,[Et.offsetX,Et.offsetY]),it.updateLayout(et);break;case"none":default:ct.setItemLayout(xt,[St.x,St.y]),simpleLayoutEdge(et.getGraph(),et),it.updateLayout(et);break}}).on("dragend",function(){ft&&ft.setUnfixed(xt)}),St.setDraggable(wt,!!Tt.get("cursor"));var Ct=Tt.get(["emphasis","focus"]);Ct==="adjacency"&&(getECData(St).focus=_t.getAdjacentDataIndices())}}),ct.graph.eachEdge(function(_t){var xt=_t.getGraphicEl(),St=_t.getModel().get(["emphasis","focus"]);xt&&St==="adjacency"&&(getECData(xt).focus={edge:[_t.dataIndex],node:[_t.node1.dataIndex,_t.node2.dataIndex]})});var vt=et.get("layout")==="circular"&&et.get(["circular","rotateLabel"]),yt=ct.getLayout("cx"),bt=ct.getLayout("cy");ct.graph.eachNode(function(_t){rotateNodeLabel(_t,vt,yt,bt)}),this._firstRender=!1},_.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},_.prototype._startForceLayoutIteration=function(et,tt){var nt=this;(function it(){et.step(function(at){nt.updateLayout(nt._model),(nt._layouting=!at)&&(tt?nt._layoutTimeout=setTimeout(it,16):it())})})()},_.prototype._updateController=function(et,tt,nt){var it=this,at=this._controller,ot=this._controllerHost,st=this.group;if(at.setPointerChecker(function(dt,ht,ct){var ut=st.getBoundingRect();return ut.applyTransform(st.transform),ut.contain(ht,ct)&&!onIrrelevantElement(dt,nt,et)}),!isViewCoordSys(et.coordinateSystem)){at.disable();return}at.enable(et.get("roam")),ot.zoomLimit=et.get("scaleLimit"),ot.zoom=et.coordinateSystem.getZoom(),at.off("pan").off("zoom").on("pan",function(dt){updateViewOnPan(ot,dt.dx,dt.dy),nt.dispatchAction({seriesId:et.id,type:"graphRoam",dx:dt.dx,dy:dt.dy})}).on("zoom",function(dt){updateViewOnZoom(ot,dt.scale,dt.originX,dt.originY),nt.dispatchAction({seriesId:et.id,type:"graphRoam",zoom:dt.scale,originX:dt.originX,originY:dt.originY}),it._updateNodeAndLinkScale(),adjustEdge(et.getGraph(),getNodeGlobalScale(et)),it._lineDraw.updateLayout(),nt.updateLabelLayout()})},_.prototype._updateNodeAndLinkScale=function(){var et=this._model,tt=et.getData(),nt=getNodeGlobalScale(et);tt.eachItemGraphicEl(function(it,at){it&&it.setSymbolScale(nt)})},_.prototype.updateLayout=function(et){adjustEdge(et.getGraph(),getNodeGlobalScale(et)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},_.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},_.type="graph",_}(ChartView);function generateNodeKey(_e){return"_EC_"+_e}var Graph=function(){function _e(_){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=_||!1}return _e.prototype.isDirected=function(){return this._directed},_e.prototype.addNode=function(_,et){_=_==null?""+et:""+_;var tt=this._nodesMap;if(!tt[generateNodeKey(_)]){var nt=new GraphNode(_,et);return nt.hostGraph=this,this.nodes.push(nt),tt[generateNodeKey(_)]=nt,nt}},_e.prototype.getNodeByIndex=function(_){var et=this.data.getRawIndex(_);return this.nodes[et]},_e.prototype.getNodeById=function(_){return this._nodesMap[generateNodeKey(_)]},_e.prototype.addEdge=function(_,et,tt){var nt=this._nodesMap,it=this._edgesMap;if(isNumber(_)&&(_=this.nodes[_]),isNumber(et)&&(et=this.nodes[et]),_ instanceof GraphNode||(_=nt[generateNodeKey(_)]),et instanceof GraphNode||(et=nt[generateNodeKey(et)]),!(!_||!et)){var at=_.id+"-"+et.id,ot=new GraphEdge(_,et,tt);return ot.hostGraph=this,this._directed&&(_.outEdges.push(ot),et.inEdges.push(ot)),_.edges.push(ot),_!==et&&et.edges.push(ot),this.edges.push(ot),it[at]=ot,ot}},_e.prototype.getEdgeByIndex=function(_){var et=this.edgeData.getRawIndex(_);return this.edges[et]},_e.prototype.getEdge=function(_,et){_ instanceof GraphNode&&(_=_.id),et instanceof GraphNode&&(et=et.id);var tt=this._edgesMap;return this._directed?tt[_+"-"+et]:tt[_+"-"+et]||tt[et+"-"+_]},_e.prototype.eachNode=function(_,et){for(var tt=this.nodes,nt=tt.length,it=0;it<nt;it++)tt[it].dataIndex>=0&&_.call(et,tt[it],it)},_e.prototype.eachEdge=function(_,et){for(var tt=this.edges,nt=tt.length,it=0;it<nt;it++)tt[it].dataIndex>=0&&tt[it].node1.dataIndex>=0&&tt[it].node2.dataIndex>=0&&_.call(et,tt[it],it)},_e.prototype.breadthFirstTraverse=function(_,et,tt,nt){if(et instanceof GraphNode||(et=this._nodesMap[generateNodeKey(et)]),!!et){for(var it=tt==="out"?"outEdges":tt==="in"?"inEdges":"edges",at=0;at<this.nodes.length;at++)this.nodes[at].__visited=!1;if(!_.call(nt,et,null))for(var ot=[et];ot.length;)for(var st=ot.shift(),dt=st[it],at=0;at<dt.length;at++){var ht=dt[at],ct=ht.node1===st?ht.node2:ht.node1;if(!ct.__visited){if(_.call(nt,ct,st))return;ot.push(ct),ct.__visited=!0}}}},_e.prototype.update=function(){for(var _=this.data,et=this.edgeData,tt=this.nodes,nt=this.edges,it=0,at=tt.length;it<at;it++)tt[it].dataIndex=-1;for(var it=0,at=_.count();it<at;it++)tt[_.getRawIndex(it)].dataIndex=it;et.filterSelf(function(ot){var st=nt[et.getRawIndex(ot)];return st.node1.dataIndex>=0&&st.node2.dataIndex>=0});for(var it=0,at=nt.length;it<at;it++)nt[it].dataIndex=-1;for(var it=0,at=et.count();it<at;it++)nt[et.getRawIndex(it)].dataIndex=it},_e.prototype.clone=function(){for(var _=new _e(this._directed),et=this.nodes,tt=this.edges,nt=0;nt<et.length;nt++)_.addNode(et[nt].id,et[nt].dataIndex);for(var nt=0;nt<tt.length;nt++){var it=tt[nt];_.addEdge(it.node1.id,it.node2.id,it.dataIndex)}return _},_e}(),GraphNode=function(){function _e(_,et){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=_??"",this.dataIndex=et??-1}return _e.prototype.degree=function(){return this.edges.length},_e.prototype.inDegree=function(){return this.inEdges.length},_e.prototype.outDegree=function(){return this.outEdges.length},_e.prototype.getModel=function(_){if(!(this.dataIndex<0)){var et=this.hostGraph,tt=et.data.getItemModel(this.dataIndex);return tt.getModel(_)}},_e.prototype.getAdjacentDataIndices=function(){for(var _={edge:[],node:[]},et=0;et<this.edges.length;et++){var tt=this.edges[et];tt.dataIndex<0||(_.edge.push(tt.dataIndex),_.node.push(tt.node1.dataIndex,tt.node2.dataIndex))}return _},_e.prototype.getTrajectoryDataIndices=function(){for(var _=createHashMap(),et=createHashMap(),tt=0;tt<this.edges.length;tt++){var nt=this.edges[tt];if(!(nt.dataIndex<0)){_.set(nt.dataIndex,!0);for(var it=[nt.node1],at=[nt.node2],ot=0;ot<it.length;){var st=it[ot];ot++,et.set(st.dataIndex,!0);for(var dt=0;dt<st.inEdges.length;dt++)_.set(st.inEdges[dt].dataIndex,!0),it.push(st.inEdges[dt].node1)}for(ot=0;ot<at.length;){var ht=at[ot];ot++,et.set(ht.dataIndex,!0);for(var dt=0;dt<ht.outEdges.length;dt++)_.set(ht.outEdges[dt].dataIndex,!0),at.push(ht.outEdges[dt].node2)}}}return{edge:_.keys(),node:et.keys()}},_e}(),GraphEdge=function(){function _e(_,et,tt){this.dataIndex=-1,this.node1=_,this.node2=et,this.dataIndex=tt??-1}return _e.prototype.getModel=function(_){if(!(this.dataIndex<0)){var et=this.hostGraph,tt=et.edgeData.getItemModel(this.dataIndex);return tt.getModel(_)}},_e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},_e.prototype.getTrajectoryDataIndices=function(){var _=createHashMap(),et=createHashMap();_.set(this.dataIndex,!0);for(var tt=[this.node1],nt=[this.node2],it=0;it<tt.length;){var at=tt[it];it++,et.set(at.dataIndex,!0);for(var ot=0;ot<at.inEdges.length;ot++)_.set(at.inEdges[ot].dataIndex,!0),tt.push(at.inEdges[ot].node1)}for(it=0;it<nt.length;){var st=nt[it];it++,et.set(st.dataIndex,!0);for(var ot=0;ot<st.outEdges.length;ot++)_.set(st.outEdges[ot].dataIndex,!0),nt.push(st.outEdges[ot].node2)}return{edge:_.keys(),node:et.keys()}},_e}();function createGraphDataProxyMixin(_e,_){return{getValue:function(et){var tt=this[_e][_];return tt.getStore().get(tt.getDimensionIndex(et||"value"),this.dataIndex)},setVisual:function(et,tt){this.dataIndex>=0&&this[_e][_].setItemVisual(this.dataIndex,et,tt)},getVisual:function(et){return this[_e][_].getItemVisual(this.dataIndex,et)},setLayout:function(et,tt){this.dataIndex>=0&&this[_e][_].setItemLayout(this.dataIndex,et,tt)},getLayout:function(){return this[_e][_].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[_e][_].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[_e][_].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(_e,_,et,tt,nt){for(var it=new Graph(tt),at=0;at<_e.length;at++)it.addNode(retrieve(_e[at].id,_e[at].name,at),at);for(var ot=[],st=[],dt=0,at=0;at<_.length;at++){var ht=_[at],ct=ht.source,ut=ht.target;it.addEdge(ct,ut,dt)&&(st.push(ht),ot.push(retrieve(convertOptionIdName(ht.id,null),ct+" > "+ut)),dt++)}var ft=et.get("coordinateSystem"),gt;if(ft==="cartesian2d"||ft==="polar")gt=createSeriesData(_e,et);else{var mt=CoordinateSystemManager.get(ft),vt=mt?mt.dimensions||[]:[];indexOf(vt,"value")<0&&vt.concat(["value"]);var yt=prepareSeriesDataSchema(_e,{coordDimensions:vt,encodeDefine:et.getEncode()}).dimensions;gt=new SeriesData(yt,et),gt.initData(_e)}var bt=new SeriesData(["value"],et);return bt.initData(st,ot),nt&&nt(gt,bt),linkSeriesData({mainData:gt,struct:it,structAttr:"graph",datas:{node:gt,edge:bt},datasAttr:{node:"data",edge:"edgeData"}}),it.update(),it}var GraphSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.hasSymbolVisual=!0,et}return _.prototype.init=function(et){_e.prototype.init.apply(this,arguments);var tt=this;function nt(){return tt._categoriesData}this.legendVisualProvider=new LegendVisualProvider(nt,nt),this.fillDataTextStyle(et.edges||et.links),this._updateCategoriesData()},_.prototype.mergeOption=function(et){_e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(et.edges||et.links),this._updateCategoriesData()},_.prototype.mergeDefaultAndTheme=function(et){_e.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(et,"edgeLabel",["show"])},_.prototype.getInitialData=function(et,tt){var nt=et.edges||et.links||[],it=et.data||et.nodes||[],at=this;{initCurvenessList(this);var ot=createGraphFromNodeEdge(it,nt,this,!0,st);return each$f(ot.edges,function(dt){createEdgeMapForCurveness(dt.node1,dt.node2,this,dt.dataIndex)},this),ot.data}function st(dt,ht){dt.wrapMethod("getItemModel",function(gt){var mt=at._categoriesModels,vt=gt.getShallow("category"),yt=mt[vt];return yt&&(yt.parentModel=gt.parentModel,gt.parentModel=yt),gt});var ct=Model.prototype.getModel;function ut(gt,mt){var vt=ct.call(this,gt,mt);return vt.resolveParentPath=ft,vt}ht.wrapMethod("getItemModel",function(gt){return gt.resolveParentPath=ft,gt.getModel=ut,gt});function ft(gt){if(gt&&(gt[0]==="label"||gt[1]==="label")){var mt=gt.slice();return gt[0]==="label"?mt[0]="edgeLabel":gt[1]==="label"&&(mt[1]="edgeLabel"),mt}return gt}}},_.prototype.getGraph=function(){return this.getData().graph},_.prototype.getEdgeData=function(){return this.getGraph().edgeData},_.prototype.getCategoriesData=function(){return this._categoriesData},_.prototype.formatTooltip=function(et,tt,nt){if(nt==="edge"){var it=this.getData(),at=this.getDataParams(et,nt),ot=it.graph.getEdgeByIndex(et),st=it.getName(ot.node1.dataIndex),dt=it.getName(ot.node2.dataIndex),ht=[];return st!=null&&ht.push(st),dt!=null&&ht.push(dt),createTooltipMarkup("nameValue",{name:ht.join(" > "),value:at.value,noValue:at.value==null})}var ct=defaultSeriesFormatTooltip({series:this,dataIndex:et,multipleSeries:tt});return ct},_.prototype._updateCategoriesData=function(){var et=map$1(this.option.categories||[],function(nt){return nt.value!=null?nt:extend({value:0},nt)}),tt=new SeriesData(["value"],this);tt.initData(et),this._categoriesData=tt,this._categoriesModels=tt.mapArray(function(nt){return tt.getItemModel(nt)})},_.prototype.setZoom=function(et){this.option.zoom=et},_.prototype.setCenter=function(et){this.option.center=et},_.prototype.isAnimationEnabled=function(){return _e.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},_.type="series.graph",_.dependencies=["grid","polar","geo","singleAxis","calendar"],_.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},_}(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(_e){_e.registerChartView(GraphView),_e.registerSeriesModel(GraphSeriesModel),_e.registerProcessor(categoryFilter),_e.registerVisual(categoryVisual),_e.registerVisual(graphEdgeVisual),_e.registerLayout(graphSimpleLayout),_e.registerLayout(_e.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),_e.registerLayout(graphForceLayout),_e.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),_e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),_e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),_e.registerAction(actionInfo$1,function(_,et,tt){et.eachComponent({mainType:"series",query:_},function(nt){var it=nt.coordinateSystem,at=updateCenterAndZoom(it,_,void 0,tt);nt.setCenter&&nt.setCenter(at.center),nt.setZoom&&nt.setZoom(at.zoom)})})}var PointerShape=function(){function _e(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return _e}(),PointerPath=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.type="pointer",tt}return _.prototype.getDefaultShape=function(){return new PointerShape},_.prototype.buildPath=function(et,tt){var nt=Math.cos,it=Math.sin,at=tt.r,ot=tt.width,st=tt.angle,dt=tt.x-nt(st)*ot*(ot>=at/3?1:2),ht=tt.y-it(st)*ot*(ot>=at/3?1:2);st=tt.angle-Math.PI/2,et.moveTo(dt,ht),et.lineTo(tt.x+nt(st)*ot,tt.y+it(st)*ot),et.lineTo(tt.x+nt(tt.angle)*at,tt.y+it(tt.angle)*at),et.lineTo(tt.x-nt(st)*ot,tt.y-it(st)*ot),et.lineTo(dt,ht)},_}(Path);function parsePosition(_e,_){var et=_e.get("center"),tt=_.getWidth(),nt=_.getHeight(),it=Math.min(tt,nt),at=parsePercent(et[0],_.getWidth()),ot=parsePercent(et[1],_.getHeight()),st=parsePercent(_e.get("radius"),it/2);return{cx:at,cy:ot,r:st}}function formatLabel(_e,_){var et=_e==null?"":_e+"";return _&&(isString$1(_)?et=_.replace("{value}",et):isFunction$3(_)&&(et=_(_e))),et}var GaugeView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){this.group.removeAll();var it=et.get(["axisLine","lineStyle","color"]),at=parsePosition(et,nt);this._renderMain(et,tt,nt,it,at),this._data=et.getData()},_.prototype.dispose=function(){},_.prototype._renderMain=function(et,tt,nt,it,at){var ot=this.group,st=et.get("clockwise"),dt=-et.get("startAngle")/180*Math.PI,ht=-et.get("endAngle")/180*Math.PI,ct=et.getModel("axisLine"),ut=ct.get("roundCap"),ft=ut?SausagePath:Sector,gt=ct.get("show"),mt=ct.getModel("lineStyle"),vt=mt.get("width"),yt=[dt,ht];normalizeArcAngles(yt,!st),dt=yt[0],ht=yt[1];for(var bt=ht-dt,_t=dt,xt=[],St=0;gt&&St<it.length;St++){var Tt=Math.min(Math.max(it[St][0],0),1);ht=dt+bt*Tt;var wt=new ft({shape:{startAngle:_t,endAngle:ht,cx:at.cx,cy:at.cy,clockwise:st,r0:at.r-vt,r:at.r},silent:!0});wt.setStyle({fill:it[St][1]}),wt.setStyle(mt.getLineStyle(["color","width"])),xt.push(wt),_t=ht}xt.reverse(),each$f(xt,function(Et){return ot.add(Et)});var Ct=function(Et){if(Et<=0)return it[0][1];var At;for(At=0;At<it.length;At++)if(it[At][0]>=Et&&(At===0?0:it[At-1][0])<Et)return it[At][1];return it[At-1][1]};this._renderTicks(et,tt,nt,Ct,at,dt,ht,st,vt),this._renderTitleAndDetail(et,tt,nt,Ct,at),this._renderAnchor(et,at),this._renderPointer(et,tt,nt,Ct,at,dt,ht,st,vt)},_.prototype._renderTicks=function(et,tt,nt,it,at,ot,st,dt,ht){for(var ct=this.group,ut=at.cx,ft=at.cy,gt=at.r,mt=+et.get("min"),vt=+et.get("max"),yt=et.getModel("splitLine"),bt=et.getModel("axisTick"),_t=et.getModel("axisLabel"),xt=et.get("splitNumber"),St=bt.get("splitNumber"),Tt=parsePercent(yt.get("length"),gt),wt=parsePercent(bt.get("length"),gt),Ct=ot,Et=(st-ot)/xt,At=Et/St,Pt=yt.getModel("lineStyle").getLineStyle(),Rt=bt.getModel("lineStyle").getLineStyle(),It=yt.get("distance"),Mt,Ot,$t=0;$t<=xt;$t++){if(Mt=Math.cos(Ct),Ot=Math.sin(Ct),yt.get("show")){var Lt=It?It+ht:ht,kt=new Line$1({shape:{x1:Mt*(gt-Lt)+ut,y1:Ot*(gt-Lt)+ft,x2:Mt*(gt-Tt-Lt)+ut,y2:Ot*(gt-Tt-Lt)+ft},style:Pt,silent:!0});Pt.stroke==="auto"&&kt.setStyle({stroke:it($t/xt)}),ct.add(kt)}if(_t.get("show")){var Lt=_t.get("distance")+It,Nt=formatLabel(round$3($t/xt*(vt-mt)+mt),_t.get("formatter")),Vt=it($t/xt),zt=Mt*(gt-Tt-Lt)+ut,Xt=Ot*(gt-Tt-Lt)+ft,Wt=_t.get("rotate"),nr=0;Wt==="radial"?(nr=-Ct+2*Math.PI,nr>Math.PI/2&&(nr+=Math.PI)):Wt==="tangential"?nr=-Ct-Math.PI/2:isNumber(Wt)&&(nr=Wt*Math.PI/180),nr===0?ct.add(new ZRText({style:createTextStyle$1(_t,{text:Nt,x:zt,y:Xt,verticalAlign:Ot<-.8?"top":Ot>.8?"bottom":"middle",align:Mt<-.4?"left":Mt>.4?"right":"center"},{inheritColor:Vt}),silent:!0})):ct.add(new ZRText({style:createTextStyle$1(_t,{text:Nt,x:zt,y:Xt,verticalAlign:"middle",align:"center"},{inheritColor:Vt}),silent:!0,originX:zt,originY:Xt,rotation:nr}))}if(bt.get("show")&&$t!==xt){var Lt=bt.get("distance");Lt=Lt?Lt+ht:ht;for(var Jt=0;Jt<=St;Jt++){Mt=Math.cos(Ct),Ot=Math.sin(Ct);var lr=new Line$1({shape:{x1:Mt*(gt-Lt)+ut,y1:Ot*(gt-Lt)+ft,x2:Mt*(gt-wt-Lt)+ut,y2:Ot*(gt-wt-Lt)+ft},silent:!0,style:Rt});Rt.stroke==="auto"&&lr.setStyle({stroke:it(($t+Jt/St)/xt)}),ct.add(lr),Ct+=At}Ct-=At}else Ct+=Et}},_.prototype._renderPointer=function(et,tt,nt,it,at,ot,st,dt,ht){var ct=this.group,ut=this._data,ft=this._progressEls,gt=[],mt=et.get(["pointer","show"]),vt=et.getModel("progress"),yt=vt.get("show"),bt=et.getData(),_t=bt.mapDimension("value"),xt=+et.get("min"),St=+et.get("max"),Tt=[xt,St],wt=[ot,st];function Ct(At,Pt){var Rt=bt.getItemModel(At),It=Rt.getModel("pointer"),Mt=parsePercent(It.get("width"),at.r),Ot=parsePercent(It.get("length"),at.r),$t=et.get(["pointer","icon"]),Lt=It.get("offsetCenter"),kt=parsePercent(Lt[0],at.r),Nt=parsePercent(Lt[1],at.r),Vt=It.get("keepAspect"),zt;return $t?zt=createSymbol$1($t,kt-Mt/2,Nt-Ot,Mt,Ot,null,Vt):zt=new PointerPath({shape:{angle:-Math.PI/2,width:Mt,r:Ot,x:kt,y:Nt}}),zt.rotation=-(Pt+Math.PI/2),zt.x=at.cx,zt.y=at.cy,zt}function Et(At,Pt){var Rt=vt.get("roundCap"),It=Rt?SausagePath:Sector,Mt=vt.get("overlap"),Ot=Mt?vt.get("width"):ht/bt.count(),$t=Mt?at.r-Ot:at.r-(At+1)*Ot,Lt=Mt?at.r:at.r-At*Ot,kt=new It({shape:{startAngle:ot,endAngle:Pt,cx:at.cx,cy:at.cy,clockwise:dt,r0:$t,r:Lt}});return Mt&&(kt.z2=linearMap$2(bt.get(_t,At),[xt,St],[100,0],!0)),kt}(yt||mt)&&(bt.diff(ut).add(function(At){var Pt=bt.get(_t,At);if(mt){var Rt=Ct(At,ot);initProps(Rt,{rotation:-((isNaN(+Pt)?wt[0]:linearMap$2(Pt,Tt,wt,!0))+Math.PI/2)},et),ct.add(Rt),bt.setItemGraphicEl(At,Rt)}if(yt){var It=Et(At,ot),Mt=vt.get("clip");initProps(It,{shape:{endAngle:linearMap$2(Pt,Tt,wt,Mt)}},et),ct.add(It),setCommonECData(et.seriesIndex,bt.dataType,At,It),gt[At]=It}}).update(function(At,Pt){var Rt=bt.get(_t,At);if(mt){var It=ut.getItemGraphicEl(Pt),Mt=It?It.rotation:ot,Ot=Ct(At,Mt);Ot.rotation=Mt,updateProps$1(Ot,{rotation:-((isNaN(+Rt)?wt[0]:linearMap$2(Rt,Tt,wt,!0))+Math.PI/2)},et),ct.add(Ot),bt.setItemGraphicEl(At,Ot)}if(yt){var $t=ft[Pt],Lt=$t?$t.shape.endAngle:ot,kt=Et(At,Lt),Nt=vt.get("clip");updateProps$1(kt,{shape:{endAngle:linearMap$2(Rt,Tt,wt,Nt)}},et),ct.add(kt),setCommonECData(et.seriesIndex,bt.dataType,At,kt),gt[At]=kt}}).execute(),bt.each(function(At){var Pt=bt.getItemModel(At),Rt=Pt.getModel("emphasis"),It=Rt.get("focus"),Mt=Rt.get("blurScope"),Ot=Rt.get("disabled");if(mt){var $t=bt.getItemGraphicEl(At),Lt=bt.getItemVisual(At,"style"),kt=Lt.fill;if($t instanceof ZRImage){var Nt=$t.style;$t.useStyle(extend({image:Nt.image,x:Nt.x,y:Nt.y,width:Nt.width,height:Nt.height},Lt))}else $t.useStyle(Lt),$t.type!=="pointer"&&$t.setColor(kt);$t.setStyle(Pt.getModel(["pointer","itemStyle"]).getItemStyle()),$t.style.fill==="auto"&&$t.setStyle("fill",it(linearMap$2(bt.get(_t,At),Tt,[0,1],!0))),$t.z2EmphasisLift=0,setStatesStylesFromModel($t,Pt),toggleHoverEmphasis($t,It,Mt,Ot)}if(yt){var Vt=gt[At];Vt.useStyle(bt.getItemVisual(At,"style")),Vt.setStyle(Pt.getModel(["progress","itemStyle"]).getItemStyle()),Vt.z2EmphasisLift=0,setStatesStylesFromModel(Vt,Pt),toggleHoverEmphasis(Vt,It,Mt,Ot)}}),this._progressEls=gt)},_.prototype._renderAnchor=function(et,tt){var nt=et.getModel("anchor"),it=nt.get("show");if(it){var at=nt.get("size"),ot=nt.get("icon"),st=nt.get("offsetCenter"),dt=nt.get("keepAspect"),ht=createSymbol$1(ot,tt.cx-at/2+parsePercent(st[0],tt.r),tt.cy-at/2+parsePercent(st[1],tt.r),at,at,null,dt);ht.z2=nt.get("showAbove")?1:0,ht.setStyle(nt.getModel("itemStyle").getItemStyle()),this.group.add(ht)}},_.prototype._renderTitleAndDetail=function(et,tt,nt,it,at){var ot=this,st=et.getData(),dt=st.mapDimension("value"),ht=+et.get("min"),ct=+et.get("max"),ut=new Group$3,ft=[],gt=[],mt=et.isAnimationEnabled(),vt=et.get(["pointer","showAbove"]);st.diff(this._data).add(function(yt){ft[yt]=new ZRText({silent:!0}),gt[yt]=new ZRText({silent:!0})}).update(function(yt,bt){ft[yt]=ot._titleEls[bt],gt[yt]=ot._detailEls[bt]}).execute(),st.each(function(yt){var bt=st.getItemModel(yt),_t=st.get(dt,yt),xt=new Group$3,St=it(linearMap$2(_t,[ht,ct],[0,1],!0)),Tt=bt.getModel("title");if(Tt.get("show")){var wt=Tt.get("offsetCenter"),Ct=at.cx+parsePercent(wt[0],at.r),Et=at.cy+parsePercent(wt[1],at.r),At=ft[yt];At.attr({z2:vt?0:2,style:createTextStyle$1(Tt,{x:Ct,y:Et,text:st.getName(yt),align:"center",verticalAlign:"middle"},{inheritColor:St})}),xt.add(At)}var Pt=bt.getModel("detail");if(Pt.get("show")){var Rt=Pt.get("offsetCenter"),It=at.cx+parsePercent(Rt[0],at.r),Mt=at.cy+parsePercent(Rt[1],at.r),Ot=parsePercent(Pt.get("width"),at.r),$t=parsePercent(Pt.get("height"),at.r),Lt=et.get(["progress","show"])?st.getItemVisual(yt,"style").fill:St,At=gt[yt],kt=Pt.get("formatter");At.attr({z2:vt?0:2,style:createTextStyle$1(Pt,{x:It,y:Mt,text:formatLabel(_t,kt),width:isNaN(Ot)?null:Ot,height:isNaN($t)?null:$t,align:"center",verticalAlign:"middle"},{inheritColor:Lt})}),setLabelValueAnimation(At,{normal:Pt},_t,function(Vt){return formatLabel(Vt,kt)}),mt&&animateLabelValue(At,yt,st,et,{getFormattedLabel:function(Vt,zt,Xt,Wt,nr,Jt){return formatLabel(Jt?Jt.interpolatedValue:_t,kt)}}),xt.add(At)}ut.add(xt)}),this.group.add(ut),this._titleEls=ft,this._detailEls=gt},_.type="gauge",_}(ChartView),GaugeSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.visualStyleAccessPath="itemStyle",et}return _.prototype.getInitialData=function(et,tt){return createSeriesDataSimply(this,["value"])},_.type="series.gauge",_.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},_}(SeriesModel);function install$E(_e){_e.registerChartView(GaugeView),_e.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(_e){__extends$1(_,_e);function _(et,tt){var nt=_e.call(this)||this,it=nt,at=new Polyline$1,ot=new ZRText;return it.setTextContent(ot),nt.setTextGuideLine(at),nt.updateData(et,tt,!0),nt}return _.prototype.updateData=function(et,tt,nt){var it=this,at=et.hostModel,ot=et.getItemModel(tt),st=et.getItemLayout(tt),dt=ot.getModel("emphasis"),ht=ot.get(opacityAccessPath$1);ht=ht??1,nt||saveOldStyle(it),it.useStyle(et.getItemVisual(tt,"style")),it.style.lineJoin="round",nt?(it.setShape({points:st.points}),it.style.opacity=0,initProps(it,{style:{opacity:ht}},at,tt)):updateProps$1(it,{style:{opacity:ht},shape:{points:st.points}},at,tt),setStatesStylesFromModel(it,ot),this._updateLabel(et,tt),toggleHoverEmphasis(this,dt.get("focus"),dt.get("blurScope"),dt.get("disabled"))},_.prototype._updateLabel=function(et,tt){var nt=this,it=this.getTextGuideLine(),at=nt.getTextContent(),ot=et.hostModel,st=et.getItemModel(tt),dt=et.getItemLayout(tt),ht=dt.label,ct=et.getItemVisual(tt,"style"),ut=ct.fill;setLabelStyle(at,getLabelStatesModels(st),{labelFetcher:et.hostModel,labelDataIndex:tt,defaultOpacity:ct.opacity,defaultText:et.getName(tt)},{normal:{align:ht.textAlign,verticalAlign:ht.verticalAlign}}),nt.setTextConfig({local:!0,inside:!!ht.inside,insideStroke:ut,outsideFill:ut});var ft=ht.linePoints;it.setShape({points:ft}),nt.textGuideLineConfig={anchor:ft?new Point(ft[0][0],ft[0][1]):null},updateProps$1(at,{style:{x:ht.x,y:ht.y}},ot,tt),at.attr({rotation:ht.rotation,originX:ht.x,originY:ht.y,z2:10}),setLabelLineStyle(nt,getLabelLineStatesModels(st),{stroke:ut})},_}(Polygon),FunnelView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.ignoreLabelLineUpdate=!0,et}return _.prototype.render=function(et,tt,nt){var it=et.getData(),at=this._data,ot=this.group;it.diff(at).add(function(st){var dt=new FunnelPiece(it,st);it.setItemGraphicEl(st,dt),ot.add(dt)}).update(function(st,dt){var ht=at.getItemGraphicEl(dt);ht.updateData(it,st),ot.add(ht),it.setItemGraphicEl(st,ht)}).remove(function(st){var dt=at.getItemGraphicEl(st);removeElementWithFadeOut(dt,et,st)}).execute(),this._data=it},_.prototype.remove=function(){this.group.removeAll(),this._data=null},_.prototype.dispose=function(){},_.type="funnel",_}(ChartView),FunnelSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(et){_e.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$2(this.getData,this),bind$2(this.getRawData,this)),this._defaultLabelLine(et)},_.prototype.getInitialData=function(et,tt){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},_.prototype._defaultLabelLine=function(et){defaultEmphasis(et,"labelLine",["show"]);var tt=et.labelLine,nt=et.emphasis.labelLine;tt.show=tt.show&&et.label.show,nt.show=nt.show&&et.emphasis.label.show},_.prototype.getDataParams=function(et){var tt=this.getData(),nt=_e.prototype.getDataParams.call(this,et),it=tt.mapDimension("value"),at=tt.getSum(it);return nt.percent=at?+(tt.get(it,et)/at*100).toFixed(2):0,nt.$vars.push("percent"),nt},_.type="series.funnel",_.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},_}(SeriesModel);function getViewRect$2(_e,_){return getLayoutRect(_e.getBoxLayoutParams(),{width:_.getWidth(),height:_.getHeight()})}function getSortedIndices(_e,_){for(var et=_e.mapDimension("value"),tt=_e.mapArray(et,function(st){return st}),nt=[],it=_==="ascending",at=0,ot=_e.count();at<ot;at++)nt[at]=at;return isFunction$3(_)?nt.sort(_):_!=="none"&&nt.sort(function(st,dt){return it?tt[st]-tt[dt]:tt[dt]-tt[st]}),nt}function labelLayout(_e){var _=_e.hostModel,et=_.get("orient");_e.each(function(tt){var nt=_e.getItemModel(tt),it=nt.getModel("label"),at=it.get("position"),ot=nt.getModel("labelLine"),st=_e.getItemLayout(tt),dt=st.points,ht=at==="inner"||at==="inside"||at==="center"||at==="insideLeft"||at==="insideRight",ct,ut,ft,gt;if(ht)at==="insideLeft"?(ut=(dt[0][0]+dt[3][0])/2+5,ft=(dt[0][1]+dt[3][1])/2,ct="left"):at==="insideRight"?(ut=(dt[1][0]+dt[2][0])/2-5,ft=(dt[1][1]+dt[2][1])/2,ct="right"):(ut=(dt[0][0]+dt[1][0]+dt[2][0]+dt[3][0])/4,ft=(dt[0][1]+dt[1][1]+dt[2][1]+dt[3][1])/4,ct="center"),gt=[[ut,ft],[ut,ft]];else{var mt=void 0,vt=void 0,yt=void 0,bt=void 0,_t=ot.get("length");at==="left"?(mt=(dt[3][0]+dt[0][0])/2,vt=(dt[3][1]+dt[0][1])/2,yt=mt-_t,ut=yt-5,ct="right"):at==="right"?(mt=(dt[1][0]+dt[2][0])/2,vt=(dt[1][1]+dt[2][1])/2,yt=mt+_t,ut=yt+5,ct="left"):at==="top"?(mt=(dt[3][0]+dt[0][0])/2,vt=(dt[3][1]+dt[0][1])/2,bt=vt-_t,ft=bt-5,ct="center"):at==="bottom"?(mt=(dt[1][0]+dt[2][0])/2,vt=(dt[1][1]+dt[2][1])/2,bt=vt+_t,ft=bt+5,ct="center"):at==="rightTop"?(mt=et==="horizontal"?dt[3][0]:dt[1][0],vt=et==="horizontal"?dt[3][1]:dt[1][1],et==="horizontal"?(bt=vt-_t,ft=bt-5,ct="center"):(yt=mt+_t,ut=yt+5,ct="top")):at==="rightBottom"?(mt=dt[2][0],vt=dt[2][1],et==="horizontal"?(bt=vt+_t,ft=bt+5,ct="center"):(yt=mt+_t,ut=yt+5,ct="bottom")):at==="leftTop"?(mt=dt[0][0],vt=et==="horizontal"?dt[0][1]:dt[1][1],et==="horizontal"?(bt=vt-_t,ft=bt-5,ct="center"):(yt=mt-_t,ut=yt-5,ct="right")):at==="leftBottom"?(mt=et==="horizontal"?dt[1][0]:dt[3][0],vt=et==="horizontal"?dt[1][1]:dt[2][1],et==="horizontal"?(bt=vt+_t,ft=bt+5,ct="center"):(yt=mt-_t,ut=yt-5,ct="right")):(mt=(dt[1][0]+dt[2][0])/2,vt=(dt[1][1]+dt[2][1])/2,et==="horizontal"?(bt=vt+_t,ft=bt+5,ct="center"):(yt=mt+_t,ut=yt+5,ct="left")),et==="horizontal"?(yt=mt,ut=yt):(bt=vt,ft=bt),gt=[[mt,vt],[yt,bt]]}st.label={linePoints:gt,x:ut,y:ft,verticalAlign:"middle",textAlign:ct,inside:ht}})}function funnelLayout(_e,_){_e.eachSeriesByType("funnel",function(et){var tt=et.getData(),nt=tt.mapDimension("value"),it=et.get("sort"),at=getViewRect$2(et,_),ot=et.get("orient"),st=at.width,dt=at.height,ht=getSortedIndices(tt,it),ct=at.x,ut=at.y,ft=ot==="horizontal"?[parsePercent(et.get("minSize"),dt),parsePercent(et.get("maxSize"),dt)]:[parsePercent(et.get("minSize"),st),parsePercent(et.get("maxSize"),st)],gt=tt.getDataExtent(nt),mt=et.get("min"),vt=et.get("max");mt==null&&(mt=Math.min(gt[0],0)),vt==null&&(vt=gt[1]);var yt=et.get("funnelAlign"),bt=et.get("gap"),_t=ot==="horizontal"?st:dt,xt=(_t-bt*(tt.count()-1))/tt.count(),St=function(Mt,Ot){if(ot==="horizontal"){var $t=tt.get(nt,Mt)||0,Lt=linearMap$2($t,[mt,vt],ft,!0),kt=void 0;switch(yt){case"top":kt=ut;break;case"center":kt=ut+(dt-Lt)/2;break;case"bottom":kt=ut+(dt-Lt);break}return[[Ot,kt],[Ot,kt+Lt]]}var Nt=tt.get(nt,Mt)||0,Vt=linearMap$2(Nt,[mt,vt],ft,!0),zt;switch(yt){case"left":zt=ct;break;case"center":zt=ct+(st-Vt)/2;break;case"right":zt=ct+st-Vt;break}return[[zt,Ot],[zt+Vt,Ot]]};it==="ascending"&&(xt=-xt,bt=-bt,ot==="horizontal"?ct+=st:ut+=dt,ht=ht.reverse());for(var Tt=0;Tt<ht.length;Tt++){var wt=ht[Tt],Ct=ht[Tt+1],Et=tt.getItemModel(wt);if(ot==="horizontal"){var At=Et.get(["itemStyle","width"]);At==null?At=xt:(At=parsePercent(At,st),it==="ascending"&&(At=-At));var Pt=St(wt,ct),Rt=St(Ct,ct+At);ct+=At+bt,tt.setItemLayout(wt,{points:Pt.concat(Rt.slice().reverse())})}else{var It=Et.get(["itemStyle","height"]);It==null?It=xt:(It=parsePercent(It,dt),it==="ascending"&&(It=-It));var Pt=St(wt,ut),Rt=St(Ct,ut+It);ut+=It+bt,tt.setItemLayout(wt,{points:Pt.concat(Rt.slice().reverse())})}}labelLayout(tt)})}function install$D(_e){_e.registerChartView(FunnelView),_e.registerSeriesModel(FunnelSeriesModel),_e.registerLayout(funnelLayout),_e.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et._dataGroup=new Group$3,et._initialized=!1,et}return _.prototype.init=function(){this.group.add(this._dataGroup)},_.prototype.render=function(et,tt,nt,it){this._progressiveEls=null;var at=this._dataGroup,ot=et.getData(),st=this._data,dt=et.coordinateSystem,ht=dt.dimensions,ct=makeSeriesScope(et);ot.diff(st).add(ut).update(ft).remove(gt).execute();function ut(vt){var yt=addEl(ot,at,vt,ht,dt);updateElCommon(yt,ot,vt,ct)}function ft(vt,yt){var bt=st.getItemGraphicEl(yt),_t=createLinePoints(ot,vt,ht,dt);ot.setItemGraphicEl(vt,bt),updateProps$1(bt,{shape:{points:_t}},et,vt),saveOldStyle(bt),updateElCommon(bt,ot,vt,ct)}function gt(vt){var yt=st.getItemGraphicEl(vt);at.remove(yt)}if(!this._initialized){this._initialized=!0;var mt=createGridClipShape$2(dt,et,function(){setTimeout(function(){at.removeClipPath()})});at.setClipPath(mt)}this._data=ot},_.prototype.incrementalPrepareRender=function(et,tt,nt){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},_.prototype.incrementalRender=function(et,tt,nt){for(var it=tt.getData(),at=tt.coordinateSystem,ot=at.dimensions,st=makeSeriesScope(tt),dt=this._progressiveEls=[],ht=et.start;ht<et.end;ht++){var ct=addEl(it,this._dataGroup,ht,ot,at);ct.incremental=!0,updateElCommon(ct,it,ht,st),dt.push(ct)}},_.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},_.type="parallel",_}(ChartView);function createGridClipShape$2(_e,_,et){var tt=_e.model,nt=_e.getRect(),it=new Rect$2({shape:{x:nt.x,y:nt.y,width:nt.width,height:nt.height}}),at=tt.get("layout")==="horizontal"?"width":"height";return it.setShape(at,0),initProps(it,{shape:{width:nt.width,height:nt.height}},_,et),it}function createLinePoints(_e,_,et,tt){for(var nt=[],it=0;it<et.length;it++){var at=et[it],ot=_e.get(_e.mapDimension(at),_);isEmptyValue(ot,tt.getAxis(at).type)||nt.push(tt.dataToPoint(ot,at))}return nt}function addEl(_e,_,et,tt,nt){var it=createLinePoints(_e,et,tt,nt),at=new Polyline$1({shape:{points:it},z2:10});return _.add(at),_e.setItemGraphicEl(et,at),at}function makeSeriesScope(_e){var _=_e.get("smooth",!0);return _===!0&&(_=DEFAULT_SMOOTH),_=numericToNumber(_),eqNaN(_)&&(_=0),{smooth:_}}function updateElCommon(_e,_,et,tt){_e.useStyle(_.getItemVisual(et,"style")),_e.style.fill=null,_e.setShape("smooth",tt.smooth);var nt=_.getItemModel(et),it=nt.getModel("emphasis");setStatesStylesFromModel(_e,nt,"lineStyle"),toggleHoverEmphasis(_e,it.get("focus"),it.get("blurScope"),it.get("disabled"))}function isEmptyValue(_e,_){return _==="category"?_e==null:_e==null||isNaN(_e)}var ParallelSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.visualStyleAccessPath="lineStyle",et.visualDrawType="stroke",et}return _.prototype.getInitialData=function(et,tt){return createSeriesData(null,this,{useEncodeDefaulter:bind$2(makeDefaultEncode,null,this)})},_.prototype.getRawIndicesByActiveState=function(et){var tt=this.coordinateSystem,nt=this.getData(),it=[];return tt.eachActiveState(nt,function(at,ot){et===at&&it.push(nt.getRawIndex(ot))}),it},_.type="series.parallel",_.dependencies=["parallel"],_.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},_}(SeriesModel);function makeDefaultEncode(_e){var _=_e.ecModel.getComponent("parallel",_e.get("parallelIndex"));if(_){var et={};return each$f(_.dimensions,function(tt){var nt=convertDimNameToNumber(tt);et[tt]=nt}),et}}function convertDimNameToNumber(_e){return+_e.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(_e,_){var et=_e.coordinateSystem,tt={normal:_e.get(["lineStyle","opacity"]),active:_e.get("activeOpacity"),inactive:_e.get("inactiveOpacity")};return{progress:function(nt,it){et.eachActiveState(it,function(at,ot){var st=tt[at];if(at==="normal"&&it.hasItemOption){var dt=it.getItemModel(ot).get(opacityAccessPath,!0);dt!=null&&(st=dt)}var ht=it.ensureUniqueItemVisual(ot,"style");ht.opacity=st},nt.start,nt.end)}}}};function parallelPreprocessor(_e){createParallelIfNeeded(_e),mergeAxisOptionFromParallel(_e)}function createParallelIfNeeded(_e){if(!_e.parallel){var _=!1;each$f(_e.series,function(et){et&&et.type==="parallel"&&(_=!0)}),_&&(_e.parallel=[{}])}}function mergeAxisOptionFromParallel(_e){var _=normalizeToArray(_e.parallelAxis);each$f(_,function(et){if(isObject$4(et)){var tt=et.parallelIndex||0,nt=normalizeToArray(_e.parallel)[tt];nt&&nt.parallelAxisDefault&&merge$1(et,nt.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){this._model=et,this._api=nt,this._handlers||(this._handlers={},each$f(handlers$1,function(it,at){nt.getZr().on(at,this._handlers[at]=bind$2(it,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",et.get("axisExpandRate"),"fixRate")},_.prototype.dispose=function(et,tt){clear$2(this,"_throttledDispatchExpand"),each$f(this._handlers,function(nt,it){tt.getZr().off(it,nt)}),this._handlers=null},_.prototype._throttledDispatchExpand=function(et){this._dispatchExpand(et)},_.prototype._dispatchExpand=function(et){et&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},et))},_.type="parallel",_}(ComponentView),handlers$1={mousedown:function(_e){checkTrigger(this,"click")&&(this._mouseDownPoint=[_e.offsetX,_e.offsetY])},mouseup:function(_e){var _=this._mouseDownPoint;if(checkTrigger(this,"click")&&_){var et=[_e.offsetX,_e.offsetY],tt=Math.pow(_[0]-et[0],2)+Math.pow(_[1]-et[1],2);if(tt>CLICK_THRESHOLD)return;var nt=this._model.coordinateSystem.getSlidedAxisExpandWindow([_e.offsetX,_e.offsetY]);nt.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:nt.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(_e){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var _=this._model,et=_.coordinateSystem.getSlidedAxisExpandWindow([_e.offsetX,_e.offsetY]),tt=et.behavior;tt==="jump"&&this._throttledDispatchExpand.debounceNextCall(_.get("axisExpandDebounce")),this._throttledDispatchExpand(tt==="none"?null:{axisExpandWindow:et.axisExpandWindow,animation:tt==="jump"?null:{duration:0}})}}};function checkTrigger(_e,_){var et=_e._model;return et.get("axisExpandable")&&et.get("axisExpandTriggerOn")===_}var ParallelModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(){_e.prototype.init.apply(this,arguments),this.mergeOption({})},_.prototype.mergeOption=function(et){var tt=this.option;et&&merge$1(tt,et,!0),this._initDimensions()},_.prototype.contains=function(et,tt){var nt=et.get("parallelIndex");return nt!=null&&tt.getComponent("parallel",nt)===this},_.prototype.setAxisExpand=function(et){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(tt){et.hasOwnProperty(tt)&&(this.option[tt]=et[tt])},this)},_.prototype._initDimensions=function(){var et=this.dimensions=[],tt=this.parallelAxisIndex=[],nt=filter$1(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(it){return(it.get("parallelIndex")||0)===this.componentIndex},this);each$f(nt,function(it){et.push("dim"+it.get("dim")),tt.push(it.componentIndex)})},_.type="parallel",_.dependencies=["parallelAxis"],_.layoutMode="box",_.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},_}(ComponentModel),ParallelAxis=function(_e){__extends$1(_,_e);function _(et,tt,nt,it,at){var ot=_e.call(this,et,tt,nt)||this;return ot.type=it||"value",ot.axisIndex=at,ot}return _.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},_}(Axis);function sliderMove(_e,_,et,tt,nt,it){_e=_e||0;var at=et[1]-et[0];if(nt!=null&&(nt=restrict$1(nt,[0,at])),it!=null&&(it=Math.max(it,nt??0)),tt==="all"){var ot=Math.abs(_[1]-_[0]);ot=restrict$1(ot,[0,at]),nt=it=restrict$1(ot,[nt,it]),tt=0}_[0]=restrict$1(_[0],et),_[1]=restrict$1(_[1],et);var st=getSpanSign(_,tt);_[tt]+=_e;var dt=nt||0,ht=et.slice();st.sign<0?ht[0]+=dt:ht[1]-=dt,_[tt]=restrict$1(_[tt],ht);var ct;return ct=getSpanSign(_,tt),nt!=null&&(ct.sign!==st.sign||ct.span<nt)&&(_[1-tt]=_[tt]+st.sign*nt),ct=getSpanSign(_,tt),it!=null&&ct.span>it&&(_[1-tt]=_[tt]+ct.sign*it),_}function getSpanSign(_e,_){var et=_e[_]-_e[1-_];return{span:Math.abs(et),sign:et>0?-1:et<0?1:_?-1:1}}function restrict$1(_e,_){return Math.min(_[1]!=null?_[1]:1/0,Math.max(_[0]!=null?_[0]:-1/0,_e))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function _e(_,et,tt){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=_.dimensions,this._model=_,this._init(_,et,tt)}return _e.prototype._init=function(_,et,tt){var nt=_.dimensions,it=_.parallelAxisIndex;each$a(nt,function(at,ot){var st=it[ot],dt=et.getComponent("parallelAxis",st),ht=this._axesMap.set(at,new ParallelAxis(at,createScaleByModel$1(dt),[0,0],dt.get("type"),st)),ct=ht.type==="category";ht.onBand=ct&&dt.get("boundaryGap"),ht.inverse=dt.get("inverse"),dt.axis=ht,ht.model=dt,ht.coordinateSystem=dt.coordinateSystem=this},this)},_e.prototype.update=function(_,et){this._updateAxesFromSeries(this._model,_)},_e.prototype.containPoint=function(_){var et=this._makeLayoutInfo(),tt=et.axisBase,nt=et.layoutBase,it=et.pixelDimIndex,at=_[1-it],ot=_[it];return at>=tt&&at<=tt+et.axisLength&&ot>=nt&&ot<=nt+et.layoutLength},_e.prototype.getModel=function(){return this._model},_e.prototype._updateAxesFromSeries=function(_,et){et.eachSeries(function(tt){if(_.contains(tt,et)){var nt=tt.getData();each$a(this.dimensions,function(it){var at=this._axesMap.get(it);at.scale.unionExtentFromData(nt,nt.mapDimension(it)),niceScaleExtent(at.scale,at.model)},this)}},this)},_e.prototype.resize=function(_,et){this._rect=getLayoutRect(_.getBoxLayoutParams(),{width:et.getWidth(),height:et.getHeight()}),this._layoutAxes()},_e.prototype.getRect=function(){return this._rect},_e.prototype._makeLayoutInfo=function(){var _=this._model,et=this._rect,tt=["x","y"],nt=["width","height"],it=_.get("layout"),at=it==="horizontal"?0:1,ot=et[nt[at]],st=[0,ot],dt=this.dimensions.length,ht=restrict(_.get("axisExpandWidth"),st),ct=restrict(_.get("axisExpandCount")||0,[0,dt]),ut=_.get("axisExpandable")&&dt>3&&dt>ct&&ct>1&&ht>0&&ot>0,ft=_.get("axisExpandWindow"),gt;if(ft)gt=restrict(ft[1]-ft[0],st),ft[1]=ft[0]+gt;else{gt=restrict(ht*(ct-1),st);var mt=_.get("axisExpandCenter")||mathFloor(dt/2);ft=[ht*mt-gt/2],ft[1]=ft[0]+gt}var vt=(ot-gt)/(dt-ct);vt<3&&(vt=0);var yt=[mathFloor(round(ft[0]/ht,1))+1,mathCeil(round(ft[1]/ht,1))-1],bt=vt/ht*ft[0];return{layout:it,pixelDimIndex:at,layoutBase:et[tt[at]],layoutLength:ot,axisBase:et[tt[1-at]],axisLength:et[nt[1-at]],axisExpandable:ut,axisExpandWidth:ht,axisCollapseWidth:vt,axisExpandWindow:ft,axisCount:dt,winInnerIndices:yt,axisExpandWindow0Pos:bt}},_e.prototype._layoutAxes=function(){var _=this._rect,et=this._axesMap,tt=this.dimensions,nt=this._makeLayoutInfo(),it=nt.layout;et.each(function(at){var ot=[0,nt.axisLength],st=at.inverse?1:0;at.setExtent(ot[st],ot[1-st])}),each$a(tt,function(at,ot){var st=(nt.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(ot,nt),dt={horizontal:{x:st.position,y:nt.axisLength},vertical:{x:0,y:st.position}},ht={horizontal:PI$1/2,vertical:0},ct=[dt[it].x+_.x,dt[it].y+_.y],ut=ht[it],ft=create$1();rotate(ft,ft,ut),translate(ft,ft,ct),this._axesLayout[at]={position:ct,rotation:ut,transform:ft,axisNameAvailableWidth:st.axisNameAvailableWidth,axisLabelShow:st.axisLabelShow,nameTruncateMaxWidth:st.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},_e.prototype.getAxis=function(_){return this._axesMap.get(_)},_e.prototype.dataToPoint=function(_,et){return this.axisCoordToPoint(this._axesMap.get(et).dataToCoord(_),et)},_e.prototype.eachActiveState=function(_,et,tt,nt){tt==null&&(tt=0),nt==null&&(nt=_.count());var it=this._axesMap,at=this.dimensions,ot=[],st=[];each$f(at,function(vt){ot.push(_.mapDimension(vt)),st.push(it.get(vt).model)});for(var dt=this.hasAxisBrushed(),ht=tt;ht<nt;ht++){var ct=void 0;if(!dt)ct="normal";else{ct="active";for(var ut=_.getValues(ot,ht),ft=0,gt=at.length;ft<gt;ft++){var mt=st[ft].getActiveState(ut[ft]);if(mt==="inactive"){ct="inactive";break}}}et(ct,ht)}},_e.prototype.hasAxisBrushed=function(){for(var _=this.dimensions,et=this._axesMap,tt=!1,nt=0,it=_.length;nt<it;nt++)et.get(_[nt]).model.getActiveState()!=="normal"&&(tt=!0);return tt},_e.prototype.axisCoordToPoint=function(_,et){var tt=this._axesLayout[et];return applyTransform([_,0],tt.transform)},_e.prototype.getAxisLayout=function(_){return clone$4(this._axesLayout[_])},_e.prototype.getSlidedAxisExpandWindow=function(_){var et=this._makeLayoutInfo(),tt=et.pixelDimIndex,nt=et.axisExpandWindow.slice(),it=nt[1]-nt[0],at=[0,et.axisExpandWidth*(et.axisCount-1)];if(!this.containPoint(_))return{behavior:"none",axisExpandWindow:nt};var ot=_[tt]-et.layoutBase-et.axisExpandWindow0Pos,st,dt="slide",ht=et.axisCollapseWidth,ct=this._model.get("axisExpandSlideTriggerArea"),ut=ct[0]!=null;if(ht)ut&&ht&&ot<it*ct[0]?(dt="jump",st=ot-it*ct[2]):ut&&ht&&ot>it*(1-ct[0])?(dt="jump",st=ot-it*(1-ct[2])):(st=ot-it*ct[1])>=0&&(st=ot-it*(1-ct[1]))<=0&&(st=0),st*=et.axisExpandWidth/ht,st?sliderMove(st,nt,at,"all"):dt="none";else{var ft=nt[1]-nt[0],gt=at[1]*ot/ft;nt=[mathMax$2(0,gt-ft/2)],nt[1]=mathMin$2(at[1],nt[0]+ft),nt[0]=nt[1]-ft}return{axisExpandWindow:nt,behavior:dt}},_e}();function restrict(_e,_){return mathMin$2(mathMax$2(_e,_[0]),_[1])}function layoutAxisWithoutExpand(_e,_){var et=_.layoutLength/(_.axisCount-1);return{position:et*_e,axisNameAvailableWidth:et,axisLabelShow:!0}}function layoutAxisWithExpand(_e,_){var et=_.layoutLength,tt=_.axisExpandWidth,nt=_.axisCount,it=_.axisCollapseWidth,at=_.winInnerIndices,ot,st=it,dt=!1,ht;return _e<at[0]?(ot=_e*it,ht=it):_e<=at[1]?(ot=_.axisExpandWindow0Pos+_e*tt-_.axisExpandWindow[0],st=tt,dt=!0):(ot=et-(nt-1-_e)*it,ht=it),{position:ot,axisNameAvailableWidth:st,axisLabelShow:dt,nameTruncateMaxWidth:ht}}function createParallelCoordSys(_e,_){var et=[];return _e.eachComponent("parallel",function(tt,nt){var it=new Parallel(tt,_e,_);it.name="parallel_"+nt,it.resize(tt,_),tt.coordinateSystem=it,it.model=tt,et.push(it)}),_e.eachSeries(function(tt){if(tt.get("coordinateSystem")==="parallel"){var nt=tt.getReferringComponents("parallel",SINGLE_REFERRING).models[0];tt.coordinateSystem=nt.coordinateSystem}}),et}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.activeIntervals=[],et}return _.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},_.prototype.setActiveIntervals=function(et){var tt=this.activeIntervals=clone$4(et);if(tt)for(var nt=tt.length-1;nt>=0;nt--)asc$2(tt[nt])},_.prototype.getActiveState=function(et){var tt=this.activeIntervals;if(!tt.length)return"normal";if(et==null||isNaN(+et))return"inactive";if(tt.length===1){var nt=tt[0];if(nt[0]<=et&&et<=nt[1])return"active"}else for(var it=0,at=tt.length;it<at;it++)if(tt[it][0]<=et&&et<=tt[it][1])return"active";return"inactive"},_}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this)||this;return tt._track=[],tt._covers=[],tt._handlers={},tt._zr=et,tt.group=new Group$3,tt._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(nt,it){this._handlers[it]=bind$2(nt,this)},tt),tt}return _.prototype.enableBrush=function(et){return this._brushType&&this._doDisableBrush(),et.brushType&&this._doEnableBrush(et),this},_.prototype._doEnableBrush=function(et){var tt=this._zr;this._enableGlobalPan||take(tt,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(nt,it){tt.on(it,nt)}),this._brushType=et.brushType,this._brushOption=merge$1(clone$4(DEFAULT_BRUSH_OPT),et,!0)},_.prototype._doDisableBrush=function(){var et=this._zr;release(et,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(tt,nt){et.off(nt,tt)}),this._brushType=this._brushOption=null},_.prototype.setPanels=function(et){if(et&&et.length){var tt=this._panels={};each$f(et,function(nt){tt[nt.panelId]=clone$4(nt)})}else this._panels=null;return this},_.prototype.mount=function(et){et=et||{},this._enableGlobalPan=et.enableGlobalPan;var tt=this.group;return this._zr.add(tt),tt.attr({x:et.x||0,y:et.y||0,rotation:et.rotation||0,scaleX:et.scaleX||1,scaleY:et.scaleY||1}),this._transform=tt.getLocalTransform(),this},_.prototype.updateCovers=function(et){et=map$1(et,function(ut){return merge$1(clone$4(DEFAULT_BRUSH_OPT),ut,!0)});var tt="\0-brush-index-",nt=this._covers,it=this._covers=[],at=this,ot=this._creatingCover;return new DataDiffer(nt,et,dt,st).add(ht).update(ht).remove(ct).execute(),this;function st(ut,ft){return(ut.id!=null?ut.id:tt+ft)+"-"+ut.brushType}function dt(ut,ft){return st(ut.__brushOption,ft)}function ht(ut,ft){var gt=et[ut];if(ft!=null&&nt[ft]===ot)it[ut]=nt[ft];else{var mt=it[ut]=ft!=null?(nt[ft].__brushOption=gt,nt[ft]):endCreating(at,createCover(at,gt));updateCoverAfterCreation(at,mt)}}function ct(ut){nt[ut]!==ot&&at.group.remove(nt[ut])}},_.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},_.prototype.dispose=function(){this.unmount(),this.off()},_}(Eventful);function createCover(_e,_){var et=coverRenderers[_.brushType].createCover(_e,_);return et.__brushOption=_,updateZ$1(et,_),_e.group.add(et),et}function endCreating(_e,_){var et=getCoverRenderer(_);return et.endCreating&&(et.endCreating(_e,_),updateZ$1(_,_.__brushOption)),_}function updateCoverShape(_e,_){var et=_.__brushOption;getCoverRenderer(_).updateCoverShape(_e,_,et.range,et)}function updateZ$1(_e,_){var et=_.z;et==null&&(et=COVER_Z),_e.traverse(function(tt){tt.z=et,tt.z2=et})}function updateCoverAfterCreation(_e,_){getCoverRenderer(_).updateCommon(_e,_),updateCoverShape(_e,_)}function getCoverRenderer(_e){return coverRenderers[_e.__brushOption.brushType]}function getPanelByPoint(_e,_,et){var tt=_e._panels;if(!tt)return BRUSH_PANEL_GLOBAL;var nt,it=_e._transform;return each$f(tt,function(at){at.isTargetByCursor(_,et,it)&&(nt=at)}),nt}function getPanelByCover(_e,_){var et=_e._panels;if(!et)return BRUSH_PANEL_GLOBAL;var tt=_.__brushOption.panelId;return tt!=null?et[tt]:BRUSH_PANEL_GLOBAL}function clearCovers(_e){var _=_e._covers,et=_.length;return each$f(_,function(tt){_e.group.remove(tt)},_e),_.length=0,!!et}function trigger(_e,_){var et=map$1(_e._covers,function(tt){var nt=tt.__brushOption,it=clone$4(nt.range);return{brushType:nt.brushType,panelId:nt.panelId,range:it}});_e.trigger("brush",{areas:et,isEnd:!!_.isEnd,removeOnClick:!!_.removeOnClick})}function shouldShowCover(_e){var _=_e._track;if(!_.length)return!1;var et=_[_.length-1],tt=_[0],nt=et[0]-tt[0],it=et[1]-tt[1],at=mathPow(nt*nt+it*it,.5);return at>UNSELECT_THRESHOLD}function getTrackEnds(_e){var _=_e.length-1;return _<0&&(_=0),[_e[0],_e[_]]}function createBaseRectCover(_e,_,et,tt){var nt=new Group$3;return nt.add(new Rect$2({name:"main",style:makeStyle(et),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,_e,_,nt,["n","s","w","e"]),ondragend:curry$1(trigger,_,{isEnd:!0})})),each$f(tt,function(it){nt.add(new Rect$2({name:it.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,_e,_,nt,it),ondragend:curry$1(trigger,_,{isEnd:!0})}))}),nt}function updateBaseRect(_e,_,et,tt){var nt=tt.brushStyle.lineWidth||0,it=mathMax$1(nt,MIN_RESIZE_LINE_WIDTH),at=et[0][0],ot=et[1][0],st=at-nt/2,dt=ot-nt/2,ht=et[0][1],ct=et[1][1],ut=ht-it+nt/2,ft=ct-it+nt/2,gt=ht-at,mt=ct-ot,vt=gt+nt,yt=mt+nt;updateRectShape(_e,_,"main",at,ot,gt,mt),tt.transformable&&(updateRectShape(_e,_,"w",st,dt,it,yt),updateRectShape(_e,_,"e",ut,dt,it,yt),updateRectShape(_e,_,"n",st,dt,vt,it),updateRectShape(_e,_,"s",st,ft,vt,it),updateRectShape(_e,_,"nw",st,dt,it,it),updateRectShape(_e,_,"ne",ut,dt,it,it),updateRectShape(_e,_,"sw",st,ft,it,it),updateRectShape(_e,_,"se",ut,ft,it,it))}function updateCommon$1(_e,_){var et=_.__brushOption,tt=et.transformable,nt=_.childAt(0);nt.useStyle(makeStyle(et)),nt.attr({silent:!tt,cursor:tt?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(it){var at=_.childOfName(it.join("")),ot=it.length===1?getGlobalDirection1(_e,it[0]):getGlobalDirection2(_e,it);at&&at.attr({silent:!tt,invisible:!tt,cursor:tt?CURSOR_MAP[ot]+"-resize":null})})}function updateRectShape(_e,_,et,tt,nt,it,at){var ot=_.childOfName(et);ot&&ot.setShape(pointsToRect(clipByPanel(_e,_,[[tt,nt],[tt+it,nt+at]])))}function makeStyle(_e){return defaults({strokeNoScale:!0},_e.brushStyle)}function formatRectRange(_e,_,et,tt){var nt=[mathMin$1(_e,et),mathMin$1(_,tt)],it=[mathMax$1(_e,et),mathMax$1(_,tt)];return[[nt[0],it[0]],[nt[1],it[1]]]}function getTransform(_e){return getTransform$1(_e.group)}function getGlobalDirection1(_e,_){var et={w:"left",e:"right",n:"top",s:"bottom"},tt={left:"w",right:"e",top:"n",bottom:"s"},nt=transformDirection(et[_],getTransform(_e));return tt[nt]}function getGlobalDirection2(_e,_){var et=[getGlobalDirection1(_e,_[0]),getGlobalDirection1(_e,_[1])];return(et[0]==="e"||et[0]==="w")&&et.reverse(),et.join("")}function driftRect(_e,_,et,tt,nt,it){var at=et.__brushOption,ot=_e.toRectRange(at.range),st=toLocalDelta(_,nt,it);each$f(tt,function(dt){var ht=DIRECTION_MAP[dt];ot[ht[0]][ht[1]]+=st[ht[0]]}),at.range=_e.fromRectRange(formatRectRange(ot[0][0],ot[1][0],ot[0][1],ot[1][1])),updateCoverAfterCreation(_,et),trigger(_,{isEnd:!1})}function driftPolygon(_e,_,et,tt){var nt=_.__brushOption.range,it=toLocalDelta(_e,et,tt);each$f(nt,function(at){at[0]+=it[0],at[1]+=it[1]}),updateCoverAfterCreation(_e,_),trigger(_e,{isEnd:!1})}function toLocalDelta(_e,_,et){var tt=_e.group,nt=tt.transformCoordToLocal(_,et),it=tt.transformCoordToLocal(0,0);return[nt[0]-it[0],nt[1]-it[1]]}function clipByPanel(_e,_,et){var tt=getPanelByCover(_e,_);return tt&&tt!==BRUSH_PANEL_GLOBAL?tt.clipPath(et,_e._transform):clone$4(et)}function pointsToRect(_e){var _=mathMin$1(_e[0][0],_e[1][0]),et=mathMin$1(_e[0][1],_e[1][1]),tt=mathMax$1(_e[0][0],_e[1][0]),nt=mathMax$1(_e[0][1],_e[1][1]);return{x:_,y:et,width:tt-_,height:nt-et}}function resetCursor(_e,_,et){if(!(!_e._brushType||isOutsideZrArea(_e,_.offsetX,_.offsetY))){var tt=_e._zr,nt=_e._covers,it=getPanelByPoint(_e,_,et);if(!_e._dragging)for(var at=0;at<nt.length;at++){var ot=nt[at].__brushOption;if(it&&(it===BRUSH_PANEL_GLOBAL||ot.panelId===it.panelId)&&coverRenderers[ot.brushType].contain(nt[at],et[0],et[1]))return}it&&tt.setCursorStyle("crosshair")}}function preventDefault(_e){var _=_e.event;_.preventDefault&&_.preventDefault()}function mainShapeContain(_e,_,et){return _e.childOfName("main").contain(_,et)}function updateCoverByMouse(_e,_,et,tt){var nt=_e._creatingCover,it=_e._creatingPanel,at=_e._brushOption,ot;if(_e._track.push(et.slice()),shouldShowCover(_e)||nt){if(it&&!nt){at.brushMode==="single"&&clearCovers(_e);var st=clone$4(at);st.brushType=determineBrushType(st.brushType,it),st.panelId=it===BRUSH_PANEL_GLOBAL?null:it.panelId,nt=_e._creatingCover=createCover(_e,st),_e._covers.push(nt)}if(nt){var dt=coverRenderers[determineBrushType(_e._brushType,it)],ht=nt.__brushOption;ht.range=dt.getCreatingRange(clipByPanel(_e,nt,_e._track)),tt&&(endCreating(_e,nt),dt.updateCommon(_e,nt)),updateCoverShape(_e,nt),ot={isEnd:tt}}}else tt&&at.brushMode==="single"&&at.removeOnClick&&getPanelByPoint(_e,_,et)&&clearCovers(_e)&&(ot={isEnd:tt,removeOnClick:!0});return ot}function determineBrushType(_e,_){return _e==="auto"?_.defaultBrushType:_e}var pointerHandlers={mousedown:function(_e){if(this._dragging)handleDragEnd(this,_e);else if(!_e.target||!_e.target.draggable){preventDefault(_e);var _=this.group.transformCoordToLocal(_e.offsetX,_e.offsetY);this._creatingCover=null;var et=this._creatingPanel=getPanelByPoint(this,_e,_);et&&(this._dragging=!0,this._track=[_.slice()])}},mousemove:function(_e){var _=_e.offsetX,et=_e.offsetY,tt=this.group.transformCoordToLocal(_,et);if(resetCursor(this,_e,tt),this._dragging){preventDefault(_e);var nt=updateCoverByMouse(this,_e,tt,!1);nt&&trigger(this,nt)}},mouseup:function(_e){handleDragEnd(this,_e)}};function handleDragEnd(_e,_){if(_e._dragging){preventDefault(_);var et=_.offsetX,tt=_.offsetY,nt=_e.group.transformCoordToLocal(et,tt),it=updateCoverByMouse(_e,_,nt,!0);_e._dragging=!1,_e._track=[],_e._creatingCover=null,it&&trigger(_e,it)}}function isOutsideZrArea(_e,_,et){var tt=_e._zr;return _<0||_>tt.getWidth()||et<0||et>tt.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(_e,_){function et(tt){return tt}return createBaseRectCover({toRectRange:et,fromRectRange:et},_e,_,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(_e){var _=getTrackEnds(_e);return formatRectRange(_[1][0],_[1][1],_[0][0],_[0][1])},updateCoverShape:function(_e,_,et,tt){updateBaseRect(_e,_,et,tt)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(_e,_){var et=new Group$3;return et.add(new Polyline$1({name:"main",style:makeStyle(_),silent:!0})),et},getCreatingRange:function(_e){return _e},endCreating:function(_e,_){_.remove(_.childAt(0)),_.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,_e,_),ondragend:curry$1(trigger,_e,{isEnd:!0})}))},updateCoverShape:function(_e,_,et,tt){_.childAt(0).setShape({points:clipByPanel(_e,_,et)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(_e){return{createCover:function(_,et){return createBaseRectCover({toRectRange:function(tt){var nt=[tt,[0,100]];return _e&&nt.reverse(),nt},fromRectRange:function(tt){return tt[_e]}},_,et,[[["w"],["e"]],[["n"],["s"]]][_e])},getCreatingRange:function(_){var et=getTrackEnds(_),tt=mathMin$1(et[0][_e],et[1][_e]),nt=mathMax$1(et[0][_e],et[1][_e]);return[tt,nt]},updateCoverShape:function(_,et,tt,nt){var it,at=getPanelByCover(_,et);if(at!==BRUSH_PANEL_GLOBAL&&at.getLinearBrushOtherExtent)it=at.getLinearBrushOtherExtent(_e);else{var ot=_._zr;it=[0,[ot.getWidth(),ot.getHeight()][1-_e]]}var st=[tt,it];_e&&st.reverse(),updateBaseRect(_,et,st,nt)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(_e){return _e=normalizeRect(_e),function(_){return clipPointsByRect(_,_e)}}function makeLinearBrushOtherExtent(_e,_){return _e=normalizeRect(_e),function(et){var tt=_??et,nt=tt?_e.width:_e.height,it=tt?_e.x:_e.y;return[it,it+(nt||0)]}}function makeRectIsTargetByCursor(_e,_,et){var tt=normalizeRect(_e);return function(nt,it){return tt.contain(it[0],it[1])&&!onIrrelevantElement(nt,_,et)}}function normalizeRect(_e){return BoundingRect.create(_e)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(et,tt){_e.prototype.init.apply(this,arguments),(this._brushController=new BrushController(tt.getZr())).on("brush",bind$2(this._onBrush,this))},_.prototype.render=function(et,tt,nt,it){if(!fromAxisAreaSelect(et,tt,it)){this.axisModel=et,this.api=nt,this.group.removeAll();var at=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!et.get("show")){var ot=getCoordSysModel(et,tt),st=ot.coordinateSystem,dt=et.getAreaSelectStyle(),ht=dt.width,ct=et.axis.dim,ut=st.getAxisLayout(ct),ft=extend({strokeContainThreshold:ht},ut),gt=new AxisBuilder(et,ft);each$f(elementList$1,gt.add,gt),this._axisGroup.add(gt.getGroup()),this._refreshBrushController(ft,dt,et,ot,ht,nt),groupTransition(at,this._axisGroup,et)}}},_.prototype._refreshBrushController=function(et,tt,nt,it,at,ot){var st=nt.axis.getExtent(),dt=st[1]-st[0],ht=Math.min(30,Math.abs(dt)*.1),ct=BoundingRect.create({x:st[0],y:-at/2,width:dt,height:at});ct.x-=ht,ct.width+=2*ht,this._brushController.mount({enableGlobalPan:!0,rotation:et.rotation,x:et.position[0],y:et.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(ct),isTargetByCursor:makeRectIsTargetByCursor(ct,ot,it),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(ct,0)}]).enableBrush({brushType:"lineX",brushStyle:tt,removeOnClick:!0}).updateCovers(getCoverInfoList(nt))},_.prototype._onBrush=function(et){var tt=et.areas,nt=this.axisModel,it=nt.axis,at=map$1(tt,function(ot){return[it.coordToData(ot.range[0],!0),it.coordToData(ot.range[1],!0)]});(!nt.option.realtime===et.isEnd||et.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:nt.id,intervals:at})},_.prototype.dispose=function(){this._brushController.dispose()},_.type="parallelAxis",_}(ComponentView);function fromAxisAreaSelect(_e,_,et){return et&&et.type==="axisAreaSelect"&&_.findComponents({mainType:"parallelAxis",query:et})[0]===_e}function getCoverInfoList(_e){var _=_e.axis;return map$1(_e.activeIntervals,function(et){return{brushType:"lineX",panelId:"pl",range:[_.dataToCoord(et[0],!0),_.dataToCoord(et[1],!0)]}})}function getCoordSysModel(_e,_){return _.getComponent("parallel",_e.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(_e){_e.registerAction(actionInfo,function(_,et){et.eachComponent({mainType:"parallelAxis",query:_},function(tt){tt.axis.model.setActiveIntervals(_.intervals)})}),_e.registerAction("parallelAxisExpand",function(_,et){et.eachComponent({mainType:"parallel",query:_},function(tt){tt.setAxisExpand(_)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(_e){_e.registerComponentView(ParallelView),_e.registerComponentModel(ParallelModel),_e.registerCoordinateSystem("parallel",parallelCoordSysCreator),_e.registerPreprocessor(parallelPreprocessor),_e.registerComponentModel(ParallelAxisModel),_e.registerComponentView(ParallelAxisView),axisModelCreator(_e,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(_e)}function install$B(_e){use(install$C),_e.registerChartView(ParallelView$1),_e.registerSeriesModel(ParallelSeriesModel),_e.registerVisual(_e.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=function(){function _e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return _e}(),SankeyPath=function(_e){__extends$1(_,_e);function _(et){return _e.call(this,et)||this}return _.prototype.getDefaultShape=function(){return new SankeyPathShape},_.prototype.buildPath=function(et,tt){var nt=tt.extent;et.moveTo(tt.x1,tt.y1),et.bezierCurveTo(tt.cpx1,tt.cpy1,tt.cpx2,tt.cpy2,tt.x2,tt.y2),tt.orient==="vertical"?(et.lineTo(tt.x2+nt,tt.y2),et.bezierCurveTo(tt.cpx2+nt,tt.cpy2,tt.cpx1+nt,tt.cpy1,tt.x1+nt,tt.y1)):(et.lineTo(tt.x2,tt.y2+nt),et.bezierCurveTo(tt.cpx2,tt.cpy2+nt,tt.cpx1,tt.cpy1+nt,tt.x1,tt.y1+nt)),et.closePath()},_.prototype.highlight=function(){enterEmphasis(this)},_.prototype.downplay=function(){leaveEmphasis(this)},_}(Path),SankeyView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et._focusAdjacencyDisabled=!1,et}return _.prototype.render=function(et,tt,nt){var it=this,at=et.getGraph(),ot=this.group,st=et.layoutInfo,dt=st.width,ht=st.height,ct=et.getData(),ut=et.getData("edge"),ft=et.get("orient");this._model=et,ot.removeAll(),ot.x=st.x,ot.y=st.y,at.eachEdge(function(gt){var mt=new SankeyPath,vt=getECData(mt);vt.dataIndex=gt.dataIndex,vt.seriesIndex=et.seriesIndex,vt.dataType="edge";var yt=gt.getModel(),bt=yt.getModel("lineStyle"),_t=bt.get("curveness"),xt=gt.node1.getLayout(),St=gt.node1.getModel(),Tt=St.get("localX"),wt=St.get("localY"),Ct=gt.node2.getLayout(),Et=gt.node2.getModel(),At=Et.get("localX"),Pt=Et.get("localY"),Rt=gt.getLayout(),It,Mt,Ot,$t,Lt,kt,Nt,Vt;mt.shape.extent=Math.max(1,Rt.dy),mt.shape.orient=ft,ft==="vertical"?(It=(Tt!=null?Tt*dt:xt.x)+Rt.sy,Mt=(wt!=null?wt*ht:xt.y)+xt.dy,Ot=(At!=null?At*dt:Ct.x)+Rt.ty,$t=Pt!=null?Pt*ht:Ct.y,Lt=It,kt=Mt*(1-_t)+$t*_t,Nt=Ot,Vt=Mt*_t+$t*(1-_t)):(It=(Tt!=null?Tt*dt:xt.x)+xt.dx,Mt=(wt!=null?wt*ht:xt.y)+Rt.sy,Ot=At!=null?At*dt:Ct.x,$t=(Pt!=null?Pt*ht:Ct.y)+Rt.ty,Lt=It*(1-_t)+Ot*_t,kt=Mt,Nt=It*_t+Ot*(1-_t),Vt=$t),mt.setShape({x1:It,y1:Mt,x2:Ot,y2:$t,cpx1:Lt,cpy1:kt,cpx2:Nt,cpy2:Vt}),mt.useStyle(bt.getItemStyle()),applyCurveStyle(mt.style,ft,gt);var zt=""+yt.get("value"),Xt=getLabelStatesModels(yt,"edgeLabel");setLabelStyle(mt,Xt,{labelFetcher:{getFormattedLabel:function(Jt,lr,pr,Zt,Kt,ur){return et.getFormattedLabel(Jt,lr,"edge",Zt,retrieve3(Kt,Xt.normal&&Xt.normal.get("formatter"),zt),ur)}},labelDataIndex:gt.dataIndex,defaultText:zt}),mt.setTextConfig({position:"inside"});var Wt=yt.getModel("emphasis");setStatesStylesFromModel(mt,yt,"lineStyle",function(Jt){var lr=Jt.getItemStyle();return applyCurveStyle(lr,ft,gt),lr}),ot.add(mt),ut.setItemGraphicEl(gt.dataIndex,mt);var nr=Wt.get("focus");toggleHoverEmphasis(mt,nr==="adjacency"?gt.getAdjacentDataIndices():nr==="trajectory"?gt.getTrajectoryDataIndices():nr,Wt.get("blurScope"),Wt.get("disabled"))}),at.eachNode(function(gt){var mt=gt.getLayout(),vt=gt.getModel(),yt=vt.get("localX"),bt=vt.get("localY"),_t=vt.getModel("emphasis"),xt=vt.get(["itemStyle","borderRadius"])||0,St=new Rect$2({shape:{x:yt!=null?yt*dt:mt.x,y:bt!=null?bt*ht:mt.y,width:mt.dx,height:mt.dy,r:xt},style:vt.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(St,getLabelStatesModels(vt),{labelFetcher:{getFormattedLabel:function(wt,Ct){return et.getFormattedLabel(wt,Ct,"node")}},labelDataIndex:gt.dataIndex,defaultText:gt.id}),St.disableLabelAnimation=!0,St.setStyle("fill",gt.getVisual("color")),St.setStyle("decal",gt.getVisual("style").decal),setStatesStylesFromModel(St,vt),ot.add(St),ct.setItemGraphicEl(gt.dataIndex,St),getECData(St).dataType="node";var Tt=_t.get("focus");toggleHoverEmphasis(St,Tt==="adjacency"?gt.getAdjacentDataIndices():Tt==="trajectory"?gt.getTrajectoryDataIndices():Tt,_t.get("blurScope"),_t.get("disabled"))}),ct.eachItemGraphicEl(function(gt,mt){var vt=ct.getItemModel(mt);vt.get("draggable")&&(gt.drift=function(yt,bt){it._focusAdjacencyDisabled=!0,this.shape.x+=yt,this.shape.y+=bt,this.dirty(),nt.dispatchAction({type:"dragNode",seriesId:et.id,dataIndex:ct.getRawIndex(mt),localX:this.shape.x/dt,localY:this.shape.y/ht})},gt.ondragend=function(){it._focusAdjacencyDisabled=!1},gt.draggable=!0,gt.cursor="move")}),!this._data&&et.isAnimationEnabled()&&ot.setClipPath(createGridClipShape$1(ot.getBoundingRect(),et,function(){ot.removeClipPath()})),this._data=et.getData()},_.prototype.dispose=function(){},_.type="sankey",_}(ChartView);function applyCurveStyle(_e,_,et){switch(_e.fill){case"source":_e.fill=et.node1.getVisual("color"),_e.decal=et.node1.getVisual("style").decal;break;case"target":_e.fill=et.node2.getVisual("color"),_e.decal=et.node2.getVisual("style").decal;break;case"gradient":var tt=et.node1.getVisual("color"),nt=et.node2.getVisual("color");isString$1(tt)&&isString$1(nt)&&(_e.fill=new LinearGradient(0,0,+(_==="horizontal"),+(_==="vertical"),[{color:tt,offset:0},{color:nt,offset:1}]))}}function createGridClipShape$1(_e,_,et){var tt=new Rect$2({shape:{x:_e.x-10,y:_e.y-10,width:0,height:_e.height+20}});return initProps(tt,{shape:{width:_e.width+20}},_,et),tt}var SankeySeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.getInitialData=function(et,tt){var nt=et.edges||et.links||[],it=et.data||et.nodes||[],at=et.levels||[];this.levelModels=[];for(var ot=this.levelModels,st=0;st<at.length;st++)at[st].depth!=null&&at[st].depth>=0&&(ot[at[st].depth]=new Model(at[st],this,tt));var dt=createGraphFromNodeEdge(it,nt,this,!0,ht);return dt.data;function ht(ct,ut){ct.wrapMethod("getItemModel",function(ft,gt){var mt=ft.parentModel,vt=mt.getData().getItemLayout(gt);if(vt){var yt=vt.depth,bt=mt.levelModels[yt];bt&&(ft.parentModel=bt)}return ft}),ut.wrapMethod("getItemModel",function(ft,gt){var mt=ft.parentModel,vt=mt.getGraph().getEdgeByIndex(gt),yt=vt.node1.getLayout();if(yt){var bt=yt.depth,_t=mt.levelModels[bt];_t&&(ft.parentModel=_t)}return ft})}},_.prototype.setNodePosition=function(et,tt){var nt=this.option.data||this.option.nodes,it=nt[et];it.localX=tt[0],it.localY=tt[1]},_.prototype.getGraph=function(){return this.getData().graph},_.prototype.getEdgeData=function(){return this.getGraph().edgeData},_.prototype.formatTooltip=function(et,tt,nt){function it(ft){return isNaN(ft)||ft==null}if(nt==="edge"){var at=this.getDataParams(et,nt),ot=at.data,st=at.value,dt=ot.source+" -- "+ot.target;return createTooltipMarkup("nameValue",{name:dt,value:st,noValue:it(st)})}else{var ht=this.getGraph().getNodeByIndex(et),ct=ht.getLayout().value,ut=this.getDataParams(et,nt).data.name;return createTooltipMarkup("nameValue",{name:ut!=null?ut+"":null,value:ct,noValue:it(ct)})}},_.prototype.optionUpdated=function(){},_.prototype.getDataParams=function(et,tt){var nt=_e.prototype.getDataParams.call(this,et,tt);if(nt.value==null&&tt==="node"){var it=this.getGraph().getNodeByIndex(et),at=it.getLayout().value;nt.value=at}return nt},_.type="series.sankey",_.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},_}(SeriesModel);function sankeyLayout(_e,_){_e.eachSeriesByType("sankey",function(et){var tt=et.get("nodeWidth"),nt=et.get("nodeGap"),it=getViewRect$1(et,_);et.layoutInfo=it;var at=it.width,ot=it.height,st=et.getGraph(),dt=st.nodes,ht=st.edges;computeNodeValues(dt);var ct=filter$1(dt,function(mt){return mt.getLayout().value===0}),ut=ct.length!==0?0:et.get("layoutIterations"),ft=et.get("orient"),gt=et.get("nodeAlign");layoutSankey(dt,ht,tt,nt,at,ot,ut,ft,gt)})}function getViewRect$1(_e,_){return getLayoutRect(_e.getBoxLayoutParams(),{width:_.getWidth(),height:_.getHeight()})}function layoutSankey(_e,_,et,tt,nt,it,at,ot,st){computeNodeBreadths(_e,_,et,nt,it,ot,st),computeNodeDepths(_e,_,it,nt,tt,at,ot),computeEdgeDepths(_e,ot)}function computeNodeValues(_e){each$f(_e,function(_){var et=sum(_.outEdges,getEdgeValue),tt=sum(_.inEdges,getEdgeValue),nt=_.getValue()||0,it=Math.max(et,tt,nt);_.setLayout({value:it},!0)})}function computeNodeBreadths(_e,_,et,tt,nt,it,at){for(var ot=[],st=[],dt=[],ht=[],ct=0,ut=0;ut<_.length;ut++)ot[ut]=1;for(var ut=0;ut<_e.length;ut++)st[ut]=_e[ut].inEdges.length,st[ut]===0&&dt.push(_e[ut]);for(var ft=-1;dt.length;){for(var gt=0;gt<dt.length;gt++){var mt=dt[gt],vt=mt.hostGraph.data.getRawDataItem(mt.dataIndex),yt=vt.depth!=null&&vt.depth>=0;yt&&vt.depth>ft&&(ft=vt.depth),mt.setLayout({depth:yt?vt.depth:ct},!0),it==="vertical"?mt.setLayout({dy:et},!0):mt.setLayout({dx:et},!0);for(var bt=0;bt<mt.outEdges.length;bt++){var _t=mt.outEdges[bt],xt=_.indexOf(_t);ot[xt]=0;var St=_t.node2,Tt=_e.indexOf(St);--st[Tt]===0&&ht.indexOf(St)<0&&ht.push(St)}}++ct,dt=ht,ht=[]}for(var ut=0;ut<ot.length;ut++)if(ot[ut]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var wt=ft>ct-1?ft:ct-1;at&&at!=="left"&&adjustNodeWithNodeAlign(_e,at,it,wt);var Ct=it==="vertical"?(nt-et)/wt:(tt-et)/wt;scaleNodeBreadths(_e,Ct,it)}function isNodeDepth(_e){var _=_e.hostGraph.data.getRawDataItem(_e.dataIndex);return _.depth!=null&&_.depth>=0}function adjustNodeWithNodeAlign(_e,_,et,tt){if(_==="right"){for(var nt=[],it=_e,at=0;it.length;){for(var ot=0;ot<it.length;ot++){var st=it[ot];st.setLayout({skNodeHeight:at},!0);for(var dt=0;dt<st.inEdges.length;dt++){var ht=st.inEdges[dt];nt.indexOf(ht.node1)<0&&nt.push(ht.node1)}}it=nt,nt=[],++at}each$f(_e,function(ct){isNodeDepth(ct)||ct.setLayout({depth:Math.max(0,tt-ct.getLayout().skNodeHeight)},!0)})}else _==="justify"&&moveSinksRight(_e,tt)}function moveSinksRight(_e,_){each$f(_e,function(et){!isNodeDepth(et)&&!et.outEdges.length&&et.setLayout({depth:_},!0)})}function scaleNodeBreadths(_e,_,et){each$f(_e,function(tt){var nt=tt.getLayout().depth*_;et==="vertical"?tt.setLayout({y:nt},!0):tt.setLayout({x:nt},!0)})}function computeNodeDepths(_e,_,et,tt,nt,it,at){var ot=prepareNodesByBreadth(_e,at);initializeNodeDepth(ot,_,et,tt,nt,at),resolveCollisions(ot,nt,et,tt,at);for(var st=1;it>0;it--)st*=.99,relaxRightToLeft(ot,st,at),resolveCollisions(ot,nt,et,tt,at),relaxLeftToRight(ot,st,at),resolveCollisions(ot,nt,et,tt,at)}function prepareNodesByBreadth(_e,_){var et=[],tt=_==="vertical"?"y":"x",nt=groupData(_e,function(it){return it.getLayout()[tt]});return nt.keys.sort(function(it,at){return it-at}),each$f(nt.keys,function(it){et.push(nt.buckets.get(it))}),et}function initializeNodeDepth(_e,_,et,tt,nt,it){var at=1/0;each$f(_e,function(ot){var st=ot.length,dt=0;each$f(ot,function(ct){dt+=ct.getLayout().value});var ht=it==="vertical"?(tt-(st-1)*nt)/dt:(et-(st-1)*nt)/dt;ht<at&&(at=ht)}),each$f(_e,function(ot){each$f(ot,function(st,dt){var ht=st.getLayout().value*at;it==="vertical"?(st.setLayout({x:dt},!0),st.setLayout({dx:ht},!0)):(st.setLayout({y:dt},!0),st.setLayout({dy:ht},!0))})}),each$f(_,function(ot){var st=+ot.getValue()*at;ot.setLayout({dy:st},!0)})}function resolveCollisions(_e,_,et,tt,nt){var it=nt==="vertical"?"x":"y";each$f(_e,function(at){at.sort(function(mt,vt){return mt.getLayout()[it]-vt.getLayout()[it]});for(var ot,st,dt,ht=0,ct=at.length,ut=nt==="vertical"?"dx":"dy",ft=0;ft<ct;ft++)st=at[ft],dt=ht-st.getLayout()[it],dt>0&&(ot=st.getLayout()[it]+dt,nt==="vertical"?st.setLayout({x:ot},!0):st.setLayout({y:ot},!0)),ht=st.getLayout()[it]+st.getLayout()[ut]+_;var gt=nt==="vertical"?tt:et;if(dt=ht-_-gt,dt>0){ot=st.getLayout()[it]-dt,nt==="vertical"?st.setLayout({x:ot},!0):st.setLayout({y:ot},!0),ht=ot;for(var ft=ct-2;ft>=0;--ft)st=at[ft],dt=st.getLayout()[it]+st.getLayout()[ut]+_-ht,dt>0&&(ot=st.getLayout()[it]-dt,nt==="vertical"?st.setLayout({x:ot},!0):st.setLayout({y:ot},!0)),ht=st.getLayout()[it]}})}function relaxRightToLeft(_e,_,et){each$f(_e.slice().reverse(),function(tt){each$f(tt,function(nt){if(nt.outEdges.length){var it=sum(nt.outEdges,weightedTarget,et)/sum(nt.outEdges,getEdgeValue);if(isNaN(it)){var at=nt.outEdges.length;it=at?sum(nt.outEdges,centerTarget,et)/at:0}if(et==="vertical"){var ot=nt.getLayout().x+(it-center(nt,et))*_;nt.setLayout({x:ot},!0)}else{var st=nt.getLayout().y+(it-center(nt,et))*_;nt.setLayout({y:st},!0)}}})})}function weightedTarget(_e,_){return center(_e.node2,_)*_e.getValue()}function centerTarget(_e,_){return center(_e.node2,_)}function weightedSource(_e,_){return center(_e.node1,_)*_e.getValue()}function centerSource(_e,_){return center(_e.node1,_)}function center(_e,_){return _==="vertical"?_e.getLayout().x+_e.getLayout().dx/2:_e.getLayout().y+_e.getLayout().dy/2}function getEdgeValue(_e){return _e.getValue()}function sum(_e,_,et){for(var tt=0,nt=_e.length,it=-1;++it<nt;){var at=+_(_e[it],et);isNaN(at)||(tt+=at)}return tt}function relaxLeftToRight(_e,_,et){each$f(_e,function(tt){each$f(tt,function(nt){if(nt.inEdges.length){var it=sum(nt.inEdges,weightedSource,et)/sum(nt.inEdges,getEdgeValue);if(isNaN(it)){var at=nt.inEdges.length;it=at?sum(nt.inEdges,centerSource,et)/at:0}if(et==="vertical"){var ot=nt.getLayout().x+(it-center(nt,et))*_;nt.setLayout({x:ot},!0)}else{var st=nt.getLayout().y+(it-center(nt,et))*_;nt.setLayout({y:st},!0)}}})})}function computeEdgeDepths(_e,_){var et=_==="vertical"?"x":"y";each$f(_e,function(tt){tt.outEdges.sort(function(nt,it){return nt.node2.getLayout()[et]-it.node2.getLayout()[et]}),tt.inEdges.sort(function(nt,it){return nt.node1.getLayout()[et]-it.node1.getLayout()[et]})}),each$f(_e,function(tt){var nt=0,it=0;each$f(tt.outEdges,function(at){at.setLayout({sy:nt},!0),nt+=at.getLayout().dy}),each$f(tt.inEdges,function(at){at.setLayout({ty:it},!0),it+=at.getLayout().dy})})}function sankeyVisual(_e){_e.eachSeriesByType("sankey",function(_){var et=_.getGraph(),tt=et.nodes,nt=et.edges;if(tt.length){var it=1/0,at=-1/0;each$f(tt,function(ot){var st=ot.getLayout().value;st<it&&(it=st),st>at&&(at=st)}),each$f(tt,function(ot){var st=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[it,at],visual:_.get("color")}),dt=st.mapValueToVisual(ot.getLayout().value),ht=ot.getModel().get(["itemStyle","color"]);ht!=null?(ot.setVisual("color",ht),ot.setVisual("style",{fill:ht})):(ot.setVisual("color",dt),ot.setVisual("style",{fill:dt}))})}nt.length&&each$f(nt,function(ot){var st=ot.getModel().get("lineStyle");ot.setVisual("style",st)})})}function install$A(_e){_e.registerChartView(SankeyView),_e.registerSeriesModel(SankeySeriesModel),_e.registerLayout(sankeyLayout),_e.registerVisual(sankeyVisual),_e.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(_,et){et.eachComponent({mainType:"series",subType:"sankey",query:_},function(tt){tt.setNodePosition(_.dataIndex,[_.localX,_.localY])})})}var WhiskerBoxCommonMixin=function(){function _e(){}return _e.prototype._hasEncodeRule=function(_){var et=this.getEncode();return et&&et.get(_)!=null},_e.prototype.getInitialData=function(_,et){var tt,nt=et.getComponent("xAxis",this.get("xAxisIndex")),it=et.getComponent("yAxis",this.get("yAxisIndex")),at=nt.get("type"),ot=it.get("type"),st;at==="category"?(_.layout="horizontal",tt=nt.getOrdinalMeta(),st=!this._hasEncodeRule("x")):ot==="category"?(_.layout="vertical",tt=it.getOrdinalMeta(),st=!this._hasEncodeRule("y")):_.layout=_.layout||"horizontal";var dt=["x","y"],ht=_.layout==="horizontal"?0:1,ct=this._baseAxisDim=dt[ht],ut=dt[1-ht],ft=[nt,it],gt=ft[ht].get("type"),mt=ft[1-ht].get("type"),vt=_.data;if(vt&&st){var yt=[];each$f(vt,function(xt,St){var Tt;isArray$1(xt)?(Tt=xt.slice(),xt.unshift(St)):isArray$1(xt.value)?(Tt=extend({},xt),Tt.value=Tt.value.slice(),xt.value.unshift(St)):Tt=xt,yt.push(Tt)}),_.data=yt}var bt=this.defaultValueDimensions,_t=[{name:ct,type:getDimensionTypeByAxis(gt),ordinalMeta:tt,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:ut,type:getDimensionTypeByAxis(mt),dimsDef:bt.slice()}];return createSeriesDataSimply(this,{coordDimensions:_t,dimensionsCount:bt.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,_t,this)})},_e.prototype.getBaseAxis=function(){var _=this._baseAxisDim;return this.ecModel.getComponent(_+"Axis",this.get(_+"AxisIndex")).axis},_e}(),BoxplotSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],et.visualDrawType="stroke",et}return _.type="series.boxplot",_.dependencies=["xAxis","yAxis","grid"],_.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},_}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){var it=et.getData(),at=this.group,ot=this._data;this._data||at.removeAll();var st=et.get("layout")==="horizontal"?1:0;it.diff(ot).add(function(dt){if(it.hasValue(dt)){var ht=it.getItemLayout(dt),ct=createNormalBox$1(ht,it,dt,st,!0);it.setItemGraphicEl(dt,ct),at.add(ct)}}).update(function(dt,ht){var ct=ot.getItemGraphicEl(ht);if(!it.hasValue(dt)){at.remove(ct);return}var ut=it.getItemLayout(dt);ct?(saveOldStyle(ct),updateNormalBoxData(ut,ct,it,dt)):ct=createNormalBox$1(ut,it,dt,st),at.add(ct),it.setItemGraphicEl(dt,ct)}).remove(function(dt){var ht=ot.getItemGraphicEl(dt);ht&&at.remove(ht)}).execute(),this._data=it},_.prototype.remove=function(et){var tt=this.group,nt=this._data;this._data=null,nt&&nt.eachItemGraphicEl(function(it){it&&tt.remove(it)})},_.type="boxplot",_}(ChartView),BoxPathShape=function(){function _e(){}return _e}(),BoxPath=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.type="boxplotBoxPath",tt}return _.prototype.getDefaultShape=function(){return new BoxPathShape},_.prototype.buildPath=function(et,tt){var nt=tt.points,it=0;for(et.moveTo(nt[it][0],nt[it][1]),it++;it<4;it++)et.lineTo(nt[it][0],nt[it][1]);for(et.closePath();it<nt.length;it++)et.moveTo(nt[it][0],nt[it][1]),it++,et.lineTo(nt[it][0],nt[it][1])},_}(Path);function createNormalBox$1(_e,_,et,tt,nt){var it=_e.ends,at=new BoxPath({shape:{points:nt?transInit$1(it,tt,_e):it}});return updateNormalBoxData(_e,at,_,et,nt),at}function updateNormalBoxData(_e,_,et,tt,nt){var it=et.hostModel,at=graphic$1[nt?"initProps":"updateProps"];at(_,{shape:{points:_e.ends}},it,tt),_.useStyle(et.getItemVisual(tt,"style")),_.style.strokeNoScale=!0,_.z2=100;var ot=et.getItemModel(tt),st=ot.getModel("emphasis");setStatesStylesFromModel(_,ot),toggleHoverEmphasis(_,st.get("focus"),st.get("blurScope"),st.get("disabled"))}function transInit$1(_e,_,et){return map$1(_e,function(tt){return tt=tt.slice(),tt[_]=et.initBaseline,tt})}var each$9=each$f;function boxplotLayout(_e){var _=groupSeriesByAxis(_e);each$9(_,function(et){var tt=et.seriesModels;tt.length&&(calculateBase(et),each$9(tt,function(nt,it){layoutSingleSeries(nt,et.boxOffsetList[it],et.boxWidthList[it])}))})}function groupSeriesByAxis(_e){var _=[],et=[];return _e.eachSeriesByType("boxplot",function(tt){var nt=tt.getBaseAxis(),it=indexOf(et,nt);it<0&&(it=et.length,et[it]=nt,_[it]={axis:nt,seriesModels:[]}),_[it].seriesModels.push(tt)}),_}function calculateBase(_e){var _=_e.axis,et=_e.seriesModels,tt=et.length,nt=_e.boxWidthList=[],it=_e.boxOffsetList=[],at=[],ot;if(_.type==="category")ot=_.getBandWidth();else{var st=0;each$9(et,function(gt){st=Math.max(st,gt.getData().count())});var dt=_.getExtent();ot=Math.abs(dt[1]-dt[0])/st}each$9(et,function(gt){var mt=gt.get("boxWidth");isArray$1(mt)||(mt=[mt,mt]),at.push([parsePercent(mt[0],ot)||0,parsePercent(mt[1],ot)||0])});var ht=ot*.8-2,ct=ht/tt*.3,ut=(ht-ct*(tt-1))/tt,ft=ut/2-ht/2;each$9(et,function(gt,mt){it.push(ft),ft+=ct+ut,nt.push(Math.min(Math.max(ut,at[mt][0]),at[mt][1]))})}function layoutSingleSeries(_e,_,et){var tt=_e.coordinateSystem,nt=_e.getData(),it=et/2,at=_e.get("layout")==="horizontal"?0:1,ot=1-at,st=["x","y"],dt=nt.mapDimension(st[at]),ht=nt.mapDimensionsAll(st[ot]);if(dt==null||ht.length<5)return;for(var ct=0;ct<nt.count();ct++){var ut=nt.get(dt,ct),ft=_t(ut,ht[2],ct),gt=_t(ut,ht[0],ct),mt=_t(ut,ht[1],ct),vt=_t(ut,ht[3],ct),yt=_t(ut,ht[4],ct),bt=[];xt(bt,mt,!1),xt(bt,vt,!0),bt.push(gt,mt,yt,vt),St(bt,gt),St(bt,yt),St(bt,ft),nt.setItemLayout(ct,{initBaseline:ft[ot],ends:bt})}function _t(Tt,wt,Ct){var Et=nt.get(wt,Ct),At=[];At[at]=Tt,At[ot]=Et;var Pt;return isNaN(Tt)||isNaN(Et)?Pt=[NaN,NaN]:(Pt=tt.dataToPoint(At),Pt[at]+=_),Pt}function xt(Tt,wt,Ct){var Et=wt.slice(),At=wt.slice();Et[at]+=it,At[at]-=it,Ct?Tt.push(Et,At):Tt.push(At,Et)}function St(Tt,wt){var Ct=wt.slice(),Et=wt.slice();Ct[at]-=it,Et[at]+=it,Tt.push(Ct,Et)}}function prepareBoxplotData(_e,_){_=_||{};for(var et=[],tt=[],nt=_.boundIQR,it=nt==="none"||nt===0,at=0;at<_e.length;at++){var ot=asc$2(_e[at].slice()),st=quantile(ot,.25),dt=quantile(ot,.5),ht=quantile(ot,.75),ct=ot[0],ut=ot[ot.length-1],ft=(nt??1.5)*(ht-st),gt=it?ct:Math.max(ct,st-ft),mt=it?ut:Math.min(ut,ht+ft),vt=_.itemNameFormatter,yt=isFunction$3(vt)?vt({value:at}):isString$1(vt)?vt.replace("{value}",at+""):at+"";et.push([yt,gt,st,dt,ht,mt]);for(var bt=0;bt<ot.length;bt++){var _t=ot[bt];if(_t<gt||_t>mt){var xt=[yt,_t];tt.push(xt)}}}return{boxData:et,outliers:tt}}var boxplotTransform={type:"echarts:boxplot",transform:function _e(_){var et=_.upstream;if(et.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var tt="";throwError(tt)}var nt=prepareBoxplotData(et.getRawData(),_.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:nt.boxData},{data:nt.outliers}]}};function install$z(_e){_e.registerSeriesModel(BoxplotSeriesModel),_e.registerChartView(BoxplotView),_e.registerLayout(boxplotLayout),_e.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(_e,_){return _.get(_e>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(_e,_){return _.get(_e===0?dojiBorderColorQuery:_e>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(_e,_){if(!_.isSeriesFiltered(_e)){var et=_e.pipelineContext.large;return!et&&{progress:function(tt,nt){for(var it;(it=tt.next())!=null;){var at=nt.getItemModel(it),ot=nt.getItemLayout(it).sign,st=at.getItemStyle();st.fill=getColor(ot,at),st.stroke=getBorderColor(ot,at)||st.fill;var dt=nt.ensureUniqueItemVisual(it,"style");extend(dt,st)}}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(et),this._isLargeDraw?this._renderLarge(et):this._renderNormal(et)},_.prototype.incrementalPrepareRender=function(et,tt,nt){this._clear(),this._updateDrawMode(et)},_.prototype.incrementalRender=function(et,tt,nt,it){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(et,tt):this._incrementalRenderNormal(et,tt)},_.prototype.eachRendered=function(et){traverseElements(this._progressiveEls||this.group,et)},_.prototype._updateDrawMode=function(et){var tt=et.pipelineContext.large;(this._isLargeDraw==null||tt!==this._isLargeDraw)&&(this._isLargeDraw=tt,this._clear())},_.prototype._renderNormal=function(et){var tt=et.getData(),nt=this._data,it=this.group,at=tt.getLayout("isSimpleBox"),ot=et.get("clip",!0),st=et.coordinateSystem,dt=st.getArea&&st.getArea();this._data||it.removeAll(),tt.diff(nt).add(function(ht){if(tt.hasValue(ht)){var ct=tt.getItemLayout(ht);if(ot&&isNormalBoxClipped(dt,ct))return;var ut=createNormalBox(ct,ht,!0);initProps(ut,{shape:{points:ct.ends}},et,ht),setBoxCommon(ut,tt,ht,at),it.add(ut),tt.setItemGraphicEl(ht,ut)}}).update(function(ht,ct){var ut=nt.getItemGraphicEl(ct);if(!tt.hasValue(ht)){it.remove(ut);return}var ft=tt.getItemLayout(ht);if(ot&&isNormalBoxClipped(dt,ft)){it.remove(ut);return}ut?(updateProps$1(ut,{shape:{points:ft.ends}},et,ht),saveOldStyle(ut)):ut=createNormalBox(ft),setBoxCommon(ut,tt,ht,at),it.add(ut),tt.setItemGraphicEl(ht,ut)}).remove(function(ht){var ct=nt.getItemGraphicEl(ht);ct&&it.remove(ct)}).execute(),this._data=tt},_.prototype._renderLarge=function(et){this._clear(),createLarge(et,this.group);var tt=et.get("clip",!0)?createClipPath(et.coordinateSystem,!1,et):null;tt?this.group.setClipPath(tt):this.group.removeClipPath()},_.prototype._incrementalRenderNormal=function(et,tt){for(var nt=tt.getData(),it=nt.getLayout("isSimpleBox"),at;(at=et.next())!=null;){var ot=nt.getItemLayout(at),st=createNormalBox(ot);setBoxCommon(st,nt,at,it),st.incremental=!0,this.group.add(st),this._progressiveEls.push(st)}},_.prototype._incrementalRenderLarge=function(et,tt){createLarge(tt,this.group,this._progressiveEls,!0)},_.prototype.remove=function(et){this._clear()},_.prototype._clear=function(){this.group.removeAll(),this._data=null},_.type="candlestick",_}(ChartView),NormalBoxPathShape=function(){function _e(){}return _e}(),NormalBoxPath=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.type="normalCandlestickBox",tt}return _.prototype.getDefaultShape=function(){return new NormalBoxPathShape},_.prototype.buildPath=function(et,tt){var nt=tt.points;this.__simpleBox?(et.moveTo(nt[4][0],nt[4][1]),et.lineTo(nt[6][0],nt[6][1])):(et.moveTo(nt[0][0],nt[0][1]),et.lineTo(nt[1][0],nt[1][1]),et.lineTo(nt[2][0],nt[2][1]),et.lineTo(nt[3][0],nt[3][1]),et.closePath(),et.moveTo(nt[4][0],nt[4][1]),et.lineTo(nt[5][0],nt[5][1]),et.moveTo(nt[6][0],nt[6][1]),et.lineTo(nt[7][0],nt[7][1]))},_}(Path);function createNormalBox(_e,_,et){var tt=_e.ends;return new NormalBoxPath({shape:{points:et?transInit(tt,_e):tt},z2:100})}function isNormalBoxClipped(_e,_){for(var et=!0,tt=0;tt<_.ends.length;tt++)if(_e.contain(_.ends[tt][0],_.ends[tt][1])){et=!1;break}return et}function setBoxCommon(_e,_,et,tt){var nt=_.getItemModel(et);_e.useStyle(_.getItemVisual(et,"style")),_e.style.strokeNoScale=!0,_e.__simpleBox=tt,setStatesStylesFromModel(_e,nt);var it=_.getItemLayout(et).sign;each$f(_e.states,function(ot,st){var dt=nt.getModel(st),ht=getColor(it,dt),ct=getBorderColor(it,dt)||ht,ut=ot.style||(ot.style={});ht&&(ut.fill=ht),ct&&(ut.stroke=ct)});var at=nt.getModel("emphasis");toggleHoverEmphasis(_e,at.get("focus"),at.get("blurScope"),at.get("disabled"))}function transInit(_e,_){return map$1(_e,function(et){return et=et.slice(),et[1]=_.initBaseline,et})}var LargeBoxPathShape=function(){function _e(){}return _e}(),LargeBoxPath=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.type="largeCandlestickBox",tt}return _.prototype.getDefaultShape=function(){return new LargeBoxPathShape},_.prototype.buildPath=function(et,tt){for(var nt=tt.points,it=0;it<nt.length;)if(this.__sign===nt[it++]){var at=nt[it++];et.moveTo(at,nt[it++]),et.lineTo(at,nt[it++])}else it+=3},_}(Path);function createLarge(_e,_,et,tt){var nt=_e.getData(),it=nt.getLayout("largePoints"),at=new LargeBoxPath({shape:{points:it},__sign:1,ignoreCoarsePointer:!0});_.add(at);var ot=new LargeBoxPath({shape:{points:it},__sign:-1,ignoreCoarsePointer:!0});_.add(ot);var st=new LargeBoxPath({shape:{points:it},__sign:0,ignoreCoarsePointer:!0});_.add(st),setLargeStyle(1,at,_e),setLargeStyle(-1,ot,_e),setLargeStyle(0,st,_e),tt&&(at.incremental=!0,ot.incremental=!0),et&&et.push(at,ot)}function setLargeStyle(_e,_,et,tt){var nt=getBorderColor(_e,et)||getColor(_e,et),it=et.getModel("itemStyle").getItemStyle(SKIP_PROPS);_.useStyle(it),_.style.fill=null,_.style.stroke=nt}var CandlestickSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],et}return _.prototype.getShadowDim=function(){return"open"},_.prototype.brushSelector=function(et,tt,nt){var it=tt.getItemLayout(et);return it&&nt.rect(it.brushRect)},_.type="series.candlestick",_.dependencies=["xAxis","yAxis","grid"],_.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},_}(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(_e){!_e||!isArray$1(_e.series)||each$f(_e.series,function(_){isObject$4(_)&&_.type==="k"&&(_.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(_e){var _=_e.coordinateSystem,et=_e.getData(),tt=calculateCandleWidth(_e,et),nt=0,it=1,at=["x","y"],ot=et.getDimensionIndex(et.mapDimension(at[nt])),st=map$1(et.mapDimensionsAll(at[it]),et.getDimensionIndex,et),dt=st[0],ht=st[1],ct=st[2],ut=st[3];if(et.setLayout({candleWidth:tt,isSimpleBox:tt<=1.3}),ot<0||st.length<4)return;return{progress:_e.pipelineContext.large?gt:ft};function ft(mt,vt){for(var yt,bt=vt.getStore();(yt=mt.next())!=null;){var _t=bt.get(ot,yt),xt=bt.get(dt,yt),St=bt.get(ht,yt),Tt=bt.get(ct,yt),wt=bt.get(ut,yt),Ct=Math.min(xt,St),Et=Math.max(xt,St),At=Lt(Ct,_t),Pt=Lt(Et,_t),Rt=Lt(Tt,_t),It=Lt(wt,_t),Mt=[];kt(Mt,Pt,0),kt(Mt,At,1),Mt.push(Vt(It),Vt(Pt),Vt(Rt),Vt(At));var Ot=vt.getItemModel(yt),$t=!!Ot.get(["itemStyle","borderColorDoji"]);vt.setItemLayout(yt,{sign:getSign(bt,yt,xt,St,ht,$t),initBaseline:xt>St?Pt[it]:At[it],ends:Mt,brushRect:Nt(Tt,wt,_t)})}function Lt(zt,Xt){var Wt=[];return Wt[nt]=Xt,Wt[it]=zt,isNaN(Xt)||isNaN(zt)?[NaN,NaN]:_.dataToPoint(Wt)}function kt(zt,Xt,Wt){var nr=Xt.slice(),Jt=Xt.slice();nr[nt]=subPixelOptimize(nr[nt]+tt/2,1,!1),Jt[nt]=subPixelOptimize(Jt[nt]-tt/2,1,!0),Wt?zt.push(nr,Jt):zt.push(Jt,nr)}function Nt(zt,Xt,Wt){var nr=Lt(zt,Wt),Jt=Lt(Xt,Wt);return nr[nt]-=tt/2,Jt[nt]-=tt/2,{x:nr[0],y:nr[1],width:tt,height:Jt[1]-nr[1]}}function Vt(zt){return zt[nt]=subPixelOptimize(zt[nt],1),zt}}function gt(mt,vt){for(var yt=createFloat32Array(mt.count*4),bt=0,_t,xt=[],St=[],Tt,wt=vt.getStore(),Ct=!!_e.get(["itemStyle","borderColorDoji"]);(Tt=mt.next())!=null;){var Et=wt.get(ot,Tt),At=wt.get(dt,Tt),Pt=wt.get(ht,Tt),Rt=wt.get(ct,Tt),It=wt.get(ut,Tt);if(isNaN(Et)||isNaN(Rt)||isNaN(It)){yt[bt++]=NaN,bt+=3;continue}yt[bt++]=getSign(wt,Tt,At,Pt,ht,Ct),xt[nt]=Et,xt[it]=Rt,_t=_.dataToPoint(xt,null,St),yt[bt++]=_t?_t[0]:NaN,yt[bt++]=_t?_t[1]:NaN,xt[it]=It,_t=_.dataToPoint(xt,null,St),yt[bt++]=_t?_t[1]:NaN}vt.setLayout("largePoints",yt)}}};function getSign(_e,_,et,tt,nt,it){var at;return et>tt?at=-1:et<tt?at=1:at=it?0:_>0?_e.get(nt,_-1)<=tt?1:-1:1,at}function calculateCandleWidth(_e,_){var et=_e.getBaseAxis(),tt,nt=et.type==="category"?et.getBandWidth():(tt=et.getExtent(),Math.abs(tt[1]-tt[0])/_.count()),it=parsePercent(retrieve2(_e.get("barMaxWidth"),nt),nt),at=parsePercent(retrieve2(_e.get("barMinWidth"),1),nt),ot=_e.get("barWidth");return ot!=null?parsePercent(ot,nt):Math.max(Math.min(nt/2,it),at)}function install$y(_e){_e.registerChartView(CandlestickView),_e.registerSeriesModel(CandlestickSeriesModel),_e.registerPreprocessor(candlestickPreprocessor),_e.registerVisual(candlestickVisual),_e.registerLayout(candlestickLayout)}function updateRipplePath(_e,_){var et=_.rippleEffectColor||_.color;_e.eachChild(function(tt){tt.attr({z:_.z,zlevel:_.zlevel,style:{stroke:_.brushType==="stroke"?et:null,fill:_.brushType==="fill"?et:null}})})}var EffectSymbol=function(_e){__extends$1(_,_e);function _(et,tt){var nt=_e.call(this)||this,it=new Symbol$1(et,tt),at=new Group$3;return nt.add(it),nt.add(at),nt.updateData(et,tt),nt}return _.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},_.prototype.startEffectAnimation=function(et){for(var tt=et.symbolType,nt=et.color,it=et.rippleNumber,at=this.childAt(1),ot=0;ot<it;ot++){var st=createSymbol$1(tt,-1,-1,2,2,nt);st.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var dt=-ot/it*et.period+et.effectOffset;st.animate("",!0).when(et.period,{scaleX:et.rippleScale/2,scaleY:et.rippleScale/2}).delay(dt).start(),st.animateStyle(!0).when(et.period,{opacity:0}).delay(dt).start(),at.add(st)}updateRipplePath(at,et)},_.prototype.updateEffectAnimation=function(et){for(var tt=this._effectCfg,nt=this.childAt(1),it=["symbolType","period","rippleScale","rippleNumber"],at=0;at<it.length;at++){var ot=it[at];if(tt[ot]!==et[ot]){this.stopEffectAnimation(),this.startEffectAnimation(et);return}}updateRipplePath(nt,et)},_.prototype.highlight=function(){enterEmphasis(this)},_.prototype.downplay=function(){leaveEmphasis(this)},_.prototype.getSymbolType=function(){var et=this.childAt(0);return et&&et.getSymbolType()},_.prototype.updateData=function(et,tt){var nt=this,it=et.hostModel;this.childAt(0).updateData(et,tt);var at=this.childAt(1),ot=et.getItemModel(tt),st=et.getItemVisual(tt,"symbol"),dt=normalizeSymbolSize(et.getItemVisual(tt,"symbolSize")),ht=et.getItemVisual(tt,"style"),ct=ht&&ht.fill,ut=ot.getModel("emphasis");at.setScale(dt),at.traverse(function(vt){vt.setStyle("fill",ct)});var ft=normalizeSymbolOffset(et.getItemVisual(tt,"symbolOffset"),dt);ft&&(at.x=ft[0],at.y=ft[1]);var gt=et.getItemVisual(tt,"symbolRotate");at.rotation=(gt||0)*Math.PI/180||0;var mt={};mt.showEffectOn=it.get("showEffectOn"),mt.rippleScale=ot.get(["rippleEffect","scale"]),mt.brushType=ot.get(["rippleEffect","brushType"]),mt.period=ot.get(["rippleEffect","period"])*1e3,mt.effectOffset=tt/et.count(),mt.z=it.getShallow("z")||0,mt.zlevel=it.getShallow("zlevel")||0,mt.symbolType=st,mt.color=ct,mt.rippleEffectColor=ot.get(["rippleEffect","color"]),mt.rippleNumber=ot.get(["rippleEffect","number"]),mt.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(mt):this.startEffectAnimation(mt),this._effectCfg=mt):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(vt){vt==="emphasis"?mt.showEffectOn!=="render"&&nt.startEffectAnimation(mt):vt==="normal"&&mt.showEffectOn!=="render"&&nt.stopEffectAnimation()}),this._effectCfg=mt,toggleHoverEmphasis(this,ut.get("focus"),ut.get("blurScope"),ut.get("disabled"))},_.prototype.fadeOut=function(et){et&&et()},_}(Group$3),EffectScatterView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},_.prototype.render=function(et,tt,nt){var it=et.getData(),at=this._symbolDraw;at.updateData(it,{clipShape:this._getClipShape(et)}),this.group.add(at.group)},_.prototype._getClipShape=function(et){var tt=et.coordinateSystem,nt=tt&&tt.getArea&&tt.getArea();return et.get("clip",!0)?nt:null},_.prototype.updateTransform=function(et,tt,nt){var it=et.getData();this.group.dirty();var at=pointsLayout("").reset(et,tt,nt);at.progress&&at.progress({start:0,end:it.count(),count:it.count()},it),this._symbolDraw.updateLayout()},_.prototype._updateGroupTransform=function(et){var tt=et.coordinateSystem;tt&&tt.getRoamTransform&&(this.group.transform=clone$2(tt.getRoamTransform()),this.group.decomposeTransform())},_.prototype.remove=function(et,tt){this._symbolDraw&&this._symbolDraw.remove(!0)},_.type="effectScatter",_}(ChartView),EffectScatterSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.hasSymbolVisual=!0,et}return _.prototype.getInitialData=function(et,tt){return createSeriesData(null,this,{useEncodeDefaulter:!0})},_.prototype.brushSelector=function(et,tt,nt){return nt.point(tt.getItemLayout(et))},_.type="series.effectScatter",_.dependencies=["grid","polar"],_.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},_}(SeriesModel);function install$x(_e){_e.registerChartView(EffectScatterView),_e.registerSeriesModel(EffectScatterSeriesModel),_e.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(_e){__extends$1(_,_e);function _(et,tt,nt){var it=_e.call(this)||this;return it.add(it.createLine(et,tt,nt)),it._updateEffectSymbol(et,tt),it}return _.prototype.createLine=function(et,tt,nt){return new Line(et,tt,nt)},_.prototype._updateEffectSymbol=function(et,tt){var nt=et.getItemModel(tt),it=nt.getModel("effect"),at=it.get("symbolSize"),ot=it.get("symbol");isArray$1(at)||(at=[at,at]);var st=et.getItemVisual(tt,"style"),dt=it.get("color")||st&&st.stroke,ht=this.childAt(1);this._symbolType!==ot&&(this.remove(ht),ht=createSymbol$1(ot,-.5,-.5,1,1,dt),ht.z2=100,ht.culling=!0,this.add(ht)),ht&&(ht.setStyle("shadowColor",dt),ht.setStyle(it.getItemStyle(["color"])),ht.scaleX=at[0],ht.scaleY=at[1],ht.setColor(dt),this._symbolType=ot,this._symbolScale=at,this._updateEffectAnimation(et,it,tt))},_.prototype._updateEffectAnimation=function(et,tt,nt){var it=this.childAt(1);if(it){var at=et.getItemLayout(nt),ot=tt.get("period")*1e3,st=tt.get("loop"),dt=tt.get("roundTrip"),ht=tt.get("constantSpeed"),ct=retrieve(tt.get("delay"),function(ft){return ft/et.count()*ot/3});if(it.ignore=!0,this._updateAnimationPoints(it,at),ht>0&&(ot=this._getLineLength(it)/ht*1e3),ot!==this._period||st!==this._loop||dt!==this._roundTrip){it.stopAnimation();var ut=void 0;isFunction$3(ct)?ut=ct(nt):ut=ct,it.__t>0&&(ut=-ot*it.__t),this._animateSymbol(it,ot,ut,st,dt)}this._period=ot,this._loop=st,this._roundTrip=dt}},_.prototype._animateSymbol=function(et,tt,nt,it,at){if(tt>0){et.__t=0;var ot=this,st=et.animate("",it).when(at?tt*2:tt,{__t:at?2:1}).delay(nt).during(function(){ot._updateSymbolPosition(et)});it||st.done(function(){ot.remove(et)}),st.start()}},_.prototype._getLineLength=function(et){return dist$1(et.__p1,et.__cp1)+dist$1(et.__cp1,et.__p2)},_.prototype._updateAnimationPoints=function(et,tt){et.__p1=tt[0],et.__p2=tt[1],et.__cp1=tt[2]||[(tt[0][0]+tt[1][0])/2,(tt[0][1]+tt[1][1])/2]},_.prototype.updateData=function(et,tt,nt){this.childAt(0).updateData(et,tt,nt),this._updateEffectSymbol(et,tt)},_.prototype._updateSymbolPosition=function(et){var tt=et.__p1,nt=et.__p2,it=et.__cp1,at=et.__t<1?et.__t:2-et.__t,ot=[et.x,et.y],st=ot.slice(),dt=quadraticAt$1,ht=quadraticDerivativeAt;ot[0]=dt(tt[0],it[0],nt[0],at),ot[1]=dt(tt[1],it[1],nt[1],at);var ct=et.__t<1?ht(tt[0],it[0],nt[0],at):ht(nt[0],it[0],tt[0],1-at),ut=et.__t<1?ht(tt[1],it[1],nt[1],at):ht(nt[1],it[1],tt[1],1-at);et.rotation=-Math.atan2(ut,ct)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(et.__lastT!==void 0&&et.__lastT<et.__t?(et.scaleY=dist$1(st,ot)*1.05,at===1&&(ot[0]=st[0]+(ot[0]-st[0])/2,ot[1]=st[1]+(ot[1]-st[1])/2)):et.__lastT===1?et.scaleY=2*dist$1(tt,ot):et.scaleY=this._symbolScale[1]),et.__lastT=et.__t,et.ignore=!1,et.x=ot[0],et.y=ot[1]},_.prototype.updateLayout=function(et,tt){this.childAt(0).updateLayout(et,tt);var nt=et.getItemModel(tt).getModel("effect");this._updateEffectAnimation(et,nt,tt)},_}(Group$3),Polyline=function(_e){__extends$1(_,_e);function _(et,tt,nt){var it=_e.call(this)||this;return it._createPolyline(et,tt,nt),it}return _.prototype._createPolyline=function(et,tt,nt){var it=et.getItemLayout(tt),at=new Polyline$1({shape:{points:it}});this.add(at),this._updateCommonStl(et,tt,nt)},_.prototype.updateData=function(et,tt,nt){var it=et.hostModel,at=this.childAt(0),ot={shape:{points:et.getItemLayout(tt)}};updateProps$1(at,ot,it,tt),this._updateCommonStl(et,tt,nt)},_.prototype._updateCommonStl=function(et,tt,nt){var it=this.childAt(0),at=et.getItemModel(tt),ot=nt&&nt.emphasisLineStyle,st=nt&&nt.focus,dt=nt&&nt.blurScope,ht=nt&&nt.emphasisDisabled;if(!nt||et.hasItemOption){var ct=at.getModel("emphasis");ot=ct.getModel("lineStyle").getLineStyle(),ht=ct.get("disabled"),st=ct.get("focus"),dt=ct.get("blurScope")}it.useStyle(et.getItemVisual(tt,"style")),it.style.fill=null,it.style.strokeNoScale=!0;var ut=it.ensureState("emphasis");ut.style=ot,toggleHoverEmphasis(this,st,dt,ht)},_.prototype.updateLayout=function(et,tt){var nt=this.childAt(0);nt.setShape("points",et.getItemLayout(tt))},_}(Group$3),EffectPolyline=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et._lastFrame=0,et._lastFramePercent=0,et}return _.prototype.createLine=function(et,tt,nt){return new Polyline(et,tt,nt)},_.prototype._updateAnimationPoints=function(et,tt){this._points=tt;for(var nt=[0],it=0,at=1;at<tt.length;at++){var ot=tt[at-1],st=tt[at];it+=dist$1(ot,st),nt.push(it)}if(it===0){this._length=0;return}for(var at=0;at<nt.length;at++)nt[at]/=it;this._offsets=nt,this._length=it},_.prototype._getLineLength=function(){return this._length},_.prototype._updateSymbolPosition=function(et){var tt=et.__t<1?et.__t:2-et.__t,nt=this._points,it=this._offsets,at=nt.length;if(it){var ot=this._lastFrame,st;if(tt<this._lastFramePercent){var dt=Math.min(ot+1,at-1);for(st=dt;st>=0&&!(it[st]<=tt);st--);st=Math.min(st,at-2)}else{for(st=ot;st<at&&!(it[st]>tt);st++);st=Math.min(st-1,at-2)}var ht=(tt-it[st])/(it[st+1]-it[st]),ct=nt[st],ut=nt[st+1];et.x=ct[0]*(1-ht)+ht*ut[0],et.y=ct[1]*(1-ht)+ht*ut[1];var ft=et.__t<1?ut[0]-ct[0]:ct[0]-ut[0],gt=et.__t<1?ut[1]-ct[1]:ct[1]-ut[1];et.rotation=-Math.atan2(gt,ft)-Math.PI/2,this._lastFrame=st,this._lastFramePercent=tt,et.ignore=!1}},_}(EffectLine),LargeLinesPathShape=function(){function _e(){this.polyline=!1,this.curveness=0,this.segs=[]}return _e}(),LargeLinesPath=function(_e){__extends$1(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt._off=0,tt.hoverDataIdx=-1,tt}return _.prototype.reset=function(){this.notClear=!1,this._off=0},_.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},_.prototype.getDefaultShape=function(){return new LargeLinesPathShape},_.prototype.buildPath=function(et,tt){var nt=tt.segs,it=tt.curveness,at;if(tt.polyline)for(at=this._off;at<nt.length;){var ot=nt[at++];if(ot>0){et.moveTo(nt[at++],nt[at++]);for(var st=1;st<ot;st++)et.lineTo(nt[at++],nt[at++])}}else for(at=this._off;at<nt.length;){var dt=nt[at++],ht=nt[at++],ct=nt[at++],ut=nt[at++];if(et.moveTo(dt,ht),it>0){var ft=(dt+ct)/2-(ht-ut)*it,gt=(ht+ut)/2-(ct-dt)*it;et.quadraticCurveTo(ft,gt,ct,ut)}else et.lineTo(ct,ut)}this.incremental&&(this._off=at,this.notClear=!0)},_.prototype.findDataIndex=function(et,tt){var nt=this.shape,it=nt.segs,at=nt.curveness,ot=this.style.lineWidth;if(nt.polyline)for(var st=0,dt=0;dt<it.length;){var ht=it[dt++];if(ht>0)for(var ct=it[dt++],ut=it[dt++],ft=1;ft<ht;ft++){var gt=it[dt++],mt=it[dt++];if(containStroke$4(ct,ut,gt,mt,ot,et,tt))return st}st++}else for(var st=0,dt=0;dt<it.length;){var ct=it[dt++],ut=it[dt++],gt=it[dt++],mt=it[dt++];if(at>0){var vt=(ct+gt)/2-(ut-mt)*at,yt=(ut+mt)/2-(gt-ct)*at;if(containStroke$2(ct,ut,vt,yt,gt,mt,ot,et,tt))return st}else if(containStroke$4(ct,ut,gt,mt,ot,et,tt))return st;st++}return-1},_.prototype.contain=function(et,tt){var nt=this.transformCoordToLocal(et,tt),it=this.getBoundingRect();if(et=nt[0],tt=nt[1],it.contain(et,tt)){var at=this.hoverDataIdx=this.findDataIndex(et,tt);return at>=0}return this.hoverDataIdx=-1,!1},_.prototype.getBoundingRect=function(){var et=this._rect;if(!et){for(var tt=this.shape,nt=tt.segs,it=1/0,at=1/0,ot=-1/0,st=-1/0,dt=0;dt<nt.length;){var ht=nt[dt++],ct=nt[dt++];it=Math.min(ht,it),ot=Math.max(ht,ot),at=Math.min(ct,at),st=Math.max(ct,st)}et=this._rect=new BoundingRect(it,at,ot,st)}return et},_}(Path),LargeLineDraw=function(){function _e(){this.group=new Group$3}return _e.prototype.updateData=function(_){this._clear();var et=this._create();et.setShape({segs:_.getLayout("linesPoints")}),this._setCommon(et,_)},_e.prototype.incrementalPrepareUpdate=function(_){this.group.removeAll(),this._clear()},_e.prototype.incrementalUpdate=function(_,et){var tt=this._newAdded[0],nt=et.getLayout("linesPoints"),it=tt&&tt.shape.segs;if(it&&it.length<2e4){var at=it.length,ot=new Float32Array(at+nt.length);ot.set(it),ot.set(nt,at),tt.setShape({segs:ot})}else{this._newAdded=[];var st=this._create();st.incremental=!0,st.setShape({segs:nt}),this._setCommon(st,et),st.__startIndex=_.start}},_e.prototype.remove=function(){this._clear()},_e.prototype.eachRendered=function(_){this._newAdded[0]&&_(this._newAdded[0])},_e.prototype._create=function(){var _=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(_),this.group.add(_),_},_e.prototype._setCommon=function(_,et,tt){var nt=et.hostModel;_.setShape({polyline:nt.get("polyline"),curveness:nt.get(["lineStyle","curveness"])}),_.useStyle(nt.getModel("lineStyle").getLineStyle()),_.style.strokeNoScale=!0;var it=et.getVisual("style");it&&it.stroke&&_.setStyle("stroke",it.stroke),_.setStyle("fill",null);var at=getECData(_);at.seriesIndex=nt.seriesIndex,_.on("mousemove",function(ot){at.dataIndex=null;var st=_.hoverDataIdx;st>0&&(at.dataIndex=st+_.__startIndex)})},_e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},_e}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(_e){var _=_e.coordinateSystem;if(_){var et=_e.get("polyline"),tt=_e.pipelineContext.large;return{progress:function(nt,it){var at=[];if(tt){var ot=void 0,st=nt.end-nt.start;if(et){for(var dt=0,ht=nt.start;ht<nt.end;ht++)dt+=_e.getLineCoordsCount(ht);ot=new Float32Array(st+dt*2)}else ot=new Float32Array(st*4);for(var ct=0,ut=[],ht=nt.start;ht<nt.end;ht++){var ft=_e.getLineCoords(ht,at);et&&(ot[ct++]=ft);for(var gt=0;gt<ft;gt++)ut=_.dataToPoint(at[gt],!1,ut),ot[ct++]=ut[0],ot[ct++]=ut[1]}it.setLayout("linesPoints",ot)}else for(var ht=nt.start;ht<nt.end;ht++){var mt=it.getItemModel(ht),ft=_e.getLineCoords(ht,at),vt=[];if(et)for(var yt=0;yt<ft;yt++)vt.push(_.dataToPoint(at[yt]));else{vt[0]=_.dataToPoint(at[0]),vt[1]=_.dataToPoint(at[1]);var bt=mt.get(["lineStyle","curveness"]);+bt&&(vt[2]=[(vt[0][0]+vt[1][0])/2-(vt[0][1]-vt[1][1])*bt,(vt[0][1]+vt[1][1])/2-(vt[1][0]-vt[0][0])*bt])}it.setItemLayout(ht,vt)}}}}}},LinesView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){var it=et.getData(),at=this._updateLineDraw(it,et),ot=et.get("zlevel"),st=et.get(["effect","trailLength"]),dt=nt.getZr(),ht=dt.painter.getType()==="svg";ht||dt.painter.getLayer(ot).clear(!0),this._lastZlevel!=null&&!ht&&dt.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(et)&&st>0&&(ht||dt.configLayer(ot,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(st/10+.9,1),0)})),at.updateData(it);var ct=et.get("clip",!0)&&createClipPath(et.coordinateSystem,!1,et);ct?this.group.setClipPath(ct):this.group.removeClipPath(),this._lastZlevel=ot,this._finished=!0},_.prototype.incrementalPrepareRender=function(et,tt,nt){var it=et.getData(),at=this._updateLineDraw(it,et);at.incrementalPrepareUpdate(it),this._clearLayer(nt),this._finished=!1},_.prototype.incrementalRender=function(et,tt,nt){this._lineDraw.incrementalUpdate(et,tt.getData()),this._finished=et.end===tt.getData().count()},_.prototype.eachRendered=function(et){this._lineDraw&&this._lineDraw.eachRendered(et)},_.prototype.updateTransform=function(et,tt,nt){var it=et.getData(),at=et.pipelineContext;if(!this._finished||at.large||at.progressiveRender)return{update:!0};var ot=linesLayout.reset(et,tt,nt);ot.progress&&ot.progress({start:0,end:it.count(),count:it.count()},it),this._lineDraw.updateLayout(),this._clearLayer(nt)},_.prototype._updateLineDraw=function(et,tt){var nt=this._lineDraw,it=this._showEffect(tt),at=!!tt.get("polyline"),ot=tt.pipelineContext,st=ot.large;return(!nt||it!==this._hasEffet||at!==this._isPolyline||st!==this._isLargeDraw)&&(nt&&nt.remove(),nt=this._lineDraw=st?new LargeLineDraw:new LineDraw(at?it?EffectPolyline:Polyline:it?EffectLine:Line),this._hasEffet=it,this._isPolyline=at,this._isLargeDraw=st),this.group.add(nt.group),nt},_.prototype._showEffect=function(et){return!!et.get(["effect","show"])},_.prototype._clearLayer=function(et){var tt=et.getZr(),nt=tt.painter.getType()==="svg";!nt&&this._lastZlevel!=null&&tt.painter.getLayer(this._lastZlevel).clear(!0)},_.prototype.remove=function(et,tt){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(tt)},_.prototype.dispose=function(et,tt){this.remove(et,tt)},_.type="lines",_}(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(_e){var _=_e.data;_&&_[0]&&_[0][0]&&_[0][0].coord&&(_e.data=map$1(_,function(et){var tt=[et[0].coord,et[1].coord],nt={coords:tt};return et[0].name&&(nt.fromName=et[0].name),et[1].name&&(nt.toName=et[1].name),mergeAll([nt,et[0],et[1]])}))}var LinesSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.visualStyleAccessPath="lineStyle",et.visualDrawType="stroke",et}return _.prototype.init=function(et){et.data=et.data||[],compatEc2(et);var tt=this._processFlatCoordsArray(et.data);this._flatCoords=tt.flatCoords,this._flatCoordsOffset=tt.flatCoordsOffset,tt.flatCoords&&(et.data=new Float32Array(tt.count)),_e.prototype.init.apply(this,arguments)},_.prototype.mergeOption=function(et){if(compatEc2(et),et.data){var tt=this._processFlatCoordsArray(et.data);this._flatCoords=tt.flatCoords,this._flatCoordsOffset=tt.flatCoordsOffset,tt.flatCoords&&(et.data=new Float32Array(tt.count))}_e.prototype.mergeOption.apply(this,arguments)},_.prototype.appendData=function(et){var tt=this._processFlatCoordsArray(et.data);tt.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,tt.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,tt.flatCoordsOffset)):(this._flatCoords=tt.flatCoords,this._flatCoordsOffset=tt.flatCoordsOffset),et.data=new Float32Array(tt.count)),this.getRawData().appendData(et.data)},_.prototype._getCoordsFromItemModel=function(et){var tt=this.getData().getItemModel(et),nt=tt.option instanceof Array?tt.option:tt.getShallow("coords");return nt},_.prototype.getLineCoordsCount=function(et){return this._flatCoordsOffset?this._flatCoordsOffset[et*2+1]:this._getCoordsFromItemModel(et).length},_.prototype.getLineCoords=function(et,tt){if(this._flatCoordsOffset){for(var nt=this._flatCoordsOffset[et*2],it=this._flatCoordsOffset[et*2+1],at=0;at<it;at++)tt[at]=tt[at]||[],tt[at][0]=this._flatCoords[nt+at*2],tt[at][1]=this._flatCoords[nt+at*2+1];return it}else{for(var ot=this._getCoordsFromItemModel(et),at=0;at<ot.length;at++)tt[at]=tt[at]||[],tt[at][0]=ot[at][0],tt[at][1]=ot[at][1];return ot.length}},_.prototype._processFlatCoordsArray=function(et){var tt=0;if(this._flatCoords&&(tt=this._flatCoords.length),isNumber(et[0])){for(var nt=et.length,it=new Uint32Arr(nt),at=new Float64Arr(nt),ot=0,st=0,dt=0,ht=0;ht<nt;){dt++;var ct=et[ht++];it[st++]=ot+tt,it[st++]=ct;for(var ut=0;ut<ct;ut++){var ft=et[ht++],gt=et[ht++];at[ot++]=ft,at[ot++]=gt}}return{flatCoordsOffset:new Uint32Array(it.buffer,0,st),flatCoords:at,count:dt}}return{flatCoordsOffset:null,flatCoords:null,count:et.length}},_.prototype.getInitialData=function(et,tt){var nt=new SeriesData(["value"],this);return nt.hasItemOption=!1,nt.initData(et.data,[],function(it,at,ot,st){if(it instanceof Array)return NaN;nt.hasItemOption=!0;var dt=it.value;if(dt!=null)return dt instanceof Array?dt[st]:dt}),nt},_.prototype.formatTooltip=function(et,tt,nt){var it=this.getData(),at=it.getItemModel(et),ot=at.get("name");if(ot)return ot;var st=at.get("fromName"),dt=at.get("toName"),ht=[];return st!=null&&ht.push(st),dt!=null&&ht.push(dt),createTooltipMarkup("nameValue",{name:ht.join(" > ")})},_.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},_.prototype.getProgressive=function(){var et=this.option.progressive;return et??(this.option.large?1e4:this.get("progressive"))},_.prototype.getProgressiveThreshold=function(){var et=this.option.progressiveThreshold;return et??(this.option.large?2e4:this.get("progressiveThreshold"))},_.prototype.getZLevelKey=function(){var et=this.getModel("effect"),tt=et.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:et.get("show")&&tt>0?tt+"":""},_.type="series.lines",_.dependencies=["grid","polar","geo","calendar"],_.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},_}(SeriesModel);function normalize(_e){return _e instanceof Array||(_e=[_e,_e]),_e}var linesVisual={seriesType:"lines",reset:function(_e){var _=normalize(_e.get("symbol")),et=normalize(_e.get("symbolSize")),tt=_e.getData();tt.setVisual("fromSymbol",_&&_[0]),tt.setVisual("toSymbol",_&&_[1]),tt.setVisual("fromSymbolSize",et&&et[0]),tt.setVisual("toSymbolSize",et&&et[1]);function nt(it,at){var ot=it.getItemModel(at),st=normalize(ot.getShallow("symbol",!0)),dt=normalize(ot.getShallow("symbolSize",!0));st[0]&&it.setItemVisual(at,"fromSymbol",st[0]),st[1]&&it.setItemVisual(at,"toSymbol",st[1]),dt[0]&&it.setItemVisual(at,"fromSymbolSize",dt[0]),dt[1]&&it.setItemVisual(at,"toSymbolSize",dt[1])}return{dataEach:tt.hasItemOption?nt:null}}};function install$w(_e){_e.registerChartView(LinesView),_e.registerSeriesModel(LinesSeriesModel),_e.registerLayout(linesLayout),_e.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function _e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var _=platformApi.createCanvas();this.canvas=_}return _e.prototype.update=function(_,et,tt,nt,it,at){var ot=this._getBrush(),st=this._getGradient(it,"inRange"),dt=this._getGradient(it,"outOfRange"),ht=this.pointSize+this.blurSize,ct=this.canvas,ut=ct.getContext("2d"),ft=_.length;ct.width=et,ct.height=tt;for(var gt=0;gt<ft;++gt){var mt=_[gt],vt=mt[0],yt=mt[1],bt=mt[2],_t=nt(bt);ut.globalAlpha=_t,ut.drawImage(ot,vt-ht,yt-ht)}if(!ct.width||!ct.height)return ct;for(var xt=ut.getImageData(0,0,ct.width,ct.height),St=xt.data,Tt=0,wt=St.length,Ct=this.minOpacity,Et=this.maxOpacity,At=Et-Ct;Tt<wt;){var _t=St[Tt+3]/256,Pt=Math.floor(_t*(GRADIENT_LEVELS-1))*4;if(_t>0){var Rt=at(_t)?st:dt;_t>0&&(_t=_t*At+Ct),St[Tt++]=Rt[Pt],St[Tt++]=Rt[Pt+1],St[Tt++]=Rt[Pt+2],St[Tt++]=Rt[Pt+3]*_t*256}else Tt+=4}return ut.putImageData(xt,0,0),ct},_e.prototype._getBrush=function(){var _=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),et=this.pointSize+this.blurSize,tt=et*2;_.width=tt,_.height=tt;var nt=_.getContext("2d");return nt.clearRect(0,0,tt,tt),nt.shadowOffsetX=tt,nt.shadowBlur=this.blurSize,nt.shadowColor="#000",nt.beginPath(),nt.arc(-et,et,this.pointSize,0,Math.PI*2,!0),nt.closePath(),nt.fill(),_},_e.prototype._getGradient=function(_,et){for(var tt=this._gradientPixels,nt=tt[et]||(tt[et]=new Uint8ClampedArray(256*4)),it=[0,0,0,0],at=0,ot=0;ot<256;ot++)_[et](ot/255,!0,it),nt[at++]=it[0],nt[at++]=it[1],nt[at++]=it[2],nt[at++]=it[3];return nt},_e}();function getIsInPiecewiseRange(_e,_,et){var tt=_e[1]-_e[0];_=map$1(_,function(at){return{interval:[(at.interval[0]-_e[0])/tt,(at.interval[1]-_e[0])/tt]}});var nt=_.length,it=0;return function(at){var ot;for(ot=it;ot<nt;ot++){var st=_[ot].interval;if(st[0]<=at&&at<=st[1]){it=ot;break}}if(ot===nt)for(ot=it-1;ot>=0;ot--){var st=_[ot].interval;if(st[0]<=at&&at<=st[1]){it=ot;break}}return ot>=0&&ot<nt&&et[ot]}}function getIsInContinuousRange(_e,_){var et=_e[1]-_e[0];return _=[(_[0]-_e[0])/et,(_[1]-_e[0])/et],function(tt){return tt>=_[0]&&tt<=_[1]}}function isGeoCoordSys(_e){var _=_e.dimensions;return _[0]==="lng"&&_[1]==="lat"}var HeatmapView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){var it;tt.eachComponent("visualMap",function(ot){ot.eachTargetSeries(function(st){st===et&&(it=ot)})}),this._progressiveEls=null,this.group.removeAll();var at=et.coordinateSystem;at.type==="cartesian2d"||at.type==="calendar"?this._renderOnCartesianAndCalendar(et,nt,0,et.getData().count()):isGeoCoordSys(at)&&this._renderOnGeo(at,et,it,nt)},_.prototype.incrementalPrepareRender=function(et,tt,nt){this.group.removeAll()},_.prototype.incrementalRender=function(et,tt,nt,it){var at=tt.coordinateSystem;at&&(isGeoCoordSys(at)?this.render(tt,nt,it):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(tt,it,et.start,et.end,!0)))},_.prototype.eachRendered=function(et){traverseElements(this._progressiveEls||this.group,et)},_.prototype._renderOnCartesianAndCalendar=function(et,tt,nt,it,at){var ot=et.coordinateSystem,st=isCoordinateSystemType(ot,"cartesian2d"),dt,ht,ct,ut;if(st){var ft=ot.getAxis("x"),gt=ot.getAxis("y");dt=ft.getBandWidth()+.5,ht=gt.getBandWidth()+.5,ct=ft.scale.getExtent(),ut=gt.scale.getExtent()}for(var mt=this.group,vt=et.getData(),yt=et.getModel(["emphasis","itemStyle"]).getItemStyle(),bt=et.getModel(["blur","itemStyle"]).getItemStyle(),_t=et.getModel(["select","itemStyle"]).getItemStyle(),xt=et.get(["itemStyle","borderRadius"]),St=getLabelStatesModels(et),Tt=et.getModel("emphasis"),wt=Tt.get("focus"),Ct=Tt.get("blurScope"),Et=Tt.get("disabled"),At=st?[vt.mapDimension("x"),vt.mapDimension("y"),vt.mapDimension("value")]:[vt.mapDimension("time"),vt.mapDimension("value")],Pt=nt;Pt<it;Pt++){var Rt=void 0,It=vt.getItemVisual(Pt,"style");if(st){var Mt=vt.get(At[0],Pt),Ot=vt.get(At[1],Pt);if(isNaN(vt.get(At[2],Pt))||isNaN(Mt)||isNaN(Ot)||Mt<ct[0]||Mt>ct[1]||Ot<ut[0]||Ot>ut[1])continue;var $t=ot.dataToPoint([Mt,Ot]);Rt=new Rect$2({shape:{x:$t[0]-dt/2,y:$t[1]-ht/2,width:dt,height:ht},style:It})}else{if(isNaN(vt.get(At[1],Pt)))continue;Rt=new Rect$2({z2:1,shape:ot.dataToRect([vt.get(At[0],Pt)]).contentShape,style:It})}if(vt.hasItemOption){var Lt=vt.getItemModel(Pt),kt=Lt.getModel("emphasis");yt=kt.getModel("itemStyle").getItemStyle(),bt=Lt.getModel(["blur","itemStyle"]).getItemStyle(),_t=Lt.getModel(["select","itemStyle"]).getItemStyle(),xt=Lt.get(["itemStyle","borderRadius"]),wt=kt.get("focus"),Ct=kt.get("blurScope"),Et=kt.get("disabled"),St=getLabelStatesModels(Lt)}Rt.shape.r=xt;var Nt=et.getRawValue(Pt),Vt="-";Nt&&Nt[2]!=null&&(Vt=Nt[2]+""),setLabelStyle(Rt,St,{labelFetcher:et,labelDataIndex:Pt,defaultOpacity:It.opacity,defaultText:Vt}),Rt.ensureState("emphasis").style=yt,Rt.ensureState("blur").style=bt,Rt.ensureState("select").style=_t,toggleHoverEmphasis(Rt,wt,Ct,Et),Rt.incremental=at,at&&(Rt.states.emphasis.hoverLayer=!0),mt.add(Rt),vt.setItemGraphicEl(Pt,Rt),this._progressiveEls&&this._progressiveEls.push(Rt)}},_.prototype._renderOnGeo=function(et,tt,nt,it){var at=nt.targetVisuals.inRange,ot=nt.targetVisuals.outOfRange,st=tt.getData(),dt=this._hmLayer||this._hmLayer||new HeatmapLayer;dt.blurSize=tt.get("blurSize"),dt.pointSize=tt.get("pointSize"),dt.minOpacity=tt.get("minOpacity"),dt.maxOpacity=tt.get("maxOpacity");var ht=et.getViewRect().clone(),ct=et.getRoamTransform();ht.applyTransform(ct);var ut=Math.max(ht.x,0),ft=Math.max(ht.y,0),gt=Math.min(ht.width+ht.x,it.getWidth()),mt=Math.min(ht.height+ht.y,it.getHeight()),vt=gt-ut,yt=mt-ft,bt=[st.mapDimension("lng"),st.mapDimension("lat"),st.mapDimension("value")],_t=st.mapArray(bt,function(wt,Ct,Et){var At=et.dataToPoint([wt,Ct]);return At[0]-=ut,At[1]-=ft,At.push(Et),At}),xt=nt.getExtent(),St=nt.type==="visualMap.continuous"?getIsInContinuousRange(xt,nt.option.range):getIsInPiecewiseRange(xt,nt.getPieceList(),nt.option.selected);dt.update(_t,vt,yt,at.color.getNormalizer(),{inRange:at.color.getColorMapper(),outOfRange:ot.color.getColorMapper()},St);var Tt=new ZRImage({style:{width:vt,height:yt,x:ut,y:ft,image:dt.canvas},silent:!0});this.group.add(Tt)},_.type="heatmap",_}(ChartView),HeatmapSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.getInitialData=function(et,tt){return createSeriesData(null,this,{generateCoord:"value"})},_.prototype.preventIncremental=function(){var et=CoordinateSystemManager.get(this.get("coordinateSystem"));if(et&&et.dimensions)return et.dimensions[0]==="lng"&&et.dimensions[1]==="lat"},_.type="series.heatmap",_.dependencies=["grid","geo","calendar"],_.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},_}(SeriesModel);function install$v(_e){_e.registerChartView(HeatmapView),_e.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){var it=this.group,at=et.getData(),ot=this._data,st=et.coordinateSystem,dt=st.getBaseAxis(),ht=dt.isHorizontal(),ct=st.master.getRect(),ut={ecSize:{width:nt.getWidth(),height:nt.getHeight()},seriesModel:et,coordSys:st,coordSysExtent:[[ct.x,ct.x+ct.width],[ct.y,ct.y+ct.height]],isHorizontal:ht,valueDim:LAYOUT_ATTRS[+ht],categoryDim:LAYOUT_ATTRS[1-+ht]};at.diff(ot).add(function(gt){if(at.hasValue(gt)){var mt=getItemModel(at,gt),vt=getSymbolMeta(at,gt,mt,ut),yt=createBar(at,ut,vt);at.setItemGraphicEl(gt,yt),it.add(yt),updateCommon(yt,ut,vt)}}).update(function(gt,mt){var vt=ot.getItemGraphicEl(mt);if(!at.hasValue(gt)){it.remove(vt);return}var yt=getItemModel(at,gt),bt=getSymbolMeta(at,gt,yt,ut),_t=getShapeStr(at,bt);vt&&_t!==vt.__pictorialShapeStr&&(it.remove(vt),at.setItemGraphicEl(gt,null),vt=null),vt?updateBar(vt,ut,bt):vt=createBar(at,ut,bt,!0),at.setItemGraphicEl(gt,vt),vt.__pictorialSymbolMeta=bt,it.add(vt),updateCommon(vt,ut,bt)}).remove(function(gt){var mt=ot.getItemGraphicEl(gt);mt&&removeBar(ot,gt,mt.__pictorialSymbolMeta.animationModel,mt)}).execute();var ft=et.get("clip",!0)?createClipPath(et.coordinateSystem,!1,et):null;return ft?it.setClipPath(ft):it.removeClipPath(),this._data=at,this.group},_.prototype.remove=function(et,tt){var nt=this.group,it=this._data;et.get("animation")?it&&it.eachItemGraphicEl(function(at){removeBar(it,getECData(at).dataIndex,et,at)}):nt.removeAll()},_.type="pictorialBar",_}(ChartView);function getSymbolMeta(_e,_,et,tt){var nt=_e.getItemLayout(_),it=et.get("symbolRepeat"),at=et.get("symbolClip"),ot=et.get("symbolPosition")||"start",st=et.get("symbolRotate"),dt=(st||0)*Math.PI/180||0,ht=et.get("symbolPatternSize")||2,ct=et.isAnimationEnabled(),ut={dataIndex:_,layout:nt,itemModel:et,symbolType:_e.getItemVisual(_,"symbol")||"circle",style:_e.getItemVisual(_,"style"),symbolClip:at,symbolRepeat:it,symbolRepeatDirection:et.get("symbolRepeatDirection"),symbolPatternSize:ht,rotation:dt,animationModel:ct?et:null,hoverScale:ct&&et.get(["emphasis","scale"]),z2:et.getShallow("z",!0)||0};prepareBarLength(et,it,nt,tt,ut),prepareSymbolSize(_e,_,nt,it,at,ut.boundingLength,ut.pxSign,ht,tt,ut),prepareLineWidth(et,ut.symbolScale,dt,tt,ut);var ft=ut.symbolSize,gt=normalizeSymbolOffset(et.get("symbolOffset"),ft);return prepareLayoutInfo(et,ft,nt,it,at,gt,ot,ut.valueLineWidth,ut.boundingLength,ut.repeatCutLength,tt,ut),ut}function prepareBarLength(_e,_,et,tt,nt){var it=tt.valueDim,at=_e.get("symbolBoundingData"),ot=tt.coordSys.getOtherAxis(tt.coordSys.getBaseAxis()),st=ot.toGlobalCoord(ot.dataToCoord(0)),dt=1-+(et[it.wh]<=0),ht;if(isArray$1(at)){var ct=[convertToCoordOnAxis(ot,at[0])-st,convertToCoordOnAxis(ot,at[1])-st];ct[1]<ct[0]&&ct.reverse(),ht=ct[dt]}else at!=null?ht=convertToCoordOnAxis(ot,at)-st:_?ht=tt.coordSysExtent[it.index][dt]-st:ht=et[it.wh];nt.boundingLength=ht,_&&(nt.repeatCutLength=et[it.wh]);var ut=it.xy==="x",ft=ot.inverse;nt.pxSign=ut&&!ft||!ut&&ft?ht>=0?1:-1:ht>0?1:-1}function convertToCoordOnAxis(_e,_){return _e.toGlobalCoord(_e.dataToCoord(_e.scale.parse(_)))}function prepareSymbolSize(_e,_,et,tt,nt,it,at,ot,st,dt){var ht=st.valueDim,ct=st.categoryDim,ut=Math.abs(et[ct.wh]),ft=_e.getItemVisual(_,"symbolSize"),gt;isArray$1(ft)?gt=ft.slice():ft==null?gt=["100%","100%"]:gt=[ft,ft],gt[ct.index]=parsePercent(gt[ct.index],ut),gt[ht.index]=parsePercent(gt[ht.index],tt?ut:Math.abs(it)),dt.symbolSize=gt;var mt=dt.symbolScale=[gt[0]/ot,gt[1]/ot];mt[ht.index]*=(st.isHorizontal?-1:1)*at}function prepareLineWidth(_e,_,et,tt,nt){var it=_e.get(BAR_BORDER_WIDTH_QUERY)||0;it&&(pathForLineWidth.attr({scaleX:_[0],scaleY:_[1],rotation:et}),pathForLineWidth.updateTransform(),it/=pathForLineWidth.getLineScale(),it*=_[tt.valueDim.index]),nt.valueLineWidth=it||0}function prepareLayoutInfo(_e,_,et,tt,nt,it,at,ot,st,dt,ht,ct){var ut=ht.categoryDim,ft=ht.valueDim,gt=ct.pxSign,mt=Math.max(_[ft.index]+ot,0),vt=mt;if(tt){var yt=Math.abs(st),bt=retrieve(_e.get("symbolMargin"),"15%")+"",_t=!1;bt.lastIndexOf("!")===bt.length-1&&(_t=!0,bt=bt.slice(0,bt.length-1));var xt=parsePercent(bt,_[ft.index]),St=Math.max(mt+xt*2,0),Tt=_t?0:xt*2,wt=isNumeric(tt),Ct=wt?tt:toIntTimes((yt+Tt)/St),Et=yt-Ct*mt;xt=Et/2/(_t?Ct:Math.max(Ct-1,1)),St=mt+xt*2,Tt=_t?0:xt*2,!wt&&tt!=="fixed"&&(Ct=dt?toIntTimes((Math.abs(dt)+Tt)/St):0),vt=Ct*St-Tt,ct.repeatTimes=Ct,ct.symbolMargin=xt}var At=gt*(vt/2),Pt=ct.pathPosition=[];Pt[ut.index]=et[ut.wh]/2,Pt[ft.index]=at==="start"?At:at==="end"?st-At:st/2,it&&(Pt[0]+=it[0],Pt[1]+=it[1]);var Rt=ct.bundlePosition=[];Rt[ut.index]=et[ut.xy],Rt[ft.index]=et[ft.xy];var It=ct.barRectShape=extend({},et);It[ft.wh]=gt*Math.max(Math.abs(et[ft.wh]),Math.abs(Pt[ft.index]+At)),It[ut.wh]=et[ut.wh];var Mt=ct.clipShape={};Mt[ut.xy]=-et[ut.xy],Mt[ut.wh]=ht.ecSize[ut.wh],Mt[ft.xy]=0,Mt[ft.wh]=et[ft.wh]}function createPath(_e){var _=_e.symbolPatternSize,et=createSymbol$1(_e.symbolType,-_/2,-_/2,_,_);return et.attr({culling:!0}),et.type!=="image"&&et.setStyle({strokeNoScale:!0}),et}function createOrUpdateRepeatSymbols(_e,_,et,tt){var nt=_e.__pictorialBundle,it=et.symbolSize,at=et.valueLineWidth,ot=et.pathPosition,st=_.valueDim,dt=et.repeatTimes||0,ht=0,ct=it[_.valueDim.index]+at+et.symbolMargin*2;for(eachPath(_e,function(mt){mt.__pictorialAnimationIndex=ht,mt.__pictorialRepeatTimes=dt,ht<dt?updateAttr(mt,null,gt(ht),et,tt):updateAttr(mt,null,{scaleX:0,scaleY:0},et,tt,function(){nt.remove(mt)}),ht++});ht<dt;ht++){var ut=createPath(et);ut.__pictorialAnimationIndex=ht,ut.__pictorialRepeatTimes=dt,nt.add(ut);var ft=gt(ht);updateAttr(ut,{x:ft.x,y:ft.y,scaleX:0,scaleY:0},{scaleX:ft.scaleX,scaleY:ft.scaleY,rotation:ft.rotation},et,tt)}function gt(mt){var vt=ot.slice(),yt=et.pxSign,bt=mt;return(et.symbolRepeatDirection==="start"?yt>0:yt<0)&&(bt=dt-1-mt),vt[st.index]=ct*(bt-dt/2+.5)+ot[st.index],{x:vt[0],y:vt[1],scaleX:et.symbolScale[0],scaleY:et.symbolScale[1],rotation:et.rotation}}}function createOrUpdateSingleSymbol(_e,_,et,tt){var nt=_e.__pictorialBundle,it=_e.__pictorialMainPath;it?updateAttr(it,null,{x:et.pathPosition[0],y:et.pathPosition[1],scaleX:et.symbolScale[0],scaleY:et.symbolScale[1],rotation:et.rotation},et,tt):(it=_e.__pictorialMainPath=createPath(et),nt.add(it),updateAttr(it,{x:et.pathPosition[0],y:et.pathPosition[1],scaleX:0,scaleY:0,rotation:et.rotation},{scaleX:et.symbolScale[0],scaleY:et.symbolScale[1]},et,tt))}function createOrUpdateBarRect(_e,_,et){var tt=extend({},_.barRectShape),nt=_e.__pictorialBarRect;nt?updateAttr(nt,null,{shape:tt},_,et):(nt=_e.__pictorialBarRect=new Rect$2({z2:2,shape:tt,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),nt.disableMorphing=!0,_e.add(nt))}function createOrUpdateClip(_e,_,et,tt){if(et.symbolClip){var nt=_e.__pictorialClipPath,it=extend({},et.clipShape),at=_.valueDim,ot=et.animationModel,st=et.dataIndex;if(nt)updateProps$1(nt,{shape:it},ot,st);else{it[at.wh]=0,nt=new Rect$2({shape:it}),_e.__pictorialBundle.setClipPath(nt),_e.__pictorialClipPath=nt;var dt={};dt[at.wh]=et.clipShape[at.wh],graphic$1[tt?"updateProps":"initProps"](nt,{shape:dt},ot,st)}}}function getItemModel(_e,_){var et=_e.getItemModel(_);return et.getAnimationDelayParams=getAnimationDelayParams,et.isAnimationEnabled=isAnimationEnabled,et}function getAnimationDelayParams(_e){return{index:_e.__pictorialAnimationIndex,count:_e.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(_e,_,et,tt){var nt=new Group$3,it=new Group$3;return nt.add(it),nt.__pictorialBundle=it,it.x=et.bundlePosition[0],it.y=et.bundlePosition[1],et.symbolRepeat?createOrUpdateRepeatSymbols(nt,_,et):createOrUpdateSingleSymbol(nt,_,et),createOrUpdateBarRect(nt,et,tt),createOrUpdateClip(nt,_,et,tt),nt.__pictorialShapeStr=getShapeStr(_e,et),nt.__pictorialSymbolMeta=et,nt}function updateBar(_e,_,et){var tt=et.animationModel,nt=et.dataIndex,it=_e.__pictorialBundle;updateProps$1(it,{x:et.bundlePosition[0],y:et.bundlePosition[1]},tt,nt),et.symbolRepeat?createOrUpdateRepeatSymbols(_e,_,et,!0):createOrUpdateSingleSymbol(_e,_,et,!0),createOrUpdateBarRect(_e,et,!0),createOrUpdateClip(_e,_,et,!0)}function removeBar(_e,_,et,tt){var nt=tt.__pictorialBarRect;nt&&nt.removeTextContent();var it=[];eachPath(tt,function(at){it.push(at)}),tt.__pictorialMainPath&&it.push(tt.__pictorialMainPath),tt.__pictorialClipPath&&(et=null),each$f(it,function(at){removeElement(at,{scaleX:0,scaleY:0},et,_,function(){tt.parent&&tt.parent.remove(tt)})}),_e.setItemGraphicEl(_,null)}function getShapeStr(_e,_){return[_e.getItemVisual(_.dataIndex,"symbol")||"none",!!_.symbolRepeat,!!_.symbolClip].join(":")}function eachPath(_e,_,et){each$f(_e.__pictorialBundle.children(),function(tt){tt!==_e.__pictorialBarRect&&_.call(et,tt)})}function updateAttr(_e,_,et,tt,nt,it){_&&_e.attr(_),tt.symbolClip&&!nt?et&&_e.attr(et):et&&graphic$1[nt?"updateProps":"initProps"](_e,et,tt.animationModel,tt.dataIndex,it)}function updateCommon(_e,_,et){var tt=et.dataIndex,nt=et.itemModel,it=nt.getModel("emphasis"),at=it.getModel("itemStyle").getItemStyle(),ot=nt.getModel(["blur","itemStyle"]).getItemStyle(),st=nt.getModel(["select","itemStyle"]).getItemStyle(),dt=nt.getShallow("cursor"),ht=it.get("focus"),ct=it.get("blurScope"),ut=it.get("scale");eachPath(_e,function(mt){if(mt instanceof ZRImage){var vt=mt.style;mt.useStyle(extend({image:vt.image,x:vt.x,y:vt.y,width:vt.width,height:vt.height},et.style))}else mt.useStyle(et.style);var yt=mt.ensureState("emphasis");yt.style=at,ut&&(yt.scaleX=mt.scaleX*1.1,yt.scaleY=mt.scaleY*1.1),mt.ensureState("blur").style=ot,mt.ensureState("select").style=st,dt&&(mt.cursor=dt),mt.z2=et.z2});var ft=_.valueDim.posDesc[+(et.boundingLength>0)],gt=_e.__pictorialBarRect;gt.ignoreClip=!0,setLabelStyle(gt,getLabelStatesModels(nt),{labelFetcher:_.seriesModel,labelDataIndex:tt,defaultText:getDefaultLabel(_.seriesModel.getData(),tt),inheritColor:et.style.fill,defaultOpacity:et.style.opacity,defaultOutsidePosition:ft}),toggleHoverEmphasis(_e,ht,ct,it.get("disabled"))}function toIntTimes(_e){var _=Math.round(_e);return Math.abs(_e-_)<1e-4?_:Math.ceil(_e)}var PictorialBarSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.hasSymbolVisual=!0,et.defaultSymbol="roundRect",et}return _.prototype.getInitialData=function(et){return et.stack=null,_e.prototype.getInitialData.apply(this,arguments)},_.type="series.pictorialBar",_.dependencies=["grid"],_.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),_}(BaseBarSeriesModel);function install$u(_e){_e.registerChartView(PictorialBarView),_e.registerSeriesModel(PictorialBarSeriesModel),_e.registerLayout(_e.PRIORITY.VISUAL.LAYOUT,curry$1(layout$4,"pictorialBar")),_e.registerLayout(_e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et._layers=[],et}return _.prototype.render=function(et,tt,nt){var it=et.getData(),at=this,ot=this.group,st=et.getLayerSeries(),dt=it.getLayout("layoutInfo"),ht=dt.rect,ct=dt.boundaryGap;ot.x=0,ot.y=ht.y+ct[0];function ut(vt){return vt.name}var ft=new DataDiffer(this._layersSeries||[],st,ut,ut),gt=[];ft.add(bind$2(mt,this,"add")).update(bind$2(mt,this,"update")).remove(bind$2(mt,this,"remove")).execute();function mt(vt,yt,bt){var _t=at._layers;if(vt==="remove"){ot.remove(_t[yt]);return}for(var xt=[],St=[],Tt,wt=st[yt].indices,Ct=0;Ct<wt.length;Ct++){var Et=it.getItemLayout(wt[Ct]),At=Et.x,Pt=Et.y0,Rt=Et.y;xt.push(At,Pt),St.push(At,Pt+Rt),Tt=it.getItemVisual(wt[Ct],"style")}var It,Mt=it.getItemLayout(wt[0]),Ot=et.getModel("label"),$t=Ot.get("margin"),Lt=et.getModel("emphasis");if(vt==="add"){var kt=gt[yt]=new Group$3;It=new ECPolygon({shape:{points:xt,stackedOnPoints:St,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),kt.add(It),ot.add(kt),et.isAnimationEnabled()&&It.setClipPath(createGridClipShape(It.getBoundingRect(),et,function(){It.removeClipPath()}))}else{var kt=_t[bt];It=kt.childAt(0),ot.add(kt),gt[yt]=kt,updateProps$1(It,{shape:{points:xt,stackedOnPoints:St}},et),saveOldStyle(It)}setLabelStyle(It,getLabelStatesModels(et),{labelDataIndex:wt[Ct-1],defaultText:it.getName(wt[Ct-1]),inheritColor:Tt.fill},{normal:{verticalAlign:"middle"}}),It.setTextConfig({position:null,local:!0});var Nt=It.getTextContent();Nt&&(Nt.x=Mt.x-$t,Nt.y=Mt.y0+Mt.y/2),It.useStyle(Tt),it.setItemGraphicEl(yt,It),setStatesStylesFromModel(It,et),toggleHoverEmphasis(It,Lt.get("focus"),Lt.get("blurScope"),Lt.get("disabled"))}this._layersSeries=st,this._layers=gt},_.type="themeRiver",_}(ChartView);function createGridClipShape(_e,_,et){var tt=new Rect$2({shape:{x:_e.x-10,y:_e.y-10,width:0,height:_e.height+20}});return initProps(tt,{shape:{x:_e.x-50,width:_e.width+100,height:_e.height+20}},_,et),tt}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(et){_e.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$2(this.getData,this),bind$2(this.getRawData,this))},_.prototype.fixData=function(et){var tt=et.length,nt={},it=groupData(et,function(ut){return nt.hasOwnProperty(ut[0]+"")||(nt[ut[0]+""]=-1),ut[2]}),at=[];it.buckets.each(function(ut,ft){at.push({name:ft,dataList:ut})});for(var ot=at.length,st=0;st<ot;++st){for(var dt=at[st].name,ht=0;ht<at[st].dataList.length;++ht){var ct=at[st].dataList[ht][0]+"";nt[ct]=st}for(var ct in nt)nt.hasOwnProperty(ct)&&nt[ct]!==st&&(nt[ct]=st,et[tt]=[ct,0,dt],tt++)}return et},_.prototype.getInitialData=function(et,tt){for(var nt=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],it=nt.get("type"),at=filter$1(et.data,function(gt){return gt[2]!==void 0}),ot=this.fixData(at||[]),st=[],dt=this.nameMap=createHashMap(),ht=0,ct=0;ct<ot.length;++ct)st.push(ot[ct][DATA_NAME_INDEX]),dt.get(ot[ct][DATA_NAME_INDEX])||(dt.set(ot[ct][DATA_NAME_INDEX],ht),ht++);var ut=prepareSeriesDataSchema(ot,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(it)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,ft=new SeriesData(ut,this);return ft.initData(ot),ft},_.prototype.getLayerSeries=function(){for(var et=this.getData(),tt=et.count(),nt=[],it=0;it<tt;++it)nt[it]=it;var at=et.mapDimension("single"),ot=groupData(nt,function(dt){return et.get("name",dt)}),st=[];return ot.buckets.each(function(dt,ht){dt.sort(function(ct,ut){return et.get(at,ct)-et.get(at,ut)}),st.push({name:ht,indices:dt})}),st},_.prototype.getAxisTooltipData=function(et,tt,nt){isArray$1(et)||(et=et?[et]:[]);for(var it=this.getData(),at=this.getLayerSeries(),ot=[],st=at.length,dt,ht=0;ht<st;++ht){for(var ct=Number.MAX_VALUE,ut=-1,ft=at[ht].indices.length,gt=0;gt<ft;++gt){var mt=it.get(et[0],at[ht].indices[gt]),vt=Math.abs(mt-tt);vt<=ct&&(dt=mt,ct=vt,ut=at[ht].indices[gt])}ot.push(ut)}return{dataIndices:ot,nestestValue:dt}},_.prototype.formatTooltip=function(et,tt,nt){var it=this.getData(),at=it.getName(et),ot=it.get(it.mapDimension("value"),et);return createTooltipMarkup("nameValue",{name:at,value:ot})},_.type="series.themeRiver",_.dependencies=["singleAxis"],_.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},_}(SeriesModel);function themeRiverLayout(_e,_){_e.eachSeriesByType("themeRiver",function(et){var tt=et.getData(),nt=et.coordinateSystem,it={},at=nt.getRect();it.rect=at;var ot=et.get("boundaryGap"),st=nt.getAxis();if(it.boundaryGap=ot,st.orient==="horizontal"){ot[0]=parsePercent(ot[0],at.height),ot[1]=parsePercent(ot[1],at.height);var dt=at.height-ot[0]-ot[1];doThemeRiverLayout(tt,et,dt)}else{ot[0]=parsePercent(ot[0],at.width),ot[1]=parsePercent(ot[1],at.width);var ht=at.width-ot[0]-ot[1];doThemeRiverLayout(tt,et,ht)}tt.setLayout("layoutInfo",it)})}function doThemeRiverLayout(_e,_,et){if(_e.count())for(var tt=_.coordinateSystem,nt=_.getLayerSeries(),it=_e.mapDimension("single"),at=_e.mapDimension("value"),ot=map$1(nt,function(vt){return map$1(vt.indices,function(yt){var bt=tt.dataToPoint(_e.get(it,yt));return bt[1]=_e.get(at,yt),bt})}),st=computeBaseline(ot),dt=st.y0,ht=et/st.max,ct=nt.length,ut=nt[0].indices.length,ft,gt=0;gt<ut;++gt){ft=dt[gt]*ht,_e.setItemLayout(nt[0].indices[gt],{layerIndex:0,x:ot[0][gt][0],y0:ft,y:ot[0][gt][1]*ht});for(var mt=1;mt<ct;++mt)ft+=ot[mt-1][gt][1]*ht,_e.setItemLayout(nt[mt].indices[gt],{layerIndex:mt,x:ot[mt][gt][0],y0:ft,y:ot[mt][gt][1]*ht})}}function computeBaseline(_e){for(var _=_e.length,et=_e[0].length,tt=[],nt=[],it=0,at=0;at<et;++at){for(var ot=0,st=0;st<_;++st)ot+=_e[st][at][1];ot>it&&(it=ot),tt.push(ot)}for(var dt=0;dt<et;++dt)nt[dt]=(it-tt[dt])/2;it=0;for(var ht=0;ht<et;++ht){var ct=tt[ht]+nt[ht];ct>it&&(it=ct)}return{y0:nt,max:it}}function install$t(_e){_e.registerChartView(ThemeRiverView),_e.registerSeriesModel(ThemeRiverSeriesModel),_e.registerLayout(themeRiverLayout),_e.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(_e){__extends$1(_,_e);function _(et,tt,nt,it){var at=_e.call(this)||this;at.z2=DEFAULT_SECTOR_Z,at.textConfig={inside:!0},getECData(at).seriesIndex=tt.seriesIndex;var ot=new ZRText({z2:DEFAULT_TEXT_Z,silent:et.getModel().get(["label","silent"])});return at.setTextContent(ot),at.updateData(!0,et,tt,nt,it),at}return _.prototype.updateData=function(et,tt,nt,it,at){this.node=tt,tt.piece=this,nt=nt||this._seriesModel,it=it||this._ecModel;var ot=this;getECData(ot).dataIndex=tt.dataIndex;var st=tt.getModel(),dt=st.getModel("emphasis"),ht=tt.getLayout(),ct=extend({},ht);ct.label=null;var ut=tt.getVisual("style");ut.lineJoin="bevel";var ft=tt.getVisual("decal");ft&&(ut.decal=createOrUpdatePatternFromDecal(ft,at));var gt=getSectorCornerRadius(st.getModel("itemStyle"),ct,!0);extend(ct,gt),each$f(SPECIAL_STATES,function(bt){var _t=ot.ensureState(bt),xt=st.getModel([bt,"itemStyle"]);_t.style=xt.getItemStyle();var St=getSectorCornerRadius(xt,ct);St&&(_t.shape=St)}),et?(ot.setShape(ct),ot.shape.r=ht.r0,initProps(ot,{shape:{r:ht.r}},nt,tt.dataIndex)):(updateProps$1(ot,{shape:ct},nt),saveOldStyle(ot)),ot.useStyle(ut),this._updateLabel(nt);var mt=st.getShallow("cursor");mt&&ot.attr("cursor",mt),this._seriesModel=nt||this._seriesModel,this._ecModel=it||this._ecModel;var vt=dt.get("focus"),yt=vt==="relative"?concatArray(tt.getAncestorsIndices(),tt.getDescendantIndices()):vt==="ancestor"?tt.getAncestorsIndices():vt==="descendant"?tt.getDescendantIndices():vt;toggleHoverEmphasis(this,yt,dt.get("blurScope"),dt.get("disabled"))},_.prototype._updateLabel=function(et){var tt=this,nt=this.node.getModel(),it=nt.getModel("label"),at=this.node.getLayout(),ot=at.endAngle-at.startAngle,st=(at.startAngle+at.endAngle)/2,dt=Math.cos(st),ht=Math.sin(st),ct=this,ut=ct.getTextContent(),ft=this.node.dataIndex,gt=it.get("minAngle")/180*Math.PI,mt=it.get("show")&&!(gt!=null&&Math.abs(ot)<gt);ut.ignore=!mt,each$f(DISPLAY_STATES,function(yt){var bt=yt==="normal"?nt.getModel("label"):nt.getModel([yt,"label"]),_t=yt==="normal",xt=_t?ut:ut.ensureState(yt),St=et.getFormattedLabel(ft,yt);_t&&(St=St||tt.node.name),xt.style=createTextStyle$1(bt,{},null,yt!=="normal",!0),St&&(xt.style.text=St);var Tt=bt.get("show");Tt!=null&&!_t&&(xt.ignore=!Tt);var wt=vt(bt,"position"),Ct=_t?ct:ct.states[yt],Et=Ct.style.fill;Ct.textConfig={outsideFill:bt.get("color")==="inherit"?Et:null,inside:wt!=="outside"};var At,Pt=vt(bt,"distance")||0,Rt=vt(bt,"align"),It=vt(bt,"rotate"),Mt=Math.PI*.5,Ot=Math.PI*1.5,$t=normalizeRadian(It==="tangential"?Math.PI/2-st:st),Lt=$t>Mt&&!isRadianAroundZero($t-Mt)&&$t<Ot;wt==="outside"?(At=at.r+Pt,Rt=Lt?"right":"left"):!Rt||Rt==="center"?(ot===2*Math.PI&&at.r0===0?At=0:At=(at.r+at.r0)/2,Rt="center"):Rt==="left"?(At=at.r0+Pt,Rt=Lt?"right":"left"):Rt==="right"&&(At=at.r-Pt,Rt=Lt?"left":"right"),xt.style.align=Rt,xt.style.verticalAlign=vt(bt,"verticalAlign")||"middle",xt.x=At*dt+at.cx,xt.y=At*ht+at.cy;var kt=0;It==="radial"?kt=normalizeRadian(-st)+(Lt?Math.PI:0):It==="tangential"?kt=normalizeRadian(Math.PI/2-st)+(Lt?Math.PI:0):isNumber(It)&&(kt=It*Math.PI/180),xt.rotation=normalizeRadian(kt)});function vt(yt,bt){var _t=yt.get(bt);return _t??it.get(bt)}ut.dirtyStyle()},_}(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(_e){_e.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(_,et){et.eachComponent({mainType:"series",subType:"sunburst",query:_},tt);function tt(nt,it){var at=retrieveTargetInfo(_,[ROOT_TO_NODE_ACTION],nt);if(at){var ot=nt.getViewRoot();ot&&(_.direction=aboveViewRoot(ot,at.node)?"rollUp":"drillDown"),nt.resetViewRoot(at.node)}}}),_e.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(_,et,tt){_=extend({},_),et.eachComponent({mainType:"series",subType:"sunburst",query:_},nt);function nt(it){var at=retrieveTargetInfo(_,[HIGHLIGHT_ACTION],it);at&&(_.dataIndex=at.node.dataIndex)}tt.dispatchAction(extend(_,{type:"highlight"}))}),_e.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(_,et,tt){_=extend({},_),tt.dispatchAction(extend(_,{type:"downplay"}))})}var SunburstView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt,it){var at=this;this.seriesModel=et,this.api=nt,this.ecModel=tt;var ot=et.getData(),st=ot.tree.root,dt=et.getViewRoot(),ht=this.group,ct=et.get("renderLabelForZeroData"),ut=[];dt.eachNode(function(bt){ut.push(bt)});var ft=this._oldChildren||[];gt(ut,ft),yt(st,dt),this._initEvents(),this._oldChildren=ut;function gt(bt,_t){if(bt.length===0&&_t.length===0)return;new DataDiffer(_t,bt,xt,xt).add(St).update(St).remove(curry$1(St,null)).execute();function xt(Tt){return Tt.getId()}function St(Tt,wt){var Ct=Tt==null?null:bt[Tt],Et=wt==null?null:_t[wt];mt(Ct,Et)}}function mt(bt,_t){if(!ct&&bt&&!bt.getValue()&&(bt=null),bt!==st&&_t!==st){if(_t&&_t.piece)bt?(_t.piece.updateData(!1,bt,et,tt,nt),ot.setItemGraphicEl(bt.dataIndex,_t.piece)):vt(_t);else if(bt){var xt=new SunburstPiece(bt,et,tt,nt);ht.add(xt),ot.setItemGraphicEl(bt.dataIndex,xt)}}}function vt(bt){bt&&bt.piece&&(ht.remove(bt.piece),bt.piece=null)}function yt(bt,_t){_t.depth>0?(at.virtualPiece?at.virtualPiece.updateData(!1,bt,et,tt,nt):(at.virtualPiece=new SunburstPiece(bt,et,tt,nt),ht.add(at.virtualPiece)),_t.piece.off("click"),at.virtualPiece.on("click",function(xt){at._rootToNode(_t.parentNode)})):at.virtualPiece&&(ht.remove(at.virtualPiece),at.virtualPiece=null)}},_.prototype._initEvents=function(){var et=this;this.group.off("click"),this.group.on("click",function(tt){var nt=!1,it=et.seriesModel.getViewRoot();it.eachNode(function(at){if(!nt&&at.piece&&at.piece===tt.target){var ot=at.getModel().get("nodeClick");if(ot==="rootToNode")et._rootToNode(at);else if(ot==="link"){var st=at.getModel(),dt=st.get("link");if(dt){var ht=st.get("target",!0)||"_blank";windowOpen(dt,ht)}}nt=!0}})})},_.prototype._rootToNode=function(et){et!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:et})},_.prototype.containPoint=function(et,tt){var nt=tt.getData(),it=nt.getItemLayout(0);if(it){var at=et[0]-it.cx,ot=et[1]-it.cy,st=Math.sqrt(at*at+ot*ot);return st<=it.r&&st>=it.r0}},_.type="sunburst",_}(ChartView),SunburstSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.ignoreStyleOnData=!0,et}return _.prototype.getInitialData=function(et,tt){var nt={name:et.name,children:et.data};completeTreeValue(nt);var it=this._levelModels=map$1(et.levels||[],function(st){return new Model(st,this,tt)},this),at=Tree.createTree(nt,this,ot);function ot(st){st.wrapMethod("getItemModel",function(dt,ht){var ct=at.getNodeByDataIndex(ht),ut=it[ct.depth];return ut&&(dt.parentModel=ut),dt})}return at.data},_.prototype.optionUpdated=function(){this.resetViewRoot()},_.prototype.getDataParams=function(et){var tt=_e.prototype.getDataParams.apply(this,arguments),nt=this.getData().tree.getNodeByDataIndex(et);return tt.treePathInfo=wrapTreePathInfo(nt,this),tt},_.prototype.getLevelModel=function(et){return this._levelModels&&this._levelModels[et.depth]},_.prototype.getViewRoot=function(){return this._viewRoot},_.prototype.resetViewRoot=function(et){et?this._viewRoot=et:et=this._viewRoot;var tt=this.getRawData().tree.root;(!et||et!==tt&&!tt.contains(et))&&(this._viewRoot=tt)},_.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},_.type="series.sunburst",_.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},_}(SeriesModel);function completeTreeValue(_e){var _=0;each$f(_e.children,function(tt){completeTreeValue(tt);var nt=tt.value;isArray$1(nt)&&(nt=nt[0]),_+=nt});var et=_e.value;isArray$1(et)&&(et=et[0]),(et==null||isNaN(et))&&(et=_),et<0&&(et=0),isArray$1(_e.value)?_e.value[0]=et:_e.value=et}var RADIAN=Math.PI/180;function sunburstLayout(_e,_,et){_.eachSeriesByType(_e,function(tt){var nt=tt.get("center"),it=tt.get("radius");isArray$1(it)||(it=[0,it]),isArray$1(nt)||(nt=[nt,nt]);var at=et.getWidth(),ot=et.getHeight(),st=Math.min(at,ot),dt=parsePercent(nt[0],at),ht=parsePercent(nt[1],ot),ct=parsePercent(it[0],st/2),ut=parsePercent(it[1],st/2),ft=-tt.get("startAngle")*RADIAN,gt=tt.get("minAngle")*RADIAN,mt=tt.getData().tree.root,vt=tt.getViewRoot(),yt=vt.depth,bt=tt.get("sort");bt!=null&&initChildren(vt,bt);var _t=0;each$f(vt.children,function($t){!isNaN($t.getValue())&&_t++});var xt=vt.getValue(),St=Math.PI/(xt||_t)*2,Tt=vt.depth>0,wt=vt.height-(Tt?-1:1),Ct=(ut-ct)/(wt||1),Et=tt.get("clockwise"),At=tt.get("stillShowZeroSum"),Pt=Et?1:-1,Rt=function($t,Lt){if($t){var kt=Lt;if($t!==mt){var Nt=$t.getValue(),Vt=xt===0&&At?St:Nt*St;Vt<gt&&(Vt=gt),kt=Lt+Pt*Vt;var zt=$t.depth-yt-(Tt?-1:1),Xt=ct+Ct*zt,Wt=ct+Ct*(zt+1),nr=tt.getLevelModel($t);if(nr){var Jt=nr.get("r0",!0),lr=nr.get("r",!0),pr=nr.get("radius",!0);pr!=null&&(Jt=pr[0],lr=pr[1]),Jt!=null&&(Xt=parsePercent(Jt,st/2)),lr!=null&&(Wt=parsePercent(lr,st/2))}$t.setLayout({angle:Vt,startAngle:Lt,endAngle:kt,clockwise:Et,cx:dt,cy:ht,r0:Xt,r:Wt})}if($t.children&&$t.children.length){var Zt=0;each$f($t.children,function(Kt){Zt+=Rt(Kt,Lt+Zt)})}return kt-Lt}};if(Tt){var It=ct,Mt=ct+Ct,Ot=Math.PI*2;mt.setLayout({angle:Ot,startAngle:ft,endAngle:ft+Ot,clockwise:Et,cx:dt,cy:ht,r0:It,r:Mt})}Rt(vt,ft)})}function initChildren(_e,_){var et=_e.children||[];_e.children=sort(et,_),et.length&&each$f(_e.children,function(tt){initChildren(tt,_)})}function sort(_e,_){if(isFunction$3(_)){var et=map$1(_e,function(nt,it){var at=nt.getValue();return{params:{depth:nt.depth,height:nt.height,dataIndex:nt.dataIndex,getValue:function(){return at}},index:it}});return et.sort(function(nt,it){return _(nt.params,it.params)}),map$1(et,function(nt){return _e[nt.index]})}else{var tt=_==="asc";return _e.sort(function(nt,it){var at=(nt.getValue()-it.getValue())*(tt?1:-1);return at===0?(nt.dataIndex-it.dataIndex)*(tt?-1:1):at})}}function sunburstVisual(_e){var _={};function et(tt,nt,it){for(var at=tt;at&&at.depth>1;)at=at.parentNode;var ot=nt.getColorFromPalette(at.name||at.dataIndex+"",_);return tt.depth>1&&isString$1(ot)&&(ot=lift(ot,(tt.depth-1)/(it-1)*.5)),ot}_e.eachSeriesByType("sunburst",function(tt){var nt=tt.getData(),it=nt.tree;it.eachNode(function(at){var ot=at.getModel(),st=ot.getModel("itemStyle").getItemStyle();st.fill||(st.fill=et(at,tt,it.root.height));var dt=nt.ensureUniqueItemVisual(at.dataIndex,"style");extend(dt,st)})})}function install$s(_e){_e.registerChartView(SunburstView),_e.registerSeriesModel(SunburstSeriesModel),_e.registerLayout(curry$1(sunburstLayout,"sunburst")),_e.registerProcessor(curry$1(dataFilter$1,"sunburst")),_e.registerVisual(sunburstVisual),installSunburstAction(_e)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},_.prototype.getInitialData=function(et,tt){return createSeriesData(null,this)},_.prototype.getDataParams=function(et,tt,nt){var it=_e.prototype.getDataParams.call(this,et,tt);return nt&&(it.info=customInnerStore(nt).info),it},_.type="series.custom",_.dependencies=["grid","polar","geo","singleAxis","calendar"],_.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},_}(SeriesModel);function dataToCoordSize$3(_e,_){return _=_||[0,0],map$1(["x","y"],function(et,tt){var nt=this.getAxis(et),it=_[tt],at=_e[tt]/2;return nt.type==="category"?nt.getBandWidth():Math.abs(nt.dataToCoord(it-at)-nt.dataToCoord(it+at))},this)}function cartesianPrepareCustom(_e){var _=_e.master.getRect();return{coordSys:{type:"cartesian2d",x:_.x,y:_.y,width:_.width,height:_.height},api:{coord:function(et){return _e.dataToPoint(et)},size:bind$2(dataToCoordSize$3,_e)}}}function dataToCoordSize$2(_e,_){return _=_||[0,0],map$1([0,1],function(et){var tt=_[et],nt=_e[et]/2,it=[],at=[];return it[et]=tt-nt,at[et]=tt+nt,it[1-et]=at[1-et]=_[1-et],Math.abs(this.dataToPoint(it)[et]-this.dataToPoint(at)[et])},this)}function geoPrepareCustom(_e){var _=_e.getBoundingRect();return{coordSys:{type:"geo",x:_.x,y:_.y,width:_.width,height:_.height,zoom:_e.getZoom()},api:{coord:function(et){return _e.dataToPoint(et)},size:bind$2(dataToCoordSize$2,_e)}}}function dataToCoordSize$1(_e,_){var et=this.getAxis(),tt=_ instanceof Array?_[0]:_,nt=(_e instanceof Array?_e[0]:_e)/2;return et.type==="category"?et.getBandWidth():Math.abs(et.dataToCoord(tt-nt)-et.dataToCoord(tt+nt))}function singlePrepareCustom(_e){var _=_e.getRect();return{coordSys:{type:"singleAxis",x:_.x,y:_.y,width:_.width,height:_.height},api:{coord:function(et){return _e.dataToPoint(et)},size:bind$2(dataToCoordSize$1,_e)}}}function dataToCoordSize(_e,_){return _=_||[0,0],map$1(["Radius","Angle"],function(et,tt){var nt="get"+et+"Axis",it=this[nt](),at=_[tt],ot=_e[tt]/2,st=it.type==="category"?it.getBandWidth():Math.abs(it.dataToCoord(at-ot)-it.dataToCoord(at+ot));return et==="Angle"&&(st=st*Math.PI/180),st},this)}function polarPrepareCustom(_e){var _=_e.getRadiusAxis(),et=_e.getAngleAxis(),tt=_.getExtent();return tt[0]>tt[1]&&tt.reverse(),{coordSys:{type:"polar",cx:_e.cx,cy:_e.cy,r:tt[1],r0:tt[0]},api:{coord:function(nt){var it=_.dataToRadius(nt[0]),at=et.dataToAngle(nt[1]),ot=_e.coordToPoint([it,at]);return ot.push(it,at*Math.PI/180),ot},size:bind$2(dataToCoordSize,_e)}}}function calendarPrepareCustom(_e){var _=_e.getRect(),et=_e.getRangeInfo();return{coordSys:{type:"calendar",x:_.x,y:_.y,width:_.width,height:_.height,cellWidth:_e.getCellWidth(),cellHeight:_e.getCellHeight(),rangeInfo:{start:et.start,end:et.end,weeks:et.weeks,dayCount:et.allDay}},api:{coord:function(tt,nt){return _e.dataToPoint(tt,nt)}}}}function isEC4CompatibleStyle(_e,_,et,tt){return _e&&(_e.legacy||_e.legacy!==!1&&!et&&!tt&&_!=="tspan"&&(_==="text"||hasOwn(_e,"text")))}function convertFromEC4CompatibleStyle(_e,_,et){var tt=_e,nt,it,at;if(_==="text")at=tt;else{at={},hasOwn(tt,"text")&&(at.text=tt.text),hasOwn(tt,"rich")&&(at.rich=tt.rich),hasOwn(tt,"textFill")&&(at.fill=tt.textFill),hasOwn(tt,"textStroke")&&(at.stroke=tt.textStroke),hasOwn(tt,"fontFamily")&&(at.fontFamily=tt.fontFamily),hasOwn(tt,"fontSize")&&(at.fontSize=tt.fontSize),hasOwn(tt,"fontStyle")&&(at.fontStyle=tt.fontStyle),hasOwn(tt,"fontWeight")&&(at.fontWeight=tt.fontWeight),it={type:"text",style:at,silent:!0},nt={};var ot=hasOwn(tt,"textPosition");et?nt.position=ot?tt.textPosition:"inside":ot&&(nt.position=tt.textPosition),hasOwn(tt,"textPosition")&&(nt.position=tt.textPosition),hasOwn(tt,"textOffset")&&(nt.offset=tt.textOffset),hasOwn(tt,"textRotation")&&(nt.rotation=tt.textRotation),hasOwn(tt,"textDistance")&&(nt.distance=tt.textDistance)}return convertEC4CompatibleRichItem(at,_e),each$f(at.rich,function(st){convertEC4CompatibleRichItem(st,st)}),{textConfig:nt,textContent:it}}function convertEC4CompatibleRichItem(_e,_){_&&(_.font=_.textFont||_.font,hasOwn(_,"textStrokeWidth")&&(_e.lineWidth=_.textStrokeWidth),hasOwn(_,"textAlign")&&(_e.align=_.textAlign),hasOwn(_,"textVerticalAlign")&&(_e.verticalAlign=_.textVerticalAlign),hasOwn(_,"textLineHeight")&&(_e.lineHeight=_.textLineHeight),hasOwn(_,"textWidth")&&(_e.width=_.textWidth),hasOwn(_,"textHeight")&&(_e.height=_.textHeight),hasOwn(_,"textBackgroundColor")&&(_e.backgroundColor=_.textBackgroundColor),hasOwn(_,"textPadding")&&(_e.padding=_.textPadding),hasOwn(_,"textBorderColor")&&(_e.borderColor=_.textBorderColor),hasOwn(_,"textBorderWidth")&&(_e.borderWidth=_.textBorderWidth),hasOwn(_,"textBorderRadius")&&(_e.borderRadius=_.textBorderRadius),hasOwn(_,"textBoxShadowColor")&&(_e.shadowColor=_.textBoxShadowColor),hasOwn(_,"textBoxShadowBlur")&&(_e.shadowBlur=_.textBoxShadowBlur),hasOwn(_,"textBoxShadowOffsetX")&&(_e.shadowOffsetX=_.textBoxShadowOffsetX),hasOwn(_,"textBoxShadowOffsetY")&&(_e.shadowOffsetY=_.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(_e,_,et){var tt=_e;tt.textPosition=tt.textPosition||et.position||"inside",et.offset!=null&&(tt.textOffset=et.offset),et.rotation!=null&&(tt.textRotation=et.rotation),et.distance!=null&&(tt.textDistance=et.distance);var nt=tt.textPosition.indexOf("inside")>=0,it=_e.fill||"#000";convertToEC4RichItem(tt,_);var at=tt.textFill==null;return nt?at&&(tt.textFill=et.insideFill||"#fff",!tt.textStroke&&et.insideStroke&&(tt.textStroke=et.insideStroke),!tt.textStroke&&(tt.textStroke=it),tt.textStrokeWidth==null&&(tt.textStrokeWidth=2)):(at&&(tt.textFill=_e.fill||et.outsideFill||"#000"),!tt.textStroke&&et.outsideStroke&&(tt.textStroke=et.outsideStroke)),tt.text=_.text,tt.rich=_.rich,each$f(_.rich,function(ot){convertToEC4RichItem(ot,ot)}),tt}function convertToEC4RichItem(_e,_){_&&(hasOwn(_,"fill")&&(_e.textFill=_.fill),hasOwn(_,"stroke")&&(_e.textStroke=_.fill),hasOwn(_,"lineWidth")&&(_e.textStrokeWidth=_.lineWidth),hasOwn(_,"font")&&(_e.font=_.font),hasOwn(_,"fontStyle")&&(_e.fontStyle=_.fontStyle),hasOwn(_,"fontWeight")&&(_e.fontWeight=_.fontWeight),hasOwn(_,"fontSize")&&(_e.fontSize=_.fontSize),hasOwn(_,"fontFamily")&&(_e.fontFamily=_.fontFamily),hasOwn(_,"align")&&(_e.textAlign=_.align),hasOwn(_,"verticalAlign")&&(_e.textVerticalAlign=_.verticalAlign),hasOwn(_,"lineHeight")&&(_e.textLineHeight=_.lineHeight),hasOwn(_,"width")&&(_e.textWidth=_.width),hasOwn(_,"height")&&(_e.textHeight=_.height),hasOwn(_,"backgroundColor")&&(_e.textBackgroundColor=_.backgroundColor),hasOwn(_,"padding")&&(_e.textPadding=_.padding),hasOwn(_,"borderColor")&&(_e.textBorderColor=_.borderColor),hasOwn(_,"borderWidth")&&(_e.textBorderWidth=_.borderWidth),hasOwn(_,"borderRadius")&&(_e.textBorderRadius=_.borderRadius),hasOwn(_,"shadowColor")&&(_e.textBoxShadowColor=_.shadowColor),hasOwn(_,"shadowBlur")&&(_e.textBoxShadowBlur=_.shadowBlur),hasOwn(_,"shadowOffsetX")&&(_e.textBoxShadowOffsetX=_.shadowOffsetX),hasOwn(_,"shadowOffsetY")&&(_e.textBoxShadowOffsetY=_.shadowOffsetY),hasOwn(_,"textShadowColor")&&(_e.textShadowColor=_.textShadowColor),hasOwn(_,"textShadowBlur")&&(_e.textShadowBlur=_.textShadowBlur),hasOwn(_,"textShadowOffsetX")&&(_e.textShadowOffsetX=_.textShadowOffsetX),hasOwn(_,"textShadowOffsetY")&&(_e.textShadowOffsetY=_.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(_e,_){return _e[_]=1,_e},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(_e,_,et,tt,nt){var it=_e+"Animation",at=getAnimationConfig(_e,tt,nt)||{},ot=transitionInnerStore(_).userDuring;return at.duration>0&&(at.during=ot?bind$2(duringCall,{el:_,userDuring:ot}):null,at.setToFinal=!0,at.scope=_e),extend(at,et[it]),at}function applyUpdateTransition(_e,_,et,tt){tt=tt||{};var nt=tt.dataIndex,it=tt.isInit,at=tt.clearStyle,ot=et.isAnimationEnabled(),st=transitionInnerStore(_e),dt=_.style;st.userDuring=_.during;var ht={},ct={};if(prepareTransformAllPropsFinal(_e,_,ct),prepareShapeOrExtraAllPropsFinal("shape",_,ct),prepareShapeOrExtraAllPropsFinal("extra",_,ct),!it&&ot&&(prepareTransformTransitionFrom(_e,_,ht),prepareShapeOrExtraTransitionFrom("shape",_e,_,ht),prepareShapeOrExtraTransitionFrom("extra",_e,_,ht),prepareStyleTransitionFrom(_e,_,dt,ht)),ct.style=dt,applyPropsDirectly(_e,ct,at),applyMiscProps(_e,_),ot)if(it){var ut={};each$f(ELEMENT_ANIMATABLE_PROPS,function(gt){var mt=gt?_[gt]:_;mt&&mt.enterFrom&&(gt&&(ut[gt]=ut[gt]||{}),extend(gt?ut[gt]:ut,mt.enterFrom))});var ft=getElementAnimationConfig("enter",_e,_,et,nt);ft.duration>0&&_e.animateFrom(ut,ft)}else applyPropsTransition(_e,_,nt||0,et,ht);updateLeaveTo(_e,_),dt?_e.dirty():_e.markRedraw()}function updateLeaveTo(_e,_){for(var et=transitionInnerStore(_e).leaveToProps,tt=0;tt<ELEMENT_ANIMATABLE_PROPS.length;tt++){var nt=ELEMENT_ANIMATABLE_PROPS[tt],it=nt?_[nt]:_;it&&it.leaveTo&&(et||(et=transitionInnerStore(_e).leaveToProps={}),nt&&(et[nt]=et[nt]||{}),extend(nt?et[nt]:et,it.leaveTo))}}function applyLeaveTransition(_e,_,et,tt){if(_e){var nt=_e.parent,it=transitionInnerStore(_e).leaveToProps;if(it){var at=getElementAnimationConfig("update",_e,_,et,0);at.done=function(){nt.remove(_e)},_e.animateTo(it,at)}else nt.remove(_e)}}function isTransitionAll(_e){return _e==="all"}function applyPropsDirectly(_e,_,et){var tt=_.style;if(!_e.isGroup&&tt){if(et){_e.useStyle({});for(var nt=_e.animators,it=0;it<nt.length;it++){var at=nt[it];at.targetName==="style"&&at.changeTarget(_e.style)}}_e.setStyle(tt)}_.style=null,_e.attr(_),_.style=tt}function applyPropsTransition(_e,_,et,tt,nt){{var it=getElementAnimationConfig("update",_e,_,tt,et);it.duration>0&&_e.animateFrom(nt,it)}}function applyMiscProps(_e,_){hasOwn(_,"silent")&&(_e.silent=_.silent),hasOwn(_,"ignore")&&(_e.ignore=_.ignore),_e instanceof Displayable&&hasOwn(_,"invisible")&&(_e.invisible=_.invisible),_e instanceof Path&&hasOwn(_,"autoBatch")&&(_e.autoBatch=_.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(_e,_){return tmpDuringScope.el[_e]=_,this},getTransform:function(_e){return tmpDuringScope.el[_e]},setShape:function(_e,_){var et=tmpDuringScope.el,tt=et.shape||(et.shape={});return tt[_e]=_,et.dirtyShape&&et.dirtyShape(),this},getShape:function(_e){var _=tmpDuringScope.el.shape;if(_)return _[_e]},setStyle:function(_e,_){var et=tmpDuringScope.el,tt=et.style;return tt&&(tt[_e]=_,et.dirtyStyle&&et.dirtyStyle()),this},getStyle:function(_e){var _=tmpDuringScope.el.style;if(_)return _[_e]},setExtra:function(_e,_){var et=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return et[_e]=_,this},getExtra:function(_e){var _=tmpDuringScope.el.extra;if(_)return _[_e]}};function duringCall(){var _e=this,_=_e.el;if(_){var et=transitionInnerStore(_).userDuring,tt=_e.userDuring;if(et!==tt){_e.el=_e.userDuring=null;return}tmpDuringScope.el=_,tt(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(_e,_,et,tt){var nt=et[_e];if(nt){var it=_[_e],at;if(it){var ot=et.transition,st=nt.transition;if(st)if(!at&&(at=tt[_e]={}),isTransitionAll(st))extend(at,it);else for(var dt=normalizeToArray(st),ht=0;ht<dt.length;ht++){var ct=dt[ht],ut=it[ct];at[ct]=ut}else if(isTransitionAll(ot)||indexOf(ot,_e)>=0){!at&&(at=tt[_e]={});for(var ft=keys(it),ht=0;ht<ft.length;ht++){var ct=ft[ht],ut=it[ct];isNonStyleTransitionEnabled(nt[ct],ut)&&(at[ct]=ut)}}}}}function prepareShapeOrExtraAllPropsFinal(_e,_,et){var tt=_[_e];if(tt)for(var nt=et[_e]={},it=keys(tt),at=0;at<it.length;at++){var ot=it[at];nt[ot]=cloneValue(tt[ot])}}function prepareTransformTransitionFrom(_e,_,et){for(var tt=_.transition,nt=isTransitionAll(tt)?TRANSFORMABLE_PROPS:normalizeToArray(tt||[]),it=0;it<nt.length;it++){var at=nt[it];if(!(at==="style"||at==="shape"||at==="extra")){var ot=_e[at];et[at]=ot}}}function prepareTransformAllPropsFinal(_e,_,et){for(var tt=0;tt<LEGACY_TRANSFORM_PROPS.length;tt++){var nt=LEGACY_TRANSFORM_PROPS[tt],it=LEGACY_TRANSFORM_PROPS_MAP[nt],at=_[nt];at&&(et[it[0]]=at[0],et[it[1]]=at[1])}for(var tt=0;tt<TRANSFORMABLE_PROPS.length;tt++){var ot=TRANSFORMABLE_PROPS[tt];_[ot]!=null&&(et[ot]=_[ot])}}function prepareStyleTransitionFrom(_e,_,et,tt){if(et){var nt=_e.style,it;if(nt){var at=et.transition,ot=_.transition;if(at&&!isTransitionAll(at)){var st=normalizeToArray(at);!it&&(it=tt.style={});for(var dt=0;dt<st.length;dt++){var ht=st[dt],ct=nt[ht];it[ht]=ct}}else if(_e.getAnimationStyleProps&&(isTransitionAll(ot)||isTransitionAll(at)||indexOf(ot,"style")>=0)){var ut=_e.getAnimationStyleProps(),ft=ut?ut.style:null;if(ft){!it&&(it=tt.style={});for(var gt=keys(et),dt=0;dt<gt.length;dt++){var ht=gt[dt];if(ft[ht]){var ct=nt[ht];it[ht]=ct}}}}}}}function isNonStyleTransitionEnabled(_e,_){return isArrayLike(_e)?_e!==_:_e!=null&&isFinite(_e)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(_e){_e.stopAnimation("keyframe"),_e.attr(getStateToRestore(_e))}function applyKeyframeAnimation(_e,_,et){if(!(!et.isAnimationEnabled()||!_)){if(isArray$1(_)){each$f(_,function(ot){applyKeyframeAnimation(_e,ot,et)});return}var tt=_.keyframes,nt=_.duration;if(et&&nt==null){var it=getAnimationConfig("enter",et,0);nt=it&&it.duration}if(!(!tt||!nt)){var at=getStateToRestore(_e);each$f(ELEMENT_ANIMATABLE_PROPS,function(ot){if(!(ot&&!_e[ot])){var st;tt.sort(function(dt,ht){return dt.percent-ht.percent}),each$f(tt,function(dt){var ht=_e.animators,ct=ot?dt[ot]:dt;if(ct){var ut=keys(ct);if(ot||(ut=filter$1(ut,function(mt){return indexOf(KEYFRAME_EXCLUDE_KEYS,mt)<0})),!!ut.length){st||(st=_e.animate(ot,_.loop,!0),st.scope="keyframe");for(var ft=0;ft<ht.length;ft++)ht[ft]!==st&&ht[ft].targetName===st.targetName&&ht[ft].stopTracks(ut);ot&&(at[ot]=at[ot]||{});var gt=ot?at[ot]:at;each$f(ut,function(mt){gt[mt]=((ot?_e[ot]:_e)||{})[mt]}),st.whenWithKeys(nt*dt.percent,ct,ut,dt.easing)}}}),st&&st.delay(_.delay||0).duration(nt).start(_.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(_e){return _e instanceof Path}function isDisplayable(_e){return _e instanceof Displayable}function copyElement(_e,_){_.copyTransform(_e),isDisplayable(_)&&isDisplayable(_e)&&(_.setStyle(_e.style),_.z=_e.z,_.z2=_e.z2,_.zlevel=_e.zlevel,_.invisible=_e.invisible,_.ignore=_e.ignore,isPath(_)&&isPath(_e)&&_.setShape(_e.shape))}var CustomChartView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt,it){this._progressiveEls=null;var at=this._data,ot=et.getData(),st=this.group,dt=makeRenderItem(et,ot,tt,nt);at||st.removeAll(),ot.diff(at).add(function(ct){createOrUpdateItem(nt,null,ct,dt(ct,it),et,st,ot)}).remove(function(ct){var ut=at.getItemGraphicEl(ct);ut&&applyLeaveTransition(ut,customInnerStore(ut).option,et)}).update(function(ct,ut){var ft=at.getItemGraphicEl(ut);createOrUpdateItem(nt,ft,ct,dt(ct,it),et,st,ot)}).execute();var ht=et.get("clip",!0)?createClipPath(et.coordinateSystem,!1,et):null;ht?st.setClipPath(ht):st.removeClipPath(),this._data=ot},_.prototype.incrementalPrepareRender=function(et,tt,nt){this.group.removeAll(),this._data=null},_.prototype.incrementalRender=function(et,tt,nt,it,at){var ot=tt.getData(),st=makeRenderItem(tt,ot,nt,it),dt=this._progressiveEls=[];function ht(ft){ft.isGroup||(ft.incremental=!0,ft.ensureState("emphasis").hoverLayer=!0)}for(var ct=et.start;ct<et.end;ct++){var ut=createOrUpdateItem(null,null,ct,st(ct,at),tt,this.group,ot);ut&&(ut.traverse(ht),dt.push(ut))}},_.prototype.eachRendered=function(et){traverseElements(this._progressiveEls||this.group,et)},_.prototype.filterForExposedEvent=function(et,tt,nt,it){var at=tt.element;if(at==null||nt.name===at)return!0;for(;(nt=nt.__hostTarget||nt.parent)&&nt!==this.group;)if(nt.name===at)return!0;return!1},_.type="custom",_}(ChartView);function createEl$1(_e){var _=_e.type,et;if(_==="path"){var tt=_e.shape,nt=tt.width!=null&&tt.height!=null?{x:tt.x||0,y:tt.y||0,width:tt.width,height:tt.height}:null,it=getPathData(tt);et=makePath(it,null,nt,tt.layout||"center"),customInnerStore(et).customPathData=it}else if(_==="image")et=new ZRImage({}),customInnerStore(et).customImagePath=_e.style.image;else if(_==="text")et=new ZRText({});else if(_==="group")et=new Group$3;else{if(_==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var at=getShapeClass(_);if(!at){var ot="";throwError(ot)}et=new at}return customInnerStore(et).customGraphicType=_,et.name=_e.name,et.z2EmphasisLift=1,et.z2SelectLift=1,et}function updateElNormal(_e,_,et,tt,nt,it,at){stopPreviousKeyframeAnimationAndRestore(_);var ot=nt&&nt.normal.cfg;ot&&_.setTextConfig(ot),tt&&tt.transition==null&&(tt.transition=DEFAULT_TRANSITION);var st=tt&&tt.style;if(st){if(_.type==="text"){var dt=st;hasOwn(dt,"textFill")&&(dt.fill=dt.textFill),hasOwn(dt,"textStroke")&&(dt.stroke=dt.textStroke)}var ht=void 0,ct=isPath(_)?st.decal:null;_e&&ct&&(ct.dirty=!0,ht=createOrUpdatePatternFromDecal(ct,_e)),st.__decalPattern=ht}if(isDisplayable(_)&&st){var ht=st.__decalPattern;ht&&(st.decal=ht)}applyUpdateTransition(_,tt,it,{dataIndex:et,isInit:at,clearStyle:!0}),applyKeyframeAnimation(_,tt.keyframeAnimation,it)}function updateElOnState(_e,_,et,tt,nt){var it=_.isGroup?null:_,at=nt&&nt[_e].cfg;if(it){var ot=it.ensureState(_e);if(tt===!1){var st=it.getState(_e);st&&(st.style=null)}else ot.style=tt||null;at&&(ot.textConfig=at),setDefaultStateProxy(it)}}function updateZ(_e,_,et){if(!_e.isGroup){var tt=_e,nt=et.currentZ,it=et.currentZLevel;tt.z=nt,tt.zlevel=it;var at=_.z2;at!=null&&(tt.z2=at||0);for(var ot=0;ot<STATES.length;ot++)updateZForEachState(tt,_,STATES[ot])}}function updateZForEachState(_e,_,et){var tt=et===NORMAL,nt=tt?_:retrieveStateOption(_,et),it=nt?nt.z2:null,at;it!=null&&(at=tt?_e:_e.ensureState(et),at.z2=it||0)}function makeRenderItem(_e,_,et,tt){var nt=_e.get("renderItem"),it=_e.coordinateSystem,at={};it&&(at=it.prepareCustoms?it.prepareCustoms(it):prepareCustoms[it.type](it));for(var ot=defaults({getWidth:tt.getWidth,getHeight:tt.getHeight,getZr:tt.getZr,getDevicePixelRatio:tt.getDevicePixelRatio,value:xt,style:Tt,ordinalRawValue:St,styleEmphasis:wt,visual:At,barLayout:Pt,currentSeriesIndices:Rt,font:It},at.api||{}),st={context:{},seriesId:_e.id,seriesName:_e.name,seriesIndex:_e.seriesIndex,coordSys:at.coordSys,dataInsideLength:_.count(),encode:wrapEncodeDef(_e.getData())},dt,ht,ct={},ut={},ft={},gt={},mt=0;mt<STATES.length;mt++){var vt=STATES[mt];ft[vt]=_e.getModel(PATH_ITEM_STYLE[vt]),gt[vt]=_e.getModel(PATH_LABEL[vt])}function yt(Mt){return Mt===dt?ht||(ht=_.getItemModel(Mt)):_.getItemModel(Mt)}function bt(Mt,Ot){return _.hasItemOption?Mt===dt?ct[Ot]||(ct[Ot]=yt(Mt).getModel(PATH_ITEM_STYLE[Ot])):yt(Mt).getModel(PATH_ITEM_STYLE[Ot]):ft[Ot]}function _t(Mt,Ot){return _.hasItemOption?Mt===dt?ut[Ot]||(ut[Ot]=yt(Mt).getModel(PATH_LABEL[Ot])):yt(Mt).getModel(PATH_LABEL[Ot]):gt[Ot]}return function(Mt,Ot){return dt=Mt,ht=null,ct={},ut={},nt&&nt(defaults({dataIndexInside:Mt,dataIndex:_.getRawIndex(Mt),actionType:Ot?Ot.type:null},st),ot)};function xt(Mt,Ot){return Ot==null&&(Ot=dt),_.getStore().get(_.getDimensionIndex(Mt||0),Ot)}function St(Mt,Ot){Ot==null&&(Ot=dt),Mt=Mt||0;var $t=_.getDimensionInfo(Mt);if(!$t){var Lt=_.getDimensionIndex(Mt);return Lt>=0?_.getStore().get(Lt,Ot):void 0}var kt=_.get($t.name,Ot),Nt=$t&&$t.ordinalMeta;return Nt?Nt.categories[kt]:kt}function Tt(Mt,Ot){Ot==null&&(Ot=dt);var $t=_.getItemVisual(Ot,"style"),Lt=$t&&$t.fill,kt=$t&&$t.opacity,Nt=bt(Ot,NORMAL).getItemStyle();Lt!=null&&(Nt.fill=Lt),kt!=null&&(Nt.opacity=kt);var Vt={inheritColor:isString$1(Lt)?Lt:"#000"},zt=_t(Ot,NORMAL),Xt=createTextStyle$1(zt,null,Vt,!1,!0);Xt.text=zt.getShallow("show")?retrieve2(_e.getFormattedLabel(Ot,NORMAL),getDefaultLabel(_,Ot)):null;var Wt=createTextConfig(zt,Vt,!1);return Et(Mt,Nt),Nt=convertToEC4StyleForCustomSerise(Nt,Xt,Wt),Mt&&Ct(Nt,Mt),Nt.legacy=!0,Nt}function wt(Mt,Ot){Ot==null&&(Ot=dt);var $t=bt(Ot,EMPHASIS).getItemStyle(),Lt=_t(Ot,EMPHASIS),kt=createTextStyle$1(Lt,null,null,!0,!0);kt.text=Lt.getShallow("show")?retrieve3(_e.getFormattedLabel(Ot,EMPHASIS),_e.getFormattedLabel(Ot,NORMAL),getDefaultLabel(_,Ot)):null;var Nt=createTextConfig(Lt,null,!0);return Et(Mt,$t),$t=convertToEC4StyleForCustomSerise($t,kt,Nt),Mt&&Ct($t,Mt),$t.legacy=!0,$t}function Ct(Mt,Ot){for(var $t in Ot)hasOwn(Ot,$t)&&(Mt[$t]=Ot[$t])}function Et(Mt,Ot){Mt&&(Mt.textFill&&(Ot.textFill=Mt.textFill),Mt.textPosition&&(Ot.textPosition=Mt.textPosition))}function At(Mt,Ot){if(Ot==null&&(Ot=dt),hasOwn(STYLE_VISUAL_TYPE,Mt)){var $t=_.getItemVisual(Ot,"style");return $t?$t[STYLE_VISUAL_TYPE[Mt]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,Mt))return _.getItemVisual(Ot,Mt)}function Pt(Mt){if(it.type==="cartesian2d"){var Ot=it.getBaseAxis();return getLayoutOnAxis(defaults({axis:Ot},Mt))}}function Rt(){return et.getCurrentSeriesIndices()}function It(Mt){return getFont(Mt,et)}}function wrapEncodeDef(_e){var _={};return each$f(_e.dimensions,function(et){var tt=_e.getDimensionInfo(et);if(!tt.isExtraCoord){var nt=tt.coordDim,it=_[nt]=_[nt]||[];it[tt.coordDimIndex]=_e.getDimensionIndex(et)}}),_}function createOrUpdateItem(_e,_,et,tt,nt,it,at){if(!tt){it.remove(_);return}var ot=doCreateOrUpdateEl(_e,_,et,tt,nt,it);return ot&&at.setItemGraphicEl(et,ot),ot&&toggleHoverEmphasis(ot,tt.focus,tt.blurScope,tt.emphasisDisabled),ot}function doCreateOrUpdateEl(_e,_,et,tt,nt,it){var at=-1,ot=_;_&&doesElNeedRecreate(_,tt,nt)&&(at=indexOf(it.childrenRef(),_),_=null);var st=!_,dt=_;dt?dt.clearStates():(dt=createEl$1(tt),ot&&copyElement(ot,dt)),tt.morph===!1?dt.disableMorphing=!0:dt.disableMorphing&&(dt.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(dt,et,tt,nt,st,attachedTxInfoTmp),doCreateOrUpdateClipPath(dt,et,tt,nt,st),updateElNormal(_e,dt,et,tt,attachedTxInfoTmp,nt,st),hasOwn(tt,"info")&&(customInnerStore(dt).info=tt.info);for(var ht=0;ht<STATES.length;ht++){var ct=STATES[ht];if(ct!==NORMAL){var ut=retrieveStateOption(tt,ct),ft=retrieveStyleOptionOnState(tt,ut,ct);updateElOnState(ct,dt,ut,ft,attachedTxInfoTmp)}}return updateZ(dt,tt,nt),tt.type==="group"&&mergeChildren(_e,dt,et,tt,nt),at>=0?it.replaceAt(dt,at):it.add(dt),dt}function doesElNeedRecreate(_e,_,et){var tt=customInnerStore(_e),nt=_.type,it=_.shape,at=_.style;return et.isUniversalTransitionEnabled()||nt!=null&&nt!==tt.customGraphicType||nt==="path"&&hasOwnPathData(it)&&getPathData(it)!==tt.customPathData||nt==="image"&&hasOwn(at,"image")&&at.image!==tt.customImagePath}function doCreateOrUpdateClipPath(_e,_,et,tt,nt){var it=et.clipPath;if(it===!1)_e&&_e.getClipPath()&&_e.removeClipPath();else if(it){var at=_e.getClipPath();at&&doesElNeedRecreate(at,it,tt)&&(at=null),at||(at=createEl$1(it),_e.setClipPath(at)),updateElNormal(null,at,_,it,null,tt,nt)}}function doCreateOrUpdateAttachedTx(_e,_,et,tt,nt,it){if(!_e.isGroup){processTxInfo(et,null,it),processTxInfo(et,EMPHASIS,it);var at=it.normal.conOpt,ot=it.emphasis.conOpt,st=it.blur.conOpt,dt=it.select.conOpt;if(at!=null||ot!=null||dt!=null||st!=null){var ht=_e.getTextContent();if(at===!1)ht&&_e.removeTextContent();else{at=it.normal.conOpt=at||{type:"text"},ht?ht.clearStates():(ht=createEl$1(at),_e.setTextContent(ht)),updateElNormal(null,ht,_,at,null,tt,nt);for(var ct=at&&at.style,ut=0;ut<STATES.length;ut++){var ft=STATES[ut];if(ft!==NORMAL){var gt=it[ft].conOpt;updateElOnState(ft,ht,gt,retrieveStyleOptionOnState(at,gt,ft),null)}}ct?ht.dirty():ht.markRedraw()}}}}function processTxInfo(_e,_,et){var tt=_?retrieveStateOption(_e,_):_e,nt=_?retrieveStyleOptionOnState(_e,tt,EMPHASIS):_e.style,it=_e.type,at=tt?tt.textConfig:null,ot=_e.textContent,st=ot?_?retrieveStateOption(ot,_):ot:null;if(nt&&(et.isLegacy||isEC4CompatibleStyle(nt,it,!!at,!!st))){et.isLegacy=!0;var dt=convertFromEC4CompatibleStyle(nt,it,!_);!at&&dt.textConfig&&(at=dt.textConfig),!st&&dt.textContent&&(st=dt.textContent)}if(!_&&st){var ht=st;!ht.type&&(ht.type="text")}var ct=_?et[_]:et.normal;ct.cfg=at,ct.conOpt=st}function retrieveStateOption(_e,_){return _?_e?_e[_]:null:_e}function retrieveStyleOptionOnState(_e,_,et){var tt=_&&_.style;return tt==null&&et===EMPHASIS&&_e&&(tt=_e.styleEmphasis),tt}function mergeChildren(_e,_,et,tt,nt){var it=tt.children,at=it?it.length:0,ot=tt.$mergeChildren,st=ot==="byName"||tt.diffChildrenByName,dt=ot===!1;if(!(!at&&!st&&!dt)){if(st){diffGroupChildren({api:_e,oldChildren:_.children()||[],newChildren:it||[],dataIndex:et,seriesModel:nt,group:_});return}dt&&_.removeAll();for(var ht=0;ht<at;ht++){var ct=it[ht],ut=_.childAt(ht);ct?(ct.ignore==null&&(ct.ignore=!1),doCreateOrUpdateEl(_e,ut,et,ct,nt,_)):ut.ignore=!0}for(var ft=_.childCount()-1;ft>=ht;ft--){var gt=_.childAt(ft);removeChildFromGroup(_,gt,nt)}}}function removeChildFromGroup(_e,_,et){_&&applyLeaveTransition(_,customInnerStore(_e).option,et)}function diffGroupChildren(_e){new DataDiffer(_e.oldChildren,_e.newChildren,getKey,getKey,_e).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(_e,_){var et=_e&&_e.name;return et??GROUP_DIFF_PREFIX+_}function processAddUpdate(_e,_){var et=this.context,tt=_e!=null?et.newChildren[_e]:null,nt=_!=null?et.oldChildren[_]:null;doCreateOrUpdateEl(et.api,nt,et.dataIndex,tt,et.seriesModel,et.group)}function processRemove(_e){var _=this.context,et=_.oldChildren[_e];et&&applyLeaveTransition(et,customInnerStore(et).option,_.seriesModel)}function getPathData(_e){return _e&&(_e.pathData||_e.d)}function hasOwnPathData(_e){return _e&&(hasOwn(_e,"pathData")||hasOwn(_e,"d"))}function install$r(_e){_e.registerChartView(CustomChartView),_e.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind$1=bind$2,BaseAxisPointer=function(){function _e(){this._dragging=!1,this.animationThreshold=15}return _e.prototype.render=function(_,et,tt,nt){var it=et.get("value"),at=et.get("status");if(this._axisModel=_,this._axisPointerModel=et,this._api=tt,!(!nt&&this._lastValue===it&&this._lastStatus===at)){this._lastValue=it,this._lastStatus=at;var ot=this._group,st=this._handle;if(!at||at==="hide"){ot&&ot.hide(),st&&st.hide();return}ot&&ot.show(),st&&st.show();var dt={};this.makeElOption(dt,it,_,et,tt);var ht=dt.graphicKey;ht!==this._lastGraphicKey&&this.clear(tt),this._lastGraphicKey=ht;var ct=this._moveAnimation=this.determineAnimation(_,et);if(!ot)ot=this._group=new Group$3,this.createPointerEl(ot,dt,_,et),this.createLabelEl(ot,dt,_,et),tt.getZr().add(ot);else{var ut=curry$1(updateProps,et,ct);this.updatePointerEl(ot,dt,ut),this.updateLabelEl(ot,dt,ut,et)}updateMandatoryProps(ot,et,!0),this._renderHandle(it)}},_e.prototype.remove=function(_){this.clear(_)},_e.prototype.dispose=function(_){this.clear(_)},_e.prototype.determineAnimation=function(_,et){var tt=et.get("animation"),nt=_.axis,it=nt.type==="category",at=et.get("snap");if(!at&&!it)return!1;if(tt==="auto"||tt==null){var ot=this.animationThreshold;if(it&&nt.getBandWidth()>ot)return!0;if(at){var st=getAxisInfo$1(_).seriesDataCount,dt=nt.getExtent();return Math.abs(dt[0]-dt[1])/st>ot}return!1}return tt===!0},_e.prototype.makeElOption=function(_,et,tt,nt,it){},_e.prototype.createPointerEl=function(_,et,tt,nt){var it=et.pointer;if(it){var at=inner$b(_).pointerEl=new graphic$1[it.type](clone$1(et.pointer));_.add(at)}},_e.prototype.createLabelEl=function(_,et,tt,nt){if(et.label){var it=inner$b(_).labelEl=new ZRText(clone$1(et.label));_.add(it),updateLabelShowHide(it,nt)}},_e.prototype.updatePointerEl=function(_,et,tt){var nt=inner$b(_).pointerEl;nt&&et.pointer&&(nt.setStyle(et.pointer.style),tt(nt,{shape:et.pointer.shape}))},_e.prototype.updateLabelEl=function(_,et,tt,nt){var it=inner$b(_).labelEl;it&&(it.setStyle(et.label.style),tt(it,{x:et.label.x,y:et.label.y}),updateLabelShowHide(it,nt))},_e.prototype._renderHandle=function(_){if(!(this._dragging||!this.updateHandleTransform)){var et=this._axisPointerModel,tt=this._api.getZr(),nt=this._handle,it=et.getModel("handle"),at=et.get("status");if(!it.get("show")||!at||at==="hide"){nt&&tt.remove(nt),this._handle=null;return}var ot;this._handle||(ot=!0,nt=this._handle=createIcon(it.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(dt){stop(dt.event)},onmousedown:bind$1(this._onHandleDragMove,this,0,0),drift:bind$1(this._onHandleDragMove,this),ondragend:bind$1(this._onHandleDragEnd,this)}),tt.add(nt)),updateMandatoryProps(nt,et,!1),nt.setStyle(it.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var st=it.get("size");isArray$1(st)||(st=[st,st]),nt.scaleX=st[0]/2,nt.scaleY=st[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",it.get("throttle")||0,"fixRate"),this._moveHandleToValue(_,ot)}},_e.prototype._moveHandleToValue=function(_,et){updateProps(this._axisPointerModel,!et&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(_,this._axisModel,this._axisPointerModel)))},_e.prototype._onHandleDragMove=function(_,et){var tt=this._handle;if(tt){this._dragging=!0;var nt=this.updateHandleTransform(getHandleTransProps(tt),[_,et],this._axisModel,this._axisPointerModel);this._payloadInfo=nt,tt.stopAnimation(),tt.attr(getHandleTransProps(nt)),inner$b(tt).lastProp=null,this._doDispatchAxisPointer()}},_e.prototype._doDispatchAxisPointer=function(){var _=this._handle;if(_){var et=this._payloadInfo,tt=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:et.cursorPoint[0],y:et.cursorPoint[1],tooltipOption:et.tooltipOption,axesInfo:[{axisDim:tt.axis.dim,axisIndex:tt.componentIndex}]})}},_e.prototype._onHandleDragEnd=function(){this._dragging=!1;var _=this._handle;if(_){var et=this._axisPointerModel.get("value");this._moveHandleToValue(et),this._api.dispatchAction({type:"hideTip"})}},_e.prototype.clear=function(_){this._lastValue=null,this._lastStatus=null;var et=_.getZr(),tt=this._group,nt=this._handle;et&&tt&&(this._lastGraphicKey=null,tt&&et.remove(tt),nt&&et.remove(nt),this._group=null,this._handle=null,this._payloadInfo=null),clear$2(this,"_doDispatchAxisPointer")},_e.prototype.doClear=function(){},_e.prototype.buildLabel=function(_,et,tt){return tt=tt||0,{x:_[tt],y:_[1-tt],width:et[tt],height:et[1-tt]}},_e}();function updateProps(_e,_,et,tt){propsEqual(inner$b(et).lastProp,tt)||(inner$b(et).lastProp=tt,_?updateProps$1(et,tt,_e):(et.stopAnimation(),et.attr(tt)))}function propsEqual(_e,_){if(isObject$4(_e)&&isObject$4(_)){var et=!0;return each$f(_,function(tt,nt){et=et&&propsEqual(_e[nt],tt)}),!!et}else return _e===_}function updateLabelShowHide(_e,_){_e[_.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(_e){return{x:_e.x||0,y:_e.y||0,rotation:_e.rotation||0}}function updateMandatoryProps(_e,_,et){var tt=_.get("z"),nt=_.get("zlevel");_e&&_e.traverse(function(it){it.type!=="group"&&(tt!=null&&(it.z=tt),nt!=null&&(it.zlevel=nt),it.silent=et)})}function buildElStyle(_e){var _=_e.get("type"),et=_e.getModel(_+"Style"),tt;return _==="line"?(tt=et.getLineStyle(),tt.fill=null):_==="shadow"&&(tt=et.getAreaStyle(),tt.stroke=null),tt}function buildLabelElOption(_e,_,et,tt,nt){var it=et.get("value"),at=getValueLabel(it,_.axis,_.ecModel,et.get("seriesDataIndices"),{precision:et.get(["label","precision"]),formatter:et.get(["label","formatter"])}),ot=et.getModel("label"),st=normalizeCssArray(ot.get("padding")||0),dt=ot.getFont(),ht=getBoundingRect(at,dt),ct=nt.position,ut=ht.width+st[1]+st[3],ft=ht.height+st[0]+st[2],gt=nt.align;gt==="right"&&(ct[0]-=ut),gt==="center"&&(ct[0]-=ut/2);var mt=nt.verticalAlign;mt==="bottom"&&(ct[1]-=ft),mt==="middle"&&(ct[1]-=ft/2),confineInContainer(ct,ut,ft,tt);var vt=ot.get("backgroundColor");(!vt||vt==="auto")&&(vt=_.get(["axisLine","lineStyle","color"])),_e.label={x:ct[0],y:ct[1],style:createTextStyle$1(ot,{text:at,font:dt,fill:ot.getTextColor(),padding:st,backgroundColor:vt}),z2:10}}function confineInContainer(_e,_,et,tt){var nt=tt.getWidth(),it=tt.getHeight();_e[0]=Math.min(_e[0]+_,nt)-_,_e[1]=Math.min(_e[1]+et,it)-et,_e[0]=Math.max(_e[0],0),_e[1]=Math.max(_e[1],0)}function getValueLabel(_e,_,et,tt,nt){_e=_.scale.parse(_e);var it=_.scale.getLabel({value:_e},{precision:nt.precision}),at=nt.formatter;if(at){var ot={value:getAxisRawValue(_,{value:_e}),axisDimension:_.dim,axisIndex:_.index,seriesData:[]};each$f(tt,function(st){var dt=et.getSeriesByIndex(st.seriesIndex),ht=st.dataIndexInside,ct=dt&&dt.getDataParams(ht);ct&&ot.seriesData.push(ct)}),isString$1(at)?it=at.replace("{value}",it):isFunction$3(at)&&(it=at(ot))}return it}function getTransformedPosition(_e,_,et){var tt=create$1();return rotate(tt,tt,et.rotation),translate(tt,tt,et.position),applyTransform([_e.dataToCoord(_),(et.labelOffset||0)+(et.labelDirection||1)*(et.labelMargin||0)],tt)}function buildCartesianSingleLabelElOption(_e,_,et,tt,nt,it){var at=AxisBuilder.innerTextLayout(et.rotation,0,et.labelDirection);et.labelMargin=nt.get(["label","margin"]),buildLabelElOption(_,tt,nt,it,{position:getTransformedPosition(tt.axis,_e,et),align:at.textAlign,verticalAlign:at.textVerticalAlign})}function makeLineShape(_e,_,et){return et=et||0,{x1:_e[et],y1:_e[1-et],x2:_[et],y2:_[1-et]}}function makeRectShape(_e,_,et){return et=et||0,{x:_e[et],y:_e[1-et],width:_[et],height:_[1-et]}}function makeSectorShape(_e,_,et,tt,nt,it){return{cx:_e,cy:_,r0:et,r:tt,startAngle:nt,endAngle:it,clockwise:!0}}var CartesianAxisPointer=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.makeElOption=function(et,tt,nt,it,at){var ot=nt.axis,st=ot.grid,dt=it.get("type"),ht=getCartesian(st,ot).getOtherAxis(ot).getGlobalExtent(),ct=ot.toGlobalCoord(ot.dataToCoord(tt,!0));if(dt&&dt!=="none"){var ut=buildElStyle(it),ft=pointerShapeBuilder$2[dt](ot,ct,ht);ft.style=ut,et.graphicKey=ft.type,et.pointer=ft}var gt=layout$3(st.model,nt);buildCartesianSingleLabelElOption(tt,et,gt,nt,it,at)},_.prototype.getHandleTransform=function(et,tt,nt){var it=layout$3(tt.axis.grid.model,tt,{labelInside:!1});it.labelMargin=nt.get(["handle","margin"]);var at=getTransformedPosition(tt.axis,et,it);return{x:at[0],y:at[1],rotation:it.rotation+(it.labelDirection<0?Math.PI:0)}},_.prototype.updateHandleTransform=function(et,tt,nt,it){var at=nt.axis,ot=at.grid,st=at.getGlobalExtent(!0),dt=getCartesian(ot,at).getOtherAxis(at).getGlobalExtent(),ht=at.dim==="x"?0:1,ct=[et.x,et.y];ct[ht]+=tt[ht],ct[ht]=Math.min(st[1],ct[ht]),ct[ht]=Math.max(st[0],ct[ht]);var ut=(dt[1]+dt[0])/2,ft=[ut,ut];ft[ht]=ct[ht];var gt=[{verticalAlign:"middle"},{align:"center"}];return{x:ct[0],y:ct[1],rotation:et.rotation,cursorPoint:ft,tooltipOption:gt[ht]}},_}(BaseAxisPointer);function getCartesian(_e,_){var et={};return et[_.dim+"AxisIndex"]=_.index,_e.getCartesian(et)}var pointerShapeBuilder$2={line:function(_e,_,et){var tt=makeLineShape([_,et[0]],[_,et[1]],getAxisDimIndex(_e));return{type:"Line",subPixelOptimize:!0,shape:tt}},shadow:function(_e,_,et){var tt=Math.max(1,_e.getBandWidth()),nt=et[1]-et[0];return{type:"Rect",shape:makeRectShape([_-tt/2,et[0]],[tt,nt],getAxisDimIndex(_e))}}};function getAxisDimIndex(_e){return _e.dim==="x"?0:1}var AxisPointerModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="axisPointer",_.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},_}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(_e,_,et){if(!env.node){var tt=_.getZr();inner$a(tt).records||(inner$a(tt).records={}),initGlobalListeners(tt,_);var nt=inner$a(tt).records[_e]||(inner$a(tt).records[_e]={});nt.handler=et}}function initGlobalListeners(_e,_){if(inner$a(_e).initialized)return;inner$a(_e).initialized=!0,et("click",curry$1(doEnter,"click")),et("mousemove",curry$1(doEnter,"mousemove")),et("globalout",onLeave);function et(tt,nt){_e.on(tt,function(it){var at=makeDispatchAction$1(_);each$8(inner$a(_e).records,function(ot){ot&&nt(ot,it,at.dispatchAction)}),dispatchTooltipFinally(at.pendings,_)})}}function dispatchTooltipFinally(_e,_){var et=_e.showTip.length,tt=_e.hideTip.length,nt;et?nt=_e.showTip[et-1]:tt&&(nt=_e.hideTip[tt-1]),nt&&(nt.dispatchAction=null,_.dispatchAction(nt))}function onLeave(_e,_,et){_e.handler("leave",null,et)}function doEnter(_e,_,et,tt){_.handler(_e,et,tt)}function makeDispatchAction$1(_e){var _={showTip:[],hideTip:[]},et=function(tt){var nt=_[tt.type];nt?nt.push(tt):(tt.dispatchAction=et,_e.dispatchAction(tt))};return{dispatchAction:et,pendings:_}}function unregister(_e,_){if(!env.node){var et=_.getZr(),tt=(inner$a(et).records||{})[_e];tt&&(inner$a(et).records[_e]=null)}}var AxisPointerView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){var it=tt.getComponent("tooltip"),at=et.get("triggerOn")||it&&it.get("triggerOn")||"mousemove|click";register("axisPointer",nt,function(ot,st,dt){at!=="none"&&(ot==="leave"||at.indexOf(ot)>=0)&&dt({type:"updateAxisPointer",currTrigger:ot,x:st&&st.offsetX,y:st&&st.offsetY})})},_.prototype.remove=function(et,tt){unregister("axisPointer",tt)},_.prototype.dispose=function(et,tt){unregister("axisPointer",tt)},_.type="axisPointer",_}(ComponentView);function findPointFromSeries(_e,_){var et=[],tt=_e.seriesIndex,nt;if(tt==null||!(nt=_.getSeriesByIndex(tt)))return{point:[]};var it=nt.getData(),at=queryDataIndex(it,_e);if(at==null||at<0||isArray$1(at))return{point:[]};var ot=it.getItemGraphicEl(at),st=nt.coordinateSystem;if(nt.getTooltipPosition)et=nt.getTooltipPosition(at)||[];else if(st&&st.dataToPoint)if(_e.isStacked){var dt=st.getBaseAxis(),ht=st.getOtherAxis(dt),ct=ht.dim,ut=dt.dim,ft=ct==="x"||ct==="radius"?1:0,gt=it.mapDimension(ut),mt=[];mt[ft]=it.get(gt,at),mt[1-ft]=it.get(it.getCalculationInfo("stackResultDimension"),at),et=st.dataToPoint(mt)||[]}else et=st.dataToPoint(it.getValues(map$1(st.dimensions,function(yt){return it.mapDimension(yt)}),at))||[];else if(ot){var vt=ot.getBoundingRect().clone();vt.applyTransform(ot.transform),et=[vt.x+vt.width/2,vt.y+vt.height/2]}return{point:et,el:ot}}var inner$9=makeInner();function axisTrigger(_e,_,et){var tt=_e.currTrigger,nt=[_e.x,_e.y],it=_e,at=_e.dispatchAction||bind$2(et.dispatchAction,et),ot=_.getComponent("axisPointer").coordSysAxesInfo;if(ot){illegalPoint(nt)&&(nt=findPointFromSeries({seriesIndex:it.seriesIndex,dataIndex:it.dataIndex},_).point);var st=illegalPoint(nt),dt=it.axesInfo,ht=ot.axesInfo,ct=tt==="leave"||illegalPoint(nt),ut={},ft={},gt={list:[],map:{}},mt={showPointer:curry$1(showPointer,ft),showTooltip:curry$1(showTooltip,gt)};each$f(ot.coordSysMap,function(yt,bt){var _t=st||yt.containPoint(nt);each$f(ot.coordSysAxesInfo[bt],function(xt,St){var Tt=xt.axis,wt=findInputAxisInfo(dt,xt);if(!ct&&_t&&(!dt||wt)){var Ct=wt&&wt.value;Ct==null&&!st&&(Ct=Tt.pointToData(nt)),Ct!=null&&processOnAxis(xt,Ct,mt,!1,ut)}})});var vt={};return each$f(ht,function(yt,bt){var _t=yt.linkGroup;_t&&!ft[bt]&&each$f(_t.axesInfo,function(xt,St){var Tt=ft[St];if(xt!==yt&&Tt){var wt=Tt.value;_t.mapper&&(wt=yt.axis.scale.parse(_t.mapper(wt,makeMapperParam(xt),makeMapperParam(yt)))),vt[yt.key]=wt}})}),each$f(vt,function(yt,bt){processOnAxis(ht[bt],yt,mt,!0,ut)}),updateModelActually(ft,ht,ut),dispatchTooltipActually(gt,nt,_e,at),dispatchHighDownActually(ht,at,et),ut}}function processOnAxis(_e,_,et,tt,nt){var it=_e.axis;if(!(it.scale.isBlank()||!it.containData(_))){if(!_e.involveSeries){et.showPointer(_e,_);return}var at=buildPayloadsBySeries(_,_e),ot=at.payloadBatch,st=at.snapToValue;ot[0]&&nt.seriesIndex==null&&extend(nt,ot[0]),!tt&&_e.snap&&it.containData(st)&&st!=null&&(_=st),et.showPointer(_e,_,ot),et.showTooltip(_e,at,st)}}function buildPayloadsBySeries(_e,_){var et=_.axis,tt=et.dim,nt=_e,it=[],at=Number.MAX_VALUE,ot=-1;return each$f(_.seriesModels,function(st,dt){var ht=st.getData().mapDimensionsAll(tt),ct,ut;if(st.getAxisTooltipData){var ft=st.getAxisTooltipData(ht,_e,et);ut=ft.dataIndices,ct=ft.nestestValue}else{if(ut=st.getData().indicesOfNearest(ht[0],_e,et.type==="category"?.5:null),!ut.length)return;ct=st.getData().get(ht[0],ut[0])}if(!(ct==null||!isFinite(ct))){var gt=_e-ct,mt=Math.abs(gt);mt<=at&&((mt<at||gt>=0&&ot<0)&&(at=mt,ot=gt,nt=ct,it.length=0),each$f(ut,function(vt){it.push({seriesIndex:st.seriesIndex,dataIndexInside:vt,dataIndex:st.getData().getRawIndex(vt)})}))}}),{payloadBatch:it,snapToValue:nt}}function showPointer(_e,_,et,tt){_e[_.key]={value:et,payloadBatch:tt}}function showTooltip(_e,_,et,tt){var nt=et.payloadBatch,it=_.axis,at=it.model,ot=_.axisPointerModel;if(!(!_.triggerTooltip||!nt.length)){var st=_.coordSys.model,dt=makeKey(st),ht=_e.map[dt];ht||(ht=_e.map[dt]={coordSysId:st.id,coordSysIndex:st.componentIndex,coordSysType:st.type,coordSysMainType:st.mainType,dataByAxis:[]},_e.list.push(ht)),ht.dataByAxis.push({axisDim:it.dim,axisIndex:at.componentIndex,axisType:at.type,axisId:at.id,value:tt,valueLabelOpt:{precision:ot.get(["label","precision"]),formatter:ot.get(["label","formatter"])},seriesDataIndices:nt.slice()})}}function updateModelActually(_e,_,et){var tt=et.axesInfo=[];each$f(_,function(nt,it){var at=nt.axisPointerModel.option,ot=_e[it];ot?(!nt.useHandle&&(at.status="show"),at.value=ot.value,at.seriesDataIndices=(ot.payloadBatch||[]).slice()):!nt.useHandle&&(at.status="hide"),at.status==="show"&&tt.push({axisDim:nt.axis.dim,axisIndex:nt.axis.model.componentIndex,value:at.value})})}function dispatchTooltipActually(_e,_,et,tt){if(illegalPoint(_)||!_e.list.length){tt({type:"hideTip"});return}var nt=((_e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};tt({type:"showTip",escapeConnect:!0,x:_[0],y:_[1],tooltipOption:et.tooltipOption,position:et.position,dataIndexInside:nt.dataIndexInside,dataIndex:nt.dataIndex,seriesIndex:nt.seriesIndex,dataByCoordSys:_e.list})}function dispatchHighDownActually(_e,_,et){var tt=et.getZr(),nt="axisPointerLastHighlights",it=inner$9(tt)[nt]||{},at=inner$9(tt)[nt]={};each$f(_e,function(dt,ht){var ct=dt.axisPointerModel.option;ct.status==="show"&&dt.triggerEmphasis&&each$f(ct.seriesDataIndices,function(ut){var ft=ut.seriesIndex+" | "+ut.dataIndex;at[ft]=ut})});var ot=[],st=[];each$f(it,function(dt,ht){!at[ht]&&st.push(dt)}),each$f(at,function(dt,ht){!it[ht]&&ot.push(dt)}),st.length&&et.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:st}),ot.length&&et.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:ot})}function findInputAxisInfo(_e,_){for(var et=0;et<(_e||[]).length;et++){var tt=_e[et];if(_.axis.dim===tt.axisDim&&_.axis.model.componentIndex===tt.axisIndex)return tt}}function makeMapperParam(_e){var _=_e.axis.model,et={},tt=et.axisDim=_e.axis.dim;return et.axisIndex=et[tt+"AxisIndex"]=_.componentIndex,et.axisName=et[tt+"AxisName"]=_.name,et.axisId=et[tt+"AxisId"]=_.id,et}function illegalPoint(_e){return!_e||_e[0]==null||isNaN(_e[0])||_e[1]==null||isNaN(_e[1])}function install$q(_e){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),_e.registerComponentModel(AxisPointerModel),_e.registerComponentView(AxisPointerView),_e.registerPreprocessor(function(_){if(_){(!_.axisPointer||_.axisPointer.length===0)&&(_.axisPointer={});var et=_.axisPointer.link;et&&!isArray$1(et)&&(_.axisPointer.link=[et])}}),_e.registerProcessor(_e.PRIORITY.PROCESSOR.STATISTIC,function(_,et){_.getComponent("axisPointer").coordSysAxesInfo=collect(_,et)}),_e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(_e){use(install$N),use(install$q)}var PolarAxisPointer=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.makeElOption=function(et,tt,nt,it,at){var ot=nt.axis;ot.dim==="angle"&&(this.animationThreshold=Math.PI/18);var st=ot.polar,dt=st.getOtherAxis(ot),ht=dt.getExtent(),ct=ot.dataToCoord(tt),ut=it.get("type");if(ut&&ut!=="none"){var ft=buildElStyle(it),gt=pointerShapeBuilder$1[ut](ot,st,ct,ht);gt.style=ft,et.graphicKey=gt.type,et.pointer=gt}var mt=it.get(["label","margin"]),vt=getLabelPosition(tt,nt,it,st,mt);buildLabelElOption(et,nt,it,at,vt)},_}(BaseAxisPointer);function getLabelPosition(_e,_,et,tt,nt){var it=_.axis,at=it.dataToCoord(_e),ot=tt.getAngleAxis().getExtent()[0];ot=ot/180*Math.PI;var st=tt.getRadiusAxis().getExtent(),dt,ht,ct;if(it.dim==="radius"){var ut=create$1();rotate(ut,ut,ot),translate(ut,ut,[tt.cx,tt.cy]),dt=applyTransform([at,-nt],ut);var ft=_.getModel("axisLabel").get("rotate")||0,gt=AxisBuilder.innerTextLayout(ot,ft*Math.PI/180,-1);ht=gt.textAlign,ct=gt.textVerticalAlign}else{var mt=st[1];dt=tt.coordToPoint([mt+nt,at]);var vt=tt.cx,yt=tt.cy;ht=Math.abs(dt[0]-vt)/mt<.3?"center":dt[0]>vt?"left":"right",ct=Math.abs(dt[1]-yt)/mt<.3?"middle":dt[1]>yt?"top":"bottom"}return{position:dt,align:ht,verticalAlign:ct}}var pointerShapeBuilder$1={line:function(_e,_,et,tt){return _e.dim==="angle"?{type:"Line",shape:makeLineShape(_.coordToPoint([tt[0],et]),_.coordToPoint([tt[1],et]))}:{type:"Circle",shape:{cx:_.cx,cy:_.cy,r:et}}},shadow:function(_e,_,et,tt){var nt=Math.max(1,_e.getBandWidth()),it=Math.PI/180;return _e.dim==="angle"?{type:"Sector",shape:makeSectorShape(_.cx,_.cy,tt[0],tt[1],(-et-nt/2)*it,(-et+nt/2)*it)}:{type:"Sector",shape:makeSectorShape(_.cx,_.cy,et-nt/2,et+nt/2,0,Math.PI*2)}}},PolarModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.findAxisModel=function(et){var tt,nt=this.ecModel;return nt.eachComponent(et,function(it){it.getCoordSysModel()===this&&(tt=it)},this),tt},_.type="polar",_.dependencies=["radiusAxis","angleAxis"],_.defaultOption={z:0,center:["50%","50%"],radius:"80%"},_}(ComponentModel),PolarAxisModel=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},_.type="polarAxis",_}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="angleAxis",_}(PolarAxisModel),RadiusAxisModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="radiusAxis",_}(PolarAxisModel),RadiusAxis=function(_e){__extends$1(_,_e);function _(et,tt){return _e.call(this,"radius",et,tt)||this}return _.prototype.pointToData=function(et,tt){return this.polar.pointToData(et,tt)[this.dim==="radius"?0:1]},_}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(_e){__extends$1(_,_e);function _(et,tt){return _e.call(this,"angle",et,tt||[0,360])||this}return _.prototype.pointToData=function(et,tt){return this.polar.pointToData(et,tt)[this.dim==="radius"?0:1]},_.prototype.calculateCategoryInterval=function(){var et=this,tt=et.getLabelModel(),nt=et.scale,it=nt.getExtent(),at=nt.count();if(it[1]-it[0]<1)return 0;var ot=it[0],st=et.dataToCoord(ot+1)-et.dataToCoord(ot),dt=Math.abs(st),ht=getBoundingRect(ot==null?"":ot+"",tt.getFont(),"center","top"),ct=Math.max(ht.height,7),ut=ct/dt;isNaN(ut)&&(ut=1/0);var ft=Math.max(0,Math.floor(ut)),gt=inner$8(et.model),mt=gt.lastAutoInterval,vt=gt.lastTickCount;return mt!=null&&vt!=null&&Math.abs(mt-ft)<=1&&Math.abs(vt-at)<=1&&mt>ft?ft=mt:(gt.lastTickCount=at,gt.lastAutoInterval=ft),ft},_}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function _e(_){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=_||"",this._radiusAxis.polar=this._angleAxis.polar=this}return _e.prototype.containPoint=function(_){var et=this.pointToCoord(_);return this._radiusAxis.contain(et[0])&&this._angleAxis.contain(et[1])},_e.prototype.containData=function(_){return this._radiusAxis.containData(_[0])&&this._angleAxis.containData(_[1])},_e.prototype.getAxis=function(_){var et="_"+_+"Axis";return this[et]},_e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},_e.prototype.getAxesByScale=function(_){var et=[],tt=this._angleAxis,nt=this._radiusAxis;return tt.scale.type===_&&et.push(tt),nt.scale.type===_&&et.push(nt),et},_e.prototype.getAngleAxis=function(){return this._angleAxis},_e.prototype.getRadiusAxis=function(){return this._radiusAxis},_e.prototype.getOtherAxis=function(_){var et=this._angleAxis;return _===et?this._radiusAxis:et},_e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},_e.prototype.getTooltipAxes=function(_){var et=_!=null&&_!=="auto"?this.getAxis(_):this.getBaseAxis();return{baseAxes:[et],otherAxes:[this.getOtherAxis(et)]}},_e.prototype.dataToPoint=function(_,et){return this.coordToPoint([this._radiusAxis.dataToRadius(_[0],et),this._angleAxis.dataToAngle(_[1],et)])},_e.prototype.pointToData=function(_,et){var tt=this.pointToCoord(_);return[this._radiusAxis.radiusToData(tt[0],et),this._angleAxis.angleToData(tt[1],et)]},_e.prototype.pointToCoord=function(_){var et=_[0]-this.cx,tt=_[1]-this.cy,nt=this.getAngleAxis(),it=nt.getExtent(),at=Math.min(it[0],it[1]),ot=Math.max(it[0],it[1]);nt.inverse?at=ot-360:ot=at+360;var st=Math.sqrt(et*et+tt*tt);et/=st,tt/=st;for(var dt=Math.atan2(-tt,et)/Math.PI*180,ht=dt<at?1:-1;dt<at||dt>ot;)dt+=ht*360;return[st,dt]},_e.prototype.coordToPoint=function(_){var et=_[0],tt=_[1]/180*Math.PI,nt=Math.cos(tt)*et+this.cx,it=-Math.sin(tt)*et+this.cy;return[nt,it]},_e.prototype.getArea=function(){var _=this.getAngleAxis(),et=this.getRadiusAxis(),tt=et.getExtent().slice();tt[0]>tt[1]&&tt.reverse();var nt=_.getExtent(),it=Math.PI/180,at=1e-4;return{cx:this.cx,cy:this.cy,r0:tt[0],r:tt[1],startAngle:-nt[0]*it,endAngle:-nt[1]*it,clockwise:_.inverse,contain:function(ot,st){var dt=ot-this.cx,ht=st-this.cy,ct=dt*dt+ht*ht,ut=this.r,ft=this.r0;return ut!==ft&&ct-at<=ut*ut&&ct+at>=ft*ft}}},_e.prototype.convertToPixel=function(_,et,tt){var nt=getCoordSys$2(et);return nt===this?this.dataToPoint(tt):null},_e.prototype.convertFromPixel=function(_,et,tt){var nt=getCoordSys$2(et);return nt===this?this.pointToData(tt):null},_e}();function getCoordSys$2(_e){var _=_e.seriesModel,et=_e.polarModel;return et&&et.coordinateSystem||_&&_.coordinateSystem}function resizePolar(_e,_,et){var tt=_.get("center"),nt=et.getWidth(),it=et.getHeight();_e.cx=parsePercent(tt[0],nt),_e.cy=parsePercent(tt[1],it);var at=_e.getRadiusAxis(),ot=Math.min(nt,it)/2,st=_.get("radius");st==null?st=[0,"100%"]:isArray$1(st)||(st=[0,st]);var dt=[parsePercent(st[0],ot),parsePercent(st[1],ot)];at.inverse?at.setExtent(dt[1],dt[0]):at.setExtent(dt[0],dt[1])}function updatePolarScale(_e,_){var et=this,tt=et.getAngleAxis(),nt=et.getRadiusAxis();if(tt.scale.setExtent(1/0,-1/0),nt.scale.setExtent(1/0,-1/0),_e.eachSeries(function(ot){if(ot.coordinateSystem===et){var st=ot.getData();each$f(getDataDimensionsOnAxis(st,"radius"),function(dt){nt.scale.unionExtentFromData(st,dt)}),each$f(getDataDimensionsOnAxis(st,"angle"),function(dt){tt.scale.unionExtentFromData(st,dt)})}}),niceScaleExtent(tt.scale,tt.model),niceScaleExtent(nt.scale,nt.model),tt.type==="category"&&!tt.onBand){var it=tt.getExtent(),at=360/tt.scale.count();tt.inverse?it[1]+=at:it[1]-=at,tt.setExtent(it[0],it[1])}}function isAngleAxisModel(_e){return _e.mainType==="angleAxis"}function setAxis(_e,_){var et;if(_e.type=_.get("type"),_e.scale=createScaleByModel$1(_),_e.onBand=_.get("boundaryGap")&&_e.type==="category",_e.inverse=_.get("inverse"),isAngleAxisModel(_)){_e.inverse=_e.inverse!==_.get("clockwise");var tt=_.get("startAngle"),nt=(et=_.get("endAngle"))!==null&&et!==void 0?et:tt+(_e.inverse?-360:360);_e.setExtent(tt,nt)}_.axis=_e,_e.model=_}var polarCreator={dimensions:polarDimensions,create:function(_e,_){var et=[];return _e.eachComponent("polar",function(tt,nt){var it=new Polar(nt+"");it.update=updatePolarScale;var at=it.getRadiusAxis(),ot=it.getAngleAxis(),st=tt.findAxisModel("radiusAxis"),dt=tt.findAxisModel("angleAxis");setAxis(at,st),setAxis(ot,dt),resizePolar(it,tt,_),et.push(it),tt.coordinateSystem=it,it.model=tt}),_e.eachSeries(function(tt){if(tt.get("coordinateSystem")==="polar"){var nt=tt.getReferringComponents("polar",SINGLE_REFERRING).models[0];tt.coordinateSystem=nt.coordinateSystem}}),et}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(_e,_,et){_[1]>_[0]&&(_=_.slice().reverse());var tt=_e.coordToPoint([_[0],et]),nt=_e.coordToPoint([_[1],et]);return{x1:tt[0],y1:tt[1],x2:nt[0],y2:nt[1]}}function getRadiusIdx(_e){var _=_e.getRadiusAxis();return _.inverse?0:1}function fixAngleOverlap(_e){var _=_e[0],et=_e[_e.length-1];_&&et&&Math.abs(Math.abs(_.coord-et.coord)-360)<1e-4&&_e.pop()}var AngleAxisView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.axisPointerClass="PolarAxisPointer",et}return _.prototype.render=function(et,tt){if(this.group.removeAll(),!!et.get("show")){var nt=et.axis,it=nt.polar,at=it.getRadiusAxis().getExtent(),ot=nt.getTicksCoords(),st=nt.getMinorTicksCoords(),dt=map$1(nt.getViewLabels(),function(ht){ht=clone$4(ht);var ct=nt.scale,ut=ct.type==="ordinal"?ct.getRawOrdinalNumber(ht.tickValue):ht.tickValue;return ht.coord=nt.dataToCoord(ut),ht});fixAngleOverlap(dt),fixAngleOverlap(ot),each$f(elementList,function(ht){et.get([ht,"show"])&&(!nt.scale.isBlank()||ht==="axisLine")&&angelAxisElementsBuilders[ht](this.group,et,it,ot,st,at,dt)},this)}},_.type="angleAxis",_}(AxisView),angelAxisElementsBuilders={axisLine:function(_e,_,et,tt,nt,it){var at=_.getModel(["axisLine","lineStyle"]),ot=et.getAngleAxis(),st=Math.PI/180,dt=ot.getExtent(),ht=getRadiusIdx(et),ct=ht?0:1,ut,ft=Math.abs(dt[1]-dt[0])===360?"Circle":"Arc";it[ct]===0?ut=new graphic$1[ft]({shape:{cx:et.cx,cy:et.cy,r:it[ht],startAngle:-dt[0]*st,endAngle:-dt[1]*st,clockwise:ot.inverse},style:at.getLineStyle(),z2:1,silent:!0}):ut=new Ring({shape:{cx:et.cx,cy:et.cy,r:it[ht],r0:it[ct]},style:at.getLineStyle(),z2:1,silent:!0}),ut.style.fill=null,_e.add(ut)},axisTick:function(_e,_,et,tt,nt,it){var at=_.getModel("axisTick"),ot=(at.get("inside")?-1:1)*at.get("length"),st=it[getRadiusIdx(et)],dt=map$1(tt,function(ht){return new Line$1({shape:getAxisLineShape(et,[st,st+ot],ht.coord)})});_e.add(mergePath(dt,{style:defaults(at.getModel("lineStyle").getLineStyle(),{stroke:_.get(["axisLine","lineStyle","color"])})}))},minorTick:function(_e,_,et,tt,nt,it){if(nt.length){for(var at=_.getModel("axisTick"),ot=_.getModel("minorTick"),st=(at.get("inside")?-1:1)*ot.get("length"),dt=it[getRadiusIdx(et)],ht=[],ct=0;ct<nt.length;ct++)for(var ut=0;ut<nt[ct].length;ut++)ht.push(new Line$1({shape:getAxisLineShape(et,[dt,dt+st],nt[ct][ut].coord)}));_e.add(mergePath(ht,{style:defaults(ot.getModel("lineStyle").getLineStyle(),defaults(at.getLineStyle(),{stroke:_.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(_e,_,et,tt,nt,it,at){var ot=_.getCategories(!0),st=_.getModel("axisLabel"),dt=st.get("margin"),ht=_.get("triggerEvent");each$f(at,function(ct,ut){var ft=st,gt=ct.tickValue,mt=it[getRadiusIdx(et)],vt=et.coordToPoint([mt+dt,ct.coord]),yt=et.cx,bt=et.cy,_t=Math.abs(vt[0]-yt)/mt<.3?"center":vt[0]>yt?"left":"right",xt=Math.abs(vt[1]-bt)/mt<.3?"middle":vt[1]>bt?"top":"bottom";if(ot&&ot[gt]){var St=ot[gt];isObject$4(St)&&St.textStyle&&(ft=new Model(St.textStyle,st,st.ecModel))}var Tt=new ZRText({silent:AxisBuilder.isLabelSilent(_),style:createTextStyle$1(ft,{x:vt[0],y:vt[1],fill:ft.getTextColor()||_.get(["axisLine","lineStyle","color"]),text:ct.formattedLabel,align:_t,verticalAlign:xt})});if(_e.add(Tt),ht){var wt=AxisBuilder.makeAxisEventDataBase(_);wt.targetType="axisLabel",wt.value=ct.rawLabel,getECData(Tt).eventData=wt}},this)},splitLine:function(_e,_,et,tt,nt,it){var at=_.getModel("splitLine"),ot=at.getModel("lineStyle"),st=ot.get("color"),dt=0;st=st instanceof Array?st:[st];for(var ht=[],ct=0;ct<tt.length;ct++){var ut=dt++%st.length;ht[ut]=ht[ut]||[],ht[ut].push(new Line$1({shape:getAxisLineShape(et,it,tt[ct].coord)}))}for(var ct=0;ct<ht.length;ct++)_e.add(mergePath(ht[ct],{style:defaults({stroke:st[ct%st.length]},ot.getLineStyle()),silent:!0,z:_.get("z")}))},minorSplitLine:function(_e,_,et,tt,nt,it){if(nt.length){for(var at=_.getModel("minorSplitLine"),ot=at.getModel("lineStyle"),st=[],dt=0;dt<nt.length;dt++)for(var ht=0;ht<nt[dt].length;ht++)st.push(new Line$1({shape:getAxisLineShape(et,it,nt[dt][ht].coord)}));_e.add(mergePath(st,{style:ot.getLineStyle(),silent:!0,z:_.get("z")}))}},splitArea:function(_e,_,et,tt,nt,it){if(tt.length){var at=_.getModel("splitArea"),ot=at.getModel("areaStyle"),st=ot.get("color"),dt=0;st=st instanceof Array?st:[st];for(var ht=[],ct=Math.PI/180,ut=-tt[0].coord*ct,ft=Math.min(it[0],it[1]),gt=Math.max(it[0],it[1]),mt=_.get("clockwise"),vt=1,yt=tt.length;vt<=yt;vt++){var bt=vt===yt?tt[0].coord:tt[vt].coord,_t=dt++%st.length;ht[_t]=ht[_t]||[],ht[_t].push(new Sector({shape:{cx:et.cx,cy:et.cy,r0:ft,r:gt,startAngle:ut,endAngle:-bt*ct,clockwise:mt},silent:!0})),ut=-bt*ct}for(var vt=0;vt<ht.length;vt++)_e.add(mergePath(ht[vt],{style:defaults({fill:st[vt%st.length]},ot.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.axisPointerClass="PolarAxisPointer",et}return _.prototype.render=function(et,tt){if(this.group.removeAll(),!!et.get("show")){var nt=this._axisGroup,it=this._axisGroup=new Group$3;this.group.add(it);var at=et.axis,ot=at.polar,st=ot.getAngleAxis(),dt=at.getTicksCoords(),ht=at.getMinorTicksCoords(),ct=st.getExtent()[0],ut=at.getExtent(),ft=layoutAxis(ot,et,ct),gt=new AxisBuilder(et,ft);each$f(axisBuilderAttrs$1,gt.add,gt),it.add(gt.getGroup()),groupTransition(nt,it,et),each$f(selfBuilderAttrs$1,function(mt){et.get([mt,"show"])&&!at.scale.isBlank()&&axisElementBuilders$1[mt](this.group,et,ot,ct,ut,dt,ht)},this)}},_.type="radiusAxis",_}(AxisView),axisElementBuilders$1={splitLine:function(_e,_,et,tt,nt,it){var at=_.getModel("splitLine"),ot=at.getModel("lineStyle"),st=ot.get("color"),dt=0,ht=et.getAngleAxis(),ct=Math.PI/180,ut=ht.getExtent(),ft=Math.abs(ut[1]-ut[0])===360?"Circle":"Arc";st=st instanceof Array?st:[st];for(var gt=[],mt=0;mt<it.length;mt++){var vt=dt++%st.length;gt[vt]=gt[vt]||[],gt[vt].push(new graphic$1[ft]({shape:{cx:et.cx,cy:et.cy,r:Math.max(it[mt].coord,0),startAngle:-ut[0]*ct,endAngle:-ut[1]*ct,clockwise:ht.inverse}}))}for(var mt=0;mt<gt.length;mt++)_e.add(mergePath(gt[mt],{style:defaults({stroke:st[mt%st.length],fill:null},ot.getLineStyle()),silent:!0}))},minorSplitLine:function(_e,_,et,tt,nt,it,at){if(at.length){for(var ot=_.getModel("minorSplitLine"),st=ot.getModel("lineStyle"),dt=[],ht=0;ht<at.length;ht++)for(var ct=0;ct<at[ht].length;ct++)dt.push(new Circle({shape:{cx:et.cx,cy:et.cy,r:at[ht][ct].coord}}));_e.add(mergePath(dt,{style:defaults({fill:null},st.getLineStyle()),silent:!0}))}},splitArea:function(_e,_,et,tt,nt,it){if(it.length){var at=_.getModel("splitArea"),ot=at.getModel("areaStyle"),st=ot.get("color"),dt=0;st=st instanceof Array?st:[st];for(var ht=[],ct=it[0].coord,ut=1;ut<it.length;ut++){var ft=dt++%st.length;ht[ft]=ht[ft]||[],ht[ft].push(new Sector({shape:{cx:et.cx,cy:et.cy,r0:ct,r:it[ut].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),ct=it[ut].coord}for(var ut=0;ut<ht.length;ut++)_e.add(mergePath(ht[ut],{style:defaults({fill:st[ut%st.length]},ot.getAreaStyle()),silent:!0}))}}};function layoutAxis(_e,_,et){return{position:[_e.cx,_e.cy],rotation:et/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:_.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(_e){return _e.get("stack")||"__ec_stack_"+_e.seriesIndex}function getAxisKey(_e,_){return _.dim+_e.model.componentIndex}function barLayoutPolar(_e,_,et){var tt={},nt=calRadialBar(filter$1(_.getSeriesByType(_e),function(it){return!_.isSeriesFiltered(it)&&it.coordinateSystem&&it.coordinateSystem.type==="polar"}));_.eachSeriesByType(_e,function(it){if(it.coordinateSystem.type==="polar"){var at=it.getData(),ot=it.coordinateSystem,st=ot.getBaseAxis(),dt=getAxisKey(ot,st),ht=getSeriesStackId(it),ct=nt[dt][ht],ut=ct.offset,ft=ct.width,gt=ot.getOtherAxis(st),mt=it.coordinateSystem.cx,vt=it.coordinateSystem.cy,yt=it.get("barMinHeight")||0,bt=it.get("barMinAngle")||0;tt[ht]=tt[ht]||[];for(var _t=at.mapDimension(gt.dim),xt=at.mapDimension(st.dim),St=isDimensionStacked(at,_t),Tt=st.dim!=="radius"||!it.get("roundCap",!0),wt=gt.model,Ct=wt.get("startValue"),Et=gt.dataToCoord(Ct||0),At=0,Pt=at.count();At<Pt;At++){var Rt=at.get(_t,At),It=at.get(xt,At),Mt=Rt>=0?"p":"n",Ot=Et;St&&(tt[ht][It]||(tt[ht][It]={p:Et,n:Et}),Ot=tt[ht][It][Mt]);var $t=void 0,Lt=void 0,kt=void 0,Nt=void 0;if(gt.dim==="radius"){var Vt=gt.dataToCoord(Rt)-Et,zt=st.dataToCoord(It);Math.abs(Vt)<yt&&(Vt=(Vt<0?-1:1)*yt),$t=Ot,Lt=Ot+Vt,kt=zt-ut,Nt=kt-ft,St&&(tt[ht][It][Mt]=Lt)}else{var Xt=gt.dataToCoord(Rt,Tt)-Et,Wt=st.dataToCoord(It);Math.abs(Xt)<bt&&(Xt=(Xt<0?-1:1)*bt),$t=Wt+ut,Lt=$t+ft,kt=Ot,Nt=Ot+Xt,St&&(tt[ht][It][Mt]=Nt)}at.setItemLayout(At,{cx:mt,cy:vt,r0:$t,r:Lt,startAngle:-kt*Math.PI/180,endAngle:-Nt*Math.PI/180,clockwise:kt>=Nt})}}})}function calRadialBar(_e){var _={};each$f(_e,function(tt,nt){var it=tt.getData(),at=tt.coordinateSystem,ot=at.getBaseAxis(),st=getAxisKey(at,ot),dt=ot.getExtent(),ht=ot.type==="category"?ot.getBandWidth():Math.abs(dt[1]-dt[0])/it.count(),ct=_[st]||{bandWidth:ht,remainedWidth:ht,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},ut=ct.stacks;_[st]=ct;var ft=getSeriesStackId(tt);ut[ft]||ct.autoWidthCount++,ut[ft]=ut[ft]||{width:0,maxWidth:0};var gt=parsePercent(tt.get("barWidth"),ht),mt=parsePercent(tt.get("barMaxWidth"),ht),vt=tt.get("barGap"),yt=tt.get("barCategoryGap");gt&&!ut[ft].width&&(gt=Math.min(ct.remainedWidth,gt),ut[ft].width=gt,ct.remainedWidth-=gt),mt&&(ut[ft].maxWidth=mt),vt!=null&&(ct.gap=vt),yt!=null&&(ct.categoryGap=yt)});var et={};return each$f(_,function(tt,nt){et[nt]={};var it=tt.stacks,at=tt.bandWidth,ot=parsePercent(tt.categoryGap,at),st=parsePercent(tt.gap,1),dt=tt.remainedWidth,ht=tt.autoWidthCount,ct=(dt-ot)/(ht+(ht-1)*st);ct=Math.max(ct,0),each$f(it,function(mt,vt){var yt=mt.maxWidth;yt&&yt<ct&&(yt=Math.min(yt,dt),mt.width&&(yt=Math.min(yt,mt.width)),dt-=yt,mt.width=yt,ht--)}),ct=(dt-ot)/(ht+(ht-1)*st),ct=Math.max(ct,0);var ut=0,ft;each$f(it,function(mt,vt){mt.width||(mt.width=ct),ft=mt,ut+=mt.width*(1+st)}),ft&&(ut-=ft.width*st);var gt=-ut/2;each$f(it,function(mt,vt){et[nt][vt]=et[nt][vt]||{offset:gt,width:mt.width},gt+=mt.width*(1+st)})}),et}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="polar",_}(ComponentView);function install$o(_e){use(install$q),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),_e.registerCoordinateSystem("polar",polarCreator),_e.registerComponentModel(PolarModel),_e.registerComponentView(PolarView),axisModelCreator(_e,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(_e,"radius",RadiusAxisModel,radiusAxisExtraOption),_e.registerComponentView(AngleAxisView),_e.registerComponentView(RadiusAxisView),_e.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$2(_e,_){_=_||{};var et=_e.coordinateSystem,tt=_e.axis,nt={},it=tt.position,at=tt.orient,ot=et.getRect(),st=[ot.x,ot.x+ot.width,ot.y,ot.y+ot.height],dt={horizontal:{top:st[2],bottom:st[3]},vertical:{left:st[0],right:st[1]}};nt.position=[at==="vertical"?dt.vertical[it]:st[0],at==="horizontal"?dt.horizontal[it]:st[3]];var ht={horizontal:0,vertical:1};nt.rotation=Math.PI/2*ht[at];var ct={top:-1,bottom:1,right:1,left:-1};nt.labelDirection=nt.tickDirection=nt.nameDirection=ct[it],_e.get(["axisTick","inside"])&&(nt.tickDirection=-nt.tickDirection),retrieve(_.labelInside,_e.get(["axisLabel","inside"]))&&(nt.labelDirection=-nt.labelDirection);var ut=_.rotate;return ut==null&&(ut=_e.get(["axisLabel","rotate"])),nt.labelRotation=it==="top"?-ut:ut,nt.z2=1,nt}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.axisPointerClass="SingleAxisPointer",et}return _.prototype.render=function(et,tt,nt,it){var at=this.group;at.removeAll();var ot=this._axisGroup;this._axisGroup=new Group$3;var st=layout$2(et),dt=new AxisBuilder(et,st);each$f(axisBuilderAttrs,dt.add,dt),at.add(this._axisGroup),at.add(dt.getGroup()),each$f(selfBuilderAttrs,function(ht){et.get([ht,"show"])&&axisElementBuilders[ht](this,this.group,this._axisGroup,et)},this),groupTransition(ot,this._axisGroup,et),_e.prototype.render.call(this,et,tt,nt,it)},_.prototype.remove=function(){rectCoordAxisHandleRemove(this)},_.type="singleAxis",_}(AxisView),axisElementBuilders={splitLine:function(_e,_,et,tt){var nt=tt.axis;if(!nt.scale.isBlank()){var it=tt.getModel("splitLine"),at=it.getModel("lineStyle"),ot=at.get("color");ot=ot instanceof Array?ot:[ot];for(var st=at.get("width"),dt=tt.coordinateSystem.getRect(),ht=nt.isHorizontal(),ct=[],ut=0,ft=nt.getTicksCoords({tickModel:it}),gt=[],mt=[],vt=0;vt<ft.length;++vt){var yt=nt.toGlobalCoord(ft[vt].coord);ht?(gt[0]=yt,gt[1]=dt.y,mt[0]=yt,mt[1]=dt.y+dt.height):(gt[0]=dt.x,gt[1]=yt,mt[0]=dt.x+dt.width,mt[1]=yt);var bt=new Line$1({shape:{x1:gt[0],y1:gt[1],x2:mt[0],y2:mt[1]},silent:!0});subPixelOptimizeLine(bt.shape,st);var _t=ut++%ot.length;ct[_t]=ct[_t]||[],ct[_t].push(bt)}for(var xt=at.getLineStyle(["color"]),vt=0;vt<ct.length;++vt)_.add(mergePath(ct[vt],{style:defaults({stroke:ot[vt%ot.length]},xt),silent:!0}))}},splitArea:function(_e,_,et,tt){rectCoordAxisBuildSplitArea(_e,et,tt,tt)}},SingleAxisModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.getCoordSysModel=function(){return this},_.type="singleAxis",_.layoutMode="box",_.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},_}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(_e){__extends$1(_,_e);function _(et,tt,nt,it,at){var ot=_e.call(this,et,tt,nt)||this;return ot.type=it||"value",ot.position=at||"bottom",ot}return _.prototype.isHorizontal=function(){var et=this.position;return et==="top"||et==="bottom"},_.prototype.pointToData=function(et,tt){return this.coordinateSystem.pointToData(et)[0]},_}(Axis),singleDimensions=["single"],Single=function(){function _e(_,et,tt){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=_,this._init(_,et,tt)}return _e.prototype._init=function(_,et,tt){var nt=this.dimension,it=new SingleAxis(nt,createScaleByModel$1(_),[0,0],_.get("type"),_.get("position")),at=it.type==="category";it.onBand=at&&_.get("boundaryGap"),it.inverse=_.get("inverse"),it.orient=_.get("orient"),_.axis=it,it.model=_,it.coordinateSystem=this,this._axis=it},_e.prototype.update=function(_,et){_.eachSeries(function(tt){if(tt.coordinateSystem===this){var nt=tt.getData();each$f(nt.mapDimensionsAll(this.dimension),function(it){this._axis.scale.unionExtentFromData(nt,it)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},_e.prototype.resize=function(_,et){this._rect=getLayoutRect({left:_.get("left"),top:_.get("top"),right:_.get("right"),bottom:_.get("bottom"),width:_.get("width"),height:_.get("height")},{width:et.getWidth(),height:et.getHeight()}),this._adjustAxis()},_e.prototype.getRect=function(){return this._rect},_e.prototype._adjustAxis=function(){var _=this._rect,et=this._axis,tt=et.isHorizontal(),nt=tt?[0,_.width]:[0,_.height],it=et.inverse?1:0;et.setExtent(nt[it],nt[1-it]),this._updateAxisTransform(et,tt?_.x:_.y)},_e.prototype._updateAxisTransform=function(_,et){var tt=_.getExtent(),nt=tt[0]+tt[1],it=_.isHorizontal();_.toGlobalCoord=it?function(at){return at+et}:function(at){return nt-at+et},_.toLocalCoord=it?function(at){return at-et}:function(at){return nt-at+et}},_e.prototype.getAxis=function(){return this._axis},_e.prototype.getBaseAxis=function(){return this._axis},_e.prototype.getAxes=function(){return[this._axis]},_e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},_e.prototype.containPoint=function(_){var et=this.getRect(),tt=this.getAxis(),nt=tt.orient;return nt==="horizontal"?tt.contain(tt.toLocalCoord(_[0]))&&_[1]>=et.y&&_[1]<=et.y+et.height:tt.contain(tt.toLocalCoord(_[1]))&&_[0]>=et.y&&_[0]<=et.y+et.height},_e.prototype.pointToData=function(_){var et=this.getAxis();return[et.coordToData(et.toLocalCoord(_[et.orient==="horizontal"?0:1]))]},_e.prototype.dataToPoint=function(_){var et=this.getAxis(),tt=this.getRect(),nt=[],it=et.orient==="horizontal"?0:1;return _ instanceof Array&&(_=_[0]),nt[it]=et.toGlobalCoord(et.dataToCoord(+_)),nt[1-it]=it===0?tt.y+tt.height/2:tt.x+tt.width/2,nt},_e.prototype.convertToPixel=function(_,et,tt){var nt=getCoordSys$1(et);return nt===this?this.dataToPoint(tt):null},_e.prototype.convertFromPixel=function(_,et,tt){var nt=getCoordSys$1(et);return nt===this?this.pointToData(tt):null},_e}();function getCoordSys$1(_e){var _=_e.seriesModel,et=_e.singleAxisModel;return et&&et.coordinateSystem||_&&_.coordinateSystem}function create(_e,_){var et=[];return _e.eachComponent("singleAxis",function(tt,nt){var it=new Single(tt,_e,_);it.name="single_"+nt,it.resize(tt,_),tt.coordinateSystem=it,et.push(it)}),_e.eachSeries(function(tt){if(tt.get("coordinateSystem")==="singleAxis"){var nt=tt.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];tt.coordinateSystem=nt&&nt.coordinateSystem}}),et}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.makeElOption=function(et,tt,nt,it,at){var ot=nt.axis,st=ot.coordinateSystem,dt=getGlobalExtent(st,1-getPointDimIndex(ot)),ht=st.dataToPoint(tt)[0],ct=it.get("type");if(ct&&ct!=="none"){var ut=buildElStyle(it),ft=pointerShapeBuilder[ct](ot,ht,dt);ft.style=ut,et.graphicKey=ft.type,et.pointer=ft}var gt=layout$2(nt);buildCartesianSingleLabelElOption(tt,et,gt,nt,it,at)},_.prototype.getHandleTransform=function(et,tt,nt){var it=layout$2(tt,{labelInside:!1});it.labelMargin=nt.get(["handle","margin"]);var at=getTransformedPosition(tt.axis,et,it);return{x:at[0],y:at[1],rotation:it.rotation+(it.labelDirection<0?Math.PI:0)}},_.prototype.updateHandleTransform=function(et,tt,nt,it){var at=nt.axis,ot=at.coordinateSystem,st=getPointDimIndex(at),dt=getGlobalExtent(ot,st),ht=[et.x,et.y];ht[st]+=tt[st],ht[st]=Math.min(dt[1],ht[st]),ht[st]=Math.max(dt[0],ht[st]);var ct=getGlobalExtent(ot,1-st),ut=(ct[1]+ct[0])/2,ft=[ut,ut];return ft[st]=ht[st],{x:ht[0],y:ht[1],rotation:et.rotation,cursorPoint:ft,tooltipOption:{verticalAlign:"middle"}}},_}(BaseAxisPointer),pointerShapeBuilder={line:function(_e,_,et){var tt=makeLineShape([_,et[0]],[_,et[1]],getPointDimIndex(_e));return{type:"Line",subPixelOptimize:!0,shape:tt}},shadow:function(_e,_,et){var tt=_e.getBandWidth(),nt=et[1]-et[0];return{type:"Rect",shape:makeRectShape([_-tt/2,et[0]],[tt,nt],getPointDimIndex(_e))}}};function getPointDimIndex(_e){return _e.isHorizontal()?0:1}function getGlobalExtent(_e,_){var et=_e.getRect();return[et[XY$1[_]],et[XY$1[_]]+et[WH$1[_]]]}var SingleView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="single",_}(ComponentView);function install$n(_e){use(install$q),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),_e.registerComponentView(SingleView),_e.registerComponentView(SingleAxisView),_e.registerComponentModel(SingleAxisModel),axisModelCreator(_e,"single",SingleAxisModel,SingleAxisModel.defaultOption),_e.registerCoordinateSystem("single",singleCreator)}var CalendarModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(et,tt,nt){var it=getLayoutParams(et);_e.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(et,it)},_.prototype.mergeOption=function(et){_e.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,et)},_.prototype.getCellSize=function(){return this.option.cellSize},_.type="calendar",_.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},_}(ComponentModel);function mergeAndNormalizeLayoutParams$1(_e,_){var et=_e.cellSize,tt;isArray$1(et)?tt=et:tt=_e.cellSize=[et,et],tt.length===1&&(tt[1]=tt[0]);var nt=map$1([0,1],function(it){return sizeCalculable(_,it)&&(tt[it]="auto"),tt[it]!=null&&tt[it]!=="auto"});mergeLayoutParam(_e,_,{type:"box",ignoreSize:nt})}var CalendarView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){var it=this.group;it.removeAll();var at=et.coordinateSystem,ot=at.getRangeInfo(),st=at.getOrient(),dt=tt.getLocaleModel();this._renderDayRect(et,ot,it),this._renderLines(et,ot,st,it),this._renderYearText(et,ot,st,it),this._renderMonthText(et,dt,st,it),this._renderWeekText(et,dt,ot,st,it)},_.prototype._renderDayRect=function(et,tt,nt){for(var it=et.coordinateSystem,at=et.getModel("itemStyle").getItemStyle(),ot=it.getCellWidth(),st=it.getCellHeight(),dt=tt.start.time;dt<=tt.end.time;dt=it.getNextNDay(dt,1).time){var ht=it.dataToRect([dt],!1).tl,ct=new Rect$2({shape:{x:ht[0],y:ht[1],width:ot,height:st},cursor:"default",style:at});nt.add(ct)}},_.prototype._renderLines=function(et,tt,nt,it){var at=this,ot=et.coordinateSystem,st=et.getModel(["splitLine","lineStyle"]).getLineStyle(),dt=et.get(["splitLine","show"]),ht=st.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var ct=tt.start,ut=0;ct.time<=tt.end.time;ut++){gt(ct.formatedDate),ut===0&&(ct=ot.getDateInfo(tt.start.y+"-"+tt.start.m));var ft=ct.date;ft.setMonth(ft.getMonth()+1),ct=ot.getDateInfo(ft)}gt(ot.getNextNDay(tt.end.time,1).formatedDate);function gt(mt){at._firstDayOfMonth.push(ot.getDateInfo(mt)),at._firstDayPoints.push(ot.dataToRect([mt],!1).tl);var vt=at._getLinePointsOfOneWeek(et,mt,nt);at._tlpoints.push(vt[0]),at._blpoints.push(vt[vt.length-1]),dt&&at._drawSplitline(vt,st,it)}dt&&this._drawSplitline(at._getEdgesPoints(at._tlpoints,ht,nt),st,it),dt&&this._drawSplitline(at._getEdgesPoints(at._blpoints,ht,nt),st,it)},_.prototype._getEdgesPoints=function(et,tt,nt){var it=[et[0].slice(),et[et.length-1].slice()],at=nt==="horizontal"?0:1;return it[0][at]=it[0][at]-tt/2,it[1][at]=it[1][at]+tt/2,it},_.prototype._drawSplitline=function(et,tt,nt){var it=new Polyline$1({z2:20,shape:{points:et},style:tt});nt.add(it)},_.prototype._getLinePointsOfOneWeek=function(et,tt,nt){for(var it=et.coordinateSystem,at=it.getDateInfo(tt),ot=[],st=0;st<7;st++){var dt=it.getNextNDay(at.time,st),ht=it.dataToRect([dt.time],!1);ot[2*dt.day]=ht.tl,ot[2*dt.day+1]=ht[nt==="horizontal"?"bl":"tr"]}return ot},_.prototype._formatterLabel=function(et,tt){return isString$1(et)&&et?formatTplSimple(et,tt):isFunction$3(et)?et(tt):tt.nameMap},_.prototype._yearTextPositionControl=function(et,tt,nt,it,at){var ot=tt[0],st=tt[1],dt=["center","bottom"];it==="bottom"?(st+=at,dt=["center","top"]):it==="left"?ot-=at:it==="right"?(ot+=at,dt=["center","top"]):st-=at;var ht=0;return(it==="left"||it==="right")&&(ht=Math.PI/2),{rotation:ht,x:ot,y:st,style:{align:dt[0],verticalAlign:dt[1]}}},_.prototype._renderYearText=function(et,tt,nt,it){var at=et.getModel("yearLabel");if(at.get("show")){var ot=at.get("margin"),st=at.get("position");st||(st=nt!=="horizontal"?"top":"left");var dt=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],ht=(dt[0][0]+dt[1][0])/2,ct=(dt[0][1]+dt[1][1])/2,ut=nt==="horizontal"?0:1,ft={top:[ht,dt[ut][1]],bottom:[ht,dt[1-ut][1]],left:[dt[1-ut][0],ct],right:[dt[ut][0],ct]},gt=tt.start.y;+tt.end.y>+tt.start.y&&(gt=gt+"-"+tt.end.y);var mt=at.get("formatter"),vt={start:tt.start.y,end:tt.end.y,nameMap:gt},yt=this._formatterLabel(mt,vt),bt=new ZRText({z2:30,style:createTextStyle$1(at,{text:yt}),silent:at.get("silent")});bt.attr(this._yearTextPositionControl(bt,ft[st],nt,st,ot)),it.add(bt)}},_.prototype._monthTextPositionControl=function(et,tt,nt,it,at){var ot="left",st="top",dt=et[0],ht=et[1];return nt==="horizontal"?(ht=ht+at,tt&&(ot="center"),it==="start"&&(st="bottom")):(dt=dt+at,tt&&(st="middle"),it==="start"&&(ot="right")),{x:dt,y:ht,align:ot,verticalAlign:st}},_.prototype._renderMonthText=function(et,tt,nt,it){var at=et.getModel("monthLabel");if(at.get("show")){var ot=at.get("nameMap"),st=at.get("margin"),dt=at.get("position"),ht=at.get("align"),ct=[this._tlpoints,this._blpoints];(!ot||isString$1(ot))&&(ot&&(tt=getLocaleModel(ot)||tt),ot=tt.get(["time","monthAbbr"])||[]);var ut=dt==="start"?0:1,ft=nt==="horizontal"?0:1;st=dt==="start"?-st:st;for(var gt=ht==="center",mt=at.get("silent"),vt=0;vt<ct[ut].length-1;vt++){var yt=ct[ut][vt].slice(),bt=this._firstDayOfMonth[vt];if(gt){var _t=this._firstDayPoints[vt];yt[ft]=(_t[ft]+ct[0][vt+1][ft])/2}var xt=at.get("formatter"),St=ot[+bt.m-1],Tt={yyyy:bt.y,yy:(bt.y+"").slice(2),MM:bt.m,M:+bt.m,nameMap:St},wt=this._formatterLabel(xt,Tt),Ct=new ZRText({z2:30,style:extend(createTextStyle$1(at,{text:wt}),this._monthTextPositionControl(yt,gt,nt,dt,st)),silent:mt});it.add(Ct)}}},_.prototype._weekTextPositionControl=function(et,tt,nt,it,at){var ot="center",st="middle",dt=et[0],ht=et[1],ct=nt==="start";return tt==="horizontal"?(dt=dt+it+(ct?1:-1)*at[0]/2,ot=ct?"right":"left"):(ht=ht+it+(ct?1:-1)*at[1]/2,st=ct?"bottom":"top"),{x:dt,y:ht,align:ot,verticalAlign:st}},_.prototype._renderWeekText=function(et,tt,nt,it,at){var ot=et.getModel("dayLabel");if(ot.get("show")){var st=et.coordinateSystem,dt=ot.get("position"),ht=ot.get("nameMap"),ct=ot.get("margin"),ut=st.getFirstDayOfWeek();if(!ht||isString$1(ht)){ht&&(tt=getLocaleModel(ht)||tt);var ft=tt.get(["time","dayOfWeekShort"]);ht=ft||map$1(tt.get(["time","dayOfWeekAbbr"]),function(Tt){return Tt[0]})}var gt=st.getNextNDay(nt.end.time,7-nt.lweek).time,mt=[st.getCellWidth(),st.getCellHeight()];ct=parsePercent(ct,Math.min(mt[1],mt[0])),dt==="start"&&(gt=st.getNextNDay(nt.start.time,-(7+nt.fweek)).time,ct=-ct);for(var vt=ot.get("silent"),yt=0;yt<7;yt++){var bt=st.getNextNDay(gt,yt),_t=st.dataToRect([bt.time],!1).center,xt=yt;xt=Math.abs((yt+ut)%7);var St=new ZRText({z2:30,style:extend(createTextStyle$1(ot,{text:ht[xt]}),this._weekTextPositionControl(_t,it,dt,ct,mt)),silent:vt});at.add(St)}}},_.type="calendar",_}(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=function(){function _e(_,et,tt){this.type="calendar",this.dimensions=_e.dimensions,this.getDimensionsInfo=_e.getDimensionsInfo,this._model=_}return _e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},_e.prototype.getRangeInfo=function(){return this._rangeInfo},_e.prototype.getModel=function(){return this._model},_e.prototype.getRect=function(){return this._rect},_e.prototype.getCellWidth=function(){return this._sw},_e.prototype.getCellHeight=function(){return this._sh},_e.prototype.getOrient=function(){return this._orient},_e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},_e.prototype.getDateInfo=function(_){_=parseDate(_);var et=_.getFullYear(),tt=_.getMonth()+1,nt=tt<10?"0"+tt:""+tt,it=_.getDate(),at=it<10?"0"+it:""+it,ot=_.getDay();return ot=Math.abs((ot+7-this.getFirstDayOfWeek())%7),{y:et+"",m:nt,d:at,day:ot,time:_.getTime(),formatedDate:et+"-"+nt+"-"+at,date:_}},_e.prototype.getNextNDay=function(_,et){return et=et||0,et===0?this.getDateInfo(_):(_=new Date(this.getDateInfo(_).time),_.setDate(_.getDate()+et),this.getDateInfo(_))},_e.prototype.update=function(_,et){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var tt=this._rangeInfo.weeks||1,nt=["width","height"],it=this._model.getCellSize().slice(),at=this._model.getBoxLayoutParams(),ot=this._orient==="horizontal"?[tt,7]:[7,tt];each$f([0,1],function(ct){ht(it,ct)&&(at[nt[ct]]=it[ct]*ot[ct])});var st={width:et.getWidth(),height:et.getHeight()},dt=this._rect=getLayoutRect(at,st);each$f([0,1],function(ct){ht(it,ct)||(it[ct]=dt[nt[ct]]/ot[ct])});function ht(ct,ut){return ct[ut]!=null&&ct[ut]!=="auto"}this._sw=it[0],this._sh=it[1]},_e.prototype.dataToPoint=function(_,et){isArray$1(_)&&(_=_[0]),et==null&&(et=!0);var tt=this.getDateInfo(_),nt=this._rangeInfo,it=tt.formatedDate;if(et&&!(tt.time>=nt.start.time&&tt.time<nt.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var at=tt.day,ot=this._getRangeInfo([nt.start.time,it]).nthWeek;return this._orient==="vertical"?[this._rect.x+at*this._sw+this._sw/2,this._rect.y+ot*this._sh+this._sh/2]:[this._rect.x+ot*this._sw+this._sw/2,this._rect.y+at*this._sh+this._sh/2]},_e.prototype.pointToData=function(_){var et=this.pointToDate(_);return et&&et.time},_e.prototype.dataToRect=function(_,et){var tt=this.dataToPoint(_,et);return{contentShape:{x:tt[0]-(this._sw-this._lineWidth)/2,y:tt[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:tt,tl:[tt[0]-this._sw/2,tt[1]-this._sh/2],tr:[tt[0]+this._sw/2,tt[1]-this._sh/2],br:[tt[0]+this._sw/2,tt[1]+this._sh/2],bl:[tt[0]-this._sw/2,tt[1]+this._sh/2]}},_e.prototype.pointToDate=function(_){var et=Math.floor((_[0]-this._rect.x)/this._sw)+1,tt=Math.floor((_[1]-this._rect.y)/this._sh)+1,nt=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(tt,et-1,nt):this._getDateByWeeksAndDay(et,tt-1,nt)},_e.prototype.convertToPixel=function(_,et,tt){var nt=getCoordSys(et);return nt===this?nt.dataToPoint(tt):null},_e.prototype.convertFromPixel=function(_,et,tt){var nt=getCoordSys(et);return nt===this?nt.pointToData(tt):null},_e.prototype.containPoint=function(_){return console.warn("Not implemented."),!1},_e.prototype._initRangeOption=function(){var _=this._model.get("range"),et;if(isArray$1(_)&&_.length===1&&(_=_[0]),isArray$1(_))et=_;else{var tt=_.toString();if(/^\d{4}$/.test(tt)&&(et=[tt+"-01-01",tt+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(tt)){var nt=this.getDateInfo(tt),it=nt.date;it.setMonth(it.getMonth()+1);var at=this.getNextNDay(it,-1);et=[nt.formatedDate,at.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(tt)&&(et=[tt,tt])}if(!et)return _;var ot=this._getRangeInfo(et);return ot.start.time>ot.end.time&&et.reverse(),et},_e.prototype._getRangeInfo=function(_){var et=[this.getDateInfo(_[0]),this.getDateInfo(_[1])],tt;et[0].time>et[1].time&&(tt=!0,et.reverse());var nt=Math.floor(et[1].time/PROXIMATE_ONE_DAY)-Math.floor(et[0].time/PROXIMATE_ONE_DAY)+1,it=new Date(et[0].time),at=it.getDate(),ot=et[1].date.getDate();it.setDate(at+nt-1);var st=it.getDate();if(st!==ot)for(var dt=it.getTime()-et[1].time>0?1:-1;(st=it.getDate())!==ot&&(it.getTime()-et[1].time)*dt>0;)nt-=dt,it.setDate(st-dt);var ht=Math.floor((nt+et[0].day+6)/7),ct=tt?-ht+1:ht-1;return tt&&et.reverse(),{range:[et[0].formatedDate,et[1].formatedDate],start:et[0],end:et[1],allDay:nt,weeks:ht,nthWeek:ct,fweek:et[0].day,lweek:et[1].day}},_e.prototype._getDateByWeeksAndDay=function(_,et,tt){var nt=this._getRangeInfo(tt);if(_>nt.weeks||_===0&&et<nt.fweek||_===nt.weeks&&et>nt.lweek)return null;var it=(_-1)*7-nt.fweek+et,at=new Date(nt.start.time);return at.setDate(+nt.start.d+it),this.getDateInfo(at)},_e.create=function(_,et){var tt=[];return _.eachComponent("calendar",function(nt){var it=new _e(nt);tt.push(it),nt.coordinateSystem=it}),_.eachSeries(function(nt){nt.get("coordinateSystem")==="calendar"&&(nt.coordinateSystem=tt[nt.get("calendarIndex")||0])}),tt},_e.dimensions=["time","value"],_e}();function getCoordSys(_e){var _=_e.calendarModel,et=_e.seriesModel,tt=_?_.coordinateSystem:et?et.coordinateSystem:null;return tt}function install$m(_e){_e.registerComponentModel(CalendarModel),_e.registerComponentView(CalendarView),_e.registerCoordinateSystem("calendar",Calendar)}function setKeyInfoToNewElOption(_e,_){var et=_e.existing;if(_.id=_e.keyInfo.id,!_.type&&et&&(_.type=et.type),_.parentId==null){var tt=_.parentOption;tt?_.parentId=tt.id:et&&(_.parentId=et.parentId)}_.parentOption=null}function isSetLoc(_e,_){var et;return each$f(_,function(tt){_e[tt]!=null&&_e[tt]!=="auto"&&(et=!0)}),et}function mergeNewElOptionToExist(_e,_,et){var tt=extend({},et),nt=_e[_],it=et.$action||"merge";it==="merge"?nt?(merge$1(nt,tt,!0),mergeLayoutParam(nt,tt,{ignoreSize:!0}),copyLayoutParams(et,nt),copyTransitionInfo(et,nt),copyTransitionInfo(et,nt,"shape"),copyTransitionInfo(et,nt,"style"),copyTransitionInfo(et,nt,"extra"),et.clipPath=nt.clipPath):_e[_]=tt:it==="replace"?_e[_]=tt:it==="remove"&&nt&&(_e[_]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(_e,_,et){if(et&&(!_e[et]&&_[et]&&(_e[et]={}),_e=_e[et],_=_[et]),!(!_e||!_))for(var tt=et?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,nt=0;nt<tt.length;nt++){var it=tt[nt];_e[it]==null&&_[it]!=null&&(_e[it]=_[it])}}function setLayoutInfoToExist(_e,_){if(_e&&(_e.hv=_.hv=[isSetLoc(_,["left","right"]),isSetLoc(_,["top","bottom"])],_e.type==="group")){var et=_e,tt=_;et.width==null&&(et.width=tt.width=0),et.height==null&&(et.height=tt.height=0)}}var GraphicComponentModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.preventAutoZ=!0,et}return _.prototype.mergeOption=function(et,tt){var nt=this.option.elements;this.option.elements=null,_e.prototype.mergeOption.call(this,et,tt),this.option.elements=nt},_.prototype.optionUpdated=function(et,tt){var nt=this.option,it=(tt?nt:et).elements,at=nt.elements=tt?[]:nt.elements,ot=[];this._flatten(it,ot,null);var st=mappingToExists(at,ot,"normalMerge"),dt=this._elOptionsToUpdate=[];each$f(st,function(ht,ct){var ut=ht.newOption;ut&&(dt.push(ut),setKeyInfoToNewElOption(ht,ut),mergeNewElOptionToExist(at,ct,ut),setLayoutInfoToExist(at[ct],ut))},this),nt.elements=filter$1(at,function(ht){return ht&&delete ht.$action,ht!=null})},_.prototype._flatten=function(et,tt,nt){each$f(et,function(it){if(it){nt&&(it.parentOption=nt),tt.push(it);var at=it.children;at&&at.length&&this._flatten(at,tt,it),delete it.children}},this)},_.prototype.useElOptionsToUpdate=function(){var et=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,et},_.type="graphic",_.defaultOption={elements:[]},_}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(){this._elMap=createHashMap()},_.prototype.render=function(et,tt,nt){et!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=et,this._updateElements(et),this._relocate(et,nt)},_.prototype._updateElements=function(et){var tt=et.useElOptionsToUpdate();if(tt){var nt=this._elMap,it=this.group,at=et.get("z"),ot=et.get("zlevel");each$f(tt,function(st){var dt=convertOptionIdName(st.id,null),ht=dt!=null?nt.get(dt):null,ct=convertOptionIdName(st.parentId,null),ut=ct!=null?nt.get(ct):it,ft=st.type,gt=st.style;ft==="text"&&gt&&st.hv&&st.hv[1]&&(gt.textVerticalAlign=gt.textBaseline=gt.verticalAlign=gt.align=null);var mt=st.textContent,vt=st.textConfig;if(gt&&isEC4CompatibleStyle(gt,ft,!!vt,!!mt)){var yt=convertFromEC4CompatibleStyle(gt,ft,!0);!vt&&yt.textConfig&&(vt=st.textConfig=yt.textConfig),!mt&&yt.textContent&&(mt=yt.textContent)}var bt=getCleanedElOption(st),_t=st.$action||"merge",xt=_t==="merge",St=_t==="replace";if(xt){var Tt=!ht,wt=ht;Tt?wt=createEl(dt,ut,st.type,nt):(wt&&(inner$7(wt).isNew=!1),stopPreviousKeyframeAnimationAndRestore(wt)),wt&&(applyUpdateTransition(wt,bt,et,{isInit:Tt}),updateCommonAttrs(wt,st,at,ot))}else if(St){removeEl$1(ht,st,nt,et);var Ct=createEl(dt,ut,st.type,nt);Ct&&(applyUpdateTransition(Ct,bt,et,{isInit:!0}),updateCommonAttrs(Ct,st,at,ot))}else _t==="remove"&&(updateLeaveTo(ht,st),removeEl$1(ht,st,nt,et));var Et=nt.get(dt);if(Et&&mt)if(xt){var At=Et.getTextContent();At?At.attr(mt):Et.setTextContent(new ZRText(mt))}else St&&Et.setTextContent(new ZRText(mt));if(Et){var Pt=st.clipPath;if(Pt){var Rt=Pt.type,It=void 0,Tt=!1;if(xt){var Mt=Et.getClipPath();Tt=!Mt||inner$7(Mt).type!==Rt,It=Tt?newEl(Rt):Mt}else St&&(Tt=!0,It=newEl(Rt));Et.setClipPath(It),applyUpdateTransition(It,Pt,et,{isInit:Tt}),applyKeyframeAnimation(It,Pt.keyframeAnimation,et)}var Ot=inner$7(Et);Et.setTextConfig(vt),Ot.option=st,setEventData(Et,et,st),setTooltipConfig({el:Et,componentModel:et,itemName:Et.name,itemTooltipOption:st.tooltip}),applyKeyframeAnimation(Et,st.keyframeAnimation,et)}})}},_.prototype._relocate=function(et,tt){for(var nt=et.option.elements,it=this.group,at=this._elMap,ot=tt.getWidth(),st=tt.getHeight(),dt=["x","y"],ht=0;ht<nt.length;ht++){var ct=nt[ht],ut=convertOptionIdName(ct.id,null),ft=ut!=null?at.get(ut):null;if(!(!ft||!ft.isGroup)){var gt=ft.parent,mt=gt===it,vt=inner$7(ft),yt=inner$7(gt);vt.width=parsePercent(vt.option.width,mt?ot:yt.width)||0,vt.height=parsePercent(vt.option.height,mt?st:yt.height)||0}}for(var ht=nt.length-1;ht>=0;ht--){var ct=nt[ht],ut=convertOptionIdName(ct.id,null),ft=ut!=null?at.get(ut):null;if(ft){var gt=ft.parent,yt=inner$7(gt),bt=gt===it?{width:ot,height:st}:{width:yt.width,height:yt.height},_t={},xt=positionElement(ft,ct,bt,null,{hv:ct.hv,boundingMode:ct.bounding},_t);if(!inner$7(ft).isNew&&xt){for(var St=ct.transition,Tt={},wt=0;wt<dt.length;wt++){var Ct=dt[wt],Et=_t[Ct];St&&(isTransitionAll(St)||indexOf(St,Ct)>=0)?Tt[Ct]=Et:ft[Ct]=Et}updateProps$1(ft,Tt,et,0)}else ft.attr(_t)}}},_.prototype._clear=function(){var et=this,tt=this._elMap;tt.each(function(nt){removeEl$1(nt,inner$7(nt).option,tt,et._lastGraphicModel)}),this._elMap=createHashMap()},_.prototype.dispose=function(){this._clear()},_.type="graphic",_}(ComponentView);function newEl(_e){var _=hasOwn(nonShapeGraphicElements,_e)?nonShapeGraphicElements[_e]:getShapeClass(_e),et=new _({});return inner$7(et).type=_e,et}function createEl(_e,_,et,tt){var nt=newEl(et);return _.add(nt),tt.set(_e,nt),inner$7(nt).id=_e,inner$7(nt).isNew=!0,nt}function removeEl$1(_e,_,et,tt){var nt=_e&&_e.parent;nt&&(_e.type==="group"&&_e.traverse(function(it){removeEl$1(it,_,et,tt)}),applyLeaveTransition(_e,_,tt),et.removeKey(inner$7(_e).id))}function updateCommonAttrs(_e,_,et,tt){_e.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",tt||0],["z",et||0],["z2",0]],function(nt){var it=nt[0];hasOwn(_,it)?_e[it]=retrieve2(_[it],nt[1]):_e[it]==null&&(_e[it]=nt[1])}),each$f(keys(_),function(nt){if(nt.indexOf("on")===0){var it=_[nt];_e[nt]=isFunction$3(it)?it:null}}),hasOwn(_,"draggable")&&(_e.draggable=_.draggable),_.name!=null&&(_e.name=_.name),_.id!=null&&(_e.id=_.id)}function getCleanedElOption(_e){return _e=extend({},_e),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(_){delete _e[_]}),_e}function setEventData(_e,_,et){var tt=getECData(_e).eventData;!_e.silent&&!_e.ignore&&!tt&&(tt=getECData(_e).eventData={componentType:"graphic",componentIndex:_.componentIndex,name:_e.name}),tt&&(tt.info=et.info)}function install$l(_e){_e.registerComponentModel(GraphicComponentModel),_e.registerComponentView(GraphicComponentView),_e.registerPreprocessor(function(_){var et=_.graphic;isArray$1(et)?!et[0]||!et[0].elements?_.graphic=[{elements:et}]:_.graphic=[_.graphic[0]]:et&&!et.elements&&(_.graphic=[{elements:[et]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(_e){var _=_e.get("coordinateSystem");return indexOf(SERIES_COORDS,_)>=0}function getAxisMainType(_e){return _e+"Axis"}function findEffectedDataZooms(_e,_){var et=createHashMap(),tt=[],nt=createHashMap();_e.eachComponent({mainType:"dataZoom",query:_},function(ht){nt.get(ht.uid)||ot(ht)});var it;do it=!1,_e.eachComponent("dataZoom",at);while(it);function at(ht){!nt.get(ht.uid)&&st(ht)&&(ot(ht),it=!0)}function ot(ht){nt.set(ht.uid,!0),tt.push(ht),dt(ht)}function st(ht){var ct=!1;return ht.eachTargetAxis(function(ut,ft){var gt=et.get(ut);gt&&gt[ft]&&(ct=!0)}),ct}function dt(ht){ht.eachTargetAxis(function(ct,ut){(et.get(ct)||et.set(ct,[]))[ut]=!0})}return tt}function collectReferCoordSysModelInfo(_e){var _=_e.ecModel,et={infoList:[],infoMap:createHashMap()};return _e.eachTargetAxis(function(tt,nt){var it=_.getComponent(getAxisMainType(tt),nt);if(it){var at=it.getCoordSysModel();if(at){var ot=at.uid,st=et.infoMap.get(ot);st||(st={model:at,axisModels:[]},et.infoList.push(st),et.infoMap.set(ot,st)),st.axisModels.push(it)}}}),et}var DataZoomAxisInfo=function(){function _e(){this.indexList=[],this.indexMap=[]}return _e.prototype.add=function(_){this.indexMap[_]||(this.indexList.push(_),this.indexMap[_]=!0)},_e}(),DataZoomModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et._autoThrottle=!0,et._noTarget=!0,et._rangePropMode=["percent","percent"],et}return _.prototype.init=function(et,tt,nt){var it=retrieveRawOption(et);this.settledOption=it,this.mergeDefaultAndTheme(et,nt),this._doInit(it)},_.prototype.mergeOption=function(et){var tt=retrieveRawOption(et);merge$1(this.option,et,!0),merge$1(this.settledOption,tt,!0),this._doInit(tt)},_.prototype._doInit=function(et){var tt=this.option;this._setDefaultThrottle(et),this._updateRangeUse(et);var nt=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(it,at){this._rangePropMode[at]==="value"&&(tt[it[0]]=nt[it[0]]=null)},this),this._resetTarget()},_.prototype._resetTarget=function(){var et=this.get("orient",!0),tt=this._targetAxisInfoMap=createHashMap(),nt=this._fillSpecifiedTargetAxis(tt);nt?this._orient=et||this._makeAutoOrientByTargetAxis():(this._orient=et||"horizontal",this._fillAutoTargetAxisByOrient(tt,this._orient)),this._noTarget=!0,tt.each(function(it){it.indexList.length&&(this._noTarget=!1)},this)},_.prototype._fillSpecifiedTargetAxis=function(et){var tt=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(nt){var it=this.getReferringComponents(getAxisMainType(nt),MULTIPLE_REFERRING);if(it.specified){tt=!0;var at=new DataZoomAxisInfo;each$f(it.models,function(ot){at.add(ot.componentIndex)}),et.set(nt,at)}},this),tt},_.prototype._fillAutoTargetAxisByOrient=function(et,tt){var nt=this.ecModel,it=!0;if(it){var at=tt==="vertical"?"y":"x",ot=nt.findComponents({mainType:at+"Axis"});st(ot,at)}if(it){var ot=nt.findComponents({mainType:"singleAxis",filter:function(ht){return ht.get("orient",!0)===tt}});st(ot,"single")}function st(dt,ht){var ct=dt[0];if(ct){var ut=new DataZoomAxisInfo;if(ut.add(ct.componentIndex),et.set(ht,ut),it=!1,ht==="x"||ht==="y"){var ft=ct.getReferringComponents("grid",SINGLE_REFERRING).models[0];ft&&each$f(dt,function(gt){ct.componentIndex!==gt.componentIndex&&ft===gt.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&ut.add(gt.componentIndex)})}}}it&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(dt){if(it){var ht=nt.findComponents({mainType:getAxisMainType(dt),filter:function(ut){return ut.get("type",!0)==="category"}});if(ht[0]){var ct=new DataZoomAxisInfo;ct.add(ht[0].componentIndex),et.set(dt,ct),it=!1}}},this)},_.prototype._makeAutoOrientByTargetAxis=function(){var et;return this.eachTargetAxis(function(tt){!et&&(et=tt)},this),et==="y"?"vertical":"horizontal"},_.prototype._setDefaultThrottle=function(et){if(et.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var tt=this.ecModel.option;this.option.throttle=tt.animation&&tt.animationDurationUpdate>0?100:20}},_.prototype._updateRangeUse=function(et){var tt=this._rangePropMode,nt=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(it,at){var ot=et[it[0]]!=null,st=et[it[1]]!=null;ot&&!st?tt[at]="percent":!ot&&st?tt[at]="value":nt?tt[at]=nt[at]:ot&&(tt[at]="percent")})},_.prototype.noTarget=function(){return this._noTarget},_.prototype.getFirstTargetAxisModel=function(){var et;return this.eachTargetAxis(function(tt,nt){et==null&&(et=this.ecModel.getComponent(getAxisMainType(tt),nt))},this),et},_.prototype.eachTargetAxis=function(et,tt){this._targetAxisInfoMap.each(function(nt,it){each$f(nt.indexList,function(at){et.call(tt,it,at)})})},_.prototype.getAxisProxy=function(et,tt){var nt=this.getAxisModel(et,tt);if(nt)return nt.__dzAxisProxy},_.prototype.getAxisModel=function(et,tt){var nt=this._targetAxisInfoMap.get(et);if(nt&&nt.indexMap[tt])return this.ecModel.getComponent(getAxisMainType(et),tt)},_.prototype.setRawRange=function(et){var tt=this.option,nt=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(it){(et[it[0]]!=null||et[it[1]]!=null)&&(tt[it[0]]=nt[it[0]]=et[it[0]],tt[it[1]]=nt[it[1]]=et[it[1]])},this),this._updateRangeUse(et)},_.prototype.setCalculatedRange=function(et){var tt=this.option;each$f(["start","startValue","end","endValue"],function(nt){tt[nt]=et[nt]})},_.prototype.getPercentRange=function(){var et=this.findRepresentativeAxisProxy();if(et)return et.getDataPercentWindow()},_.prototype.getValueRange=function(et,tt){if(et==null&&tt==null){var nt=this.findRepresentativeAxisProxy();if(nt)return nt.getDataValueWindow()}else return this.getAxisProxy(et,tt).getDataValueWindow()},_.prototype.findRepresentativeAxisProxy=function(et){if(et)return et.__dzAxisProxy;for(var tt,nt=this._targetAxisInfoMap.keys(),it=0;it<nt.length;it++)for(var at=nt[it],ot=this._targetAxisInfoMap.get(at),st=0;st<ot.indexList.length;st++){var dt=this.getAxisProxy(at,ot.indexList[st]);if(dt.hostedBy(this))return dt;tt||(tt=dt)}return tt},_.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},_.prototype.getOrient=function(){return this._orient},_.type="dataZoom",_.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],_.defaultOption={z:4,filterMode:"filter",start:0,end:100},_}(ComponentModel);function retrieveRawOption(_e){var _={};return each$f(["start","end","startValue","endValue","throttle"],function(et){_e.hasOwnProperty(et)&&(_[et]=_e[et])}),_}var SelectDataZoomModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="dataZoom.select",_}(DataZoomModel),DataZoomView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt,it){this.dataZoomModel=et,this.ecModel=tt,this.api=nt},_.type="dataZoom",_}(ComponentView),SelectDataZoomView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="dataZoom.select",_}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function _e(_,et,tt,nt){this._dimName=_,this._axisIndex=et,this.ecModel=nt,this._dataZoomModel=tt}return _e.prototype.hostedBy=function(_){return this._dataZoomModel===_},_e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},_e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},_e.prototype.getTargetSeriesModels=function(){var _=[];return this.ecModel.eachSeries(function(et){if(isCoordSupported(et)){var tt=getAxisMainType(this._dimName),nt=et.getReferringComponents(tt,SINGLE_REFERRING).models[0];nt&&this._axisIndex===nt.componentIndex&&_.push(et)}},this),_},_e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},_e.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},_e.prototype.calculateDataWindow=function(_){var et=this._dataExtent,tt=this.getAxisModel(),nt=tt.axis.scale,it=this._dataZoomModel.getRangePropMode(),at=[0,100],ot=[],st=[],dt;each$7(["start","end"],function(ut,ft){var gt=_[ut],mt=_[ut+"Value"];it[ft]==="percent"?(gt==null&&(gt=at[ft]),mt=nt.parse(linearMap$2(gt,at,et))):(dt=!0,mt=mt==null?et[ft]:nt.parse(mt),gt=linearMap$2(mt,et,at)),st[ft]=mt==null||isNaN(mt)?et[ft]:mt,ot[ft]=gt==null||isNaN(gt)?at[ft]:gt}),asc$1(st),asc$1(ot);var ht=this._minMaxSpan;dt?ct(st,ot,et,at,!1):ct(ot,st,at,et,!0);function ct(ut,ft,gt,mt,vt){var yt=vt?"Span":"ValueSpan";sliderMove(0,ut,gt,"all",ht["min"+yt],ht["max"+yt]);for(var bt=0;bt<2;bt++)ft[bt]=linearMap$2(ut[bt],gt,mt,!0),vt&&(ft[bt]=nt.parse(ft[bt]))}return{valueWindow:st,percentWindow:ot}},_e.prototype.reset=function(_){if(_===this._dataZoomModel){var et=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,et),this._updateMinMaxSpan();var tt=this.calculateDataWindow(_.settledOption);this._valueWindow=tt.valueWindow,this._percentWindow=tt.percentWindow,this._setAxisModel()}},_e.prototype.filterData=function(_,et){if(_!==this._dataZoomModel)return;var tt=this._dimName,nt=this.getTargetSeriesModels(),it=_.get("filterMode"),at=this._valueWindow;if(it==="none")return;each$7(nt,function(st){var dt=st.getData(),ht=dt.mapDimensionsAll(tt);if(ht.length){if(it==="weakFilter"){var ct=dt.getStore(),ut=map$1(ht,function(ft){return dt.getDimensionIndex(ft)},dt);dt.filterSelf(function(ft){for(var gt,mt,vt,yt=0;yt<ht.length;yt++){var bt=ct.get(ut[yt],ft),_t=!isNaN(bt),xt=bt<at[0],St=bt>at[1];if(_t&&!xt&&!St)return!0;_t&&(vt=!0),xt&&(gt=!0),St&&(mt=!0)}return vt&&gt&&mt})}else each$7(ht,function(ft){if(it==="empty")st.setData(dt=dt.map(ft,function(mt){return ot(mt)?mt:NaN}));else{var gt={};gt[ft]=at,dt.selectRange(gt)}});each$7(ht,function(ft){dt.setApproximateExtent(at,ft)})}});function ot(st){return st>=at[0]&&st<=at[1]}},_e.prototype._updateMinMaxSpan=function(){var _=this._minMaxSpan={},et=this._dataZoomModel,tt=this._dataExtent;each$7(["min","max"],function(nt){var it=et.get(nt+"Span"),at=et.get(nt+"ValueSpan");at!=null&&(at=this.getAxisModel().axis.scale.parse(at)),at!=null?it=linearMap$2(tt[0]+at,tt,[0,100],!0):it!=null&&(at=linearMap$2(it,[0,100],tt,!0)-tt[0]),_[nt+"Span"]=it,_[nt+"ValueSpan"]=at},this)},_e.prototype._setAxisModel=function(){var _=this.getAxisModel(),et=this._percentWindow,tt=this._valueWindow;if(et){var nt=getPixelPrecision(tt,[0,500]);nt=Math.min(nt,20);var it=_.axis.scale.rawExtentInfo;et[0]!==0&&it.setDeterminedMinMax("min",+tt[0].toFixed(nt)),et[1]!==100&&it.setDeterminedMinMax("max",+tt[1].toFixed(nt)),it.freeze()}},_e}();function calculateDataExtent(_e,_,et){var tt=[1/0,-1/0];each$7(et,function(at){unionAxisExtentFromData(tt,at.getData(),_)});var nt=_e.getAxisModel(),it=ensureScaleRawExtentInfo(nt.axis.scale,nt,tt).calculate();return[it.min,it.max]}var dataZoomProcessor={getTargetSeries:function(_e){function _(nt){_e.eachComponent("dataZoom",function(it){it.eachTargetAxis(function(at,ot){var st=_e.getComponent(getAxisMainType(at),ot);nt(at,ot,st,it)})})}_(function(nt,it,at,ot){at.__dzAxisProxy=null});var et=[];_(function(nt,it,at,ot){at.__dzAxisProxy||(at.__dzAxisProxy=new AxisProxy(nt,it,ot,_e),et.push(at.__dzAxisProxy))});var tt=createHashMap();return each$f(et,function(nt){each$f(nt.getTargetSeriesModels(),function(it){tt.set(it.uid,it)})}),tt},overallReset:function(_e,_){_e.eachComponent("dataZoom",function(et){et.eachTargetAxis(function(tt,nt){et.getAxisProxy(tt,nt).reset(et)}),et.eachTargetAxis(function(tt,nt){et.getAxisProxy(tt,nt).filterData(et,_)})}),_e.eachComponent("dataZoom",function(et){var tt=et.findRepresentativeAxisProxy();if(tt){var nt=tt.getDataPercentWindow(),it=tt.getDataValueWindow();et.setCalculatedRange({start:nt[0],end:nt[1],startValue:it[0],endValue:it[1]})}})}};function installDataZoomAction(_e){_e.registerAction("dataZoom",function(_,et){var tt=findEffectedDataZooms(et,_);each$f(tt,function(nt){nt.setRawRange({start:_.start,end:_.end,startValue:_.startValue,endValue:_.endValue})})})}var installed$1=!1;function installCommon$1(_e){installed$1||(installed$1=!0,_e.registerProcessor(_e.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(_e),_e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(_e){_e.registerComponentModel(SelectDataZoomModel),_e.registerComponentView(SelectDataZoomView),installCommon$1(_e)}var ToolboxFeature=function(){function _e(){}return _e}(),features={};function registerFeature(_e,_){features[_e]=_}function getFeature(_e){return features[_e]}var ToolboxModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.optionUpdated=function(){_e.prototype.optionUpdated.apply(this,arguments);var et=this.ecModel;each$f(this.option.feature,function(tt,nt){var it=getFeature(nt);it&&(it.getDefaultOption&&(it.defaultOption=it.getDefaultOption(et)),merge$1(tt,it.defaultOption))})},_.type="toolbox",_.layoutMode={type:"box",ignoreSize:!0},_.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},_}(ComponentModel);function layout$1(_e,_,et){var tt=_.getBoxLayoutParams(),nt=_.get("padding"),it={width:et.getWidth(),height:et.getHeight()},at=getLayoutRect(tt,it,nt);box(_.get("orient"),_e,_.get("itemGap"),at.width,at.height),positionElement(_e,tt,it,nt)}function makeBackground(_e,_){var et=normalizeCssArray(_.get("padding")),tt=_.getItemStyle(["color","opacity"]);return tt.fill=_.get("backgroundColor"),_e=new Rect$2({shape:{x:_e.x-et[3],y:_e.y-et[0],width:_e.width+et[1]+et[3],height:_e.height+et[0]+et[2],r:_.get("borderRadius")},style:tt,silent:!0,z2:-1}),_e}var ToolboxView=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.render=function(et,tt,nt,it){var at=this.group;if(at.removeAll(),!et.get("show"))return;var ot=+et.get("itemSize"),st=et.get("orient")==="vertical",dt=et.get("feature")||{},ht=this._features||(this._features={}),ct=[];each$f(dt,function(gt,mt){ct.push(mt)}),new DataDiffer(this._featureNames||[],ct).add(ut).update(ut).remove(curry$1(ut,null)).execute(),this._featureNames=ct;function ut(gt,mt){var vt=ct[gt],yt=ct[mt],bt=dt[vt],_t=new Model(bt,et,et.ecModel),xt;if(it&&it.newTitle!=null&&it.featureName===vt&&(bt.title=it.newTitle),vt&&!yt){if(isUserFeatureName(vt))xt={onclick:_t.option.onclick,featureName:vt};else{var St=getFeature(vt);if(!St)return;xt=new St}ht[vt]=xt}else if(xt=ht[yt],!xt)return;xt.uid=getUID("toolbox-feature"),xt.model=_t,xt.ecModel=tt,xt.api=nt;var Tt=xt instanceof ToolboxFeature;if(!vt&&yt){Tt&&xt.dispose&&xt.dispose(tt,nt);return}if(!_t.get("show")||Tt&&xt.unusable){Tt&&xt.remove&&xt.remove(tt,nt);return}ft(_t,xt,vt),_t.setIconStatus=function(wt,Ct){var Et=this.option,At=this.iconPaths;Et.iconStatus=Et.iconStatus||{},Et.iconStatus[wt]=Ct,At[wt]&&(Ct==="emphasis"?enterEmphasis:leaveEmphasis)(At[wt])},xt instanceof ToolboxFeature&&xt.render&&xt.render(_t,tt,nt,it)}function ft(gt,mt,vt){var yt=gt.getModel("iconStyle"),bt=gt.getModel(["emphasis","iconStyle"]),_t=mt instanceof ToolboxFeature&&mt.getIcons?mt.getIcons():gt.get("icon"),xt=gt.get("title")||{},St,Tt;isString$1(_t)?(St={},St[vt]=_t):St=_t,isString$1(xt)?(Tt={},Tt[vt]=xt):Tt=xt;var wt=gt.iconPaths={};each$f(St,function(Ct,Et){var At=createIcon(Ct,{},{x:-ot/2,y:-ot/2,width:ot,height:ot});At.setStyle(yt.getItemStyle());var Pt=At.ensureState("emphasis");Pt.style=bt.getItemStyle();var Rt=new ZRText({style:{text:Tt[Et],align:bt.get("textAlign"),borderRadius:bt.get("textBorderRadius"),padding:bt.get("textPadding"),fill:null,font:getFont({fontStyle:bt.get("textFontStyle"),fontFamily:bt.get("textFontFamily"),fontSize:bt.get("textFontSize"),fontWeight:bt.get("textFontWeight")},tt)},ignore:!0});At.setTextContent(Rt),setTooltipConfig({el:At,componentModel:et,itemName:Et,formatterParamsExtra:{title:Tt[Et]}}),At.__title=Tt[Et],At.on("mouseover",function(){var It=bt.getItemStyle(),Mt=st?et.get("right")==null&&et.get("left")!=="right"?"right":"left":et.get("bottom")==null&&et.get("top")!=="bottom"?"bottom":"top";Rt.setStyle({fill:bt.get("textFill")||It.fill||It.stroke||"#000",backgroundColor:bt.get("textBackgroundColor")}),At.setTextConfig({position:bt.get("textPosition")||Mt}),Rt.ignore=!et.get("showTitle"),nt.enterEmphasis(this)}).on("mouseout",function(){gt.get(["iconStatus",Et])!=="emphasis"&&nt.leaveEmphasis(this),Rt.hide()}),(gt.get(["iconStatus",Et])==="emphasis"?enterEmphasis:leaveEmphasis)(At),at.add(At),At.on("click",bind$2(mt.onclick,mt,tt,nt,Et)),wt[Et]=At})}layout$1(at,et,nt),at.add(makeBackground(at.getBoundingRect(),et)),st||at.eachChild(function(gt){var mt=gt.__title,vt=gt.ensureState("emphasis"),yt=vt.textConfig||(vt.textConfig={}),bt=gt.getTextContent(),_t=bt&&bt.ensureState("emphasis");if(_t&&!isFunction$3(_t)&&mt){var xt=_t.style||(_t.style={}),St=getBoundingRect(mt,ZRText.makeFont(xt)),Tt=gt.x+at.x,wt=gt.y+at.y+ot,Ct=!1;wt+St.height>nt.getHeight()&&(yt.position="top",Ct=!0);var Et=Ct?-5-St.height:ot+10;Tt+St.width/2>nt.getWidth()?(yt.position=["100%",Et],xt.align="right"):Tt-St.width/2<0&&(yt.position=[0,Et],xt.align="left")}})},_.prototype.updateView=function(et,tt,nt,it){each$f(this._features,function(at){at instanceof ToolboxFeature&&at.updateView&&at.updateView(at.model,tt,nt,it)})},_.prototype.remove=function(et,tt){each$f(this._features,function(nt){nt instanceof ToolboxFeature&&nt.remove&&nt.remove(et,tt)}),this.group.removeAll()},_.prototype.dispose=function(et,tt){each$f(this._features,function(nt){nt instanceof ToolboxFeature&&nt.dispose&&nt.dispose(et,tt)})},_.type="toolbox",_}(ComponentView);function isUserFeatureName(_e){return _e.indexOf("my")===0}var SaveAsImage=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.onclick=function(et,tt){var nt=this.model,it=nt.get("name")||et.get("title.0.text")||"echarts",at=tt.getZr().painter.getType()==="svg",ot=at?"svg":nt.get("type",!0)||"png",st=tt.getConnectedDataURL({type:ot,backgroundColor:nt.get("backgroundColor",!0)||et.get("backgroundColor")||"#fff",connectedBackgroundColor:nt.get("connectedBackgroundColor"),excludeComponents:nt.get("excludeComponents"),pixelRatio:nt.get("pixelRatio")}),dt=env.browser;if(typeof MouseEvent=="function"&&(dt.newEdge||!dt.ie&&!dt.edge)){var ht=document.createElement("a");ht.download=it+"."+ot,ht.target="_blank",ht.href=st;var ct=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});ht.dispatchEvent(ct)}else if(window.navigator.msSaveOrOpenBlob||at){var ut=st.split(","),ft=ut[0].indexOf("base64")>-1,gt=at?decodeURIComponent(ut[1]):ut[1];ft&&(gt=window.atob(gt));var mt=it+"."+ot;if(window.navigator.msSaveOrOpenBlob){for(var vt=gt.length,yt=new Uint8Array(vt);vt--;)yt[vt]=gt.charCodeAt(vt);var bt=new Blob([yt]);window.navigator.msSaveOrOpenBlob(bt,mt)}else{var _t=document.createElement("iframe");document.body.appendChild(_t);var xt=_t.contentWindow,St=xt.document;St.open("image/svg+xml","replace"),St.write(gt),St.close(),xt.focus(),St.execCommand("SaveAs",!0,mt),document.body.removeChild(_t)}}else{var Tt=nt.get("lang"),wt='<body style="margin:0;"><img src="'+st+'" style="max-width:100%;" title="'+(Tt&&Tt[0]||"")+'" /></body>',Ct=window.open();Ct.document.write(wt),Ct.document.title=it}},_.getDefaultOption=function(et){var tt={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:et.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:et.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return tt},_}(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.getIcons=function(){var et=this.model,tt=et.get("icon"),nt={};return each$f(et.get("type"),function(it){tt[it]&&(nt[it]=tt[it])}),nt},_.getDefaultOption=function(et){var tt={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:et.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return tt},_.prototype.onclick=function(et,tt,nt){var it=this.model,at=it.get(["seriesIndex",nt]);if(seriesOptGenreator[nt]){var ot={series:[]},st=function(ct){var ut=ct.subType,ft=ct.id,gt=seriesOptGenreator[nt](ut,ft,ct,it);gt&&(defaults(gt,ct.option),ot.series.push(gt));var mt=ct.coordinateSystem;if(mt&&mt.type==="cartesian2d"&&(nt==="line"||nt==="bar")){var vt=mt.getAxesByScale("ordinal")[0];if(vt){var yt=vt.dim,bt=yt+"Axis",_t=ct.getReferringComponents(bt,SINGLE_REFERRING).models[0],xt=_t.componentIndex;ot[bt]=ot[bt]||[];for(var St=0;St<=xt;St++)ot[bt][xt]=ot[bt][xt]||{};ot[bt][xt].boundaryGap=nt==="bar"}}};each$f(radioTypes,function(ct){indexOf(ct,nt)>=0&&each$f(ct,function(ut){it.setIconStatus(ut,"normal")})}),it.setIconStatus(nt,"emphasis"),et.eachComponent({mainType:"series",query:at==null?null:{seriesIndex:at}},st);var dt,ht=nt;nt==="stack"&&(dt=merge$1({stack:it.option.title.tiled,tiled:it.option.title.stack},it.option.title),it.get(["iconStatus",nt])!=="emphasis"&&(ht="tiled")),tt.dispatchAction({type:"changeMagicType",currentType:ht,newOption:ot,newTitle:dt,featureName:"magicType"})}},_}(ToolboxFeature),seriesOptGenreator={line:function(_e,_,et,tt){if(_e==="bar")return merge$1({id:_,type:"line",data:et.get("data"),stack:et.get("stack"),markPoint:et.get("markPoint"),markLine:et.get("markLine")},tt.get(["option","line"])||{},!0)},bar:function(_e,_,et,tt){if(_e==="line")return merge$1({id:_,type:"bar",data:et.get("data"),stack:et.get("stack"),markPoint:et.get("markPoint"),markLine:et.get("markLine")},tt.get(["option","bar"])||{},!0)},stack:function(_e,_,et,tt){var nt=et.get("stack")===INNER_STACK_KEYWORD;if(_e==="line"||_e==="bar")return tt.setIconStatus("stack",nt?"normal":"emphasis"),merge$1({id:_,stack:nt?"":INNER_STACK_KEYWORD},tt.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(_e,_){_.mergeOption(_e.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(_e){var _={},et=[],tt=[];return _e.eachRawSeries(function(nt){var it=nt.coordinateSystem;if(it&&(it.type==="cartesian2d"||it.type==="polar")){var at=it.getBaseAxis();if(at.type==="category"){var ot=at.dim+"_"+at.index;_[ot]||(_[ot]={categoryAxis:at,valueAxis:it.getOtherAxis(at),series:[]},tt.push({axisDim:at.dim,axisIndex:at.index})),_[ot].series.push(nt)}else et.push(nt)}else et.push(nt)}),{seriesGroupByCategoryAxis:_,other:et,meta:tt}}function assembleSeriesWithCategoryAxis(_e){var _=[];return each$f(_e,function(et,tt){var nt=et.categoryAxis,it=et.valueAxis,at=it.dim,ot=[" "].concat(map$1(et.series,function(ft){return ft.name})),st=[nt.model.getCategories()];each$f(et.series,function(ft){var gt=ft.getRawData();st.push(ft.getRawData().mapArray(gt.mapDimension(at),function(mt){return mt}))});for(var dt=[ot.join(ITEM_SPLITER)],ht=0;ht<st[0].length;ht++){for(var ct=[],ut=0;ut<st.length;ut++)ct.push(st[ut][ht]);dt.push(ct.join(ITEM_SPLITER))}_.push(dt.join(`
`))}),_.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(_e){return map$1(_e,function(_){var et=_.getRawData(),tt=[_.name],nt=[];return et.each(et.dimensions,function(){for(var it=arguments.length,at=arguments[it-1],ot=et.getName(at),st=0;st<it-1;st++)nt[st]=arguments[st];tt.push((ot?ot+ITEM_SPLITER:"")+nt.join(ITEM_SPLITER))}),tt.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(_e){var _=groupSeries(_e);return{value:filter$1([assembleSeriesWithCategoryAxis(_.seriesGroupByCategoryAxis),assembleOtherSeries(_.other)],function(et){return!!et.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:_.meta}}function trim(_e){return _e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(_e){var _=_e.slice(0,_e.indexOf(`
`));if(_.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(_e){for(var _=_e.split(/\n+/g),et=trim(_.shift()).split(itemSplitRegex),tt=[],nt=map$1(et,function(st){return{name:st,data:[]}}),it=0;it<_.length;it++){var at=trim(_[it]).split(itemSplitRegex);tt.push(at.shift());for(var ot=0;ot<at.length;ot++)nt[ot]&&(nt[ot].data[it]=at[ot])}return{series:nt,categories:tt}}function parseListContents(_e){for(var _=_e.split(/\n+/g),et=trim(_.shift()),tt=[],nt=0;nt<_.length;nt++){var it=trim(_[nt]);if(it){var at=it.split(itemSplitRegex),ot="",st=void 0,dt=!1;isNaN(at[0])?(dt=!0,ot=at[0],at=at.slice(1),tt[nt]={name:ot,value:[]},st=tt[nt].value):st=tt[nt]=[];for(var ht=0;ht<at.length;ht++)st.push(+at[ht]);st.length===1&&(dt?tt[nt].value=st[0]:tt[nt]=st[0])}}return{name:et,data:tt}}function parseContents(_e,_){var et=_e.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),tt={series:[]};return each$f(et,function(nt,it){if(isTSVFormat(nt)){var at=parseTSVContents(nt),ot=_[it],st=ot.axisDim+"Axis";ot&&(tt[st]=tt[st]||[],tt[st][ot.axisIndex]={data:at.categories},tt.series=tt.series.concat(at.series))}else{var at=parseListContents(nt);tt.series.push(at)}}),tt}var DataView$1=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.onclick=function(et,tt){setTimeout(function(){tt.dispatchAction({type:"hideTip"})});var nt=tt.getDom(),it=this.model;this._dom&&nt.removeChild(this._dom);var at=document.createElement("div");at.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",at.style.backgroundColor=it.get("backgroundColor")||"#fff";var ot=document.createElement("h4"),st=it.get("lang")||[];ot.innerHTML=st[0]||it.get("title"),ot.style.cssText="margin:10px 20px",ot.style.color=it.get("textColor");var dt=document.createElement("div"),ht=document.createElement("textarea");dt.style.cssText="overflow:auto";var ct=it.get("optionToContent"),ut=it.get("contentToOption"),ft=getContentFromModel(et);if(isFunction$3(ct)){var gt=ct(tt.getOption());isString$1(gt)?dt.innerHTML=gt:isDom(gt)&&dt.appendChild(gt)}else{ht.readOnly=it.get("readOnly");var mt=ht.style;mt.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",mt.color=it.get("textColor"),mt.borderColor=it.get("textareaBorderColor"),mt.backgroundColor=it.get("textareaColor"),ht.value=ft.value,dt.appendChild(ht)}var vt=ft.meta,yt=document.createElement("div");yt.style.cssText="position:absolute;bottom:5px;left:0;right:0";var bt="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",_t=document.createElement("div"),xt=document.createElement("div");bt+=";background-color:"+it.get("buttonColor"),bt+=";color:"+it.get("buttonTextColor");var St=this;function Tt(){nt.removeChild(at),St._dom=null}addEventListener(_t,"click",Tt),addEventListener(xt,"click",function(){if(ut==null&&ct!=null||ut!=null&&ct==null){Tt();return}var wt;try{isFunction$3(ut)?wt=ut(dt,tt.getOption()):wt=parseContents(ht.value,vt)}catch(Ct){throw Tt(),new Error("Data view format error "+Ct)}wt&&tt.dispatchAction({type:"changeDataView",newOption:wt}),Tt()}),_t.innerHTML=st[1],xt.innerHTML=st[2],xt.style.cssText=_t.style.cssText=bt,!it.get("readOnly")&&yt.appendChild(xt),yt.appendChild(_t),at.appendChild(ot),at.appendChild(dt),at.appendChild(yt),dt.style.height=nt.clientHeight-80+"px",nt.appendChild(at),this._dom=at},_.prototype.remove=function(et,tt){this._dom&&tt.getDom().removeChild(this._dom)},_.prototype.dispose=function(et,tt){this.remove(et,tt)},_.getDefaultOption=function(et){var tt={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:et.getLocaleModel().get(["toolbox","dataView","title"]),lang:et.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return tt},_}(ToolboxFeature);function tryMergeDataOption(_e,_){return map$1(_e,function(et,tt){var nt=_&&_[tt];if(isObject$4(nt)&&!isArray$1(nt)){var it=isObject$4(et)&&!isArray$1(et);it||(et={value:et});var at=nt.name!=null&&et.name==null;return et=defaults(et,nt),at&&delete et.name,et}else return et})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(_e,_){var et=[];each$f(_e.newOption.series,function(tt){var nt=_.getSeriesByName(tt.name)[0];if(!nt)et.push(extend({type:"scatter"},tt));else{var it=nt.get("data");et.push({name:tt.name,data:tryMergeDataOption(tt.data,it)})}}),_.mergeOption(defaults({series:et},_e.newOption))});var each$6=each$f,inner$6=makeInner();function push(_e,_){var et=getStoreSnapshots(_e);each$6(_,function(tt,nt){for(var it=et.length-1;it>=0;it--){var at=et[it];if(at[nt])break}if(it<0){var ot=_e.queryComponents({mainType:"dataZoom",subType:"select",id:nt})[0];if(ot){var st=ot.getPercentRange();et[0][nt]={dataZoomId:nt,start:st[0],end:st[1]}}}}),et.push(_)}function pop(_e){var _=getStoreSnapshots(_e),et=_[_.length-1];_.length>1&&_.pop();var tt={};return each$6(et,function(nt,it){for(var at=_.length-1;at>=0;at--)if(nt=_[at][it],nt){tt[it]=nt;break}}),tt}function clear$1(_e){inner$6(_e).snapshots=null}function count(_e){return getStoreSnapshots(_e).length}function getStoreSnapshots(_e){var _=inner$6(_e);return _.snapshots||(_.snapshots=[{}]),_.snapshots}var RestoreOption=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.onclick=function(et,tt){clear$1(et),tt.dispatchAction({type:"restore",from:this.uid})},_.getDefaultOption=function(et){var tt={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:et.getLocaleModel().get(["toolbox","restore","title"])};return tt},_}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(_e,_){_.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function _e(_,et,tt){var nt=this;this._targetInfoList=[];var it=parseFinder(et,_);each$f(targetInfoBuilders,function(at,ot){(!tt||!tt.include||indexOf(tt.include,ot)>=0)&&at(it,nt._targetInfoList)})}return _e.prototype.setOutputRanges=function(_,et){return this.matchOutputRanges(_,et,function(tt,nt,it){if((tt.coordRanges||(tt.coordRanges=[])).push(nt),!tt.coordRange){tt.coordRange=nt;var at=coordConvert[tt.brushType](0,it,nt);tt.__rangeOffset={offset:diffProcessor[tt.brushType](at.values,tt.range,[1,1]),xyMinMax:at.xyMinMax}}}),_},_e.prototype.matchOutputRanges=function(_,et,tt){each$f(_,function(nt){var it=this.findTargetInfo(nt,et);it&&it!==!0&&each$f(it.coordSyses,function(at){var ot=coordConvert[nt.brushType](1,at,nt.range,!0);tt(nt,ot.values,at,et)})},this)},_e.prototype.setInputRanges=function(_,et){each$f(_,function(tt){var nt=this.findTargetInfo(tt,et);if(tt.range=tt.range||[],nt&&nt!==!0){tt.panelId=nt.panelId;var it=coordConvert[tt.brushType](0,nt.coordSys,tt.coordRange),at=tt.__rangeOffset;tt.range=at?diffProcessor[tt.brushType](it.values,at.offset,getScales(it.xyMinMax,at.xyMinMax)):it.values}},this)},_e.prototype.makePanelOpts=function(_,et){return map$1(this._targetInfoList,function(tt){var nt=tt.getPanelRect();return{panelId:tt.panelId,defaultBrushType:et?et(tt):null,clipPath:makeRectPanelClipPath(nt),isTargetByCursor:makeRectIsTargetByCursor(nt,_,tt.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(nt)}})},_e.prototype.controlSeries=function(_,et,tt){var nt=this.findTargetInfo(_,tt);return nt===!0||nt&&indexOf(nt.coordSyses,et.coordinateSystem)>=0},_e.prototype.findTargetInfo=function(_,et){for(var tt=this._targetInfoList,nt=parseFinder(et,_),it=0;it<tt.length;it++){var at=tt[it],ot=_.panelId;if(ot){if(at.panelId===ot)return at}else for(var st=0;st<targetInfoMatchers.length;st++)if(targetInfoMatchers[st](nt,at))return at}return!0},_e}();function formatMinMax(_e){return _e[0]>_e[1]&&_e.reverse(),_e}function parseFinder(_e,_){return parseFinder$1(_e,_,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(_e,_){var et=_e.xAxisModels,tt=_e.yAxisModels,nt=_e.gridModels,it=createHashMap(),at={},ot={};!et&&!tt&&!nt||(each$f(et,function(st){var dt=st.axis.grid.model;it.set(dt.id,dt),at[dt.id]=!0}),each$f(tt,function(st){var dt=st.axis.grid.model;it.set(dt.id,dt),ot[dt.id]=!0}),each$f(nt,function(st){it.set(st.id,st),at[st.id]=!0,ot[st.id]=!0}),it.each(function(st){var dt=st.coordinateSystem,ht=[];each$f(dt.getCartesians(),function(ct,ut){(indexOf(et,ct.getAxis("x").model)>=0||indexOf(tt,ct.getAxis("y").model)>=0)&&ht.push(ct)}),_.push({panelId:"grid--"+st.id,gridModel:st,coordSysModel:st,coordSys:ht[0],coordSyses:ht,getPanelRect:panelRectBuilders.grid,xAxisDeclared:at[st.id],yAxisDeclared:ot[st.id]})}))},geo:function(_e,_){each$f(_e.geoModels,function(et){var tt=et.coordinateSystem;_.push({panelId:"geo--"+et.id,geoModel:et,coordSysModel:et,coordSys:tt,coordSyses:[tt],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(_e,_){var et=_e.xAxisModel,tt=_e.yAxisModel,nt=_e.gridModel;return!nt&&et&&(nt=et.axis.grid.model),!nt&&tt&&(nt=tt.axis.grid.model),nt&&nt===_.gridModel},function(_e,_){var et=_e.geoModel;return et&&et===_.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var _e=this.coordSys,_=_e.getBoundingRect().clone();return _.applyTransform(getTransform$1(_e)),_}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(_e,_,et,tt){var nt=_e?_.pointToData([et[0][0],et[1][0]],tt):_.dataToPoint([et[0][0],et[1][0]],tt),it=_e?_.pointToData([et[0][1],et[1][1]],tt):_.dataToPoint([et[0][1],et[1][1]],tt),at=[formatMinMax([nt[0],it[0]]),formatMinMax([nt[1],it[1]])];return{values:at,xyMinMax:at}},polygon:function(_e,_,et,tt){var nt=[[1/0,-1/0],[1/0,-1/0]],it=map$1(et,function(at){var ot=_e?_.pointToData(at,tt):_.dataToPoint(at,tt);return nt[0][0]=Math.min(nt[0][0],ot[0]),nt[1][0]=Math.min(nt[1][0],ot[1]),nt[0][1]=Math.max(nt[0][1],ot[0]),nt[1][1]=Math.max(nt[1][1],ot[1]),ot});return{values:it,xyMinMax:nt}}};function axisConvert(_e,_,et,tt){var nt=et.getAxis(["x","y"][_e]),it=formatMinMax(map$1([0,1],function(ot){return _?nt.coordToData(nt.toLocalCoord(tt[ot]),!0):nt.toGlobalCoord(nt.dataToCoord(tt[ot]))})),at=[];return at[_e]=it,at[1-_e]=[NaN,NaN],{values:it,xyMinMax:at}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(_e,_,et){return[[_e[0][0]-et[0]*_[0][0],_e[0][1]-et[0]*_[0][1]],[_e[1][0]-et[1]*_[1][0],_e[1][1]-et[1]*_[1][1]]]},polygon:function(_e,_,et){return map$1(_e,function(tt,nt){return[tt[0]-et[0]*_[nt][0],tt[1]-et[1]*_[nt][1]]})}};function axisDiffProcessor(_e,_,et,tt){return[_[0]-tt[_e]*et[0],_[1]-tt[_e]*et[1]]}function getScales(_e,_){var et=getSize(_e),tt=getSize(_),nt=[et[0]/tt[0],et[1]/tt[1]];return isNaN(nt[0])&&(nt[0]=1),isNaN(nt[1])&&(nt[1]=1),nt}function getSize(_e){return _e?[_e[0][1]-_e[0][0],_e[1][1]-_e[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.render=function(et,tt,nt,it){this._brushController||(this._brushController=new BrushController(nt.getZr()),this._brushController.on("brush",bind$2(this._onBrush,this)).mount()),updateZoomBtnStatus(et,tt,this,it,nt),updateBackBtnStatus(et,tt)},_.prototype.onclick=function(et,tt,nt){handlers[nt].call(this)},_.prototype.remove=function(et,tt){this._brushController&&this._brushController.unmount()},_.prototype.dispose=function(et,tt){this._brushController&&this._brushController.dispose()},_.prototype._onBrush=function(et){var tt=et.areas;if(!et.isEnd||!tt.length)return;var nt={},it=this.ecModel;this._brushController.updateCovers([]);var at=new BrushTargetManager(makeAxisFinder(this.model),it,{include:["grid"]});at.matchOutputRanges(tt,it,function(dt,ht,ct){if(ct.type==="cartesian2d"){var ut=dt.brushType;ut==="rect"?(ot("x",ct,ht[0]),ot("y",ct,ht[1])):ot({lineX:"x",lineY:"y"}[ut],ct,ht)}}),push(it,nt),this._dispatchZoomAction(nt);function ot(dt,ht,ct){var ut=ht.getAxis(dt),ft=ut.model,gt=st(dt,ft,it),mt=gt.findRepresentativeAxisProxy(ft).getMinMaxSpan();(mt.minValueSpan!=null||mt.maxValueSpan!=null)&&(ct=sliderMove(0,ct.slice(),ut.scale.getExtent(),0,mt.minValueSpan,mt.maxValueSpan)),gt&&(nt[gt.id]={dataZoomId:gt.id,startValue:ct[0],endValue:ct[1]})}function st(dt,ht,ct){var ut;return ct.eachComponent({mainType:"dataZoom",subType:"select"},function(ft){var gt=ft.getAxisModel(dt,ht.componentIndex);gt&&(ut=ft)}),ut}},_.prototype._dispatchZoomAction=function(et){var tt=[];each$5(et,function(nt,it){tt.push(clone$4(nt))}),tt.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:tt})},_.getDefaultOption=function(et){var tt={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:et.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return tt},_}(ToolboxFeature),handlers={zoom:function(){var _e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:_e})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(_e){var _={xAxisIndex:_e.get("xAxisIndex",!0),yAxisIndex:_e.get("yAxisIndex",!0),xAxisId:_e.get("xAxisId",!0),yAxisId:_e.get("yAxisId",!0)};return _.xAxisIndex==null&&_.xAxisId==null&&(_.xAxisIndex="all"),_.yAxisIndex==null&&_.yAxisId==null&&(_.yAxisIndex="all"),_}function updateBackBtnStatus(_e,_){_e.setIconStatus("back",count(_)>1?"emphasis":"normal")}function updateZoomBtnStatus(_e,_,et,tt,nt){var it=et._isZoomActive;tt&&tt.type==="takeGlobalCursor"&&(it=tt.key==="dataZoomSelect"?tt.dataZoomSelectActive:!1),et._isZoomActive=it,_e.setIconStatus("zoom",it?"emphasis":"normal");var at=new BrushTargetManager(makeAxisFinder(_e),_,{include:["grid"]}),ot=at.makePanelOpts(nt,function(st){return st.xAxisDeclared&&!st.yAxisDeclared?"lineX":!st.xAxisDeclared&&st.yAxisDeclared?"lineY":"rect"});et._brushController.setPanels(ot).enableBrush(it&&ot.length?{brushType:"auto",brushStyle:_e.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(_e){var _=_e.getComponent("toolbox",0),et=["feature","dataZoom"];if(!_||_.get(et)==null)return;var tt=_.getModel(et),nt=[],it=makeAxisFinder(tt),at=parseFinder$1(_e,it);each$5(at.xAxisModels,function(st){return ot(st,"xAxis","xAxisIndex")}),each$5(at.yAxisModels,function(st){return ot(st,"yAxis","yAxisIndex")});function ot(st,dt,ht){var ct=st.componentIndex,ut={type:"select",$fromToolbox:!0,filterMode:tt.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+dt+ct};ut[ht]=ct,nt.push(ut)}return nt});function install$j(_e){_e.registerComponentModel(ToolboxModel),_e.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView$1),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$k)}var TooltipModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="tooltip",_.dependencies=["axisPointer"],_.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},_}(ComponentModel);function shouldTooltipConfine(_e){var _=_e.get("confine");return _!=null?!!_:_e.get("renderMode")==="richText"}function testStyle(_e){if(env.domSupported){for(var _=document.documentElement.style,et=0,tt=_e.length;et<tt;et++)if(_e[et]in _)return _e[et]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(_e,_){if(!_e)return _;_=toCamelCase(_,!0);var et=_e.indexOf(_);return _e=et===-1?_:"-"+_e.slice(0,et)+"-"+_,_e.toLowerCase()}function getComputedStyle$1(_e,_){var et=_e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(_e);return et?et[_]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(_e){return _e=_e==="left"?"right":_e==="right"?"left":_e==="top"?"bottom":"top",_e}function assembleArrow(_e,_,et){if(!isString$1(et)||et==="inside")return"";var tt=_e.get("backgroundColor"),nt=_e.get("borderWidth");_=convertToColorString(_);var it=mirrorPos(et),at=Math.max(Math.round(nt)*1.5,6),ot="",st=CSS_TRANSFORM_VENDOR+":",dt;indexOf(["left","right"],it)>-1?(ot+="top:50%",st+="translateY(-50%) rotate("+(dt=it==="left"?-225:-45)+"deg)"):(ot+="left:50%",st+="translateX(-50%) rotate("+(dt=it==="top"?225:45)+"deg)");var ht=dt*Math.PI/180,ct=at+nt,ut=ct*Math.abs(Math.cos(ht))+ct*Math.abs(Math.sin(ht)),ft=Math.round(((ut-Math.SQRT2*nt)/2+Math.SQRT2*nt-(ut-ct)/2)*100)/100;ot+=";"+it+":-"+ft+"px";var gt=_+" solid "+nt+"px;",mt=["position:absolute;width:"+at+"px;height:"+at+"px;z-index:-1;",ot+";"+st+";","border-bottom:"+gt,"border-right:"+gt,"background-color:"+tt+";"];return'<div style="'+mt.join("")+'"></div>'}function assembleTransition(_e,_){var et="cubic-bezier(0.23,1,0.32,1)",tt=" "+_e/2+"s "+et,nt="opacity"+tt+",visibility"+tt;return _||(tt=" "+_e+"s "+et,nt+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+tt:",left"+tt+",top"+tt),CSS_TRANSITION_VENDOR+":"+nt}function assembleTransform(_e,_,et){var tt=_e.toFixed(0)+"px",nt=_.toFixed(0)+"px";if(!env.transformSupported)return et?"top:"+nt+";left:"+tt+";":[["top",nt],["left",tt]];var it=env.transform3dSupported,at="translate"+(it?"3d":"")+"("+tt+","+nt+(it?",0":"")+")";return et?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+at+";":[["top",0],["left",0],[TRANSFORM_VENDOR,at]]}function assembleFont(_e){var _=[],et=_e.get("fontSize"),tt=_e.getTextColor();tt&&_.push("color:"+tt),_.push("font:"+_e.getFont());var nt=retrieve2(_e.get("lineHeight"),Math.round(et*3/2));et&&_.push("line-height:"+nt+"px");var it=_e.get("textShadowColor"),at=_e.get("textShadowBlur")||0,ot=_e.get("textShadowOffsetX")||0,st=_e.get("textShadowOffsetY")||0;return it&&at&&_.push("text-shadow:"+ot+"px "+st+"px "+at+"px "+it),each$f(["decoration","align"],function(dt){var ht=_e.get(dt);ht&&_.push("text-"+dt+":"+ht)}),_.join(";")}function assembleCssText(_e,_,et){var tt=[],nt=_e.get("transitionDuration"),it=_e.get("backgroundColor"),at=_e.get("shadowBlur"),ot=_e.get("shadowColor"),st=_e.get("shadowOffsetX"),dt=_e.get("shadowOffsetY"),ht=_e.getModel("textStyle"),ct=getPaddingFromTooltipModel(_e,"html"),ut=st+"px "+dt+"px "+at+"px "+ot;return tt.push("box-shadow:"+ut),_&&nt&&tt.push(assembleTransition(nt,et)),it&&tt.push("background-color:"+it),each$f(["width","color","radius"],function(ft){var gt="border-"+ft,mt=toCamelCase(gt),vt=_e.get(mt);vt!=null&&tt.push(gt+":"+vt+(ft==="color"?"":"px"))}),tt.push(assembleFont(ht)),ct!=null&&tt.push("padding:"+normalizeCssArray(ct).join("px ")+"px"),tt.join(";")+";"}function makeStyleCoord$1(_e,_,et,tt,nt){var it=_&&_.painter;if(et){var at=it&&it.getViewportRoot();at&&transformLocalCoord(_e,at,et,tt,nt)}else{_e[0]=tt,_e[1]=nt;var ot=it&&it.getViewportRootOffset();ot&&(_e[0]+=ot.offsetLeft,_e[1]+=ot.offsetTop)}_e[2]=_e[0]/_.getWidth(),_e[3]=_e[1]/_.getHeight()}var TooltipHTMLContent=function(){function _e(_,et){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var tt=document.createElement("div");tt.domBelongToZr=!0,this.el=tt;var nt=this._zr=_.getZr(),it=et.appendTo,at=it&&(isString$1(it)?document.querySelector(it):isDom(it)?it:isFunction$3(it)&&it(_.getDom()));makeStyleCoord$1(this._styleCoord,nt,at,_.getWidth()/2,_.getHeight()/2),(at||_.getDom()).appendChild(tt),this._api=_,this._container=at;var ot=this;tt.onmouseenter=function(){ot._enterable&&(clearTimeout(ot._hideTimeout),ot._show=!0),ot._inContent=!0},tt.onmousemove=function(st){if(st=st||window.event,!ot._enterable){var dt=nt.handler,ht=nt.painter.getViewportRoot();normalizeEvent(ht,st,!0),dt.dispatch("mousemove",st)}},tt.onmouseleave=function(){ot._inContent=!1,ot._enterable&&ot._show&&ot.hideLater(ot._hideDelay)}}return _e.prototype.update=function(_){if(!this._container){var et=this._api.getDom(),tt=getComputedStyle$1(et,"position"),nt=et.style;nt.position!=="absolute"&&tt!=="absolute"&&(nt.position="relative")}var it=_.get("alwaysShowContent");it&&this._moveIfResized(),this._alwaysShowContent=it,this.el.className=_.get("className")||""},_e.prototype.show=function(_,et){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var tt=this.el,nt=tt.style,it=this._styleCoord;tt.innerHTML?nt.cssText=gCssText+assembleCssText(_,!this._firstShow,this._longHide)+assembleTransform(it[0],it[1],!0)+("border-color:"+convertToColorString(et)+";")+(_.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):nt.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},_e.prototype.setContent=function(_,et,tt,nt,it){var at=this.el;if(_==null){at.innerHTML="";return}var ot="";if(isString$1(it)&&tt.get("trigger")==="item"&&!shouldTooltipConfine(tt)&&(ot=assembleArrow(tt,nt,it)),isString$1(_))at.innerHTML=_+ot;else if(_){at.innerHTML="",isArray$1(_)||(_=[_]);for(var st=0;st<_.length;st++)isDom(_[st])&&_[st].parentNode!==at&&at.appendChild(_[st]);if(ot&&at.childNodes.length){var dt=document.createElement("div");dt.innerHTML=ot,at.appendChild(dt)}}},_e.prototype.setEnterable=function(_){this._enterable=_},_e.prototype.getSize=function(){var _=this.el;return _?[_.offsetWidth,_.offsetHeight]:[0,0]},_e.prototype.moveTo=function(_,et){if(this.el){var tt=this._styleCoord;if(makeStyleCoord$1(tt,this._zr,this._container,_,et),tt[0]!=null&&tt[1]!=null){var nt=this.el.style,it=assembleTransform(tt[0],tt[1]);each$f(it,function(at){nt[at[0]]=at[1]})}}},_e.prototype._moveIfResized=function(){var _=this._styleCoord[2],et=this._styleCoord[3];this.moveTo(_*this._zr.getWidth(),et*this._zr.getHeight())},_e.prototype.hide=function(){var _=this,et=this.el.style;et.visibility="hidden",et.opacity="0",env.transform3dSupported&&(et.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return _._longHide=!0},500)},_e.prototype.hideLater=function(_){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(_?(this._hideDelay=_,this._show=!1,this._hideTimeout=setTimeout(bind$2(this.hide,this),_)):this.hide())},_e.prototype.isShow=function(){return this._show},_e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var _=this.el.parentNode;_&&_.removeChild(this.el),this.el=this._container=null},_e}(),TooltipRichContent=function(){function _e(_){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=_.getZr(),makeStyleCoord(this._styleCoord,this._zr,_.getWidth()/2,_.getHeight()/2)}return _e.prototype.update=function(_){var et=_.get("alwaysShowContent");et&&this._moveIfResized(),this._alwaysShowContent=et},_e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},_e.prototype.setContent=function(_,et,tt,nt,it){var at=this;isObject$4(_)&&throwError(""),this.el&&this._zr.remove(this.el);var ot=tt.getModel("textStyle");this.el=new ZRText({style:{rich:et.richTextStyles,text:_,lineHeight:22,borderWidth:1,borderColor:nt,textShadowColor:ot.get("textShadowColor"),fill:tt.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(tt,"richText"),verticalAlign:"top",align:"left"},z:tt.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(dt){at.el.style[dt]=tt.get(dt)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(dt){at.el.style[dt]=ot.get(dt)||0}),this._zr.add(this.el);var st=this;this.el.on("mouseover",function(){st._enterable&&(clearTimeout(st._hideTimeout),st._show=!0),st._inContent=!0}),this.el.on("mouseout",function(){st._enterable&&st._show&&st.hideLater(st._hideDelay),st._inContent=!1})},_e.prototype.setEnterable=function(_){this._enterable=_},_e.prototype.getSize=function(){var _=this.el,et=this.el.getBoundingRect(),tt=calcShadowOuterSize(_.style);return[et.width+tt.left+tt.right,et.height+tt.top+tt.bottom]},_e.prototype.moveTo=function(_,et){var tt=this.el;if(tt){var nt=this._styleCoord;makeStyleCoord(nt,this._zr,_,et),_=nt[0],et=nt[1];var it=tt.style,at=mathMaxWith0(it.borderWidth||0),ot=calcShadowOuterSize(it);tt.x=_+at+ot.left,tt.y=et+at+ot.top,tt.markRedraw()}},_e.prototype._moveIfResized=function(){var _=this._styleCoord[2],et=this._styleCoord[3];this.moveTo(_*this._zr.getWidth(),et*this._zr.getHeight())},_e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},_e.prototype.hideLater=function(_){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(_?(this._hideDelay=_,this._show=!1,this._hideTimeout=setTimeout(bind$2(this.hide,this),_)):this.hide())},_e.prototype.isShow=function(){return this._show},_e.prototype.dispose=function(){this._zr.remove(this.el)},_e}();function mathMaxWith0(_e){return Math.max(0,_e)}function calcShadowOuterSize(_e){var _=mathMaxWith0(_e.shadowBlur||0),et=mathMaxWith0(_e.shadowOffsetX||0),tt=mathMaxWith0(_e.shadowOffsetY||0);return{left:mathMaxWith0(_-et),right:mathMaxWith0(_+et),top:mathMaxWith0(_-tt),bottom:mathMaxWith0(_+tt)}}function makeStyleCoord(_e,_,et,tt){_e[0]=et,_e[1]=tt,_e[2]=_e[0]/_.getWidth(),_e[3]=_e[1]/_.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(et,tt){if(!(env.node||!tt.getDom())){var nt=et.getComponent("tooltip"),it=this._renderMode=getTooltipRenderMode(nt.get("renderMode"));this._tooltipContent=it==="richText"?new TooltipRichContent(tt):new TooltipHTMLContent(tt,{appendTo:nt.get("appendToBody",!0)?"body":nt.get("appendTo",!0)})}},_.prototype.render=function(et,tt,nt){if(!(env.node||!nt.getDom())){this.group.removeAll(),this._tooltipModel=et,this._ecModel=tt,this._api=nt;var it=this._tooltipContent;it.update(et),it.setEnterable(et.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&et.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$2(this,"_updatePosition")}},_.prototype._initGlobalListener=function(){var et=this._tooltipModel,tt=et.get("triggerOn");register("itemTooltip",this._api,bind$2(function(nt,it,at){tt!=="none"&&(tt.indexOf(nt)>=0?this._tryShow(it,at):nt==="leave"&&this._hide(at))},this))},_.prototype._keepShow=function(){var et=this._tooltipModel,tt=this._ecModel,nt=this._api,it=et.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&it!=="none"&&it!=="click"){var at=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!nt.isDisposed()&&at.manuallyShowTip(et,tt,nt,{x:at._lastX,y:at._lastY,dataByCoordSys:at._lastDataByCoordSys})})}},_.prototype.manuallyShowTip=function(et,tt,nt,it){if(!(it.from===this.uid||env.node||!nt.getDom())){var at=makeDispatchAction(it,nt);this._ticket="";var ot=it.dataByCoordSys,st=findComponentReference(it,tt,nt);if(st){var dt=st.el.getBoundingRect().clone();dt.applyTransform(st.el.transform),this._tryShow({offsetX:dt.x+dt.width/2,offsetY:dt.y+dt.height/2,target:st.el,position:it.position,positionDefault:"bottom"},at)}else if(it.tooltip&&it.x!=null&&it.y!=null){var ht=proxyRect;ht.x=it.x,ht.y=it.y,ht.update(),getECData(ht).tooltipConfig={name:null,option:it.tooltip},this._tryShow({offsetX:it.x,offsetY:it.y,target:ht},at)}else if(ot)this._tryShow({offsetX:it.x,offsetY:it.y,position:it.position,dataByCoordSys:ot,tooltipOption:it.tooltipOption},at);else if(it.seriesIndex!=null){if(this._manuallyAxisShowTip(et,tt,nt,it))return;var ct=findPointFromSeries(it,tt),ut=ct.point[0],ft=ct.point[1];ut!=null&&ft!=null&&this._tryShow({offsetX:ut,offsetY:ft,target:ct.el,position:it.position,positionDefault:"bottom"},at)}else it.x!=null&&it.y!=null&&(nt.dispatchAction({type:"updateAxisPointer",x:it.x,y:it.y}),this._tryShow({offsetX:it.x,offsetY:it.y,position:it.position,target:nt.getZr().findHover(it.x,it.y).target},at))}},_.prototype.manuallyHideTip=function(et,tt,nt,it){var at=this._tooltipContent;this._tooltipModel&&at.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,it.from!==this.uid&&this._hide(makeDispatchAction(it,nt))},_.prototype._manuallyAxisShowTip=function(et,tt,nt,it){var at=it.seriesIndex,ot=it.dataIndex,st=tt.getComponent("axisPointer").coordSysAxesInfo;if(!(at==null||ot==null||st==null)){var dt=tt.getSeriesByIndex(at);if(dt){var ht=dt.getData(),ct=buildTooltipModel([ht.getItemModel(ot),dt,(dt.coordinateSystem||{}).model],this._tooltipModel);if(ct.get("trigger")==="axis")return nt.dispatchAction({type:"updateAxisPointer",seriesIndex:at,dataIndex:ot,position:it.position}),!0}}},_.prototype._tryShow=function(et,tt){var nt=et.target,it=this._tooltipModel;if(it){this._lastX=et.offsetX,this._lastY=et.offsetY;var at=et.dataByCoordSys;if(at&&at.length)this._showAxisTooltip(at,et);else if(nt){var ot=getECData(nt);if(ot.ssrType==="legend")return;this._lastDataByCoordSys=null;var st,dt;findEventDispatcher(nt,function(ht){if(getECData(ht).dataIndex!=null)return st=ht,!0;if(getECData(ht).tooltipConfig!=null)return dt=ht,!0},!0),st?this._showSeriesItemTooltip(et,st,tt):dt?this._showComponentItemTooltip(et,dt,tt):this._hide(tt)}else this._lastDataByCoordSys=null,this._hide(tt)}},_.prototype._showOrMove=function(et,tt){var nt=et.get("showDelay");tt=bind$2(tt,this),clearTimeout(this._showTimout),nt>0?this._showTimout=setTimeout(tt,nt):tt()},_.prototype._showAxisTooltip=function(et,tt){var nt=this._ecModel,it=this._tooltipModel,at=[tt.offsetX,tt.offsetY],ot=buildTooltipModel([tt.tooltipOption],it),st=this._renderMode,dt=[],ht=createTooltipMarkup("section",{blocks:[],noHeader:!0}),ct=[],ut=new TooltipMarkupStyleCreator;each$f(et,function(bt){each$f(bt.dataByAxis,function(_t){var xt=nt.getComponent(_t.axisDim+"Axis",_t.axisIndex),St=_t.value;if(!(!xt||St==null)){var Tt=getValueLabel(St,xt.axis,nt,_t.seriesDataIndices,_t.valueLabelOpt),wt=createTooltipMarkup("section",{header:Tt,noHeader:!trim$1(Tt),sortBlocks:!0,blocks:[]});ht.blocks.push(wt),each$f(_t.seriesDataIndices,function(Ct){var Et=nt.getSeriesByIndex(Ct.seriesIndex),At=Ct.dataIndexInside,Pt=Et.getDataParams(At);if(!(Pt.dataIndex<0)){Pt.axisDim=_t.axisDim,Pt.axisIndex=_t.axisIndex,Pt.axisType=_t.axisType,Pt.axisId=_t.axisId,Pt.axisValue=getAxisRawValue(xt.axis,{value:St}),Pt.axisValueLabel=Tt,Pt.marker=ut.makeTooltipMarker("item",convertToColorString(Pt.color),st);var Rt=normalizeTooltipFormatResult(Et.formatTooltip(At,!0,null)),It=Rt.frag;if(It){var Mt=buildTooltipModel([Et],it).get("valueFormatter");wt.blocks.push(Mt?extend({valueFormatter:Mt},It):It)}Rt.text&&ct.push(Rt.text),dt.push(Pt)}})}})}),ht.blocks.reverse(),ct.reverse();var ft=tt.position,gt=ot.get("order"),mt=buildTooltipMarkup(ht,ut,st,gt,nt.get("useUTC"),ot.get("textStyle"));mt&&ct.unshift(mt);var vt=st==="richText"?`

`:"<br/>",yt=ct.join(vt);this._showOrMove(ot,function(){this._updateContentNotChangedOnAxis(et,dt)?this._updatePosition(ot,ft,at[0],at[1],this._tooltipContent,dt):this._showTooltipContent(ot,yt,dt,Math.random()+"",at[0],at[1],ft,null,ut)})},_.prototype._showSeriesItemTooltip=function(et,tt,nt){var it=this._ecModel,at=getECData(tt),ot=at.seriesIndex,st=it.getSeriesByIndex(ot),dt=at.dataModel||st,ht=at.dataIndex,ct=at.dataType,ut=dt.getData(ct),ft=this._renderMode,gt=et.positionDefault,mt=buildTooltipModel([ut.getItemModel(ht),dt,st&&(st.coordinateSystem||{}).model],this._tooltipModel,gt?{position:gt}:null),vt=mt.get("trigger");if(!(vt!=null&&vt!=="item")){var yt=dt.getDataParams(ht,ct),bt=new TooltipMarkupStyleCreator;yt.marker=bt.makeTooltipMarker("item",convertToColorString(yt.color),ft);var _t=normalizeTooltipFormatResult(dt.formatTooltip(ht,!1,ct)),xt=mt.get("order"),St=mt.get("valueFormatter"),Tt=_t.frag,wt=Tt?buildTooltipMarkup(St?extend({valueFormatter:St},Tt):Tt,bt,ft,xt,it.get("useUTC"),mt.get("textStyle")):_t.text,Ct="item_"+dt.name+"_"+ht;this._showOrMove(mt,function(){this._showTooltipContent(mt,wt,yt,Ct,et.offsetX,et.offsetY,et.position,et.target,bt)}),nt({type:"showTip",dataIndexInside:ht,dataIndex:ut.getRawIndex(ht),seriesIndex:ot,from:this.uid})}},_.prototype._showComponentItemTooltip=function(et,tt,nt){var it=this._renderMode==="html",at=getECData(tt),ot=at.tooltipConfig,st=ot.option||{},dt=st.encodeHTMLContent;if(isString$1(st)){var ht=st;st={content:ht,formatter:ht},dt=!0}dt&&it&&st.content&&(st=clone$4(st),st.content=encodeHTML(st.content));var ct=[st],ut=this._ecModel.getComponent(at.componentMainType,at.componentIndex);ut&&ct.push(ut),ct.push({formatter:st.content});var ft=et.positionDefault,gt=buildTooltipModel(ct,this._tooltipModel,ft?{position:ft}:null),mt=gt.get("content"),vt=Math.random()+"",yt=new TooltipMarkupStyleCreator;this._showOrMove(gt,function(){var bt=clone$4(gt.get("formatterParams")||{});this._showTooltipContent(gt,mt,bt,vt,et.offsetX,et.offsetY,et.position,tt,yt)}),nt({type:"showTip",from:this.uid})},_.prototype._showTooltipContent=function(et,tt,nt,it,at,ot,st,dt,ht){if(this._ticket="",!(!et.get("showContent")||!et.get("show"))){var ct=this._tooltipContent;ct.setEnterable(et.get("enterable"));var ut=et.get("formatter");st=st||et.get("position");var ft=tt,gt=this._getNearestPoint([at,ot],nt,et.get("trigger"),et.get("borderColor")),mt=gt.color;if(ut)if(isString$1(ut)){var vt=et.ecModel.get("useUTC"),yt=isArray$1(nt)?nt[0]:nt,bt=yt&&yt.axisType&&yt.axisType.indexOf("time")>=0;ft=ut,bt&&(ft=format$1(yt.axisValue,ft,vt)),ft=formatTpl(ft,nt,!0)}else if(isFunction$3(ut)){var _t=bind$2(function(xt,St){xt===this._ticket&&(ct.setContent(St,ht,et,mt,st),this._updatePosition(et,st,at,ot,ct,nt,dt))},this);this._ticket=it,ft=ut(nt,it,_t)}else ft=ut;ct.setContent(ft,ht,et,mt,st),ct.show(et,mt),this._updatePosition(et,st,at,ot,ct,nt,dt)}},_.prototype._getNearestPoint=function(et,tt,nt,it){if(nt==="axis"||isArray$1(tt))return{color:it||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(tt))return{color:it||tt.color||tt.borderColor}},_.prototype._updatePosition=function(et,tt,nt,it,at,ot,st){var dt=this._api.getWidth(),ht=this._api.getHeight();tt=tt||et.get("position");var ct=at.getSize(),ut=et.get("align"),ft=et.get("verticalAlign"),gt=st&&st.getBoundingRect().clone();if(st&&gt.applyTransform(st.transform),isFunction$3(tt)&&(tt=tt([nt,it],ot,at.el,gt,{viewSize:[dt,ht],contentSize:ct.slice()})),isArray$1(tt))nt=parsePercent(tt[0],dt),it=parsePercent(tt[1],ht);else if(isObject$4(tt)){var mt=tt;mt.width=ct[0],mt.height=ct[1];var vt=getLayoutRect(mt,{width:dt,height:ht});nt=vt.x,it=vt.y,ut=null,ft=null}else if(isString$1(tt)&&st){var yt=calcTooltipPosition(tt,gt,ct,et.get("borderWidth"));nt=yt[0],it=yt[1]}else{var yt=refixTooltipPosition(nt,it,at,dt,ht,ut?null:20,ft?null:20);nt=yt[0],it=yt[1]}if(ut&&(nt-=isCenterAlign(ut)?ct[0]/2:ut==="right"?ct[0]:0),ft&&(it-=isCenterAlign(ft)?ct[1]/2:ft==="bottom"?ct[1]:0),shouldTooltipConfine(et)){var yt=confineTooltipPosition(nt,it,at,dt,ht);nt=yt[0],it=yt[1]}at.moveTo(nt,it)},_.prototype._updateContentNotChangedOnAxis=function(et,tt){var nt=this._lastDataByCoordSys,it=this._cbParamsList,at=!!nt&&nt.length===et.length;return at&&each$f(nt,function(ot,st){var dt=ot.dataByAxis||[],ht=et[st]||{},ct=ht.dataByAxis||[];at=at&&dt.length===ct.length,at&&each$f(dt,function(ut,ft){var gt=ct[ft]||{},mt=ut.seriesDataIndices||[],vt=gt.seriesDataIndices||[];at=at&&ut.value===gt.value&&ut.axisType===gt.axisType&&ut.axisId===gt.axisId&&mt.length===vt.length,at&&each$f(mt,function(yt,bt){var _t=vt[bt];at=at&&yt.seriesIndex===_t.seriesIndex&&yt.dataIndex===_t.dataIndex}),it&&each$f(ut.seriesDataIndices,function(yt){var bt=yt.seriesIndex,_t=tt[bt],xt=it[bt];_t&&xt&&xt.data!==_t.data&&(at=!1)})})}),this._lastDataByCoordSys=et,this._cbParamsList=tt,!!at},_.prototype._hide=function(et){this._lastDataByCoordSys=null,et({type:"hideTip",from:this.uid})},_.prototype.dispose=function(et,tt){env.node||!tt.getDom()||(clear$2(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",tt))},_.type="tooltip",_}(ComponentView);function buildTooltipModel(_e,_,et){var tt=_.ecModel,nt;et?(nt=new Model(et,tt,tt),nt=new Model(_.option,nt,tt)):nt=_;for(var it=_e.length-1;it>=0;it--){var at=_e[it];at&&(at instanceof Model&&(at=at.get("tooltip",!0)),isString$1(at)&&(at={formatter:at}),at&&(nt=new Model(at,nt,tt)))}return nt}function makeDispatchAction(_e,_){return _e.dispatchAction||bind$2(_.dispatchAction,_)}function refixTooltipPosition(_e,_,et,tt,nt,it,at){var ot=et.getSize(),st=ot[0],dt=ot[1];return it!=null&&(_e+st+it+2>tt?_e-=st+it:_e+=it),at!=null&&(_+dt+at>nt?_-=dt+at:_+=at),[_e,_]}function confineTooltipPosition(_e,_,et,tt,nt){var it=et.getSize(),at=it[0],ot=it[1];return _e=Math.min(_e+at,tt)-at,_=Math.min(_+ot,nt)-ot,_e=Math.max(_e,0),_=Math.max(_,0),[_e,_]}function calcTooltipPosition(_e,_,et,tt){var nt=et[0],it=et[1],at=Math.ceil(Math.SQRT2*tt)+8,ot=0,st=0,dt=_.width,ht=_.height;switch(_e){case"inside":ot=_.x+dt/2-nt/2,st=_.y+ht/2-it/2;break;case"top":ot=_.x+dt/2-nt/2,st=_.y-it-at;break;case"bottom":ot=_.x+dt/2-nt/2,st=_.y+ht+at;break;case"left":ot=_.x-nt-at,st=_.y+ht/2-it/2;break;case"right":ot=_.x+dt+at,st=_.y+ht/2-it/2}return[ot,st]}function isCenterAlign(_e){return _e==="center"||_e==="middle"}function findComponentReference(_e,_,et){var tt=preParseFinder(_e).queryOptionMap,nt=tt.keys()[0];if(!(!nt||nt==="series")){var it=queryReferringComponents(_,nt,tt.get(nt),{useDefault:!1,enableAll:!1,enableNone:!1}),at=it.models[0];if(at){var ot=et.getViewOfComponentModel(at),st;if(ot.group.traverse(function(dt){var ht=getECData(dt).tooltipConfig;if(ht&&ht.name===_e.name)return st=dt,!0}),st)return{componentMainType:nt,componentIndex:at.componentIndex,el:st}}}}function install$i(_e){use(install$q),_e.registerComponentModel(TooltipModel),_e.registerComponentView(TooltipView),_e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),_e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(_e,_){var et=normalizeToArray(_e?_e.brush:[]);if(et.length){var tt=[];each$f(et,function(st){var dt=st.hasOwnProperty("toolbox")?st.toolbox:[];dt instanceof Array&&(tt=tt.concat(dt))});var nt=_e&&_e.toolbox;isArray$1(nt)&&(nt=nt[0]),nt||(nt={feature:{}},_e.toolbox=[nt]);var it=nt.feature||(nt.feature={}),at=it.brush||(it.brush={}),ot=at.type||(at.type=[]);ot.push.apply(ot,tt),removeDuplicate(ot),_&&!ot.length&&ot.push.apply(ot,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(_e){var _={};each$f(_e,function(et){_[et]=1}),_e.length=0,each$f(_,function(et,tt){_e.push(tt)})}var each$4=each$f;function hasKeys(_e){if(_e){for(var _ in _e)if(_e.hasOwnProperty(_))return!0}}function createVisualMappings(_e,_,et){var tt={};return each$4(_,function(it){var at=tt[it]=nt();each$4(_e[it],function(ot,st){if(VisualMapping.isValidType(st)){var dt={type:st,visual:ot};et&&et(dt,it),at[st]=new VisualMapping(dt),st==="opacity"&&(dt=clone$4(dt),dt.type="colorAlpha",at.__hidden.__alphaForOpacity=new VisualMapping(dt))}})}),tt;function nt(){var it=function(){};it.prototype.__hidden=it.prototype;var at=new it;return at}}function replaceVisualOption(_e,_,et){var tt;each$f(et,function(nt){_.hasOwnProperty(nt)&&hasKeys(_[nt])&&(tt=!0)}),tt&&each$f(et,function(nt){_.hasOwnProperty(nt)&&hasKeys(_[nt])?_e[nt]=clone$4(_[nt]):delete _e[nt]})}function applyVisual(_e,_,et,tt,nt,it){var at={};each$f(_e,function(ct){var ut=VisualMapping.prepareVisualTypes(_[ct]);at[ct]=ut});var ot;function st(ct){return getItemVisualFromData(et,ot,ct)}function dt(ct,ut){setItemVisualFromData(et,ot,ct,ut)}et.each(ht);function ht(ct,ut){ot=ct;var ft=et.getRawDataItem(ot);if(!(ft&&ft.visualMap===!1))for(var gt=tt.call(nt,ct),mt=_[gt],vt=at[gt],yt=0,bt=vt.length;yt<bt;yt++){var _t=vt[yt];mt[_t]&&mt[_t].applyVisual(ct,st,dt)}}}function incrementalApplyVisual(_e,_,et,tt){var nt={};return each$f(_e,function(it){var at=VisualMapping.prepareVisualTypes(_[it]);nt[it]=at}),{progress:function(at,ot){var st;tt!=null&&(st=ot.getDimensionIndex(tt));function dt(St){return getItemVisualFromData(ot,ct,St)}function ht(St,Tt){setItemVisualFromData(ot,ct,St,Tt)}for(var ct,ut=ot.getStore();(ct=at.next())!=null;){var ft=ot.getRawDataItem(ct);if(!(ft&&ft.visualMap===!1))for(var gt=tt!=null?ut.get(st,ct):ct,mt=et(gt),vt=_[mt],yt=nt[mt],bt=0,_t=yt.length;bt<_t;bt++){var xt=yt[bt];vt[xt]&&vt[xt].applyVisual(gt,dt,ht)}}}}}function makeBrushCommonSelectorForSeries(_e){var _=_e.brushType,et={point:function(tt){return selector[_].point(tt,et,_e)},rect:function(tt){return selector[_].rect(tt,et,_e)}};return et}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(_e,_,et){return _e&&et.boundingRect.contain(_e[0],_e[1])},rect:function(_e,_,et){return _e&&et.boundingRect.intersect(_e)}},polygon:{point:function(_e,_,et){return _e&&et.boundingRect.contain(_e[0],_e[1])&&contain(et.range,_e[0],_e[1])},rect:function(_e,_,et){var tt=et.range;if(!_e||tt.length<=1)return!1;var nt=_e.x,it=_e.y,at=_e.width,ot=_e.height,st=tt[0];if(contain(tt,nt,it)||contain(tt,nt+at,it)||contain(tt,nt,it+ot)||contain(tt,nt+at,it+ot)||BoundingRect.create(_e).contain(st[0],st[1])||linePolygonIntersect(nt,it,nt+at,it,tt)||linePolygonIntersect(nt,it,nt,it+ot,tt)||linePolygonIntersect(nt+at,it,nt+at,it+ot,tt)||linePolygonIntersect(nt,it+ot,nt+at,it+ot,tt))return!0}}};function getLineSelectors(_e){var _=["x","y"],et=["width","height"];return{point:function(tt,nt,it){if(tt){var at=it.range,ot=tt[_e];return inLineRange(ot,at)}},rect:function(tt,nt,it){if(tt){var at=it.range,ot=[tt[_[_e]],tt[_[_e]]+tt[et[_e]]];return ot[1]<ot[0]&&ot.reverse(),inLineRange(ot[0],at)||inLineRange(ot[1],at)||inLineRange(at[0],ot)||inLineRange(at[1],ot)}}}}function inLineRange(_e,_){return _[0]<=_e&&_e<=_[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(_e){_e.eachComponent({mainType:"brush"},function(_){var et=_.brushTargetManager=new BrushTargetManager(_.option,_e);et.setInputRanges(_.areas,_e)})}function brushVisual(_e,_,et){var tt=[],nt,it;_e.eachComponent({mainType:"brush"},function(at){et&&et.type==="takeGlobalCursor"&&at.setBrushOption(et.key==="brush"?et.brushOption:{brushType:!1})}),layoutCovers(_e),_e.eachComponent({mainType:"brush"},function(at,ot){var st={brushId:at.id,brushIndex:ot,brushName:at.name,areas:clone$4(at.areas),selected:[]};tt.push(st);var dt=at.option,ht=dt.brushLink,ct=[],ut=[],ft=[],gt=!1;ot||(nt=dt.throttleType,it=dt.throttleDelay);var mt=map$1(at.areas,function(St){var Tt=boundingRectBuilders[St.brushType],wt=defaults({boundingRect:Tt?Tt(St):void 0},St);return wt.selectors=makeBrushCommonSelectorForSeries(wt),wt}),vt=createVisualMappings(at.option,STATE_LIST,function(St){St.mappingMethod="fixed"});isArray$1(ht)&&each$f(ht,function(St){ct[St]=1});function yt(St){return ht==="all"||!!ct[St]}function bt(St){return!!St.length}_e.eachSeries(function(St,Tt){var wt=ft[Tt]=[];St.subType==="parallel"?_t(St,Tt):xt(St,Tt,wt)});function _t(St,Tt){var wt=St.coordinateSystem;gt=gt||wt.hasAxisBrushed(),yt(Tt)&&wt.eachActiveState(St.getData(),function(Ct,Et){Ct==="active"&&(ut[Et]=1)})}function xt(St,Tt,wt){if(!(!St.brushSelector||brushModelNotControll(at,Tt))&&(each$f(mt,function(Et){at.brushTargetManager.controlSeries(Et,St,_e)&&wt.push(Et),gt=gt||bt(wt)}),yt(Tt)&&bt(wt))){var Ct=St.getData();Ct.each(function(Et){checkInRange(St,wt,Ct,Et)&&(ut[Et]=1)})}}_e.eachSeries(function(St,Tt){var wt={seriesId:St.id,seriesIndex:Tt,seriesName:St.name,dataIndex:[]};st.selected.push(wt);var Ct=ft[Tt],Et=St.getData(),At=yt(Tt)?function(Pt){return ut[Pt]?(wt.dataIndex.push(Et.getRawIndex(Pt)),"inBrush"):"outOfBrush"}:function(Pt){return checkInRange(St,Ct,Et,Pt)?(wt.dataIndex.push(Et.getRawIndex(Pt)),"inBrush"):"outOfBrush"};(yt(Tt)?gt:bt(Ct))&&applyVisual(STATE_LIST,vt,Et,At)})}),dispatchAction$1(_,nt,it,tt,et)}function dispatchAction$1(_e,_,et,tt,nt){if(nt){var it=_e.getZr();if(!it[DISPATCH_FLAG]){it[DISPATCH_METHOD]||(it[DISPATCH_METHOD]=doDispatch);var at=createOrUpdate(it,DISPATCH_METHOD,et,_);at(_e,tt)}}}function doDispatch(_e,_){if(!_e.isDisposed()){var et=_e.getZr();et[DISPATCH_FLAG]=!0,_e.dispatchAction({type:"brushSelect",batch:_}),et[DISPATCH_FLAG]=!1}}function checkInRange(_e,_,et,tt){for(var nt=0,it=_.length;nt<it;nt++){var at=_[nt];if(_e.brushSelector(tt,et,at.selectors,at))return!0}}function brushModelNotControll(_e,_){var et=_e.option.seriesIndex;return et!=null&&et!=="all"&&(isArray$1(et)?indexOf(et,_)<0:_!==et)}var boundingRectBuilders={rect:function(_e){return getBoundingRectFromMinMax(_e.range)},polygon:function(_e){for(var _,et=_e.range,tt=0,nt=et.length;tt<nt;tt++){_=_||[[1/0,-1/0],[1/0,-1/0]];var it=et[tt];it[0]<_[0][0]&&(_[0][0]=it[0]),it[0]>_[0][1]&&(_[0][1]=it[0]),it[1]<_[1][0]&&(_[1][0]=it[1]),it[1]>_[1][1]&&(_[1][1]=it[1])}return _&&getBoundingRectFromMinMax(_)}};function getBoundingRectFromMinMax(_e){return new BoundingRect(_e[0][0],_e[1][0],_e[0][1]-_e[0][0],_e[1][1]-_e[1][0])}var BrushView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(et,tt){this.ecModel=et,this.api=tt,this.model,(this._brushController=new BrushController(tt.getZr())).on("brush",bind$2(this._onBrush,this)).mount()},_.prototype.render=function(et,tt,nt,it){this.model=et,this._updateController(et,tt,nt,it)},_.prototype.updateTransform=function(et,tt,nt,it){layoutCovers(tt),this._updateController(et,tt,nt,it)},_.prototype.updateVisual=function(et,tt,nt,it){this.updateTransform(et,tt,nt,it)},_.prototype.updateView=function(et,tt,nt,it){this._updateController(et,tt,nt,it)},_.prototype._updateController=function(et,tt,nt,it){(!it||it.$from!==et.id)&&this._brushController.setPanels(et.brushTargetManager.makePanelOpts(nt)).enableBrush(et.brushOption).updateCovers(et.areas.slice())},_.prototype.dispose=function(){this._brushController.dispose()},_.prototype._onBrush=function(et){var tt=this.model.id,nt=this.model.brushTargetManager.setOutputRanges(et.areas,this.ecModel);(!et.isEnd||et.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:tt,areas:clone$4(nt),$from:tt}),et.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:tt,areas:clone$4(nt),$from:tt})},_.type="brush",_}(ComponentView),DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.areas=[],et.brushOption={},et}return _.prototype.optionUpdated=function(et,tt){var nt=this.option;!tt&&replaceVisualOption(nt,et,["inBrush","outOfBrush"]);var it=nt.inBrush=nt.inBrush||{};nt.outOfBrush=nt.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},it.hasOwnProperty("liftZ")||(it.liftZ=5)},_.prototype.setAreas=function(et){et&&(this.areas=map$1(et,function(tt){return generateBrushOption(this.option,tt)},this))},_.prototype.setBrushOption=function(et){this.brushOption=generateBrushOption(this.option,et),this.brushType=this.brushOption.brushType},_.type="brush",_.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],_.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},_}(ComponentModel);function generateBrushOption(_e,_){return merge$1({brushType:_e.brushType,brushMode:_e.brushMode,transformable:_e.transformable,brushStyle:new Model(_e.brushStyle).getItemStyle(),removeOnClick:_e.removeOnClick,z:_e.z},_,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(_e){__extends$1(_,_e);function _(){return _e!==null&&_e.apply(this,arguments)||this}return _.prototype.render=function(et,tt,nt){var it,at,ot;tt.eachComponent({mainType:"brush"},function(st){it=st.brushType,at=st.brushOption.brushMode||"single",ot=ot||!!st.areas.length}),this._brushType=it,this._brushMode=at,each$f(et.get("type",!0),function(st){et.setIconStatus(st,(st==="keep"?at==="multiple":st==="clear"?ot:st===it)?"emphasis":"normal")})},_.prototype.updateView=function(et,tt,nt){this.render(et,tt,nt)},_.prototype.getIcons=function(){var et=this.model,tt=et.get("icon",!0),nt={};return each$f(et.get("type",!0),function(it){tt[it]&&(nt[it]=tt[it])}),nt},_.prototype.onclick=function(et,tt,nt){var it=this._brushType,at=this._brushMode;nt==="clear"?(tt.dispatchAction({type:"axisAreaSelect",intervals:[]}),tt.dispatchAction({type:"brush",command:"clear",areas:[]})):tt.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:nt==="keep"?it:it===nt?!1:nt,brushMode:nt==="keep"?at==="multiple"?"single":"multiple":at}})},_.getDefaultOption=function(et){var tt={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:et.getLocaleModel().get(["toolbox","brush","title"])};return tt},_}(ToolboxFeature);function install$h(_e){_e.registerComponentView(BrushView),_e.registerComponentModel(BrushModel),_e.registerPreprocessor(brushPreprocessor),_e.registerVisual(_e.PRIORITY.VISUAL.BRUSH,brushVisual),_e.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(_,et){et.eachComponent({mainType:"brush",query:_},function(tt){tt.setAreas(_.areas)})}),_e.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),_e.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature)}var TitleModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.layoutMode={type:"box",ignoreSize:!0},et}return _.type="title",_.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},_}(ComponentModel),TitleView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.render=function(et,tt,nt){if(this.group.removeAll(),!!et.get("show")){var it=this.group,at=et.getModel("textStyle"),ot=et.getModel("subtextStyle"),st=et.get("textAlign"),dt=retrieve2(et.get("textBaseline"),et.get("textVerticalAlign")),ht=new ZRText({style:createTextStyle$1(at,{text:et.get("text"),fill:at.getTextColor()},{disableBox:!0}),z2:10}),ct=ht.getBoundingRect(),ut=et.get("subtext"),ft=new ZRText({style:createTextStyle$1(ot,{text:ut,fill:ot.getTextColor(),y:ct.height+et.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),gt=et.get("link"),mt=et.get("sublink"),vt=et.get("triggerEvent",!0);ht.silent=!gt&&!vt,ft.silent=!mt&&!vt,gt&&ht.on("click",function(){windowOpen(gt,"_"+et.get("target"))}),mt&&ft.on("click",function(){windowOpen(mt,"_"+et.get("subtarget"))}),getECData(ht).eventData=getECData(ft).eventData=vt?{componentType:"title",componentIndex:et.componentIndex}:null,it.add(ht),ut&&it.add(ft);var yt=it.getBoundingRect(),bt=et.getBoxLayoutParams();bt.width=yt.width,bt.height=yt.height;var _t=getLayoutRect(bt,{width:nt.getWidth(),height:nt.getHeight()},et.get("padding"));st||(st=et.get("left")||et.get("right"),st==="middle"&&(st="center"),st==="right"?_t.x+=_t.width:st==="center"&&(_t.x+=_t.width/2)),dt||(dt=et.get("top")||et.get("bottom"),dt==="center"&&(dt="middle"),dt==="bottom"?_t.y+=_t.height:dt==="middle"&&(_t.y+=_t.height/2),dt=dt||"top"),it.x=_t.x,it.y=_t.y,it.markRedraw();var xt={align:st,verticalAlign:dt};ht.setStyle(xt),ft.setStyle(xt),yt=it.getBoundingRect();var St=_t.margin,Tt=et.getItemStyle(["color","opacity"]);Tt.fill=et.get("backgroundColor");var wt=new Rect$2({shape:{x:yt.x-St[3],y:yt.y-St[0],width:yt.width+St[1]+St[3],height:yt.height+St[0]+St[2],r:et.get("borderRadius")},style:Tt,subPixelOptimize:!0,silent:!0});it.add(wt)}},_.type="title",_}(ComponentView);function install$g(_e){_e.registerComponentModel(TitleModel),_e.registerComponentView(TitleView)}var TimelineModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.layoutMode="box",et}return _.prototype.init=function(et,tt,nt){this.mergeDefaultAndTheme(et,nt),this._initData()},_.prototype.mergeOption=function(et){_e.prototype.mergeOption.apply(this,arguments),this._initData()},_.prototype.setCurrentIndex=function(et){et==null&&(et=this.option.currentIndex);var tt=this._data.count();this.option.loop?et=(et%tt+tt)%tt:(et>=tt&&(et=tt-1),et<0&&(et=0)),this.option.currentIndex=et},_.prototype.getCurrentIndex=function(){return this.option.currentIndex},_.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},_.prototype.setPlayState=function(et){this.option.autoPlay=!!et},_.prototype.getPlayState=function(){return!!this.option.autoPlay},_.prototype._initData=function(){var et=this.option,tt=et.data||[],nt=et.axisType,it=this._names=[],at;nt==="category"?(at=[],each$f(tt,function(dt,ht){var ct=convertOptionIdName(getDataItemValue(dt),""),ut;isObject$4(dt)?(ut=clone$4(dt),ut.value=ht):ut=ht,at.push(ut),it.push(ct)})):at=tt;var ot={category:"ordinal",time:"time",value:"number"}[nt]||"number",st=this._data=new SeriesData([{name:"value",type:ot}],this);st.initData(at,it)},_.prototype.getData=function(){return this._data},_.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},_.type="timeline",_.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},_}(ComponentModel),SliderTimelineModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="timeline.slider",_.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),_}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="timeline",_}(ComponentView),TimelineAxis=function(_e){__extends$1(_,_e);function _(et,tt,nt,it){var at=_e.call(this,et,tt,nt)||this;return at.type=it||"value",at}return _.prototype.getLabelModel=function(){return this.model.getModel("label")},_.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},_}(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(et,tt){this.api=tt},_.prototype.render=function(et,tt,nt){if(this.model=et,this.api=nt,this.ecModel=tt,this.group.removeAll(),et.get("show",!0)){var it=this._layout(et,nt),at=this._createGroup("_mainGroup"),ot=this._createGroup("_labelGroup"),st=this._axis=this._createAxis(it,et);et.formatTooltip=function(dt){var ht=st.scale.getLabel({value:dt});return createTooltipMarkup("nameValue",{noName:!0,value:ht})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(dt){this["_render"+dt](it,at,st,et)},this),this._renderAxisLabel(it,ot,st,et),this._position(it,et)}this._doPlayStop(),this._updateTicksStatus()},_.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},_.prototype.dispose=function(){this._clearTimer()},_.prototype._layout=function(et,tt){var nt=et.get(["label","position"]),it=et.get("orient"),at=getViewRect(et,tt),ot;nt==null||nt==="auto"?ot=it==="horizontal"?at.y+at.height/2<tt.getHeight()/2?"-":"+":at.x+at.width/2<tt.getWidth()/2?"+":"-":isString$1(nt)?ot={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[it][nt]:ot=nt;var st={horizontal:"center",vertical:ot>=0||ot==="+"?"left":"right"},dt={horizontal:ot>=0||ot==="+"?"top":"bottom",vertical:"middle"},ht={horizontal:0,vertical:PI/2},ct=it==="vertical"?at.height:at.width,ut=et.getModel("controlStyle"),ft=ut.get("show",!0),gt=ft?ut.get("itemSize"):0,mt=ft?ut.get("itemGap"):0,vt=gt+mt,yt=et.get(["label","rotate"])||0;yt=yt*PI/180;var bt,_t,xt,St=ut.get("position",!0),Tt=ft&&ut.get("showPlayBtn",!0),wt=ft&&ut.get("showPrevBtn",!0),Ct=ft&&ut.get("showNextBtn",!0),Et=0,At=ct;St==="left"||St==="bottom"?(Tt&&(bt=[0,0],Et+=vt),wt&&(_t=[Et,0],Et+=vt),Ct&&(xt=[At-gt,0],At-=vt)):(Tt&&(bt=[At-gt,0],At-=vt),wt&&(_t=[0,0],Et+=vt),Ct&&(xt=[At-gt,0],At-=vt));var Pt=[Et,At];return et.get("inverse")&&Pt.reverse(),{viewRect:at,mainLength:ct,orient:it,rotation:ht[it],labelRotation:yt,labelPosOpt:ot,labelAlign:et.get(["label","align"])||st[it],labelBaseline:et.get(["label","verticalAlign"])||et.get(["label","baseline"])||dt[it],playPosition:bt,prevBtnPosition:_t,nextBtnPosition:xt,axisExtent:Pt,controlSize:gt,controlGap:mt}},_.prototype._position=function(et,tt){var nt=this._mainGroup,it=this._labelGroup,at=et.viewRect;if(et.orient==="vertical"){var ot=create$1(),st=at.x,dt=at.y+at.height;translate(ot,ot,[-st,-dt]),rotate(ot,ot,-PI/2),translate(ot,ot,[st,dt]),at=at.clone(),at.applyTransform(ot)}var ht=bt(at),ct=bt(nt.getBoundingRect()),ut=bt(it.getBoundingRect()),ft=[nt.x,nt.y],gt=[it.x,it.y];gt[0]=ft[0]=ht[0][0];var mt=et.labelPosOpt;if(mt==null||isString$1(mt)){var vt=mt==="+"?0:1;_t(ft,ct,ht,1,vt),_t(gt,ut,ht,1,1-vt)}else{var vt=mt>=0?0:1;_t(ft,ct,ht,1,vt),gt[1]=ft[1]+mt}nt.setPosition(ft),it.setPosition(gt),nt.rotation=it.rotation=et.rotation,yt(nt),yt(it);function yt(xt){xt.originX=ht[0][0]-xt.x,xt.originY=ht[1][0]-xt.y}function bt(xt){return[[xt.x,xt.x+xt.width],[xt.y,xt.y+xt.height]]}function _t(xt,St,Tt,wt,Ct){xt[wt]+=Tt[wt][Ct]-St[wt][Ct]}},_.prototype._createAxis=function(et,tt){var nt=tt.getData(),it=tt.get("axisType"),at=createScaleByModel(tt,it);at.getTicks=function(){return nt.mapArray(["value"],function(dt){return{value:dt}})};var ot=nt.getDataExtent("value");at.setExtent(ot[0],ot[1]),at.calcNiceTicks();var st=new TimelineAxis("value",at,et.axisExtent,it);return st.model=tt,st},_.prototype._createGroup=function(et){var tt=this[et]=new Group$3;return this.group.add(tt),tt},_.prototype._renderAxisLine=function(et,tt,nt,it){var at=nt.getExtent();if(it.get(["lineStyle","show"])){var ot=new Line$1({shape:{x1:at[0],y1:0,x2:at[1],y2:0},style:extend({lineCap:"round"},it.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});tt.add(ot);var st=this._progressLine=new Line$1({shape:{x1:at[0],x2:this._currentPointer?this._currentPointer.x:at[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:ot.style.lineWidth},it.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});tt.add(st)}},_.prototype._renderAxisTick=function(et,tt,nt,it){var at=this,ot=it.getData(),st=nt.scale.getTicks();this._tickSymbols=[],each$f(st,function(dt){var ht=nt.dataToCoord(dt.value),ct=ot.getItemModel(dt.value),ut=ct.getModel("itemStyle"),ft=ct.getModel(["emphasis","itemStyle"]),gt=ct.getModel(["progress","itemStyle"]),mt={x:ht,y:0,onclick:bind$2(at._changeTimeline,at,dt.value)},vt=giveSymbol(ct,ut,tt,mt);vt.ensureState("emphasis").style=ft.getItemStyle(),vt.ensureState("progress").style=gt.getItemStyle(),enableHoverEmphasis(vt);var yt=getECData(vt);ct.get("tooltip")?(yt.dataIndex=dt.value,yt.dataModel=it):yt.dataIndex=yt.dataModel=null,at._tickSymbols.push(vt)})},_.prototype._renderAxisLabel=function(et,tt,nt,it){var at=this,ot=nt.getLabelModel();if(ot.get("show")){var st=it.getData(),dt=nt.getViewLabels();this._tickLabels=[],each$f(dt,function(ht){var ct=ht.tickValue,ut=st.getItemModel(ct),ft=ut.getModel("label"),gt=ut.getModel(["emphasis","label"]),mt=ut.getModel(["progress","label"]),vt=nt.dataToCoord(ht.tickValue),yt=new ZRText({x:vt,y:0,rotation:et.labelRotation-et.rotation,onclick:bind$2(at._changeTimeline,at,ct),silent:!1,style:createTextStyle$1(ft,{text:ht.formattedLabel,align:et.labelAlign,verticalAlign:et.labelBaseline})});yt.ensureState("emphasis").style=createTextStyle$1(gt),yt.ensureState("progress").style=createTextStyle$1(mt),tt.add(yt),enableHoverEmphasis(yt),labelDataIndexStore(yt).dataIndex=ct,at._tickLabels.push(yt)})}},_.prototype._renderControl=function(et,tt,nt,it){var at=et.controlSize,ot=et.rotation,st=it.getModel("controlStyle").getItemStyle(),dt=it.getModel(["emphasis","controlStyle"]).getItemStyle(),ht=it.getPlayState(),ct=it.get("inverse",!0);ut(et.nextBtnPosition,"next",bind$2(this._changeTimeline,this,ct?"-":"+")),ut(et.prevBtnPosition,"prev",bind$2(this._changeTimeline,this,ct?"+":"-")),ut(et.playPosition,ht?"stop":"play",bind$2(this._handlePlayClick,this,!ht),!0);function ut(ft,gt,mt,vt){if(ft){var yt=parsePercent$1(retrieve2(it.get(["controlStyle",gt+"BtnSize"]),at),at),bt=[0,-yt/2,yt,yt],_t=makeControlIcon(it,gt+"Icon",bt,{x:ft[0],y:ft[1],originX:at/2,originY:0,rotation:vt?-ot:0,rectHover:!0,style:st,onclick:mt});_t.ensureState("emphasis").style=dt,tt.add(_t),enableHoverEmphasis(_t)}}},_.prototype._renderCurrentPointer=function(et,tt,nt,it){var at=it.getData(),ot=it.getCurrentIndex(),st=at.getItemModel(ot).getModel("checkpointStyle"),dt=this,ht={onCreate:function(ct){ct.draggable=!0,ct.drift=bind$2(dt._handlePointerDrag,dt),ct.ondragend=bind$2(dt._handlePointerDragend,dt),pointerMoveTo(ct,dt._progressLine,ot,nt,it,!0)},onUpdate:function(ct){pointerMoveTo(ct,dt._progressLine,ot,nt,it)}};this._currentPointer=giveSymbol(st,st,this._mainGroup,{},this._currentPointer,ht)},_.prototype._handlePlayClick=function(et){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:et,from:this.uid})},_.prototype._handlePointerDrag=function(et,tt,nt){this._clearTimer(),this._pointerChangeTimeline([nt.offsetX,nt.offsetY])},_.prototype._handlePointerDragend=function(et){this._pointerChangeTimeline([et.offsetX,et.offsetY],!0)},_.prototype._pointerChangeTimeline=function(et,tt){var nt=this._toAxisCoord(et)[0],it=this._axis,at=asc$2(it.getExtent().slice());nt>at[1]&&(nt=at[1]),nt<at[0]&&(nt=at[0]),this._currentPointer.x=nt,this._currentPointer.markRedraw();var ot=this._progressLine;ot&&(ot.shape.x2=nt,ot.dirty());var st=this._findNearestTick(nt),dt=this.model;(tt||st!==dt.getCurrentIndex()&&dt.get("realtime"))&&this._changeTimeline(st)},_.prototype._doPlayStop=function(){var et=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var tt=et.model;et._changeTimeline(tt.getCurrentIndex()+(tt.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},_.prototype._toAxisCoord=function(et){var tt=this._mainGroup.getLocalTransform();return applyTransform(et,tt,!0)},_.prototype._findNearestTick=function(et){var tt=this.model.getData(),nt=1/0,it,at=this._axis;return tt.each(["value"],function(ot,st){var dt=at.dataToCoord(ot),ht=Math.abs(dt-et);ht<nt&&(nt=ht,it=st)}),it},_.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_.prototype._changeTimeline=function(et){var tt=this.model.getCurrentIndex();et==="+"?et=tt+1:et==="-"&&(et=tt-1),this.api.dispatchAction({type:"timelineChange",currentIndex:et,from:this.uid})},_.prototype._updateTicksStatus=function(){var et=this.model.getCurrentIndex(),tt=this._tickSymbols,nt=this._tickLabels;if(tt)for(var it=0;it<tt.length;it++)tt&&tt[it]&&tt[it].toggleState("progress",it<et);if(nt)for(var it=0;it<nt.length;it++)nt&&nt[it]&&nt[it].toggleState("progress",labelDataIndexStore(nt[it]).dataIndex<=et)},_.type="timeline.slider",_}(TimelineView);function createScaleByModel(_e,_){if(_=_||_e.get("type"),_)switch(_){case"category":return new OrdinalScale({ordinalMeta:_e.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:_e.ecModel.getLocaleModel(),useUTC:_e.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(_e,_){return getLayoutRect(_e.getBoxLayoutParams(),{width:_.getWidth(),height:_.getHeight()},_e.get("padding"))}function makeControlIcon(_e,_,et,tt){var nt=tt.style,it=createIcon(_e.get(["controlStyle",_]),tt,new BoundingRect(et[0],et[1],et[2],et[3]));return nt&&it.setStyle(nt),it}function giveSymbol(_e,_,et,tt,nt,it){var at=_.get("color");if(nt)nt.setColor(at),et.add(nt),it&&it.onUpdate(nt);else{var ot=_e.get("symbol");nt=createSymbol$1(ot,-1,-1,2,2,at),nt.setStyle("strokeNoScale",!0),et.add(nt),it&&it.onCreate(nt)}var st=_.getItemStyle(["color"]);nt.setStyle(st),tt=merge$1({rectHover:!0,z2:100},tt,!0);var dt=normalizeSymbolSize(_e.get("symbolSize"));tt.scaleX=dt[0]/2,tt.scaleY=dt[1]/2;var ht=normalizeSymbolOffset(_e.get("symbolOffset"),dt);ht&&(tt.x=(tt.x||0)+ht[0],tt.y=(tt.y||0)+ht[1]);var ct=_e.get("symbolRotate");return tt.rotation=(ct||0)*Math.PI/180||0,nt.attr(tt),nt.updateTransform(),nt}function pointerMoveTo(_e,_,et,tt,nt,it){if(!_e.dragging){var at=nt.getModel("checkpointStyle"),ot=tt.dataToCoord(nt.getData().get("value",et));if(it||!at.get("animation",!0))_e.attr({x:ot,y:0}),_&&_.attr({shape:{x2:ot}});else{var st={duration:at.get("animationDuration",!0),easing:at.get("animationEasing",!0)};_e.stopAnimation(null,!0),_e.animateTo({x:ot,y:0},st),_&&_.animateTo({shape:{x2:ot}},st)}}}function installTimelineAction(_e){_e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(_,et,tt){var nt=et.getComponent("timeline");return nt&&_.currentIndex!=null&&(nt.setCurrentIndex(_.currentIndex),!nt.get("loop",!0)&&nt.isIndexMax()&&nt.getPlayState()&&(nt.setPlayState(!1),tt.dispatchAction({type:"timelinePlayChange",playState:!1,from:_.from}))),et.resetOption("timeline",{replaceMerge:nt.get("replaceMerge",!0)}),defaults({currentIndex:nt.option.currentIndex},_)}),_e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(_,et){var tt=et.getComponent("timeline");tt&&_.playState!=null&&tt.setPlayState(_.playState)})}function timelinePreprocessor(_e){var _=_e&&_e.timeline;isArray$1(_)||(_=_?[_]:[]),each$f(_,function(et){et&&compatibleEC2(et)})}function compatibleEC2(_e){var _=_e.type,et={number:"value",time:"time"};if(et[_]&&(_e.axisType=et[_],delete _e.type),transferItem(_e),has$1(_e,"controlPosition")){var tt=_e.controlStyle||(_e.controlStyle={});has$1(tt,"position")||(tt.position=_e.controlPosition),tt.position==="none"&&!has$1(tt,"show")&&(tt.show=!1,delete tt.position),delete _e.controlPosition}each$f(_e.data||[],function(nt){isObject$4(nt)&&!isArray$1(nt)&&(!has$1(nt,"value")&&has$1(nt,"name")&&(nt.value=nt.name),transferItem(nt))})}function transferItem(_e){var _=_e.itemStyle||(_e.itemStyle={}),et=_.emphasis||(_.emphasis={}),tt=_e.label||_e.label||{},nt=tt.normal||(tt.normal={}),it={normal:1,emphasis:1};each$f(tt,function(at,ot){!it[ot]&&!has$1(nt,ot)&&(nt[ot]=at)}),et.label&&!has$1(tt,"emphasis")&&(tt.emphasis=et.label,delete et.label)}function has$1(_e,_){return _e.hasOwnProperty(_)}function install$f(_e){_e.registerComponentModel(SliderTimelineModel),_e.registerComponentView(SliderTimelineView),_e.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(_e),_e.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(_e,_){if(!_e)return!1;for(var et=isArray$1(_e)?_e:[_e],tt=0;tt<et.length;tt++)if(et[tt]&&et[tt][_])return!0;return!1}function fillLabel(_e){defaultEmphasis(_e,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.createdBySelf=!1,et}return _.prototype.init=function(et,tt,nt){this.mergeDefaultAndTheme(et,nt),this._mergeOption(et,nt,!1,!0)},_.prototype.isAnimationEnabled=function(){if(env.node)return!1;var et=this.__hostSeries;return this.getShallow("animation")&&et&&et.isAnimationEnabled()},_.prototype.mergeOption=function(et,tt){this._mergeOption(et,tt,!1,!1)},_.prototype._mergeOption=function(et,tt,nt,it){var at=this.mainType;nt||tt.eachSeries(function(ot){var st=ot.get(this.mainType,!0),dt=inner$5(ot)[at];if(!st||!st.data){inner$5(ot)[at]=null;return}dt?dt._mergeOption(st,tt,!0):(it&&fillLabel(st),each$f(st.data,function(ht){ht instanceof Array?(fillLabel(ht[0]),fillLabel(ht[1])):fillLabel(ht)}),dt=this.createMarkerModelFromSeries(st,this,tt),extend(dt,{mainType:this.mainType,seriesIndex:ot.seriesIndex,name:ot.name,createdBySelf:!0}),dt.__hostSeries=ot),inner$5(ot)[at]=dt},this)},_.prototype.formatTooltip=function(et,tt,nt){var it=this.getData(),at=this.getRawValue(et),ot=it.getName(et);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:ot,value:at,noName:!ot,noValue:at==null})]})},_.prototype.getData=function(){return this._data},_.prototype.setData=function(et){this._data=et},_.prototype.getDataParams=function(et,tt){var nt=DataFormatMixin.prototype.getDataParams.call(this,et,tt),it=this.__hostSeries;return it&&(nt.seriesId=it.id,nt.seriesName=it.name,nt.seriesType=it.subType),nt},_.getMarkerModelFromSeries=function(et,tt){return inner$5(et)[tt]},_.type="marker",_.dependencies=["series","grid","polar","geo"],_}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.createMarkerModelFromSeries=function(et,tt,nt){return new _(et,tt,nt)},_.type="markPoint",_.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},_}(MarkerModel);function hasXOrY(_e){return!(isNaN(parseFloat(_e.x))&&isNaN(parseFloat(_e.y)))}function hasXAndY(_e){return!isNaN(parseFloat(_e.x))&&!isNaN(parseFloat(_e.y))}function markerTypeCalculatorWithExtent(_e,_,et,tt,nt,it){var at=[],ot=isDimensionStacked(_,tt),st=ot?_.getCalculationInfo("stackResultDimension"):tt,dt=numCalculate(_,st,_e),ht=_.indicesOfNearest(st,dt)[0];at[nt]=_.get(et,ht),at[it]=_.get(st,ht);var ct=_.get(tt,ht),ut=getPrecision(_.get(tt,ht));return ut=Math.min(ut,20),ut>=0&&(at[it]=+at[it].toFixed(ut)),[at,ct]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(_e,_){if(_){var et=_e.getData(),tt=_e.coordinateSystem,nt=tt&&tt.dimensions;if(!hasXAndY(_)&&!isArray$1(_.coord)&&isArray$1(nt)){var it=getAxisInfo(_,et,tt,_e);if(_=clone$4(_),_.type&&markerTypeCalculator[_.type]&&it.baseAxis&&it.valueAxis){var at=indexOf(nt,it.baseAxis.dim),ot=indexOf(nt,it.valueAxis.dim),st=markerTypeCalculator[_.type](et,it.baseDataDim,it.valueDataDim,at,ot);_.coord=st[0],_.value=st[1]}else _.coord=[_.xAxis!=null?_.xAxis:_.radiusAxis,_.yAxis!=null?_.yAxis:_.angleAxis]}if(_.coord==null||!isArray$1(nt))_.coord=[];else for(var dt=_.coord,ht=0;ht<2;ht++)markerTypeCalculator[dt[ht]]&&(dt[ht]=numCalculate(et,et.mapDimension(nt[ht]),dt[ht]));return _}}function getAxisInfo(_e,_,et,tt){var nt={};return _e.valueIndex!=null||_e.valueDim!=null?(nt.valueDataDim=_e.valueIndex!=null?_.getDimension(_e.valueIndex):_e.valueDim,nt.valueAxis=et.getAxis(dataDimToCoordDim(tt,nt.valueDataDim)),nt.baseAxis=et.getOtherAxis(nt.valueAxis),nt.baseDataDim=_.mapDimension(nt.baseAxis.dim)):(nt.baseAxis=tt.getBaseAxis(),nt.valueAxis=et.getOtherAxis(nt.baseAxis),nt.baseDataDim=_.mapDimension(nt.baseAxis.dim),nt.valueDataDim=_.mapDimension(nt.valueAxis.dim)),nt}function dataDimToCoordDim(_e,_){var et=_e.getData().getDimensionInfo(_);return et&&et.coordDim}function dataFilter(_e,_){return _e&&_e.containData&&_.coord&&!hasXOrY(_)?_e.containData(_.coord):!0}function zoneFilter(_e,_,et){return _e&&_e.containZone&&_.coord&&et.coord&&!hasXOrY(_)&&!hasXOrY(et)?_e.containZone(_.coord,et.coord):!0}function createMarkerDimValueGetter(_e,_){return _e?function(et,tt,nt,it){var at=it<2?et.coord&&et.coord[it]:et.value;return parseDataValue(at,_[it])}:function(et,tt,nt,it){return parseDataValue(et.value,_[it])}}function numCalculate(_e,_,et){if(et==="average"){var tt=0,nt=0;return _e.each(_,function(it,at){isNaN(it)||(tt+=it,nt++)}),tt/nt}else return et==="median"?_e.getMedian(_):_e.getDataExtent(_)[et==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.init=function(){this.markerGroupMap=createHashMap()},_.prototype.render=function(et,tt,nt){var it=this,at=this.markerGroupMap;at.each(function(ot){inner$4(ot).keep=!1}),tt.eachSeries(function(ot){var st=MarkerModel.getMarkerModelFromSeries(ot,it.type);st&&it.renderSeries(ot,st,tt,nt)}),at.each(function(ot){!inner$4(ot).keep&&it.group.remove(ot.group)})},_.prototype.markKeep=function(et){inner$4(et).keep=!0},_.prototype.toggleBlurSeries=function(et,tt){var nt=this;each$f(et,function(it){var at=MarkerModel.getMarkerModelFromSeries(it,nt.type);if(at){var ot=at.getData();ot.eachItemGraphicEl(function(st){st&&(tt?enterBlur(st):leaveBlur(st))})}})},_.type="marker",_}(ComponentView);function updateMarkerLayout(_e,_,et){var tt=_.coordinateSystem;_e.each(function(nt){var it=_e.getItemModel(nt),at,ot=parsePercent(it.get("x"),et.getWidth()),st=parsePercent(it.get("y"),et.getHeight());if(!isNaN(ot)&&!isNaN(st))at=[ot,st];else if(_.getMarkerPosition)at=_.getMarkerPosition(_e.getValues(_e.dimensions,nt));else if(tt){var dt=_e.get(tt.dimensions[0],nt),ht=_e.get(tt.dimensions[1],nt);at=tt.dataToPoint([dt,ht])}isNaN(ot)||(at[0]=ot),isNaN(st)||(at[1]=st),_e.setItemLayout(nt,at)})}var MarkPointView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.updateTransform=function(et,tt,nt){tt.eachSeries(function(it){var at=MarkerModel.getMarkerModelFromSeries(it,"markPoint");at&&(updateMarkerLayout(at.getData(),it,nt),this.markerGroupMap.get(it.id).updateLayout())},this)},_.prototype.renderSeries=function(et,tt,nt,it){var at=et.coordinateSystem,ot=et.id,st=et.getData(),dt=this.markerGroupMap,ht=dt.get(ot)||dt.set(ot,new SymbolDraw),ct=createData(at,et,tt);tt.setData(ct),updateMarkerLayout(tt.getData(),et,it),ct.each(function(ut){var ft=ct.getItemModel(ut),gt=ft.getShallow("symbol"),mt=ft.getShallow("symbolSize"),vt=ft.getShallow("symbolRotate"),yt=ft.getShallow("symbolOffset"),bt=ft.getShallow("symbolKeepAspect");if(isFunction$3(gt)||isFunction$3(mt)||isFunction$3(vt)||isFunction$3(yt)){var _t=tt.getRawValue(ut),xt=tt.getDataParams(ut);isFunction$3(gt)&&(gt=gt(_t,xt)),isFunction$3(mt)&&(mt=mt(_t,xt)),isFunction$3(vt)&&(vt=vt(_t,xt)),isFunction$3(yt)&&(yt=yt(_t,xt))}var St=ft.getModel("itemStyle").getItemStyle(),Tt=getVisualFromData(st,"color");St.fill||(St.fill=Tt),ct.setItemVisual(ut,{symbol:gt,symbolSize:mt,symbolRotate:vt,symbolOffset:yt,symbolKeepAspect:bt,style:St})}),ht.updateData(ct),this.group.add(ht.group),ct.eachItemGraphicEl(function(ut){ut.traverse(function(ft){getECData(ft).dataModel=tt})}),this.markKeep(ht),ht.group.silent=tt.get("silent")||et.get("silent")},_.type="markPoint",_}(MarkerView);function createData(_e,_,et){var tt;_e?tt=map$1(_e&&_e.dimensions,function(ot){var st=_.getData().getDimensionInfo(_.getData().mapDimension(ot))||{};return extend(extend({},st),{name:ot,ordinalMeta:null})}):tt=[{name:"value",type:"float"}];var nt=new SeriesData(tt,et),it=map$1(et.get("data"),curry$1(dataTransform,_));_e&&(it=filter$1(it,curry$1(dataFilter,_e)));var at=createMarkerDimValueGetter(!!_e,tt);return nt.initData(it,null,at),nt}function install$e(_e){_e.registerComponentModel(MarkPointModel),_e.registerComponentView(MarkPointView),_e.registerPreprocessor(function(_){checkMarkerInSeries(_.series,"markPoint")&&(_.markPoint=_.markPoint||{})})}var MarkLineModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.createMarkerModelFromSeries=function(et,tt,nt){return new _(et,tt,nt)},_.type="markLine",_.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},_}(MarkerModel),inner$3=makeInner(),markLineTransform=function(_e,_,et,tt){var nt=_e.getData(),it;if(isArray$1(tt))it=tt;else{var at=tt.type;if(at==="min"||at==="max"||at==="average"||at==="median"||tt.xAxis!=null||tt.yAxis!=null){var ot=void 0,st=void 0;if(tt.yAxis!=null||tt.xAxis!=null)ot=_.getAxis(tt.yAxis!=null?"y":"x"),st=retrieve(tt.yAxis,tt.xAxis);else{var dt=getAxisInfo(tt,nt,_,_e);ot=dt.valueAxis;var ht=getStackedDimension(nt,dt.valueDataDim);st=numCalculate(nt,ht,at)}var ct=ot.dim==="x"?0:1,ut=1-ct,ft=clone$4(tt),gt={coord:[]};ft.type=null,ft.coord=[],ft.coord[ut]=-1/0,gt.coord[ut]=1/0;var mt=et.get("precision");mt>=0&&isNumber(st)&&(st=+st.toFixed(Math.min(mt,20))),ft.coord[ct]=gt.coord[ct]=st,it=[ft,gt,{type:at,valueIndex:tt.valueIndex,value:st}]}else it=[]}var vt=[dataTransform(_e,it[0]),dataTransform(_e,it[1]),extend({},it[2])];return vt[2].type=vt[2].type||null,merge$1(vt[2],vt[0]),merge$1(vt[2],vt[1]),vt};function isInfinity$1(_e){return!isNaN(_e)&&!isFinite(_e)}function ifMarkLineHasOnlyDim(_e,_,et,tt){var nt=1-_e,it=tt.dimensions[_e];return isInfinity$1(_[nt])&&isInfinity$1(et[nt])&&_[_e]===et[_e]&&tt.getAxis(it).containData(_[_e])}function markLineFilter(_e,_){if(_e.type==="cartesian2d"){var et=_[0].coord,tt=_[1].coord;if(et&&tt&&(ifMarkLineHasOnlyDim(1,et,tt,_e)||ifMarkLineHasOnlyDim(0,et,tt,_e)))return!0}return dataFilter(_e,_[0])&&dataFilter(_e,_[1])}function updateSingleMarkerEndLayout(_e,_,et,tt,nt){var it=tt.coordinateSystem,at=_e.getItemModel(_),ot,st=parsePercent(at.get("x"),nt.getWidth()),dt=parsePercent(at.get("y"),nt.getHeight());if(!isNaN(st)&&!isNaN(dt))ot=[st,dt];else{if(tt.getMarkerPosition)ot=tt.getMarkerPosition(_e.getValues(_e.dimensions,_));else{var ht=it.dimensions,ct=_e.get(ht[0],_),ut=_e.get(ht[1],_);ot=it.dataToPoint([ct,ut])}if(isCoordinateSystemType(it,"cartesian2d")){var ft=it.getAxis("x"),gt=it.getAxis("y"),ht=it.dimensions;isInfinity$1(_e.get(ht[0],_))?ot[0]=ft.toGlobalCoord(ft.getExtent()[et?0:1]):isInfinity$1(_e.get(ht[1],_))&&(ot[1]=gt.toGlobalCoord(gt.getExtent()[et?0:1]))}isNaN(st)||(ot[0]=st),isNaN(dt)||(ot[1]=dt)}_e.setItemLayout(_,ot)}var MarkLineView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.updateTransform=function(et,tt,nt){tt.eachSeries(function(it){var at=MarkerModel.getMarkerModelFromSeries(it,"markLine");if(at){var ot=at.getData(),st=inner$3(at).from,dt=inner$3(at).to;st.each(function(ht){updateSingleMarkerEndLayout(st,ht,!0,it,nt),updateSingleMarkerEndLayout(dt,ht,!1,it,nt)}),ot.each(function(ht){ot.setItemLayout(ht,[st.getItemLayout(ht),dt.getItemLayout(ht)])}),this.markerGroupMap.get(it.id).updateLayout()}},this)},_.prototype.renderSeries=function(et,tt,nt,it){var at=et.coordinateSystem,ot=et.id,st=et.getData(),dt=this.markerGroupMap,ht=dt.get(ot)||dt.set(ot,new LineDraw);this.group.add(ht.group);var ct=createList$1(at,et,tt),ut=ct.from,ft=ct.to,gt=ct.line;inner$3(tt).from=ut,inner$3(tt).to=ft,tt.setData(gt);var mt=tt.get("symbol"),vt=tt.get("symbolSize"),yt=tt.get("symbolRotate"),bt=tt.get("symbolOffset");isArray$1(mt)||(mt=[mt,mt]),isArray$1(vt)||(vt=[vt,vt]),isArray$1(yt)||(yt=[yt,yt]),isArray$1(bt)||(bt=[bt,bt]),ct.from.each(function(xt){_t(ut,xt,!0),_t(ft,xt,!1)}),gt.each(function(xt){var St=gt.getItemModel(xt).getModel("lineStyle").getLineStyle();gt.setItemLayout(xt,[ut.getItemLayout(xt),ft.getItemLayout(xt)]),St.stroke==null&&(St.stroke=ut.getItemVisual(xt,"style").fill),gt.setItemVisual(xt,{fromSymbolKeepAspect:ut.getItemVisual(xt,"symbolKeepAspect"),fromSymbolOffset:ut.getItemVisual(xt,"symbolOffset"),fromSymbolRotate:ut.getItemVisual(xt,"symbolRotate"),fromSymbolSize:ut.getItemVisual(xt,"symbolSize"),fromSymbol:ut.getItemVisual(xt,"symbol"),toSymbolKeepAspect:ft.getItemVisual(xt,"symbolKeepAspect"),toSymbolOffset:ft.getItemVisual(xt,"symbolOffset"),toSymbolRotate:ft.getItemVisual(xt,"symbolRotate"),toSymbolSize:ft.getItemVisual(xt,"symbolSize"),toSymbol:ft.getItemVisual(xt,"symbol"),style:St})}),ht.updateData(gt),ct.line.eachItemGraphicEl(function(xt){getECData(xt).dataModel=tt,xt.traverse(function(St){getECData(St).dataModel=tt})});function _t(xt,St,Tt){var wt=xt.getItemModel(St);updateSingleMarkerEndLayout(xt,St,Tt,et,it);var Ct=wt.getModel("itemStyle").getItemStyle();Ct.fill==null&&(Ct.fill=getVisualFromData(st,"color")),xt.setItemVisual(St,{symbolKeepAspect:wt.get("symbolKeepAspect"),symbolOffset:retrieve2(wt.get("symbolOffset",!0),bt[Tt?0:1]),symbolRotate:retrieve2(wt.get("symbolRotate",!0),yt[Tt?0:1]),symbolSize:retrieve2(wt.get("symbolSize"),vt[Tt?0:1]),symbol:retrieve2(wt.get("symbol",!0),mt[Tt?0:1]),style:Ct})}this.markKeep(ht),ht.group.silent=tt.get("silent")||et.get("silent")},_.type="markLine",_}(MarkerView);function createList$1(_e,_,et){var tt;_e?tt=map$1(_e&&_e.dimensions,function(dt){var ht=_.getData().getDimensionInfo(_.getData().mapDimension(dt))||{};return extend(extend({},ht),{name:dt,ordinalMeta:null})}):tt=[{name:"value",type:"float"}];var nt=new SeriesData(tt,et),it=new SeriesData(tt,et),at=new SeriesData([],et),ot=map$1(et.get("data"),curry$1(markLineTransform,_,_e,et));_e&&(ot=filter$1(ot,curry$1(markLineFilter,_e)));var st=createMarkerDimValueGetter(!!_e,tt);return nt.initData(map$1(ot,function(dt){return dt[0]}),null,st),it.initData(map$1(ot,function(dt){return dt[1]}),null,st),at.initData(map$1(ot,function(dt){return dt[2]})),at.hasItemOption=!0,{from:nt,to:it,line:at}}function install$d(_e){_e.registerComponentModel(MarkLineModel),_e.registerComponentView(MarkLineView),_e.registerPreprocessor(function(_){checkMarkerInSeries(_.series,"markLine")&&(_.markLine=_.markLine||{})})}var MarkAreaModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.createMarkerModelFromSeries=function(et,tt,nt){return new _(et,tt,nt)},_.type="markArea",_.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},_}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(_e,_,et,tt){var nt=tt[0],it=tt[1];if(!(!nt||!it)){var at=dataTransform(_e,nt),ot=dataTransform(_e,it),st=at.coord,dt=ot.coord;st[0]=retrieve(st[0],-1/0),st[1]=retrieve(st[1],-1/0),dt[0]=retrieve(dt[0],1/0),dt[1]=retrieve(dt[1],1/0);var ht=mergeAll([{},at,ot]);return ht.coord=[at.coord,ot.coord],ht.x0=at.x,ht.y0=at.y,ht.x1=ot.x,ht.y1=ot.y,ht}};function isInfinity(_e){return!isNaN(_e)&&!isFinite(_e)}function ifMarkAreaHasOnlyDim(_e,_,et,tt){var nt=1-_e;return isInfinity(_[nt])&&isInfinity(et[nt])}function markAreaFilter(_e,_){var et=_.coord[0],tt=_.coord[1],nt={coord:et,x:_.x0,y:_.y0},it={coord:tt,x:_.x1,y:_.y1};return isCoordinateSystemType(_e,"cartesian2d")?et&&tt&&(ifMarkAreaHasOnlyDim(1,et,tt)||ifMarkAreaHasOnlyDim(0,et,tt))?!0:zoneFilter(_e,nt,it):dataFilter(_e,nt)||dataFilter(_e,it)}function getSingleMarkerEndPoint(_e,_,et,tt,nt){var it=tt.coordinateSystem,at=_e.getItemModel(_),ot,st=parsePercent(at.get(et[0]),nt.getWidth()),dt=parsePercent(at.get(et[1]),nt.getHeight());if(!isNaN(st)&&!isNaN(dt))ot=[st,dt];else{if(tt.getMarkerPosition){var ht=_e.getValues(["x0","y0"],_),ct=_e.getValues(["x1","y1"],_),ut=it.clampData(ht),ft=it.clampData(ct),gt=[];et[0]==="x0"?gt[0]=ut[0]>ft[0]?ct[0]:ht[0]:gt[0]=ut[0]>ft[0]?ht[0]:ct[0],et[1]==="y0"?gt[1]=ut[1]>ft[1]?ct[1]:ht[1]:gt[1]=ut[1]>ft[1]?ht[1]:ct[1],ot=tt.getMarkerPosition(gt,et,!0)}else{var mt=_e.get(et[0],_),vt=_e.get(et[1],_),yt=[mt,vt];it.clampData&&it.clampData(yt,yt),ot=it.dataToPoint(yt,!0)}if(isCoordinateSystemType(it,"cartesian2d")){var bt=it.getAxis("x"),_t=it.getAxis("y"),mt=_e.get(et[0],_),vt=_e.get(et[1],_);isInfinity(mt)?ot[0]=bt.toGlobalCoord(bt.getExtent()[et[0]==="x0"?0:1]):isInfinity(vt)&&(ot[1]=_t.toGlobalCoord(_t.getExtent()[et[1]==="y0"?0:1]))}isNaN(st)||(ot[0]=st),isNaN(dt)||(ot[1]=dt)}return ot}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.updateTransform=function(et,tt,nt){tt.eachSeries(function(it){var at=MarkerModel.getMarkerModelFromSeries(it,"markArea");if(at){var ot=at.getData();ot.each(function(st){var dt=map$1(dimPermutations,function(ct){return getSingleMarkerEndPoint(ot,st,ct,it,nt)});ot.setItemLayout(st,dt);var ht=ot.getItemGraphicEl(st);ht.setShape("points",dt)})}},this)},_.prototype.renderSeries=function(et,tt,nt,it){var at=et.coordinateSystem,ot=et.id,st=et.getData(),dt=this.markerGroupMap,ht=dt.get(ot)||dt.set(ot,{group:new Group$3});this.group.add(ht.group),this.markKeep(ht);var ct=createList(at,et,tt);tt.setData(ct),ct.each(function(ut){var ft=map$1(dimPermutations,function(Ct){return getSingleMarkerEndPoint(ct,ut,Ct,et,it)}),gt=at.getAxis("x").scale,mt=at.getAxis("y").scale,vt=gt.getExtent(),yt=mt.getExtent(),bt=[gt.parse(ct.get("x0",ut)),gt.parse(ct.get("x1",ut))],_t=[mt.parse(ct.get("y0",ut)),mt.parse(ct.get("y1",ut))];asc$2(bt),asc$2(_t);var xt=!(vt[0]>bt[1]||vt[1]<bt[0]||yt[0]>_t[1]||yt[1]<_t[0]),St=!xt;ct.setItemLayout(ut,{points:ft,allClipped:St});var Tt=ct.getItemModel(ut).getModel("itemStyle").getItemStyle(),wt=getVisualFromData(st,"color");Tt.fill||(Tt.fill=wt,isString$1(Tt.fill)&&(Tt.fill=modifyAlpha(Tt.fill,.4))),Tt.stroke||(Tt.stroke=wt),ct.setItemVisual(ut,"style",Tt)}),ct.diff(inner$2(ht).data).add(function(ut){var ft=ct.getItemLayout(ut);if(!ft.allClipped){var gt=new Polygon({shape:{points:ft.points}});ct.setItemGraphicEl(ut,gt),ht.group.add(gt)}}).update(function(ut,ft){var gt=inner$2(ht).data.getItemGraphicEl(ft),mt=ct.getItemLayout(ut);mt.allClipped?gt&&ht.group.remove(gt):(gt?updateProps$1(gt,{shape:{points:mt.points}},tt,ut):gt=new Polygon({shape:{points:mt.points}}),ct.setItemGraphicEl(ut,gt),ht.group.add(gt))}).remove(function(ut){var ft=inner$2(ht).data.getItemGraphicEl(ut);ht.group.remove(ft)}).execute(),ct.eachItemGraphicEl(function(ut,ft){var gt=ct.getItemModel(ft),mt=ct.getItemVisual(ft,"style");ut.useStyle(ct.getItemVisual(ft,"style")),setLabelStyle(ut,getLabelStatesModels(gt),{labelFetcher:tt,labelDataIndex:ft,defaultText:ct.getName(ft)||"",inheritColor:isString$1(mt.fill)?modifyAlpha(mt.fill,1):"#000"}),setStatesStylesFromModel(ut,gt),toggleHoverEmphasis(ut,null,null,gt.get(["emphasis","disabled"])),getECData(ut).dataModel=tt}),inner$2(ht).data=ct,ht.group.silent=tt.get("silent")||et.get("silent")},_.type="markArea",_}(MarkerView);function createList(_e,_,et){var tt,nt,it=["x0","y0","x1","y1"];if(_e){var at=map$1(_e&&_e.dimensions,function(dt){var ht=_.getData(),ct=ht.getDimensionInfo(ht.mapDimension(dt))||{};return extend(extend({},ct),{name:dt,ordinalMeta:null})});nt=map$1(it,function(dt,ht){return{name:dt,type:at[ht%2].type}}),tt=new SeriesData(nt,et)}else nt=[{name:"value",type:"float"}],tt=new SeriesData(nt,et);var ot=map$1(et.get("data"),curry$1(markAreaTransform,_,_e,et));_e&&(ot=filter$1(ot,curry$1(markAreaFilter,_e)));var st=_e?function(dt,ht,ct,ut){var ft=dt.coord[Math.floor(ut/2)][ut%2];return parseDataValue(ft,nt[ut])}:function(dt,ht,ct,ut){return parseDataValue(dt.value,nt[ut])};return tt.initData(ot,null,st),tt.hasItemOption=!0,tt}function install$c(_e){_e.registerComponentModel(MarkAreaModel),_e.registerComponentView(MarkAreaView),_e.registerPreprocessor(function(_){checkMarkerInSeries(_.series,"markArea")&&(_.markArea=_.markArea||{})})}var getDefaultSelectorOptions=function(_e,_){if(_==="all")return{type:"all",title:_e.getLocaleModel().get(["legend","selector","all"])};if(_==="inverse")return{type:"inverse",title:_e.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.layoutMode={type:"box",ignoreSize:!0},et}return _.prototype.init=function(et,tt,nt){this.mergeDefaultAndTheme(et,nt),et.selected=et.selected||{},this._updateSelector(et)},_.prototype.mergeOption=function(et,tt){_e.prototype.mergeOption.call(this,et,tt),this._updateSelector(et)},_.prototype._updateSelector=function(et){var tt=et.selector,nt=this.ecModel;tt===!0&&(tt=et.selector=["all","inverse"]),isArray$1(tt)&&each$f(tt,function(it,at){isString$1(it)&&(it={type:it}),tt[at]=merge$1(it,getDefaultSelectorOptions(nt,it.type))})},_.prototype.optionUpdated=function(){this._updateData(this.ecModel);var et=this._data;if(et[0]&&this.get("selectedMode")==="single"){for(var tt=!1,nt=0;nt<et.length;nt++){var it=et[nt].get("name");if(this.isSelected(it)){this.select(it),tt=!0;break}}!tt&&this.select(et[0].get("name"))}},_.prototype._updateData=function(et){var tt=[],nt=[];et.eachRawSeries(function(st){var dt=st.name;nt.push(dt);var ht;if(st.legendVisualProvider){var ct=st.legendVisualProvider,ut=ct.getAllNames();et.isSeriesFiltered(st)||(nt=nt.concat(ut)),ut.length?tt=tt.concat(ut):ht=!0}else ht=!0;ht&&isNameSpecified(st)&&tt.push(st.name)}),this._availableNames=nt;var it=this.get("data")||tt,at=createHashMap(),ot=map$1(it,function(st){return(isString$1(st)||isNumber(st))&&(st={name:st}),at.get(st.name)?null:(at.set(st.name,!0),new Model(st,this,this.ecModel))},this);this._data=filter$1(ot,function(st){return!!st})},_.prototype.getData=function(){return this._data},_.prototype.select=function(et){var tt=this.option.selected,nt=this.get("selectedMode");if(nt==="single"){var it=this._data;each$f(it,function(at){tt[at.get("name")]=!1})}tt[et]=!0},_.prototype.unSelect=function(et){this.get("selectedMode")!=="single"&&(this.option.selected[et]=!1)},_.prototype.toggleSelected=function(et){var tt=this.option.selected;tt.hasOwnProperty(et)||(tt[et]=!0),this[tt[et]?"unSelect":"select"](et)},_.prototype.allSelect=function(){var et=this._data,tt=this.option.selected;each$f(et,function(nt){tt[nt.get("name",!0)]=!0})},_.prototype.inverseSelect=function(){var et=this._data,tt=this.option.selected;each$f(et,function(nt){var it=nt.get("name",!0);tt.hasOwnProperty(it)||(tt[it]=!0),tt[it]=!tt[it]})},_.prototype.isSelected=function(et){var tt=this.option.selected;return!(tt.hasOwnProperty(et)&&!tt[et])&&indexOf(this._availableNames,et)>=0},_.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},_.type="legend.plain",_.dependencies=["series"],_.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},_}(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.newlineDisabled=!1,et}return _.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},_.prototype.getContentGroup=function(){return this._contentGroup},_.prototype.getSelectorGroup=function(){return this._selectorGroup},_.prototype.render=function(et,tt,nt){var it=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!et.get("show",!0)){var at=et.get("align"),ot=et.get("orient");(!at||at==="auto")&&(at=et.get("left")==="right"&&ot==="vertical"?"right":"left");var st=et.get("selector",!0),dt=et.get("selectorPosition",!0);st&&(!dt||dt==="auto")&&(dt=ot==="horizontal"?"end":"start"),this.renderInner(at,et,tt,nt,st,ot,dt);var ht=et.getBoxLayoutParams(),ct={width:nt.getWidth(),height:nt.getHeight()},ut=et.get("padding"),ft=getLayoutRect(ht,ct,ut),gt=this.layoutInner(et,at,ft,it,st,dt),mt=getLayoutRect(defaults({width:gt.width,height:gt.height},ht),ct,ut);this.group.x=mt.x-gt.x,this.group.y=mt.y-gt.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(gt,et))}},_.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},_.prototype.renderInner=function(et,tt,nt,it,at,ot,st){var dt=this.getContentGroup(),ht=createHashMap(),ct=tt.get("selectedMode"),ut=[];nt.eachRawSeries(function(ft){!ft.get("legendHoverLink")&&ut.push(ft.id)}),each$3(tt.getData(),function(ft,gt){var mt=ft.get("name");if(!this.newlineDisabled&&(mt===""||mt===`
`)){var vt=new Group$1;vt.newline=!0,dt.add(vt);return}var yt=nt.getSeriesByName(mt)[0];if(!ht.get(mt))if(yt){var bt=yt.getData(),_t=bt.getVisual("legendLineStyle")||{},xt=bt.getVisual("legendIcon"),St=bt.getVisual("style"),Tt=this._createItem(yt,mt,gt,ft,tt,et,_t,St,xt,ct,it);Tt.on("click",curry(dispatchSelectAction,mt,null,it,ut)).on("mouseover",curry(dispatchHighlightAction,yt.name,null,it,ut)).on("mouseout",curry(dispatchDownplayAction,yt.name,null,it,ut)),nt.ssr&&Tt.eachChild(function(wt){var Ct=getECData(wt);Ct.seriesIndex=yt.seriesIndex,Ct.dataIndex=gt,Ct.ssrType="legend"}),ht.set(mt,!0)}else nt.eachRawSeries(function(wt){if(!ht.get(mt)&&wt.legendVisualProvider){var Ct=wt.legendVisualProvider;if(!Ct.containName(mt))return;var Et=Ct.indexOfName(mt),At=Ct.getItemVisual(Et,"style"),Pt=Ct.getItemVisual(Et,"legendIcon"),Rt=parse(At.fill);Rt&&Rt[3]===0&&(Rt[3]=.2,At=extend(extend({},At),{fill:stringify(Rt,"rgba")}));var It=this._createItem(wt,mt,gt,ft,tt,et,{},At,Pt,ct,it);It.on("click",curry(dispatchSelectAction,null,mt,it,ut)).on("mouseover",curry(dispatchHighlightAction,null,mt,it,ut)).on("mouseout",curry(dispatchDownplayAction,null,mt,it,ut)),nt.ssr&&It.eachChild(function(Mt){var Ot=getECData(Mt);Ot.seriesIndex=wt.seriesIndex,Ot.dataIndex=gt,Ot.ssrType="legend"}),ht.set(mt,!0)}},this)},this),at&&this._createSelector(at,tt,it,ot,st)},_.prototype._createSelector=function(et,tt,nt,it,at){var ot=this.getSelectorGroup();each$3(et,function(dt){var ht=dt.type,ct=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){nt.dispatchAction({type:ht==="all"?"legendAllSelect":"legendInverseSelect",legendId:tt.id})}});ot.add(ct);var ut=tt.getModel("selectorLabel"),ft=tt.getModel(["emphasis","selectorLabel"]);setLabelStyle(ct,{normal:ut,emphasis:ft},{defaultText:dt.title}),enableHoverEmphasis(ct)})},_.prototype._createItem=function(et,tt,nt,it,at,ot,st,dt,ht,ct,ut){var ft=et.visualDrawType,gt=at.get("itemWidth"),mt=at.get("itemHeight"),vt=at.isSelected(tt),yt=it.get("symbolRotate"),bt=it.get("symbolKeepAspect"),_t=it.get("icon");ht=_t||ht||"roundRect";var xt=getLegendStyle(ht,it,st,dt,ft,vt,ut),St=new Group$1,Tt=it.getModel("textStyle");if(isFunction$3(et.getLegendIcon)&&(!_t||_t==="inherit"))St.add(et.getLegendIcon({itemWidth:gt,itemHeight:mt,icon:ht,iconRotate:yt,itemStyle:xt.itemStyle,lineStyle:xt.lineStyle,symbolKeepAspect:bt}));else{var wt=_t==="inherit"&&et.getData().getVisual("symbol")?yt==="inherit"?et.getData().getVisual("symbolRotate"):yt:0;St.add(getDefaultLegendIcon({itemWidth:gt,itemHeight:mt,icon:ht,iconRotate:wt,itemStyle:xt.itemStyle,lineStyle:xt.lineStyle,symbolKeepAspect:bt}))}var Ct=ot==="left"?gt+5:-5,Et=ot,At=at.get("formatter"),Pt=tt;isString$1(At)&&At?Pt=At.replace("{name}",tt??""):isFunction$3(At)&&(Pt=At(tt));var Rt=vt?Tt.getTextColor():it.get("inactiveColor");St.add(new ZRText({style:createTextStyle$1(Tt,{text:Pt,x:Ct,y:mt/2,fill:Rt,align:Et,verticalAlign:"middle"},{inheritColor:Rt})}));var It=new Rect$2({shape:St.getBoundingRect(),style:{fill:"transparent"}}),Mt=it.getModel("tooltip");return Mt.get("show")&&setTooltipConfig({el:It,componentModel:at,itemName:tt,itemTooltipOption:Mt.option}),St.add(It),St.eachChild(function(Ot){Ot.silent=!0}),It.silent=!ct,this.getContentGroup().add(St),enableHoverEmphasis(St),St.__legendDataIndex=nt,St},_.prototype.layoutInner=function(et,tt,nt,it,at,ot){var st=this.getContentGroup(),dt=this.getSelectorGroup();box(et.get("orient"),st,et.get("itemGap"),nt.width,nt.height);var ht=st.getBoundingRect(),ct=[-ht.x,-ht.y];if(dt.markRedraw(),st.markRedraw(),at){box("horizontal",dt,et.get("selectorItemGap",!0));var ut=dt.getBoundingRect(),ft=[-ut.x,-ut.y],gt=et.get("selectorButtonGap",!0),mt=et.getOrient().index,vt=mt===0?"width":"height",yt=mt===0?"height":"width",bt=mt===0?"y":"x";ot==="end"?ft[mt]+=ht[vt]+gt:ct[mt]+=ut[vt]+gt,ft[1-mt]+=ht[yt]/2-ut[yt]/2,dt.x=ft[0],dt.y=ft[1],st.x=ct[0],st.y=ct[1];var _t={x:0,y:0};return _t[vt]=ht[vt]+gt+ut[vt],_t[yt]=Math.max(ht[yt],ut[yt]),_t[bt]=Math.min(0,ut[bt]+ft[1-mt]),_t}else return st.x=ct[0],st.y=ct[1],this.group.getBoundingRect()},_.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},_.type="legend.plain",_}(ComponentView);function getLegendStyle(_e,_,et,tt,nt,it,at){function ot(vt,yt){vt.lineWidth==="auto"&&(vt.lineWidth=yt.lineWidth>0?2:0),each$3(vt,function(bt,_t){vt[_t]==="inherit"&&(vt[_t]=yt[_t])})}var st=_.getModel("itemStyle"),dt=st.getItemStyle(),ht=_e.lastIndexOf("empty",0)===0?"fill":"stroke",ct=st.getShallow("decal");dt.decal=!ct||ct==="inherit"?tt.decal:createOrUpdatePatternFromDecal(ct,at),dt.fill==="inherit"&&(dt.fill=tt[nt]),dt.stroke==="inherit"&&(dt.stroke=tt[ht]),dt.opacity==="inherit"&&(dt.opacity=(nt==="fill"?tt:et).opacity),ot(dt,tt);var ut=_.getModel("lineStyle"),ft=ut.getLineStyle();if(ot(ft,et),dt.fill==="auto"&&(dt.fill=tt.fill),dt.stroke==="auto"&&(dt.stroke=tt.fill),ft.stroke==="auto"&&(ft.stroke=tt.fill),!it){var gt=_.get("inactiveBorderWidth"),mt=dt[ht];dt.lineWidth=gt==="auto"?tt.lineWidth>0&&mt?2:0:dt.lineWidth,dt.fill=_.get("inactiveColor"),dt.stroke=_.get("inactiveBorderColor"),ft.stroke=ut.get("inactiveColor"),ft.lineWidth=ut.get("inactiveWidth")}return{itemStyle:dt,lineStyle:ft}}function getDefaultLegendIcon(_e){var _=_e.icon||"roundRect",et=createSymbol$1(_,0,0,_e.itemWidth,_e.itemHeight,_e.itemStyle.fill,_e.symbolKeepAspect);return et.setStyle(_e.itemStyle),et.rotation=(_e.iconRotate||0)*Math.PI/180,et.setOrigin([_e.itemWidth/2,_e.itemHeight/2]),_.indexOf("empty")>-1&&(et.style.stroke=et.style.fill,et.style.fill="#fff",et.style.lineWidth=2),et}function dispatchSelectAction(_e,_,et,tt){dispatchDownplayAction(_e,_,et,tt),et.dispatchAction({type:"legendToggleSelect",name:_e??_}),dispatchHighlightAction(_e,_,et,tt)}function isUseHoverLayer(_e){for(var _=_e.getZr().storage.getDisplayList(),et,tt=0,nt=_.length;tt<nt&&!(et=_[tt].states.emphasis);)tt++;return et&&et.hoverLayer}function dispatchHighlightAction(_e,_,et,tt){isUseHoverLayer(et)||et.dispatchAction({type:"highlight",seriesName:_e,name:_,excludeSeriesId:tt})}function dispatchDownplayAction(_e,_,et,tt){isUseHoverLayer(et)||et.dispatchAction({type:"downplay",seriesName:_e,name:_,excludeSeriesId:tt})}function legendFilter(_e){var _=_e.findComponents({mainType:"legend"});_&&_.length&&_e.filterSeries(function(et){for(var tt=0;tt<_.length;tt++)if(!_[tt].isSelected(et.name))return!1;return!0})}function legendSelectActionHandler(_e,_,et){var tt=_e==="allSelect"||_e==="inverseSelect",nt={},it=[];et.eachComponent({mainType:"legend",query:_},function(ot){tt?ot[_e]():ot[_e](_.name),makeSelectedMap(ot,nt),it.push(ot.componentIndex)});var at={};return et.eachComponent("legend",function(ot){each$f(nt,function(st,dt){ot[st?"select":"unSelect"](dt)}),makeSelectedMap(ot,at)}),tt?{selected:at,legendIndex:it}:{name:_.name,selected:at}}function makeSelectedMap(_e,_){var et=_||{};return each$f(_e.getData(),function(tt){var nt=tt.get("name");if(!(nt===`
`||nt==="")){var it=_e.isSelected(nt);hasOwn(et,nt)?et[nt]=et[nt]&&it:et[nt]=it}}),et}function installLegendAction(_e){_e.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),_e.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),_e.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),_e.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),_e.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(_e){_e.registerComponentModel(LegendModel),_e.registerComponentView(LegendView),_e.registerProcessor(_e.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),_e.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(_e)}var ScrollableLegendModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.setScrollDataIndex=function(et){this.option.scrollDataIndex=et},_.prototype.init=function(et,tt,nt){var it=getLayoutParams(et);_e.prototype.init.call(this,et,tt,nt),mergeAndNormalizeLayoutParams(this,et,it)},_.prototype.mergeOption=function(et,tt){_e.prototype.mergeOption.call(this,et,tt),mergeAndNormalizeLayoutParams(this,this.option,et)},_.type="legend.scroll",_.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),_}(LegendModel);function mergeAndNormalizeLayoutParams(_e,_,et){var tt=_e.getOrient(),nt=[1,1];nt[tt.index]=0,mergeLayoutParam(_,et,{type:"box",ignoreSize:!!nt})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.newlineDisabled=!0,et._currentIndex=0,et}return _.prototype.init=function(){_e.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},_.prototype.resetInner=function(){_e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},_.prototype.renderInner=function(et,tt,nt,it,at,ot,st){var dt=this;_e.prototype.renderInner.call(this,et,tt,nt,it,at,ot,st);var ht=this._controllerGroup,ct=tt.get("pageIconSize",!0),ut=isArray$1(ct)?ct:[ct,ct];gt("pagePrev",0);var ft=tt.getModel("pageTextStyle");ht.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:ft.getTextColor(),font:ft.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),gt("pageNext",1);function gt(mt,vt){var yt=mt+"DataIndex",bt=createIcon(tt.get("pageIcons",!0)[tt.getOrient().name][vt],{onclick:bind$2(dt._pageGo,dt,yt,tt,it)},{x:-ut[0]/2,y:-ut[1]/2,width:ut[0],height:ut[1]});bt.name=mt,ht.add(bt)}},_.prototype.layoutInner=function(et,tt,nt,it,at,ot){var st=this.getSelectorGroup(),dt=et.getOrient().index,ht=WH[dt],ct=XY[dt],ut=WH[1-dt],ft=XY[1-dt];at&&box("horizontal",st,et.get("selectorItemGap",!0));var gt=et.get("selectorButtonGap",!0),mt=st.getBoundingRect(),vt=[-mt.x,-mt.y],yt=clone$4(nt);at&&(yt[ht]=nt[ht]-mt[ht]-gt);var bt=this._layoutContentAndController(et,it,yt,dt,ht,ut,ft,ct);if(at){if(ot==="end")vt[dt]+=bt[ht]+gt;else{var _t=mt[ht]+gt;vt[dt]-=_t,bt[ct]-=_t}bt[ht]+=mt[ht]+gt,vt[1-dt]+=bt[ft]+bt[ut]/2-mt[ut]/2,bt[ut]=Math.max(bt[ut],mt[ut]),bt[ft]=Math.min(bt[ft],mt[ft]+vt[1-dt]),st.x=vt[0],st.y=vt[1],st.markRedraw()}return bt},_.prototype._layoutContentAndController=function(et,tt,nt,it,at,ot,st,dt){var ht=this.getContentGroup(),ct=this._containerGroup,ut=this._controllerGroup;box(et.get("orient"),ht,et.get("itemGap"),it?nt.width:null,it?null:nt.height),box("horizontal",ut,et.get("pageButtonItemGap",!0));var ft=ht.getBoundingRect(),gt=ut.getBoundingRect(),mt=this._showController=ft[at]>nt[at],vt=[-ft.x,-ft.y];tt||(vt[it]=ht[dt]);var yt=[0,0],bt=[-gt.x,-gt.y],_t=retrieve2(et.get("pageButtonGap",!0),et.get("itemGap",!0));if(mt){var xt=et.get("pageButtonPosition",!0);xt==="end"?bt[it]+=nt[at]-gt[at]:yt[it]+=gt[at]+_t}bt[1-it]+=ft[ot]/2-gt[ot]/2,ht.setPosition(vt),ct.setPosition(yt),ut.setPosition(bt);var St={x:0,y:0};if(St[at]=mt?nt[at]:ft[at],St[ot]=Math.max(ft[ot],gt[ot]),St[st]=Math.min(0,gt[st]+bt[1-it]),ct.__rectSize=nt[at],mt){var Tt={x:0,y:0};Tt[at]=Math.max(nt[at]-gt[at]-_t,0),Tt[ot]=St[ot],ct.setClipPath(new Rect$2({shape:Tt})),ct.__rectSize=Tt[at]}else ut.eachChild(function(Ct){Ct.attr({invisible:!0,silent:!0})});var wt=this._getPageInfo(et);return wt.pageIndex!=null&&updateProps$1(ht,{x:wt.contentPosition[0],y:wt.contentPosition[1]},mt?et:null),this._updatePageInfoView(et,wt),St},_.prototype._pageGo=function(et,tt,nt){var it=this._getPageInfo(tt)[et];it!=null&&nt.dispatchAction({type:"legendScroll",scrollDataIndex:it,legendId:tt.id})},_.prototype._updatePageInfoView=function(et,tt){var nt=this._controllerGroup;each$f(["pagePrev","pageNext"],function(ht){var ct=ht+"DataIndex",ut=tt[ct]!=null,ft=nt.childOfName(ht);ft&&(ft.setStyle("fill",ut?et.get("pageIconColor",!0):et.get("pageIconInactiveColor",!0)),ft.cursor=ut?"pointer":"default")});var it=nt.childOfName("pageText"),at=et.get("pageFormatter"),ot=tt.pageIndex,st=ot!=null?ot+1:0,dt=tt.pageCount;it&&at&&it.setStyle("text",isString$1(at)?at.replace("{current}",st==null?"":st+"").replace("{total}",dt==null?"":dt+""):at({current:st,total:dt}))},_.prototype._getPageInfo=function(et){var tt=et.get("scrollDataIndex",!0),nt=this.getContentGroup(),it=this._containerGroup.__rectSize,at=et.getOrient().index,ot=WH[at],st=XY[at],dt=this._findTargetItemIndex(tt),ht=nt.children(),ct=ht[dt],ut=ht.length,ft=ut?1:0,gt={contentPosition:[nt.x,nt.y],pageCount:ft,pageIndex:ft-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!ct)return gt;var mt=xt(ct);gt.contentPosition[at]=-mt.s;for(var vt=dt+1,yt=mt,bt=mt,_t=null;vt<=ut;++vt)_t=xt(ht[vt]),(!_t&&bt.e>yt.s+it||_t&&!St(_t,yt.s))&&(bt.i>yt.i?yt=bt:yt=_t,yt&&(gt.pageNextDataIndex==null&&(gt.pageNextDataIndex=yt.i),++gt.pageCount)),bt=_t;for(var vt=dt-1,yt=mt,bt=mt,_t=null;vt>=-1;--vt)_t=xt(ht[vt]),(!_t||!St(bt,_t.s))&&yt.i<bt.i&&(bt=yt,gt.pagePrevDataIndex==null&&(gt.pagePrevDataIndex=yt.i),++gt.pageCount,++gt.pageIndex),yt=_t;return gt;function xt(Tt){if(Tt){var wt=Tt.getBoundingRect(),Ct=wt[st]+Tt[st];return{s:Ct,e:Ct+wt[ot],i:Tt.__legendDataIndex}}}function St(Tt,wt){return Tt.e>=wt&&Tt.s<=wt+it}},_.prototype._findTargetItemIndex=function(et){if(!this._showController)return 0;var tt,nt=this.getContentGroup(),it;return nt.eachChild(function(at,ot){var st=at.__legendDataIndex;it==null&&st!=null&&(it=ot),st===et&&(tt=ot)}),tt??it},_.type="legend.scroll",_}(LegendView);function installScrollableLegendAction(_e){_e.registerAction("legendScroll","legendscroll",function(_,et){var tt=_.scrollDataIndex;tt!=null&&et.eachComponent({mainType:"legend",subType:"scroll",query:_},function(nt){nt.setScrollDataIndex(tt)})})}function install$a(_e){use(install$b),_e.registerComponentModel(ScrollableLegendModel),_e.registerComponentView(ScrollableLegendView),installScrollableLegendAction(_e)}function install$9(_e){use(install$b),use(install$a)}var InsideZoomModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="dataZoom.inside",_.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),_}(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(_e,_,et){inner$1(_e).coordSysRecordMap.each(function(tt){var nt=tt.dataZoomInfoMap.get(_.uid);nt&&(nt.getRange=et)})}function disposeCoordSysRecordIfNeeded(_e,_){for(var et=inner$1(_e).coordSysRecordMap,tt=et.keys(),nt=0;nt<tt.length;nt++){var it=tt[nt],at=et.get(it),ot=at.dataZoomInfoMap;if(ot){var st=_.uid,dt=ot.get(st);dt&&(ot.removeKey(st),ot.keys().length||disposeCoordSysRecord(et,at))}}}function disposeCoordSysRecord(_e,_){if(_){_e.removeKey(_.model.uid);var et=_.controller;et&&et.dispose()}}function createCoordSysRecord(_e,_){var et={model:_,containsPoint:curry$1(containsPoint,_),dispatchAction:curry$1(dispatchAction,_e),dataZoomInfoMap:null,controller:null},tt=et.controller=new RoamController(_e.getZr());return each$f(["pan","zoom","scrollMove"],function(nt){tt.on(nt,function(it){var at=[];et.dataZoomInfoMap.each(function(ot){if(it.isAvailableBehavior(ot.model.option)){var st=(ot.getRange||{})[nt],dt=st&&st(ot.dzReferCoordSysInfo,et.model.mainType,et.controller,it);!ot.model.get("disabled",!0)&&dt&&at.push({dataZoomId:ot.model.id,start:dt[0],end:dt[1]})}}),at.length&&et.dispatchAction(at)})}),et}function dispatchAction(_e,_){_e.isDisposed()||_e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:_})}function containsPoint(_e,_,et,tt){return _e.coordinateSystem.containPoint([et,tt])}function mergeControllerParams(_e){var _,et="type_",tt={type_true:2,type_move:1,type_false:0,type_undefined:-1},nt=!0;return _e.each(function(it){var at=it.model,ot=at.get("disabled",!0)?!1:at.get("zoomLock",!0)?"move":!0;tt[et+ot]>tt[et+_]&&(_=ot),nt=nt&&at.get("preventDefaultMouseMove",!0)}),{controlType:_,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!nt}}}function installDataZoomRoamProcessor(_e){_e.registerProcessor(_e.PRIORITY.PROCESSOR.FILTER,function(_,et){var tt=inner$1(et),nt=tt.coordSysRecordMap||(tt.coordSysRecordMap=createHashMap());nt.each(function(it){it.dataZoomInfoMap=null}),_.eachComponent({mainType:"dataZoom",subType:"inside"},function(it){var at=collectReferCoordSysModelInfo(it);each$f(at.infoList,function(ot){var st=ot.model.uid,dt=nt.get(st)||nt.set(st,createCoordSysRecord(et,ot.model)),ht=dt.dataZoomInfoMap||(dt.dataZoomInfoMap=createHashMap());ht.set(it.uid,{dzReferCoordSysInfo:ot,model:it,getRange:null})})}),nt.each(function(it){var at=it.controller,ot,st=it.dataZoomInfoMap;if(st){var dt=st.keys()[0];dt!=null&&(ot=st.get(dt))}if(!ot){disposeCoordSysRecord(nt,it);return}var ht=mergeControllerParams(st);at.enable(ht.controlType,ht.opt),at.setPointerChecker(it.containsPoint),createOrUpdate(it,"dispatchAction",ot.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type="dataZoom.inside",et}return _.prototype.render=function(et,tt,nt){if(_e.prototype.render.apply(this,arguments),et.noTarget()){this._clear();return}this.range=et.getPercentRange(),setViewInfoToCoordSysRecord(nt,et,{pan:bind$2(getRangeHandlers.pan,this),zoom:bind$2(getRangeHandlers.zoom,this),scrollMove:bind$2(getRangeHandlers.scrollMove,this)})},_.prototype.dispose=function(){this._clear(),_e.prototype.dispose.apply(this,arguments)},_.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},_.type="dataZoom.inside",_}(DataZoomView),getRangeHandlers={zoom:function(_e,_,et,tt){var nt=this.range,it=nt.slice(),at=_e.axisModels[0];if(at){var ot=getDirectionInfo[_](null,[tt.originX,tt.originY],at,et,_e),st=(ot.signal>0?ot.pixelStart+ot.pixelLength-ot.pixel:ot.pixel-ot.pixelStart)/ot.pixelLength*(it[1]-it[0])+it[0],dt=Math.max(1/tt.scale,0);it[0]=(it[0]-st)*dt+st,it[1]=(it[1]-st)*dt+st;var ht=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,it,[0,100],0,ht.minSpan,ht.maxSpan),this.range=it,nt[0]!==it[0]||nt[1]!==it[1])return it}},pan:makeMover(function(_e,_,et,tt,nt,it){var at=getDirectionInfo[tt]([it.oldX,it.oldY],[it.newX,it.newY],_,nt,et);return at.signal*(_e[1]-_e[0])*at.pixel/at.pixelLength}),scrollMove:makeMover(function(_e,_,et,tt,nt,it){var at=getDirectionInfo[tt]([0,0],[it.scrollDelta,it.scrollDelta],_,nt,et);return at.signal*(_e[1]-_e[0])*it.scrollDelta})};function makeMover(_e){return function(_,et,tt,nt){var it=this.range,at=it.slice(),ot=_.axisModels[0];if(ot){var st=_e(at,ot,_,et,tt,nt);if(sliderMove(st,at,[0,100],"all"),this.range=at,it[0]!==at[0]||it[1]!==at[1])return at}}}var getDirectionInfo={grid:function(_e,_,et,tt,nt){var it=et.axis,at={},ot=nt.model.coordinateSystem.getRect();return _e=_e||[0,0],it.dim==="x"?(at.pixel=_[0]-_e[0],at.pixelLength=ot.width,at.pixelStart=ot.x,at.signal=it.inverse?1:-1):(at.pixel=_[1]-_e[1],at.pixelLength=ot.height,at.pixelStart=ot.y,at.signal=it.inverse?-1:1),at},polar:function(_e,_,et,tt,nt){var it=et.axis,at={},ot=nt.model.coordinateSystem,st=ot.getRadiusAxis().getExtent(),dt=ot.getAngleAxis().getExtent();return _e=_e?ot.pointToCoord(_e):[0,0],_=ot.pointToCoord(_),et.mainType==="radiusAxis"?(at.pixel=_[0]-_e[0],at.pixelLength=st[1]-st[0],at.pixelStart=st[0],at.signal=it.inverse?1:-1):(at.pixel=_[1]-_e[1],at.pixelLength=dt[1]-dt[0],at.pixelStart=dt[0],at.signal=it.inverse?-1:1),at},singleAxis:function(_e,_,et,tt,nt){var it=et.axis,at=nt.model.coordinateSystem.getRect(),ot={};return _e=_e||[0,0],it.orient==="horizontal"?(ot.pixel=_[0]-_e[0],ot.pixelLength=at.width,ot.pixelStart=at.x,ot.signal=it.inverse?1:-1):(ot.pixel=_[1]-_e[1],ot.pixelLength=at.height,ot.pixelStart=at.y,ot.signal=it.inverse?-1:1),ot}};function install$8(_e){installCommon$1(_e),_e.registerComponentModel(InsideZoomModel),_e.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(_e)}var SliderZoomModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.type="dataZoom.slider",_.layoutMode="box",_.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),_}(DataZoomModel),Rect=Rect$2,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et._displayables={},et}return _.prototype.init=function(et,tt){this.api=tt,this._onBrush=bind$2(this._onBrush,this),this._onBrushEnd=bind$2(this._onBrushEnd,this)},_.prototype.render=function(et,tt,nt,it){if(_e.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",et.get("throttle"),"fixRate"),this._orient=et.getOrient(),et.get("show")===!1){this.group.removeAll();return}if(et.noTarget()){this._clear(),this.group.removeAll();return}(!it||it.type!=="dataZoom"||it.from!==this.uid)&&this._buildView(),this._updateView()},_.prototype.dispose=function(){this._clear(),_e.prototype.dispose.apply(this,arguments)},_.prototype._clear=function(){clear$2(this,"_dispatchZoomAction");var et=this.api.getZr();et.off("mousemove",this._onBrush),et.off("mouseup",this._onBrushEnd)},_.prototype._buildView=function(){var et=this.group;et.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var tt=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),et.add(tt),this._positionGroup()},_.prototype._resetLocation=function(){var et=this.dataZoomModel,tt=this.api,nt=et.get("brushSelect"),it=nt?DEFAULT_MOVE_HANDLE_SIZE:0,at=this._findCoordRect(),ot={width:tt.getWidth(),height:tt.getHeight()},st=this._orient===HORIZONTAL?{right:ot.width-at.x-at.width,top:ot.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-it,width:at.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:at.y,width:DEFAULT_FILLER_SIZE,height:at.height},dt=getLayoutParams(et.option);each$f(["right","top","width","height"],function(ct){dt[ct]==="ph"&&(dt[ct]=st[ct])});var ht=getLayoutRect(dt,ot);this._location={x:ht.x,y:ht.y},this._size=[ht.width,ht.height],this._orient===VERTICAL&&this._size.reverse()},_.prototype._positionGroup=function(){var et=this.group,tt=this._location,nt=this._orient,it=this.dataZoomModel.getFirstTargetAxisModel(),at=it&&it.get("inverse"),ot=this._displayables.sliderGroup,st=(this._dataShadowInfo||{}).otherAxisInverse;ot.attr(nt===HORIZONTAL&&!at?{scaleY:st?1:-1,scaleX:1}:nt===HORIZONTAL&&at?{scaleY:st?1:-1,scaleX:-1}:nt===VERTICAL&&!at?{scaleY:st?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:st?-1:1,scaleX:-1,rotation:Math.PI/2});var dt=et.getBoundingRect([ot]);et.x=tt.x-dt.x,et.y=tt.y-dt.y,et.markRedraw()},_.prototype._getViewExtent=function(){return[0,this._size[0]]},_.prototype._renderBackground=function(){var et=this.dataZoomModel,tt=this._size,nt=this._displayables.sliderGroup,it=et.get("brushSelect");nt.add(new Rect({silent:!0,shape:{x:0,y:0,width:tt[0],height:tt[1]},style:{fill:et.get("backgroundColor")},z2:-40}));var at=new Rect({shape:{x:0,y:0,width:tt[0],height:tt[1]},style:{fill:"transparent"},z2:0,onclick:bind$2(this._onClickPanel,this)}),ot=this.api.getZr();it?(at.on("mousedown",this._onBrushStart,this),at.cursor="crosshair",ot.on("mousemove",this._onBrush),ot.on("mouseup",this._onBrushEnd)):(ot.off("mousemove",this._onBrush),ot.off("mouseup",this._onBrushEnd)),nt.add(at)},_.prototype._renderDataShadow=function(){var et=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!et)return;var tt=this._size,nt=this._shadowSize||[],it=et.series,at=it.getRawData(),ot=it.getShadowDim&&it.getShadowDim(),st=ot&&at.getDimensionInfo(ot)?it.getShadowDim():et.otherDim;if(st==null)return;var dt=this._shadowPolygonPts,ht=this._shadowPolylinePts;if(at!==this._shadowData||st!==this._shadowDim||tt[0]!==nt[0]||tt[1]!==nt[1]){var ct=at.getDataExtent(st),ut=(ct[1]-ct[0])*.3;ct=[ct[0]-ut,ct[1]+ut];var ft=[0,tt[1]],gt=[0,tt[0]],mt=[[tt[0],0],[0,0]],vt=[],yt=gt[1]/(at.count()-1),bt=0,_t=Math.round(at.count()/tt[0]),xt;at.each([st],function(Et,At){if(_t>0&&At%_t){bt+=yt;return}var Pt=Et==null||isNaN(Et)||Et==="",Rt=Pt?0:linearMap$2(Et,ct,ft,!0);Pt&&!xt&&At?(mt.push([mt[mt.length-1][0],0]),vt.push([vt[vt.length-1][0],0])):!Pt&&xt&&(mt.push([bt,0]),vt.push([bt,0])),mt.push([bt,Rt]),vt.push([bt,Rt]),bt+=yt,xt=Pt}),dt=this._shadowPolygonPts=mt,ht=this._shadowPolylinePts=vt}this._shadowData=at,this._shadowDim=st,this._shadowSize=[tt[0],tt[1]];var St=this.dataZoomModel;function Tt(Et){var At=St.getModel(Et?"selectedDataBackground":"dataBackground"),Pt=new Group$3,Rt=new Polygon({shape:{points:dt},segmentIgnoreThreshold:1,style:At.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),It=new Polyline$1({shape:{points:ht},segmentIgnoreThreshold:1,style:At.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return Pt.add(Rt),Pt.add(It),Pt}for(var wt=0;wt<3;wt++){var Ct=Tt(wt===1);this._displayables.sliderGroup.add(Ct),this._displayables.dataShadowSegs.push(Ct)}},_.prototype._prepareDataShadowInfo=function(){var et=this.dataZoomModel,tt=et.get("showDataShadow");if(tt!==!1){var nt,it=this.ecModel;return et.eachTargetAxis(function(at,ot){var st=et.getAxisProxy(at,ot).getTargetSeriesModels();each$f(st,function(dt){if(!nt&&!(tt!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,dt.get("type"))<0)){var ht=it.getComponent(getAxisMainType(at),ot).axis,ct=getOtherDim(at),ut,ft=dt.coordinateSystem;ct!=null&&ft.getOtherAxis&&(ut=ft.getOtherAxis(ht).inverse),ct=dt.getData().mapDimension(ct),nt={thisAxis:ht,series:dt,thisDim:at,otherDim:ct,otherAxisInverse:ut}}},this)},this),nt}},_.prototype._renderHandle=function(){var et=this.group,tt=this._displayables,nt=tt.handles=[null,null],it=tt.handleLabels=[null,null],at=this._displayables.sliderGroup,ot=this._size,st=this.dataZoomModel,dt=this.api,ht=st.get("borderRadius")||0,ct=st.get("brushSelect"),ut=tt.filler=new Rect({silent:ct,style:{fill:st.get("fillerColor")},textConfig:{position:"inside"}});at.add(ut),at.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:ot[0],height:ot[1],r:ht},style:{stroke:st.get("dataBackgroundColor")||st.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(_t){var xt=st.get("handleIcon");!symbolBuildProxies[xt]&&xt.indexOf("path://")<0&&xt.indexOf("image://")<0&&(xt="path://"+xt);var St=createSymbol$1(xt,-1,0,2,2,null,!0);St.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$2(this._onDragMove,this,_t),ondragend:bind$2(this._onDragEnd,this),onmouseover:bind$2(this._showDataInfo,this,!0),onmouseout:bind$2(this._showDataInfo,this,!1),z2:5});var Tt=St.getBoundingRect(),wt=st.get("handleSize");this._handleHeight=parsePercent(wt,this._size[1]),this._handleWidth=Tt.width/Tt.height*this._handleHeight,St.setStyle(st.getModel("handleStyle").getItemStyle()),St.style.strokeNoScale=!0,St.rectHover=!0,St.ensureState("emphasis").style=st.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(St);var Ct=st.get("handleColor");Ct!=null&&(St.style.fill=Ct),at.add(nt[_t]=St);var Et=st.getModel("textStyle"),At=st.get("handleLabel")||{},Pt=At.show||!1;et.add(it[_t]=new ZRText({silent:!0,invisible:!Pt,style:createTextStyle$1(Et,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:Et.getTextColor(),font:Et.getFont()}),z2:10}))},this);var ft=ut;if(ct){var gt=parsePercent(st.get("moveHandleSize"),ot[1]),mt=tt.moveHandle=new Rect$2({style:st.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:ot[1]-.5,height:gt}}),vt=gt*.8,yt=tt.moveHandleIcon=createSymbol$1(st.get("moveHandleIcon"),-vt/2,-vt/2,vt,vt,"#fff",!0);yt.silent=!0,yt.y=ot[1]+gt/2-.5,mt.ensureState("emphasis").style=st.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var bt=Math.min(ot[1]/2,Math.max(gt,10));ft=tt.moveZone=new Rect$2({invisible:!0,shape:{y:ot[1]-bt,height:gt+bt}}),ft.on("mouseover",function(){dt.enterEmphasis(mt)}).on("mouseout",function(){dt.leaveEmphasis(mt)}),at.add(mt),at.add(yt),at.add(ft)}ft.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$2(this._onDragMove,this,"all"),ondragstart:bind$2(this._showDataInfo,this,!0),ondragend:bind$2(this._onDragEnd,this),onmouseover:bind$2(this._showDataInfo,this,!0),onmouseout:bind$2(this._showDataInfo,this,!1)})},_.prototype._resetInterval=function(){var et=this._range=this.dataZoomModel.getPercentRange(),tt=this._getViewExtent();this._handleEnds=[linearMap$2(et[0],[0,100],tt,!0),linearMap$2(et[1],[0,100],tt,!0)]},_.prototype._updateInterval=function(et,tt){var nt=this.dataZoomModel,it=this._handleEnds,at=this._getViewExtent(),ot=nt.findRepresentativeAxisProxy().getMinMaxSpan(),st=[0,100];sliderMove(tt,it,at,nt.get("zoomLock")?"all":et,ot.minSpan!=null?linearMap$2(ot.minSpan,st,at,!0):null,ot.maxSpan!=null?linearMap$2(ot.maxSpan,st,at,!0):null);var dt=this._range,ht=this._range=asc$2([linearMap$2(it[0],at,st,!0),linearMap$2(it[1],at,st,!0)]);return!dt||dt[0]!==ht[0]||dt[1]!==ht[1]},_.prototype._updateView=function(et){var tt=this._displayables,nt=this._handleEnds,it=asc$2(nt.slice()),at=this._size;each$f([0,1],function(ft){var gt=tt.handles[ft],mt=this._handleHeight;gt.attr({scaleX:mt/2,scaleY:mt/2,x:nt[ft]+(ft?-1:1),y:at[1]/2-mt/2})},this),tt.filler.setShape({x:it[0],y:0,width:it[1]-it[0],height:at[1]});var ot={x:it[0],width:it[1]-it[0]};tt.moveHandle&&(tt.moveHandle.setShape(ot),tt.moveZone.setShape(ot),tt.moveZone.getBoundingRect(),tt.moveHandleIcon&&tt.moveHandleIcon.attr("x",ot.x+ot.width/2));for(var st=tt.dataShadowSegs,dt=[0,it[0],it[1],at[0]],ht=0;ht<st.length;ht++){var ct=st[ht],ut=ct.getClipPath();ut||(ut=new Rect$2,ct.setClipPath(ut)),ut.setShape({x:dt[ht],y:0,width:dt[ht+1]-dt[ht],height:at[1]})}this._updateDataInfo(et)},_.prototype._updateDataInfo=function(et){var tt=this.dataZoomModel,nt=this._displayables,it=nt.handleLabels,at=this._orient,ot=["",""];if(tt.get("showDetail")){var st=tt.findRepresentativeAxisProxy();if(st){var dt=st.getAxisModel().axis,ht=this._range,ct=et?st.calculateDataWindow({start:ht[0],end:ht[1]}).valueWindow:st.getDataValueWindow();ot=[this._formatLabel(ct[0],dt),this._formatLabel(ct[1],dt)]}}var ut=asc$2(this._handleEnds.slice());ft.call(this,0),ft.call(this,1);function ft(gt){var mt=getTransform$1(nt.handles[gt].parent,this.group),vt=transformDirection(gt===0?"right":"left",mt),yt=this._handleWidth/2+LABEL_GAP,bt=applyTransform([ut[gt]+(gt===0?-yt:yt),this._size[1]/2],mt);it[gt].setStyle({x:bt[0],y:bt[1],verticalAlign:at===HORIZONTAL?"middle":vt,align:at===HORIZONTAL?vt:"center",text:ot[gt]})}},_.prototype._formatLabel=function(et,tt){var nt=this.dataZoomModel,it=nt.get("labelFormatter"),at=nt.get("labelPrecision");(at==null||at==="auto")&&(at=tt.getPixelPrecision());var ot=et==null||isNaN(et)?"":tt.type==="category"||tt.type==="time"?tt.scale.getLabel({value:Math.round(et)}):et.toFixed(Math.min(at,20));return isFunction$3(it)?it(et,ot):isString$1(it)?it.replace("{value}",ot):ot},_.prototype._showDataInfo=function(et){var tt=this.dataZoomModel.get("handleLabel")||{},nt=tt.show||!1,it=this.dataZoomModel.getModel(["emphasis","handleLabel"]),at=it.get("show")||!1,ot=et||this._dragging?at:nt,st=this._displayables,dt=st.handleLabels;dt[0].attr("invisible",!ot),dt[1].attr("invisible",!ot),st.moveHandle&&this.api[ot?"enterEmphasis":"leaveEmphasis"](st.moveHandle,1)},_.prototype._onDragMove=function(et,tt,nt,it){this._dragging=!0,stop(it.event);var at=this._displayables.sliderGroup.getLocalTransform(),ot=applyTransform([tt,nt],at,!0),st=this._updateInterval(et,ot[0]),dt=this.dataZoomModel.get("realtime");this._updateView(!dt),st&&dt&&this._dispatchZoomAction(!0)},_.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var et=this.dataZoomModel.get("realtime");!et&&this._dispatchZoomAction(!1)},_.prototype._onClickPanel=function(et){var tt=this._size,nt=this._displayables.sliderGroup.transformCoordToLocal(et.offsetX,et.offsetY);if(!(nt[0]<0||nt[0]>tt[0]||nt[1]<0||nt[1]>tt[1])){var it=this._handleEnds,at=(it[0]+it[1])/2,ot=this._updateInterval("all",nt[0]-at);this._updateView(),ot&&this._dispatchZoomAction(!1)}},_.prototype._onBrushStart=function(et){var tt=et.offsetX,nt=et.offsetY;this._brushStart=new Point(tt,nt),this._brushing=!0,this._brushStartTime=+new Date},_.prototype._onBrushEnd=function(et){if(this._brushing){var tt=this._displayables.brushRect;if(this._brushing=!1,!!tt){tt.attr("ignore",!0);var nt=tt.shape,it=+new Date;if(!(it-this._brushStartTime<200&&Math.abs(nt.width)<5)){var at=this._getViewExtent(),ot=[0,100];this._range=asc$2([linearMap$2(nt.x,at,ot,!0),linearMap$2(nt.x+nt.width,at,ot,!0)]),this._handleEnds=[nt.x,nt.x+nt.width],this._updateView(),this._dispatchZoomAction(!1)}}}},_.prototype._onBrush=function(et){this._brushing&&(stop(et.event),this._updateBrushRect(et.offsetX,et.offsetY))},_.prototype._updateBrushRect=function(et,tt){var nt=this._displayables,it=this.dataZoomModel,at=nt.brushRect;at||(at=nt.brushRect=new Rect({silent:!0,style:it.getModel("brushStyle").getItemStyle()}),nt.sliderGroup.add(at)),at.attr("ignore",!1);var ot=this._brushStart,st=this._displayables.sliderGroup,dt=st.transformCoordToLocal(et,tt),ht=st.transformCoordToLocal(ot.x,ot.y),ct=this._size;dt[0]=Math.max(Math.min(ct[0],dt[0]),0),at.setShape({x:ht[0],y:0,width:dt[0]-ht[0],height:ct[1]})},_.prototype._dispatchZoomAction=function(et){var tt=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:et?REALTIME_ANIMATION_CONFIG:null,start:tt[0],end:tt[1]})},_.prototype._findCoordRect=function(){var et,tt=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!et&&tt.length){var nt=tt[0].model.coordinateSystem;et=nt.getRect&&nt.getRect()}if(!et){var it=this.api.getWidth(),at=this.api.getHeight();et={x:it*.2,y:at*.2,width:it*.6,height:at*.6}}return et},_.type="dataZoom.slider",_}(DataZoomView);function getOtherDim(_e){var _={x:"y",y:"x",radius:"angle",angle:"radius"};return _[_e]}function getCursor$1(_e){return _e==="vertical"?"ns-resize":"ew-resize"}function install$7(_e){_e.registerComponentModel(SliderZoomModel),_e.registerComponentView(SliderZoomView),installCommon$1(_e)}function install$6(_e){use(install$8),use(install$7)}var visualDefault={get:function(_e,_,et){var tt=clone$4((defaultOption[_e]||{})[_]);return et&&isArray$1(tt)?tt[tt.length-1]:tt}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.stateList=["inRange","outOfRange"],et.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],et.layoutMode={type:"box",ignoreSize:!0},et.dataBound=[-1/0,1/0],et.targetVisuals={},et.controllerVisuals={},et}return _.prototype.init=function(et,tt,nt){this.mergeDefaultAndTheme(et,nt)},_.prototype.optionUpdated=function(et,tt){var nt=this.option;!tt&&replaceVisualOption(nt,et,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},_.prototype.resetVisual=function(et){var tt=this.stateList;et=bind$2(et,this),this.controllerVisuals=createVisualMappings(this.option.controller,tt,et),this.targetVisuals=createVisualMappings(this.option.target,tt,et)},_.prototype.getItemSymbol=function(){return null},_.prototype.getTargetSeriesIndices=function(){var et=this.option.seriesIndex,tt=[];return et==null||et==="all"?this.ecModel.eachSeries(function(nt,it){tt.push(it)}):tt=normalizeToArray(et),tt},_.prototype.eachTargetSeries=function(et,tt){each$f(this.getTargetSeriesIndices(),function(nt){var it=this.ecModel.getSeriesByIndex(nt);it&&et.call(tt,it)},this)},_.prototype.isTargetSeries=function(et){var tt=!1;return this.eachTargetSeries(function(nt){nt===et&&(tt=!0)}),tt},_.prototype.formatValueText=function(et,tt,nt){var it=this.option,at=it.precision,ot=this.dataBound,st=it.formatter,dt;nt=nt||["<",">"],isArray$1(et)&&(et=et.slice(),dt=!0);var ht=tt?et:dt?[ct(et[0]),ct(et[1])]:ct(et);if(isString$1(st))return st.replace("{value}",dt?ht[0]:ht).replace("{value2}",dt?ht[1]:ht);if(isFunction$3(st))return dt?st(et[0],et[1]):st(et);if(dt)return et[0]===ot[0]?nt[0]+" "+ht[1]:et[1]===ot[1]?nt[1]+" "+ht[0]:ht[0]+" - "+ht[1];return ht;function ct(ut){return ut===ot[0]?"min":ut===ot[1]?"max":(+ut).toFixed(Math.min(at,20))}},_.prototype.resetExtent=function(){var et=this.option,tt=asc([et.min,et.max]);this._dataExtent=tt},_.prototype.getDataDimensionIndex=function(et){var tt=this.option.dimension;if(tt!=null)return et.getDimensionIndex(tt);for(var nt=et.dimensions,it=nt.length-1;it>=0;it--){var at=nt[it],ot=et.getDimensionInfo(at);if(!ot.isCalculationCoord)return ot.storeDimIndex}},_.prototype.getExtent=function(){return this._dataExtent.slice()},_.prototype.completeVisualOption=function(){var et=this.ecModel,tt=this.option,nt={inRange:tt.inRange,outOfRange:tt.outOfRange},it=tt.target||(tt.target={}),at=tt.controller||(tt.controller={});merge$1(it,nt),merge$1(at,nt);var ot=this.isCategory();st.call(this,it),st.call(this,at),dt.call(this,it,"inRange","outOfRange"),ht.call(this,at);function st(ct){isArray(tt.color)&&!ct.inRange&&(ct.inRange={color:tt.color.slice().reverse()}),ct.inRange=ct.inRange||{color:et.get("gradientColor")}}function dt(ct,ut,ft){var gt=ct[ut],mt=ct[ft];gt&&!mt&&(mt=ct[ft]={},each$2(gt,function(vt,yt){if(VisualMapping.isValidType(yt)){var bt=visualDefault.get(yt,"inactive",ot);bt!=null&&(mt[yt]=bt,yt==="color"&&!mt.hasOwnProperty("opacity")&&!mt.hasOwnProperty("colorAlpha")&&(mt.opacity=[0,0]))}}))}function ht(ct){var ut=(ct.inRange||{}).symbol||(ct.outOfRange||{}).symbol,ft=(ct.inRange||{}).symbolSize||(ct.outOfRange||{}).symbolSize,gt=this.get("inactiveColor"),mt=this.getItemSymbol(),vt=mt||"roundRect";each$2(this.stateList,function(yt){var bt=this.itemSize,_t=ct[yt];_t||(_t=ct[yt]={color:ot?gt:[gt]}),_t.symbol==null&&(_t.symbol=ut&&clone$4(ut)||(ot?vt:[vt])),_t.symbolSize==null&&(_t.symbolSize=ft&&clone$4(ft)||(ot?bt[0]:[bt[0],bt[0]])),_t.symbol=mapVisual(_t.symbol,function(Tt){return Tt==="none"?vt:Tt});var xt=_t.symbolSize;if(xt!=null){var St=-1/0;eachVisual(xt,function(Tt){Tt>St&&(St=Tt)}),_t.symbolSize=mapVisual(xt,function(Tt){return linearMap$1(Tt,[0,St],[0,bt[0]],!0)})}},this)}},_.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},_.prototype.isCategory=function(){return!!this.option.categories},_.prototype.setSelected=function(et){},_.prototype.getSelected=function(){return null},_.prototype.getValueState=function(et){return null},_.prototype.getVisualMeta=function(et){return null},_.type="visualMap",_.dependencies=["series"],_.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},_}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.optionUpdated=function(et,tt){_e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(nt){nt.mappingMethod="linear",nt.dataExtent=this.getExtent()}),this._resetRange()},_.prototype.resetItemSize=function(){_e.prototype.resetItemSize.apply(this,arguments);var et=this.itemSize;(et[0]==null||isNaN(et[0]))&&(et[0]=DEFAULT_BAR_BOUND[0]),(et[1]==null||isNaN(et[1]))&&(et[1]=DEFAULT_BAR_BOUND[1])},_.prototype._resetRange=function(){var et=this.getExtent(),tt=this.option.range;!tt||tt.auto?(et.auto=1,this.option.range=et):isArray$1(tt)&&(tt[0]>tt[1]&&tt.reverse(),tt[0]=Math.max(tt[0],et[0]),tt[1]=Math.min(tt[1],et[1]))},_.prototype.completeVisualOption=function(){_e.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(et){var tt=this.option.controller[et].symbolSize;tt&&tt[0]!==tt[1]&&(tt[0]=tt[1]/3)},this)},_.prototype.setSelected=function(et){this.option.range=et.slice(),this._resetRange()},_.prototype.getSelected=function(){var et=this.getExtent(),tt=asc$2((this.get("range")||[]).slice());return tt[0]>et[1]&&(tt[0]=et[1]),tt[1]>et[1]&&(tt[1]=et[1]),tt[0]<et[0]&&(tt[0]=et[0]),tt[1]<et[0]&&(tt[1]=et[0]),tt},_.prototype.getValueState=function(et){var tt=this.option.range,nt=this.getExtent();return(tt[0]<=nt[0]||tt[0]<=et)&&(tt[1]>=nt[1]||et<=tt[1])?"inRange":"outOfRange"},_.prototype.findTargetDataIndices=function(et){var tt=[];return this.eachTargetSeries(function(nt){var it=[],at=nt.getData();at.each(this.getDataDimensionIndex(at),function(ot,st){et[0]<=ot&&ot<=et[1]&&it.push(st)},this),tt.push({seriesId:nt.id,dataIndex:it})},this),tt},_.prototype.getVisualMeta=function(et){var tt=getColorStopValues(this,"outOfRange",this.getExtent()),nt=getColorStopValues(this,"inRange",this.option.range.slice()),it=[];function at(ft,gt){it.push({value:ft,color:et(ft,gt)})}for(var ot=0,st=0,dt=nt.length,ht=tt.length;st<ht&&(!nt.length||tt[st]<=nt[0]);st++)tt[st]<nt[ot]&&at(tt[st],"outOfRange");for(var ct=1;ot<dt;ot++,ct=0)ct&&it.length&&at(nt[ot],"outOfRange"),at(nt[ot],"inRange");for(var ct=1;st<ht;st++)(!nt.length||nt[nt.length-1]<tt[st])&&(ct&&(it.length&&at(it[it.length-1].value,"outOfRange"),ct=0),at(tt[st],"outOfRange"));var ut=it.length;return{stops:it,outerColors:[ut?it[0].color:"transparent",ut?it[ut-1].color:"transparent"]}},_.type="visualMap.continuous",_.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),_}(VisualMapModel);function getColorStopValues(_e,_,et){if(et[0]===et[1])return et.slice();for(var tt=200,nt=(et[1]-et[0])/tt,it=et[0],at=[],ot=0;ot<=tt&&it<et[1];ot++)at.push(it),it+=nt;return at.push(et[1]),at}var VisualMapView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et.autoPositionValues={left:1,right:1,top:1,bottom:1},et}return _.prototype.init=function(et,tt){this.ecModel=et,this.api=tt},_.prototype.render=function(et,tt,nt,it){if(this.visualMapModel=et,et.get("show")===!1){this.group.removeAll();return}this.doRender(et,tt,nt,it)},_.prototype.renderBackground=function(et){var tt=this.visualMapModel,nt=normalizeCssArray(tt.get("padding")||0),it=et.getBoundingRect();et.add(new Rect$2({z2:-1,silent:!0,shape:{x:it.x-nt[3],y:it.y-nt[0],width:it.width+nt[3]+nt[1],height:it.height+nt[0]+nt[2]},style:{fill:tt.get("backgroundColor"),stroke:tt.get("borderColor"),lineWidth:tt.get("borderWidth")}}))},_.prototype.getControllerVisual=function(et,tt,nt){nt=nt||{};var it=nt.forceState,at=this.visualMapModel,ot={};if(tt==="color"){var st=at.get("contentColor");ot.color=st}function dt(ft){return ot[ft]}function ht(ft,gt){ot[ft]=gt}var ct=at.controllerVisuals[it||at.getValueState(et)],ut=VisualMapping.prepareVisualTypes(ct);return each$f(ut,function(ft){var gt=ct[ft];nt.convertOpacityToAlpha&&ft==="opacity"&&(ft="colorAlpha",gt=ct.__alphaForOpacity),VisualMapping.dependsOn(ft,tt)&&gt&&gt.applyVisual(et,dt,ht)}),ot[tt]},_.prototype.positionGroup=function(et){var tt=this.visualMapModel,nt=this.api;positionElement(et,tt.getBoxLayoutParams(),{width:nt.getWidth(),height:nt.getHeight()})},_.prototype.doRender=function(et,tt,nt,it){},_.type="visualMap",_}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(_e,_,et){var tt=_e.option,nt=tt.align;if(nt!=null&&nt!=="auto")return nt;for(var it={width:_.getWidth(),height:_.getHeight()},at=tt.orient==="horizontal"?1:0,ot=paramsSet[at],st=[0,null,10],dt={},ht=0;ht<3;ht++)dt[paramsSet[1-at][ht]]=st[ht],dt[ot[ht]]=ht===2?et[0]:tt[ot[ht]];var ct=[["x","width",3],["y","height",0]][at],ut=getLayoutRect(dt,it,tt.padding);return ot[(ut.margin[ct[2]]||0)+ut[ct[0]]+ut[ct[1]]*.5<it[ct[1]]*.5?0:1]}function makeHighDownBatch(_e,_){return each$f(_e||[],function(et){et.dataIndex!=null&&(et.dataIndexInside=et.dataIndex,et.dataIndex=null),et.highlightKey="visualMap"+(_?_.componentIndex:"")}),_e}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et._shapes={},et._dataInterval=[],et._handleEnds=[],et._hoverLinkDataIndices=[],et}return _.prototype.init=function(et,tt){_e.prototype.init.call(this,et,tt),this._hoverLinkFromSeriesMouseOver=bind$2(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$2(this._hideIndicator,this)},_.prototype.doRender=function(et,tt,nt,it){(!it||it.type!=="selectDataRange"||it.from!==this.uid)&&this._buildView()},_.prototype._buildView=function(){this.group.removeAll();var et=this.visualMapModel,tt=this.group;this._orient=et.get("orient"),this._useHandle=et.get("calculable"),this._resetInterval(),this._renderBar(tt);var nt=et.get("text");this._renderEndsText(tt,nt,0),this._renderEndsText(tt,nt,1),this._updateView(!0),this.renderBackground(tt),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(tt)},_.prototype._renderEndsText=function(et,tt,nt){if(tt){var it=tt[1-nt];it=it!=null?it+"":"";var at=this.visualMapModel,ot=at.get("textGap"),st=at.itemSize,dt=this._shapes.mainGroup,ht=this._applyTransform([st[0]/2,nt===0?-ot:st[1]+ot],dt),ct=this._applyTransform(nt===0?"bottom":"top",dt),ut=this._orient,ft=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle$1(ft,{x:ht[0],y:ht[1],verticalAlign:ut==="horizontal"?"middle":ct,align:ut==="horizontal"?ct:"center",text:it})}))}},_.prototype._renderBar=function(et){var tt=this.visualMapModel,nt=this._shapes,it=tt.itemSize,at=this._orient,ot=this._useHandle,st=getItemAlign(tt,this.api,it),dt=nt.mainGroup=this._createBarGroup(st),ht=new Group$3;dt.add(ht),ht.add(nt.outOfRange=createPolygon()),ht.add(nt.inRange=createPolygon(null,ot?getCursor(this._orient):null,bind$2(this._dragHandle,this,"all",!1),bind$2(this._dragHandle,this,"all",!0))),ht.setClipPath(new Rect$2({shape:{x:0,y:0,width:it[0],height:it[1],r:3}}));var ct=tt.textStyleModel.getTextRect(""),ut=mathMax(ct.width,ct.height);ot&&(nt.handleThumbs=[],nt.handleLabels=[],nt.handleLabelPoints=[],this._createHandle(tt,dt,0,it,ut,at),this._createHandle(tt,dt,1,it,ut,at)),this._createIndicator(tt,dt,it,ut,at),et.add(dt)},_.prototype._createHandle=function(et,tt,nt,it,at,ot){var st=bind$2(this._dragHandle,this,nt,!1),dt=bind$2(this._dragHandle,this,nt,!0),ht=parsePercent$1(et.get("handleSize"),it[0]),ct=createSymbol$1(et.get("handleIcon"),-ht/2,-ht/2,ht,ht,null,!0),ut=getCursor(this._orient);ct.attr({cursor:ut,draggable:!0,drift:st,ondragend:dt,onmousemove:function(yt){stop(yt.event)}}),ct.x=it[0]/2,ct.useStyle(et.getModel("handleStyle").getItemStyle()),ct.setStyle({strokeNoScale:!0,strokeFirst:!0}),ct.style.lineWidth*=2,ct.ensureState("emphasis").style=et.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(ct,!0),tt.add(ct);var ft=this.visualMapModel.textStyleModel,gt=new ZRText({cursor:ut,draggable:!0,drift:st,onmousemove:function(yt){stop(yt.event)},ondragend:dt,style:createTextStyle$1(ft,{x:0,y:0,text:""})});gt.ensureState("blur").style={opacity:.1},gt.stateTransition={duration:200},this.group.add(gt);var mt=[ht,0],vt=this._shapes;vt.handleThumbs[nt]=ct,vt.handleLabelPoints[nt]=mt,vt.handleLabels[nt]=gt},_.prototype._createIndicator=function(et,tt,nt,it,at){var ot=parsePercent$1(et.get("indicatorSize"),nt[0]),st=createSymbol$1(et.get("indicatorIcon"),-ot/2,-ot/2,ot,ot,null,!0);st.attr({cursor:"move",invisible:!0,silent:!0,x:nt[0]/2});var dt=et.getModel("indicatorStyle").getItemStyle();if(st instanceof ZRImage){var ht=st.style;st.useStyle(extend({image:ht.image,x:ht.x,y:ht.y,width:ht.width,height:ht.height},dt))}else st.useStyle(dt);tt.add(st);var ct=this.visualMapModel.textStyleModel,ut=new ZRText({silent:!0,invisible:!0,style:createTextStyle$1(ct,{x:0,y:0,text:""})});this.group.add(ut);var ft=[(at==="horizontal"?it/2:HOVER_LINK_OUT)+nt[0]/2,0],gt=this._shapes;gt.indicator=st,gt.indicatorLabel=ut,gt.indicatorLabelPoint=ft,this._firstShowIndicator=!0},_.prototype._dragHandle=function(et,tt,nt,it){if(this._useHandle){if(this._dragging=!tt,!tt){var at=this._applyTransform([nt,it],this._shapes.mainGroup,!0);this._updateInterval(et,at[1]),this._hideIndicator(),this._updateView()}tt===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),tt?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[et],!1)}},_.prototype._resetInterval=function(){var et=this.visualMapModel,tt=this._dataInterval=et.getSelected(),nt=et.getExtent(),it=[0,et.itemSize[1]];this._handleEnds=[linearMap(tt[0],nt,it,!0),linearMap(tt[1],nt,it,!0)]},_.prototype._updateInterval=function(et,tt){tt=tt||0;var nt=this.visualMapModel,it=this._handleEnds,at=[0,nt.itemSize[1]];sliderMove(tt,it,at,et,0);var ot=nt.getExtent();this._dataInterval=[linearMap(it[0],at,ot,!0),linearMap(it[1],at,ot,!0)]},_.prototype._updateView=function(et){var tt=this.visualMapModel,nt=tt.getExtent(),it=this._shapes,at=[0,tt.itemSize[1]],ot=et?at:this._handleEnds,st=this._createBarVisual(this._dataInterval,nt,ot,"inRange"),dt=this._createBarVisual(nt,nt,at,"outOfRange");it.inRange.setStyle({fill:st.barColor}).setShape("points",st.barPoints),it.outOfRange.setStyle({fill:dt.barColor}).setShape("points",dt.barPoints),this._updateHandle(ot,st)},_.prototype._createBarVisual=function(et,tt,nt,it){var at={forceState:it,convertOpacityToAlpha:!0},ot=this._makeColorGradient(et,at),st=[this.getControllerVisual(et[0],"symbolSize",at),this.getControllerVisual(et[1],"symbolSize",at)],dt=this._createBarPoints(nt,st);return{barColor:new LinearGradient(0,0,0,1,ot),barPoints:dt,handlesColor:[ot[0].color,ot[ot.length-1].color]}},_.prototype._makeColorGradient=function(et,tt){var nt=100,it=[],at=(et[1]-et[0])/nt;it.push({color:this.getControllerVisual(et[0],"color",tt),offset:0});for(var ot=1;ot<nt;ot++){var st=et[0]+at*ot;if(st>et[1])break;it.push({color:this.getControllerVisual(st,"color",tt),offset:ot/nt})}return it.push({color:this.getControllerVisual(et[1],"color",tt),offset:1}),it},_.prototype._createBarPoints=function(et,tt){var nt=this.visualMapModel.itemSize;return[[nt[0]-tt[0],et[0]],[nt[0],et[0]],[nt[0],et[1]],[nt[0]-tt[1],et[1]]]},_.prototype._createBarGroup=function(et){var tt=this._orient,nt=this.visualMapModel.get("inverse");return new Group$3(tt==="horizontal"&&!nt?{scaleX:et==="bottom"?1:-1,rotation:Math.PI/2}:tt==="horizontal"&&nt?{scaleX:et==="bottom"?-1:1,rotation:-Math.PI/2}:tt==="vertical"&&!nt?{scaleX:et==="left"?1:-1,scaleY:-1}:{scaleX:et==="left"?1:-1})},_.prototype._updateHandle=function(et,tt){if(this._useHandle){var nt=this._shapes,it=this.visualMapModel,at=nt.handleThumbs,ot=nt.handleLabels,st=it.itemSize,dt=it.getExtent(),ht=this._applyTransform("left",nt.mainGroup);each$1([0,1],function(ct){var ut=at[ct];ut.setStyle("fill",tt.handlesColor[ct]),ut.y=et[ct];var ft=linearMap(et[ct],[0,st[1]],dt,!0),gt=this.getControllerVisual(ft,"symbolSize");ut.scaleX=ut.scaleY=gt/st[0],ut.x=st[0]-gt/2;var mt=applyTransform(nt.handleLabelPoints[ct],getTransform$1(ut,this.group));if(this._orient==="horizontal"){var vt=ht==="left"||ht==="top"?(st[0]-gt)/2:(st[0]-gt)/-2;mt[1]+=vt}ot[ct].setStyle({x:mt[0],y:mt[1],text:it.formatValueText(this._dataInterval[ct]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",nt.mainGroup):"center"})},this)}},_.prototype._showIndicator=function(et,tt,nt,it){var at=this.visualMapModel,ot=at.getExtent(),st=at.itemSize,dt=[0,st[1]],ht=this._shapes,ct=ht.indicator;if(ct){ct.attr("invisible",!1);var ut={convertOpacityToAlpha:!0},ft=this.getControllerVisual(et,"color",ut),gt=this.getControllerVisual(et,"symbolSize"),mt=linearMap(et,ot,dt,!0),vt=st[0]-gt/2,yt={x:ct.x,y:ct.y};ct.y=mt,ct.x=vt;var bt=applyTransform(ht.indicatorLabelPoint,getTransform$1(ct,this.group)),_t=ht.indicatorLabel;_t.attr("invisible",!1);var xt=this._applyTransform("left",ht.mainGroup),St=this._orient,Tt=St==="horizontal";_t.setStyle({text:(nt||"")+at.formatValueText(tt),verticalAlign:Tt?xt:"middle",align:Tt?"center":xt});var wt={x:vt,y:mt,style:{fill:ft}},Ct={style:{x:bt[0],y:bt[1]}};if(at.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var Et={duration:100,easing:"cubicInOut",additive:!0};ct.x=yt.x,ct.y=yt.y,ct.animateTo(wt,Et),_t.animateTo(Ct,Et)}else ct.attr(wt),_t.attr(Ct);this._firstShowIndicator=!1;var At=this._shapes.handleLabels;if(At)for(var Pt=0;Pt<At.length;Pt++)this.api.enterBlur(At[Pt])}},_.prototype._enableHoverLinkToSeries=function(){var et=this;this._shapes.mainGroup.on("mousemove",function(tt){if(et._hovering=!0,!et._dragging){var nt=et.visualMapModel.itemSize,it=et._applyTransform([tt.offsetX,tt.offsetY],et._shapes.mainGroup,!0,!0);it[1]=mathMin(mathMax(0,it[1]),nt[1]),et._doHoverLinkToSeries(it[1],0<=it[0]&&it[0]<=nt[0])}}).on("mouseout",function(){et._hovering=!1,!et._dragging&&et._clearHoverLinkToSeries()})},_.prototype._enableHoverLinkFromSeries=function(){var et=this.api.getZr();this.visualMapModel.option.hoverLink?(et.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),et.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_.prototype._doHoverLinkToSeries=function(et,tt){var nt=this.visualMapModel,it=nt.itemSize;if(nt.option.hoverLink){var at=[0,it[1]],ot=nt.getExtent();et=mathMin(mathMax(at[0],et),at[1]);var st=getHalfHoverLinkSize(nt,ot,at),dt=[et-st,et+st],ht=linearMap(et,at,ot,!0),ct=[linearMap(dt[0],at,ot,!0),linearMap(dt[1],at,ot,!0)];dt[0]<at[0]&&(ct[0]=-1/0),dt[1]>at[1]&&(ct[1]=1/0),tt&&(ct[0]===-1/0?this._showIndicator(ht,ct[1],"< ",st):ct[1]===1/0?this._showIndicator(ht,ct[0],"> ",st):this._showIndicator(ht,ht," ",st));var ut=this._hoverLinkDataIndices,ft=[];(tt||useHoverLinkOnHandle(nt))&&(ft=this._hoverLinkDataIndices=nt.findTargetDataIndices(ct));var gt=compressBatches(ut,ft);this._dispatchHighDown("downplay",makeHighDownBatch(gt[0],nt)),this._dispatchHighDown("highlight",makeHighDownBatch(gt[1],nt))}},_.prototype._hoverLinkFromSeriesMouseOver=function(et){var tt;if(findEventDispatcher(et.target,function(st){var dt=getECData(st);if(dt.dataIndex!=null)return tt=dt,!0},!0),!!tt){var nt=this.ecModel.getSeriesByIndex(tt.seriesIndex),it=this.visualMapModel;if(it.isTargetSeries(nt)){var at=nt.getData(tt.dataType),ot=at.getStore().get(it.getDataDimensionIndex(at),tt.dataIndex);isNaN(ot)||this._showIndicator(ot,ot)}}},_.prototype._hideIndicator=function(){var et=this._shapes;et.indicator&&et.indicator.attr("invisible",!0),et.indicatorLabel&&et.indicatorLabel.attr("invisible",!0);var tt=this._shapes.handleLabels;if(tt)for(var nt=0;nt<tt.length;nt++)this.api.leaveBlur(tt[nt])},_.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var et=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(et,this.visualMapModel)),et.length=0},_.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var et=this.api.getZr();et.off("mouseover",this._hoverLinkFromSeriesMouseOver),et.off("mouseout",this._hideIndicator)},_.prototype._applyTransform=function(et,tt,nt,it){var at=getTransform$1(tt,it?null:this.group);return isArray$1(et)?applyTransform(et,at,nt):transformDirection(et,at,nt)},_.prototype._dispatchHighDown=function(et,tt){tt&&tt.length&&this.api.dispatchAction({type:et,batch:tt})},_.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},_.type="visualMap.continuous",_}(VisualMapView);function createPolygon(_e,_,et,tt){return new Polygon({shape:{points:_e},draggable:!!et,cursor:_,drift:et,onmousemove:function(nt){stop(nt.event)},ondragend:tt})}function getHalfHoverLinkSize(_e,_,et){var tt=HOVER_LINK_SIZE/2,nt=_e.get("hoverLinkDataSize");return nt&&(tt=linearMap(nt,_,et,!0)/2),tt}function useHoverLinkOnHandle(_e){var _=_e.get("hoverLinkOnHandle");return!!(_??_e.get("realtime"))}function getCursor(_e){return _e==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(_e,_){_.eachComponent({mainType:"visualMap",query:_e},function(et){et.setSelected(_e.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(_e,_){var et=[];return _.eachComponent("visualMap",function(tt){var nt=_e.pipelineContext;!tt.isTargetSeries(_e)||nt&&nt.large||et.push(incrementalApplyVisual(tt.stateList,tt.targetVisuals,bind$2(tt.getValueState,tt),tt.getDataDimensionIndex(_e.getData())))}),et}},{createOnAllSeries:!0,reset:function(_e,_){var et=_e.getData(),tt=[];_.eachComponent("visualMap",function(nt){if(nt.isTargetSeries(_e)){var it=nt.getVisualMeta(bind$2(getColorVisual,null,_e,nt))||{stops:[],outerColors:[]},at=nt.getDataDimensionIndex(et);at>=0&&(it.dimension=at,tt.push(it))}}),_e.getData().setVisual("visualMeta",tt)}}];function getColorVisual(_e,_,et,tt){for(var nt=_.targetVisuals[tt],it=VisualMapping.prepareVisualTypes(nt),at={color:getVisualFromData(_e.getData(),"color")},ot=0,st=it.length;ot<st;ot++){var dt=it[ot],ht=nt[dt==="opacity"?"__alphaForOpacity":dt];ht&&ht.applyVisual(et,ct,ut)}return at.color;function ct(ft){return at[ft]}function ut(ft,gt){at[ft]=gt}}var each=each$f;function visualMapPreprocessor(_e){var _=_e&&_e.visualMap;isArray$1(_)||(_=_?[_]:[]),each(_,function(et){if(et){has(et,"splitList")&&!has(et,"pieces")&&(et.pieces=et.splitList,delete et.splitList);var tt=et.pieces;tt&&isArray$1(tt)&&each(tt,function(nt){isObject$4(nt)&&(has(nt,"start")&&!has(nt,"min")&&(nt.min=nt.start),has(nt,"end")&&!has(nt,"max")&&(nt.max=nt.end))})}})}function has(_e,_){return _e&&_e.hasOwnProperty&&_e.hasOwnProperty(_)}var installed=!1;function installCommon(_e){installed||(installed=!0,_e.registerSubTypeDefaulter("visualMap",function(_){return!_.categories&&(!(_.pieces?_.pieces.length>0:_.splitNumber>0)||_.calculable)?"continuous":"piecewise"}),_e.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(_){_e.registerVisual(_e.PRIORITY.VISUAL.COMPONENT,_)}),_e.registerPreprocessor(visualMapPreprocessor))}function install$5(_e){_e.registerComponentModel(ContinuousModel),_e.registerComponentView(ContinuousView),installCommon(_e)}var PiecewiseModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et._pieceList=[],et}return _.prototype.optionUpdated=function(et,tt){_e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var nt=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(et,tt);var it=this.option.categories;this.resetVisual(function(at,ot){nt==="categories"?(at.mappingMethod="category",at.categories=clone$4(it)):(at.dataExtent=this.getExtent(),at.mappingMethod="piecewise",at.pieceList=map$1(this._pieceList,function(st){return st=clone$4(st),ot!=="inRange"&&(st.visual=null),st}))})},_.prototype.completeVisualOption=function(){var et=this.option,tt={},nt=VisualMapping.listVisualTypes(),it=this.isCategory();each$f(et.pieces,function(ot){each$f(nt,function(st){ot.hasOwnProperty(st)&&(tt[st]=1)})}),each$f(tt,function(ot,st){var dt=!1;each$f(this.stateList,function(ht){dt=dt||at(et,ht,st)||at(et.target,ht,st)},this),!dt&&each$f(this.stateList,function(ht){(et[ht]||(et[ht]={}))[st]=visualDefault.get(st,ht==="inRange"?"active":"inactive",it)})},this);function at(ot,st,dt){return ot&&ot[st]&&ot[st].hasOwnProperty(dt)}_e.prototype.completeVisualOption.apply(this,arguments)},_.prototype._resetSelected=function(et,tt){var nt=this.option,it=this._pieceList,at=(tt?nt:et).selected||{};if(nt.selected=at,each$f(it,function(st,dt){var ht=this.getSelectedMapKey(st);at.hasOwnProperty(ht)||(at[ht]=!0)},this),nt.selectedMode==="single"){var ot=!1;each$f(it,function(st,dt){var ht=this.getSelectedMapKey(st);at[ht]&&(ot?at[ht]=!1:ot=!0)},this)}},_.prototype.getItemSymbol=function(){return this.get("itemSymbol")},_.prototype.getSelectedMapKey=function(et){return this._mode==="categories"?et.value+"":et.index+""},_.prototype.getPieceList=function(){return this._pieceList},_.prototype._determineMode=function(){var et=this.option;return et.pieces&&et.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},_.prototype.setSelected=function(et){this.option.selected=clone$4(et)},_.prototype.getValueState=function(et){var tt=VisualMapping.findPieceIndex(et,this._pieceList);return tt!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[tt])]?"inRange":"outOfRange"},_.prototype.findTargetDataIndices=function(et){var tt=[],nt=this._pieceList;return this.eachTargetSeries(function(it){var at=[],ot=it.getData();ot.each(this.getDataDimensionIndex(ot),function(st,dt){var ht=VisualMapping.findPieceIndex(st,nt);ht===et&&at.push(dt)},this),tt.push({seriesId:it.id,dataIndex:at})},this),tt},_.prototype.getRepresentValue=function(et){var tt;if(this.isCategory())tt=et.value;else if(et.value!=null)tt=et.value;else{var nt=et.interval||[];tt=nt[0]===-1/0&&nt[1]===1/0?0:(nt[0]+nt[1])/2}return tt},_.prototype.getVisualMeta=function(et){if(this.isCategory())return;var tt=[],nt=["",""],it=this;function at(ht,ct){var ut=it.getRepresentValue({interval:ht});ct||(ct=it.getValueState(ut));var ft=et(ut,ct);ht[0]===-1/0?nt[0]=ft:ht[1]===1/0?nt[1]=ft:tt.push({value:ht[0],color:ft},{value:ht[1],color:ft})}var ot=this._pieceList.slice();if(!ot.length)ot.push({interval:[-1/0,1/0]});else{var st=ot[0].interval[0];st!==-1/0&&ot.unshift({interval:[-1/0,st]}),st=ot[ot.length-1].interval[1],st!==1/0&&ot.push({interval:[st,1/0]})}var dt=-1/0;return each$f(ot,function(ht){var ct=ht.interval;ct&&(ct[0]>dt&&at([dt,ct[0]],"outOfRange"),at(ct.slice()),dt=ct[1])},this),{stops:tt,outerColors:nt}},_.type="visualMap.piecewise",_.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),_}(VisualMapModel),resetMethods={splitNumber:function(_e){var _=this.option,et=Math.min(_.precision,20),tt=this.getExtent(),nt=_.splitNumber;nt=Math.max(parseInt(nt,10),1),_.splitNumber=nt;for(var it=(tt[1]-tt[0])/nt;+it.toFixed(et)!==it&&et<5;)et++;_.precision=et,it=+it.toFixed(et),_.minOpen&&_e.push({interval:[-1/0,tt[0]],close:[0,0]});for(var at=0,ot=tt[0];at<nt;ot+=it,at++){var st=at===nt-1?tt[1]:ot+it;_e.push({interval:[ot,st],close:[1,1]})}_.maxOpen&&_e.push({interval:[tt[1],1/0],close:[0,0]}),reformIntervals(_e),each$f(_e,function(dt,ht){dt.index=ht,dt.text=this.formatValueText(dt.interval)},this)},categories:function(_e){var _=this.option;each$f(_.categories,function(et){_e.push({text:this.formatValueText(et,!0),value:et})},this),normalizeReverse(_,_e)},pieces:function(_e){var _=this.option;each$f(_.pieces,function(et,tt){isObject$4(et)||(et={value:et});var nt={text:"",index:tt};if(et.label!=null&&(nt.text=et.label),et.hasOwnProperty("value")){var it=nt.value=et.value;nt.interval=[it,it],nt.close=[1,1]}else{for(var at=nt.interval=[],ot=nt.close=[0,0],st=[1,0,1],dt=[-1/0,1/0],ht=[],ct=0;ct<2;ct++){for(var ut=[["gte","gt","min"],["lte","lt","max"]][ct],ft=0;ft<3&&at[ct]==null;ft++)at[ct]=et[ut[ft]],ot[ct]=st[ft],ht[ct]=ft===2;at[ct]==null&&(at[ct]=dt[ct])}ht[0]&&at[1]===1/0&&(ot[0]=0),ht[1]&&at[0]===-1/0&&(ot[1]=0),at[0]===at[1]&&ot[0]&&ot[1]&&(nt.value=at[0])}nt.visual=VisualMapping.retrieveVisuals(et),_e.push(nt)},this),normalizeReverse(_,_e),reformIntervals(_e),each$f(_e,function(et){var tt=et.close,nt=[["<",""][tt[1]],[">",""][tt[0]]];et.text=et.text||this.formatValueText(et.value!=null?et.value:et.interval,!1,nt)},this)}};function normalizeReverse(_e,_){var et=_e.inverse;(_e.orient==="vertical"?!et:et)&&_.reverse()}var PiecewiseVisualMapView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type=_.type,et}return _.prototype.doRender=function(){var et=this.group;et.removeAll();var tt=this.visualMapModel,nt=tt.get("textGap"),it=tt.textStyleModel,at=it.getFont(),ot=it.getTextColor(),st=this._getItemAlign(),dt=tt.itemSize,ht=this._getViewData(),ct=ht.endsText,ut=retrieve(tt.get("showLabel",!0),!ct),ft=!tt.get("selectedMode");ct&&this._renderEndsText(et,ct[0],dt,ut,st),each$f(ht.viewPieceList,function(gt){var mt=gt.piece,vt=new Group$3;vt.onclick=bind$2(this._onItemClick,this,mt),this._enableHoverLink(vt,gt.indexInModelPieceList);var yt=tt.getRepresentValue(mt);if(this._createItemSymbol(vt,yt,[0,0,dt[0],dt[1]],ft),ut){var bt=this.visualMapModel.getValueState(yt);vt.add(new ZRText({style:{x:st==="right"?-nt:dt[0]+nt,y:dt[1]/2,text:mt.text,verticalAlign:"middle",align:st,font:at,fill:ot,opacity:bt==="outOfRange"?.5:1},silent:ft}))}et.add(vt)},this),ct&&this._renderEndsText(et,ct[1],dt,ut,st),box(tt.get("orient"),et,tt.get("itemGap")),this.renderBackground(et),this.positionGroup(et)},_.prototype._enableHoverLink=function(et,tt){var nt=this;et.on("mouseover",function(){return it("highlight")}).on("mouseout",function(){return it("downplay")});var it=function(at){var ot=nt.visualMapModel;ot.option.hoverLink&&nt.api.dispatchAction({type:at,batch:makeHighDownBatch(ot.findTargetDataIndices(tt),ot)})}},_.prototype._getItemAlign=function(){var et=this.visualMapModel,tt=et.option;if(tt.orient==="vertical")return getItemAlign(et,this.api,et.itemSize);var nt=tt.align;return(!nt||nt==="auto")&&(nt="left"),nt},_.prototype._renderEndsText=function(et,tt,nt,it,at){if(tt){var ot=new Group$3,st=this.visualMapModel.textStyleModel;ot.add(new ZRText({style:createTextStyle$1(st,{x:it?at==="right"?nt[0]:0:nt[0]/2,y:nt[1]/2,verticalAlign:"middle",align:it?at:"center",text:tt})})),et.add(ot)}},_.prototype._getViewData=function(){var et=this.visualMapModel,tt=map$1(et.getPieceList(),function(ot,st){return{piece:ot,indexInModelPieceList:st}}),nt=et.get("text"),it=et.get("orient"),at=et.get("inverse");return(it==="horizontal"?at:!at)?tt.reverse():nt&&(nt=nt.slice().reverse()),{viewPieceList:tt,endsText:nt}},_.prototype._createItemSymbol=function(et,tt,nt,it){var at=createSymbol$1(this.getControllerVisual(tt,"symbol"),nt[0],nt[1],nt[2],nt[3],this.getControllerVisual(tt,"color"));at.silent=it,et.add(at)},_.prototype._onItemClick=function(et){var tt=this.visualMapModel,nt=tt.option,it=nt.selectedMode;if(it){var at=clone$4(nt.selected),ot=tt.getSelectedMapKey(et);it==="single"||it===!0?(at[ot]=!0,each$f(at,function(st,dt){at[dt]=dt===ot})):at[ot]=!at[ot],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:at})}},_.type="visualMap.piecewise",_}(VisualMapView);function install$4(_e){_e.registerComponentModel(PiecewiseModel),_e.registerComponentView(PiecewiseVisualMapView),installCommon(_e)}function install$3(_e){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(_e,_){var et=_e.getModel("aria");if(!et.get("enabled"))return;var tt=clone$4(DEFAULT_OPTION);merge$1(tt.label,_e.getLocaleModel().get("aria"),!1),merge$1(et.option,tt,!1),nt(),it();function nt(){var dt=et.getModel("decal"),ht=dt.get("show");if(ht){var ct=createHashMap();_e.eachSeries(function(ut){if(!ut.isColorBySeries()){var ft=ct.get(ut.type);ft||(ft={},ct.set(ut.type,ft)),inner(ut).scope=ft}}),_e.eachRawSeries(function(ut){if(_e.isSeriesFiltered(ut))return;if(isFunction$3(ut.enableAriaDecal)){ut.enableAriaDecal();return}var ft=ut.getData();if(ut.isColorBySeries()){var bt=getDecalFromPalette(ut.ecModel,ut.name,decalPaletteScope,_e.getSeriesCount()),_t=ft.getVisual("decal");ft.setVisual("decal",xt(_t,bt))}else{var gt=ut.getRawData(),mt={},vt=inner(ut).scope;ft.each(function(St){var Tt=ft.getRawIndex(St);mt[Tt]=St});var yt=gt.count();gt.each(function(St){var Tt=mt[St],wt=gt.getName(St)||St+"",Ct=getDecalFromPalette(ut.ecModel,wt,vt,yt),Et=ft.getItemVisual(Tt,"decal");ft.setItemVisual(Tt,"decal",xt(Et,Ct))})}function xt(St,Tt){var wt=St?extend(extend({},Tt),St):Tt;return wt.dirty=!0,wt}})}}function it(){var dt=_.getZr().dom;if(dt){var ht=_e.getLocaleModel().get("aria"),ct=et.getModel("label");if(ct.option=defaults(ct.option,ht),!!ct.get("enabled")){if(dt.setAttribute("role","img"),ct.get("description")){dt.setAttribute("aria-label",ct.get("description"));return}var ut=_e.getSeriesCount(),ft=ct.get(["data","maxCount"])||10,gt=ct.get(["series","maxCount"])||10,mt=Math.min(ut,gt),vt;if(!(ut<1)){var yt=ot();if(yt){var bt=ct.get(["general","withTitle"]);vt=at(bt,{title:yt})}else vt=ct.get(["general","withoutTitle"]);var _t=[],xt=ut>1?ct.get(["series","multiple","prefix"]):ct.get(["series","single","prefix"]);vt+=at(xt,{seriesCount:ut}),_e.eachSeries(function(Ct,Et){if(Et<mt){var At=void 0,Pt=Ct.get("name"),Rt=Pt?"withName":"withoutName";At=ut>1?ct.get(["series","multiple",Rt]):ct.get(["series","single",Rt]),At=at(At,{seriesId:Ct.seriesIndex,seriesName:Ct.get("name"),seriesType:st(Ct.subType)});var It=Ct.getData();if(It.count()>ft){var Mt=ct.get(["data","partialData"]);At+=at(Mt,{displayCnt:ft})}else At+=ct.get(["data","allData"]);for(var Ot=ct.get(["data","separator","middle"]),$t=ct.get(["data","separator","end"]),Lt=ct.get(["data","excludeDimensionId"]),kt=[],Nt=0;Nt<It.count();Nt++)if(Nt<ft){var Vt=It.getName(Nt),zt=Lt?filter$1(It.getValues(Nt),function(Wt,nr){return indexOf(Lt,nr)===-1}):It.getValues(Nt),Xt=ct.get(["data",Vt?"withName":"withoutName"]);kt.push(at(Xt,{name:Vt,value:zt.join(Ot)}))}At+=kt.join(Ot)+$t,_t.push(At)}});var St=ct.getModel(["series","multiple","separator"]),Tt=St.get("middle"),wt=St.get("end");vt+=_t.join(Tt)+wt,dt.setAttribute("aria-label",vt)}}}}function at(dt,ht){if(!isString$1(dt))return dt;var ct=dt;return each$f(ht,function(ut,ft){ct=ct.replace(new RegExp("\\{\\s*"+ft+"\\s*\\}","g"),ut)}),ct}function ot(){var dt=_e.get("title");return dt&&dt.length&&(dt=dt[0]),dt&&dt.text}function st(dt){var ht=_e.getLocaleModel().get(["series","typeNames"]);return ht[dt]||ht.chart}}function ariaPreprocessor(_e){if(!(!_e||!_e.aria)){var _=_e.aria;_.show!=null&&(_.enabled=_.show),_.label=_.label||{},each$f(["description","general","series","data"],function(et){_[et]!=null&&(_.label[et]=_[et])})}}function install$2(_e){_e.registerPreprocessor(ariaPreprocessor),_e.registerVisual(_e.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function _e(_){var et=this._condVal=isString$1(_)?new RegExp(_):isRegExp(_)?_:null;if(et==null){var tt="";throwError(tt)}}return _e.prototype.evaluate=function(_){var et=typeof _;return isString$1(et)?this._condVal.test(_):isNumber(et)?this._condVal.test(_+""):!1},_e}(),ConstConditionInternal=function(){function _e(){}return _e.prototype.evaluate=function(){return this.value},_e}(),AndConditionInternal=function(){function _e(){}return _e.prototype.evaluate=function(){for(var _=this.children,et=0;et<_.length;et++)if(!_[et].evaluate())return!1;return!0},_e}(),OrConditionInternal=function(){function _e(){}return _e.prototype.evaluate=function(){for(var _=this.children,et=0;et<_.length;et++)if(_[et].evaluate())return!0;return!1},_e}(),NotConditionInternal=function(){function _e(){}return _e.prototype.evaluate=function(){return!this.child.evaluate()},_e}(),RelationalConditionInternal=function(){function _e(){}return _e.prototype.evaluate=function(){for(var _=!!this.valueParser,et=this.getValue,tt=et(this.valueGetterParam),nt=_?this.valueParser(tt):null,it=0;it<this.subCondList.length;it++)if(!this.subCondList[it].evaluate(_?nt:tt))return!1;return!0},_e}();function parseOption(_e,_){if(_e===!0||_e===!1){var et=new ConstConditionInternal;return et.value=_e,et}var tt="";return isObjectNotArray(_e)||throwError(tt),_e.and?parseAndOrOption("and",_e,_):_e.or?parseAndOrOption("or",_e,_):_e.not?parseNotOption(_e,_):parseRelationalOption(_e,_)}function parseAndOrOption(_e,_,et){var tt=_[_e],nt="";isArray$1(tt)||throwError(nt),tt.length||throwError(nt);var it=_e==="and"?new AndConditionInternal:new OrConditionInternal;return it.children=map$1(tt,function(at){return parseOption(at,et)}),it.children.length||throwError(nt),it}function parseNotOption(_e,_){var et=_e.not,tt="";isObjectNotArray(et)||throwError(tt);var nt=new NotConditionInternal;return nt.child=parseOption(et,_),nt.child||throwError(tt),nt}function parseRelationalOption(_e,_){for(var et="",tt=_.prepareGetValue(_e),nt=[],it=keys(_e),at=_e.parser,ot=at?getRawValueParser(at):null,st=0;st<it.length;st++){var dt=it[st];if(!(dt==="parser"||_.valueGetterAttrMap.get(dt))){var ht=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,dt)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[dt]:dt,ct=_e[dt],ut=ot?ot(ct):ct,ft=createFilterComparator(ht,ut)||ht==="reg"&&new RegExpEvaluator(ut);ft||throwError(et),nt.push(ft)}}nt.length||throwError(et);var gt=new RelationalConditionInternal;return gt.valueGetterParam=tt,gt.valueParser=ot,gt.getValue=_.getValue,gt.subCondList=nt,gt}function isObjectNotArray(_e){return isObject$4(_e)&&!isArrayLike(_e)}var ConditionalExpressionParsed=function(){function _e(_,et){this._cond=parseOption(_,et)}return _e.prototype.evaluate=function(){return this._cond.evaluate()},_e}();function parseConditionalExpression(_e,_){return new ConditionalExpressionParsed(_e,_)}var filterTransform={type:"echarts:filter",transform:function(_e){for(var _=_e.upstream,et,tt=parseConditionalExpression(_e.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(ot){var st="",dt=ot.dimension;hasOwn(ot,"dimension")||throwError(st);var ht=_.getDimensionInfo(dt);return ht||throwError(st),{dimIdx:ht.index}},getValue:function(ot){return _.retrieveValueFromItem(et,ot.dimIdx)}}),nt=[],it=0,at=_.count();it<at;it++)et=_.getRawDataItem(it),tt.evaluate()&&nt.push(et);return{data:nt}}},sortTransform={type:"echarts:sort",transform:function(_e){var _=_e.upstream,et=_e.config,tt="",nt=normalizeToArray(et);nt.length||throwError(tt);var it=[];each$f(nt,function(ht){var ct=ht.dimension,ut=ht.order,ft=ht.parser,gt=ht.incomparable;if(ct==null&&throwError(tt),ut!=="asc"&&ut!=="desc"&&throwError(tt),gt&&gt!=="min"&&gt!=="max"){var mt="";throwError(mt)}if(ut!=="asc"&&ut!=="desc"){var vt="";throwError(vt)}var yt=_.getDimensionInfo(ct);yt||throwError(tt);var bt=ft?getRawValueParser(ft):null;ft&&!bt&&throwError(tt),it.push({dimIdx:yt.index,parser:bt,comparator:new SortOrderComparator(ut,gt)})});var at=_.sourceFormat;at!==SOURCE_FORMAT_ARRAY_ROWS&&at!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(tt);for(var ot=[],st=0,dt=_.count();st<dt;st++)ot.push(_.getRawDataItem(st));return ot.sort(function(ht,ct){for(var ut=0;ut<it.length;ut++){var ft=it[ut],gt=_.retrieveValueFromItem(ht,ft.dimIdx),mt=_.retrieveValueFromItem(ct,ft.dimIdx);ft.parser&&(gt=ft.parser(gt),mt=ft.parser(mt));var vt=ft.comparator.evaluate(gt,mt);if(vt!==0)return vt}return 0}),{data:ot}}};function install$1(_e){_e.registerTransform(filterTransform),_e.registerTransform(sortTransform)}var DatasetModel=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type="dataset",et}return _.prototype.init=function(et,tt,nt){_e.prototype.init.call(this,et,tt,nt),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},_.prototype.mergeOption=function(et,tt){_e.prototype.mergeOption.call(this,et,tt),disableTransformOptionMerge(this)},_.prototype.optionUpdated=function(){this._sourceManager.dirty()},_.prototype.getSourceManager=function(){return this._sourceManager},_.type="dataset",_.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},_}(ComponentModel),DatasetView=function(_e){__extends$1(_,_e);function _(){var et=_e!==null&&_e.apply(this,arguments)||this;return et.type="dataset",et}return _.type="dataset",_}(ComponentView);function install(_e){_e.registerComponentModel(DatasetModel),_e.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(_e,_){return Math.abs(_e-_)<1e-5}function pathToBezierCurves(_e){var _=_e.data,et=_e.len(),tt=[],nt,it=0,at=0,ot=0,st=0;function dt(It,Mt){nt&&nt.length>2&&tt.push(nt),nt=[It,Mt]}function ht(It,Mt,Ot,$t){aroundEqual(It,Ot)&&aroundEqual(Mt,$t)||nt.push(It,Mt,Ot,$t,Ot,$t)}function ct(It,Mt,Ot,$t,Lt,kt){var Nt=Math.abs(Mt-It),Vt=Math.tan(Nt/4)*4/3,zt=Mt<It?-1:1,Xt=Math.cos(It),Wt=Math.sin(It),nr=Math.cos(Mt),Jt=Math.sin(Mt),lr=Xt*Lt+Ot,pr=Wt*kt+$t,Zt=nr*Lt+Ot,Kt=Jt*kt+$t,ur=Lt*Vt*zt,ir=kt*Vt*zt;nt.push(lr-ur*Wt,pr+ir*Xt,Zt+ur*Jt,Kt-ir*nr,Zt,Kt)}for(var ut,ft,gt,mt,vt=0;vt<et;){var yt=_[vt++],bt=vt===1;switch(bt&&(it=_[vt],at=_[vt+1],ot=it,st=at,(yt===CMD.L||yt===CMD.C||yt===CMD.Q)&&(nt=[ot,st])),yt){case CMD.M:it=ot=_[vt++],at=st=_[vt++],dt(ot,st);break;case CMD.L:ut=_[vt++],ft=_[vt++],ht(it,at,ut,ft),it=ut,at=ft;break;case CMD.C:nt.push(_[vt++],_[vt++],_[vt++],_[vt++],it=_[vt++],at=_[vt++]);break;case CMD.Q:ut=_[vt++],ft=_[vt++],gt=_[vt++],mt=_[vt++],nt.push(it+2/3*(ut-it),at+2/3*(ft-at),gt+2/3*(ut-gt),mt+2/3*(ft-mt),gt,mt),it=gt,at=mt;break;case CMD.A:var _t=_[vt++],xt=_[vt++],St=_[vt++],Tt=_[vt++],wt=_[vt++],Ct=_[vt++]+wt;vt+=1;var Et=!_[vt++];ut=Math.cos(wt)*St+_t,ft=Math.sin(wt)*Tt+xt,bt?(ot=ut,st=ft,dt(ot,st)):ht(it,at,ut,ft),it=Math.cos(Ct)*St+_t,at=Math.sin(Ct)*Tt+xt;for(var At=(Et?-1:1)*Math.PI/2,Pt=wt;Et?Pt>Ct:Pt<Ct;Pt+=At){var Rt=Et?Math.max(Pt+At,Ct):Math.min(Pt+At,Ct);ct(Pt,Rt,_t,xt,St,Tt)}break;case CMD.R:ot=it=_[vt++],st=at=_[vt++],ut=ot+_[vt++],ft=st+_[vt++],dt(ut,st),ht(ut,st,ut,ft),ht(ut,ft,ot,ft),ht(ot,ft,ot,st),ht(ot,st,ut,st);break;case CMD.Z:nt&&ht(it,at,ot,st),it=ot,at=st;break}}return nt&&nt.length>2&&tt.push(nt),tt}function adpativeBezier(_e,_,et,tt,nt,it,at,ot,st,dt){if(aroundEqual(_e,et)&&aroundEqual(_,tt)&&aroundEqual(nt,at)&&aroundEqual(it,ot)){st.push(at,ot);return}var ht=2/dt,ct=ht*ht,ut=at-_e,ft=ot-_,gt=Math.sqrt(ut*ut+ft*ft);ut/=gt,ft/=gt;var mt=et-_e,vt=tt-_,yt=nt-at,bt=it-ot,_t=mt*mt+vt*vt,xt=yt*yt+bt*bt;if(_t<ct&&xt<ct){st.push(at,ot);return}var St=ut*mt+ft*vt,Tt=-ut*yt-ft*bt,wt=_t-St*St,Ct=xt-Tt*Tt;if(wt<ct&&St>=0&&Ct<ct&&Tt>=0){st.push(at,ot);return}var Et=[],At=[];cubicSubdivide(_e,et,nt,at,.5,Et),cubicSubdivide(_,tt,it,ot,.5,At),adpativeBezier(Et[0],At[0],Et[1],At[1],Et[2],At[2],Et[3],At[3],st,dt),adpativeBezier(Et[4],At[4],Et[5],At[5],Et[6],At[6],Et[7],At[7],st,dt)}function pathToPolygons(_e,_){var et=pathToBezierCurves(_e),tt=[];_=_||1;for(var nt=0;nt<et.length;nt++){var it=et[nt],at=[],ot=it[0],st=it[1];at.push(ot,st);for(var dt=2;dt<it.length;){var ht=it[dt++],ct=it[dt++],ut=it[dt++],ft=it[dt++],gt=it[dt++],mt=it[dt++];adpativeBezier(ot,st,ht,ct,ut,ft,gt,mt,at,_),ot=gt,st=mt}tt.push(at)}return tt}function getDividingGrids(_e,_,et){var tt=_e[_],nt=_e[1-_],it=Math.abs(tt/nt),at=Math.ceil(Math.sqrt(it*et)),ot=Math.floor(et/at);ot===0&&(ot=1,at=et);for(var st=[],dt=0;dt<at;dt++)st.push(ot);var ht=at*ot,ct=et-ht;if(ct>0)for(var dt=0;dt<ct;dt++)st[dt%at]+=1;return st}function divideSector(_e,_,et){for(var tt=_e.r0,nt=_e.r,it=_e.startAngle,at=_e.endAngle,ot=Math.abs(at-it),st=ot*nt,dt=nt-tt,ht=st>Math.abs(dt),ct=getDividingGrids([st,dt],ht?0:1,_),ut=(ht?ot:dt)/ct.length,ft=0;ft<ct.length;ft++)for(var gt=(ht?dt:ot)/ct[ft],mt=0;mt<ct[ft];mt++){var vt={};ht?(vt.startAngle=it+ut*ft,vt.endAngle=it+ut*(ft+1),vt.r0=tt+gt*mt,vt.r=tt+gt*(mt+1)):(vt.startAngle=it+gt*mt,vt.endAngle=it+gt*(mt+1),vt.r0=tt+ut*ft,vt.r=tt+ut*(ft+1)),vt.clockwise=_e.clockwise,vt.cx=_e.cx,vt.cy=_e.cy,et.push(vt)}}function divideRect(_e,_,et){for(var tt=_e.width,nt=_e.height,it=tt>nt,at=getDividingGrids([tt,nt],it?0:1,_),ot=it?"width":"height",st=it?"height":"width",dt=it?"x":"y",ht=it?"y":"x",ct=_e[ot]/at.length,ut=0;ut<at.length;ut++)for(var ft=_e[st]/at[ut],gt=0;gt<at[ut];gt++){var mt={};mt[dt]=ut*ct,mt[ht]=gt*ft,mt[ot]=ct,mt[st]=ft,mt.x+=_e.x,mt.y+=_e.y,et.push(mt)}}function crossProduct2d(_e,_,et,tt){return _e*tt-et*_}function lineLineIntersect(_e,_,et,tt,nt,it,at,ot){var st=et-_e,dt=tt-_,ht=at-nt,ct=ot-it,ut=crossProduct2d(ht,ct,st,dt);if(Math.abs(ut)<1e-6)return null;var ft=_e-nt,gt=_-it,mt=crossProduct2d(ft,gt,ht,ct)/ut;return mt<0||mt>1?null:new Point(mt*st+_e,mt*dt+_)}function projPtOnLine(_e,_,et){var tt=new Point;Point.sub(tt,et,_),tt.normalize();var nt=new Point;Point.sub(nt,_e,_);var it=nt.dot(tt);return it}function addToPoly(_e,_){var et=_e[_e.length-1];et&&et[0]===_[0]&&et[1]===_[1]||_e.push(_)}function splitPolygonByLine(_e,_,et){for(var tt=_e.length,nt=[],it=0;it<tt;it++){var at=_e[it],ot=_e[(it+1)%tt],st=lineLineIntersect(at[0],at[1],ot[0],ot[1],_.x,_.y,et.x,et.y);st&&nt.push({projPt:projPtOnLine(st,_,et),pt:st,idx:it})}if(nt.length<2)return[{points:_e},{points:_e}];nt.sort(function(vt,yt){return vt.projPt-yt.projPt});var dt=nt[0],ht=nt[nt.length-1];if(ht.idx<dt.idx){var ct=dt;dt=ht,ht=ct}for(var ut=[dt.pt.x,dt.pt.y],ft=[ht.pt.x,ht.pt.y],gt=[ut],mt=[ft],it=dt.idx+1;it<=ht.idx;it++)addToPoly(gt,_e[it].slice());addToPoly(gt,ft),addToPoly(gt,ut);for(var it=ht.idx+1;it<=dt.idx+tt;it++)addToPoly(mt,_e[it%tt].slice());return addToPoly(mt,ut),addToPoly(mt,ft),[{points:gt},{points:mt}]}function binaryDividePolygon(_e){var _=_e.points,et=[],tt=[];fromPoints(_,et,tt);var nt=new BoundingRect(et[0],et[1],tt[0]-et[0],tt[1]-et[1]),it=nt.width,at=nt.height,ot=nt.x,st=nt.y,dt=new Point,ht=new Point;return it>at?(dt.x=ht.x=ot+it/2,dt.y=st,ht.y=st+at):(dt.y=ht.y=st+at/2,dt.x=ot,ht.x=ot+it),splitPolygonByLine(_,dt,ht)}function binaryDivideRecursive(_e,_,et,tt){if(et===1)tt.push(_);else{var nt=Math.floor(et/2),it=_e(_);binaryDivideRecursive(_e,it[0],nt,tt),binaryDivideRecursive(_e,it[1],et-nt,tt)}return tt}function clone(_e,_){for(var et=[],tt=0;tt<_;tt++)et.push(clonePath(_e));return et}function copyPathProps(_e,_){_.setStyle(_e.style),_.z=_e.z,_.z2=_e.z2,_.zlevel=_e.zlevel}function polygonConvert(_e){for(var _=[],et=0;et<_e.length;)_.push([_e[et++],_e[et++]]);return _}function split(_e,_){var et=[],tt=_e.shape,nt;switch(_e.type){case"rect":divideRect(tt,_,et),nt=Rect$2;break;case"sector":divideSector(tt,_,et),nt=Sector;break;case"circle":divideSector({r0:0,r:tt.r,startAngle:0,endAngle:Math.PI*2,cx:tt.cx,cy:tt.cy},_,et),nt=Sector;break;default:var it=_e.getComputedTransform(),at=it?Math.sqrt(Math.max(it[0]*it[0]+it[1]*it[1],it[2]*it[2]+it[3]*it[3])):1,ot=map$1(pathToPolygons(_e.getUpdatedPathProxy(),at),function(yt){return polygonConvert(yt)}),st=ot.length;if(st===0)binaryDivideRecursive(binaryDividePolygon,{points:ot[0]},_,et);else if(st===_)for(var dt=0;dt<st;dt++)et.push({points:ot[dt]});else{var ht=0,ct=map$1(ot,function(yt){var bt=[],_t=[];fromPoints(yt,bt,_t);var xt=(_t[1]-bt[1])*(_t[0]-bt[0]);return ht+=xt,{poly:yt,area:xt}});ct.sort(function(yt,bt){return bt.area-yt.area});for(var ut=_,dt=0;dt<st;dt++){var ft=ct[dt];if(ut<=0)break;var gt=dt===st-1?ut:Math.ceil(ft.area/ht*_);gt<0||(binaryDivideRecursive(binaryDividePolygon,{points:ft.poly},gt,et),ut-=gt)}}nt=Polygon;break}if(!nt)return clone(_e,_);for(var mt=[],dt=0;dt<et.length;dt++){var vt=new nt;vt.setShape(et[dt]),copyPathProps(_e,vt),mt.push(vt)}return mt}function alignSubpath(_e,_){var et=_e.length,tt=_.length;if(et===tt)return[_e,_];for(var nt=[],it=[],at=et<tt?_e:_,ot=Math.min(et,tt),st=Math.abs(tt-et)/6,dt=(ot-2)/6,ht=Math.ceil(st/dt)+1,ct=[at[0],at[1]],ut=st,ft=2;ft<ot;){var gt=at[ft-2],mt=at[ft-1],vt=at[ft++],yt=at[ft++],bt=at[ft++],_t=at[ft++],xt=at[ft++],St=at[ft++];if(ut<=0){ct.push(vt,yt,bt,_t,xt,St);continue}for(var Tt=Math.min(ut,ht-1)+1,wt=1;wt<=Tt;wt++){var Ct=wt/Tt;cubicSubdivide(gt,vt,bt,xt,Ct,nt),cubicSubdivide(mt,yt,_t,St,Ct,it),gt=nt[3],mt=it[3],ct.push(nt[1],it[1],nt[2],it[2],gt,mt),vt=nt[5],yt=it[5],bt=nt[6],_t=it[6]}ut-=Tt-1}return at===_e?[ct,_]:[_e,ct]}function createSubpath(_e,_){for(var et=_e.length,tt=_e[et-2],nt=_e[et-1],it=[],at=0;at<_.length;)it[at++]=tt,it[at++]=nt;return it}function alignBezierCurves(_e,_){for(var et,tt,nt,it=[],at=[],ot=0;ot<Math.max(_e.length,_.length);ot++){var st=_e[ot],dt=_[ot],ht=void 0,ct=void 0;st?dt?(et=alignSubpath(st,dt),ht=et[0],ct=et[1],tt=ht,nt=ct):(ct=createSubpath(nt||st,st),ht=st):(ht=createSubpath(tt||dt,dt),ct=dt),it.push(ht),at.push(ct)}return[it,at]}function centroid(_e){for(var _=0,et=0,tt=0,nt=_e.length,it=0,at=nt-2;it<nt;at=it,it+=2){var ot=_e[at],st=_e[at+1],dt=_e[it],ht=_e[it+1],ct=ot*ht-dt*st;_+=ct,et+=(ot+dt)*ct,tt+=(st+ht)*ct}return _===0?[_e[0]||0,_e[1]||0]:[et/_/3,tt/_/3,_]}function findBestRingOffset(_e,_,et,tt){for(var nt=(_e.length-2)/6,it=1/0,at=0,ot=_e.length,st=ot-2,dt=0;dt<nt;dt++){for(var ht=dt*6,ct=0,ut=0;ut<ot;ut+=2){var ft=ut===0?ht:(ht+ut-2)%st+2,gt=_e[ft]-et[0],mt=_e[ft+1]-et[1],vt=_[ut]-tt[0],yt=_[ut+1]-tt[1],bt=vt-gt,_t=yt-mt;ct+=bt*bt+_t*_t}ct<it&&(it=ct,at=dt)}return at}function reverse(_e){for(var _=[],et=_e.length,tt=0;tt<et;tt+=2)_[tt]=_e[et-tt-2],_[tt+1]=_e[et-tt-1];return _}function findBestMorphingRotation(_e,_,et,tt){for(var nt=[],it,at=0;at<_e.length;at++){var ot=_e[at],st=_[at],dt=centroid(ot),ht=centroid(st);it==null&&(it=dt[2]<0!=ht[2]<0);var ct=[],ut=[],ft=0,gt=1/0,mt=[],vt=ot.length;it&&(ot=reverse(ot));for(var yt=findBestRingOffset(ot,st,dt,ht)*6,bt=vt-2,_t=0;_t<bt;_t+=2){var xt=(yt+_t)%bt+2;ct[_t+2]=ot[xt]-dt[0],ct[_t+3]=ot[xt+1]-dt[1]}ct[0]=ot[yt]-dt[0],ct[1]=ot[yt+1]-dt[1];for(var St=tt/et,Tt=-tt/2;Tt<=tt/2;Tt+=St){for(var wt=Math.sin(Tt),Ct=Math.cos(Tt),Et=0,_t=0;_t<ot.length;_t+=2){var At=ct[_t],Pt=ct[_t+1],Rt=st[_t]-ht[0],It=st[_t+1]-ht[1],Mt=Rt*Ct-It*wt,Ot=Rt*wt+It*Ct;mt[_t]=Mt,mt[_t+1]=Ot;var $t=Mt-At,Lt=Ot-Pt;Et+=$t*$t+Lt*Lt}if(Et<gt){gt=Et,ft=Tt;for(var kt=0;kt<mt.length;kt++)ut[kt]=mt[kt]}}nt.push({from:ct,to:ut,fromCp:dt,toCp:ht,rotation:-ft})}return nt}function isCombineMorphing(_e){return _e.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(_e,_,et){var tt=SAVED_METHOD_PREFIX+_,nt=_e[tt]||_e[_];_e[tt]||(_e[tt]=_e[_]);var it=et.replace,at=et.after,ot=et.before;_e[_]=function(){var st=arguments,dt;return ot&&ot.apply(this,st),it?dt=it.apply(this,st):dt=nt.apply(this,st),at&&at.apply(this,st),dt}}function restoreMethod(_e,_){var et=SAVED_METHOD_PREFIX+_;_e[et]&&(_e[_]=_e[et],_e[et]=null)}function applyTransformOnBeziers(_e,_){for(var et=0;et<_e.length;et++)for(var tt=_e[et],nt=0;nt<tt.length;){var it=tt[nt],at=tt[nt+1];tt[nt++]=_[0]*it+_[2]*at+_[4],tt[nt++]=_[1]*it+_[3]*at+_[5]}}function prepareMorphPath(_e,_){var et=_e.getUpdatedPathProxy(),tt=_.getUpdatedPathProxy(),nt=alignBezierCurves(pathToBezierCurves(et),pathToBezierCurves(tt)),it=nt[0],at=nt[1],ot=_e.getComputedTransform(),st=_.getComputedTransform();function dt(){this.transform=null}ot&&applyTransformOnBeziers(it,ot),st&&applyTransformOnBeziers(at,st),saveAndModifyMethod(_,"updateTransform",{replace:dt}),_.transform=null;var ht=findBestMorphingRotation(it,at,10,Math.PI),ct=[];saveAndModifyMethod(_,"buildPath",{replace:function(ut){for(var ft=_.__morphT,gt=1-ft,mt=[],vt=0;vt<ht.length;vt++){var yt=ht[vt],bt=yt.from,_t=yt.to,xt=yt.rotation*ft,St=yt.fromCp,Tt=yt.toCp,wt=Math.sin(xt),Ct=Math.cos(xt);lerp$1(mt,St,Tt,ft);for(var Et=0;Et<bt.length;Et+=2){var At=bt[Et],Pt=bt[Et+1],Rt=_t[Et],It=_t[Et+1],Mt=At*gt+Rt*ft,Ot=Pt*gt+It*ft;ct[Et]=Mt*Ct-Ot*wt+mt[0],ct[Et+1]=Mt*wt+Ot*Ct+mt[1]}var $t=ct[0],Lt=ct[1];ut.moveTo($t,Lt);for(var Et=2;Et<bt.length;){var Rt=ct[Et++],It=ct[Et++],kt=ct[Et++],Nt=ct[Et++],Vt=ct[Et++],zt=ct[Et++];$t===Rt&&Lt===It&&kt===Vt&&Nt===zt?ut.lineTo(Vt,zt):ut.bezierCurveTo(Rt,It,kt,Nt,Vt,zt),$t=Vt,Lt=zt}}}})}function morphPath(_e,_,et){if(!_e||!_)return _;var tt=et.done,nt=et.during;prepareMorphPath(_e,_),_.__morphT=0;function it(){restoreMethod(_,"buildPath"),restoreMethod(_,"updateTransform"),_.__morphT=-1,_.createPathProxy(),_.dirtyShape()}return _.animateTo({__morphT:1},defaults({during:function(at){_.dirtyShape(),nt&&nt(at)},done:function(){it(),tt&&tt()}},et)),_}function hilbert(_e,_,et,tt,nt,it){var at=16;_e=nt===et?0:Math.round(32767*(_e-et)/(nt-et)),_=it===tt?0:Math.round(32767*(_-tt)/(it-tt));for(var ot=0,st,dt=(1<<at)/2;dt>0;dt/=2){var ht=0,ct=0;(_e&dt)>0&&(ht=1),(_&dt)>0&&(ct=1),ot+=dt*dt*(3*ht^ct),ct===0&&(ht===1&&(_e=dt-1-_e,_=dt-1-_),st=_e,_e=_,_=st)}return ot}function sortPaths(_e){var _=1/0,et=1/0,tt=-1/0,nt=-1/0,it=map$1(_e,function(ot){var st=ot.getBoundingRect(),dt=ot.getComputedTransform(),ht=st.x+st.width/2+(dt?dt[4]:0),ct=st.y+st.height/2+(dt?dt[5]:0);return _=Math.min(ht,_),et=Math.min(ct,et),tt=Math.max(ht,tt),nt=Math.max(ct,nt),[ht,ct]}),at=map$1(it,function(ot,st){return{cp:ot,z:hilbert(ot[0],ot[1],_,et,tt,nt),path:_e[st]}});return at.sort(function(ot,st){return ot.z-st.z}).map(function(ot){return ot.path})}function defaultDividePath(_e){return split(_e.path,_e.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(_e,_,et){var tt=[];function nt(St){for(var Tt=0;Tt<St.length;Tt++){var wt=St[Tt];isCombineMorphing(wt)?nt(wt.childrenRef()):wt instanceof Path&&tt.push(wt)}}nt(_e);var it=tt.length;if(!it)return createEmptyReturn();var at=et.dividePath||defaultDividePath,ot=at({path:_,count:it});if(ot.length!==it)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();tt=sortPaths(tt),ot=sortPaths(ot);for(var st=et.done,dt=et.during,ht=et.individualDelay,ct=new Transformable,ut=0;ut<it;ut++){var ft=tt[ut],gt=ot[ut];gt.parent=_,gt.copyTransform(ct),ht||prepareMorphPath(ft,gt)}_.__isCombineMorphing=!0,_.childrenRef=function(){return ot};function mt(St){for(var Tt=0;Tt<ot.length;Tt++)ot[Tt].addSelfToZr(St)}saveAndModifyMethod(_,"addSelfToZr",{after:function(St){mt(St)}}),saveAndModifyMethod(_,"removeSelfFromZr",{after:function(St){for(var Tt=0;Tt<ot.length;Tt++)ot[Tt].removeSelfFromZr(St)}});function vt(){_.__isCombineMorphing=!1,_.__morphT=-1,_.childrenRef=null,restoreMethod(_,"addSelfToZr"),restoreMethod(_,"removeSelfFromZr")}var yt=ot.length;if(ht)for(var bt=yt,_t=function(){bt--,bt===0&&(vt(),st&&st())},ut=0;ut<yt;ut++){var xt=ht?defaults({delay:(et.delay||0)+ht(ut,yt,tt[ut],ot[ut]),done:_t},et):et;morphPath(tt[ut],ot[ut],xt)}else _.__morphT=0,_.animateTo({__morphT:1},defaults({during:function(St){for(var Tt=0;Tt<yt;Tt++){var wt=ot[Tt];wt.__morphT=_.__morphT,wt.dirtyShape()}dt&&dt(St)},done:function(){vt();for(var St=0;St<_e.length;St++)restoreMethod(_e[St],"updateTransform");st&&st()}},et));return _.__zr&&mt(_.__zr),{fromIndividuals:tt,toIndividuals:ot,count:yt}}function separateMorph(_e,_,et){var tt=_.length,nt=[],it=et.dividePath||defaultDividePath;function at(ft){for(var gt=0;gt<ft.length;gt++){var mt=ft[gt];isCombineMorphing(mt)?at(mt.childrenRef()):mt instanceof Path&&nt.push(mt)}}if(isCombineMorphing(_e)){at(_e.childrenRef());var ot=nt.length;if(ot<tt)for(var st=0,dt=ot;dt<tt;dt++)nt.push(clonePath(nt[st++%ot]));nt.length=tt}else{nt=it({path:_e,count:tt});for(var ht=_e.getComputedTransform(),dt=0;dt<nt.length;dt++)nt[dt].setLocalTransform(ht);if(nt.length!==tt)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}nt=sortPaths(nt),_=sortPaths(_);for(var ct=et.individualDelay,dt=0;dt<tt;dt++){var ut=ct?defaults({delay:(et.delay||0)+ct(dt,tt,nt[dt],_[dt])},et):et;morphPath(nt[dt],_[dt],ut)}return{fromIndividuals:nt,toIndividuals:_,count:_.length}}function isMultiple(_e){return isArray$1(_e[0])}function prepareMorphBatches(_e,_){for(var et=[],tt=_e.length,nt=0;nt<tt;nt++)et.push({one:_e[nt],many:[]});for(var nt=0;nt<_.length;nt++){var it=_[nt].length,at=void 0;for(at=0;at<it;at++)et[at%tt].many.push(_[nt][at])}for(var ot=0,nt=tt-1;nt>=0;nt--)if(!et[nt].many.length){var st=et[ot].many;if(st.length<=1)if(ot)ot=0;else return et;var it=st.length,dt=Math.ceil(it/2);et[nt].many=st.slice(dt,it),et[ot].many=st.slice(0,dt),ot++}return et}var pathDividers={clone:function(_e){for(var _=[],et=1-Math.pow(1-_e.path.style.opacity,1/_e.count),tt=0;tt<_e.count;tt++){var nt=clonePath(_e.path);nt.setStyle("opacity",et),_.push(nt)}return _},split:null};function applyMorphAnimation(_e,_,et,tt,nt,it){if(!_e.length||!_.length)return;var at=getAnimationConfig("update",tt,nt);if(!(at&&at.duration>0))return;var ot=tt.getModel("universalTransition").get("delay"),st=Object.assign({setToFinal:!0},at),dt,ht;isMultiple(_e)&&(dt=_e,ht=_),isMultiple(_)&&(dt=_,ht=_e);function ct(yt,bt,_t,xt,St){var Tt=yt.many,wt=yt.one;if(Tt.length===1&&!St){var Ct=bt?Tt[0]:wt,Et=bt?wt:Tt[0];if(isCombineMorphing(Ct))ct({many:[Ct],one:Et},!0,_t,xt,!0);else{var At=ot?defaults({delay:ot(_t,xt)},st):st;morphPath(Ct,Et,At),it(Ct,Et,Ct,Et,At)}}else for(var Pt=defaults({dividePath:pathDividers[et],individualDelay:ot&&function(Lt,kt,Nt,Vt){return ot(Lt+_t,xt)}},st),Rt=bt?combineMorph(Tt,wt,Pt):separateMorph(wt,Tt,Pt),It=Rt.fromIndividuals,Mt=Rt.toIndividuals,Ot=It.length,$t=0;$t<Ot;$t++){var At=ot?defaults({delay:ot($t,Ot)},st):st;it(It[$t],Mt[$t],bt?Tt[$t]:yt.one,bt?yt.one:Tt[$t],At)}}for(var ut=dt?dt===_e:_e.length>_.length,ft=dt?prepareMorphBatches(ht,dt):prepareMorphBatches(ut?_:_e,[ut?_e:_]),gt=0,mt=0;mt<ft.length;mt++)gt+=ft[mt].many.length;for(var vt=0,mt=0;mt<ft.length;mt++)ct(ft[mt],ut,vt,gt),vt+=ft[mt].many.length}function getPathList(_e){if(!_e)return[];if(isArray$1(_e)){for(var _=[],et=0;et<_e.length;et++)_.push(getPathList(_e[et]));return _}var tt=[];return _e.traverse(function(nt){nt instanceof Path&&!nt.disableMorphing&&!nt.invisible&&!nt.ignore&&tt.push(nt)}),tt}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(_e,_){for(var et=_e.dimensions,tt=0;tt<et.length;tt++){var nt=_e.getDimensionInfo(et[tt]);if(nt&&nt.otherDims[_]===0)return et[tt]}}function getValueByDimension(_e,_,et){var tt=_e.getDimensionInfo(et),nt=tt&&tt.ordinalMeta;if(tt){var it=_e.get(tt.name,_);return nt&&nt.categories[it]||it+""}}function getGroupId(_e,_,et,tt){var nt=tt?"itemChildGroupId":"itemGroupId",it=getDimension(_e,nt);if(it){var at=getValueByDimension(_e,_,it);return at}var ot=_e.getRawDataItem(_),st=tt?"childGroupId":"groupId";if(ot&&ot[st])return ot[st]+"";if(!tt)return et||_e.getId(_)}function flattenDataDiffItems(_e){var _=[];return each$f(_e,function(et){var tt=et.data,nt=et.dataGroupId;if(!(tt.count()>DATA_COUNT_THRESHOLD))for(var it=tt.getIndices(),at=0;at<it.length;at++)_.push({data:tt,groupId:getGroupId(tt,at,nt,!1),childGroupId:getGroupId(tt,at,nt,!0),divide:et.divide,dataIndex:at})}),_}function fadeInElement(_e,_,et){_e.traverse(function(tt){tt instanceof Path&&initProps(tt,{style:{opacity:0}},_,{dataIndex:et,isFrom:!0})})}function removeEl(_e){if(_e.parent){var _=_e.getComputedTransform();_e.setLocalTransform(_),_e.parent.remove(_e)}}function stopAnimation(_e){_e.stopAnimation(),_e.isGroup&&_e.traverse(function(_){_.stopAnimation()})}function animateElementStyles(_e,_,et){var tt=getAnimationConfig("update",et,_);tt&&_e.traverse(function(nt){if(nt instanceof Displayable){var it=getOldStyle(nt);it&&nt.animateFrom({style:it},tt)}})}function isAllIdSame(_e,_){var et=_e.length;if(et!==_.length)return!1;for(var tt=0;tt<et;tt++){var nt=_e[tt],it=_[tt];if(nt.data.getId(nt.dataIndex)!==it.data.getId(it.dataIndex))return!1}return!0}function transitionBetween(_e,_,et){var tt=flattenDataDiffItems(_e),nt=flattenDataDiffItems(_);function it(_t,xt,St,Tt,wt){(St||_t)&&xt.animateFrom({style:St&&St!==_t?extend(extend({},St.style),_t.style):_t.style},wt)}var at=!1,ot=TRANSITION_NONE,st=createHashMap(),dt=createHashMap();tt.forEach(function(_t){_t.groupId&&st.set(_t.groupId,!0),_t.childGroupId&&dt.set(_t.childGroupId,!0)});for(var ht=0;ht<nt.length;ht++){var ct=nt[ht].groupId;if(dt.get(ct)){ot=TRANSITION_P2C;break}var ut=nt[ht].childGroupId;if(ut&&st.get(ut)){ot=TRANSITION_C2P;break}}function ft(_t,xt){return function(St){var Tt=St.data,wt=St.dataIndex;return xt?Tt.getId(wt):_t?ot===TRANSITION_P2C?St.childGroupId:St.groupId:ot===TRANSITION_C2P?St.childGroupId:St.groupId}}var gt=isAllIdSame(tt,nt),mt={};if(!gt)for(var ht=0;ht<nt.length;ht++){var vt=nt[ht],yt=vt.data.getItemGraphicEl(vt.dataIndex);yt&&(mt[yt.id]=!0)}function bt(_t,xt){var St=tt[xt],Tt=nt[_t],wt=Tt.data.hostModel,Ct=St.data.getItemGraphicEl(St.dataIndex),Et=Tt.data.getItemGraphicEl(Tt.dataIndex);if(Ct===Et){Et&&animateElementStyles(Et,Tt.dataIndex,wt);return}Ct&&mt[Ct.id]||Et&&(stopAnimation(Et),Ct?(stopAnimation(Ct),removeEl(Ct),at=!0,applyMorphAnimation(getPathList(Ct),getPathList(Et),Tt.divide,wt,_t,it)):fadeInElement(Et,wt,_t))}new DataDiffer(tt,nt,ft(!0,gt),ft(!1,gt),null,"multiple").update(bt).updateManyToOne(function(_t,xt){var St=nt[_t],Tt=St.data,wt=Tt.hostModel,Ct=Tt.getItemGraphicEl(St.dataIndex),Et=filter$1(map$1(xt,function(At){return tt[At].data.getItemGraphicEl(tt[At].dataIndex)}),function(At){return At&&At!==Ct&&!mt[At.id]});Ct&&(stopAnimation(Ct),Et.length?(each$f(Et,function(At){stopAnimation(At),removeEl(At)}),at=!0,applyMorphAnimation(getPathList(Et),getPathList(Ct),St.divide,wt,_t,it)):fadeInElement(Ct,wt,St.dataIndex))}).updateOneToMany(function(_t,xt){var St=tt[xt],Tt=St.data.getItemGraphicEl(St.dataIndex);if(!(Tt&&mt[Tt.id])){var wt=filter$1(map$1(_t,function(Et){return nt[Et].data.getItemGraphicEl(nt[Et].dataIndex)}),function(Et){return Et&&Et!==Tt}),Ct=nt[_t[0]].data.hostModel;wt.length&&(each$f(wt,function(Et){return stopAnimation(Et)}),Tt?(stopAnimation(Tt),removeEl(Tt),at=!0,applyMorphAnimation(getPathList(Tt),getPathList(wt),St.divide,Ct,_t[0],it)):each$f(wt,function(Et){return fadeInElement(Et,Ct,_t[0])}))}}).updateManyToMany(function(_t,xt){new DataDiffer(xt,_t,function(St){return tt[St].data.getId(tt[St].dataIndex)},function(St){return nt[St].data.getId(nt[St].dataIndex)}).update(function(St,Tt){bt(_t[St],xt[Tt])}).execute()}).execute(),at&&each$f(_,function(_t){var xt=_t.data,St=xt.hostModel,Tt=St&&et.getViewOfSeriesModel(St),wt=getAnimationConfig("update",St,0);Tt&&St.isAnimationEnabled()&&wt&&wt.duration>0&&Tt.group.traverse(function(Ct){Ct instanceof Path&&!Ct.animators.length&&Ct.animateFrom({style:{opacity:0}},wt)})})}function getSeriesTransitionKey(_e){var _=_e.getModel("universalTransition").get("seriesKey");return _||_e.id}function convertArraySeriesKeyToString(_e){return isArray$1(_e)?_e.sort().join(","):_e}function getDivideShapeFromData(_e){if(_e.hostModel)return _e.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(_e,_){var et=createHashMap(),tt=createHashMap(),nt=createHashMap();return each$f(_e.oldSeries,function(it,at){var ot=_e.oldDataGroupIds[at],st=_e.oldData[at],dt=getSeriesTransitionKey(it),ht=convertArraySeriesKeyToString(dt);tt.set(ht,{dataGroupId:ot,data:st}),isArray$1(dt)&&each$f(dt,function(ct){nt.set(ct,{key:ht,dataGroupId:ot,data:st})})}),each$f(_.updatedSeries,function(it){if(it.isUniversalTransitionEnabled()&&it.isAnimationEnabled()){var at=it.get("dataGroupId"),ot=it.getData(),st=getSeriesTransitionKey(it),dt=convertArraySeriesKeyToString(st),ht=tt.get(dt);if(ht)et.set(dt,{oldSeries:[{dataGroupId:ht.dataGroupId,divide:getDivideShapeFromData(ht.data),data:ht.data}],newSeries:[{dataGroupId:at,divide:getDivideShapeFromData(ot),data:ot}]});else if(isArray$1(st)){var ct=[];each$f(st,function(gt){var mt=tt.get(gt);mt.data&&ct.push({dataGroupId:mt.dataGroupId,divide:getDivideShapeFromData(mt.data),data:mt.data})}),ct.length&&et.set(dt,{oldSeries:ct,newSeries:[{dataGroupId:at,data:ot,divide:getDivideShapeFromData(ot)}]})}else{var ut=nt.get(st);if(ut){var ft=et.get(ut.key);ft||(ft={oldSeries:[{dataGroupId:ut.dataGroupId,data:ut.data,divide:getDivideShapeFromData(ut.data)}],newSeries:[]},et.set(ut.key,ft)),ft.newSeries.push({dataGroupId:at,data:ot,divide:getDivideShapeFromData(ot)})}}}}),et}function querySeries(_e,_){for(var et=0;et<_e.length;et++){var tt=_.seriesIndex!=null&&_.seriesIndex===_e[et].seriesIndex||_.seriesId!=null&&_.seriesId===_e[et].id;if(tt)return et}}function transitionSeriesFromOpt(_e,_,et,tt){var nt=[],it=[];each$f(normalizeToArray(_e.from),function(at){var ot=querySeries(_.oldSeries,at);ot>=0&&nt.push({dataGroupId:_.oldDataGroupIds[ot],data:_.oldData[ot],divide:getDivideShapeFromData(_.oldData[ot]),groupIdDim:at.dimension})}),each$f(normalizeToArray(_e.to),function(at){var ot=querySeries(et.updatedSeries,at);if(ot>=0){var st=et.updatedSeries[ot].getData();it.push({dataGroupId:_.oldDataGroupIds[ot],data:st,divide:getDivideShapeFromData(st),groupIdDim:at.dimension})}}),nt.length>0&&it.length>0&&transitionBetween(nt,it,tt)}function installUniversalTransition(_e){_e.registerUpdateLifecycle("series:beforeupdate",function(_,et,tt){each$f(normalizeToArray(tt.seriesTransition),function(nt){each$f(normalizeToArray(nt.to),function(it){for(var at=tt.updatedSeries,ot=0;ot<at.length;ot++)(it.seriesIndex!=null&&it.seriesIndex===at[ot].seriesIndex||it.seriesId!=null&&it.seriesId===at[ot].id)&&(at[ot][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),_e.registerUpdateLifecycle("series:transition",function(_,et,tt){var nt=getUniversalTransitionGlobalStore(et);if(nt.oldSeries&&tt.updatedSeries&&tt.optionChanged){var it=tt.seriesTransition;if(it)each$f(normalizeToArray(it),function(ft){transitionSeriesFromOpt(ft,nt,tt,et)});else{var at=findTransitionSeriesBatches(nt,tt);each$f(at.keys(),function(ft){var gt=at.get(ft);transitionBetween(gt.oldSeries,gt.newSeries,et)})}each$f(tt.updatedSeries,function(ft){ft[SERIES_UNIVERSAL_TRANSITION_PROP]&&(ft[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var ot=_.getSeries(),st=nt.oldSeries=[],dt=nt.oldDataGroupIds=[],ht=nt.oldData=[],ct=0;ct<ot.length;ct++){var ut=ot[ct].getData();ut.count()<DATA_COUNT_THRESHOLD&&(st.push(ot[ct]),dt.push(ot[ct].get("dataGroupId")),ht.push(ut))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);const echarts=Object.freeze(Object.defineProperty({__proto__:null,Axis,ChartView,ComponentModel,ComponentView,List:SeriesData,Model,PRIORITY,SeriesModel,color:color$1,connect,dataTool,dependencies,disConnect,disconnect,dispose,env,extendChartView,extendComponentModel,extendComponentView,extendSeriesModel,format,getCoordinateSystemDimensions,getInstanceByDom,getInstanceById,getMap,graphic,helper,init:init$1,innerDrawElementOnCanvas:brushSingle,matrix,number,parseGeoJSON,parseGeoJson:parseGeoJSON,registerAction,registerCoordinateSystem,registerLayout,registerLoading,registerLocale,registerMap:registerMap$1,registerPostInit,registerPostUpdate,registerPreprocessor,registerProcessor,registerTheme,registerTransform,registerUpdateLifecycle,registerVisual,setCanvasCreator,setPlatformAPI,throttle,time,use,util,vector,version,zrUtil:util$1,zrender},Symbol.toStringTag,{value:"Module"}));var lib={},sensorPool={},id={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var _=1,et=function(){return"".concat(_++)};_e.default=et})(id);var sensors={},object={},debounce={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var _=function(tt){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,it=null;return function(){for(var at=this,ot=arguments.length,st=new Array(ot),dt=0;dt<ot;dt++)st[dt]=arguments[dt];clearTimeout(it),it=setTimeout(function(){tt.apply(at,st)},nt)}};_e.default=_})(debounce);var constant={};Object.defineProperty(constant,"__esModule",{value:!0});constant.SizeSensorId=constant.SensorTabIndex=constant.SensorClassName=void 0;var SizeSensorId="size-sensor-id";constant.SizeSensorId=SizeSensorId;var SensorClassName="size-sensor-object";constant.SensorClassName=SensorClassName;var SensorTabIndex="-1";constant.SensorTabIndex=SensorTabIndex;Object.defineProperty(object,"__esModule",{value:!0});object.createSensor=void 0;var _debounce$1=_interopRequireDefault$2(debounce),_constant$2=constant;function _interopRequireDefault$2(_e){return _e.__esModule?_e:{default:_e}}var createSensor$2=function _e(_,et){var tt=void 0,nt=[],it=function(){getComputedStyle(_).position==="static"&&(_.style.position="relative");var ct=document.createElement("object");return ct.onload=function(){ct.contentDocument.defaultView.addEventListener("resize",at),at()},ct.style.display="block",ct.style.position="absolute",ct.style.top="0",ct.style.left="0",ct.style.height="100%",ct.style.width="100%",ct.style.overflow="hidden",ct.style.pointerEvents="none",ct.style.zIndex="-1",ct.style.opacity="0",ct.setAttribute("class",_constant$2.SensorClassName),ct.setAttribute("tabindex",_constant$2.SensorTabIndex),ct.type="text/html",_.appendChild(ct),ct.data="about:blank",ct},at=(0,_debounce$1.default)(function(){nt.forEach(function(ht){ht(_)})}),ot=function(ct){tt||(tt=it()),nt.indexOf(ct)===-1&&nt.push(ct)},st=function(){tt&&tt.parentNode&&(tt.contentDocument&&tt.contentDocument.defaultView.removeEventListener("resize",at),tt.parentNode.removeChild(tt),_.removeAttribute(_constant$2.SizeSensorId),tt=void 0,nt=[],et&&et())},dt=function(ct){var ut=nt.indexOf(ct);ut!==-1&&nt.splice(ut,1),nt.length===0&&tt&&st()};return{element:_,bind:ot,destroy:st,unbind:dt}};object.createSensor=createSensor$2;var resizeObserver={};Object.defineProperty(resizeObserver,"__esModule",{value:!0});resizeObserver.createSensor=void 0;var _constant$1=constant,_debounce=_interopRequireDefault$1(debounce);function _interopRequireDefault$1(_e){return _e.__esModule?_e:{default:_e}}var createSensor$1=function _e(_,et){var tt=void 0,nt=[],it=(0,_debounce.default)(function(){nt.forEach(function(ht){ht(_)})}),at=function(){var ct=new ResizeObserver(it);return ct.observe(_),it(),ct},ot=function(ct){tt||(tt=at()),nt.indexOf(ct)===-1&&nt.push(ct)},st=function(){tt.disconnect(),nt=[],tt=void 0,_.removeAttribute(_constant$1.SizeSensorId),et&&et()},dt=function(ct){var ut=nt.indexOf(ct);ut!==-1&&nt.splice(ut,1),nt.length===0&&tt&&st()};return{element:_,bind:ot,destroy:st,unbind:dt}};resizeObserver.createSensor=createSensor$1;Object.defineProperty(sensors,"__esModule",{value:!0});sensors.createSensor=void 0;var _object=object,_resizeObserver=resizeObserver,createSensor=typeof ResizeObserver<"u"?_resizeObserver.createSensor:_object.createSensor;sensors.createSensor=createSensor;Object.defineProperty(sensorPool,"__esModule",{value:!0});sensorPool.removeSensor=sensorPool.getSensor=sensorPool.Sensors=void 0;var _id=_interopRequireDefault(id),_sensors=sensors,_constant=constant;function _interopRequireDefault(_e){return _e.__esModule?_e:{default:_e}}var Sensors={};sensorPool.Sensors=Sensors;function clean(_e){_e&&Sensors[_e]&&delete Sensors[_e]}var getSensor=function _e(_){var et=_.getAttribute(_constant.SizeSensorId);if(et&&Sensors[et])return Sensors[et];var tt=(0,_id.default)();_.setAttribute(_constant.SizeSensorId,tt);var nt=(0,_sensors.createSensor)(_,function(){return clean(tt)});return Sensors[tt]=nt,nt};sensorPool.getSensor=getSensor;var removeSensor=function _e(_){var et=_.element.getAttribute(_constant.SizeSensorId);_.destroy(),clean(et)};sensorPool.removeSensor=removeSensor;Object.defineProperty(lib,"__esModule",{value:!0});lib.ver=clear_1=lib.clear=bind_1=lib.bind=void 0;var _sensorPool=sensorPool,bind=function _e(_,et){var tt=(0,_sensorPool.getSensor)(_);return tt.bind(et),function(){tt.unbind(et)}},bind_1=lib.bind=bind,clear=function _e(_){var et=(0,_sensorPool.getSensor)(_);(0,_sensorPool.removeSensor)(et)},clear_1=lib.clear=clear,ver="1.0.2";lib.ver=ver;function pick(_e,_){var et={};return _.forEach(function(tt){et[tt]=_e[tt]}),et}function isFunction$2(_e){return typeof _e=="function"}function isString(_e){return typeof _e=="string"}var fastDeepEqual=function _e(_,et){if(_===et)return!0;if(_&&et&&typeof _=="object"&&typeof et=="object"){if(_.constructor!==et.constructor)return!1;var tt,nt,it;if(Array.isArray(_)){if(tt=_.length,tt!=et.length)return!1;for(nt=tt;nt--!==0;)if(!_e(_[nt],et[nt]))return!1;return!0}if(_.constructor===RegExp)return _.source===et.source&&_.flags===et.flags;if(_.valueOf!==Object.prototype.valueOf)return _.valueOf()===et.valueOf();if(_.toString!==Object.prototype.toString)return _.toString()===et.toString();if(it=Object.keys(_),tt=it.length,tt!==Object.keys(et).length)return!1;for(nt=tt;nt--!==0;)if(!Object.prototype.hasOwnProperty.call(et,it[nt]))return!1;for(nt=tt;nt--!==0;){var at=it[nt];if(!_e(_[at],et[at]))return!1}return!0}return _!==_&&et!==et};const isEqual$1=getDefaultExportFromCjs(fastDeepEqual);var EChartsReactCore=function(_e){__extends$2(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.echarts=et.echarts,tt.ele=null,tt.isInitialResize=!0,tt}return _.prototype.componentDidMount=function(){this.renderNewEcharts()},_.prototype.componentDidUpdate=function(et){var tt=this.props.shouldSetOption;if(!(isFunction$2(tt)&&!tt(et,this.props))){if(!isEqual$1(et.theme,this.props.theme)||!isEqual$1(et.opts,this.props.opts)||!isEqual$1(et.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var nt=["option","notMerge","lazyUpdate","showLoading","loadingOption"];isEqual$1(pick(this.props,nt),pick(et,nt))||this.updateEChartsOption(),(!isEqual$1(et.style,this.props.style)||!isEqual$1(et.className,this.props.className))&&this.resize()}},_.prototype.componentWillUnmount=function(){this.dispose()},_.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},_.prototype.dispose=function(){if(this.ele){try{clear_1(this.ele)}catch(et){console.warn(et)}this.echarts.dispose(this.ele)}},_.prototype.renderNewEcharts=function(){var et=this,tt=this.props,nt=tt.onEvents,it=tt.onChartReady,at=this.updateEChartsOption();this.bindEvents(at,nt||{}),isFunction$2(it)&&it(at),this.ele&&bind_1(this.ele,function(){et.resize()})},_.prototype.bindEvents=function(et,tt){function nt(at,ot){isString(at)&&isFunction$2(ot)&&et.on(at,function(st){ot(st,et)})}for(var it in tt)Object.prototype.hasOwnProperty.call(tt,it)&&nt(it,tt[it])},_.prototype.updateEChartsOption=function(){var et=this.props,tt=et.option,nt=et.notMerge,it=nt===void 0?!1:nt,at=et.lazyUpdate,ot=at===void 0?!1:at,st=et.showLoading,dt=et.loadingOption,ht=dt===void 0?null:dt,ct=this.getEchartsInstance();return ct.setOption(tt,it,ot),st?ct.showLoading(ht):ct.hideLoading(),ct},_.prototype.resize=function(){var et=this.getEchartsInstance();if(!this.isInitialResize)try{et.resize()}catch(tt){console.warn(tt)}this.isInitialResize=!1},_.prototype.render=function(){var et=this,tt=this.props,nt=tt.style,it=tt.className,at=it===void 0?"":it,ot=__assign({height:300},nt);return React.createElement("div",{ref:function(st){et.ele=st},style:ot,className:"echarts-for-react "+at})},_}(reactExports.PureComponent),EChartsReact=function(_e){__extends$2(_,_e);function _(et){var tt=_e.call(this,et)||this;return tt.echarts=echarts,tt}return _}(EChartsReactCore);function useTheme(){const _e=reactExports.useContext(ThemeContext);if(!_e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return _e}var ColorModeContext=reactExports.createContext({});ColorModeContext.displayName="ColorModeContext";function useColorMode(){const _e=reactExports.useContext(ColorModeContext);if(_e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return _e}function useChakra(){const _e=useColorMode(),_=useTheme();return{..._e,theme:_}}var cx=(..._e)=>_e.filter(Boolean).join(" ");function isObject(_e){const _=typeof _e;return _e!=null&&(_==="object"||_==="function")&&!Array.isArray(_e)}function runIfFn$1(_e,..._){return isFunction$1(_e)?_e(..._):_e}var isFunction$1=_e=>typeof _e=="function",lodash_mergewith={exports:{}};lodash_mergewith.exports;(function(_e,_){var et=200,tt="__lodash_hash_undefined__",nt=800,it=16,at=9007199254740991,ot="[object Arguments]",st="[object Array]",dt="[object AsyncFunction]",ht="[object Boolean]",ct="[object Date]",ut="[object Error]",ft="[object Function]",gt="[object GeneratorFunction]",mt="[object Map]",vt="[object Number]",yt="[object Null]",bt="[object Object]",_t="[object Proxy]",xt="[object RegExp]",St="[object Set]",Tt="[object String]",wt="[object Undefined]",Ct="[object WeakMap]",Et="[object ArrayBuffer]",At="[object DataView]",Pt="[object Float32Array]",Rt="[object Float64Array]",It="[object Int8Array]",Mt="[object Int16Array]",Ot="[object Int32Array]",$t="[object Uint8Array]",Lt="[object Uint8ClampedArray]",kt="[object Uint16Array]",Nt="[object Uint32Array]",Vt=/[\\^$.*+?()[\]{}|]/g,zt=/^\[object .+?Constructor\]$/,Xt=/^(?:0|[1-9]\d*)$/,Wt={};Wt[Pt]=Wt[Rt]=Wt[It]=Wt[Mt]=Wt[Ot]=Wt[$t]=Wt[Lt]=Wt[kt]=Wt[Nt]=!0,Wt[ot]=Wt[st]=Wt[Et]=Wt[ht]=Wt[At]=Wt[ct]=Wt[ut]=Wt[ft]=Wt[mt]=Wt[vt]=Wt[bt]=Wt[xt]=Wt[St]=Wt[Tt]=Wt[Ct]=!1;var nr=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Jt=typeof self=="object"&&self&&self.Object===Object&&self,lr=nr||Jt||Function("return this")(),pr=_&&!_.nodeType&&_,Zt=pr&&!0&&_e&&!_e.nodeType&&_e,Kt=Zt&&Zt.exports===pr,ur=Kt&&nr.process,ir=function(){try{var Ft=Zt&&Zt.require&&Zt.require("util").types;return Ft||ur&&ur.binding&&ur.binding("util")}catch{}}(),hr=ir&&ir.isTypedArray;function fr(Ft,Ht,Qt){switch(Qt.length){case 0:return Ft.call(Ht);case 1:return Ft.call(Ht,Qt[0]);case 2:return Ft.call(Ht,Qt[0],Qt[1]);case 3:return Ft.call(Ht,Qt[0],Qt[1],Qt[2])}return Ft.apply(Ht,Qt)}function mr(Ft,Ht){for(var Qt=-1,gr=Array(Ft);++Qt<Ft;)gr[Qt]=Ht(Qt);return gr}function br(Ft){return function(Ht){return Ft(Ht)}}function Er(Ft,Ht){return Ft==null?void 0:Ft[Ht]}function kr(Ft,Ht){return function(Qt){return Ft(Ht(Qt))}}var jr=Array.prototype,Hr=Function.prototype,Wr=Object.prototype,Yr=lr["__core-js_shared__"],Br=Hr.toString,Gr=Wr.hasOwnProperty,Jr=function(){var Ft=/[^.]+$/.exec(Yr&&Yr.keys&&Yr.keys.IE_PROTO||"");return Ft?"Symbol(src)_1."+Ft:""}(),Or=Wr.toString,Rn=Br.call(Object),An=RegExp("^"+Br.call(Gr).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_n=Kt?lr.Buffer:void 0,ln=lr.Symbol,xn=lr.Uint8Array;_n&&_n.allocUnsafe;var Sn=kr(Object.getPrototypeOf,Object),Qr=Object.create,Tn=Wr.propertyIsEnumerable,Ar=jr.splice,tn=ln?ln.toStringTag:void 0,wn=function(){try{var Ft=qn(Object,"defineProperty");return Ft({},"",{}),Ft}catch{}}(),Hn=_n?_n.isBuffer:void 0,un=Math.max,zr=Date.now,mn=qn(lr,"Map"),hn=qn(Object,"create"),En=function(){function Ft(){}return function(Ht){if(!yn(Ht))return{};if(Qr)return Qr(Ht);Ft.prototype=Ht;var Qt=new Ft;return Ft.prototype=void 0,Qt}}();function Cr(Ft){var Ht=-1,Qt=Ft==null?0:Ft.length;for(this.clear();++Ht<Qt;){var gr=Ft[Ht];this.set(gr[0],gr[1])}}function Pr(){this.__data__=hn?hn(null):{},this.size=0}function Ir(Ft){var Ht=this.has(Ft)&&delete this.__data__[Ft];return this.size-=Ht?1:0,Ht}function Mn(Ft){var Ht=this.__data__;if(hn){var Qt=Ht[Ft];return Qt===tt?void 0:Qt}return Gr.call(Ht,Ft)?Ht[Ft]:void 0}function Cn(Ft){var Ht=this.__data__;return hn?Ht[Ft]!==void 0:Gr.call(Ht,Ft)}function $n(Ft,Ht){var Qt=this.__data__;return this.size+=this.has(Ft)?0:1,Qt[Ft]=hn&&Ht===void 0?tt:Ht,this}Cr.prototype.clear=Pr,Cr.prototype.delete=Ir,Cr.prototype.get=Mn,Cr.prototype.has=Cn,Cr.prototype.set=$n;function nn(Ft){var Ht=-1,Qt=Ft==null?0:Ft.length;for(this.clear();++Ht<Qt;){var gr=Ft[Ht];this.set(gr[0],gr[1])}}function On(){this.__data__=[],this.size=0}function Dn(Ft){var Ht=this.__data__,Qt=Ur(Ht,Ft);if(Qt<0)return!1;var gr=Ht.length-1;return Qt==gr?Ht.pop():Ar.call(Ht,Qt,1),--this.size,!0}function Ln(Ft){var Ht=this.__data__,Qt=Ur(Ht,Ft);return Qt<0?void 0:Ht[Qt][1]}function kn(Ft){return Ur(this.__data__,Ft)>-1}function Nn(Ft,Ht){var Qt=this.__data__,gr=Ur(Qt,Ft);return gr<0?(++this.size,Qt.push([Ft,Ht])):Qt[gr][1]=Ht,this}nn.prototype.clear=On,nn.prototype.delete=Dn,nn.prototype.get=Ln,nn.prototype.has=kn,nn.prototype.set=Nn;function cn(Ft){var Ht=-1,Qt=Ft==null?0:Ft.length;for(this.clear();++Ht<Qt;){var gr=Ft[Ht];this.set(gr[0],gr[1])}}function Fn(){this.size=0,this.__data__={hash:new Cr,map:new(mn||nn),string:new Cr}}function Bn(Ft){var Ht=Pn(this,Ft).delete(Ft);return this.size-=Ht?1:0,Ht}function Vn(Ft){return Pn(this,Ft).get(Ft)}function jn(Ft){return Pn(this,Ft).has(Ft)}function jt(Ft,Ht){var Qt=Pn(this,Ft),gr=Qt.size;return Qt.set(Ft,Ht),this.size+=Qt.size==gr?0:1,this}cn.prototype.clear=Fn,cn.prototype.delete=Bn,cn.prototype.get=Vn,cn.prototype.has=jn,cn.prototype.set=jt;function Gt(Ft){var Ht=this.__data__=new nn(Ft);this.size=Ht.size}function qt(){this.__data__=new nn,this.size=0}function er(Ft){var Ht=this.__data__,Qt=Ht.delete(Ft);return this.size=Ht.size,Qt}function ar(Ft){return this.__data__.get(Ft)}function dr(Ft){return this.__data__.has(Ft)}function vr(Ft,Ht){var Qt=this.__data__;if(Qt instanceof nn){var gr=Qt.__data__;if(!mn||gr.length<et-1)return gr.push([Ft,Ht]),this.size=++Qt.size,this;Qt=this.__data__=new cn(gr)}return Qt.set(Ft,Ht),this.size=Qt.size,this}Gt.prototype.clear=qt,Gt.prototype.delete=er,Gt.prototype.get=ar,Gt.prototype.has=dr,Gt.prototype.set=vr;function Sr(Ft,Ht){var Qt=_i(Ft),gr=!Qt&&Jn(Ft),wr=!Qt&&!gr&&ao(Ft),Nr=!Qt&&!gr&&!wr&&so(Ft),Fr=Qt||gr||wr||Nr,rr=Fr?mr(Ft.length,String):[],_r=rr.length;for(var Vr in Ft)Fr&&(Vr=="length"||wr&&(Vr=="offset"||Vr=="parent")||Nr&&(Vr=="buffer"||Vr=="byteLength"||Vr=="byteOffset")||no(Vr,_r))||rr.push(Vr);return rr}function yr(Ft,Ht,Qt){(Qt!==void 0&&!zn(Ft[Ht],Qt)||Qt===void 0&&!(Ht in Ft))&&Kr(Ft,Ht,Qt)}function Mr(Ft,Ht,Qt){var gr=Ft[Ht];(!(Gr.call(Ft,Ht)&&zn(gr,Qt))||Qt===void 0&&!(Ht in Ft))&&Kr(Ft,Ht,Qt)}function Ur(Ft,Ht){for(var Qt=Ft.length;Qt--;)if(zn(Ft[Qt][0],Ht))return Qt;return-1}function Kr(Ft,Ht,Qt){Ht=="__proto__"&&wn?wn(Ft,Ht,{configurable:!0,enumerable:!0,value:Qt,writable:!0}):Ft[Ht]=Qt}var Zr=Xn();function sr(Ft){return Ft==null?Ft===void 0?wt:yt:tn&&tn in Object(Ft)?yo(Ft):Dr(Ft)}function Lr(Ft){return In(Ft)&&sr(Ft)==ot}function Xr(Ft){if(!yn(Ft)||xo(Ft))return!1;var Ht=ga(Ft)?An:zt;return Ht.test(Qn(Ft))}function an(Ft){return In(Ft)&&oo(Ft.length)&&!!Wt[sr(Ft)]}function fn(Ft){if(!yn(Ft))return So(Ft);var Ht=Zn(Ft),Qt=[];for(var gr in Ft)gr=="constructor"&&(Ht||!Gr.call(Ft,gr))||Qt.push(gr);return Qt}function Wn(Ft,Ht,Qt,gr,wr){Ft!==Ht&&Zr(Ht,function(Nr,Fr){if(wr||(wr=new Gt),yn(Nr))ro(Ft,Ht,Fr,Qt,Wn,gr,wr);else{var rr=gr?gr(Rr(Ft,Fr),Nr,Fr+"",Ft,Ht,wr):void 0;rr===void 0&&(rr=Nr),yr(Ft,Fr,rr)}},Bt)}function ro(Ft,Ht,Qt,gr,wr,Nr,Fr){var rr=Rr(Ft,Qt),_r=Rr(Ht,Qt),Vr=Fr.get(_r);if(Vr){yr(Ft,Qt,Vr);return}var qr=Nr?Nr(rr,_r,Qt+"",Ft,Ht,Fr):void 0,dn=qr===void 0;if(dn){var Lo=_i(_r),ko=!Lo&&ao(_r),Wo=!Lo&&!ko&&so(_r);qr=_r,Lo||ko||Wo?_i(rr)?qr=rr:wo(rr)?qr=vo(rr):ko?(dn=!1,qr=Yn(_r)):Wo?(dn=!1,qr=mo(_r)):qr=[]:Eo(_r)||Jn(_r)?(qr=rr,Jn(rr)?qr=Dt(rr):(!yn(rr)||ga(rr))&&(qr=bo(_r))):dn=!1}dn&&(Fr.set(_r,qr),wr(qr,_r,gr,Nr,Fr),Fr.delete(_r)),yr(Ft,Qt,qr)}function po(Ft,Ht){return $r(To(Ft,Ht,tr),Ft+"")}var rn=wn?function(Ft,Ht){return wn(Ft,"toString",{configurable:!0,enumerable:!1,value:Yt(Ht),writable:!0})}:tr;function Yn(Ft,Ht){return Ft.slice()}function go(Ft){var Ht=new Ft.constructor(Ft.byteLength);return new xn(Ht).set(new xn(Ft)),Ht}function mo(Ft,Ht){var Qt=go(Ft.buffer);return new Ft.constructor(Qt,Ft.byteOffset,Ft.length)}function vo(Ft,Ht){var Qt=-1,gr=Ft.length;for(Ht||(Ht=Array(gr));++Qt<gr;)Ht[Qt]=Ft[Qt];return Ht}function Oo(Ft,Ht,Qt,gr){var wr=!Qt;Qt||(Qt={});for(var Nr=-1,Fr=Ht.length;++Nr<Fr;){var rr=Ht[Nr],_r=void 0;_r===void 0&&(_r=Ft[rr]),wr?Kr(Qt,rr,_r):Mr(Qt,rr,_r)}return Qt}function Do(Ft){return po(function(Ht,Qt){var gr=-1,wr=Qt.length,Nr=wr>1?Qt[wr-1]:void 0,Fr=wr>2?Qt[2]:void 0;for(Nr=Ft.length>3&&typeof Nr=="function"?(wr--,Nr):void 0,Fr&&Kn(Qt[0],Qt[1],Fr)&&(Nr=wr<3?void 0:Nr,wr=1),Ht=Object(Ht);++gr<wr;){var rr=Qt[gr];rr&&Ft(Ht,rr,gr,Nr)}return Ht})}function Xn(Ft){return function(Ht,Qt,gr){for(var wr=-1,Nr=Object(Ht),Fr=gr(Ht),rr=Fr.length;rr--;){var _r=Fr[++wr];if(Qt(Nr[_r],_r,Nr)===!1)break}return Ht}}function Pn(Ft,Ht){var Qt=Ft.__data__;return _o(Ht)?Qt[typeof Ht=="string"?"string":"hash"]:Qt.map}function qn(Ft,Ht){var Qt=Er(Ft,Ht);return Xr(Qt)?Qt:void 0}function yo(Ft){var Ht=Gr.call(Ft,tn),Qt=Ft[tn];try{Ft[tn]=void 0;var gr=!0}catch{}var wr=Or.call(Ft);return gr&&(Ht?Ft[tn]=Qt:delete Ft[tn]),wr}function bo(Ft){return typeof Ft.constructor=="function"&&!Zn(Ft)?En(Sn(Ft)):{}}function no(Ft,Ht){var Qt=typeof Ft;return Ht=Ht??at,!!Ht&&(Qt=="number"||Qt!="symbol"&&Xt.test(Ft))&&Ft>-1&&Ft%1==0&&Ft<Ht}function Kn(Ft,Ht,Qt){if(!yn(Qt))return!1;var gr=typeof Ht;return(gr=="number"?na(Qt)&&no(Ht,Qt.length):gr=="string"&&Ht in Qt)?zn(Qt[Ht],Ft):!1}function _o(Ft){var Ht=typeof Ft;return Ht=="string"||Ht=="number"||Ht=="symbol"||Ht=="boolean"?Ft!=="__proto__":Ft===null}function xo(Ft){return!!Jr&&Jr in Ft}function Zn(Ft){var Ht=Ft&&Ft.constructor,Qt=typeof Ht=="function"&&Ht.prototype||Wr;return Ft===Qt}function So(Ft){var Ht=[];if(Ft!=null)for(var Qt in Object(Ft))Ht.push(Qt);return Ht}function Dr(Ft){return Or.call(Ft)}function To(Ft,Ht,Qt){return Ht=un(Ht===void 0?Ft.length-1:Ht,0),function(){for(var gr=arguments,wr=-1,Nr=un(gr.length-Ht,0),Fr=Array(Nr);++wr<Nr;)Fr[wr]=gr[Ht+wr];wr=-1;for(var rr=Array(Ht+1);++wr<Ht;)rr[wr]=gr[wr];return rr[Ht]=Qt(Fr),fr(Ft,this,rr)}}function Rr(Ft,Ht){if(!(Ht==="constructor"&&typeof Ft[Ht]=="function")&&Ht!="__proto__")return Ft[Ht]}var $r=io(rn);function io(Ft){var Ht=0,Qt=0;return function(){var gr=zr(),wr=it-(gr-Qt);if(Qt=gr,wr>0){if(++Ht>=nt)return arguments[0]}else Ht=0;return Ft.apply(void 0,arguments)}}function Qn(Ft){if(Ft!=null){try{return Br.call(Ft)}catch{}try{return Ft+""}catch{}}return""}function zn(Ft,Ht){return Ft===Ht||Ft!==Ft&&Ht!==Ht}var Jn=Lr(function(){return arguments}())?Lr:function(Ft){return In(Ft)&&Gr.call(Ft,"callee")&&!Tn.call(Ft,"callee")},_i=Array.isArray;function na(Ft){return Ft!=null&&oo(Ft.length)&&!ga(Ft)}function wo(Ft){return In(Ft)&&na(Ft)}var ao=Hn||cr;function ga(Ft){if(!yn(Ft))return!1;var Ht=sr(Ft);return Ht==ft||Ht==gt||Ht==dt||Ht==_t}function oo(Ft){return typeof Ft=="number"&&Ft>-1&&Ft%1==0&&Ft<=at}function yn(Ft){var Ht=typeof Ft;return Ft!=null&&(Ht=="object"||Ht=="function")}function In(Ft){return Ft!=null&&typeof Ft=="object"}function Eo(Ft){if(!In(Ft)||sr(Ft)!=bt)return!1;var Ht=Sn(Ft);if(Ht===null)return!0;var Qt=Gr.call(Ht,"constructor")&&Ht.constructor;return typeof Qt=="function"&&Qt instanceof Qt&&Br.call(Qt)==Rn}var so=hr?br(hr):an;function Dt(Ft){return Oo(Ft,Bt(Ft))}function Bt(Ft){return na(Ft)?Sr(Ft):fn(Ft)}var Ut=Do(function(Ft,Ht,Qt,gr){Wn(Ft,Ht,Qt,gr)});function Yt(Ft){return function(){return Ft}}function tr(Ft){return Ft}function cr(){return!1}_e.exports=Ut})(lodash_mergewith,lodash_mergewith.exports);var lodash_mergewithExports=lodash_mergewith.exports;const mergeWith=getDefaultExportFromCjs(lodash_mergewithExports);var isImportant=_e=>/!(important)?$/.test(_e),withoutImportant=_e=>typeof _e=="string"?_e.replace(/!(important)?$/,"").trim():_e,tokenToCSSVar=(_e,_)=>et=>{const tt=String(_),nt=isImportant(tt),it=withoutImportant(tt),at=_e?`${_e}.${it}`:it;let ot=isObject(et.__cssMap)&&at in et.__cssMap?et.__cssMap[at].varRef:_;return ot=withoutImportant(ot),nt?`${ot} !important`:ot};function createTransform(_e){const{scale:_,transform:et,compose:tt}=_e;return(it,at)=>{var ot;const st=tokenToCSSVar(_,it)(at);let dt=(ot=et==null?void 0:et(st,at))!=null?ot:st;return tt&&(dt=tt(dt,at)),dt}}var pipe=(..._e)=>_=>_e.reduce((et,tt)=>tt(et),_);function toConfig(_e,_){return et=>{const tt={property:et,scale:_e};return tt.transform=createTransform({scale:_e,transform:_}),tt}}var getRtl=({rtl:_e,ltr:_})=>et=>et.direction==="rtl"?_e:_;function logical(_e){const{property:_,scale:et,transform:tt}=_e;return{scale:et,property:getRtl(_),transform:et?createTransform({scale:et,compose:tt}):tt}}var transformTemplate=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function getTransformTemplate(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...transformTemplate].join(" ")}function getTransformGpuTemplate(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...transformTemplate].join(" ")}var filterTemplate={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},backdropFilterTemplate={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function getRingTemplate(_e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":_e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var flexDirectionTemplate={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},directionMap={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},valueSet=new Set(Object.values(directionMap)),globalSet=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),trimSpace=_e=>_e.trim();function parseGradient(_e,_){if(_e==null||globalSet.has(_e))return _e;if(!(isCSSFunction(_e)||globalSet.has(_e)))return`url('${_e}')`;const nt=/(^[a-z-A-Z]+)\((.*)\)/g.exec(_e),it=nt==null?void 0:nt[1],at=nt==null?void 0:nt[2];if(!it||!at)return _e;const ot=it.includes("-gradient")?it:`${it}-gradient`,[st,...dt]=at.split(",").map(trimSpace).filter(Boolean);if((dt==null?void 0:dt.length)===0)return _e;const ht=st in directionMap?directionMap[st]:st;dt.unshift(ht);const ct=dt.map(ut=>{if(valueSet.has(ut))return ut;const ft=ut.indexOf(" "),[gt,mt]=ft!==-1?[ut.substr(0,ft),ut.substr(ft+1)]:[ut],vt=isCSSFunction(mt)?mt:mt&&mt.split(" "),yt=`colors.${gt}`,bt=yt in _.__cssMap?_.__cssMap[yt].varRef:gt;return vt?[bt,...Array.isArray(vt)?vt:[vt]].join(" "):bt});return`${ot}(${ct.join(", ")})`}var isCSSFunction=_e=>typeof _e=="string"&&_e.includes("(")&&_e.includes(")"),gradientTransform=(_e,_)=>parseGradient(_e,_??{});function isCssVar(_e){return/^var\(--.+\)$/.test(_e)}var analyzeCSSValue=_e=>{const _=parseFloat(_e.toString()),et=_e.toString().replace(String(_),"");return{unitless:!et,value:_,unit:et}},wrap=_e=>_=>`${_e}(${_})`,transformFunctions={filter(_e){return _e!=="auto"?_e:filterTemplate},backdropFilter(_e){return _e!=="auto"?_e:backdropFilterTemplate},ring(_e){return getRingTemplate(transformFunctions.px(_e))},bgClip(_e){return _e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:_e}},transform(_e){return _e==="auto"?getTransformTemplate():_e==="auto-gpu"?getTransformGpuTemplate():_e},vh(_e){return _e==="$100vh"?"var(--chakra-vh)":_e},px(_e){if(_e==null)return _e;const{unitless:_}=analyzeCSSValue(_e);return _||typeof _e=="number"?`${_e}px`:_e},fraction(_e){return typeof _e!="number"||_e>1?_e:`${_e*100}%`},float(_e,_){const et={left:"right",right:"left"};return _.direction==="rtl"?et[_e]:_e},degree(_e){if(isCssVar(_e)||_e==null)return _e;const _=typeof _e=="string"&&!_e.endsWith("deg");return typeof _e=="number"||_?`${_e}deg`:_e},gradient:gradientTransform,blur:wrap("blur"),opacity:wrap("opacity"),brightness:wrap("brightness"),contrast:wrap("contrast"),dropShadow:wrap("drop-shadow"),grayscale:wrap("grayscale"),hueRotate:_e=>wrap("hue-rotate")(transformFunctions.degree(_e)),invert:wrap("invert"),saturate:wrap("saturate"),sepia:wrap("sepia"),bgImage(_e){return _e==null||isCSSFunction(_e)||globalSet.has(_e)?_e:`url(${_e})`},outline(_e){const _=String(_e)==="0"||String(_e)==="none";return _e!==null&&_?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:_e}},flexDirection(_e){var _;const{space:et,divide:tt}=(_=flexDirectionTemplate[_e])!=null?_:{},nt={flexDirection:_e};return et&&(nt[et]=1),tt&&(nt[tt]=1),nt}},t={borderWidths:toConfig("borderWidths"),borderStyles:toConfig("borderStyles"),colors:toConfig("colors"),borders:toConfig("borders"),gradients:toConfig("gradients",transformFunctions.gradient),radii:toConfig("radii",transformFunctions.px),space:toConfig("space",pipe(transformFunctions.vh,transformFunctions.px)),spaceT:toConfig("space",pipe(transformFunctions.vh,transformFunctions.px)),degreeT(_e){return{property:_e,transform:transformFunctions.degree}},prop(_e,_,et){return{property:_e,scale:_,..._&&{transform:createTransform({scale:_,transform:et})}}},propT(_e,_){return{property:_e,transform:_}},sizes:toConfig("sizes",pipe(transformFunctions.vh,transformFunctions.px)),sizesT:toConfig("sizes",pipe(transformFunctions.vh,transformFunctions.fraction)),shadows:toConfig("shadows"),logical,blur:toConfig("blur",transformFunctions.blur)},background={background:t.colors("background"),backgroundColor:t.colors("backgroundColor"),backgroundImage:t.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:transformFunctions.bgClip},bgSize:t.prop("backgroundSize"),bgPosition:t.prop("backgroundPosition"),bg:t.colors("background"),bgColor:t.colors("backgroundColor"),bgPos:t.prop("backgroundPosition"),bgRepeat:t.prop("backgroundRepeat"),bgAttachment:t.prop("backgroundAttachment"),bgGradient:t.gradients("backgroundImage"),bgClip:{transform:transformFunctions.bgClip}};Object.assign(background,{bgImage:background.backgroundImage,bgImg:background.backgroundImage});var border={border:t.borders("border"),borderWidth:t.borderWidths("borderWidth"),borderStyle:t.borderStyles("borderStyle"),borderColor:t.colors("borderColor"),borderRadius:t.radii("borderRadius"),borderTop:t.borders("borderTop"),borderBlockStart:t.borders("borderBlockStart"),borderTopLeftRadius:t.radii("borderTopLeftRadius"),borderStartStartRadius:t.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:t.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:t.radii("borderTopRightRadius"),borderStartEndRadius:t.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:t.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:t.borders("borderRight"),borderInlineEnd:t.borders("borderInlineEnd"),borderBottom:t.borders("borderBottom"),borderBlockEnd:t.borders("borderBlockEnd"),borderBottomLeftRadius:t.radii("borderBottomLeftRadius"),borderBottomRightRadius:t.radii("borderBottomRightRadius"),borderLeft:t.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:t.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:t.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:t.borders(["borderLeft","borderRight"]),borderInline:t.borders("borderInline"),borderY:t.borders(["borderTop","borderBottom"]),borderBlock:t.borders("borderBlock"),borderTopWidth:t.borderWidths("borderTopWidth"),borderBlockStartWidth:t.borderWidths("borderBlockStartWidth"),borderTopColor:t.colors("borderTopColor"),borderBlockStartColor:t.colors("borderBlockStartColor"),borderTopStyle:t.borderStyles("borderTopStyle"),borderBlockStartStyle:t.borderStyles("borderBlockStartStyle"),borderBottomWidth:t.borderWidths("borderBottomWidth"),borderBlockEndWidth:t.borderWidths("borderBlockEndWidth"),borderBottomColor:t.colors("borderBottomColor"),borderBlockEndColor:t.colors("borderBlockEndColor"),borderBottomStyle:t.borderStyles("borderBottomStyle"),borderBlockEndStyle:t.borderStyles("borderBlockEndStyle"),borderLeftWidth:t.borderWidths("borderLeftWidth"),borderInlineStartWidth:t.borderWidths("borderInlineStartWidth"),borderLeftColor:t.colors("borderLeftColor"),borderInlineStartColor:t.colors("borderInlineStartColor"),borderLeftStyle:t.borderStyles("borderLeftStyle"),borderInlineStartStyle:t.borderStyles("borderInlineStartStyle"),borderRightWidth:t.borderWidths("borderRightWidth"),borderInlineEndWidth:t.borderWidths("borderInlineEndWidth"),borderRightColor:t.colors("borderRightColor"),borderInlineEndColor:t.colors("borderInlineEndColor"),borderRightStyle:t.borderStyles("borderRightStyle"),borderInlineEndStyle:t.borderStyles("borderInlineEndStyle"),borderTopRadius:t.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:t.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:t.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:t.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(border,{rounded:border.borderRadius,roundedTop:border.borderTopRadius,roundedTopLeft:border.borderTopLeftRadius,roundedTopRight:border.borderTopRightRadius,roundedTopStart:border.borderStartStartRadius,roundedTopEnd:border.borderStartEndRadius,roundedBottom:border.borderBottomRadius,roundedBottomLeft:border.borderBottomLeftRadius,roundedBottomRight:border.borderBottomRightRadius,roundedBottomStart:border.borderEndStartRadius,roundedBottomEnd:border.borderEndEndRadius,roundedLeft:border.borderLeftRadius,roundedRight:border.borderRightRadius,roundedStart:border.borderInlineStartRadius,roundedEnd:border.borderInlineEndRadius,borderStart:border.borderInlineStart,borderEnd:border.borderInlineEnd,borderTopStartRadius:border.borderStartStartRadius,borderTopEndRadius:border.borderStartEndRadius,borderBottomStartRadius:border.borderEndStartRadius,borderBottomEndRadius:border.borderEndEndRadius,borderStartRadius:border.borderInlineStartRadius,borderEndRadius:border.borderInlineEndRadius,borderStartWidth:border.borderInlineStartWidth,borderEndWidth:border.borderInlineEndWidth,borderStartColor:border.borderInlineStartColor,borderEndColor:border.borderInlineEndColor,borderStartStyle:border.borderInlineStartStyle,borderEndStyle:border.borderInlineEndStyle});var color={color:t.colors("color"),textColor:t.colors("color"),fill:t.colors("fill"),stroke:t.colors("stroke")},effect={boxShadow:t.shadows("boxShadow"),mixBlendMode:!0,blendMode:t.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:t.prop("backgroundBlendMode"),opacity:!0};Object.assign(effect,{shadow:effect.boxShadow});var filter={filter:{transform:transformFunctions.filter},blur:t.blur("--chakra-blur"),brightness:t.propT("--chakra-brightness",transformFunctions.brightness),contrast:t.propT("--chakra-contrast",transformFunctions.contrast),hueRotate:t.propT("--chakra-hue-rotate",transformFunctions.hueRotate),invert:t.propT("--chakra-invert",transformFunctions.invert),saturate:t.propT("--chakra-saturate",transformFunctions.saturate),dropShadow:t.propT("--chakra-drop-shadow",transformFunctions.dropShadow),backdropFilter:{transform:transformFunctions.backdropFilter},backdropBlur:t.blur("--chakra-backdrop-blur"),backdropBrightness:t.propT("--chakra-backdrop-brightness",transformFunctions.brightness),backdropContrast:t.propT("--chakra-backdrop-contrast",transformFunctions.contrast),backdropHueRotate:t.propT("--chakra-backdrop-hue-rotate",transformFunctions.hueRotate),backdropInvert:t.propT("--chakra-backdrop-invert",transformFunctions.invert),backdropSaturate:t.propT("--chakra-backdrop-saturate",transformFunctions.saturate)},flexbox={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:transformFunctions.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:t.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:t.space("gap"),rowGap:t.space("rowGap"),columnGap:t.space("columnGap")};Object.assign(flexbox,{flexDir:flexbox.flexDirection});var grid={gridGap:t.space("gridGap"),gridColumnGap:t.space("gridColumnGap"),gridRowGap:t.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},interactivity={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:transformFunctions.outline},outlineOffset:!0,outlineColor:t.colors("outlineColor")},layout={width:t.sizesT("width"),inlineSize:t.sizesT("inlineSize"),height:t.sizes("height"),blockSize:t.sizes("blockSize"),boxSize:t.sizes(["width","height"]),minWidth:t.sizes("minWidth"),minInlineSize:t.sizes("minInlineSize"),minHeight:t.sizes("minHeight"),minBlockSize:t.sizes("minBlockSize"),maxWidth:t.sizes("maxWidth"),maxInlineSize:t.sizes("maxInlineSize"),maxHeight:t.sizes("maxHeight"),maxBlockSize:t.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(_e,_)=>{var et,tt,nt;return{[`@media screen and (min-width: ${(nt=(tt=(et=_.__breakpoints)==null?void 0:et.get(_e))==null?void 0:tt.minW)!=null?nt:_e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(_e,_)=>{var et,tt,nt;return{[`@media screen and (max-width: ${(nt=(tt=(et=_.__breakpoints)==null?void 0:et.get(_e))==null?void 0:tt._minW)!=null?nt:_e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:t.propT("float",transformFunctions.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(layout,{w:layout.width,h:layout.height,minW:layout.minWidth,maxW:layout.maxWidth,minH:layout.minHeight,maxH:layout.maxHeight,overscroll:layout.overscrollBehavior,overscrollX:layout.overscrollBehaviorX,overscrollY:layout.overscrollBehaviorY});var list={listStyleType:!0,listStylePosition:!0,listStylePos:t.prop("listStylePosition"),listStyleImage:!0,listStyleImg:t.prop("listStyleImage")};function get$1(_e,_,et,tt){const nt=typeof _=="string"?_.split("."):[_];for(tt=0;tt<nt.length&&_e;tt+=1)_e=_e[nt[tt]];return _e===void 0?et:_e}var memoize$1=_e=>{const _=new WeakMap;return(tt,nt,it,at)=>{if(typeof tt>"u")return _e(tt,nt,it);_.has(tt)||_.set(tt,new Map);const ot=_.get(tt);if(ot.has(nt))return ot.get(nt);const st=_e(tt,nt,it,at);return ot.set(nt,st),st}},memoizedGet$1=memoize$1(get$1),srOnly={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},srFocusable={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},getWithPriority=(_e,_,et)=>{const tt={},nt=memoizedGet$1(_e,_,{});for(const it in nt)it in et&&et[it]!=null||(tt[it]=nt[it]);return tt},others={srOnly:{transform(_e){return _e===!0?srOnly:_e==="focusable"?srFocusable:{}}},layerStyle:{processResult:!0,transform:(_e,_,et)=>getWithPriority(_,`layerStyles.${_e}`,et)},textStyle:{processResult:!0,transform:(_e,_,et)=>getWithPriority(_,`textStyles.${_e}`,et)},apply:{processResult:!0,transform:(_e,_,et)=>getWithPriority(_,_e,et)}},position={position:!0,pos:t.prop("position"),zIndex:t.prop("zIndex","zIndices"),inset:t.spaceT("inset"),insetX:t.spaceT(["left","right"]),insetInline:t.spaceT("insetInline"),insetY:t.spaceT(["top","bottom"]),insetBlock:t.spaceT("insetBlock"),top:t.spaceT("top"),insetBlockStart:t.spaceT("insetBlockStart"),bottom:t.spaceT("bottom"),insetBlockEnd:t.spaceT("insetBlockEnd"),left:t.spaceT("left"),insetInlineStart:t.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:t.spaceT("right"),insetInlineEnd:t.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(position,{insetStart:position.insetInlineStart,insetEnd:position.insetInlineEnd});var ring={ring:{transform:transformFunctions.ring},ringColor:t.colors("--chakra-ring-color"),ringOffset:t.prop("--chakra-ring-offset-width"),ringOffsetColor:t.colors("--chakra-ring-offset-color"),ringInset:t.prop("--chakra-ring-inset")},space={margin:t.spaceT("margin"),marginTop:t.spaceT("marginTop"),marginBlockStart:t.spaceT("marginBlockStart"),marginRight:t.spaceT("marginRight"),marginInlineEnd:t.spaceT("marginInlineEnd"),marginBottom:t.spaceT("marginBottom"),marginBlockEnd:t.spaceT("marginBlockEnd"),marginLeft:t.spaceT("marginLeft"),marginInlineStart:t.spaceT("marginInlineStart"),marginX:t.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:t.spaceT("marginInline"),marginY:t.spaceT(["marginTop","marginBottom"]),marginBlock:t.spaceT("marginBlock"),padding:t.space("padding"),paddingTop:t.space("paddingTop"),paddingBlockStart:t.space("paddingBlockStart"),paddingRight:t.space("paddingRight"),paddingBottom:t.space("paddingBottom"),paddingBlockEnd:t.space("paddingBlockEnd"),paddingLeft:t.space("paddingLeft"),paddingInlineStart:t.space("paddingInlineStart"),paddingInlineEnd:t.space("paddingInlineEnd"),paddingX:t.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:t.space("paddingInline"),paddingY:t.space(["paddingTop","paddingBottom"]),paddingBlock:t.space("paddingBlock")};Object.assign(space,{m:space.margin,mt:space.marginTop,mr:space.marginRight,me:space.marginInlineEnd,marginEnd:space.marginInlineEnd,mb:space.marginBottom,ml:space.marginLeft,ms:space.marginInlineStart,marginStart:space.marginInlineStart,mx:space.marginX,my:space.marginY,p:space.padding,pt:space.paddingTop,py:space.paddingY,px:space.paddingX,pb:space.paddingBottom,pl:space.paddingLeft,ps:space.paddingInlineStart,paddingStart:space.paddingInlineStart,pr:space.paddingRight,pe:space.paddingInlineEnd,paddingEnd:space.paddingInlineEnd});var textDecoration={textDecorationColor:t.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:t.shadows("textShadow")},transform={clipPath:!0,transform:t.propT("transform",transformFunctions.transform),transformOrigin:!0,translateX:t.spaceT("--chakra-translate-x"),translateY:t.spaceT("--chakra-translate-y"),skewX:t.degreeT("--chakra-skew-x"),skewY:t.degreeT("--chakra-skew-y"),scaleX:t.prop("--chakra-scale-x"),scaleY:t.prop("--chakra-scale-y"),scale:t.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:t.degreeT("--chakra-rotate")},transition={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:t.prop("transitionDuration","transition.duration"),transitionProperty:t.prop("transitionProperty","transition.property"),transitionTimingFunction:t.prop("transitionTimingFunction","transition.easing")},typography={fontFamily:t.prop("fontFamily","fonts"),fontSize:t.prop("fontSize","fontSizes",transformFunctions.px),fontWeight:t.prop("fontWeight","fontWeights"),lineHeight:t.prop("lineHeight","lineHeights"),letterSpacing:t.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(_e){if(_e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},scroll={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:t.spaceT("scrollMargin"),scrollMarginTop:t.spaceT("scrollMarginTop"),scrollMarginBottom:t.spaceT("scrollMarginBottom"),scrollMarginLeft:t.spaceT("scrollMarginLeft"),scrollMarginRight:t.spaceT("scrollMarginRight"),scrollMarginX:t.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:t.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:t.spaceT("scrollPadding"),scrollPaddingTop:t.spaceT("scrollPaddingTop"),scrollPaddingBottom:t.spaceT("scrollPaddingBottom"),scrollPaddingLeft:t.spaceT("scrollPaddingLeft"),scrollPaddingRight:t.spaceT("scrollPaddingRight"),scrollPaddingX:t.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:t.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function resolveReference(_e){return isObject(_e)&&_e.reference?_e.reference:String(_e)}var toExpression=(_e,..._)=>_.map(resolveReference).join(` ${_e} `).replace(/calc/g,""),add=(..._e)=>`calc(${toExpression("+",..._e)})`,subtract=(..._e)=>`calc(${toExpression("-",..._e)})`,multiply=(..._e)=>`calc(${toExpression("*",..._e)})`,divide=(..._e)=>`calc(${toExpression("/",..._e)})`,negate=_e=>{const _=resolveReference(_e);return _!=null&&!Number.isNaN(parseFloat(_))?String(_).startsWith("-")?String(_).slice(1):`-${_}`:multiply(_,-1)},calc=Object.assign(_e=>({add:(..._)=>calc(add(_e,..._)),subtract:(..._)=>calc(subtract(_e,..._)),multiply:(..._)=>calc(multiply(_e,..._)),divide:(..._)=>calc(divide(_e,..._)),negate:()=>calc(negate(_e)),toString:()=>_e.toString()}),{add,subtract,multiply,divide,negate});function analyzeCSSValue2(_e){const _=parseFloat(_e.toString()),et=_e.toString().replace(String(_),"");return{unitless:!et,value:_,unit:et}}function px(_e){if(_e==null)return _e;const{unitless:_}=analyzeCSSValue2(_e);return _||typeof _e=="number"?`${_e}px`:_e}function toMediaQueryString(_e,_){const et=["@media screen"];return _e&&et.push("and",`(min-width: ${px(_e)})`),_&&et.push("and",`(max-width: ${px(_)})`),et.join(" ")}var state={hover:(_e,_)=>`${_e}:hover ${_}, ${_e}[data-hover] ${_}`,focus:(_e,_)=>`${_e}:focus ${_}, ${_e}[data-focus] ${_}`,focusVisible:(_e,_)=>`${_e}:focus-visible ${_}`,focusWithin:(_e,_)=>`${_e}:focus-within ${_}`,active:(_e,_)=>`${_e}:active ${_}, ${_e}[data-active] ${_}`,disabled:(_e,_)=>`${_e}:disabled ${_}, ${_e}[data-disabled] ${_}`,invalid:(_e,_)=>`${_e}:invalid ${_}, ${_e}[data-invalid] ${_}`,checked:(_e,_)=>`${_e}:checked ${_}, ${_e}[data-checked] ${_}`,indeterminate:(_e,_)=>`${_e}:indeterminate ${_}, ${_e}[aria-checked=mixed] ${_}, ${_e}[data-indeterminate] ${_}`,readOnly:(_e,_)=>`${_e}:read-only ${_}, ${_e}[readonly] ${_}, ${_e}[data-read-only] ${_}`,expanded:(_e,_)=>`${_e}:read-only ${_}, ${_e}[aria-expanded=true] ${_}, ${_e}[data-expanded] ${_}`,placeholderShown:(_e,_)=>`${_e}:placeholder-shown ${_}`},toGroup=_e=>merge(_=>_e(_,"&"),"[role=group]","[data-group]",".group"),toPeer=_e=>merge(_=>_e(_,"~ &"),"[data-peer]",".peer"),merge=(_e,..._)=>_.map(_e).join(", "),pseudoSelectors={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:toGroup(state.hover),_peerHover:toPeer(state.hover),_groupFocus:toGroup(state.focus),_peerFocus:toPeer(state.focus),_groupFocusVisible:toGroup(state.focusVisible),_peerFocusVisible:toPeer(state.focusVisible),_groupActive:toGroup(state.active),_peerActive:toPeer(state.active),_groupDisabled:toGroup(state.disabled),_peerDisabled:toPeer(state.disabled),_groupInvalid:toGroup(state.invalid),_peerInvalid:toPeer(state.invalid),_groupChecked:toGroup(state.checked),_peerChecked:toPeer(state.checked),_groupFocusWithin:toGroup(state.focusWithin),_peerFocusWithin:toPeer(state.focusWithin),_peerPlaceholderShown:toPeer(state.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},pseudoPropNames=Object.keys(pseudoSelectors);function omit$1(_e,_=[]){const et=Object.assign({},_e);for(const tt of _)tt in et&&delete et[tt];return et}var systemProps=mergeWith({},background,border,color,flexbox,layout,filter,ring,interactivity,grid,others,position,effect,space,scroll,typography,textDecoration,transform,list,transition);Object.assign({},space,layout,flexbox,grid,position);var propNames=[...Object.keys(systemProps),...pseudoPropNames],styleProps={...systemProps,...pseudoSelectors},isStyleProp=_e=>_e in styleProps,expandResponsive=_e=>_=>{if(!_.__breakpoints)return _e;const{isResponsive:et,toArrayValue:tt,media:nt}=_.__breakpoints,it={};for(const at in _e){let ot=runIfFn$1(_e[at],_);if(ot==null)continue;if(ot=isObject(ot)&&et(ot)?tt(ot):ot,!Array.isArray(ot)){it[at]=ot;continue}const st=ot.slice(0,nt.length).length;for(let dt=0;dt<st;dt+=1){const ht=nt==null?void 0:nt[dt];if(!ht){it[at]=ot[dt];continue}it[ht]=it[ht]||{},ot[dt]!=null&&(it[ht][at]=ot[dt])}}return it};function splitByComma(_e){const _=[];let et="",tt=!1;for(let nt=0;nt<_e.length;nt++){const it=_e[nt];it==="("?(tt=!0,et+=it):it===")"?(tt=!1,et+=it):it===","&&!tt?(_.push(et),et=""):et+=it}return et=et.trim(),et&&_.push(et),_}function isCssVar2(_e){return/^var\(--.+\)$/.test(_e)}var isCSSVariableTokenValue=(_e,_)=>_e.startsWith("--")&&typeof _=="string"&&!isCssVar2(_),resolveTokenValue=(_e,_)=>{var et,tt;if(_==null)return _;const nt=st=>{var dt,ht;return(ht=(dt=_e.__cssMap)==null?void 0:dt[st])==null?void 0:ht.varRef},it=st=>{var dt;return(dt=nt(st))!=null?dt:st},[at,ot]=splitByComma(_);return _=(tt=(et=nt(at))!=null?et:it(ot))!=null?tt:it(_),_};function getCss(_e){const{configs:_={},pseudos:et={},theme:tt}=_e,nt=(it,at=!1)=>{var ot,st,dt;const ht=runIfFn$1(it,tt),ct=expandResponsive(ht)(tt);let ut={};for(let ft in ct){const gt=ct[ft];let mt=runIfFn$1(gt,tt);ft in et&&(ft=et[ft]),isCSSVariableTokenValue(ft,mt)&&(mt=resolveTokenValue(tt,mt));let vt=_[ft];if(vt===!0&&(vt={property:ft}),isObject(mt)){ut[ft]=(ot=ut[ft])!=null?ot:{},ut[ft]=mergeWith({},ut[ft],nt(mt,!0));continue}let yt=(dt=(st=vt==null?void 0:vt.transform)==null?void 0:st.call(vt,mt,tt,ht))!=null?dt:mt;yt=vt!=null&&vt.processResult?nt(yt,!0):yt;const bt=runIfFn$1(vt==null?void 0:vt.property,tt);if(!at&&(vt!=null&&vt.static)){const _t=runIfFn$1(vt.static,tt);ut=mergeWith({},ut,_t)}if(bt&&Array.isArray(bt)){for(const _t of bt)ut[_t]=yt;continue}if(bt){bt==="&"&&isObject(yt)?ut=mergeWith({},ut,yt):ut[bt]=yt;continue}if(isObject(yt)){ut=mergeWith({},ut,yt);continue}ut[ft]=yt}return ut};return nt}var css=_e=>_=>getCss({theme:_,pseudos:pseudoSelectors,configs:systemProps})(_e);function normalize2(_e,_){if(Array.isArray(_e))return _e;if(isObject(_e))return _(_e);if(_e!=null)return[_e]}function getNextIndex(_e,_){for(let et=_+1;et<_e.length;et++)if(_e[et]!=null)return et;return-1}function createResolver(_e){const _=_e.__breakpoints;return function(tt,nt,it,at){var ot,st;if(!_)return;const dt={},ht=normalize2(it,_.toArrayValue);if(!ht)return dt;const ct=ht.length,ut=ct===1,ft=!!tt.parts;for(let gt=0;gt<ct;gt++){const mt=_.details[gt],vt=_.details[getNextIndex(ht,gt)],yt=toMediaQueryString(mt.minW,vt==null?void 0:vt._minW),bt=runIfFn$1((ot=tt[nt])==null?void 0:ot[ht[gt]],at);if(bt){if(ft){(st=tt.parts)==null||st.forEach(_t=>{mergeWith(dt,{[_t]:ut?bt[_t]:{[yt]:bt[_t]}})});continue}if(!ft){ut?mergeWith(dt,bt):dt[yt]=bt;continue}dt[yt]=bt}}return dt}}function resolveStyleConfig(_e){return _=>{var et;const{variant:tt,size:nt,theme:it}=_,at=createResolver(it);return mergeWith({},runIfFn$1((et=_e.baseStyle)!=null?et:{},_),at(_e,"sizes",nt,_),at(_e,"variants",tt,_))}}function omitThemingProps(_e){return omit$1(_e,["styleConfig","size","variant","colorScheme"])}function omit(_e,_){const et={};return Object.keys(_e).forEach(tt=>{_.includes(tt)||(et[tt]=_e[tt])}),et}function get(_e,_,et,tt){const nt=typeof _=="string"?_.split("."):[_];for(tt=0;tt<nt.length&&_e;tt+=1)_e=_e[nt[tt]];return _e===void 0?et:_e}var memoize=_e=>{const _=new WeakMap;return(tt,nt,it,at)=>{if(typeof tt>"u")return _e(tt,nt,it);_.has(tt)||_.set(tt,new Map);const ot=_.get(tt);if(ot.has(nt))return ot.get(nt);const st=_e(tt,nt,it,at);return ot.set(nt,st),st}},memoizedGet=memoize(get);function objectFilter(_e,_){const et={};return Object.keys(_e).forEach(tt=>{const nt=_e[tt];_(nt,tt,_e)&&(et[tt]=nt)}),et}var filterUndefined=_e=>objectFilter(_e,_=>_!=null);function isFunction(_e){return typeof _e=="function"}function runIfFn(_e,..._){return isFunction(_e)?_e(..._):_e}var hasElementType=typeof Element<"u",hasMap=typeof Map=="function",hasSet=typeof Set=="function",hasArrayBuffer=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function equal(_e,_){if(_e===_)return!0;if(_e&&_&&typeof _e=="object"&&typeof _=="object"){if(_e.constructor!==_.constructor)return!1;var et,tt,nt;if(Array.isArray(_e)){if(et=_e.length,et!=_.length)return!1;for(tt=et;tt--!==0;)if(!equal(_e[tt],_[tt]))return!1;return!0}var it;if(hasMap&&_e instanceof Map&&_ instanceof Map){if(_e.size!==_.size)return!1;for(it=_e.entries();!(tt=it.next()).done;)if(!_.has(tt.value[0]))return!1;for(it=_e.entries();!(tt=it.next()).done;)if(!equal(tt.value[1],_.get(tt.value[0])))return!1;return!0}if(hasSet&&_e instanceof Set&&_ instanceof Set){if(_e.size!==_.size)return!1;for(it=_e.entries();!(tt=it.next()).done;)if(!_.has(tt.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(_e)&&ArrayBuffer.isView(_)){if(et=_e.length,et!=_.length)return!1;for(tt=et;tt--!==0;)if(_e[tt]!==_[tt])return!1;return!0}if(_e.constructor===RegExp)return _e.source===_.source&&_e.flags===_.flags;if(_e.valueOf!==Object.prototype.valueOf&&typeof _e.valueOf=="function"&&typeof _.valueOf=="function")return _e.valueOf()===_.valueOf();if(_e.toString!==Object.prototype.toString&&typeof _e.toString=="function"&&typeof _.toString=="function")return _e.toString()===_.toString();if(nt=Object.keys(_e),et=nt.length,et!==Object.keys(_).length)return!1;for(tt=et;tt--!==0;)if(!Object.prototype.hasOwnProperty.call(_,nt[tt]))return!1;if(hasElementType&&_e instanceof Element)return!1;for(tt=et;tt--!==0;)if(!((nt[tt]==="_owner"||nt[tt]==="__v"||nt[tt]==="__o")&&_e.$$typeof)&&!equal(_e[nt[tt]],_[nt[tt]]))return!1;return!0}return _e!==_e&&_!==_}var reactFastCompare=function _e(_,et){try{return equal(_,et)}catch(tt){if((tt.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw tt}};const isEqual=getDefaultExportFromCjs(reactFastCompare);function useStyleConfigImpl(_e,_={}){var et;const{styleConfig:tt,...nt}=_,{theme:it,colorMode:at}=useChakra(),ot=memoizedGet(it,`components.${_e}`),st=tt||ot,dt=mergeWith({theme:it,colorMode:at},(et=st==null?void 0:st.defaultProps)!=null?et:{},filterUndefined(omit(nt,["children"]))),ht=reactExports.useRef({});if(st){const ut=resolveStyleConfig(st)(dt);isEqual(ht.current,ut)||(ht.current=ut)}return ht.current}function useMultiStyleConfig(_e,_={}){return useStyleConfigImpl(_e,_)}var allPropNames=new Set([...propNames,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),validHTMLProps=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function shouldForwardProp(_e){return validHTMLProps.has(_e)||!allPropNames.has(_e)}function assignAfter(_e,..._){if(_e==null)throw new TypeError("Cannot convert undefined or null to object");const et={..._e};for(const tt of _)if(tt!=null)for(const nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(nt in et&&delete et[nt],et[nt]=tt[nt]);return et}var testOmitPropsOnStringTag=isPropValid$1,testOmitPropsOnComponent=function _e(_){return _!=="theme"},getDefaultShouldForwardProp=function _e(_){return typeof _=="string"&&_.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function _e(_,et,tt){var nt;if(et){var it=et.shouldForwardProp;nt=_.__emotion_forwardProp&&it?function(at){return _.__emotion_forwardProp(at)&&it(at)}:it}return typeof nt!="function"&&tt&&(nt=_.__emotion_forwardProp),nt},Insertion=function _e(_){var et=_.cache,tt=_.serialized,nt=_.isStringTag;return registerStyles(et,tt,nt),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(et,tt,nt)}),null},createStyled=function _e(_,et){var tt=_.__emotion_real===_,nt=tt&&_.__emotion_base||_,it,at;et!==void 0&&(it=et.label,at=et.target);var ot=composeShouldForwardProps(_,et,tt),st=ot||getDefaultShouldForwardProp(nt),dt=!st("as");return function(){var ht=arguments,ct=tt&&_.__emotion_styles!==void 0?_.__emotion_styles.slice(0):[];if(it!==void 0&&ct.push("label:"+it+";"),ht[0]==null||ht[0].raw===void 0)ct.push.apply(ct,ht);else{var ut=ht[0];ct.push(ut[0]);for(var ft=ht.length,gt=1;gt<ft;gt++)ct.push(ht[gt],ut[gt])}var mt=withEmotionCache(function(vt,yt,bt){var _t=dt&&vt.as||nt,xt="",St=[],Tt=vt;if(vt.theme==null){Tt={};for(var wt in vt)Tt[wt]=vt[wt];Tt.theme=reactExports.useContext(ThemeContext)}typeof vt.className=="string"?xt=getRegisteredStyles(yt.registered,St,vt.className):vt.className!=null&&(xt=vt.className+" ");var Ct=serializeStyles(ct.concat(St),yt.registered,Tt);xt+=yt.key+"-"+Ct.name,at!==void 0&&(xt+=" "+at);var Et=dt&&ot===void 0?getDefaultShouldForwardProp(_t):st,At={};for(var Pt in vt)dt&&Pt==="as"||Et(Pt)&&(At[Pt]=vt[Pt]);return At.className=xt,bt&&(At.ref=bt),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:yt,serialized:Ct,isStringTag:typeof _t=="string"}),reactExports.createElement(_t,At))});return mt.displayName=it!==void 0?it:"Styled("+(typeof nt=="string"?nt:nt.displayName||nt.name||"Component")+")",mt.defaultProps=_.defaultProps,mt.__emotion_real=mt,mt.__emotion_base=nt,mt.__emotion_styles=ct,mt.__emotion_forwardProp=ot,Object.defineProperty(mt,"toString",{value:function(){return"."+at}}),mt.withComponent=function(vt,yt){var bt=_e(vt,_extends$x({},et,yt,{shouldForwardProp:composeShouldForwardProps(mt,yt,!0)}));return bt.apply(void 0,ct)},mt}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],styled$1=createStyled.bind(null);tags.forEach(function(_e){styled$1[_e]=styled$1(_e)});var _a,emotion_styled=(_a=styled$1.default)!=null?_a:styled$1,toCSSObject=({baseStyle:_e})=>_=>{const{theme:et,css:tt,__css:nt,sx:it,...at}=_,ot=objectFilter(at,(ct,ut)=>isStyleProp(ut)),st=runIfFn(_e,_),dt=assignAfter({},nt,st,filterUndefined(ot),it),ht=css(dt)(_.theme);return tt?[ht,tt]:ht};function styled(_e,_){const{baseStyle:et,...tt}=_??{};tt.shouldForwardProp||(tt.shouldForwardProp=shouldForwardProp);const nt=toCSSObject({baseStyle:et}),it=emotion_styled(_e,tt)(nt);return React.forwardRef(function(st,dt){const{colorMode:ht,forced:ct}=useColorMode();return React.createElement(it,{ref:dt,"data-theme":ct?ht:void 0,...st})})}function factory(){const _e=new Map;return new Proxy(styled,{apply(_,et,tt){return styled(...tt)},get(_,et){return _e.has(et)||_e.set(et,styled(et)),_e.get(et)}})}var chakra=factory();function forwardRef(_e){return reactExports.forwardRef(_e)}function getErrorMessage(_e,_){return`${_e} returned \`undefined\`. Seems you forgot to wrap component within ${_}`}function createContext(_e={}){const{name:_,strict:et=!0,hookName:tt="useContext",providerName:nt="Provider",errorMessage:it,defaultValue:at}=_e,ot=reactExports.createContext(at);ot.displayName=_;function st(){var dt;const ht=reactExports.useContext(ot);if(!ht&&et){const ct=new Error(it??getErrorMessage(tt,nt));throw ct.name="ContextError",(dt=Error.captureStackTrace)==null||dt.call(Error,ct,st),ct}return ht}return[ot.Provider,st,ot]}var[TableStylesProvider,useTableStyles]=createContext({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),Table=forwardRef((_e,_)=>{const et=useMultiStyleConfig("Table",_e),{className:tt,layout:nt,...it}=omitThemingProps(_e);return jsxRuntimeExports.jsx(TableStylesProvider,{value:et,children:jsxRuntimeExports.jsx(chakra.table,{ref:_,__css:{tableLayout:nt,...et.table},className:cx("chakra-table",tt),...it})})});Table.displayName="Table";var Thead=forwardRef((_e,_)=>{const et=useTableStyles();return jsxRuntimeExports.jsx(chakra.thead,{..._e,ref:_,__css:et.thead})}),Tr=forwardRef((_e,_)=>{const et=useTableStyles();return jsxRuntimeExports.jsx(chakra.tr,{..._e,ref:_,__css:et.tr})}),Tbody=forwardRef((_e,_)=>{const et=useTableStyles();return jsxRuntimeExports.jsx(chakra.tbody,{..._e,ref:_,__css:et.tbody})}),Td=forwardRef(({isNumeric:_e,..._},et)=>{const tt=useTableStyles();return jsxRuntimeExports.jsx(chakra.td,{..._,ref:et,__css:tt.td,"data-is-numeric":_e})}),Th=forwardRef(({isNumeric:_e,..._},et)=>{const tt=useTableStyles();return jsxRuntimeExports.jsx(chakra.th,{..._,ref:et,__css:tt.th,"data-is-numeric":_e})});const MessageList=reactExports.memo(({messages:_e,messageListRef:_})=>{const et=reactExports.useRef(null),tt=reactExports.useCallback(()=>{if(_.current){const{scrollHeight:nt}=_.current,it=_.current.clientHeight,at=nt-it;_.current.scrollTo({top:at+100,behavior:"smooth"})}},[_]);return reactExports.useEffect(()=>{tt()},[_e,tt]),reactExports.useEffect(()=>{tt()},[tt]),jsxRuntimeExports.jsx(Box,{...sidebarStyles.chatHistoryPanel.messageList,ref:_,children:_e.map((nt,it)=>jsxRuntimeExports.jsx(Box,{ref:it===_e.length-1?et:null,children:jsxRuntimeExports.jsx(ChatBubble,{message:nt})},`${nt.role}-${nt.timestamp}-${nt.id}`))})});MessageList.displayName="MessageList";function ChatHistoryPanel(){const{messages:_e}=useChatHistory(),{confName:_}=useConfig(),{baseUrl:et}=useWebSocket(),tt="Me",nt=_e.filter(it=>it.content&&it.content.trim().length>0);return jsxRuntimeExports.jsxs(Box,{h:"full",overflow:"hidden",bg:"gray.900",children:[jsxRuntimeExports.jsx(Global,{styles:chatPanelStyles}),jsxRuntimeExports.jsx(MainContainer,{children:jsxRuntimeExports.jsx(ChatContainer,{children:jsxRuntimeExports.jsx(MessageList$1,{children:nt.length===0?jsxRuntimeExports.jsx(Box,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"whiteAlpha.500",fontSize:"sm",children:""}):nt.map(it=>jsxRuntimeExports.jsxs(Message,{model:{message:it.content,sentTime:it.timestamp,sender:it.role==="ai"?it.name||_||"AI":tt,direction:it.role==="ai"?"incoming":"outgoing",position:"single",type:"custom"},avatarPosition:it.role==="ai"?"tl":"tr",avatarSpacer:!1,children:[jsxRuntimeExports.jsx(Message.CustomContent,{children:it.role==="human"?it.content:it.visual_type==="chart"?jsxRuntimeExports.jsx(EChartsReact,{option:it.visual_data,notMerge:!0,lazyUpdate:!0,style:{height:400,width:600}}):it.visual_type==="table"?typeof it.visual_data=="string"?it.visual_data:jsxRuntimeExports.jsx(VisualTable,{data:it.visual_data}):it.content}),jsxRuntimeExports.jsx(Avatar,{children:it.role==="ai"?it.avatar?jsxRuntimeExports.jsx("img",{src:`${et}/avatars/${it.avatar}`,alt:"avatar",style:{width:"100%",height:"100%",borderRadius:"50%"}}):it.name&&it.name[0].toUpperCase()||_&&_[0].toUpperCase()||"A":tt[0].toUpperCase()})]},it.id))})})})]})}function VisualTable({data:_e}){if(!Array.isArray(_e)||_e.length===0)return jsxRuntimeExports.jsx("div",{children:""});const _=typeof _e[0]=="object"&&!Array.isArray(_e[0]),et=_?Object.keys(_e[0]):_e[0].map((tt,nt)=>`${nt+1}`);return jsxRuntimeExports.jsxs(Table,{size:"sm",variant:"simple",mt:2,mb:2,sx:{"th, td":{borderColor:"white",color:"white"},"thead tr":{borderColor:"white",background:"#333"},"tbody tr":{borderColor:"white",background:"#222"}},children:[jsxRuntimeExports.jsx(Thead,{children:jsxRuntimeExports.jsx(Tr,{children:et.map(tt=>jsxRuntimeExports.jsx(Th,{children:tt},tt))})}),jsxRuntimeExports.jsx(Tbody,{children:_e.map((tt,nt)=>jsxRuntimeExports.jsx(Tr,{children:_?et.map(it=>jsxRuntimeExports.jsx(Td,{children:tt[it]},it)):tt.map((it,at)=>jsxRuntimeExports.jsx(Td,{children:it},at))},nt))})]})}const minutesInMonth=43200,minutesInDay=1440,constructFromSymbol=Symbol.for("constructDateFrom");function constructFrom(_e,_){return typeof _e=="function"?_e(_):_e&&typeof _e=="object"&&constructFromSymbol in _e?_e[constructFromSymbol](_):_e instanceof Date?new _e.constructor(_):new Date(_)}function toDate(_e,_){return constructFrom(_e,_e)}let defaultOptions={};function getDefaultOptions(){return defaultOptions}function getTimezoneOffsetInMilliseconds(_e){const _=toDate(_e),et=new Date(Date.UTC(_.getFullYear(),_.getMonth(),_.getDate(),_.getHours(),_.getMinutes(),_.getSeconds(),_.getMilliseconds()));return et.setUTCFullYear(_.getFullYear()),+_e-+et}function normalizeDates(_e,..._){const et=constructFrom.bind(null,_e||_.find(tt=>typeof tt=="object"));return _.map(et)}function compareAsc(_e,_){const et=+toDate(_e)-+toDate(_);return et<0?-1:et>0?1:et}function constructNow(_e){return constructFrom(_e,Date.now())}function differenceInCalendarMonths(_e,_,et){const[tt,nt]=normalizeDates(et==null?void 0:et.in,_e,_),it=tt.getFullYear()-nt.getFullYear(),at=tt.getMonth()-nt.getMonth();return it*12+at}function getRoundingMethod(_e){return _=>{const tt=(_e?Math[_e]:Math.trunc)(_);return tt===0?0:tt}}function differenceInMilliseconds(_e,_){return+toDate(_e)-+toDate(_)}function endOfDay(_e,_){const et=toDate(_e);return et.setHours(23,59,59,999),et}function endOfMonth(_e,_){const et=toDate(_e),tt=et.getMonth();return et.setFullYear(et.getFullYear(),tt+1,0),et.setHours(23,59,59,999),et}function isLastDayOfMonth(_e,_){const et=toDate(_e);return+endOfDay(et)==+endOfMonth(et)}function differenceInMonths(_e,_,et){const[tt,nt,it]=normalizeDates(et==null?void 0:et.in,_e,_e,_),at=compareAsc(nt,it),ot=Math.abs(differenceInCalendarMonths(nt,it));if(ot<1)return 0;nt.getMonth()===1&&nt.getDate()>27&&nt.setDate(30),nt.setMonth(nt.getMonth()-at*ot);let st=compareAsc(nt,it)===-at;isLastDayOfMonth(tt)&&ot===1&&compareAsc(tt,it)===1&&(st=!1);const dt=at*(ot-+st);return dt===0?0:dt}function differenceInSeconds(_e,_,et){const tt=differenceInMilliseconds(_e,_)/1e3;return getRoundingMethod(et==null?void 0:et.roundingMethod)(tt)}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance$1=(_e,_,et)=>{let tt;const nt=formatDistanceLocale[_e];return typeof nt=="string"?tt=nt:_===1?tt=nt.one:tt=nt.other.replace("{{count}}",_.toString()),et!=null&&et.addSuffix?et.comparison&&et.comparison>0?"in "+tt:tt+" ago":tt};function buildFormatLongFn(_e){return(_={})=>{const et=_.width?String(_.width):_e.defaultWidth;return _e.formats[et]||_e.formats[_e.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(_e,_,et,tt)=>formatRelativeLocale[_e];function buildLocalizeFn(_e){return(_,et)=>{const tt=et!=null&&et.context?String(et.context):"standalone";let nt;if(tt==="formatting"&&_e.formattingValues){const at=_e.defaultFormattingWidth||_e.defaultWidth,ot=et!=null&&et.width?String(et.width):at;nt=_e.formattingValues[ot]||_e.formattingValues[at]}else{const at=_e.defaultWidth,ot=et!=null&&et.width?String(et.width):_e.defaultWidth;nt=_e.values[ot]||_e.values[at]}const it=_e.argumentCallback?_e.argumentCallback(_):_;return nt[it]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(_e,_)=>{const et=Number(_e),tt=et%100;if(tt>20||tt<10)switch(tt%10){case 1:return et+"st";case 2:return et+"nd";case 3:return et+"rd"}return et+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:_e=>_e-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(_e){return(_,et={})=>{const tt=et.width,nt=tt&&_e.matchPatterns[tt]||_e.matchPatterns[_e.defaultMatchWidth],it=_.match(nt);if(!it)return null;const at=it[0],ot=tt&&_e.parsePatterns[tt]||_e.parsePatterns[_e.defaultParseWidth],st=Array.isArray(ot)?findIndex(ot,ct=>ct.test(at)):findKey(ot,ct=>ct.test(at));let dt;dt=_e.valueCallback?_e.valueCallback(st):st,dt=et.valueCallback?et.valueCallback(dt):dt;const ht=_.slice(at.length);return{value:dt,rest:ht}}}function findKey(_e,_){for(const et in _e)if(Object.prototype.hasOwnProperty.call(_e,et)&&_(_e[et]))return et}function findIndex(_e,_){for(let et=0;et<_e.length;et++)if(_(_e[et]))return et}function buildMatchPatternFn(_e){return(_,et={})=>{const tt=_.match(_e.matchPattern);if(!tt)return null;const nt=tt[0],it=_.match(_e.parsePattern);if(!it)return null;let at=_e.valueCallback?_e.valueCallback(it[0]):it[0];at=et.valueCallback?et.valueCallback(at):at;const ot=_.slice(nt.length);return{value:at,rest:ot}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:_e=>parseInt(_e,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:_e=>_e+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance:formatDistance$1,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function formatDistance(_e,_,et){const tt=getDefaultOptions(),nt=(et==null?void 0:et.locale)??tt.locale??enUS,it=2520,at=compareAsc(_e,_);if(isNaN(at))throw new RangeError("Invalid time value");const ot=Object.assign({},et,{addSuffix:et==null?void 0:et.addSuffix,comparison:at}),[st,dt]=normalizeDates(et==null?void 0:et.in,...at>0?[_,_e]:[_e,_]),ht=differenceInSeconds(dt,st),ct=(getTimezoneOffsetInMilliseconds(dt)-getTimezoneOffsetInMilliseconds(st))/1e3,ut=Math.round((ht-ct)/60);let ft;if(ut<2)return et!=null&&et.includeSeconds?ht<5?nt.formatDistance("lessThanXSeconds",5,ot):ht<10?nt.formatDistance("lessThanXSeconds",10,ot):ht<20?nt.formatDistance("lessThanXSeconds",20,ot):ht<40?nt.formatDistance("halfAMinute",0,ot):ht<60?nt.formatDistance("lessThanXMinutes",1,ot):nt.formatDistance("xMinutes",1,ot):ut===0?nt.formatDistance("lessThanXMinutes",1,ot):nt.formatDistance("xMinutes",ut,ot);if(ut<45)return nt.formatDistance("xMinutes",ut,ot);if(ut<90)return nt.formatDistance("aboutXHours",1,ot);if(ut<minutesInDay){const gt=Math.round(ut/60);return nt.formatDistance("aboutXHours",gt,ot)}else{if(ut<it)return nt.formatDistance("xDays",1,ot);if(ut<minutesInMonth){const gt=Math.round(ut/minutesInDay);return nt.formatDistance("xDays",gt,ot)}else if(ut<minutesInMonth*2)return ft=Math.round(ut/minutesInMonth),nt.formatDistance("aboutXMonths",ft,ot)}if(ft=differenceInMonths(dt,st),ft<12){const gt=Math.round(ut/minutesInMonth);return nt.formatDistance("xMonths",gt,ot)}else{const gt=ft%12,mt=Math.trunc(ft/12);return gt<3?nt.formatDistance("aboutXYears",mt,ot):gt<9?nt.formatDistance("overXYears",mt,ot):nt.formatDistance("almostXYears",mt+1,ot)}}function formatDistanceToNow(_e,_){return formatDistance(_e,constructNow(_e),_)}const DrawerContent=reactExports.forwardRef((_e,_)=>{const{children:et,portalled:tt=!0,portalRef:nt,offset:it,...at}=_e;return jsxRuntimeExports.jsx(Portal,{disabled:!tt,container:nt,children:jsxRuntimeExports.jsx(DrawerPositioner,{padding:it,children:jsxRuntimeExports.jsx(DrawerContent$1,{ref:_,...at,asChild:!1,children:et})})})}),DrawerCloseTrigger=reactExports.forwardRef((_e,_)=>jsxRuntimeExports.jsx(DrawerCloseTrigger$1,{position:"absolute",top:"2",insetEnd:"2",..._e,asChild:!0,children:jsxRuntimeExports.jsx(CloseButton,{size:"sm",ref:_})})),DrawerTrigger=DrawerTrigger$1,DrawerRoot=DrawerRoot$1,DrawerFooter=DrawerFooter$1,DrawerHeader=DrawerHeader$1,DrawerBody=DrawerBody$1,DrawerBackdrop=DrawerBackdrop$1,DrawerTitle=DrawerTitle$1,DrawerActionTrigger=DrawerActionTrigger$1,useHistoryDrawer=()=>{const[_e,_]=reactExports.useState(!1),{historyList:et,currentHistoryUid:tt,setCurrentHistoryUid:nt,setHistoryList:it,messages:at,updateHistoryList:ot}=useChatHistory(),{sendMessage:st}=useWebSocket();return{open:_e,setOpen:_,historyList:et,currentHistoryUid:tt,fetchAndSetHistory:ut=>{if(!(!ut||ut===tt)){if(tt&&at.length>0){const ft=at[at.length-1];ot(tt,ft)}nt(ut),st({type:"fetch-and-set-history",history_uid:ut})}},deleteHistory:ut=>{if(ut===tt){toaster.create({title:"Cannot delete current chat history",type:"warning",duration:2e3});return}st({type:"delete-history",history_uid:ut}),it(et.filter(ft=>ft.uid!==ut))},getLatestMessageContent:ut=>{var ft;if(ut.uid===tt&&at.length>0){const gt=at[at.length-1];return{content:gt.content,timestamp:gt.timestamp}}return{content:((ft=ut.latest_message)==null?void 0:ft.content)||"",timestamp:ut.timestamp}}}},HistoryItem=reactExports.memo(({isSelected:_e,latestMessage:_,onSelect:et,onDelete:tt,isDeleteDisabled:nt})=>jsxRuntimeExports.jsxs(Box,{...sidebarStyles.historyDrawer.historyItem,..._e?sidebarStyles.historyDrawer.historyItemSelected:{},onClick:et,children:[jsxRuntimeExports.jsxs(Box,{...sidebarStyles.historyDrawer.historyHeader,children:[jsxRuntimeExports.jsx(Box,{...sidebarStyles.historyDrawer.timestamp,children:_.timestamp?formatDistanceToNow(new Date(_.timestamp),{addSuffix:!0}):"No messages"}),jsxRuntimeExports.jsx(Button$1,{onClick:tt,disabled:nt,...sidebarStyles.historyDrawer.deleteButton,children:jsxRuntimeExports.jsx(FiTrash2,{})})]}),_.content&&jsxRuntimeExports.jsx(Box,{...sidebarStyles.historyDrawer.messagePreview,children:_.content})]}));HistoryItem.displayName="HistoryItem";function HistoryDrawer({children:_e}){const{open:_,setOpen:et,historyList:tt,currentHistoryUid:nt,fetchAndSetHistory:it,deleteHistory:at,getLatestMessageContent:ot}=useHistoryDrawer();return jsxRuntimeExports.jsxs(DrawerRoot,{open:_,onOpenChange:st=>et(st.open),placement:"start",children:[jsxRuntimeExports.jsx(DrawerBackdrop,{}),jsxRuntimeExports.jsx(DrawerTrigger,{asChild:!0,children:_e}),jsxRuntimeExports.jsxs(DrawerContent,{style:sidebarStyles.historyDrawer.drawer.content,children:[jsxRuntimeExports.jsxs(DrawerHeader,{children:[jsxRuntimeExports.jsx(DrawerTitle,{style:sidebarStyles.historyDrawer.drawer.title,children:"Chat History List"}),jsxRuntimeExports.jsx(DrawerCloseTrigger,{style:sidebarStyles.historyDrawer.drawer.closeButton})]}),jsxRuntimeExports.jsx(DrawerBody,{children:jsxRuntimeExports.jsx(Box,{...sidebarStyles.historyDrawer.listContainer,children:tt.map(st=>jsxRuntimeExports.jsx(HistoryItem,{isSelected:nt===st.uid,latestMessage:ot(st),onSelect:()=>it(st.uid),onDelete:dt=>{dt.stopPropagation(),at(st.uid)},isDeleteDisabled:nt===st.uid},st.uid))})}),jsxRuntimeExports.jsx(DrawerFooter,{children:jsxRuntimeExports.jsx(DrawerActionTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button$1,{...sidebarStyles.historyDrawer.drawer.actionButton,children:"Close"})})})]})]})}const useSidebar=()=>{const{open:_e,onOpen:_,onClose:et}=useDisclosure(),{sendMessage:tt}=useWebSocket(),{interrupt:nt}=useInterrupt(),{currentHistoryUid:it,messages:at,updateHistoryList:ot}=useChatHistory();return{settingsOpen:_e,onSettingsOpen:_,onSettingsClose:et,createNewHistory:()=>{if(it&&at.length>0){const dt=at[at.length-1];ot(it,dt)}nt(),tt({type:"create-new-history"})}}},ClipboardIcon=reactExports.forwardRef(function _e(_,et){return jsxRuntimeExports.jsx(ClipboardIndicator,{copied:jsxRuntimeExports.jsx(LuCheck,{}),..._,ref:et,children:jsxRuntimeExports.jsx(LuClipboard,{})})}),ClipboardCopyText=reactExports.forwardRef(function _e(_,et){return jsxRuntimeExports.jsx(ClipboardIndicator,{copied:"Copied",..._,ref:et,children:"Copy"})});reactExports.forwardRef(function _e(_,et){return jsxRuntimeExports.jsx(ClipboardLabel,{textStyle:"sm",fontWeight:"medium",display:"inline-block",mb:"1",..._,ref:et})});const ClipboardButton=reactExports.forwardRef(function _e(_,et){return jsxRuntimeExports.jsx(ClipboardTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button$1,{ref:et,size:"sm",variant:"surface",..._,children:[jsxRuntimeExports.jsx(ClipboardIcon,{}),jsxRuntimeExports.jsx(ClipboardCopyText,{})]})})});reactExports.forwardRef(function _e(_,et){return jsxRuntimeExports.jsx(ClipboardTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button$1,{unstyled:!0,variant:"plain",size:"xs",display:"inline-flex",alignItems:"center",gap:"2",ref:et,..._,children:[jsxRuntimeExports.jsx(LuLink,{}),jsxRuntimeExports.jsx(ClipboardCopyText,{})]})})});reactExports.forwardRef(function _e(_,et){return jsxRuntimeExports.jsx(ClipboardTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(IconButton,{ref:et,size:"xs",variant:"subtle",..._,children:[jsxRuntimeExports.jsx(ClipboardIcon,{}),jsxRuntimeExports.jsx(ClipboardCopyText,{srOnly:!0})]})})});reactExports.forwardRef(function _e(_,et){return jsxRuntimeExports.jsx(ClipboardInput,{asChild:!0,children:jsxRuntimeExports.jsx(Input,{ref:et,..._})})});const ClipboardRoot=ClipboardRoot$1,useGroupDrawer=()=>{const[_e,_]=reactExports.useState(!1),[et,tt]=reactExports.useState(""),{sendMessage:nt}=useWebSocket(),it=reactExports.useCallback(()=>{nt({type:"request-group-info"})},[nt]),at=reactExports.useCallback(async()=>{if(!et.trim()){toaster.create({title:"Please enter a valid UUID",type:"error",duration:2e3});return}nt({type:"add-client-to-group",invitee_uid:et.trim()}),tt(""),setTimeout(it,100)},[et,nt,it]),ot=reactExports.useCallback(dt=>{nt({type:"remove-client-from-group",target_uid:dt}),setTimeout(it,100)},[nt,it]),st=reactExports.useCallback(dt=>{nt({type:"remove-client-from-group",target_uid:dt}),setTimeout(it,100)},[nt,it]);return{isOpen:_e,setIsOpen:_,inviteUid:et,setInviteUid:tt,handleInvite:at,handleRemove:ot,handleLeaveGroup:st,requestGroupInfo:it}},GroupContext=reactExports.createContext(null);function GroupProvider({children:_e}){const[_,et]=reactExports.useState(""),[tt,nt]=reactExports.useState([]),[it,at]=reactExports.useState(!1),ot=()=>{nt([]),at(!1)},st=reactExports.useMemo(()=>tt.includes(_)?[_,...tt.filter(dt=>dt!==_)]:tt,[tt,_]);return jsxRuntimeExports.jsx(GroupContext.Provider,{value:{selfUid:_,groupMembers:tt,isOwner:it,setSelfUid:et,setGroupMembers:nt,setIsOwner:at,sortedGroupMembers:st,resetGroupState:ot},children:_e})}function useGroup(){const _e=reactExports.useContext(GroupContext);if(!_e)throw new Error("useGroup must be used within a GroupProvider");return _e}function GroupDrawer({children:_e}){const{selfUid:_,sortedGroupMembers:et,isOwner:tt}=useGroup(),{isOpen:nt,setIsOpen:it,inviteUid:at,setInviteUid:ot,handleInvite:st,handleRemove:dt,handleLeaveGroup:ht,requestGroupInfo:ct}=useGroupDrawer();return jsxRuntimeExports.jsxs(DrawerRoot,{open:nt,onOpenChange:ut=>{it(ut.open),ut.open&&ct()},placement:"start",children:[jsxRuntimeExports.jsx(DrawerBackdrop,{}),jsxRuntimeExports.jsx(DrawerTrigger,{asChild:!0,children:_e}),jsxRuntimeExports.jsxs(DrawerContent,{style:sidebarStyles.historyDrawer.drawer.content,children:[jsxRuntimeExports.jsxs(DrawerHeader,{children:[jsxRuntimeExports.jsx(DrawerTitle,{style:sidebarStyles.historyDrawer.drawer.title,children:"Group Management"}),jsxRuntimeExports.jsx(DrawerCloseTrigger,{style:sidebarStyles.historyDrawer.drawer.closeButton})]}),jsxRuntimeExports.jsx(DrawerBody,{children:jsxRuntimeExports.jsxs(Box,{...sidebarStyles.historyDrawer.listContainer,children:[jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.section,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.groupDrawer.sectionTitle,children:"Your UUID"}),jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.memberItem,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.groupDrawer.memberText,children:_}),jsxRuntimeExports.jsx(ClipboardRoot,{value:_,children:jsxRuntimeExports.jsx(ClipboardButton,{...sidebarStyles.groupDrawer.clipboardButton,size:"sm"})})]})]}),jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.section,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.groupDrawer.sectionTitle,children:"Invite Member From Other Clients"}),jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.inviteBox,children:[jsxRuntimeExports.jsx(Input,{value:at,onChange:ut=>ot(ut.target.value),placeholder:"Enter member UUID",...sidebarStyles.groupDrawer.input}),jsxRuntimeExports.jsx(Button$1,{onClick:st,...sidebarStyles.groupDrawer.button,children:"Invite"})]})]}),jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.section,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.groupDrawer.sectionTitle,children:"Members"}),jsxRuntimeExports.jsx(Box,{...sidebarStyles.groupDrawer.memberList,children:et.map(ut=>jsxRuntimeExports.jsxs(Box,{...sidebarStyles.groupDrawer.memberItem,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.groupDrawer.memberText,children:ut===_?`${ut} (You)`:ut}),(tt&&ut!==_||!tt&&ut===_)&&jsxRuntimeExports.jsx(IconButton,{"aria-label":ut===_?"Leave group":"Remove member",onClick:()=>ut===_?ht(_):dt(ut),...sidebarStyles.groupDrawer.removeButton,size:"sm",title:ut===_?"Leave group":"Remove member",children:ut===_?"Leave":jsxRuntimeExports.jsx(FiX,{})})]},ut))})]})]})}),jsxRuntimeExports.jsx(DrawerFooter,{children:jsxRuntimeExports.jsx(DrawerActionTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button$1,{...sidebarStyles.historyDrawer.drawer.actionButton,children:"Close"})})})]})]})}const ToggleButton$1=reactExports.memo(({isCollapsed:_e,onToggle:_})=>jsxRuntimeExports.jsx(Box,{...sidebarStyles.sidebar.toggleButton,style:{transform:_e?"rotate(180deg)":"rotate(0deg)"},onClick:_,children:jsxRuntimeExports.jsx(FiChevronLeft,{})}));ToggleButton$1.displayName="ToggleButton";const HeaderButtons=reactExports.memo(({onSettingsOpen:_e,onNewHistory:_})=>jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,children:[jsxRuntimeExports.jsx(Button$1,{onClick:_e,children:jsxRuntimeExports.jsx(FiSettings,{})}),jsxRuntimeExports.jsx(GroupDrawer,{children:jsxRuntimeExports.jsx(Button$1,{children:jsxRuntimeExports.jsx(FiUsers,{})})}),jsxRuntimeExports.jsx(HistoryDrawer,{children:jsxRuntimeExports.jsx(Button$1,{children:jsxRuntimeExports.jsx(FiClock,{})})}),jsxRuntimeExports.jsx(Button$1,{onClick:_,children:jsxRuntimeExports.jsx(FiPlus,{})})]}));HeaderButtons.displayName="HeaderButtons";const SidebarContent=reactExports.memo(({onSettingsOpen:_e,onNewHistory:_})=>jsxRuntimeExports.jsxs(Box,{...sidebarStyles.sidebar.content,children:[jsxRuntimeExports.jsx(Box,{...sidebarStyles.sidebar.header,children:jsxRuntimeExports.jsx(HeaderButtons,{onSettingsOpen:_e,onNewHistory:_})}),jsxRuntimeExports.jsx(ChatHistoryPanel,{})]}));SidebarContent.displayName="SidebarContent";function Sidebar({isCollapsed:_e=!1,onToggle:_}){const{settingsOpen:et,onSettingsOpen:tt,onSettingsClose:nt,createNewHistory:it}=useSidebar();return jsxRuntimeExports.jsxs(Box,{...sidebarStyles.sidebar.container(_e),children:[jsxRuntimeExports.jsx(ToggleButton$1,{isCollapsed:_e,onToggle:_}),!_e&&!et&&jsxRuntimeExports.jsx(SidebarContent,{onSettingsOpen:tt,onNewHistory:it}),!_e&&et&&jsxRuntimeExports.jsx(SettingUI,{open:et,onClose:nt,onToggle:_})]})}function BsMicFill(_e){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0z"},child:[]},{tag:"path",attr:{d:"M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5"},child:[]}]})(_e)}function BsMicMuteFill(_e){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13 8c0 .564-.094 1.107-.266 1.613l-.814-.814A4 4 0 0 0 12 8V7a.5.5 0 0 1 1 0zm-5 4c.818 0 1.578-.245 2.212-.667l.718.719a5 5 0 0 1-2.43.923V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 1 0v1a4 4 0 0 0 4 4m3-9v4.879L5.158 2.037A3.001 3.001 0 0 1 11 3"},child:[]},{tag:"path",attr:{d:"M9.486 10.607 5 6.12V8a3 3 0 0 0 4.486 2.607m-7.84-9.253 12 12 .708-.708-12-12z"},child:[]}]})(_e)}function BsPaperclip(_e){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0z"},child:[]}]})(_e)}function IoHandRightSharp(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M82.42 209.08c15.06-6.62 32.38 1.31 38.5 17.62L156 312h11.27V80c0-17.6 13.3-32 29.55-32 16.26 0 29.55 14.4 29.55 32v151.75l14.78.25V32c0-17.6 13.3-32 29.55-32 16.3 0 29.55 14.4 29.55 32v199.75L315 232V64c0-17.6 13.3-32 29.55-32 16.26 0 29.55 14.4 29.55 32v183.75l14.78.25V128c0-17.6 13.3-32 29.55-32C434.7 96 448 110.4 448 128v216c0 75.8-37.13 168-169 168-40.8 0-79.42-7-100.66-21a121.41 121.41 0 0 1-33.72-33.31 138 138 0 0 1-16-31.78L66.16 250.77c-6.11-16.31 1.2-35.06 16.26-41.69z"},child:[]}]})(_e)}const InputGroup=reactExports.forwardRef((_e,_)=>{const{startElement:et,startElementProps:tt,endElement:nt,endElementProps:it,children:at,startOffset:ot="6px",endOffset:st="6px",...dt}=_e,ht=reactExports.Children.only(at);return jsxRuntimeExports.jsxs(Group$4,{ref:_,...dt,children:[et&&jsxRuntimeExports.jsx(InputElement,{pointerEvents:"none",...tt,children:et}),reactExports.cloneElement(ht,{...et&&{ps:`calc(var(--input-height) - ${ot})`},...nt&&{pe:`calc(var(--input-height) - ${st})`},...at.props}),nt&&jsxRuntimeExports.jsx(InputElement,{placement:"end",...it,children:nt})]})}),footerStyles={footer:{container:_e=>({bg:_e?"transparent":"gray.800",borderTopRadius:_e?"none":"lg",transform:_e?"translateY(calc(100% - 24px))":"translateY(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",height:"100%",position:"relative",overflow:_e?"visible":"hidden",pb:"4"}),toggleButton:{height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"whiteAlpha.700",_hover:{color:"white"},bg:"transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},actionButton:{borderRadius:"12px",width:"50px",height:"50px",minW:"50px"},input:{bg:"gray.700",border:"none",height:"80px",borderRadius:"12px",fontSize:"18px",pl:"12",pr:"4",color:"whiteAlpha.900",_placeholder:{color:"whiteAlpha.500"},_focus:{border:"none",bg:"gray.700"},resize:"none",minHeight:"80px",maxHeight:"80px",py:"0",display:"flex",alignItems:"center",paddingTop:"28px",lineHeight:"1.4"},attachButton:{position:"absolute",left:"1",top:"50%",transform:"translateY(-50%)",color:"whiteAlpha.700",zIndex:2,_hover:{bg:"transparent",color:"white"}}},aiIndicator:{container:{bg:"#7C5CFF",color:"white",width:"110px",height:"30px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",overflow:"hidden"},text:{fontSize:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}};function AIStateIndicator(){const{aiState:_e}=useAiState(),_=footerStyles.aiIndicator,et={idle:"","thinking-speaking":"/",interrupted:"",loading:"",listening:"",waiting:""};return jsxRuntimeExports.jsx(Box,{..._.container,children:jsxRuntimeExports.jsx(Text$1,{..._.text,children:et[_e]})})}function useTextInput(){const[_e,_]=reactExports.useState(""),[et,tt]=reactExports.useState(!1),nt=useWebSocket(),{aiState:it,setAiState:at}=useAiState(),{interrupt:ot}=useInterrupt(),{appendHumanMessage:st}=useChatHistory(),{stopMic:dt,autoStopMic:ht}=useVAD(),{captureAllMedia:ct}=useMediaCapture(),ut=yt=>{_(yt.target.value)},ft=async()=>{if(!_e.trim()||!nt)return;it==="thinking-speaking"&&ot();const yt=await ct();st(_e.trim()),nt.sendMessage({type:"text-input",text:_e.trim(),images:yt}),at("thinking-speaking"),ht&&dt(),_("")};return{inputText:_e,setInputText:ut,handleSend:ft,handleKeyPress:yt=>{et||yt.key==="Enter"&&!yt.shiftKey&&(yt.preventDefault(),ft())},handleCompositionStart:()=>tt(!0),handleCompositionEnd:()=>tt(!1)}}const useFooter=()=>{const{inputText:_e,setInputText:_,handleKeyPress:et,handleCompositionStart:tt,handleCompositionEnd:nt}=useTextInput(),{interrupt:it}=useInterrupt(),{startMic:at,autoStartMicOn:ot}=useVAD(),{handleMicToggle:st,micOn:dt}=useMicToggle(),{setAiState:ht,aiState:ct}=useAiState(),{sendTriggerSignal:ut}=useTriggerSpeak(),{settings:ft}=useProactiveSpeak();return{inputValue:_e,handleInputChange:yt=>{_({target:{value:yt.target.value}}),ht(AiStateEnum.WAITING)},handleKeyPress:yt=>{et(yt)},handleCompositionStart:tt,handleCompositionEnd:nt,handleInterrupt:()=>{ct===AiStateEnum.THINKING_SPEAKING?(it(),ot&&at()):ft.allowButtonTrigger&&ut(-1)},handleMicToggle:st,micOn:dt}},ToggleButton=reactExports.memo(({isCollapsed:_e,onToggle:_})=>jsxRuntimeExports.jsx(Box,{...footerStyles.footer.toggleButton,onClick:_,color:"whiteAlpha.500",style:{transform:_e?"rotate(180deg)":"rotate(0deg)"},children:jsxRuntimeExports.jsx(FiChevronDown,{})}));ToggleButton.displayName="ToggleButton";const ActionButtons=reactExports.memo(({micOn:_e,onMicToggle:_,onInterrupt:et})=>jsxRuntimeExports.jsxs(HStack,{gap:2,children:[jsxRuntimeExports.jsx(IconButton,{bg:_e?"green.500":"red.500",...footerStyles.footer.actionButton,onClick:_,children:_e?jsxRuntimeExports.jsx(BsMicFill,{}):jsxRuntimeExports.jsx(BsMicMuteFill,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"Raise hand",bg:"yellow.500",...footerStyles.footer.actionButton,onClick:et,children:jsxRuntimeExports.jsx(IoHandRightSharp,{size:"24"})})]}));ActionButtons.displayName="ActionButtons";const MessageInput=reactExports.memo(({value:_e,onChange:_,onKeyDown:et,onCompositionStart:tt,onCompositionEnd:nt})=>jsxRuntimeExports.jsx(InputGroup,{flex:1,children:jsxRuntimeExports.jsxs(Box,{position:"relative",width:"100%",children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Attach file",variant:"ghost",...footerStyles.footer.attachButton,children:jsxRuntimeExports.jsx(BsPaperclip,{size:"24"})}),jsxRuntimeExports.jsx(Textarea,{value:_e,onChange:_,onKeyDown:et,onCompositionStart:tt,onCompositionEnd:nt,placeholder:"",...footerStyles.footer.input})]})}));MessageInput.displayName="MessageInput";function Footer({isCollapsed:_e=!1,onToggle:_}){const{inputValue:et,handleInputChange:tt,handleKeyPress:nt,handleCompositionStart:it,handleCompositionEnd:at,handleInterrupt:ot,handleMicToggle:st,micOn:dt}=useFooter();return jsxRuntimeExports.jsxs(Box,{...footerStyles.footer.container(_e),children:[jsxRuntimeExports.jsx(ToggleButton,{isCollapsed:_e,onToggle:_}),jsxRuntimeExports.jsx(Box,{pt:"0",px:"4",children:jsxRuntimeExports.jsxs(HStack,{width:"100%",gap:4,children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Box,{mb:"1.5",children:jsxRuntimeExports.jsx(AIStateIndicator,{})}),jsxRuntimeExports.jsx(ActionButtons,{micOn:dt,onMicToggle:st,onInterrupt:ot})]}),jsxRuntimeExports.jsx(MessageInput,{value:et,onChange:tt,onKeyDown:nt,onCompositionStart:it,onCompositionEnd:at})]})})]})}const isElectron=window.api!==void 0,getAppHeight=()=>typeof window<"u"&&/Mobi|Android/i.test(navigator.userAgent)?`${window.innerHeight}px`:isElectron?"calc(100vh - 30px)":"100vh",layoutStyles={appContainer:{width:"100vw",height:getAppHeight(),bg:"gray.900",color:"white",overflow:"hidden",position:"relative",display:"flex",flexDirection:{base:"column",md:"row"}},sidebar:{position:"relative",width:{base:"100%",md:"50%"},height:{base:"auto",md:"100%"},bg:"gray.800",borderRight:"1px solid",borderColor:"whiteAlpha.200",overflow:"hidden",flexShrink:0,transition:"all 0.2s"},mainContent:{flex:1,height:{base:"calc(100% - 120px)",md:"100%"},position:"relative",display:"flex",flexDirection:"column",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",overflow:"hidden"},canvas:{position:"relative",width:"100%",flex:1,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden",willChange:"transform"},footer:{width:"100%",height:{base:"100px",md:"120px"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",position:"relative",zIndex:1},toggleButton:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",height:"60px",bg:"whiteAlpha.100",_hover:{bg:"whiteAlpha.200"},borderLeftRadius:0,borderRightRadius:"md",zIndex:10},canvasHeight:_e=>({height:_e?"calc(100% - 24px)":"calc(100% - 120px)"}),sidebarToggleButton:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",height:"60px",bg:"gray.800",borderLeftRadius:0,borderRightRadius:"md",zIndex:10},collapsedFooter:{height:{base:"20px",md:"24px"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},windowsTitleBar:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"30px",backgroundColor:"gray.800",paddingX:"10px",css:{"-webkit-app-region":"drag"}},macTitleBar:{display:"flex",alignItems:"center",justifyContent:"center",height:"30px",backgroundColor:"gray.800",css:{"-webkit-app-region":"drag","-webkit-user-select":"none"}},titleBarTitle:{fontSize:"sm",color:"whiteAlpha.800",textAlign:"center"},titleBarButtons:{display:"flex",gap:"1"},titleBarButton:{size:"sm",variant:"ghost",color:"whiteAlpha.800",css:{"-webkit-app-region":"no-drag"},_hover:{backgroundColor:"whiteAlpha.200"}},closeButton:{size:"sm",variant:"ghost",color:"whiteAlpha.800",css:{"-webkit-app-region":"no-drag"},_hover:{backgroundColor:"red.500"}}};function WebSocketHandler({children:_e}){const[_,et]=reactExports.useState("CLOSED"),[tt,nt]=useLocalStorage("wsUrl",defaultWsUrl),[it,at]=useLocalStorage("baseUrl",defaultBaseUrl),{aiState:ot,setAiState:st,backendSynthComplete:dt,setBackendSynthComplete:ht}=useAiState(),{setModelInfo:ct}=useLive2DConfig(),{setSubtitleText:ut}=useSubtitle(),{clearResponse:ft,setForceNewMessage:gt,appendAIVisualMessage:mt}=useChatHistory(),{addAudioTask:vt}=useAudioTask(),yt=useBgUrl(),{confUid:bt,setConfName:_t,setConfUid:xt,setConfigFiles:St}=useConfig(),[Tt,wt]=reactExports.useState(void 0),{setSelfUid:Ct,setGroupMembers:Et,setIsOwner:At}=useGroup(),{startMic:Pt,stopMic:Rt,autoStartMicOnConvEnd:It}=useVAD(),Mt=reactExports.useRef(It),{interrupt:Ot}=useInterrupt();reactExports.useEffect(()=>{Mt.current=It},[It]),reactExports.useEffect(()=>{Tt&&(ct(Tt),wt(void 0))},[Tt,ct,bt]);const{setCurrentHistoryUid:$t,setMessages:Lt,setHistoryList:kt,appendHumanMessage:Nt}=useChatHistory(),Vt=reactExports.useCallback(Wt=>{switch(Wt){case"start-mic":console.log("Starting microphone..."),Pt();break;case"stop-mic":console.log("Stopping microphone..."),Rt();break;case"conversation-chain-start":st("thinking-speaking"),audioTaskQueue.clearQueue(),ft();break;case"conversation-chain-end":audioTaskQueue.addTask(()=>new Promise(nr=>{st(Jt=>Jt==="thinking-speaking"?(Mt.current&&Pt(),"idle"):Jt),nr()}));break;default:console.warn("Unknown control command:",Wt)}},[st,ft,gt,Pt,Rt]),zt=reactExports.useCallback(Wt=>{var nr,Jt;switch(console.log("Received message from server:",Wt),Wt.type){case"control":Wt.text&&Vt(Wt.text);break;case"set-model-and-conf":if(st("loading"),Wt.conf_name&&_t(Wt.conf_name),Wt.conf_uid&&(xt(Wt.conf_uid),console.log("confUid",Wt.conf_uid)),Wt.client_uid&&Ct(Wt.client_uid),wt(Wt.model_info),Wt.model_info&&!Wt.model_info.url.startsWith("http")){const lr=it+Wt.model_info.url;Wt.model_info.url=lr}st("idle");break;case"full-text":Wt.text&&ut(Wt.text);break;case"config-files":Wt.configs&&St(Wt.configs);break;case"config-switched":st("idle"),ut("New Character Loaded"),toaster.create({title:"Character switched",type:"success",duration:2e3}),wsService.sendMessage({type:"fetch-history-list"}),wsService.sendMessage({type:"create-new-history"});break;case"background-files":Wt.files&&(yt==null||yt.setBackgroundFiles(Wt.files));break;case"audio":ot==="interrupted"||ot==="listening"?console.log("Audio playback intercepted. Sentence:",(nr=Wt.display_text)==null?void 0:nr.text):(console.log("actions",Wt.actions),vt({audioBase64:Wt.audio||"",volumes:Wt.volumes||[],sliceLength:Wt.slice_length||0,displayText:Wt.display_text||null,expressions:((Jt=Wt.actions)==null?void 0:Jt.expressions)||null,forwarded:Wt.forwarded||!1}));break;case"visualization":Wt.visual_type&&Wt.visual_data&&Wt.display_text&&mt(Wt.visual_type,Wt.visual_data,Wt.display_text.name,Wt.display_text.avatar);break;case"history-data":Wt.messages&&Lt(Wt.messages),toaster.create({title:"History loaded",type:"success",duration:2e3});break;case"new-history-created":if(st("idle"),ut(""),Wt.history_uid){$t(Wt.history_uid),Lt([]);const lr={uid:Wt.history_uid,latest_message:null,timestamp:new Date().toISOString()};kt(pr=>[lr,...pr]),toaster.create({title:"New chat history created",type:"success",duration:2e3})}break;case"history-deleted":toaster.create({title:Wt.success?"History deleted successfully":"Failed to delete history",type:Wt.success?"success":"error",duration:2e3});break;case"history-list":Wt.histories&&(kt(Wt.histories),Wt.histories.length>0&&$t(Wt.histories[0].uid));break;case"user-input-transcription":console.log("user-input-transcription: ",Wt.text),Wt.text&&Nt(Wt.text);break;case"error":toaster.create({title:Wt.message,type:"error",duration:2e3});break;case"group-update":console.log("Received group-update:",Wt.members),Wt.members&&Et(Wt.members),Wt.is_owner!==void 0&&At(Wt.is_owner);break;case"group-operation-result":toaster.create({title:Wt.message,type:Wt.success?"success":"error",duration:2e3});break;case"backend-synth-complete":ht(!0);break;case"conversation-chain-end":audioTaskQueue.hasTask()||st(lr=>lr==="thinking-speaking"?"idle":lr);break;case"force-new-message":gt(!0);break;case"interrupt-signal":Ot(!1);break;default:console.warn("Unknown message type:",Wt.type)}},[ot,vt,Nt,it,yt,st,_t,xt,St,$t,kt,Lt,ct,ut,Pt,Rt,Ct,Et,At,dt,ht,ft]);reactExports.useEffect(()=>{wsService.connect(tt)},[tt]),reactExports.useEffect(()=>{const Wt=wsService.onStateChange(et),nr=wsService.onMessage(zt);return()=>{Wt.unsubscribe(),nr.unsubscribe()}},[tt,zt]);const Xt=reactExports.useMemo(()=>({sendMessage:wsService.sendMessage.bind(wsService),wsState:_,reconnect:()=>wsService.connect(tt),wsUrl:tt,setWsUrl:nt,baseUrl:it,setBaseUrl:at}),[_,tt,it]);return jsxRuntimeExports.jsx(WebSocketContext.Provider,{value:Xt,children:_e})}function TitleBar(){var st;const[_e,_]=reactExports.useState(!1),[et,tt]=reactExports.useState(!1),nt=((st=window.electron)==null?void 0:st.process.platform)==="darwin";reactExports.useEffect(()=>{var ct,ut;const dt=(ft,gt)=>{_(gt)},ht=(ft,gt)=>{tt(gt)};return(ct=window.electron)==null||ct.ipcRenderer.on("window-maximized-change",dt),(ut=window.electron)==null||ut.ipcRenderer.on("window-fullscreen-change",ht),()=>{var ft,gt;(ft=window.electron)==null||ft.ipcRenderer.removeAllListeners("window-maximized-change"),(gt=window.electron)==null||gt.ipcRenderer.removeAllListeners("window-fullscreen-change")}},[]);const it=()=>{var dt,ht;et?(dt=window.electron)==null||dt.ipcRenderer.send("window-unfullscreen"):(ht=window.electron)==null||ht.ipcRenderer.send("window-maximize")},at=()=>et?"Exit Full Screen":_e?"Restore":"Maximize",ot=()=>et?jsxRuntimeExports.jsx(FiChevronsDown,{}):_e?jsxRuntimeExports.jsx(FiMinimize2,{}):jsxRuntimeExports.jsx(FiMaximize2,{});return nt?jsxRuntimeExports.jsx(Box,{...layoutStyles.macTitleBar,children:jsxRuntimeExports.jsx(Box,{...layoutStyles.titleBarTitle,children:"Open LLM VTuber"})}):jsxRuntimeExports.jsxs(Box,{...layoutStyles.windowsTitleBar,children:[jsxRuntimeExports.jsx(Box,{...layoutStyles.titleBarTitle,children:"Open LLM VTuber"}),jsxRuntimeExports.jsxs(Box,{...layoutStyles.titleBarButtons,children:[jsxRuntimeExports.jsx(IconButton,{...layoutStyles.titleBarButton,onClick:()=>{var dt;return(dt=window.electron)==null?void 0:dt.ipcRenderer.send("window-minimize")},"aria-label":"Minimize",children:jsxRuntimeExports.jsx(FiMinus,{})}),jsxRuntimeExports.jsx(IconButton,{...layoutStyles.titleBarButton,onClick:it,"aria-label":at(),children:ot()}),jsxRuntimeExports.jsx(IconButton,{...layoutStyles.closeButton,onClick:()=>{var dt;return(dt=window.electron)==null?void 0:dt.ipcRenderer.send("window-close")},"aria-label":"Close",children:jsxRuntimeExports.jsx(FiX,{})})]})]})}function useInputSubtitle(){const{inputText:_e,setInputText:_,handleKeyPress:et,handleCompositionStart:tt,handleCompositionEnd:nt,handleSend:it}=useTextInput(),{messages:at}=useChatHistory(),{startMic:ot,autoStartMicOn:st}=useVAD(),{handleMicToggle:dt,micOn:ht}=useMicToggle(),{aiState:ct,setAiState:ut}=useAiState(),{interrupt:ft}=useInterrupt(),gt=at.filter(_t=>_t.role==="ai").slice(-1).map(_t=>_t.content)[0],mt=at.some(_t=>_t.role==="ai");return{inputValue:_e,handleInputChange:_t=>{_({target:{value:_t.target.value}}),ut(AiStateEnum.WAITING)},handleKeyPress:_t=>{et(_t)},handleCompositionStart:tt,handleCompositionEnd:nt,handleInterrupt:()=>{ft(),st&&ot()},handleMicToggle:dt,lastAIMessage:gt,hasAIMessages:mt,aiState:ct,micOn:ht,handleSend:it}}function useDraggable({isPet:_e=!1,componentId:_}){const[et,tt]=reactExports.useState(!1),nt=reactExports.useRef({x:0,y:0}),it=reactExports.useRef({x:0,y:0}),at=reactExports.useRef(null);return{elementRef:at,isDragging:et,handleMouseDown:ht=>{tt(!0),it.current={x:ht.clientX-nt.current.x,y:ht.clientY-nt.current.y};const ct=ft=>{if(!at.current)return;const gt={x:ft.clientX-it.current.x,y:ft.clientY-it.current.y};nt.current=gt,at.current.style.transform=`translateX(-50%) translate(${nt.current.x}px, ${nt.current.y}px)`},ut=()=>{tt(!1),document.removeEventListener("mousemove",ct,!0),document.removeEventListener("mouseup",ut,!0)};document.addEventListener("mousemove",ct,!0),document.addEventListener("mouseup",ut,!0)},handleMouseEnter:()=>{var ht;_e&&((ht=window.api)==null||ht.updateComponentHover(_,!0))},handleMouseLeave:()=>{var ht;_e&&!et&&((ht=window.api)==null||ht.updateComponentHover(_,!1))}}}const inputSubtitleStyles={container:{display:"flex",alignItems:"flex-end",justifyContent:"center",maxW:"fit-content",position:"absolute",bottom:"120px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,userSelect:"none",willChange:"transform",padding:0},box:{w:"400px",rounded:"xl",overflow:"hidden",boxShadow:"lg",bg:"blackAlpha.700",backdropFilter:"blur(8px)",css:{WebkitUserSelect:"none"}},messageStack:{p:"3",gap:1,alignItems:"stretch",justify:"flex-end"},messageText:{color:"white",fontSize:"sm",lineHeight:"1.5",transition:"all 0.3s"},statusBox:{bg:"blackAlpha.600",p:"3",borderTop:"1px",borderColor:"whiteAlpha.200"},statusText:{fontSize:"xs",color:"whiteAlpha.800",transition:"all 0.3s"},iconButton:{size:"xs",variant:"ghost",color:"whiteAlpha.800",_hover:{bg:"whiteAlpha.200"}},inputBox:{bg:"blackAlpha.600",borderTop:"1px",borderColor:"whiteAlpha.200"},input:{size:"sm",bg:"blackAlpha.500",color:"white",_placeholder:{color:"whiteAlpha.500"},borderColor:"whiteAlpha.300",_focus:{borderColor:"whiteAlpha.500",outline:"none"},flex:"1"},sendButton:{p:"1.5",bg:"blackAlpha.500",rounded:"lg",_hover:{bg:"blackAlpha.600"},transition:"colors",color:"whiteAlpha.800",size:"sm"},draggableContainer:_e=>({cursor:_e?"grabbing":"grab",transition:_e?"none":"transform 0.1s ease",_active:{cursor:"grabbing"}}),closeButton:{position:"absolute",top:0,right:0,size:"2xs",minW:"6",height:"6",padding:0,variant:"ghost",color:"whiteAlpha.400",bg:"transparent",_hover:{bg:"blackAlpha.300",color:"whiteAlpha.800"},zIndex:10}};function InputSubtitle({isPet:_e=!1}){const{inputValue:_,handleInputChange:et,handleKeyPress:tt,handleCompositionStart:nt,handleCompositionEnd:it,handleInterrupt:at,handleMicToggle:ot,handleSend:st,lastAIMessage:dt,hasAIMessages:ht,aiState:ct,micOn:ut}=useInputSubtitle(),{elementRef:ft,isDragging:gt,handleMouseDown:mt,handleMouseEnter:vt,handleMouseLeave:yt}=useDraggable({isPet:_e,componentId:"input-subtitle"}),[bt,_t]=reactExports.useState(!0),xt=reactExports.useCallback(()=>{var Tt;_e&&((Tt=window.api)==null||Tt.updateComponentHover("input-subtitle",!1)),_t(!1)},[_e]),St=()=>{_t(!0)};return reactExports.useEffect(()=>{var Tt;if(_e){const wt=(Tt=window.api)==null?void 0:Tt.onToggleInputSubtitle(()=>{bt?xt():St()});return()=>wt==null?void 0:wt()}return()=>{}},[xt,_e,bt]),reactExports.useEffect(()=>(window.inputSubtitle={open:St,close:xt},()=>{delete window.inputSubtitle}),[_e,xt]),bt?jsxRuntimeExports.jsx(Box,{ref:ft,...inputSubtitleStyles.container,...inputSubtitleStyles.draggableContainer(gt),onMouseDown:mt,onMouseEnter:vt,onMouseLeave:yt,children:jsxRuntimeExports.jsxs(Box,{...inputSubtitleStyles.box,children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Close subtitle",onClick:xt,...inputSubtitleStyles.closeButton,children:jsxRuntimeExports.jsx(LuX,{size:12})}),ht&&jsxRuntimeExports.jsx(VStack,{minH:dt?"32px":"0px",...inputSubtitleStyles.messageStack,children:dt&&jsxRuntimeExports.jsx(Text$1,{...inputSubtitleStyles.messageText,children:dt})}),jsxRuntimeExports.jsx(Box,{...inputSubtitleStyles.statusBox,children:jsxRuntimeExports.jsxs(Flex,{align:"center",justify:"space-between",color:"whiteAlpha.700",children:[jsxRuntimeExports.jsxs(Flex,{align:"center",gap:"2",children:[jsxRuntimeExports.jsx(LuBell,{size:16}),jsxRuntimeExports.jsx(Text$1,{...inputSubtitleStyles.statusText,children:ct})]}),jsxRuntimeExports.jsxs(Flex,{gap:"2",children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Toggle microphone",onClick:ot,...inputSubtitleStyles.iconButton,children:ut?jsxRuntimeExports.jsx(LuMic,{size:16}):jsxRuntimeExports.jsx(LuMicOff,{size:16})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"Interrupt",onClick:at,...inputSubtitleStyles.iconButton,children:jsxRuntimeExports.jsx(LuHand,{size:16})})]})]})}),jsxRuntimeExports.jsx(Box,{...inputSubtitleStyles.inputBox,children:jsxRuntimeExports.jsxs(Stack,{direction:"row",gap:"2",p:"2",children:[jsxRuntimeExports.jsx(Input,{value:_,onChange:et,onKeyDown:tt,onCompositionStart:nt,onCompositionEnd:it,placeholder:"Type your message...",...inputSubtitleStyles.input}),jsxRuntimeExports.jsx(Button$1,{onClick:st,...inputSubtitleStyles.sendButton,children:jsxRuntimeExports.jsx(LuSend,{size:16})})]})})]})}):null}function App(){const[_e,_]=reactExports.useState(!0),[et,tt]=reactExports.useState(!1),[nt,it]=reactExports.useState("window"),at=window.api!==void 0;return reactExports.useEffect(()=>{at&&window.electron.ipcRenderer.on("pre-mode-changed",(ot,st)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.electron.ipcRenderer.send("renderer-ready-for-mode-change",st)})})})},[at]),reactExports.useEffect(()=>{at&&window.electron.ipcRenderer.on("mode-changed",(ot,st)=>{it(st),requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.electron.ipcRenderer.send("mode-change-rendered")})})})},[at]),reactExports.useEffect(()=>{const ot=()=>{const st=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${st}px`)};return ot(),window.addEventListener("resize",ot),()=>window.removeEventListener("resize",ot)},[]),jsxRuntimeExports.jsx(ChakraProvider,{value:defaultSystem,children:jsxRuntimeExports.jsx(Live2DModelProvider,{children:jsxRuntimeExports.jsx(CameraProvider,{children:jsxRuntimeExports.jsx(ScreenCaptureProvider,{children:jsxRuntimeExports.jsx(CharacterConfigProvider,{children:jsxRuntimeExports.jsx(ChatHistoryProvider,{children:jsxRuntimeExports.jsx(AiStateProvider,{children:jsxRuntimeExports.jsx(ProactiveSpeakProvider,{children:jsxRuntimeExports.jsx(Live2DConfigProvider,{children:jsxRuntimeExports.jsx(SubtitleProvider,{children:jsxRuntimeExports.jsx(VADProvider,{children:jsxRuntimeExports.jsx(BgUrlProvider,{children:jsxRuntimeExports.jsx(GroupProvider,{children:jsxRuntimeExports.jsxs(WebSocketHandler,{children:[jsxRuntimeExports.jsx(Toaster,{}),nt==="window"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[at&&jsxRuntimeExports.jsx(TitleBar,{}),jsxRuntimeExports.jsxs(Flex,{...layoutStyles.appContainer,children:[jsxRuntimeExports.jsx(Box,{...layoutStyles.sidebar,...!_e&&{width:"24px"},children:jsxRuntimeExports.jsx(Sidebar,{isCollapsed:!_e,onToggle:()=>_(!_e)})}),jsxRuntimeExports.jsxs(Box,{...layoutStyles.mainContent,children:[jsxRuntimeExports.jsx(Canvas,{}),jsxRuntimeExports.jsx(Box,{...layoutStyles.footer,...et&&layoutStyles.collapsedFooter,children:jsxRuntimeExports.jsx(Footer,{isCollapsed:et,onToggle:()=>tt(!et)})})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Live2D$1,{isPet:nt==="pet"}),nt==="pet"&&jsxRuntimeExports.jsx(InputSubtitle,{isPet:nt==="pet"})]})]})})})})})})})})})})})})})})}const originalConsoleWarn=console.warn;console.warn=(..._e)=>{typeof _e[0]=="string"&&_e[0].includes("onnxruntime")||originalConsoleWarn.apply(console,_e)};typeof window<"u"&&createRoot$1(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
